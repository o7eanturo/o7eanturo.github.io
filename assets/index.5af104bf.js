var M6=Object.defineProperty;var D6=(t,e,n)=>e in t?M6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Lt=(t,e,n)=>(D6(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function RC(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?i=>!!n[i.toLowerCase()]:i=>!!n[i]}function Nm(t){if(yt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=lr(r)?F6(r):Nm(r);if(i)for(const s in i)e[s]=i[s]}return e}else{if(lr(t))return t;if(Cn(t))return t}}const T6=/;(?![^(]*\))/g,P6=/:([^]+)/,L6=/\/\*.*?\*\//gs;function F6(t){const e={};return t.replace(L6,"").split(T6).forEach(n=>{if(n){const r=n.split(P6);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function uu(t){let e="";if(lr(t))e=t;else if(yt(t))for(let n=0;n<t.length;n++){const r=uu(t[n]);r&&(e+=r+" ")}else if(Cn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const I6="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",k6=RC(I6);function ZR(t){return!!t||t===""}function R6(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Zy(t[r],e[r]);return n}function Zy(t,e){if(t===e)return!0;let n=JD(t),r=JD(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Ng(t),r=Ng(e),n||r)return t===e;if(n=yt(t),r=yt(e),n||r)return n&&r?R6(t,e):!1;if(n=Cn(t),r=Cn(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Zy(t[o],e[o]))return!1}}return String(t)===String(e)}const qe=t=>lr(t)?t:t==null?"":yt(t)||Cn(t)&&(t.toString===nO||!Ft(t.toString))?JSON.stringify(t,QR,2):String(t),QR=(t,e)=>e&&e.__v_isRef?QR(t,e.value):Oh(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:eO(e)?{[`Set(${e.size})`]:[...e.values()]}:Cn(e)&&!yt(e)&&!rO(e)?String(e):e,Vn={},Rh=[],To=()=>{},O6=()=>!1,B6=/^on[^a-z]/,l_=t=>B6.test(t),OC=t=>t.startsWith("onUpdate:"),Kr=Object.assign,BC=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},N6=Object.prototype.hasOwnProperty,Kt=(t,e)=>N6.call(t,e),yt=Array.isArray,Oh=t=>Vm(t)==="[object Map]",eO=t=>Vm(t)==="[object Set]",JD=t=>Vm(t)==="[object Date]",Ft=t=>typeof t=="function",lr=t=>typeof t=="string",Ng=t=>typeof t=="symbol",Cn=t=>t!==null&&typeof t=="object",tO=t=>Cn(t)&&Ft(t.then)&&Ft(t.catch),nO=Object.prototype.toString,Vm=t=>nO.call(t),V6=t=>Vm(t).slice(8,-1),rO=t=>Vm(t)==="[object Object]",NC=t=>lr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yy=RC(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),u_=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},z6=/-(\w)/g,Js=u_(t=>t.replace(z6,(e,n)=>n?n.toUpperCase():"")),G6=/\B([A-Z])/g,cf=u_(t=>t.replace(G6,"-$1").toLowerCase()),_l=u_(t=>t.charAt(0).toUpperCase()+t.slice(1)),_y=u_(t=>t?`on${_l(t)}`:""),Vg=(t,e)=>!Object.is(t,e),wy=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Qy=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},KS=t=>{const e=parseFloat(t);return isNaN(e)?t:e},U6=t=>{const e=lr(t)?Number(t):NaN;return isNaN(e)?t:e};let KD;const H6=()=>KD||(KD=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let ws;class iO{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=ws,!e&&ws&&(this.index=(ws.scopes||(ws.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=ws;try{return ws=this,e()}finally{ws=n}}}on(){ws=this}off(){ws=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Md(t){return new iO(t)}function W6(t,e=ws){e&&e.active&&e.effects.push(t)}function sO(){return ws}function fs(t){ws&&ws.cleanups.push(t)}const VC=t=>{const e=new Set(t);return e.w=0,e.n=0,e},oO=t=>(t.w&Ru)>0,aO=t=>(t.n&Ru)>0,$6=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=Ru},X6=t=>{const{deps:e}=t;if(e.length){let n=0;for(let r=0;r<e.length;r++){const i=e[r];oO(i)&&!aO(i)?i.delete(t):e[n++]=i,i.w&=~Ru,i.n&=~Ru}e.length=n}},e1=new WeakMap;let Yp=0,Ru=1;const ZS=30;let So;const Yc=Symbol(""),QS=Symbol("");class zC{constructor(e,n=null,r){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,W6(this,r)}run(){if(!this.active)return this.fn();let e=So,n=wu;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=So,So=this,wu=!0,Ru=1<<++Yp,Yp<=ZS?$6(this):ZD(this),this.fn()}finally{Yp<=ZS&&X6(this),Ru=1<<--Yp,So=this.parent,wu=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){So===this?this.deferStop=!0:this.active&&(ZD(this),this.onStop&&this.onStop(),this.active=!1)}}function ZD(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let wu=!0;const lO=[];function Dd(){lO.push(wu),wu=!1}function Td(){const t=lO.pop();wu=t===void 0?!0:t}function hs(t,e,n){if(wu&&So){let r=e1.get(t);r||e1.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=VC()),uO(i)}}function uO(t,e){let n=!1;Yp<=ZS?aO(t)||(t.n|=Ru,n=!oO(t)):n=!t.has(So),n&&(t.add(So),So.deps.push(t))}function fl(t,e,n,r,i,s){const o=e1.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&yt(t)){const l=Number(r);o.forEach((u,c)=>{(c==="length"||c>=l)&&a.push(u)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":yt(t)?NC(n)&&a.push(o.get("length")):(a.push(o.get(Yc)),Oh(t)&&a.push(o.get(QS)));break;case"delete":yt(t)||(a.push(o.get(Yc)),Oh(t)&&a.push(o.get(QS)));break;case"set":Oh(t)&&a.push(o.get(Yc));break}if(a.length===1)a[0]&&eA(a[0]);else{const l=[];for(const u of a)u&&l.push(...u);eA(VC(l))}}function eA(t,e){const n=yt(t)?t:[...t];for(const r of n)r.computed&&QD(r);for(const r of n)r.computed||QD(r)}function QD(t,e){(t!==So||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}function Y6(t,e){var n;return(n=e1.get(t))===null||n===void 0?void 0:n.get(e)}const j6=RC("__proto__,__v_isRef,__isVue"),cO=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Ng)),q6=GC(),J6=GC(!1,!0),K6=GC(!0),eT=Z6();function Z6(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Ye(this);for(let s=0,o=this.length;s<o;s++)hs(r,"get",s+"");const i=r[e](...n);return i===-1||i===!1?r[e](...n.map(Ye)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){Dd();const r=Ye(this)[e].apply(this,n);return Td(),r}}),t}function Q6(t){const e=Ye(this);return hs(e,"has",t),e.hasOwnProperty(t)}function GC(t=!1,e=!1){return function(r,i,s){if(i==="__v_isReactive")return!t;if(i==="__v_isReadonly")return t;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&s===(t?e?gH:gO:e?pO:dO).get(r))return r;const o=yt(r);if(!t){if(o&&Kt(eT,i))return Reflect.get(eT,i,s);if(i==="hasOwnProperty")return Q6}const a=Reflect.get(r,i,s);return(Ng(i)?cO.has(i):j6(i))||(t||hs(r,"get",i),e)?a:_n(a)?o&&NC(i)?a:a.value:Cn(a)?t?zm(a):Yr(a):a}}const eH=fO(),tH=fO(!0);function fO(t=!1){return function(n,r,i,s){let o=n[r];if(nd(o)&&_n(o)&&!_n(i))return!1;if(!t&&(!t1(i)&&!nd(i)&&(o=Ye(o),i=Ye(i)),!yt(n)&&_n(o)&&!_n(i)))return o.value=i,!0;const a=yt(n)&&NC(r)?Number(r)<n.length:Kt(n,r),l=Reflect.set(n,r,i,s);return n===Ye(s)&&(a?Vg(i,o)&&fl(n,"set",r,i):fl(n,"add",r,i)),l}}function nH(t,e){const n=Kt(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&fl(t,"delete",e,void 0),r}function rH(t,e){const n=Reflect.has(t,e);return(!Ng(e)||!cO.has(e))&&hs(t,"has",e),n}function iH(t){return hs(t,"iterate",yt(t)?"length":Yc),Reflect.ownKeys(t)}const hO={get:q6,set:eH,deleteProperty:nH,has:rH,ownKeys:iH},sH={get:K6,set(t,e){return!0},deleteProperty(t,e){return!0}},oH=Kr({},hO,{get:J6,set:tH}),UC=t=>t,c_=t=>Reflect.getPrototypeOf(t);function Lv(t,e,n=!1,r=!1){t=t.__v_raw;const i=Ye(t),s=Ye(e);n||(e!==s&&hs(i,"get",e),hs(i,"get",s));const{has:o}=c_(i),a=r?UC:n?$C:zg;if(o.call(i,e))return a(t.get(e));if(o.call(i,s))return a(t.get(s));t!==i&&t.get(e)}function Fv(t,e=!1){const n=this.__v_raw,r=Ye(n),i=Ye(t);return e||(t!==i&&hs(r,"has",t),hs(r,"has",i)),t===i?n.has(t):n.has(t)||n.has(i)}function Iv(t,e=!1){return t=t.__v_raw,!e&&hs(Ye(t),"iterate",Yc),Reflect.get(t,"size",t)}function tT(t){t=Ye(t);const e=Ye(this);return c_(e).has.call(e,t)||(e.add(t),fl(e,"add",t,t)),this}function nT(t,e){e=Ye(e);const n=Ye(this),{has:r,get:i}=c_(n);let s=r.call(n,t);s||(t=Ye(t),s=r.call(n,t));const o=i.call(n,t);return n.set(t,e),s?Vg(e,o)&&fl(n,"set",t,e):fl(n,"add",t,e),this}function rT(t){const e=Ye(this),{has:n,get:r}=c_(e);let i=n.call(e,t);i||(t=Ye(t),i=n.call(e,t)),r&&r.call(e,t);const s=e.delete(t);return i&&fl(e,"delete",t,void 0),s}function iT(){const t=Ye(this),e=t.size!==0,n=t.clear();return e&&fl(t,"clear",void 0,void 0),n}function kv(t,e){return function(r,i){const s=this,o=s.__v_raw,a=Ye(o),l=e?UC:t?$C:zg;return!t&&hs(a,"iterate",Yc),o.forEach((u,c)=>r.call(i,l(u),l(c),s))}}function Rv(t,e,n){return function(...r){const i=this.__v_raw,s=Ye(i),o=Oh(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=i[t](...r),c=n?UC:e?$C:zg;return!e&&hs(s,"iterate",l?QS:Yc),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:a?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Ol(t){return function(...e){return t==="delete"?!1:this}}function aH(){const t={get(s){return Lv(this,s)},get size(){return Iv(this)},has:Fv,add:tT,set:nT,delete:rT,clear:iT,forEach:kv(!1,!1)},e={get(s){return Lv(this,s,!1,!0)},get size(){return Iv(this)},has:Fv,add:tT,set:nT,delete:rT,clear:iT,forEach:kv(!1,!0)},n={get(s){return Lv(this,s,!0)},get size(){return Iv(this,!0)},has(s){return Fv.call(this,s,!0)},add:Ol("add"),set:Ol("set"),delete:Ol("delete"),clear:Ol("clear"),forEach:kv(!0,!1)},r={get(s){return Lv(this,s,!0,!0)},get size(){return Iv(this,!0)},has(s){return Fv.call(this,s,!0)},add:Ol("add"),set:Ol("set"),delete:Ol("delete"),clear:Ol("clear"),forEach:kv(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=Rv(s,!1,!1),n[s]=Rv(s,!0,!1),e[s]=Rv(s,!1,!0),r[s]=Rv(s,!0,!0)}),[t,n,e,r]}const[lH,uH,cH,fH]=aH();function HC(t,e){const n=e?t?fH:cH:t?uH:lH;return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Kt(n,i)&&i in r?n:r,i,s)}const hH={get:HC(!1,!1)},dH={get:HC(!1,!0)},pH={get:HC(!0,!1)},dO=new WeakMap,pO=new WeakMap,gO=new WeakMap,gH=new WeakMap;function mH(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vH(t){return t.__v_skip||!Object.isExtensible(t)?0:mH(V6(t))}function Yr(t){return nd(t)?t:WC(t,!1,hO,hH,dO)}function yH(t){return WC(t,!1,oH,dH,pO)}function zm(t){return WC(t,!0,sH,pH,gO)}function WC(t,e,n,r,i){if(!Cn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=vH(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function bu(t){return nd(t)?bu(t.__v_raw):!!(t&&t.__v_isReactive)}function nd(t){return!!(t&&t.__v_isReadonly)}function t1(t){return!!(t&&t.__v_isShallow)}function mO(t){return bu(t)||nd(t)}function Ye(t){const e=t&&t.__v_raw;return e?Ye(e):t}function rd(t){return Qy(t,"__v_skip",!0),t}const zg=t=>Cn(t)?Yr(t):t,$C=t=>Cn(t)?zm(t):t;function vO(t){wu&&So&&(t=Ye(t),uO(t.dep||(t.dep=VC())))}function yO(t,e){t=Ye(t);const n=t.dep;n&&eA(n)}function _n(t){return!!(t&&t.__v_isRef===!0)}function Se(t){return _O(t,!1)}function f_(t){return _O(t,!0)}function _O(t,e){return _n(t)?t:new _H(t,e)}class _H{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Ye(e),this._value=n?e:zg(e)}get value(){return vO(this),this._value}set value(e){const n=this.__v_isShallow||t1(e)||nd(e);e=n?e:Ye(e),Vg(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:zg(e),yO(this))}}function Hi(t){return _n(t)?t.value:t}const wH={get:(t,e,n)=>Hi(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return _n(i)&&!_n(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function wO(t){return bu(t)?t:new Proxy(t,wH)}function h_(t){const e=yt(t)?new Array(t.length):{};for(const n in t)e[n]=Ne(t,n);return e}class bH{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Y6(Ye(this._object),this._key)}}function Ne(t,e,n){const r=t[e];return _n(r)?r:new bH(t,e,n)}var bO;class xH{constructor(e,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[bO]=!1,this._dirty=!0,this.effect=new zC(e,()=>{this._dirty||(this._dirty=!0,yO(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const e=Ye(this);return vO(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}bO="__v_isReadonly";function SH(t,e,n=!1){let r,i;const s=Ft(t);return s?(r=t,i=To):(r=t.get,i=t.set),new xH(r,i,s||!i,n)}function xu(t,e,n,r){let i;try{i=r?t(...r):t()}catch(s){d_(s,e,n)}return i}function js(t,e,n,r){if(Ft(t)){const s=xu(t,e,n,r);return s&&tO(s)&&s.catch(o=>{d_(o,e,n)}),s}const i=[];for(let s=0;s<t.length;s++)i.push(js(t[s],e,n,r));return i}function d_(t,e,n,r=!0){const i=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){xu(l,null,10,[t,o,a]);return}}AH(t,n,i,r)}function AH(t,e,n,r=!0){console.error(t)}let Gg=!1,tA=!1;const bi=[];let ca=0;const Bh=[];let rl=null,kc=0;const xO=Promise.resolve();let XC=null;function En(t){const e=XC||xO;return t?e.then(this?t.bind(this):t):e}function EH(t){let e=ca+1,n=bi.length;for(;e<n;){const r=e+n>>>1;Ug(bi[r])<t?e=r+1:n=r}return e}function YC(t){(!bi.length||!bi.includes(t,Gg&&t.allowRecurse?ca+1:ca))&&(t.id==null?bi.push(t):bi.splice(EH(t.id),0,t),SO())}function SO(){!Gg&&!tA&&(tA=!0,XC=xO.then(EO))}function CH(t){const e=bi.indexOf(t);e>ca&&bi.splice(e,1)}function MH(t){yt(t)?Bh.push(...t):(!rl||!rl.includes(t,t.allowRecurse?kc+1:kc))&&Bh.push(t),SO()}function sT(t,e=Gg?ca+1:0){for(;e<bi.length;e++){const n=bi[e];n&&n.pre&&(bi.splice(e,1),e--,n())}}function AO(t){if(Bh.length){const e=[...new Set(Bh)];if(Bh.length=0,rl){rl.push(...e);return}for(rl=e,rl.sort((n,r)=>Ug(n)-Ug(r)),kc=0;kc<rl.length;kc++)rl[kc]();rl=null,kc=0}}const Ug=t=>t.id==null?1/0:t.id,DH=(t,e)=>{const n=Ug(t)-Ug(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function EO(t){tA=!1,Gg=!0,bi.sort(DH);const e=To;try{for(ca=0;ca<bi.length;ca++){const n=bi[ca];n&&n.active!==!1&&xu(n,null,14)}}finally{ca=0,bi.length=0,AO(),Gg=!1,XC=null,(bi.length||Bh.length)&&EO()}}function TH(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Vn;let i=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in r){const c=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:h}=r[c]||Vn;h&&(i=n.map(d=>lr(d)?d.trim():d)),f&&(i=n.map(KS))}let a,l=r[a=_y(e)]||r[a=_y(Js(e))];!l&&s&&(l=r[a=_y(cf(e))]),l&&js(l,t,6,i);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,js(u,t,6,i)}}function CO(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ft(t)){const l=u=>{const c=CO(u,e,!0);c&&(a=!0,Kr(o,c))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(Cn(t)&&r.set(t,null),null):(yt(s)?s.forEach(l=>o[l]=null):Kr(o,s),Cn(t)&&r.set(t,o),o)}function p_(t,e){return!t||!l_(e)?!1:(e=e.slice(2).replace(/Once$/,""),Kt(t,e[0].toLowerCase()+e.slice(1))||Kt(t,cf(e))||Kt(t,e))}let Cs=null,g_=null;function n1(t){const e=Cs;return Cs=t,g_=t&&t.type.__scopeId||null,e}function PH(t){g_=t}function LH(){g_=null}function ie(t,e=Cs,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&mT(-1);const s=n1(e);let o;try{o=t(...i)}finally{n1(s),r._d&&mT(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Gw(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:g}=t;let x,_;const m=n1(t);try{if(n.shapeFlag&4){const b=i||r;x=na(c.call(b,b,f,s,d,h,p)),_=l}else{const b=e;x=na(b.length>1?b(s,{attrs:l,slots:a,emit:u}):b(s,null)),_=e.props?l:FH(l)}}catch(b){fg.length=0,d_(b,t,1),x=P(Po)}let v=x;if(_&&g!==!1){const b=Object.keys(_),{shapeFlag:w}=v;b.length&&w&7&&(o&&b.some(OC)&&(_=IH(_,o)),v=hl(v,_))}return n.dirs&&(v=hl(v),v.dirs=v.dirs?v.dirs.concat(n.dirs):n.dirs),n.transition&&(v.transition=n.transition),x=v,n1(m),x}const FH=t=>{let e;for(const n in t)(n==="class"||n==="style"||l_(n))&&((e||(e={}))[n]=t[n]);return e},IH=(t,e)=>{const n={};for(const r in t)(!OC(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function kH(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?oT(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(o[h]!==r[h]&&!p_(u,h))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?oT(r,o,u):!0:!!o;return!1}function oT(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!p_(n,s))return!0}return!1}function RH({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const OH=t=>t.__isSuspense;function BH(t,e){e&&e.pendingBranch?yt(t)?e.effects.push(...t):e.effects.push(t):MH(t)}function ar(t,e){if(gr){let n=gr.provides;const r=gr.parent&&gr.parent.provides;r===n&&(n=gr.provides=Object.create(r)),n[t]=e}}function zt(t,e,n=!1){const r=gr||Cs;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ft(e)?e.call(r.proxy):e}}function Bo(t,e){return jC(t,null,e)}const Ov={};function He(t,e,n){return jC(t,e,n)}function jC(t,e,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:o}=Vn){const a=sO()===(gr==null?void 0:gr.scope)?gr:null;let l,u=!1,c=!1;if(_n(t)?(l=()=>t.value,u=t1(t)):bu(t)?(l=()=>t,r=!0):yt(t)?(c=!0,u=t.some(v=>bu(v)||t1(v)),l=()=>t.map(v=>{if(_n(v))return v.value;if(bu(v))return Vc(v);if(Ft(v))return xu(v,a,2)})):Ft(t)?e?l=()=>xu(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),js(t,a,3,[h])}:l=To,e&&r){const v=l;l=()=>Vc(v())}let f,h=v=>{f=_.onStop=()=>{xu(v,a,4)}},d;if(Xg)if(h=To,e?n&&js(e,a,3,[l(),c?[]:void 0,h]):l(),i==="sync"){const v=CW();d=v.__watcherHandles||(v.__watcherHandles=[])}else return To;let p=c?new Array(t.length).fill(Ov):Ov;const g=()=>{if(!!_.active)if(e){const v=_.run();(r||u||(c?v.some((b,w)=>Vg(b,p[w])):Vg(v,p)))&&(f&&f(),js(e,a,3,[v,p===Ov?void 0:c&&p[0]===Ov?[]:p,h]),p=v)}else _.run()};g.allowRecurse=!!e;let x;i==="sync"?x=g:i==="post"?x=()=>es(g,a&&a.suspense):(g.pre=!0,a&&(g.id=a.uid),x=()=>YC(g));const _=new zC(l,x);e?n?g():p=_.run():i==="post"?es(_.run.bind(_),a&&a.suspense):_.run();const m=()=>{_.stop(),a&&a.scope&&BC(a.scope.effects,_)};return d&&d.push(m),m}function NH(t,e,n){const r=this.proxy,i=lr(t)?t.includes(".")?MO(r,t):()=>r[t]:t.bind(r,r);let s;Ft(e)?s=e:(s=e.handler,n=e);const o=gr;id(this);const a=jC(i,s.bind(r),n);return o?id(o):jc(),a}function MO(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function Vc(t,e){if(!Cn(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),_n(t))Vc(t.value,e);else if(yt(t))for(let n=0;n<t.length;n++)Vc(t[n],e);else if(eO(t)||Oh(t))t.forEach(n=>{Vc(n,e)});else if(rO(t))for(const n in t)Vc(t[n],e);return t}function DO(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return hi(()=>{t.isMounted=!0}),qi(()=>{t.isUnmounting=!0}),t}const Rs=[Function,Array],VH={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Rs,onEnter:Rs,onAfterEnter:Rs,onEnterCancelled:Rs,onBeforeLeave:Rs,onLeave:Rs,onAfterLeave:Rs,onLeaveCancelled:Rs,onBeforeAppear:Rs,onAppear:Rs,onAfterAppear:Rs,onAppearCancelled:Rs},setup(t,{slots:e}){const n=Aa(),r=DO();let i;return()=>{const s=e.default&&qC(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const g of s)if(g.type!==Po){o=g;break}}const a=Ye(t),{mode:l}=a;if(r.isLeaving)return Uw(o);const u=aT(o);if(!u)return Uw(o);const c=Hg(u,a,r,n);Wg(u,c);const f=n.subTree,h=f&&aT(f);let d=!1;const{getTransitionKey:p}=u.type;if(p){const g=p();i===void 0?i=g:g!==i&&(i=g,d=!0)}if(h&&h.type!==Po&&(!Rc(u,h)||d)){const g=Hg(h,a,r,n);if(Wg(h,g),l==="out-in")return r.isLeaving=!0,g.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&n.update()},Uw(o);l==="in-out"&&u.type!==Po&&(g.delayLeave=(x,_,m)=>{const v=PO(r,h);v[String(h.key)]=h,x._leaveCb=()=>{_(),x._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=m})}return o}}},TO=VH;function PO(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Hg(t,e,n,r){const{appear:i,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:f,onLeave:h,onAfterLeave:d,onLeaveCancelled:p,onBeforeAppear:g,onAppear:x,onAfterAppear:_,onAppearCancelled:m}=e,v=String(t.key),b=PO(n,t),w=(S,C)=>{S&&js(S,r,9,C)},A=(S,C)=>{const M=C[1];w(S,C),yt(S)?S.every(D=>D.length<=1)&&M():S.length<=1&&M()},E={mode:s,persisted:o,beforeEnter(S){let C=a;if(!n.isMounted)if(i)C=g||a;else return;S._leaveCb&&S._leaveCb(!0);const M=b[v];M&&Rc(t,M)&&M.el._leaveCb&&M.el._leaveCb(),w(C,[S])},enter(S){let C=l,M=u,D=c;if(!n.isMounted)if(i)C=x||l,M=_||u,D=m||c;else return;let T=!1;const L=S._enterCb=F=>{T||(T=!0,F?w(D,[S]):w(M,[S]),E.delayedLeave&&E.delayedLeave(),S._enterCb=void 0)};C?A(C,[S,L]):L()},leave(S,C){const M=String(t.key);if(S._enterCb&&S._enterCb(!0),n.isUnmounting)return C();w(f,[S]);let D=!1;const T=S._leaveCb=L=>{D||(D=!0,C(),L?w(p,[S]):w(d,[S]),S._leaveCb=void 0,b[M]===t&&delete b[M])};b[M]=t,h?A(h,[S,T]):T()},clone(S){return Hg(S,e,n,r)}};return E}function Uw(t){if(m_(t))return t=hl(t),t.children=null,t}function aT(t){return m_(t)?t.children?t.children[0]:void 0:t}function Wg(t,e){t.shapeFlag&6&&t.component?Wg(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function qC(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===mt?(o.patchFlag&128&&i++,r=r.concat(qC(o.children,e,a))):(e||o.type!==Po)&&r.push(a!=null?hl(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}function JC(t){return Ft(t)?{setup:t,name:t.name}:t}const by=t=>!!t.type.__asyncLoader,m_=t=>t.type.__isKeepAlive;function LO(t,e){IO(t,"a",e)}function FO(t,e){IO(t,"da",e)}function IO(t,e,n=gr){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(v_(e,r,n),n){let i=n.parent;for(;i&&i.parent;)m_(i.parent.vnode)&&zH(r,e,n,i),i=i.parent}}function zH(t,e,n,r){const i=v_(e,t,r,!0);ZC(()=>{BC(r[e],i)},n)}function v_(t,e,n=gr,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;Dd(),id(n);const a=js(e,n,t,o);return jc(),Td(),a});return r?i.unshift(s):i.push(s),s}}const wl=t=>(e,n=gr)=>(!Xg||t==="sp")&&v_(t,(...r)=>e(...r),n),Gm=wl("bm"),hi=wl("m"),kO=wl("bu"),KC=wl("u"),qi=wl("bum"),ZC=wl("um"),GH=wl("sp"),UH=wl("rtg"),HH=wl("rtc");function WH(t,e=gr){v_("ec",t,e)}function Nt(t,e){const n=Cs;if(n===null)return t;const r=__(n)||n.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,u=Vn]=e[s];o&&(Ft(o)&&(o={mounted:o,updated:o}),o.deep&&Vc(a),i.push({dir:o,instance:r,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function gc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Dd(),js(l,n,8,[t.el,a,t,e]),Td())}}const QC="components",$H="directives";function Re(t,e){return eM(QC,t,!0,e)||t}const RO=Symbol();function XH(t){return lr(t)?eM(QC,t,!1)||t:t||RO}function Xi(t){return eM($H,t)}function eM(t,e,n=!0,r=!1){const i=Cs||gr;if(i){const s=i.type;if(t===QC){const a=SW(s,!1);if(a&&(a===e||a===Js(e)||a===_l(Js(e))))return s}const o=lT(i[t]||s[t],e)||lT(i.appContext[t],e);return!o&&r?s:o}}function lT(t,e){return t&&(t[e]||t[Js(e)]||t[_l(Js(e))])}function cu(t,e,n,r){let i;const s=n&&n[r];if(yt(t)||lr(t)){i=new Array(t.length);for(let o=0,a=t.length;o<a;o++)i[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){i=new Array(t);for(let o=0;o<t;o++)i[o]=e(o+1,o,void 0,s&&s[o])}else if(Cn(t))if(t[Symbol.iterator])i=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];i[a]=e(t[u],u,a,s&&s[a])}}else i=[];return n&&(n[r]=i),i}function Hw(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:_y(r)]=t[r];return n}const nA=t=>t?XO(t)?__(t)||t.proxy:nA(t.parent):null,ug=Kr(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>nA(t.parent),$root:t=>nA(t.root),$emit:t=>t.emit,$options:t=>tM(t),$forceUpdate:t=>t.f||(t.f=()=>YC(t.update)),$nextTick:t=>t.n||(t.n=En.bind(t.proxy)),$watch:t=>NH.bind(t)}),Ww=(t,e)=>t!==Vn&&!t.__isScriptSetup&&Kt(t,e),YH={get({_:t},e){const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const d=o[e];if(d!==void 0)switch(d){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(Ww(r,e))return o[e]=1,r[e];if(i!==Vn&&Kt(i,e))return o[e]=2,i[e];if((u=t.propsOptions[0])&&Kt(u,e))return o[e]=3,s[e];if(n!==Vn&&Kt(n,e))return o[e]=4,n[e];rA&&(o[e]=0)}}const c=ug[e];let f,h;if(c)return e==="$attrs"&&hs(t,"get",e),c(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Vn&&Kt(n,e))return o[e]=4,n[e];if(h=l.config.globalProperties,Kt(h,e))return h[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return Ww(i,e)?(i[e]=n,!0):r!==Vn&&Kt(r,e)?(r[e]=n,!0):Kt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Vn&&Kt(t,o)||Ww(e,o)||(a=s[0])&&Kt(a,o)||Kt(r,o)||Kt(ug,o)||Kt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Kt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let rA=!0;function jH(t){const e=tM(t),n=t.proxy,r=t.ctx;rA=!1,e.beforeCreate&&uT(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:g,deactivated:x,beforeDestroy:_,beforeUnmount:m,destroyed:v,unmounted:b,render:w,renderTracked:A,renderTriggered:E,errorCaptured:S,serverPrefetch:C,expose:M,inheritAttrs:D,components:T,directives:L,filters:F}=e;if(u&&qH(u,r,null,t.appContext.config.unwrapInjectedRef),o)for(const O in o){const $=o[O];Ft($)&&(r[O]=$.bind(n))}if(i){const O=i.call(n,n);Cn(O)&&(t.data=Yr(O))}if(rA=!0,s)for(const O in s){const $=s[O],N=Ft($)?$.bind(n,n):Ft($.get)?$.get.bind(n,n):To,W=!Ft($)&&Ft($.set)?$.set.bind(n):To,H=re({get:N,set:W});Object.defineProperty(r,O,{enumerable:!0,configurable:!0,get:()=>H.value,set:K=>H.value=K})}if(a)for(const O in a)OO(a[O],r,n,O);if(l){const O=Ft(l)?l.call(n):l;Reflect.ownKeys(O).forEach($=>{ar($,O[$])})}c&&uT(c,t,"c");function I(O,$){yt($)?$.forEach(N=>O(N.bind(n))):$&&O($.bind(n))}if(I(Gm,f),I(hi,h),I(kO,d),I(KC,p),I(LO,g),I(FO,x),I(WH,S),I(HH,A),I(UH,E),I(qi,m),I(ZC,b),I(GH,C),yt(M))if(M.length){const O=t.exposed||(t.exposed={});M.forEach($=>{Object.defineProperty(O,$,{get:()=>n[$],set:N=>n[$]=N})})}else t.exposed||(t.exposed={});w&&t.render===To&&(t.render=w),D!=null&&(t.inheritAttrs=D),T&&(t.components=T),L&&(t.directives=L)}function qH(t,e,n=To,r=!1){yt(t)&&(t=iA(t));for(const i in t){const s=t[i];let o;Cn(s)?"default"in s?o=zt(s.from||i,s.default,!0):o=zt(s.from||i):o=zt(s),_n(o)&&r?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[i]=o}}function uT(t,e,n){js(yt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function OO(t,e,n,r){const i=r.includes(".")?MO(n,r):()=>n[r];if(lr(t)){const s=e[t];Ft(s)&&He(i,s)}else if(Ft(t))He(i,t.bind(n));else if(Cn(t))if(yt(t))t.forEach(s=>OO(s,e,n,r));else{const s=Ft(t.handler)?t.handler.bind(n):e[t.handler];Ft(s)&&He(i,s,t)}}function tM(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(u=>r1(l,u,o,!0)),r1(l,e,o)),Cn(e)&&s.set(e,l),l}function r1(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&r1(t,s,n,!0),i&&i.forEach(o=>r1(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=JH[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const JH={data:cT,props:Pc,emits:Pc,methods:Pc,computed:Pc,beforeCreate:Ni,created:Ni,beforeMount:Ni,mounted:Ni,beforeUpdate:Ni,updated:Ni,beforeDestroy:Ni,beforeUnmount:Ni,destroyed:Ni,unmounted:Ni,activated:Ni,deactivated:Ni,errorCaptured:Ni,serverPrefetch:Ni,components:Pc,directives:Pc,watch:ZH,provide:cT,inject:KH};function cT(t,e){return e?t?function(){return Kr(Ft(t)?t.call(this,this):t,Ft(e)?e.call(this,this):e)}:e:t}function KH(t,e){return Pc(iA(t),iA(e))}function iA(t){if(yt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ni(t,e){return t?[...new Set([].concat(t,e))]:e}function Pc(t,e){return t?Kr(Kr(Object.create(null),t),e):e}function ZH(t,e){if(!t)return e;if(!e)return t;const n=Kr(Object.create(null),t);for(const r in e)n[r]=Ni(t[r],e[r]);return n}function QH(t,e,n,r=!1){const i={},s={};Qy(s,y_,1),t.propsDefaults=Object.create(null),BO(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:yH(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function eW(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Ye(i),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(p_(t.emitsOptions,h))continue;const d=e[h];if(l)if(Kt(s,h))d!==s[h]&&(s[h]=d,u=!0);else{const p=Js(h);i[p]=sA(l,a,p,d,t,!1)}else d!==s[h]&&(s[h]=d,u=!0)}}}else{BO(t,e,i,s)&&(u=!0);let c;for(const f in a)(!e||!Kt(e,f)&&((c=cf(f))===f||!Kt(e,c)))&&(l?n&&(n[f]!==void 0||n[c]!==void 0)&&(i[f]=sA(l,a,f,void 0,t,!0)):delete i[f]);if(s!==a)for(const f in s)(!e||!Kt(e,f)&&!0)&&(delete s[f],u=!0)}u&&fl(t,"set","$attrs")}function BO(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(yy(l))continue;const u=e[l];let c;i&&Kt(i,c=Js(l))?!s||!s.includes(c)?n[c]=u:(a||(a={}))[c]=u:p_(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(s){const l=Ye(n),u=a||Vn;for(let c=0;c<s.length;c++){const f=s[c];n[f]=sA(i,l,f,u[f],t,!Kt(u,f))}}return o}function sA(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Kt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&Ft(l)){const{propsDefaults:u}=i;n in u?r=u[n]:(id(i),r=u[n]=l.call(null,e),jc())}else r=l}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===cf(n))&&(r=!0))}return r}function NO(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Ft(t)){const c=f=>{l=!0;const[h,d]=NO(f,e,!0);Kr(o,h),d&&a.push(...d)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!s&&!l)return Cn(t)&&r.set(t,Rh),Rh;if(yt(s))for(let c=0;c<s.length;c++){const f=Js(s[c]);fT(f)&&(o[f]=Vn)}else if(s)for(const c in s){const f=Js(c);if(fT(f)){const h=s[c],d=o[f]=yt(h)||Ft(h)?{type:h}:Object.assign({},h);if(d){const p=pT(Boolean,d.type),g=pT(String,d.type);d[0]=p>-1,d[1]=g<0||p<g,(p>-1||Kt(d,"default"))&&a.push(f)}}}const u=[o,a];return Cn(t)&&r.set(t,u),u}function fT(t){return t[0]!=="$"}function hT(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:t===null?"null":""}function dT(t,e){return hT(t)===hT(e)}function pT(t,e){return yt(e)?e.findIndex(n=>dT(n,t)):Ft(e)&&dT(e,t)?0:-1}const VO=t=>t[0]==="_"||t==="$stable",nM=t=>yt(t)?t.map(na):[na(t)],tW=(t,e,n)=>{if(e._n)return e;const r=ie((...i)=>nM(e(...i)),n);return r._c=!1,r},zO=(t,e,n)=>{const r=t._ctx;for(const i in t){if(VO(i))continue;const s=t[i];if(Ft(s))e[i]=tW(i,s,r);else if(s!=null){const o=nM(s);e[i]=()=>o}}},GO=(t,e)=>{const n=nM(e);t.slots.default=()=>n},nW=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Ye(e),Qy(e,"_",n)):zO(e,t.slots={})}else t.slots={},e&&GO(t,e);Qy(t.slots,y_,1)},rW=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Vn;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(Kr(i,e),!n&&a===1&&delete i._):(s=!e.$stable,zO(e,i)),o=e}else e&&(GO(t,e),o={default:1});if(s)for(const a in i)!VO(a)&&!(a in o)&&delete i[a]};function UO(){return{app:null,config:{isNativeTag:O6,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let iW=0;function sW(t,e){return function(r,i=null){Ft(r)||(r=Object.assign({},r)),i!=null&&!Cn(i)&&(i=null);const s=UO(),o=new Set;let a=!1;const l=s.app={_uid:iW++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:MW,get config(){return s.config},set config(u){},use(u,...c){return o.has(u)||(u&&Ft(u.install)?(o.add(u),u.install(l,...c)):Ft(u)&&(o.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,f){if(!a){const h=P(r,i);return h.appContext=s,c&&e?e(h,u):t(h,u,f),a=!0,l._container=u,u.__vue_app__=l,__(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l}};return l}}function oA(t,e,n,r,i=!1){if(yt(t)){t.forEach((h,d)=>oA(h,e&&(yt(e)?e[d]:e),n,r,i));return}if(by(r)&&!i)return;const s=r.shapeFlag&4?__(r.component)||r.component.proxy:r.el,o=i?null:s,{i:a,r:l}=t,u=e&&e.r,c=a.refs===Vn?a.refs={}:a.refs,f=a.setupState;if(u!=null&&u!==l&&(lr(u)?(c[u]=null,Kt(f,u)&&(f[u]=null)):_n(u)&&(u.value=null)),Ft(l))xu(l,a,12,[o,c]);else{const h=lr(l),d=_n(l);if(h||d){const p=()=>{if(t.f){const g=h?Kt(f,l)?f[l]:c[l]:l.value;i?yt(g)&&BC(g,s):yt(g)?g.includes(s)||g.push(s):h?(c[l]=[s],Kt(f,l)&&(f[l]=c[l])):(l.value=[s],t.k&&(c[t.k]=l.value))}else h?(c[l]=o,Kt(f,l)&&(f[l]=o)):d&&(l.value=o,t.k&&(c[t.k]=o))};o?(p.id=-1,es(p,n)):p()}}}const es=BH;function oW(t){return aW(t)}function aW(t,e){const n=H6();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=To,insertStaticContent:p}=t,g=(V,R,B,j=null,se=null,Y=null,G=!1,le=null,ge=!!R.dynamicChildren)=>{if(V===R)return;V&&!Rc(V,R)&&(j=Q(V),K(V,se,Y,!0),V=null),R.patchFlag===-2&&(ge=!1,R.dynamicChildren=null);const{type:ae,ref:ue,shapeFlag:U}=R;switch(ae){case Pd:x(V,R,B,j);break;case Po:_(V,R,B,j);break;case $w:V==null&&m(R,B,j,G);break;case mt:T(V,R,B,j,se,Y,G,le,ge);break;default:U&1?w(V,R,B,j,se,Y,G,le,ge):U&6?L(V,R,B,j,se,Y,G,le,ge):(U&64||U&128)&&ae.process(V,R,B,j,se,Y,G,le,ge,he)}ue!=null&&se&&oA(ue,V&&V.ref,Y,R||V,!R)},x=(V,R,B,j)=>{if(V==null)r(R.el=a(R.children),B,j);else{const se=R.el=V.el;R.children!==V.children&&u(se,R.children)}},_=(V,R,B,j)=>{V==null?r(R.el=l(R.children||""),B,j):R.el=V.el},m=(V,R,B,j)=>{[V.el,V.anchor]=p(V.children,R,B,j,V.el,V.anchor)},v=({el:V,anchor:R},B,j)=>{let se;for(;V&&V!==R;)se=h(V),r(V,B,j),V=se;r(R,B,j)},b=({el:V,anchor:R})=>{let B;for(;V&&V!==R;)B=h(V),i(V),V=B;i(R)},w=(V,R,B,j,se,Y,G,le,ge)=>{G=G||R.type==="svg",V==null?A(R,B,j,se,Y,G,le,ge):C(V,R,se,Y,G,le,ge)},A=(V,R,B,j,se,Y,G,le)=>{let ge,ae;const{type:ue,props:U,shapeFlag:z,transition:te,dirs:fe}=V;if(ge=V.el=o(V.type,Y,U&&U.is,U),z&8?c(ge,V.children):z&16&&S(V.children,ge,null,j,se,Y&&ue!=="foreignObject",G,le),fe&&gc(V,null,j,"created"),E(ge,V,V.scopeId,G,j),U){for(const de in U)de!=="value"&&!yy(de)&&s(ge,de,null,U[de],Y,V.children,j,se,X);"value"in U&&s(ge,"value",null,U.value),(ae=U.onVnodeBeforeMount)&&Yo(ae,j,V)}fe&&gc(V,null,j,"beforeMount");const ne=(!se||se&&!se.pendingBranch)&&te&&!te.persisted;ne&&te.beforeEnter(ge),r(ge,R,B),((ae=U&&U.onVnodeMounted)||ne||fe)&&es(()=>{ae&&Yo(ae,j,V),ne&&te.enter(ge),fe&&gc(V,null,j,"mounted")},se)},E=(V,R,B,j,se)=>{if(B&&d(V,B),j)for(let Y=0;Y<j.length;Y++)d(V,j[Y]);if(se){let Y=se.subTree;if(R===Y){const G=se.vnode;E(V,G,G.scopeId,G.slotScopeIds,se.parent)}}},S=(V,R,B,j,se,Y,G,le,ge=0)=>{for(let ae=ge;ae<V.length;ae++){const ue=V[ae]=le?nu(V[ae]):na(V[ae]);g(null,ue,R,B,j,se,Y,G,le)}},C=(V,R,B,j,se,Y,G)=>{const le=R.el=V.el;let{patchFlag:ge,dynamicChildren:ae,dirs:ue}=R;ge|=V.patchFlag&16;const U=V.props||Vn,z=R.props||Vn;let te;B&&mc(B,!1),(te=z.onVnodeBeforeUpdate)&&Yo(te,B,R,V),ue&&gc(R,V,B,"beforeUpdate"),B&&mc(B,!0);const fe=se&&R.type!=="foreignObject";if(ae?M(V.dynamicChildren,ae,le,B,j,fe,Y):G||$(V,R,le,null,B,j,fe,Y,!1),ge>0){if(ge&16)D(le,R,U,z,B,j,se);else if(ge&2&&U.class!==z.class&&s(le,"class",null,z.class,se),ge&4&&s(le,"style",U.style,z.style,se),ge&8){const ne=R.dynamicProps;for(let de=0;de<ne.length;de++){const pe=ne[de],_e=U[pe],be=z[pe];(be!==_e||pe==="value")&&s(le,pe,_e,be,se,V.children,B,j,X)}}ge&1&&V.children!==R.children&&c(le,R.children)}else!G&&ae==null&&D(le,R,U,z,B,j,se);((te=z.onVnodeUpdated)||ue)&&es(()=>{te&&Yo(te,B,R,V),ue&&gc(R,V,B,"updated")},j)},M=(V,R,B,j,se,Y,G)=>{for(let le=0;le<R.length;le++){const ge=V[le],ae=R[le],ue=ge.el&&(ge.type===mt||!Rc(ge,ae)||ge.shapeFlag&70)?f(ge.el):B;g(ge,ae,ue,null,j,se,Y,G,!0)}},D=(V,R,B,j,se,Y,G)=>{if(B!==j){if(B!==Vn)for(const le in B)!yy(le)&&!(le in j)&&s(V,le,B[le],null,G,R.children,se,Y,X);for(const le in j){if(yy(le))continue;const ge=j[le],ae=B[le];ge!==ae&&le!=="value"&&s(V,le,ae,ge,G,R.children,se,Y,X)}"value"in j&&s(V,"value",B.value,j.value)}},T=(V,R,B,j,se,Y,G,le,ge)=>{const ae=R.el=V?V.el:a(""),ue=R.anchor=V?V.anchor:a("");let{patchFlag:U,dynamicChildren:z,slotScopeIds:te}=R;te&&(le=le?le.concat(te):te),V==null?(r(ae,B,j),r(ue,B,j),S(R.children,B,ue,se,Y,G,le,ge)):U>0&&U&64&&z&&V.dynamicChildren?(M(V.dynamicChildren,z,B,se,Y,G,le),(R.key!=null||se&&R===se.subTree)&&rM(V,R,!0)):$(V,R,B,ue,se,Y,G,le,ge)},L=(V,R,B,j,se,Y,G,le,ge)=>{R.slotScopeIds=le,V==null?R.shapeFlag&512?se.ctx.activate(R,B,j,G,ge):F(R,B,j,se,Y,G,ge):k(V,R,ge)},F=(V,R,B,j,se,Y,G)=>{const le=V.component=yW(V,j,se);if(m_(V)&&(le.ctx.renderer=he),_W(le),le.asyncDep){if(se&&se.registerDep(le,I),!V.el){const ge=le.subTree=P(Po);_(null,ge,R,B)}return}I(le,V,R,B,se,Y,G)},k=(V,R,B)=>{const j=R.component=V.component;if(kH(V,R,B))if(j.asyncDep&&!j.asyncResolved){O(j,R,B);return}else j.next=R,CH(j.update),j.update();else R.el=V.el,j.vnode=R},I=(V,R,B,j,se,Y,G)=>{const le=()=>{if(V.isMounted){let{next:ue,bu:U,u:z,parent:te,vnode:fe}=V,ne=ue,de;mc(V,!1),ue?(ue.el=fe.el,O(V,ue,G)):ue=fe,U&&wy(U),(de=ue.props&&ue.props.onVnodeBeforeUpdate)&&Yo(de,te,ue,fe),mc(V,!0);const pe=Gw(V),_e=V.subTree;V.subTree=pe,g(_e,pe,f(_e.el),Q(_e),V,se,Y),ue.el=pe.el,ne===null&&RH(V,pe.el),z&&es(z,se),(de=ue.props&&ue.props.onVnodeUpdated)&&es(()=>Yo(de,te,ue,fe),se)}else{let ue;const{el:U,props:z}=R,{bm:te,m:fe,parent:ne}=V,de=by(R);if(mc(V,!1),te&&wy(te),!de&&(ue=z&&z.onVnodeBeforeMount)&&Yo(ue,ne,R),mc(V,!0),U&&ye){const pe=()=>{V.subTree=Gw(V),ye(U,V.subTree,V,se,null)};de?R.type.__asyncLoader().then(()=>!V.isUnmounted&&pe()):pe()}else{const pe=V.subTree=Gw(V);g(null,pe,B,j,V,se,Y),R.el=pe.el}if(fe&&es(fe,se),!de&&(ue=z&&z.onVnodeMounted)){const pe=R;es(()=>Yo(ue,ne,pe),se)}(R.shapeFlag&256||ne&&by(ne.vnode)&&ne.vnode.shapeFlag&256)&&V.a&&es(V.a,se),V.isMounted=!0,R=B=j=null}},ge=V.effect=new zC(le,()=>YC(ae),V.scope),ae=V.update=()=>ge.run();ae.id=V.uid,mc(V,!0),ae()},O=(V,R,B)=>{R.component=V;const j=V.vnode.props;V.vnode=R,V.next=null,eW(V,R.props,j,B),rW(V,R.children,B),Dd(),sT(),Td()},$=(V,R,B,j,se,Y,G,le,ge=!1)=>{const ae=V&&V.children,ue=V?V.shapeFlag:0,U=R.children,{patchFlag:z,shapeFlag:te}=R;if(z>0){if(z&128){W(ae,U,B,j,se,Y,G,le,ge);return}else if(z&256){N(ae,U,B,j,se,Y,G,le,ge);return}}te&8?(ue&16&&X(ae,se,Y),U!==ae&&c(B,U)):ue&16?te&16?W(ae,U,B,j,se,Y,G,le,ge):X(ae,se,Y,!0):(ue&8&&c(B,""),te&16&&S(U,B,j,se,Y,G,le,ge))},N=(V,R,B,j,se,Y,G,le,ge)=>{V=V||Rh,R=R||Rh;const ae=V.length,ue=R.length,U=Math.min(ae,ue);let z;for(z=0;z<U;z++){const te=R[z]=ge?nu(R[z]):na(R[z]);g(V[z],te,B,null,se,Y,G,le,ge)}ae>ue?X(V,se,Y,!0,!1,U):S(R,B,j,se,Y,G,le,ge,U)},W=(V,R,B,j,se,Y,G,le,ge)=>{let ae=0;const ue=R.length;let U=V.length-1,z=ue-1;for(;ae<=U&&ae<=z;){const te=V[ae],fe=R[ae]=ge?nu(R[ae]):na(R[ae]);if(Rc(te,fe))g(te,fe,B,null,se,Y,G,le,ge);else break;ae++}for(;ae<=U&&ae<=z;){const te=V[U],fe=R[z]=ge?nu(R[z]):na(R[z]);if(Rc(te,fe))g(te,fe,B,null,se,Y,G,le,ge);else break;U--,z--}if(ae>U){if(ae<=z){const te=z+1,fe=te<ue?R[te].el:j;for(;ae<=z;)g(null,R[ae]=ge?nu(R[ae]):na(R[ae]),B,fe,se,Y,G,le,ge),ae++}}else if(ae>z)for(;ae<=U;)K(V[ae],se,Y,!0),ae++;else{const te=ae,fe=ae,ne=new Map;for(ae=fe;ae<=z;ae++){const je=R[ae]=ge?nu(R[ae]):na(R[ae]);je.key!=null&&ne.set(je.key,ae)}let de,pe=0;const _e=z-fe+1;let be=!1,Me=0;const Ve=new Array(_e);for(ae=0;ae<_e;ae++)Ve[ae]=0;for(ae=te;ae<=U;ae++){const je=V[ae];if(pe>=_e){K(je,se,Y,!0);continue}let Ze;if(je.key!=null)Ze=ne.get(je.key);else for(de=fe;de<=z;de++)if(Ve[de-fe]===0&&Rc(je,R[de])){Ze=de;break}Ze===void 0?K(je,se,Y,!0):(Ve[Ze-fe]=ae+1,Ze>=Me?Me=Ze:be=!0,g(je,R[Ze],B,null,se,Y,G,le,ge),pe++)}const Pe=be?lW(Ve):Rh;for(de=Pe.length-1,ae=_e-1;ae>=0;ae--){const je=fe+ae,Ze=R[je],ft=je+1<ue?R[je+1].el:j;Ve[ae]===0?g(null,Ze,B,ft,se,Y,G,le,ge):be&&(de<0||ae!==Pe[de]?H(Ze,B,ft,2):de--)}}},H=(V,R,B,j,se=null)=>{const{el:Y,type:G,transition:le,children:ge,shapeFlag:ae}=V;if(ae&6){H(V.component.subTree,R,B,j);return}if(ae&128){V.suspense.move(R,B,j);return}if(ae&64){G.move(V,R,B,he);return}if(G===mt){r(Y,R,B);for(let U=0;U<ge.length;U++)H(ge[U],R,B,j);r(V.anchor,R,B);return}if(G===$w){v(V,R,B);return}if(j!==2&&ae&1&&le)if(j===0)le.beforeEnter(Y),r(Y,R,B),es(()=>le.enter(Y),se);else{const{leave:U,delayLeave:z,afterLeave:te}=le,fe=()=>r(Y,R,B),ne=()=>{U(Y,()=>{fe(),te&&te()})};z?z(Y,fe,ne):ne()}else r(Y,R,B)},K=(V,R,B,j=!1,se=!1)=>{const{type:Y,props:G,ref:le,children:ge,dynamicChildren:ae,shapeFlag:ue,patchFlag:U,dirs:z}=V;if(le!=null&&oA(le,null,B,V,!0),ue&256){R.ctx.deactivate(V);return}const te=ue&1&&z,fe=!by(V);let ne;if(fe&&(ne=G&&G.onVnodeBeforeUnmount)&&Yo(ne,R,V),ue&6)J(V.component,B,j);else{if(ue&128){V.suspense.unmount(B,j);return}te&&gc(V,null,R,"beforeUnmount"),ue&64?V.type.remove(V,R,B,se,he,j):ae&&(Y!==mt||U>0&&U&64)?X(ae,R,B,!1,!0):(Y===mt&&U&384||!se&&ue&16)&&X(ge,R,B),j&&ee(V)}(fe&&(ne=G&&G.onVnodeUnmounted)||te)&&es(()=>{ne&&Yo(ne,R,V),te&&gc(V,null,R,"unmounted")},B)},ee=V=>{const{type:R,el:B,anchor:j,transition:se}=V;if(R===mt){Z(B,j);return}if(R===$w){b(V);return}const Y=()=>{i(B),se&&!se.persisted&&se.afterLeave&&se.afterLeave()};if(V.shapeFlag&1&&se&&!se.persisted){const{leave:G,delayLeave:le}=se,ge=()=>G(B,Y);le?le(V.el,Y,ge):ge()}else Y()},Z=(V,R)=>{let B;for(;V!==R;)B=h(V),i(V),V=B;i(R)},J=(V,R,B)=>{const{bum:j,scope:se,update:Y,subTree:G,um:le}=V;j&&wy(j),se.stop(),Y&&(Y.active=!1,K(G,V,R,B)),le&&es(le,R),es(()=>{V.isUnmounted=!0},R),R&&R.pendingBranch&&!R.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===R.pendingId&&(R.deps--,R.deps===0&&R.resolve())},X=(V,R,B,j=!1,se=!1,Y=0)=>{for(let G=Y;G<V.length;G++)K(V[G],R,B,j,se)},Q=V=>V.shapeFlag&6?Q(V.component.subTree):V.shapeFlag&128?V.suspense.next():h(V.anchor||V.el),oe=(V,R,B)=>{V==null?R._vnode&&K(R._vnode,null,null,!0):g(R._vnode||null,V,R,null,null,null,B),sT(),AO(),R._vnode=V},he={p:g,um:K,m:H,r:ee,mt:F,mc:S,pc:$,pbc:M,n:Q,o:t};let ve,ye;return e&&([ve,ye]=e(he)),{render:oe,hydrate:ve,createApp:sW(oe,ve)}}function mc({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function rM(t,e,n=!1){const r=t.children,i=e.children;if(yt(r)&&yt(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=nu(i[s]),a.el=o.el),n||rM(o,a)),a.type===Pd&&(a.el=o.el)}}function lW(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<u?s=a+1:o=a;u<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const uW=t=>t.__isTeleport,cg=t=>t&&(t.disabled||t.disabled===""),gT=t=>typeof SVGElement<"u"&&t instanceof SVGElement,aA=(t,e)=>{const n=t&&t.to;return lr(n)?e?e(n):null:n},cW={__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,u){const{mc:c,pc:f,pbc:h,o:{insert:d,querySelector:p,createText:g,createComment:x}}=u,_=cg(e.props);let{shapeFlag:m,children:v,dynamicChildren:b}=e;if(t==null){const w=e.el=g(""),A=e.anchor=g("");d(w,n,r),d(A,n,r);const E=e.target=aA(e.props,p),S=e.targetAnchor=g("");E&&(d(S,E),o=o||gT(E));const C=(M,D)=>{m&16&&c(v,M,D,i,s,o,a,l)};_?C(n,A):E&&C(E,S)}else{e.el=t.el;const w=e.anchor=t.anchor,A=e.target=t.target,E=e.targetAnchor=t.targetAnchor,S=cg(t.props),C=S?n:A,M=S?w:E;if(o=o||gT(A),b?(h(t.dynamicChildren,b,C,i,s,o,a),rM(t,e,!0)):l||f(t,e,C,M,i,s,o,a,!1),_)S||Bv(e,n,w,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const D=e.target=aA(e.props,p);D&&Bv(e,D,null,u,0)}else S&&Bv(e,A,E,u,1)}HO(e)},remove(t,e,n,r,{um:i,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:c,target:f,props:h}=t;if(f&&s(c),(o||!cg(h))&&(s(u),a&16))for(let d=0;d<l.length;d++){const p=l[d];i(p,e,n,!0,!!p.dynamicChildren)}},move:Bv,hydrate:fW};function Bv(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=t,f=s===2;if(f&&r(o,e,n),(!f||cg(c))&&l&16)for(let h=0;h<u.length;h++)i(u[h],e,n,2);f&&r(a,e,n)}function fW(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const c=e.target=aA(e.props,l);if(c){const f=c._lpa||c.firstChild;if(e.shapeFlag&16)if(cg(e.props))e.anchor=u(o(t),e,a(t),n,r,i,s),e.targetAnchor=f;else{e.anchor=o(t);let h=f;for(;h;)if(h=o(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,c._lpa=e.targetAnchor&&o(e.targetAnchor);break}u(f,e,c,n,r,i,s)}HO(e)}return e.anchor&&o(e.anchor)}const hW=cW;function HO(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const mt=Symbol(void 0),Pd=Symbol(void 0),Po=Symbol(void 0),$w=Symbol(void 0),fg=[];let Eo=null;function Xe(t=!1){fg.push(Eo=t?null:[])}function dW(){fg.pop(),Eo=fg[fg.length-1]||null}let $g=1;function mT(t){$g+=t}function WO(t){return t.dynamicChildren=$g>0?Eo||Rh:null,dW(),$g>0&&Eo&&Eo.push(t),t}function Pt(t,e,n,r,i,s){return WO(Ae(t,e,n,r,i,s,!0))}function Et(t,e,n,r,i){return WO(P(t,e,n,r,i,!0))}function lA(t){return t?t.__v_isVNode===!0:!1}function Rc(t,e){return t.type===e.type&&t.key===e.key}const y_="__vInternal",$O=({key:t})=>t!=null?t:null,xy=({ref:t,ref_key:e,ref_for:n})=>t!=null?lr(t)||_n(t)||Ft(t)?{i:Cs,r:t,k:e,f:!!n}:t:null;function Ae(t,e=null,n=null,r=0,i=null,s=t===mt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$O(e),ref:e&&xy(e),scopeId:g_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Cs};return a?(iM(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=lr(n)?8:16),$g>0&&!o&&Eo&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Eo.push(l),l}const P=pW;function pW(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===RO)&&(t=Po),lA(t)){const a=hl(t,e,!0);return n&&iM(a,n),$g>0&&!s&&Eo&&(a.shapeFlag&6?Eo[Eo.indexOf(t)]=a:Eo.push(a)),a.patchFlag|=-2,a}if(AW(t)&&(t=t.__vccOpts),e){e=gW(e);let{class:a,style:l}=e;a&&!lr(a)&&(e.class=uu(a)),Cn(l)&&(mO(l)&&!yt(l)&&(l=Kr({},l)),e.style=Nm(l))}const o=lr(t)?1:OH(t)?128:uW(t)?64:Cn(t)?4:Ft(t)?2:0;return Ae(t,e,n,r,i,o,s,!0)}function gW(t){return t?mO(t)||y_ in t?Kr({},t):t:null}function hl(t,e,n=!1){const{props:r,ref:i,patchFlag:s,children:o}=t,a=e?Je(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&$O(a),ref:e&&e.ref?n&&i?yt(i)?i.concat(xy(e)):[i,xy(e)]:xy(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==mt?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&hl(t.ssContent),ssFallback:t.ssFallback&&hl(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function Ue(t=" ",e=0){return P(Pd,null,t,e)}function _t(t="",e=!1){return e?(Xe(),Et(Po,null,t)):P(Po,null,t)}function na(t){return t==null||typeof t=="boolean"?P(Po):yt(t)?P(mt,null,t.slice()):typeof t=="object"?nu(t):P(Pd,null,String(t))}function nu(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:hl(t)}function iM(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(yt(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),iM(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!(y_ in e)?e._ctx=Cs:i===3&&Cs&&(Cs.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ft(e)?(e={default:e,_ctx:Cs},n=32):(e=String(e),r&64?(n=16,e=[Ue(e)]):n=8);t.children=e,t.shapeFlag|=n}function Je(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=uu([e.class,r.class]));else if(i==="style")e.style=Nm([e.style,r.style]);else if(l_(i)){const s=e[i],o=r[i];o&&s!==o&&!(yt(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Yo(t,e,n,r=null){js(t,e,7,[n,r])}const mW=UO();let vW=0;function yW(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||mW,s={uid:vW++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new iO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:NO(r,i),emitsOptions:CO(r,i),emit:null,emitted:null,propsDefaults:Vn,inheritAttrs:r.inheritAttrs,ctx:Vn,data:Vn,props:Vn,attrs:Vn,slots:Vn,refs:Vn,setupState:Vn,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=TH.bind(null,s),t.ce&&t.ce(s),s}let gr=null;const Aa=()=>gr||Cs,id=t=>{gr=t,t.scope.on()},jc=()=>{gr&&gr.scope.off(),gr=null};function XO(t){return t.vnode.shapeFlag&4}let Xg=!1;function _W(t,e=!1){Xg=e;const{props:n,children:r}=t.vnode,i=XO(t);QH(t,n,i,e),nW(t,r);const s=i?wW(t,e):void 0;return Xg=!1,s}function wW(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=rd(new Proxy(t.ctx,YH));const{setup:r}=n;if(r){const i=t.setupContext=r.length>1?xW(t):null;id(t),Dd();const s=xu(r,t,0,[t.props,i]);if(Td(),jc(),tO(s)){if(s.then(jc,jc),e)return s.then(o=>{vT(t,o,e)}).catch(o=>{d_(o,t,0)});t.asyncDep=s}else vT(t,s,e)}else YO(t,e)}function vT(t,e,n){Ft(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Cn(e)&&(t.setupState=wO(e)),YO(t,n)}let yT;function YO(t,e,n){const r=t.type;if(!t.render){if(!e&&yT&&!r.render){const i=r.template||tM(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,u=Kr(Kr({isCustomElement:s,delimiters:a},o),l);r.render=yT(i,u)}}t.render=r.render||To}id(t),Dd(),jH(t),Td(),jc()}function bW(t){return new Proxy(t.attrs,{get(e,n){return hs(t,"get","$attrs"),e[n]}})}function xW(t){const e=r=>{t.exposed=r||{}};let n;return{get attrs(){return n||(n=bW(t))},slots:t.slots,emit:t.emit,expose:e}}function __(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(wO(rd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ug)return ug[n](t)},has(e,n){return n in e||n in ug}}))}function SW(t,e=!0){return Ft(t)?t.displayName||t.name:t.name||e&&t.__name}function AW(t){return Ft(t)&&"__vccOpts"in t}const re=(t,e)=>SH(t,e,Xg);function no(t,e,n){const r=arguments.length;return r===2?Cn(e)&&!yt(e)?lA(e)?P(t,null,[e]):P(t,e):P(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&lA(n)&&(n=[n]),P(t,e,n))}const EW=Symbol(""),CW=()=>zt(EW),MW="3.2.47",DW="http://www.w3.org/2000/svg",Oc=typeof document<"u"?document:null,_T=Oc&&Oc.createElement("template"),TW={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Oc.createElementNS(DW,t):Oc.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Oc.createTextNode(t),createComment:t=>Oc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Oc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{_T.innerHTML=r?`<svg>${t}</svg>`:t;const a=_T.content;if(r){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function PW(t,e,n){const r=t._vtc;r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function LW(t,e,n){const r=t.style,i=lr(n);if(n&&!i){if(e&&!lr(e))for(const s in e)n[s]==null&&uA(r,s,"");for(const s in n)uA(r,s,n[s])}else{const s=r.display;i?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=s)}}const wT=/\s*!important$/;function uA(t,e,n){if(yt(n))n.forEach(r=>uA(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=FW(t,e);wT.test(n)?t.setProperty(cf(r),n.replace(wT,""),"important"):t[r]=n}}const bT=["Webkit","Moz","ms"],Xw={};function FW(t,e){const n=Xw[e];if(n)return n;let r=Js(e);if(r!=="filter"&&r in t)return Xw[e]=r;r=_l(r);for(let i=0;i<bT.length;i++){const s=bT[i]+r;if(s in t)return Xw[e]=s}return e}const xT="http://www.w3.org/1999/xlink";function IW(t,e,n,r,i){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(xT,e.slice(6,e.length)):t.setAttributeNS(xT,e,n);else{const s=k6(e);n==null||s&&!ZR(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function kW(t,e,n,r,i,s,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,i,s),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=ZR(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function Bc(t,e,n,r){t.addEventListener(e,n,r)}function RW(t,e,n,r){t.removeEventListener(e,n,r)}function OW(t,e,n,r,i=null){const s=t._vei||(t._vei={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=BW(e);if(r){const u=s[e]=zW(r,i);Bc(t,a,u,l)}else o&&(RW(t,a,o,l),s[e]=void 0)}}const ST=/(?:Once|Passive|Capture)$/;function BW(t){let e;if(ST.test(t)){e={};let r;for(;r=t.match(ST);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):cf(t.slice(2)),e]}let Yw=0;const NW=Promise.resolve(),VW=()=>Yw||(NW.then(()=>Yw=0),Yw=Date.now());function zW(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;js(GW(r,n.value),e,5,[r])};return n.value=t,n.attached=VW(),n}function GW(t,e){if(yt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const AT=/^on[a-z]/,UW=(t,e,n,r,i=!1,s,o,a,l)=>{e==="class"?PW(t,r,i):e==="style"?LW(t,n,r):l_(e)?OC(e)||OW(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):HW(t,e,r,i))?kW(t,e,r,s,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),IW(t,e,r,i))};function HW(t,e,n,r){return r?!!(e==="innerHTML"||e==="textContent"||e in t&&AT.test(e)&&Ft(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||AT.test(e)&&lr(n)?!1:e in t}const Bl="transition",dp="animation",Ea=(t,{slots:e})=>no(TO,qO(t),e);Ea.displayName="Transition";const jO={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},WW=Ea.props=Kr({},TO.props,jO),vc=(t,e=[])=>{yt(t)?t.forEach(n=>n(...e)):t&&t(...e)},ET=t=>t?yt(t)?t.some(e=>e.length>1):t.length>1:!1;function qO(t){const e={};for(const T in t)T in jO||(e[T]=t[T]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:d=`${n}-leave-to`}=t,p=$W(i),g=p&&p[0],x=p&&p[1],{onBeforeEnter:_,onEnter:m,onEnterCancelled:v,onLeave:b,onLeaveCancelled:w,onBeforeAppear:A=_,onAppear:E=m,onAppearCancelled:S=v}=e,C=(T,L,F)=>{Ql(T,L?c:a),Ql(T,L?u:o),F&&F()},M=(T,L)=>{T._isLeaving=!1,Ql(T,f),Ql(T,d),Ql(T,h),L&&L()},D=T=>(L,F)=>{const k=T?E:m,I=()=>C(L,T,F);vc(k,[L,I]),CT(()=>{Ql(L,T?l:s),Za(L,T?c:a),ET(k)||MT(L,r,g,I)})};return Kr(e,{onBeforeEnter(T){vc(_,[T]),Za(T,s),Za(T,o)},onBeforeAppear(T){vc(A,[T]),Za(T,l),Za(T,u)},onEnter:D(!1),onAppear:D(!0),onLeave(T,L){T._isLeaving=!0;const F=()=>M(T,L);Za(T,f),KO(),Za(T,h),CT(()=>{!T._isLeaving||(Ql(T,f),Za(T,d),ET(b)||MT(T,r,x,F))}),vc(b,[T,F])},onEnterCancelled(T){C(T,!1),vc(v,[T])},onAppearCancelled(T){C(T,!0),vc(S,[T])},onLeaveCancelled(T){M(T),vc(w,[T])}})}function $W(t){if(t==null)return null;if(Cn(t))return[jw(t.enter),jw(t.leave)];{const e=jw(t);return[e,e]}}function jw(t){return U6(t)}function Za(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function Ql(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function CT(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let XW=0;function MT(t,e,n,r){const i=t._endId=++XW,s=()=>{i===t._endId&&r()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=JO(t,e);if(!o)return r();const u=o+"end";let c=0;const f=()=>{t.removeEventListener(u,h),s()},h=d=>{d.target===t&&++c>=l&&f()};setTimeout(()=>{c<l&&f()},a+1),t.addEventListener(u,h)}function JO(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),i=r(`${Bl}Delay`),s=r(`${Bl}Duration`),o=DT(i,s),a=r(`${dp}Delay`),l=r(`${dp}Duration`),u=DT(a,l);let c=null,f=0,h=0;e===Bl?o>0&&(c=Bl,f=o,h=s.length):e===dp?u>0&&(c=dp,f=u,h=l.length):(f=Math.max(o,u),c=f>0?o>u?Bl:dp:null,h=c?c===Bl?s.length:l.length:0);const d=c===Bl&&/\b(transform|all)(,|$)/.test(r(`${Bl}Property`).toString());return{type:c,timeout:f,propCount:h,hasTransform:d}}function DT(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>TT(n)+TT(t[r])))}function TT(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function KO(){return document.body.offsetHeight}const ZO=new WeakMap,QO=new WeakMap,eB={name:"TransitionGroup",props:Kr({},WW,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Aa(),r=DO();let i,s;return KC(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!ZW(i[0].el,n.vnode.el,o))return;i.forEach(qW),i.forEach(JW);const a=i.filter(KW);KO(),a.forEach(l=>{const u=l.el,c=u.style;Za(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const f=u._moveCb=h=>{h&&h.target!==u||(!h||/transform$/.test(h.propertyName))&&(u.removeEventListener("transitionend",f),u._moveCb=null,Ql(u,o))};u.addEventListener("transitionend",f)})}),()=>{const o=Ye(t),a=qO(o);let l=o.tag||mt;i=s,s=e.default?qC(e.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&Wg(c,Hg(c,a,r,n))}if(i)for(let u=0;u<i.length;u++){const c=i[u];Wg(c,Hg(c,a,r,n)),ZO.set(c,c.el.getBoundingClientRect())}return P(l,null,s)}}},YW=t=>delete t.mode;eB.props;const jW=eB;function qW(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function JW(t){QO.set(t,t.el.getBoundingClientRect())}function KW(t){const e=ZO.get(t),n=QO.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function ZW(t,e,n){const r=t.cloneNode();t._vtc&&t._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&r.classList.remove(a))}),n.split(/\s+/).forEach(o=>o&&r.classList.add(o)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:s}=JO(r);return i.removeChild(r),s}const i1=t=>{const e=t.props["onUpdate:modelValue"]||!1;return yt(e)?n=>wy(e,n):e};function QW(t){t.target.composing=!0}function PT(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Su={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=i1(i);const s=r||i.props&&i.props.type==="number";Bc(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=KS(a)),t._assign(a)}),n&&Bc(t,"change",()=>{t.value=t.value.trim()}),e||(Bc(t,"compositionstart",QW),Bc(t,"compositionend",PT),Bc(t,"change",PT))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:i}},s){if(t._assign=i1(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===e||(i||t.type==="number")&&KS(t.value)===e))return;const o=e==null?"":e;t.value!==o&&(t.value=o)}},e9={created(t,{value:e},n){t.checked=Zy(e,n.props.value),t._assign=i1(n),Bc(t,"change",()=>{t._assign(t9(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t._assign=i1(r),e!==n&&(t.checked=Zy(e,r.props.value))}};function t9(t){return"_value"in t?t._value:t.value}const n9=["ctrl","shift","alt","meta"],r9={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>n9.some(n=>t[`${n}Key`]&&!e.includes(n))},sM=(t,e)=>(n,...r)=>{for(let i=0;i<e.length;i++){const s=r9[e[i]];if(s&&s(n,e))return}return t(n,...r)},i9={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},s9=(t,e)=>n=>{if(!("key"in n))return;const r=cf(n.key);if(e.some(i=>i===r||i9[i]===r))return t(n)},$i={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):pp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),pp(t,!0),r.enter(t)):r.leave(t,()=>{pp(t,!1)}):pp(t,e))},beforeUnmount(t,{value:e}){pp(t,e)}};function pp(t,e){t.style.display=e?t._vod:"none"}const o9=Kr({patchProp:UW},TW);let LT;function a9(){return LT||(LT=oW(o9))}const l9=(...t)=>{const e=a9().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=u9(r);if(!i)return;const s=e._component;!Ft(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function u9(t){return lr(t)?document.querySelector(t):t}var c9=!1;/*!
  * pinia v2.0.35
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */let tB;const w_=t=>tB=t,nB=Symbol();function cA(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var hg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(hg||(hg={}));function f9(){const t=Md(!0),e=t.run(()=>Se({}));let n=[],r=[];const i=rd({install(s){w_(i),i._a=s,s.provide(nB,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return!this._a&&!c9?r.push(s):n.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const rB=()=>{};function FT(t,e,n,r=rB){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&sO()&&fs(i),i}function Lf(t,...e){t.slice().forEach(n=>{n(...e)})}function fA(t,e){t instanceof Map&&e instanceof Map&&e.forEach((n,r)=>t.set(r,n)),t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];cA(i)&&cA(r)&&t.hasOwnProperty(n)&&!_n(r)&&!bu(r)?t[n]=fA(i,r):t[n]=r}return t}const h9=Symbol();function d9(t){return!cA(t)||!t.hasOwnProperty(h9)}const{assign:eu}=Object;function p9(t){return!!(_n(t)&&t.effect)}function g9(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function u(){a||(n.state.value[t]=i?i():{});const c=h_(n.state.value[t]);return eu(c,s,Object.keys(o||{}).reduce((f,h)=>(f[h]=rd(re(()=>{w_(n);const d=n._s.get(t);return o[h].call(d,d)})),f),{}))}return l=iB(t,u,e,n,r,!0),l}function iB(t,e,n={},r,i,s){let o;const a=eu({actions:{}},n),l={deep:!0};let u,c,f=rd([]),h=rd([]),d;const p=r.state.value[t];!s&&!p&&(r.state.value[t]={}),Se({});let g;function x(E){let S;u=c=!1,typeof E=="function"?(E(r.state.value[t]),S={type:hg.patchFunction,storeId:t,events:d}):(fA(r.state.value[t],E),S={type:hg.patchObject,payload:E,storeId:t,events:d});const C=g=Symbol();En().then(()=>{g===C&&(u=!0)}),c=!0,Lf(f,S,r.state.value[t])}const _=s?function(){const{state:S}=n,C=S?S():{};this.$patch(M=>{eu(M,C)})}:rB;function m(){o.stop(),f=[],h=[],r._s.delete(t)}function v(E,S){return function(){w_(r);const C=Array.from(arguments),M=[],D=[];function T(k){M.push(k)}function L(k){D.push(k)}Lf(h,{args:C,name:E,store:w,after:T,onError:L});let F;try{F=S.apply(this&&this.$id===t?this:w,C)}catch(k){throw Lf(D,k),k}return F instanceof Promise?F.then(k=>(Lf(M,k),k)).catch(k=>(Lf(D,k),Promise.reject(k))):(Lf(M,F),F)}}const b={_p:r,$id:t,$onAction:FT.bind(null,h),$patch:x,$reset:_,$subscribe(E,S={}){const C=FT(f,E,S.detached,()=>M()),M=o.run(()=>He(()=>r.state.value[t],D=>{(S.flush==="sync"?c:u)&&E({storeId:t,type:hg.direct,events:d},D)},eu({},l,S)));return C},$dispose:m},w=Yr(b);r._s.set(t,w);const A=r._e.run(()=>(o=Md(),o.run(()=>e())));for(const E in A){const S=A[E];if(_n(S)&&!p9(S)||bu(S))s||(p&&d9(S)&&(_n(S)?S.value=p[E]:fA(S,p[E])),r.state.value[t][E]=S);else if(typeof S=="function"){const C=v(E,S);A[E]=C,a.actions[E]=S}}return eu(w,A),eu(Ye(w),A),Object.defineProperty(w,"$state",{get:()=>r.state.value[t],set:E=>{x(S=>{eu(S,E)})}}),r._p.forEach(E=>{eu(w,o.run(()=>E({store:w,app:r._a,pinia:r,options:a})))}),p&&s&&n.hydrate&&n.hydrate(w.$state,p),u=!0,c=!0,w}function Um(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const u=Aa();return a=a||u&&zt(nB,null),a&&w_(a),a=tB,a._s.has(r)||(s?iB(r,e,i,a):g9(r,i,a)),a._s.get(r)}return o.$id=r,o}const sr=Um({id:"constructionStore",state:()=>({constructionElement:[],isDraggingConstructionElement:!1,measureLinePointSize:5,measureBaseLineDistance:80,measureLineDistance:40,measureLineDistanceArray:[40],distanceToEdge:20,standardDoorValue:{width:100,height:200},standardWindowValue:{width:200,height:100},currentDoorValue:{width:100,height:200},currentWindowValue:{width:200,height:100},editConstructionElement:null,constructionElementValue:{width:"",height:""},isConstructionPlaceable:!1,menuVisible:!1,selectConstructionElement:!0,selectedElement:null,editSelectedConstructionElement:{floorIndex:void 0,wallIndex:void 0,elementIndex:void 0},twoLastSelectedElement:[],changeSettingsGlobal:!1,insertionDepth:20,insertionDepthSetGlobal:!0,lastInsertionDepth:!1,facingDepth:20,facingDepthSetGlobal:!0,lastFacingDepth:!1}),getters:{getConstructionElement(){return this.constructionElement},getIsDraggingConstructionElement(){return this.isDraggingConstructionElement},getDistanceToEdge(){return this.distanceToEdge},getStandardDoorValue(){return this.standardDoorValue},getStandardWindowValue(){return this.standardWindowValue},getCurrentDoorValue(){return this.currentDoorValue},getCurrentWindowValue(){return this.currentWindowValue},getIsConstructionPlaceable(){return this.isConstructionPlaceable},getSelectConstructionElement(){return this.selectConstructionElement},getEditSelectedConstructionElement(){return this.editSelectedConstructionElement},getTwoLastSelectedElement(){return this.twoLastSelectedElement}},actions:{setConstructionElement(t){this.constructionElement=t},setIsDraggingConstructionElement(t){this.isDraggingConstructionElement=t},setMeasureLineDistanceArray(t){this.measureLineDistanceArray=t},setDistanceToEdge(t){this.distanceToEdge=t},setStandardDoorValue(t){this.standardDoorValue=t},setStandardWindowValue(t){this.standardWindowValue=t},setCurrentDoorValue(t){this.currentDoorValue=t},setCurrentWindowValue(t){this.currentWindowValue=t},setIsConstructionPlaceable(t){this.isConstructionPlaceable=t},setSelectConstructionElement(t){this.selectConstructionElement=t},setEditSelectedConstructionElement(t=void 0,e=void 0,n=void 0){this.editSelectedConstructionElement.floorIndex=t,this.editSelectedConstructionElement.wallIndex=e,this.editSelectedConstructionElement.elementIndex=n},setTwoLastSelectedElement(t){this.twoLastSelectedElement=t}}});/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const sB="134",Ff={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},If={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},m9=0,IT=1,v9=2,oB=1,aB=2,jp=3,Ou=0,rr=1,_r=2,lB=1,Au=0,dg=1,kT=2,RT=3,OT=4,y9=5,gh=100,_9=101,w9=102,BT=103,NT=104,b9=200,x9=201,S9=202,A9=203,uB=204,cB=205,E9=206,C9=207,M9=208,D9=209,T9=210,P9=0,L9=1,F9=2,hA=3,I9=4,k9=5,R9=6,O9=7,b_=0,B9=1,N9=2,qc=0,V9=1,z9=2,G9=3,fB=4,U9=5,hB=300,Hm=301,Wm=302,s1=303,dA=304,x_=306,oM=307,Er=1e3,xi=1001,o1=1002,mr=1003,pA=1004,gA=1005,kn=1006,dB=1007,Ld=1008,Hs=1009,H9=1010,W9=1011,a1=1012,$9=1013,Sy=1014,Ao=1015,ll=1016,X9=1017,Y9=1018,j9=1019,pg=1020,q9=1021,_a=1022,ci=1023,J9=1024,K9=1025,pB=ci,Nh=1026,Yg=1027,Z9=1028,Q9=1029,e7=1030,t7=1031,n7=1032,r7=1033,VT=33776,zT=33777,GT=33778,UT=33779,HT=35840,WT=35841,$T=35842,XT=35843,i7=36196,YT=37492,jT=37496,s7=37808,o7=37809,a7=37810,l7=37811,u7=37812,c7=37813,f7=37814,h7=37815,d7=37816,p7=37817,g7=37818,m7=37819,v7=37820,y7=37821,_7=36492,w7=37840,b7=37841,x7=37842,S7=37843,A7=37844,E7=37845,C7=37846,M7=37847,D7=37848,T7=37849,P7=37850,L7=37851,F7=37852,I7=37853,k7=2200,R7=2201,O7=2202,jg=2300,qg=2301,qw=2302,_h=2400,wh=2401,l1=2402,aM=2500,gB=2501,B7=0,Zr=3e3,Br=3001,lM=3007,S_=3002,N7=3003,mB=3004,vB=3005,yB=3006,V7=3200,_B=3201,Fd=0,z7=1,Jw=7680,G7=519,Jg=35044,u1=35048,qT="300 es";class bl{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}let Nv=1234567;const Vh=Math.PI/180,Kg=180/Math.PI,ii=[];for(let t=0;t<256;t++)ii[t]=(t<16?"0":"")+t.toString(16);const U7=typeof crypto<"u"&&"randomUUID"in crypto;function Lo(){if(U7)return crypto.randomUUID().toUpperCase();const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ii[t&255]+ii[t>>8&255]+ii[t>>16&255]+ii[t>>24&255]+"-"+ii[e&255]+ii[e>>8&255]+"-"+ii[e>>16&15|64]+ii[e>>24&255]+"-"+ii[n&63|128]+ii[n>>8&255]+"-"+ii[n>>16&255]+ii[n>>24&255]+ii[r&255]+ii[r>>8&255]+ii[r>>16&255]+ii[r>>24&255]).toUpperCase()}function wi(t,e,n){return Math.max(e,Math.min(n,t))}function uM(t,e){return(t%e+e)%e}function H7(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function W7(t,e,n){return t!==e?(n-t)/(e-t):0}function gg(t,e,n){return(1-n)*t+n*e}function $7(t,e,n,r){return gg(t,e,1-Math.exp(-n*r))}function X7(t,e=1){return e-Math.abs(uM(t,e*2)-e)}function Y7(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function j7(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function q7(t,e){return t+Math.floor(Math.random()*(e-t+1))}function J7(t,e){return t+Math.random()*(e-t)}function K7(t){return t*(.5-Math.random())}function Z7(t){return t!==void 0&&(Nv=t%2147483647),Nv=Nv*16807%2147483647,(Nv-1)/2147483646}function Q7(t){return t*Vh}function e$(t){return t*Kg}function mA(t){return(t&t-1)===0&&t!==0}function t$(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function wB(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function n$(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+r)/2),c=o((e+r)/2),f=s((e-r)/2),h=o((e-r)/2),d=s((r-e)/2),p=o((r-e)/2);switch(i){case"XYX":t.set(a*c,l*f,l*h,a*u);break;case"YZY":t.set(l*h,a*c,l*f,a*u);break;case"ZXZ":t.set(l*f,l*h,a*c,a*u);break;case"XZX":t.set(a*c,l*p,l*d,a*u);break;case"YXY":t.set(l*d,a*c,l*p,a*u);break;case"ZYZ":t.set(l*p,l*d,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}var bB=Object.freeze({__proto__:null,DEG2RAD:Vh,RAD2DEG:Kg,generateUUID:Lo,clamp:wi,euclideanModulo:uM,mapLinear:H7,inverseLerp:W7,lerp:gg,damp:$7,pingpong:X7,smoothstep:Y7,smootherstep:j7,randInt:q7,randFloat:J7,randFloatSpread:K7,seededRandom:Z7,degToRad:Q7,radToDeg:e$,isPowerOfTwo:mA,ceilPowerOfTwo:t$,floorPowerOfTwo:wB,setQuaternionFromProperEuler:n$});class Ie{constructor(e=0,n=0){this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n,r){return r!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Ie.prototype.isVector2=!0;class kr{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,n,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=n,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],f=r[7],h=r[2],d=r[5],p=r[8],g=i[0],x=i[3],_=i[6],m=i[1],v=i[4],b=i[7],w=i[2],A=i[5],E=i[8];return s[0]=o*g+a*m+l*w,s[3]=o*x+a*v+l*A,s[6]=o*_+a*b+l*E,s[1]=u*g+c*m+f*w,s[4]=u*x+c*v+f*A,s[7]=u*_+c*b+f*E,s[2]=h*g+d*m+p*w,s[5]=h*x+d*v+p*A,s[8]=h*_+d*b+p*E,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return n*o*c-n*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*o-a*u,h=a*l-c*s,d=u*s-o*l,p=n*f+r*h+i*d;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/p;return e[0]=f*g,e[1]=(i*u-c*r)*g,e[2]=(a*r-i*o)*g,e[3]=h*g,e[4]=(c*n-i*l)*g,e[5]=(i*s-a*n)*g,e[6]=d*g,e[7]=(r*l-u*n)*g,e[8]=(o*n-r*s)*g,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){const r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=n,r[4]*=n,r[7]*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.elements,s=i[0],o=i[3],a=i[6],l=i[1],u=i[4],c=i[7];return i[0]=n*s+r*l,i[3]=n*o+r*u,i[6]=n*a+r*c,i[1]=-r*s+n*l,i[4]=-r*o+n*u,i[7]=-r*a+n*c,this}translate(e,n){const r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=n*r[2],r[4]+=n*r[5],r[7]+=n*r[8],this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}kr.prototype.isMatrix3=!0;function xB(t){if(t.length===0)return-1/0;let e=t[0];for(let n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}function A_(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function JT(t,e=0){let n=3735928559^e,r=1103547991^e;for(let i=0,s;i<t.length;i++)s=t.charCodeAt(i),n=Math.imul(n^s,2654435761),r=Math.imul(r^s,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}let kf;class Id{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{kf===void 0&&(kf=A_("canvas")),kf.width=e.width,kf.height=e.height;const r=kf.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=kf}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}}let r$=0;class Qr extends bl{constructor(e=Qr.DEFAULT_IMAGE,n=Qr.DEFAULT_MAPPING,r=xi,i=xi,s=kn,o=Ld,a=ci,l=Hs,u=1,c=Zr){super(),Object.defineProperty(this,"id",{value:r$++}),this.uuid=Lo(),this.name="",this.image=e,this.mipmaps=[],this.mapping=n,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new kr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Lo()),!n&&e.images[i.uuid]===void 0){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Kw(i[o].image)):s.push(Kw(i[o]))}else s=Kw(i);e.images[i.uuid]={uuid:i.uuid,url:s}}r.image=i.uuid}return JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hB)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Er:e.x=e.x-Math.floor(e.x);break;case xi:e.x=e.x<0?0:1;break;case o1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Er:e.y=e.y-Math.floor(e.y);break;case xi:e.y=e.y<0?0:1;break;case o1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&this.version++}}Qr.DEFAULT_IMAGE=void 0;Qr.DEFAULT_MAPPING=hB;Qr.prototype.isTexture=!0;function Kw(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Id.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class $t{constructor(e=0,n=0,r=0,i=1){this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,u=l[0],c=l[4],f=l[8],h=l[1],d=l[5],p=l[9],g=l[2],x=l[6],_=l[10];if(Math.abs(c-h)<.01&&Math.abs(f-g)<.01&&Math.abs(p-x)<.01){if(Math.abs(c+h)<.1&&Math.abs(f+g)<.1&&Math.abs(p+x)<.1&&Math.abs(u+d+_-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const v=(u+1)/2,b=(d+1)/2,w=(_+1)/2,A=(c+h)/4,E=(f+g)/4,S=(p+x)/4;return v>b&&v>w?v<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(v),i=A/r,s=E/r):b>w?b<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(b),r=A/i,s=S/i):w<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(w),r=E/s,i=S/s),this.set(r,i,s,n),this}let m=Math.sqrt((x-p)*(x-p)+(f-g)*(f-g)+(h-c)*(h-c));return Math.abs(m)<.001&&(m=1),this.x=(x-p)/m,this.y=(f-g)/m,this.z=(h-c)/m,this.w=Math.acos((u+d+_-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n,r){return r!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}$t.prototype.isVector4=!0;class wa extends bl{constructor(e,n,r={}){super(),this.width=e,this.height=n,this.depth=1,this.scissor=new $t(0,0,e,n),this.scissorTest=!1,this.viewport=new $t(0,0,e,n),this.texture=new Qr(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:n,depth:1},this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:kn,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}wa.prototype.isWebGLRenderTarget=!0;class i$ extends wa{constructor(e,n,r){super(e,n);const i=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=i.clone()}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone();return this}}i$.prototype.isWebGLMultipleRenderTargets=!0;class SB extends wa{constructor(e,n,r){super(e,n,r),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}SB.prototype.isWebGLMultisampleRenderTarget=!0;class In{constructor(e=0,n=0,r=0,i=1){this._x=e,this._y=n,this._z=r,this._w=i}static slerp(e,n,r,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),r.slerpQuaternions(e,n,i)}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],f=r[i+3];const h=s[o+0],d=s[o+1],p=s[o+2],g=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=c,e[n+3]=f;return}if(a===1){e[n+0]=h,e[n+1]=d,e[n+2]=p,e[n+3]=g;return}if(f!==g||l!==h||u!==d||c!==p){let x=1-a;const _=l*h+u*d+c*p+f*g,m=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){const w=Math.sqrt(v),A=Math.atan2(w,_*m);x=Math.sin(x*A)/w,a=Math.sin(a*A)/w}const b=a*m;if(l=l*x+h*b,u=u*x+d*b,c=c*x+p*b,f=f*x+g*b,x===1-a){const w=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=w,u*=w,c*=w,f*=w}}e[n]=l,e[n+1]=u,e[n+2]=c,e[n+3]=f}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],f=s[o],h=s[o+1],d=s[o+2],p=s[o+3];return e[n]=a*p+c*f+l*d-u*h,e[n+1]=l*p+c*h+u*f-a*d,e[n+2]=u*p+c*d+a*h-l*f,e[n+3]=c*p-a*f-l*h-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),f=a(s/2),h=l(r/2),d=l(i/2),p=l(s/2);switch(o){case"XYZ":this._x=h*c*f+u*d*p,this._y=u*d*f-h*c*p,this._z=u*c*p+h*d*f,this._w=u*c*f-h*d*p;break;case"YXZ":this._x=h*c*f+u*d*p,this._y=u*d*f-h*c*p,this._z=u*c*p-h*d*f,this._w=u*c*f+h*d*p;break;case"ZXY":this._x=h*c*f-u*d*p,this._y=u*d*f+h*c*p,this._z=u*c*p+h*d*f,this._w=u*c*f-h*d*p;break;case"ZYX":this._x=h*c*f-u*d*p,this._y=u*d*f+h*c*p,this._z=u*c*p-h*d*f,this._w=u*c*f+h*d*p;break;case"YZX":this._x=h*c*f+u*d*p,this._y=u*d*f+h*c*p,this._z=u*c*p-h*d*f,this._w=u*c*f-h*d*p;break;case"XZY":this._x=h*c*f-u*d*p,this._y=u*d*f-h*c*p,this._z=u*c*p+h*d*f,this._w=u*c*f+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],c=n[6],f=n[10],h=r+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(c-l)*d,this._y=(s-u)*d,this._z=(o-i)*d}else if(r>a&&r>f){const d=2*Math.sqrt(1+r-a-f);this._w=(c-l)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(s+u)/d}else if(a>f){const d=2*Math.sqrt(1+a-r-f);this._w=(s-u)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+f-r-a);this._w=(o-i)/d,this._x=(s+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(wi(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,n)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,c=n._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*r+n*this._x,this._y=d*i+n*this._y,this._z=d*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-n)*c)/u,h=Math.sin(n*c)/u;return this._w=o*f+this._w*h,this._x=r*f+this._x*h,this._y=i*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,n,r){this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}In.prototype.isQuaternion=!0;class q{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,n)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,n)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,n)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(KT.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(KT.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*n+o*i-a*r,c=l*r+a*n-s*i,f=l*i+s*r-o*n,h=-s*n-o*r-a*i;return this.x=u*l+h*-s+c*-a-f*-o,this.y=c*l+h*-o+f*-s-u*-a,this.z=f*l+h*-a+u*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,n)):this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Zw.copy(this).projectOnVector(e),this.sub(Zw)}reflect(e){return this.sub(Zw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(wi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n,r){return r!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}q.prototype.isVector3=!0;const Zw=new q,KT=new In;class Mr{constructor(e=new q(1/0,1/0,1/0),n=new q(-1/0,-1/0,-1/0)){this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){let n=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],f=e[l+1],h=e[l+2];c<n&&(n=c),f<r&&(r=f),h<i&&(i=h),c>s&&(s=c),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,r,i),this.max.set(s,o,a),this}setFromBufferAttribute(e){let n=1/0,r=1/0,i=1/0,s=-1/0,o=-1/0,a=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),f=e.getY(l),h=e.getZ(l);c<n&&(n=c),f<r&&(r=f),h<i&&(i=h),c>s&&(s=c),f>o&&(o=f),h>a&&(a=h)}return this.min.set(n,r,i),this.max.set(s,o,a),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=gp.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const n=e.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),Qw.copy(n.boundingBox),Qw.applyMatrix4(e.matrixWorld),this.union(Qw));const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,gp),gp.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(mp),Vv.subVectors(this.max,mp),Rf.subVectors(e.a,mp),Of.subVectors(e.b,mp),Bf.subVectors(e.c,mp),Nl.subVectors(Of,Rf),Vl.subVectors(Bf,Of),yc.subVectors(Rf,Bf);let n=[0,-Nl.z,Nl.y,0,-Vl.z,Vl.y,0,-yc.z,yc.y,Nl.z,0,-Nl.x,Vl.z,0,-Vl.x,yc.z,0,-yc.x,-Nl.y,Nl.x,0,-Vl.y,Vl.x,0,-yc.y,yc.x,0];return!eb(n,Rf,Of,Bf,Vv)||(n=[1,0,0,0,1,0,0,0,1],!eb(n,Rf,Of,Bf,Vv))?!1:(zv.crossVectors(Nl,Vl),n=[zv.x,zv.y,zv.z],eb(n,Rf,Of,Bf,Vv))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return gp.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(gp).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Va[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Va[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Va[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Va[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Va[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Va[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Va[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Va[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Va),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Mr.prototype.isBox3=!0;const Va=[new q,new q,new q,new q,new q,new q,new q,new q],gp=new q,Qw=new Mr,Rf=new q,Of=new q,Bf=new q,Nl=new q,Vl=new q,yc=new q,mp=new q,Vv=new q,zv=new q,_c=new q;function eb(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){_c.fromArray(t,s);const a=i.x*Math.abs(_c.x)+i.y*Math.abs(_c.y)+i.z*Math.abs(_c.z),l=e.dot(_c),u=n.dot(_c),c=r.dot(_c);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const s$=new Mr,ZT=new q,tb=new q,nb=new q;class qu{constructor(e=new q,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):s$.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){nb.subVectors(e,this.center);const n=nb.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.add(nb.multiplyScalar(i/r)),this.radius+=i}return this}union(e){return tb.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(ZT.copy(e.center).add(tb)),this.expandByPoint(ZT.copy(e.center).sub(tb)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const za=new q,rb=new q,Gv=new q,zl=new q,ib=new q,Uv=new q,sb=new q;class Ju{constructor(e=new q,n=new q(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,za)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=za.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(za.copy(this.direction).multiplyScalar(n).add(this.origin),za.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){rb.copy(e).add(n).multiplyScalar(.5),Gv.copy(n).sub(e).normalize(),zl.copy(this.origin).sub(rb);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Gv),a=zl.dot(this.direction),l=-zl.dot(Gv),u=zl.lengthSq(),c=Math.abs(1-o*o);let f,h,d,p;if(c>0)if(f=o*l-a,h=o*a-l,p=s*c,f>=0)if(h>=-p)if(h<=p){const g=1/c;f*=g,h*=g,d=f*(f+o*h+2*a)+h*(o*f+h+2*l)+u}else h=s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+u;else h=-s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+u;else h<=-p?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+u):h<=p?(f=0,h=Math.min(Math.max(-s,-l),s),d=h*(h+2*l)+u):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),d=-f*f+h*(h+2*l)+u);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),d=-f*f+h*(h+2*l)+u;return r&&r.copy(this.direction).multiplyScalar(f).add(this.origin),i&&i.copy(Gv).multiplyScalar(h).add(rb),d}intersectSphere(e,n){za.subVectors(e.center,this.origin);const r=za.dot(this.direction),i=za.dot(za)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(r=(e.min.x-h.x)*u,i=(e.max.x-h.x)*u):(r=(e.max.x-h.x)*u,i=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),r>o||s>i||((s>r||r!==r)&&(r=s),(o<i||i!==i)&&(i=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,za)!==null}intersectTriangle(e,n,r,i,s){ib.subVectors(n,e),Uv.subVectors(r,e),sb.crossVectors(ib,Uv);let o=this.direction.dot(sb),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;zl.subVectors(this.origin,e);const l=a*this.direction.dot(Uv.crossVectors(zl,Uv));if(l<0)return null;const u=a*this.direction.dot(ib.cross(zl));if(u<0||l+u>o)return null;const c=-a*zl.dot(sb);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class st{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,n,r,i,s,o,a,l,u,c,f,h,d,p,g,x){const _=this.elements;return _[0]=e,_[4]=n,_[8]=r,_[12]=i,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=u,_[6]=c,_[10]=f,_[14]=h,_[3]=d,_[7]=p,_[11]=g,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new st().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Nf.setFromMatrixColumn(e,0).length(),s=1/Nf.setFromMatrixColumn(e,1).length(),o=1/Nf.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*c,d=o*f,p=a*c,g=a*f;n[0]=l*c,n[4]=-l*f,n[8]=u,n[1]=d+p*u,n[5]=h-g*u,n[9]=-a*l,n[2]=g-h*u,n[6]=p+d*u,n[10]=o*l}else if(e.order==="YXZ"){const h=l*c,d=l*f,p=u*c,g=u*f;n[0]=h+g*a,n[4]=p*a-d,n[8]=o*u,n[1]=o*f,n[5]=o*c,n[9]=-a,n[2]=d*a-p,n[6]=g+h*a,n[10]=o*l}else if(e.order==="ZXY"){const h=l*c,d=l*f,p=u*c,g=u*f;n[0]=h-g*a,n[4]=-o*f,n[8]=p+d*a,n[1]=d+p*a,n[5]=o*c,n[9]=g-h*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const h=o*c,d=o*f,p=a*c,g=a*f;n[0]=l*c,n[4]=p*u-d,n[8]=h*u+g,n[1]=l*f,n[5]=g*u+h,n[9]=d*u-p,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const h=o*l,d=o*u,p=a*l,g=a*u;n[0]=l*c,n[4]=g-h*f,n[8]=p*f+d,n[1]=f,n[5]=o*c,n[9]=-a*c,n[2]=-u*c,n[6]=d*f+p,n[10]=h-g*f}else if(e.order==="XZY"){const h=o*l,d=o*u,p=a*l,g=a*u;n[0]=l*c,n[4]=-f,n[8]=u*c,n[1]=h*f+g,n[5]=o*c,n[9]=d*f-p,n[2]=p*f-d,n[6]=a*c,n[10]=g*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(o$,e,a$)}lookAt(e,n,r){const i=this.elements;return ys.subVectors(e,n),ys.lengthSq()===0&&(ys.z=1),ys.normalize(),Gl.crossVectors(r,ys),Gl.lengthSq()===0&&(Math.abs(r.z)===1?ys.x+=1e-4:ys.z+=1e-4,ys.normalize(),Gl.crossVectors(r,ys)),Gl.normalize(),Hv.crossVectors(ys,Gl),i[0]=Gl.x,i[4]=Hv.x,i[8]=ys.x,i[1]=Gl.y,i[5]=Hv.y,i[9]=ys.y,i[2]=Gl.z,i[6]=Hv.z,i[10]=ys.z,this}multiply(e,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,n)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],f=r[5],h=r[9],d=r[13],p=r[2],g=r[6],x=r[10],_=r[14],m=r[3],v=r[7],b=r[11],w=r[15],A=i[0],E=i[4],S=i[8],C=i[12],M=i[1],D=i[5],T=i[9],L=i[13],F=i[2],k=i[6],I=i[10],O=i[14],$=i[3],N=i[7],W=i[11],H=i[15];return s[0]=o*A+a*M+l*F+u*$,s[4]=o*E+a*D+l*k+u*N,s[8]=o*S+a*T+l*I+u*W,s[12]=o*C+a*L+l*O+u*H,s[1]=c*A+f*M+h*F+d*$,s[5]=c*E+f*D+h*k+d*N,s[9]=c*S+f*T+h*I+d*W,s[13]=c*C+f*L+h*O+d*H,s[2]=p*A+g*M+x*F+_*$,s[6]=p*E+g*D+x*k+_*N,s[10]=p*S+g*T+x*I+_*W,s[14]=p*C+g*L+x*O+_*H,s[3]=m*A+v*M+b*F+w*$,s[7]=m*E+v*D+b*k+w*N,s[11]=m*S+v*T+b*I+w*W,s[15]=m*C+v*L+b*O+w*H,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],h=e[10],d=e[14],p=e[3],g=e[7],x=e[11],_=e[15];return p*(+s*l*f-i*u*f-s*a*h+r*u*h+i*a*d-r*l*d)+g*(+n*l*d-n*u*h+s*o*h-i*o*d+i*u*c-s*l*c)+x*(+n*u*f-n*a*d-s*o*f+r*o*d+s*a*c-r*u*c)+_*(-i*a*c-n*l*f+n*a*h+i*o*f-r*o*h+r*l*c)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],d=e[11],p=e[12],g=e[13],x=e[14],_=e[15],m=f*x*u-g*h*u+g*l*d-a*x*d-f*l*_+a*h*_,v=p*h*u-c*x*u-p*l*d+o*x*d+c*l*_-o*h*_,b=c*g*u-p*f*u+p*a*d-o*g*d-c*a*_+o*f*_,w=p*f*l-c*g*l-p*a*h+o*g*h+c*a*x-o*f*x,A=n*m+r*v+i*b+s*w;if(A===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=m*E,e[1]=(g*h*s-f*x*s-g*i*d+r*x*d+f*i*_-r*h*_)*E,e[2]=(a*x*s-g*l*s+g*i*u-r*x*u-a*i*_+r*l*_)*E,e[3]=(f*l*s-a*h*s-f*i*u+r*h*u+a*i*d-r*l*d)*E,e[4]=v*E,e[5]=(c*x*s-p*h*s+p*i*d-n*x*d-c*i*_+n*h*_)*E,e[6]=(p*l*s-o*x*s-p*i*u+n*x*u+o*i*_-n*l*_)*E,e[7]=(o*h*s-c*l*s+c*i*u-n*h*u-o*i*d+n*l*d)*E,e[8]=b*E,e[9]=(p*f*s-c*g*s-p*r*d+n*g*d+c*r*_-n*f*_)*E,e[10]=(o*g*s-p*a*s+p*r*u-n*g*u-o*r*_+n*a*_)*E,e[11]=(c*a*s-o*f*s-c*r*u+n*f*u+o*r*d-n*a*d)*E,e[12]=w*E,e[13]=(c*g*i-p*f*i+p*r*h-n*g*h-c*r*x+n*f*x)*E,e[14]=(p*a*i-o*g*i-p*r*l+n*g*l+o*r*x-n*a*x)*E,e[15]=(o*f*i-c*a*i+c*r*l-n*f*l-o*r*h+n*a*h)*E,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,c=o+o,f=a+a,h=s*u,d=s*c,p=s*f,g=o*c,x=o*f,_=a*f,m=l*u,v=l*c,b=l*f,w=r.x,A=r.y,E=r.z;return i[0]=(1-(g+_))*w,i[1]=(d+b)*w,i[2]=(p-v)*w,i[3]=0,i[4]=(d-b)*A,i[5]=(1-(h+_))*A,i[6]=(x+m)*A,i[7]=0,i[8]=(p+v)*E,i[9]=(x-m)*E,i[10]=(1-(h+g))*E,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Nf.set(i[0],i[1],i[2]).length();const o=Nf.set(i[4],i[5],i[6]).length(),a=Nf.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],yo.copy(this);const u=1/s,c=1/o,f=1/a;return yo.elements[0]*=u,yo.elements[1]*=u,yo.elements[2]*=u,yo.elements[4]*=c,yo.elements[5]*=c,yo.elements[6]*=c,yo.elements[8]*=f,yo.elements[9]*=f,yo.elements[10]*=f,n.setFromRotationMatrix(yo),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o){o===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*s/(n-e),u=2*s/(r-i),c=(n+e)/(n-e),f=(r+i)/(r-i),h=-(o+s)/(o-s),d=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,r,i,s,o){const a=this.elements,l=1/(n-e),u=1/(r-i),c=1/(o-s),f=(n+e)*l,h=(r+i)*u,d=(o+s)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}st.prototype.isMatrix4=!0;const Nf=new q,yo=new st,o$=new q(0,0,0),a$=new q(1,1,1),Gl=new q,Hv=new q,ys=new q,QT=new st,eP=new In;class ff{constructor(e=0,n=0,r=0,i=ff.DefaultOrder){this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],f=i[2],h=i[6],d=i[10];switch(n){case"XYZ":this._y=Math.asin(wi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-wi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(wi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-wi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(wi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-wi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return QT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(QT,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return eP.setFromEuler(this),this.setFromQuaternion(eP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new q(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}ff.prototype.isEuler=!0;ff.DefaultOrder="XYZ";ff.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class AB{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}}let l$=0;const tP=new q,Vf=new In,Ga=new st,Wv=new q,vp=new q,u$=new q,c$=new In,nP=new q(1,0,0),rP=new q(0,1,0),iP=new q(0,0,1),f$={type:"added"},sP={type:"removed"};class Qt extends bl{constructor(){super(),Object.defineProperty(this,"id",{value:l$++}),this.uuid=Lo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qt.DefaultUp.clone();const e=new q,n=new ff,r=new In,i=new q(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new st},normalMatrix:{value:new kr}}),this.matrix=new st,this.matrixWorld=new st,this.matrixAutoUpdate=Qt.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new AB,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Vf.setFromAxisAngle(e,n),this.quaternion.multiply(Vf),this}rotateOnWorldAxis(e,n){return Vf.setFromAxisAngle(e,n),this.quaternion.premultiply(Vf),this}rotateX(e){return this.rotateOnAxis(nP,e)}rotateY(e){return this.rotateOnAxis(rP,e)}rotateZ(e){return this.rotateOnAxis(iP,e)}translateOnAxis(e,n){return tP.copy(e).applyQuaternion(this.quaternion),this.position.add(tP.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(nP,e)}translateY(e){return this.translateOnAxis(rP,e)}translateZ(e){return this.translateOnAxis(iP,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(Ga.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Wv.copy(e):Wv.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),vp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ga.lookAt(vp,Wv,this.up):Ga.lookAt(Wv,vp,this.up),this.quaternion.setFromRotationMatrix(Ga),i&&(Ga.extractRotation(i.matrixWorld),Vf.setFromRotationMatrix(Ga),this.quaternion.premultiply(Vf.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(f$)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(sP)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(sP)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Ga.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ga.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ga),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vp,e,u$),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vp,c$,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++)i[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),h=o(e.skeletons),d=o(e.animations);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),f.length>0&&(r.shapes=f),h.length>0&&(r.skeletons=h),d.length>0&&(r.animations=d)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Qt.DefaultUp=new q(0,1,0);Qt.DefaultMatrixAutoUpdate=!0;Qt.prototype.isObject3D=!0;const _o=new q,Ua=new q,ob=new q,Ha=new q,zf=new q,Gf=new q,oP=new q,ab=new q,lb=new q,ub=new q;class on{constructor(e=new q,n=new q,r=new q){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),_o.subVectors(e,n),i.cross(_o);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){_o.subVectors(i,n),Ua.subVectors(r,n),ob.subVectors(e,n);const o=_o.dot(_o),a=_o.dot(Ua),l=_o.dot(ob),u=Ua.dot(Ua),c=Ua.dot(ob),f=o*u-a*a;if(f===0)return s.set(-2,-1,-1);const h=1/f,d=(u*l-a*c)*h,p=(o*c-a*l)*h;return s.set(1-d-p,p,d)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ha),Ha.x>=0&&Ha.y>=0&&Ha.x+Ha.y<=1}static getUV(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Ha),l.set(0,0),l.addScaledVector(s,Ha.x),l.addScaledVector(o,Ha.y),l.addScaledVector(a,Ha.z),l}static isFrontFacing(e,n,r,i){return _o.subVectors(r,n),Ua.subVectors(e,n),_o.cross(Ua).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _o.subVectors(this.c,this.b),Ua.subVectors(this.a,this.b),_o.cross(Ua).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return on.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return on.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return on.getUV(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return on.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return on.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;zf.subVectors(i,r),Gf.subVectors(s,r),ab.subVectors(e,r);const l=zf.dot(ab),u=Gf.dot(ab);if(l<=0&&u<=0)return n.copy(r);lb.subVectors(e,i);const c=zf.dot(lb),f=Gf.dot(lb);if(c>=0&&f<=c)return n.copy(i);const h=l*f-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),n.copy(r).addScaledVector(zf,o);ub.subVectors(e,s);const d=zf.dot(ub),p=Gf.dot(ub);if(p>=0&&d<=p)return n.copy(s);const g=d*u-l*p;if(g<=0&&u>=0&&p<=0)return a=u/(u-p),n.copy(r).addScaledVector(Gf,a);const x=c*p-d*f;if(x<=0&&f-c>=0&&d-p>=0)return oP.subVectors(s,i),a=(f-c)/(f-c+(d-p)),n.copy(i).addScaledVector(oP,a);const _=1/(x+g+h);return o=g*_,a=h*_,n.copy(r).addScaledVector(zf,o).addScaledVector(Gf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let h$=0;class Pi extends bl{constructor(){super(),Object.defineProperty(this,"id",{value:h$++}),this.uuid=Lo(),this.name="",this.type="Material",this.fog=!0,this.blending=dg,this.side=Ou,this.vertexColors=!1,this.opacity=1,this.format=ci,this.transparent=!1,this.blendSrc=uB,this.blendDst=cB,this.blendEquation=gh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=hA,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=G7,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jw,this.stencilZFail=Jw,this.stencilZPass=Jw,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn("THREE.Material: '"+n+"' parameter is undefined.");continue}if(n==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===lB;continue}const i=this[n];if(i===void 0){console.warn("THREE."+this.type+": '"+n+"' is not a property of this material.");continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==dg&&(r.blending=this.blending),this.side!==Ou&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.format!==ci&&(r.format=this.format),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}Pi.prototype.isMaterial=!0;const EB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wo={h:0,s:0,l:0},$v={h:0,s:0,l:0};function cb(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}function fb(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function hb(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}class ut{constructor(e,n,r){return n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,n,r){return this.r=e,this.g=n,this.b=r,this}setHSL(e,n,r){if(e=uM(e,1),n=wi(n,0,1),r=wi(r,0,1),n===0)this.r=this.g=this.b=r;else{const i=r<=.5?r*(1+n):r+n-r*n,s=2*r-i;this.r=cb(s,i,e+1/3),this.g=cb(s,i,e),this.b=cb(s,i,e-1/3)}return this}setStyle(e){function n(i){i!==void 0&&parseFloat(i)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,n(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,n(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const a=parseFloat(i[1])/360,l=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return n(i[4]),this.setHSL(a,l,u)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=r[1],s=i.length;if(s===3)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const n=EB[e.toLowerCase()];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,n=2){return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}copyLinearToGamma(e,n=2){const r=n>0?1/n:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=fb(e.r),this.g=fb(e.g),this.b=fb(e.b),this}copyLinearToSRGB(e){return this.r=hb(e.r),this.g=hb(e.g),this.b=hb(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const n=this.r,r=this.g,i=this.b,s=Math.max(n,r,i),o=Math.min(n,r,i);let a,l;const u=(o+s)/2;if(o===s)a=0,l=0;else{const c=s-o;switch(l=u<=.5?c/(s+o):c/(2-s-o),s){case n:a=(r-i)/c+(r<i?6:0);break;case r:a=(i-n)/c+2;break;case i:a=(n-r)/c+4;break}a/=6}return e.h=a,e.s=l,e.l=u,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,n,r){return this.getHSL(wo),wo.h+=e,wo.s+=n,wo.l+=r,this.setHSL(wo.h,wo.s,wo.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(wo),e.getHSL($v);const r=gg(wo.h,$v.h,n),i=gg(wo.s,$v.s,n),s=gg(wo.l,$v.l,n);return this.setHSL(r,i,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}ut.NAMES=EB;ut.prototype.isColor=!0;ut.prototype.r=1;ut.prototype.g=1;ut.prototype.b=1;class gs extends Pi{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=b_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}gs.prototype.isMeshBasicMaterial=!0;const Fn=new q,Xv=new Ie;class Rn{constructor(e,n,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r===!0,this.usage=Jg,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const n=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new ut),n[r++]=o.r,n[r++]=o.g,n[r++]=o.b}return this}copyVector2sArray(e){const n=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Ie),n[r++]=o.x,n[r++]=o.y}return this}copyVector3sArray(e){const n=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new q),n[r++]=o.x,n[r++]=o.y,n[r++]=o.z}return this}copyVector4sArray(e){const n=this.array;let r=0;for(let i=0,s=e.length;i<s;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new $t),n[r++]=o.x,n[r++]=o.y,n[r++]=o.z,n[r++]=o.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Xv.fromBufferAttribute(this,n),Xv.applyMatrix3(e),this.setXY(n,Xv.x,Xv.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Fn.fromBufferAttribute(this,n),Fn.applyMatrix3(e),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Fn.x=this.getX(n),Fn.y=this.getY(n),Fn.z=this.getZ(n),Fn.applyMatrix4(e),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Fn.x=this.getX(n),Fn.y=this.getY(n),Fn.z=this.getZ(n),Fn.applyNormalMatrix(e),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Fn.x=this.getX(n),Fn.y=this.getY(n),Fn.z=this.getZ(n),Fn.transformDirection(e),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){return this.array[e*this.itemSize]}setX(e,n){return this.array[e*this.itemSize]=n,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,n){return this.array[e*this.itemSize+1]=n,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,n){return this.array[e*this.itemSize+2]=n,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,n){return this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Jg&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}Rn.prototype.isBufferAttribute=!0;class CB extends Rn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class MB extends Rn{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class d$ extends Rn{constructor(e,n,r){super(new Uint16Array(e),n,r)}}d$.prototype.isFloat16BufferAttribute=!0;class Vt extends Rn{constructor(e,n,r){super(new Float32Array(e),n,r)}}let p$=0;const Os=new st,db=new Qt,Uf=new q,_s=new Mr,yp=new Mr,Wr=new q;class Gt extends bl{constructor(){super(),Object.defineProperty(this,"id",{value:p$++}),this.uuid=Lo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xB(e)>65535?MB:CB)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new kr().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Os.makeRotationFromQuaternion(e),this.applyMatrix4(Os),this}rotateX(e){return Os.makeRotationX(e),this.applyMatrix4(Os),this}rotateY(e){return Os.makeRotationY(e),this.applyMatrix4(Os),this}rotateZ(e){return Os.makeRotationZ(e),this.applyMatrix4(Os),this}translate(e,n,r){return Os.makeTranslation(e,n,r),this.applyMatrix4(Os),this}scale(e,n,r){return Os.makeScale(e,n,r),this.applyMatrix4(Os),this}lookAt(e){return db.lookAt(e),db.updateMatrix(),this.applyMatrix4(db.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Uf).negate(),this.translate(Uf.x,Uf.y,Uf.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Vt(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Mr);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];_s.setFromBufferAttribute(s),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,_s.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,_s.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(_s.min),this.boundingBox.expandByPoint(_s.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new qu);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new q,1/0);return}if(e){const r=this.boundingSphere.center;if(_s.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];yp.setFromBufferAttribute(a),this.morphTargetsRelative?(Wr.addVectors(_s.min,yp.min),_s.expandByPoint(Wr),Wr.addVectors(_s.max,yp.max),_s.expandByPoint(Wr)):(_s.expandByPoint(yp.min),_s.expandByPoint(yp.max))}_s.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)Wr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(Wr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Wr.fromBufferAttribute(a,u),l&&(Uf.fromBufferAttribute(e,u),Wr.add(Uf)),i=Math.max(i,r.distanceToSquared(Wr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;n.tangent===void 0&&this.setAttribute("tangent",new Rn(new Float32Array(4*a),4));const l=n.tangent.array,u=[],c=[];for(let M=0;M<a;M++)u[M]=new q,c[M]=new q;const f=new q,h=new q,d=new q,p=new Ie,g=new Ie,x=new Ie,_=new q,m=new q;function v(M,D,T){f.fromArray(i,M*3),h.fromArray(i,D*3),d.fromArray(i,T*3),p.fromArray(o,M*2),g.fromArray(o,D*2),x.fromArray(o,T*2),h.sub(f),d.sub(f),g.sub(p),x.sub(p);const L=1/(g.x*x.y-x.x*g.y);!isFinite(L)||(_.copy(h).multiplyScalar(x.y).addScaledVector(d,-g.y).multiplyScalar(L),m.copy(d).multiplyScalar(g.x).addScaledVector(h,-x.x).multiplyScalar(L),u[M].add(_),u[D].add(_),u[T].add(_),c[M].add(m),c[D].add(m),c[T].add(m))}let b=this.groups;b.length===0&&(b=[{start:0,count:r.length}]);for(let M=0,D=b.length;M<D;++M){const T=b[M],L=T.start,F=T.count;for(let k=L,I=L+F;k<I;k+=3)v(r[k+0],r[k+1],r[k+2])}const w=new q,A=new q,E=new q,S=new q;function C(M){E.fromArray(s,M*3),S.copy(E);const D=u[M];w.copy(D),w.sub(E.multiplyScalar(E.dot(D))).normalize(),A.crossVectors(S,D);const L=A.dot(c[M])<0?-1:1;l[M*4]=w.x,l[M*4+1]=w.y,l[M*4+2]=w.z,l[M*4+3]=L}for(let M=0,D=b.length;M<D;++M){const T=b[M],L=T.start,F=T.count;for(let k=L,I=L+F;k<I;k+=3)C(r[k+0]),C(r[k+1]),C(r[k+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Rn(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let h=0,d=r.count;h<d;h++)r.setXYZ(h,0,0,0);const i=new q,s=new q,o=new q,a=new q,l=new q,u=new q,c=new q,f=new q;if(e)for(let h=0,d=e.count;h<d;h+=3){const p=e.getX(h+0),g=e.getX(h+1),x=e.getX(h+2);i.fromBufferAttribute(n,p),s.fromBufferAttribute(n,g),o.fromBufferAttribute(n,x),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),a.fromBufferAttribute(r,p),l.fromBufferAttribute(r,g),u.fromBufferAttribute(r,x),a.add(c),l.add(c),u.add(c),r.setXYZ(p,a.x,a.y,a.z),r.setXYZ(g,l.x,l.y,l.z),r.setXYZ(x,u.x,u.y,u.z)}else for(let h=0,d=n.count;h<d;h+=3)i.fromBufferAttribute(n,h+0),s.fromBufferAttribute(n,h+1),o.fromBufferAttribute(n,h+2),c.subVectors(o,s),f.subVectors(i,s),c.cross(f),r.setXYZ(h+0,c.x,c.y,c.z),r.setXYZ(h+1,c.x,c.y,c.z),r.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(e,n){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}n===void 0&&(n=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const r=this.attributes;for(const i in r){if(e.attributes[i]===void 0)continue;const o=r[i].array,a=e.attributes[i],l=a.array,u=a.itemSize*n,c=Math.min(l.length,o.length-u);for(let f=0,h=u;f<c;f++,h++)o[h]=l[f]}return this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)Wr.fromBufferAttribute(e,n),Wr.normalize(),e.setXYZ(n,Wr.x,Wr.y,Wr.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,h=new u.constructor(l.length*c);let d=0,p=0;for(let g=0,x=l.length;g<x;g++){a.isInterleavedBufferAttribute?d=l[g]*a.data.stride+a.offset:d=l[g]*c;for(let _=0;_<c;_++)h[p++]=u[d++]}return new Rn(h,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Gt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,f=u.length;c<f;c++){const h=u[c],d=e(h,r);l.push(d)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,h=u.length;f<h;f++){const d=u[f];c.push(d.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(n))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let h=0,d=f.length;h<d;h++)c.push(f[h].clone(n));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Gt.prototype.isBufferGeometry=!0;const aP=new st,Hf=new Ju,pb=new qu,Ul=new q,Hl=new q,Wl=new q,gb=new q,mb=new q,vb=new q,Yv=new q,jv=new q,qv=new q,Jv=new Ie,Kv=new Ie,Zv=new Ie,yb=new q,Qv=new q;class Fe extends Qt{constructor(e=new Gt,n=new gs){super(),this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e){return super.copy(e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const n=e.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const n=e.morphTargets;n!==void 0&&n.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;if(i===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),pb.copy(r.boundingSphere),pb.applyMatrix4(s),e.ray.intersectsSphere(pb)===!1)||(aP.copy(s).invert(),Hf.copy(e.ray).applyMatrix4(aP),r.boundingBox!==null&&Hf.intersectsBox(r.boundingBox)===!1))return;let o;if(r.isBufferGeometry){const a=r.index,l=r.attributes.position,u=r.morphAttributes.position,c=r.morphTargetsRelative,f=r.attributes.uv,h=r.attributes.uv2,d=r.groups,p=r.drawRange;if(a!==null)if(Array.isArray(i))for(let g=0,x=d.length;g<x;g++){const _=d[g],m=i[_.materialIndex],v=Math.max(_.start,p.start),b=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));for(let w=v,A=b;w<A;w+=3){const E=a.getX(w),S=a.getX(w+1),C=a.getX(w+2);o=e0(this,m,e,Hf,l,u,c,f,h,E,S,C),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=_.materialIndex,n.push(o))}}else{const g=Math.max(0,p.start),x=Math.min(a.count,p.start+p.count);for(let _=g,m=x;_<m;_+=3){const v=a.getX(_),b=a.getX(_+1),w=a.getX(_+2);o=e0(this,i,e,Hf,l,u,c,f,h,v,b,w),o&&(o.faceIndex=Math.floor(_/3),n.push(o))}}else if(l!==void 0)if(Array.isArray(i))for(let g=0,x=d.length;g<x;g++){const _=d[g],m=i[_.materialIndex],v=Math.max(_.start,p.start),b=Math.min(l.count,Math.min(_.start+_.count,p.start+p.count));for(let w=v,A=b;w<A;w+=3){const E=w,S=w+1,C=w+2;o=e0(this,m,e,Hf,l,u,c,f,h,E,S,C),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=_.materialIndex,n.push(o))}}else{const g=Math.max(0,p.start),x=Math.min(l.count,p.start+p.count);for(let _=g,m=x;_<m;_+=3){const v=_,b=_+1,w=_+2;o=e0(this,i,e,Hf,l,u,c,f,h,v,b,w),o&&(o.faceIndex=Math.floor(_/3),n.push(o))}}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}Fe.prototype.isMesh=!0;function g$(t,e,n,r,i,s,o,a){let l;if(e.side===rr?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side!==_r,a),l===null)return null;Qv.copy(a),Qv.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(Qv);return u<n.near||u>n.far?null:{distance:u,point:Qv.clone(),object:t}}function e0(t,e,n,r,i,s,o,a,l,u,c,f){Ul.fromBufferAttribute(i,u),Hl.fromBufferAttribute(i,c),Wl.fromBufferAttribute(i,f);const h=t.morphTargetInfluences;if(s&&h){Yv.set(0,0,0),jv.set(0,0,0),qv.set(0,0,0);for(let p=0,g=s.length;p<g;p++){const x=h[p],_=s[p];x!==0&&(gb.fromBufferAttribute(_,u),mb.fromBufferAttribute(_,c),vb.fromBufferAttribute(_,f),o?(Yv.addScaledVector(gb,x),jv.addScaledVector(mb,x),qv.addScaledVector(vb,x)):(Yv.addScaledVector(gb.sub(Ul),x),jv.addScaledVector(mb.sub(Hl),x),qv.addScaledVector(vb.sub(Wl),x)))}Ul.add(Yv),Hl.add(jv),Wl.add(qv)}t.isSkinnedMesh&&(t.boneTransform(u,Ul),t.boneTransform(c,Hl),t.boneTransform(f,Wl));const d=g$(t,e,n,r,Ul,Hl,Wl,yb);if(d){a&&(Jv.fromBufferAttribute(a,u),Kv.fromBufferAttribute(a,c),Zv.fromBufferAttribute(a,f),d.uv=on.getUV(yb,Ul,Hl,Wl,Jv,Kv,Zv,new Ie)),l&&(Jv.fromBufferAttribute(l,u),Kv.fromBufferAttribute(l,c),Zv.fromBufferAttribute(l,f),d.uv2=on.getUV(yb,Ul,Hl,Wl,Jv,Kv,Zv,new Ie));const p={a:u,b:c,c:f,normal:new q,materialIndex:0};on.getNormal(Ul,Hl,Wl,p.normal),d.face=p}return d}class Ot extends Gt{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],f=[];let h=0,d=0;p("z","y","x",-1,-1,r,n,e,o,s,0),p("z","y","x",1,-1,r,n,-e,o,s,1),p("x","z","y",1,1,e,r,n,i,o,2),p("x","z","y",1,-1,e,r,-n,i,o,3),p("x","y","z",1,-1,e,n,r,i,s,4),p("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new Vt(u,3)),this.setAttribute("normal",new Vt(c,3)),this.setAttribute("uv",new Vt(f,2));function p(g,x,_,m,v,b,w,A,E,S,C){const M=b/E,D=w/S,T=b/2,L=w/2,F=A/2,k=E+1,I=S+1;let O=0,$=0;const N=new q;for(let W=0;W<I;W++){const H=W*D-L;for(let K=0;K<k;K++){const ee=K*M-T;N[g]=ee*m,N[x]=H*v,N[_]=F,u.push(N.x,N.y,N.z),N[g]=0,N[x]=0,N[_]=A>0?1:-1,c.push(N.x,N.y,N.z),f.push(K/E),f.push(1-W/S),O+=1}}for(let W=0;W<S;W++)for(let H=0;H<E;H++){const K=h+H+k*W,ee=h+H+k*(W+1),Z=h+(H+1)+k*(W+1),J=h+(H+1)+k*W;l.push(K,ee,J),l.push(ee,Z,J),$+=6}a.addGroup(d,$,C),d+=$,h+=O}}static fromJSON(e){return new Ot(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function sd(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function vi(t){const e={};for(let n=0;n<t.length;n++){const r=sd(t[n]);for(const i in r)e[i]=r[i]}return e}const DB={clone:sd,merge:vi};var m$=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,v$=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class rf extends Pi{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=m$,this.fragmentShader=v$,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=sd(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}rf.prototype.isShaderMaterial=!0;class cM extends Qt{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new st,this.projectionMatrix=new st,this.projectionMatrixInverse=new st}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}cM.prototype.isCamera=!0;class zi extends cM{constructor(e=50,n=1,r=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=Kg*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Vh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Kg*2*Math.atan(Math.tan(Vh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Vh*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}zi.prototype.isPerspectiveCamera=!0;const Wf=90,$f=1;class fM extends Qt{constructor(e,n,r){if(super(),this.type="CubeCamera",r.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=r;const i=new zi(Wf,$f,e,n);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new q(1,0,0)),this.add(i);const s=new zi(Wf,$f,e,n);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new q(-1,0,0)),this.add(s);const o=new zi(Wf,$f,e,n);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new q(0,1,0)),this.add(o);const a=new zi(Wf,$f,e,n);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new q(0,-1,0)),this.add(a);const l=new zi(Wf,$f,e,n);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new q(0,0,1)),this.add(l);const u=new zi(Wf,$f,e,n);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new q(0,0,-1)),this.add(u)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,c=e.xr.enabled,f=e.getRenderTarget();e.xr.enabled=!1;const h=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,s),e.setRenderTarget(r,2),e.render(n,o),e.setRenderTarget(r,3),e.render(n,a),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=h,e.setRenderTarget(r,5),e.render(n,u),e.setRenderTarget(f),e.xr.enabled=c}}class E_ extends Qr{constructor(e,n,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],n=n!==void 0?n:Hm,super(e,n,r,i,s,o,a,l,u,c),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}E_.prototype.isCubeTexture=!0;class TB extends wa{constructor(e,n,r){Number.isInteger(n)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),n=r),super(e,e,n),n=n||{},this.texture=new E_(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:kn,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.format=ci,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ot(5,5,5),s=new rf({name:"CubemapFromEquirect",uniforms:sd(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:rr,blending:Au});s.uniforms.tEquirect.value=n;const o=new Fe(i,s),a=n.minFilter;return n.minFilter===Ld&&(n.minFilter=kn),new fM(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}TB.prototype.isWebGLCubeRenderTarget=!0;const _b=new q,y$=new q,_$=new kr;class xs{constructor(e=new q(1,0,0),n=0){this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=_b.subVectors(r,n).cross(y$.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,n){const r=e.delta(_b),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(r).multiplyScalar(s).add(e.start)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||_$.getNormalMatrix(e),i=this.coplanarPoint(_b).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}xs.prototype.isPlane=!0;const Xf=new qu,t0=new q;class C_{constructor(e=new xs,n=new xs,r=new xs,i=new xs,s=new xs,o=new xs){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],d=r[9],p=r[10],g=r[11],x=r[12],_=r[13],m=r[14],v=r[15];return n[0].setComponents(a-i,f-l,g-h,v-x).normalize(),n[1].setComponents(a+i,f+l,g+h,v+x).normalize(),n[2].setComponents(a+s,f+u,g+d,v+_).normalize(),n[3].setComponents(a-s,f-u,g-d,v-_).normalize(),n[4].setComponents(a-o,f-c,g-p,v-m).normalize(),n[5].setComponents(a+o,f+c,g+p,v+m).normalize(),this}intersectsObject(e){const n=e.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),Xf.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Xf)}intersectsSprite(e){return Xf.center.set(0,0,0),Xf.radius=.7071067811865476,Xf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Xf)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(t0.x=i.normal.x>0?e.max.x:e.min.x,t0.y=i.normal.y>0?e.max.y:e.min.y,t0.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(t0)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function PB(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function w$(t,e){const n=e.isWebGL2,r=new WeakMap;function i(u,c){const f=u.array,h=u.usage,d=t.createBuffer();t.bindBuffer(c,d),t.bufferData(c,f,h),u.onUploadCallback();let p=5126;return f instanceof Float32Array?p=5126:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):f instanceof Uint16Array?u.isFloat16BufferAttribute?n?p=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):p=5123:f instanceof Int16Array?p=5122:f instanceof Uint32Array?p=5125:f instanceof Int32Array?p=5124:f instanceof Int8Array?p=5120:(f instanceof Uint8Array||f instanceof Uint8ClampedArray)&&(p=5121),{buffer:d,type:p,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,f){const h=c.array,d=c.updateRange;t.bindBuffer(f,u),d.count===-1?t.bufferSubData(f,0,h):(n?t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):t.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1)}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(t.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const h=r.get(u);(!h||h.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=r.get(u);f===void 0?r.set(u,i(u,c)):f.version<u.version&&(s(f.buffer,u,c),f.version=u.version)}return{get:o,remove:a,update:l}}class No extends Gt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,f=e/a,h=n/l,d=[],p=[],g=[],x=[];for(let _=0;_<c;_++){const m=_*h-o;for(let v=0;v<u;v++){const b=v*f-s;p.push(b,-m,0),g.push(0,0,1),x.push(v/a),x.push(1-_/l)}}for(let _=0;_<l;_++)for(let m=0;m<a;m++){const v=m+u*_,b=m+u*(_+1),w=m+1+u*(_+1),A=m+1+u*_;d.push(v,b,A),d.push(b,w,A)}this.setIndex(d),this.setAttribute("position",new Vt(p,3)),this.setAttribute("normal",new Vt(g,3)),this.setAttribute("uv",new Vt(x,2))}static fromJSON(e){return new No(e.width,e.height,e.widthSegments,e.heightSegments)}}var b$=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,x$=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,S$=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,A$=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,E$=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,C$=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,M$="vec3 transformed = vec3( position );",D$=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,T$=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,P$=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,L$=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,F$=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,I$=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,k$=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,R$=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,O$=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,B$=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,N$=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,V$=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,z$=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,G$=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,U$=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,H$=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,W$=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,$$=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,X$="gl_FragColor = linearToOutputTexel( gl_FragColor );",Y$=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,j$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
		envColor = envMapTexelToLinear( envColor );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,q$=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,J$=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,K$=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Z$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Q$=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,eX=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tX=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,nX=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,rX=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,iX=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		lightMapIrradiance *= PI;
	#endif
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,sX=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oX=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,aX=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,lX=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec;
			#ifdef ENVMAP_MODE_REFLECTION
				reflectVec = reflect( - viewDir, normal );
				reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			#else
				reflectVec = refract( - viewDir, normal, refractionRatio );
			#endif
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,uX=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,cX=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,fX=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hX=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,dX=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,pX=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	vec3 FssEss = specularColor * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gX=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,mX=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,vX=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,yX=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_X=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,wX=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,bX=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,xX=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,SX=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,EX=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,CX=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,MX=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,DX=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,TX=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform vec2 morphTargetsTextureSize;
		vec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {
			float texelIndex = float( vertexIndex * stride + offset );
			float y = floor( texelIndex / morphTargetsTextureSize.x );
			float x = texelIndex - y * morphTargetsTextureSize.x;
			vec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );
			return texture( morphTargetsTexture, morphUV ).xyz;
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,PX=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			#ifndef USE_MORPHNORMALS
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];
			#else
				if ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];
			#endif
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,LX=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,FX=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,IX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,kX=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,RX=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,OX=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,BX=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,NX=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,VX=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,zX=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,GX=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,UX=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,HX=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,WX=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,$X=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,XX=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,YX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,qX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,JX=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,KX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,ZX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,QX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,eY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,tY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,nY=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,iY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,sY=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,oY=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,aY=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( float roughness, float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef TEXTURE_LOD_EXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,
		vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,
		vec3 attenuationColor, float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,lY=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,uY=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,cY=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,fY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,hY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,dY=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,pY=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const gY=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,mY=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yY=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_Y=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,wY=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,bY=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,xY=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,SY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,AY=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,EY=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,CY=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,MY=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,DY=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TY=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,PY=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LY=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,FY=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IY=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,kY=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,RY=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OY=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BY=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,NY=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VY=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zY=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GY=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,UY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HY=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WY=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,$Y=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,XY=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Bt={alphamap_fragment:b$,alphamap_pars_fragment:x$,alphatest_fragment:S$,alphatest_pars_fragment:A$,aomap_fragment:E$,aomap_pars_fragment:C$,begin_vertex:M$,beginnormal_vertex:D$,bsdfs:T$,bumpmap_pars_fragment:P$,clipping_planes_fragment:L$,clipping_planes_pars_fragment:F$,clipping_planes_pars_vertex:I$,clipping_planes_vertex:k$,color_fragment:R$,color_pars_fragment:O$,color_pars_vertex:B$,color_vertex:N$,common:V$,cube_uv_reflection_fragment:z$,defaultnormal_vertex:G$,displacementmap_pars_vertex:U$,displacementmap_vertex:H$,emissivemap_fragment:W$,emissivemap_pars_fragment:$$,encodings_fragment:X$,encodings_pars_fragment:Y$,envmap_fragment:j$,envmap_common_pars_fragment:q$,envmap_pars_fragment:J$,envmap_pars_vertex:K$,envmap_physical_pars_fragment:lX,envmap_vertex:Z$,fog_vertex:Q$,fog_pars_vertex:eX,fog_fragment:tX,fog_pars_fragment:nX,gradientmap_pars_fragment:rX,lightmap_fragment:iX,lightmap_pars_fragment:sX,lights_lambert_vertex:oX,lights_pars_begin:aX,lights_toon_fragment:uX,lights_toon_pars_fragment:cX,lights_phong_fragment:fX,lights_phong_pars_fragment:hX,lights_physical_fragment:dX,lights_physical_pars_fragment:pX,lights_fragment_begin:gX,lights_fragment_maps:mX,lights_fragment_end:vX,logdepthbuf_fragment:yX,logdepthbuf_pars_fragment:_X,logdepthbuf_pars_vertex:wX,logdepthbuf_vertex:bX,map_fragment:xX,map_pars_fragment:SX,map_particle_fragment:AX,map_particle_pars_fragment:EX,metalnessmap_fragment:CX,metalnessmap_pars_fragment:MX,morphnormal_vertex:DX,morphtarget_pars_vertex:TX,morphtarget_vertex:PX,normal_fragment_begin:LX,normal_fragment_maps:FX,normal_pars_fragment:IX,normal_pars_vertex:kX,normal_vertex:RX,normalmap_pars_fragment:OX,clearcoat_normal_fragment_begin:BX,clearcoat_normal_fragment_maps:NX,clearcoat_pars_fragment:VX,output_fragment:zX,packing:GX,premultiplied_alpha_fragment:UX,project_vertex:HX,dithering_fragment:WX,dithering_pars_fragment:$X,roughnessmap_fragment:XX,roughnessmap_pars_fragment:YX,shadowmap_pars_fragment:jX,shadowmap_pars_vertex:qX,shadowmap_vertex:JX,shadowmask_pars_fragment:KX,skinbase_vertex:ZX,skinning_pars_vertex:QX,skinning_vertex:eY,skinnormal_vertex:tY,specularmap_fragment:nY,specularmap_pars_fragment:rY,tonemapping_fragment:iY,tonemapping_pars_fragment:sY,transmission_fragment:oY,transmission_pars_fragment:aY,uv_pars_fragment:lY,uv_pars_vertex:uY,uv_vertex:cY,uv2_pars_fragment:fY,uv2_pars_vertex:hY,uv2_vertex:dY,worldpos_vertex:pY,background_vert:gY,background_frag:mY,cube_vert:vY,cube_frag:yY,depth_vert:_Y,depth_frag:wY,distanceRGBA_vert:bY,distanceRGBA_frag:xY,equirect_vert:SY,equirect_frag:AY,linedashed_vert:EY,linedashed_frag:CY,meshbasic_vert:MY,meshbasic_frag:DY,meshlambert_vert:TY,meshlambert_frag:PY,meshmatcap_vert:LY,meshmatcap_frag:FY,meshnormal_vert:IY,meshnormal_frag:kY,meshphong_vert:RY,meshphong_frag:OY,meshphysical_vert:BY,meshphysical_frag:NY,meshtoon_vert:VY,meshtoon_frag:zY,points_vert:GY,points_frag:UY,shadow_vert:HY,shadow_frag:WY,sprite_vert:$Y,sprite_frag:XY},Qe={common:{diffuse:{value:new ut(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new kr},uv2Transform:{value:new kr},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ut(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ut(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new kr}},sprite:{diffuse:{value:new ut(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new kr}}},ra={basic:{uniforms:vi([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.fog]),vertexShader:Bt.meshbasic_vert,fragmentShader:Bt.meshbasic_frag},lambert:{uniforms:vi([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.fog,Qe.lights,{emissive:{value:new ut(0)}}]),vertexShader:Bt.meshlambert_vert,fragmentShader:Bt.meshlambert_frag},phong:{uniforms:vi([Qe.common,Qe.specularmap,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,Qe.lights,{emissive:{value:new ut(0)},specular:{value:new ut(1118481)},shininess:{value:30}}]),vertexShader:Bt.meshphong_vert,fragmentShader:Bt.meshphong_frag},standard:{uniforms:vi([Qe.common,Qe.envmap,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.roughnessmap,Qe.metalnessmap,Qe.fog,Qe.lights,{emissive:{value:new ut(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag},toon:{uniforms:vi([Qe.common,Qe.aomap,Qe.lightmap,Qe.emissivemap,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.gradientmap,Qe.fog,Qe.lights,{emissive:{value:new ut(0)}}]),vertexShader:Bt.meshtoon_vert,fragmentShader:Bt.meshtoon_frag},matcap:{uniforms:vi([Qe.common,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,Qe.fog,{matcap:{value:null}}]),vertexShader:Bt.meshmatcap_vert,fragmentShader:Bt.meshmatcap_frag},points:{uniforms:vi([Qe.points,Qe.fog]),vertexShader:Bt.points_vert,fragmentShader:Bt.points_frag},dashed:{uniforms:vi([Qe.common,Qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Bt.linedashed_vert,fragmentShader:Bt.linedashed_frag},depth:{uniforms:vi([Qe.common,Qe.displacementmap]),vertexShader:Bt.depth_vert,fragmentShader:Bt.depth_frag},normal:{uniforms:vi([Qe.common,Qe.bumpmap,Qe.normalmap,Qe.displacementmap,{opacity:{value:1}}]),vertexShader:Bt.meshnormal_vert,fragmentShader:Bt.meshnormal_frag},sprite:{uniforms:vi([Qe.sprite,Qe.fog]),vertexShader:Bt.sprite_vert,fragmentShader:Bt.sprite_frag},background:{uniforms:{uvTransform:{value:new kr},t2D:{value:null}},vertexShader:Bt.background_vert,fragmentShader:Bt.background_frag},cube:{uniforms:vi([Qe.envmap,{opacity:{value:1}}]),vertexShader:Bt.cube_vert,fragmentShader:Bt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Bt.equirect_vert,fragmentShader:Bt.equirect_frag},distanceRGBA:{uniforms:vi([Qe.common,Qe.displacementmap,{referencePosition:{value:new q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Bt.distanceRGBA_vert,fragmentShader:Bt.distanceRGBA_frag},shadow:{uniforms:vi([Qe.lights,Qe.fog,{color:{value:new ut(0)},opacity:{value:1}}]),vertexShader:Bt.shadow_vert,fragmentShader:Bt.shadow_frag}};ra.physical={uniforms:vi([ra.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ut(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ut(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new ut(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Bt.meshphysical_vert,fragmentShader:Bt.meshphysical_frag};function YY(t,e,n,r,i){const s=new ut(0);let o=0,a,l,u=null,c=0,f=null;function h(p,g){let x=!1,_=g.isScene===!0?g.background:null;_&&_.isTexture&&(_=e.get(_));const m=t.xr,v=m.getSession&&m.getSession();v&&v.environmentBlendMode==="additive"&&(_=null),_===null?d(s,o):_&&_.isColor&&(d(_,1),x=!0),(t.autoClear||x)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===x_)?(l===void 0&&(l=new Fe(new Ot(1,1,1),new rf({name:"BackgroundCubeMaterial",uniforms:sd(ra.cube.uniforms),vertexShader:ra.cube.vertexShader,fragmentShader:ra.cube.fragmentShader,side:rr,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(b,w,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=_,l.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,(u!==_||c!==_.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,u=_,c=_.version,f=t.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):_&&_.isTexture&&(a===void 0&&(a=new Fe(new No(2,2),new rf({name:"BackgroundMaterial",uniforms:sd(ra.background.uniforms),vertexShader:ra.background.vertexShader,fragmentShader:ra.background.fragmentShader,side:Ou,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=_,_.matrixAutoUpdate===!0&&_.updateMatrix(),a.material.uniforms.uvTransform.value.copy(_.matrix),(u!==_||c!==_.version||f!==t.toneMapping)&&(a.material.needsUpdate=!0,u=_,c=_.version,f=t.toneMapping),p.unshift(a,a.geometry,a.material,0,0,null))}function d(p,g){n.buffers.color.setClear(p.r,p.g,p.b,g,i)}return{getClearColor:function(){return s},setClearColor:function(p,g=1){s.set(p),o=g,d(s,o)},getClearAlpha:function(){return o},setClearAlpha:function(p){o=p,d(s,o)},render:h}}function jY(t,e,n,r){const i=t.getParameter(34921),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=g(null);let u=l;function c(L,F,k,I,O){let $=!1;if(o){const N=p(I,k,F);u!==N&&(u=N,h(u.object)),$=x(I,O),$&&_(I,O)}else{const N=F.wireframe===!0;(u.geometry!==I.id||u.program!==k.id||u.wireframe!==N)&&(u.geometry=I.id,u.program=k.id,u.wireframe=N,$=!0)}L.isInstancedMesh===!0&&($=!0),O!==null&&n.update(O,34963),$&&(E(L,F,k,I),O!==null&&t.bindBuffer(34963,n.get(O).buffer))}function f(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function h(L){return r.isWebGL2?t.bindVertexArray(L):s.bindVertexArrayOES(L)}function d(L){return r.isWebGL2?t.deleteVertexArray(L):s.deleteVertexArrayOES(L)}function p(L,F,k){const I=k.wireframe===!0;let O=a[L.id];O===void 0&&(O={},a[L.id]=O);let $=O[F.id];$===void 0&&($={},O[F.id]=$);let N=$[I];return N===void 0&&(N=g(f()),$[I]=N),N}function g(L){const F=[],k=[],I=[];for(let O=0;O<i;O++)F[O]=0,k[O]=0,I[O]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:k,attributeDivisors:I,object:L,attributes:{},index:null}}function x(L,F){const k=u.attributes,I=L.attributes;let O=0;for(const $ in I){const N=k[$],W=I[$];if(N===void 0||N.attribute!==W||N.data!==W.data)return!0;O++}return u.attributesNum!==O||u.index!==F}function _(L,F){const k={},I=L.attributes;let O=0;for(const $ in I){const N=I[$],W={};W.attribute=N,N.data&&(W.data=N.data),k[$]=W,O++}u.attributes=k,u.attributesNum=O,u.index=F}function m(){const L=u.newAttributes;for(let F=0,k=L.length;F<k;F++)L[F]=0}function v(L){b(L,0)}function b(L,F){const k=u.newAttributes,I=u.enabledAttributes,O=u.attributeDivisors;k[L]=1,I[L]===0&&(t.enableVertexAttribArray(L),I[L]=1),O[L]!==F&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](L,F),O[L]=F)}function w(){const L=u.newAttributes,F=u.enabledAttributes;for(let k=0,I=F.length;k<I;k++)F[k]!==L[k]&&(t.disableVertexAttribArray(k),F[k]=0)}function A(L,F,k,I,O,$){r.isWebGL2===!0&&(k===5124||k===5125)?t.vertexAttribIPointer(L,F,k,O,$):t.vertexAttribPointer(L,F,k,I,O,$)}function E(L,F,k,I){if(r.isWebGL2===!1&&(L.isInstancedMesh||I.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;m();const O=I.attributes,$=k.getAttributes(),N=F.defaultAttributeValues;for(const W in $){const H=$[W];if(H.location>=0){let K=O[W];if(K===void 0&&(W==="instanceMatrix"&&L.instanceMatrix&&(K=L.instanceMatrix),W==="instanceColor"&&L.instanceColor&&(K=L.instanceColor)),K!==void 0){const ee=K.normalized,Z=K.itemSize,J=n.get(K);if(J===void 0)continue;const X=J.buffer,Q=J.type,oe=J.bytesPerElement;if(K.isInterleavedBufferAttribute){const he=K.data,ve=he.stride,ye=K.offset;if(he&&he.isInstancedInterleavedBuffer){for(let V=0;V<H.locationSize;V++)b(H.location+V,he.meshPerAttribute);L.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=he.meshPerAttribute*he.count)}else for(let V=0;V<H.locationSize;V++)v(H.location+V);t.bindBuffer(34962,X);for(let V=0;V<H.locationSize;V++)A(H.location+V,Z/H.locationSize,Q,ee,ve*oe,(ye+Z/H.locationSize*V)*oe)}else{if(K.isInstancedBufferAttribute){for(let he=0;he<H.locationSize;he++)b(H.location+he,K.meshPerAttribute);L.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let he=0;he<H.locationSize;he++)v(H.location+he);t.bindBuffer(34962,X);for(let he=0;he<H.locationSize;he++)A(H.location+he,Z/H.locationSize,Q,ee,Z*oe,Z/H.locationSize*he*oe)}}else if(N!==void 0){const ee=N[W];if(ee!==void 0)switch(ee.length){case 2:t.vertexAttrib2fv(H.location,ee);break;case 3:t.vertexAttrib3fv(H.location,ee);break;case 4:t.vertexAttrib4fv(H.location,ee);break;default:t.vertexAttrib1fv(H.location,ee)}}}}w()}function S(){D();for(const L in a){const F=a[L];for(const k in F){const I=F[k];for(const O in I)d(I[O].object),delete I[O];delete F[k]}delete a[L]}}function C(L){if(a[L.id]===void 0)return;const F=a[L.id];for(const k in F){const I=F[k];for(const O in I)d(I[O].object),delete I[O];delete F[k]}delete a[L.id]}function M(L){for(const F in a){const k=a[F];if(k[L.id]===void 0)continue;const I=k[L.id];for(const O in I)d(I[O].object),delete I[O];delete k[L.id]}}function D(){T(),u!==l&&(u=l,h(u.object))}function T(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:c,reset:D,resetDefaultState:T,dispose:S,releaseStatesOfGeometry:C,releaseStatesOfProgram:M,initAttributes:m,enableAttribute:v,disableUnusedAttributes:w}}function qY(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,c){t.drawArrays(s,u,c),n.update(c,s,1)}function l(u,c,f){if(f===0)return;let h,d;if(i)h=t,d="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](s,u,c,f),n.update(c,s,f)}this.setMode=o,this.render=a,this.renderInstances=l}function JY(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(E){if(E==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";E="mediump"}return E==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&t instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=n.logarithmicDepthBuffer===!0,f=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),g=t.getParameter(34921),x=t.getParameter(36347),_=t.getParameter(36348),m=t.getParameter(36349),v=h>0,b=o||e.has("OES_texture_float"),w=v&&b,A=o?t.getParameter(36183):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:f,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:g,maxVertexUniforms:x,maxVaryings:_,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:b,floatVertexTextures:w,maxSamples:A}}function KY(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new xs,a=new kr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h,d){const p=f.length!==0||h||r!==0||i;return i=h,n=c(f,d,0),r=f.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,u()},this.setState=function(f,h,d){const p=f.clippingPlanes,g=f.clipIntersection,x=f.clipShadows,_=t.get(f);if(!i||p===null||p.length===0||s&&!x)s?c(null):u();else{const m=s?0:r,v=m*4;let b=_.clippingState||null;l.value=b,b=c(p,h,v,d);for(let w=0;w!==v;++w)b[w]=n[w];_.clippingState=b,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=m}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(f,h,d,p){const g=f!==null?f.length:0;let x=null;if(g!==0){if(x=l.value,p!==!0||x===null){const _=d+g*4,m=h.matrixWorldInverse;a.getNormalMatrix(m),(x===null||x.length<_)&&(x=new Float32Array(_));for(let v=0,b=d;v!==g;++v,b+=4)o.copy(f[v]).applyMatrix4(m,a),o.normal.toArray(x,b),x[b+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,x}}function ZY(t){let e=new WeakMap;function n(o,a){return a===s1?o.mapping=Hm:a===dA&&(o.mapping=Wm),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===s1||a===dA)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=t.getRenderTarget(),c=new TB(l.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),t.setRenderTarget(u),o.addEventListener("dispose",i),n(c.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class hM extends cM{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}hM.prototype.isOrthographicCamera=!0;class M_ extends rf{constructor(e){super(e),this.type="RawShaderMaterial"}}M_.prototype.isRawShaderMaterial=!0;const zh=4,Eu=8,Qo=Math.pow(2,Eu),LB=[.125,.215,.35,.446,.526,.582],FB=Eu-zh+1+LB.length,Yf=20,Bu={[Zr]:0,[Br]:1,[S_]:2,[mB]:3,[vB]:4,[yB]:5,[lM]:6},wb=new hM,{_lodPlanes:_p,_sizeLods:lP,_sigmas:n0}=tj(),uP=new ut;let bb=null;const Lc=(1+Math.sqrt(5))/2,jf=1/Lc,cP=[new q(1,1,1),new q(-1,1,1),new q(1,1,-1),new q(-1,1,-1),new q(0,Lc,jf),new q(0,Lc,-jf),new q(jf,0,Lc),new q(-jf,0,Lc),new q(Lc,jf,0),new q(-Lc,jf,0)];class QY{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=nj(Yf),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){bb=this._renderer.getRenderTarget();const s=this._allocateTargets();return this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){this._cubemapShader===null&&(this._cubemapShader=dP(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){this._equirectShader===null&&(this._equirectShader=hP(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),this._cubemapShader!==null&&this._cubemapShader.dispose(),this._equirectShader!==null&&this._equirectShader.dispose();for(let e=0;e<_p.length;e++)_p[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(bb),e.scissorTest=!1,r0(e,0,0,e.width,e.height)}_fromTexture(e){bb=this._renderer.getRenderTarget();const n=this._allocateTargets(e);return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(e){const n={magFilter:mr,minFilter:mr,generateMipmaps:!1,type:Hs,format:pB,encoding:ej(e)?e.encoding:S_,depthBuffer:!1},r=fP(n);return r.depthBuffer=!e,this._pingPongRenderTarget=fP(n),r}_compileMaterial(e){const n=new Fe(_p[0],e);this._renderer.compile(n,wb)}_sceneToCubeUV(e,n,r,i){const a=new zi(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,h=c.outputEncoding,d=c.toneMapping;c.getClearColor(uP),c.toneMapping=qc,c.outputEncoding=Zr,c.autoClear=!1;const p=new gs({name:"PMREM.Background",side:rr,depthWrite:!1,depthTest:!1}),g=new Fe(new Ot,p);let x=!1;const _=e.background;_?_.isColor&&(p.color.copy(_),e.background=null,x=!0):(p.color.copy(uP),x=!0);for(let m=0;m<6;m++){const v=m%3;v==0?(a.up.set(0,l[m],0),a.lookAt(u[m],0,0)):v==1?(a.up.set(0,0,l[m]),a.lookAt(0,u[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,u[m])),r0(i,v*Qo,m>2?Qo:0,Qo,Qo),c.setRenderTarget(i),x&&c.render(g,a),c.render(e,a)}g.geometry.dispose(),g.material.dispose(),c.toneMapping=d,c.outputEncoding=h,c.autoClear=f,e.background=_}_setEncoding(e,n){this._renderer.capabilities.isWebGL2===!0&&n.format===ci&&n.type===Hs&&n.encoding===Br?e.value=Bu[Zr]:e.value=Bu[n.encoding]}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Hm||e.mapping===Wm;i?this._cubemapShader==null&&(this._cubemapShader=dP()):this._equirectShader==null&&(this._equirectShader=hP());const s=i?this._cubemapShader:this._equirectShader,o=new Fe(_p[0],s),a=s.uniforms;a.envMap.value=e,i||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,n.texture),r0(n,0,0,3*Qo,2*Qo),r.setRenderTarget(n),r.render(o,wb)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<FB;i++){const s=Math.sqrt(n0[i]*n0[i]-n0[i-1]*n0[i-1]),o=cP[(i-1)%cP.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new Fe(_p[i],u),h=u.uniforms,d=lP[r]-1,p=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Yf-1),g=s/p,x=isFinite(s)?1+Math.floor(c*g):Yf;x>Yf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Yf}`);const _=[];let m=0;for(let A=0;A<Yf;++A){const E=A/g,S=Math.exp(-E*E/2);_.push(S),A==0?m+=S:A<x&&(m+=2*S)}for(let A=0;A<_.length;A++)_[A]=_[A]/m;h.envMap.value=e.texture,h.samples.value=x,h.weights.value=_,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a),h.dTheta.value=p,h.mipInt.value=Eu-r,this._setEncoding(h.inputEncoding,e.texture),this._setEncoding(h.outputEncoding,e.texture);const v=lP[i],b=3*Math.max(0,Qo-2*v),w=(i===0?0:2*Qo)+2*v*(i>Eu-zh?i-Eu+zh:0);r0(n,b,w,3*v,2*v),l.setRenderTarget(n),l.render(f,wb)}}function ej(t){return t===void 0||t.type!==Hs?!1:t.encoding===Zr||t.encoding===Br||t.encoding===lM}function tj(){const t=[],e=[],n=[];let r=Eu;for(let i=0;i<FB;i++){const s=Math.pow(2,r);e.push(s);let o=1/s;i>Eu-zh?o=LB[i-Eu+zh-1]:i==0&&(o=0),n.push(o);const a=1/(s-1),l=-a/2,u=1+a/2,c=[l,l,u,l,u,u,l,l,u,u,l,u],f=6,h=6,d=3,p=2,g=1,x=new Float32Array(d*h*f),_=new Float32Array(p*h*f),m=new Float32Array(g*h*f);for(let b=0;b<f;b++){const w=b%3*2/3-1,A=b>2?0:-1,E=[w,A,0,w+2/3,A,0,w+2/3,A+1,0,w,A,0,w+2/3,A+1,0,w,A+1,0];x.set(E,d*h*b),_.set(c,p*h*b);const S=[b,b,b,b,b,b];m.set(S,g*h*b)}const v=new Gt;v.setAttribute("position",new Rn(x,d)),v.setAttribute("uv",new Rn(_,p)),v.setAttribute("faceIndex",new Rn(m,g)),t.push(v),r>zh&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function fP(t){const e=new wa(3*Qo,3*Qo,t);return e.texture.mapping=x_,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function r0(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function nj(t){const e=new Float32Array(t),n=new q(0,1,0);return new M_({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Bu[Zr]},outputEncoding:{value:Bu[Zr]}},vertexShader:dM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			${pM()}

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Au,depthTest:!1,depthWrite:!1})}function hP(){const t=new Ie(1,1);return new M_({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Bu[Zr]},outputEncoding:{value:Bu[Zr]}},vertexShader:dM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform vec2 texelSize;

			${pM()}

			#include <common>

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				vec2 f = fract( uv / texelSize - 0.5 );
				uv -= f * texelSize;
				vec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x += texelSize.x;
				vec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.y += texelSize.y;
				vec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;
				uv.x -= texelSize.x;
				vec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;

				vec3 tm = mix( tl, tr, f.x );
				vec3 bm = mix( bl, br, f.x );
				gl_FragColor.rgb = mix( tm, bm, f.y );

				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Au,depthTest:!1,depthWrite:!1})}function dP(){return new M_({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Bu[Zr]},outputEncoding:{value:Bu[Zr]}},vertexShader:dM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			${pM()}

			void main() {

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;
				gl_FragColor = linearToOutputTexel( gl_FragColor );

			}
		`,blending:Au,depthTest:!1,depthWrite:!1})}function dM(){return`

		precision mediump float;
		precision mediump int;

		attribute vec3 position;
		attribute vec2 uv;
		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function pM(){return`

		uniform int inputEncoding;
		uniform int outputEncoding;

		#include <encodings_pars_fragment>

		vec4 inputTexelToLinear( vec4 value ) {

			if ( inputEncoding == 0 ) {

				return value;

			} else if ( inputEncoding == 1 ) {

				return sRGBToLinear( value );

			} else if ( inputEncoding == 2 ) {

				return RGBEToLinear( value );

			} else if ( inputEncoding == 3 ) {

				return RGBMToLinear( value, 7.0 );

			} else if ( inputEncoding == 4 ) {

				return RGBMToLinear( value, 16.0 );

			} else if ( inputEncoding == 5 ) {

				return RGBDToLinear( value, 256.0 );

			} else {

				return GammaToLinear( value, 2.2 );

			}

		}

		vec4 linearToOutputTexel( vec4 value ) {

			if ( outputEncoding == 0 ) {

				return value;

			} else if ( outputEncoding == 1 ) {

				return LinearTosRGB( value );

			} else if ( outputEncoding == 2 ) {

				return LinearToRGBE( value );

			} else if ( outputEncoding == 3 ) {

				return LinearToRGBM( value, 7.0 );

			} else if ( outputEncoding == 4 ) {

				return LinearToRGBM( value, 16.0 );

			} else if ( outputEncoding == 5 ) {

				return LinearToRGBD( value, 256.0 );

			} else {

				return LinearToGamma( value, 2.2 );

			}

		}

		vec4 envMapTexelToLinear( vec4 color ) {

			return inputTexelToLinear( color );

		}
	`}function rj(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const l=a.mapping,u=l===s1||l===dA,c=l===Hm||l===Wm;if(u||c){if(e.has(a))return e.get(a).texture;{const f=a.image;if(u&&f&&f.height>0||c&&f&&i(f)){const h=t.getRenderTarget();n===null&&(n=new QY(t));const d=u?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,d),t.setRenderTarget(h),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function ij(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function sj(t,e,n,r){const i={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const p in h.attributes)e.remove(h.attributes[p]);h.removeEventListener("dispose",o),delete i[h.id];const d=s.get(h);d&&(e.remove(d),s.delete(h)),r.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(f,h){return i[h.id]===!0||(h.addEventListener("dispose",o),i[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const p in h)e.update(h[p],34962);const d=f.morphAttributes;for(const p in d){const g=d[p];for(let x=0,_=g.length;x<_;x++)e.update(g[x],34962)}}function u(f){const h=[],d=f.index,p=f.attributes.position;let g=0;if(d!==null){const m=d.array;g=d.version;for(let v=0,b=m.length;v<b;v+=3){const w=m[v+0],A=m[v+1],E=m[v+2];h.push(w,A,A,E,E,w)}}else{const m=p.array;g=p.version;for(let v=0,b=m.length/3-1;v<b;v+=3){const w=v+0,A=v+1,E=v+2;h.push(w,A,A,E,E,w)}}const x=new(xB(h)>65535?MB:CB)(h,1);x.version=g;const _=s.get(f);_&&e.remove(_),s.set(f,x)}function c(f){const h=s.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function oj(t,e,n,r){const i=r.isWebGL2;let s;function o(h){s=h}let a,l;function u(h){a=h.type,l=h.bytesPerElement}function c(h,d){t.drawElements(s,d,a,h*l),n.update(d,s,1)}function f(h,d,p){if(p===0)return;let g,x;if(i)g=t,x="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[x](s,d,a,h*l,p),n.update(d,s,p)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=f}function aj(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case 4:n.triangles+=a*(s/3);break;case 1:n.lines+=a*(s/2);break;case 3:n.lines+=a*(s-1);break;case 2:n.lines+=a*s;break;case 0:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}class gM extends Qr{constructor(e=null,n=1,r=1,i=1){super(null),this.image={data:e,width:n,height:r,depth:i},this.magFilter=mr,this.minFilter=mr,this.wrapR=xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}gM.prototype.isDataTexture2DArray=!0;function lj(t,e){return t[0]-e[0]}function uj(t,e){return Math.abs(e[1])-Math.abs(t[1])}function pP(t,e){let n=1;const r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),t.divideScalar(n)}function cj(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new q,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,f,h){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const p=c.morphAttributes.position.length;let g=s.get(c);if(g===void 0||g.count!==p){g!==void 0&&g.texture.dispose();const m=c.morphAttributes.normal!==void 0,v=c.morphAttributes.position,b=c.morphAttributes.normal||[],w=c.attributes.position.count,A=m===!0?2:1;let E=w*A,S=1;E>e.maxTextureSize&&(S=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const C=new Float32Array(E*S*4*p),M=new gM(C,E,S,p);M.format=ci,M.type=Ao;const D=A*4;for(let T=0;T<p;T++){const L=v[T],F=b[T],k=E*S*4*T;for(let I=0;I<L.count;I++){o.fromBufferAttribute(L,I),L.normalized===!0&&pP(o,L);const O=I*D;C[k+O+0]=o.x,C[k+O+1]=o.y,C[k+O+2]=o.z,C[k+O+3]=0,m===!0&&(o.fromBufferAttribute(F,I),F.normalized===!0&&pP(o,F),C[k+O+4]=o.x,C[k+O+5]=o.y,C[k+O+6]=o.z,C[k+O+7]=0)}}g={count:p,texture:M,size:new Ie(E,S)},s.set(c,g)}let x=0;for(let m=0;m<d.length;m++)x+=d[m];const _=c.morphTargetsRelative?1:1-x;h.getUniforms().setValue(t,"morphTargetBaseInfluence",_),h.getUniforms().setValue(t,"morphTargetInfluences",d),h.getUniforms().setValue(t,"morphTargetsTexture",g.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",g.size)}else{const p=d===void 0?0:d.length;let g=r[c.id];if(g===void 0||g.length!==p){g=[];for(let b=0;b<p;b++)g[b]=[b,0];r[c.id]=g}for(let b=0;b<p;b++){const w=g[b];w[0]=b,w[1]=d[b]}g.sort(uj);for(let b=0;b<8;b++)b<p&&g[b][1]?(a[b][0]=g[b][0],a[b][1]=g[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(lj);const x=c.morphAttributes.position,_=c.morphAttributes.normal;let m=0;for(let b=0;b<8;b++){const w=a[b],A=w[0],E=w[1];A!==Number.MAX_SAFE_INTEGER&&E?(x&&c.getAttribute("morphTarget"+b)!==x[A]&&c.setAttribute("morphTarget"+b,x[A]),_&&c.getAttribute("morphNormal"+b)!==_[A]&&c.setAttribute("morphNormal"+b,_[A]),i[b]=E,m+=E):(x&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),_&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),i[b]=0)}const v=c.morphTargetsRelative?1:1-m;h.getUniforms().setValue(t,"morphTargetBaseInfluence",v),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function fj(t,e,n,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,f=e.get(l,c);return i.get(f)!==u&&(e.update(f),i.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),f}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}class IB extends Qr{constructor(e=null,n=1,r=1,i=1){super(null),this.image={data:e,width:n,height:r,depth:i},this.magFilter=mr,this.minFilter=mr,this.wrapR=xi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}IB.prototype.isDataTexture3D=!0;const kB=new Qr,hj=new gM,dj=new IB,RB=new E_,gP=[],mP=[],vP=new Float32Array(16),yP=new Float32Array(9),_P=new Float32Array(4);function kd(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=gP[i];if(s===void 0&&(s=new Float32Array(i),gP[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function Yi(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ci(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function OB(t,e){let n=mP[e];n===void 0&&(n=new Int32Array(e),mP[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function pj(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function gj(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Yi(n,e))return;t.uniform2fv(this.addr,e),Ci(n,e)}}function mj(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Yi(n,e))return;t.uniform3fv(this.addr,e),Ci(n,e)}}function vj(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Yi(n,e))return;t.uniform4fv(this.addr,e),Ci(n,e)}}function yj(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Yi(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ci(n,e)}else{if(Yi(n,r))return;_P.set(r),t.uniformMatrix2fv(this.addr,!1,_P),Ci(n,r)}}function _j(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Yi(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ci(n,e)}else{if(Yi(n,r))return;yP.set(r),t.uniformMatrix3fv(this.addr,!1,yP),Ci(n,r)}}function wj(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Yi(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ci(n,e)}else{if(Yi(n,r))return;vP.set(r),t.uniformMatrix4fv(this.addr,!1,vP),Ci(n,r)}}function bj(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function xj(t,e){const n=this.cache;Yi(n,e)||(t.uniform2iv(this.addr,e),Ci(n,e))}function Sj(t,e){const n=this.cache;Yi(n,e)||(t.uniform3iv(this.addr,e),Ci(n,e))}function Aj(t,e){const n=this.cache;Yi(n,e)||(t.uniform4iv(this.addr,e),Ci(n,e))}function Ej(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Cj(t,e){const n=this.cache;Yi(n,e)||(t.uniform2uiv(this.addr,e),Ci(n,e))}function Mj(t,e){const n=this.cache;Yi(n,e)||(t.uniform3uiv(this.addr,e),Ci(n,e))}function Dj(t,e){const n=this.cache;Yi(n,e)||(t.uniform4uiv(this.addr,e),Ci(n,e))}function Tj(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||kB,i)}function Pj(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||dj,i)}function Lj(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||RB,i)}function Fj(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||hj,i)}function Ij(t){switch(t){case 5126:return pj;case 35664:return gj;case 35665:return mj;case 35666:return vj;case 35674:return yj;case 35675:return _j;case 35676:return wj;case 5124:case 35670:return bj;case 35667:case 35671:return xj;case 35668:case 35672:return Sj;case 35669:case 35673:return Aj;case 5125:return Ej;case 36294:return Cj;case 36295:return Mj;case 36296:return Dj;case 35678:case 36198:case 36298:case 36306:case 35682:return Tj;case 35679:case 36299:case 36307:return Pj;case 35680:case 36300:case 36308:case 36293:return Lj;case 36289:case 36303:case 36311:case 36292:return Fj}}function kj(t,e){t.uniform1fv(this.addr,e)}function Rj(t,e){const n=kd(e,this.size,2);t.uniform2fv(this.addr,n)}function Oj(t,e){const n=kd(e,this.size,3);t.uniform3fv(this.addr,n)}function Bj(t,e){const n=kd(e,this.size,4);t.uniform4fv(this.addr,n)}function Nj(t,e){const n=kd(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Vj(t,e){const n=kd(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function zj(t,e){const n=kd(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Gj(t,e){t.uniform1iv(this.addr,e)}function Uj(t,e){t.uniform2iv(this.addr,e)}function Hj(t,e){t.uniform3iv(this.addr,e)}function Wj(t,e){t.uniform4iv(this.addr,e)}function $j(t,e){t.uniform1uiv(this.addr,e)}function Xj(t,e){t.uniform2uiv(this.addr,e)}function Yj(t,e){t.uniform3uiv(this.addr,e)}function jj(t,e){t.uniform4uiv(this.addr,e)}function qj(t,e,n){const r=e.length,i=OB(n,r);t.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.safeSetTexture2D(e[s]||kB,i[s])}function Jj(t,e,n){const r=e.length,i=OB(n,r);t.uniform1iv(this.addr,i);for(let s=0;s!==r;++s)n.safeSetTextureCube(e[s]||RB,i[s])}function Kj(t){switch(t){case 5126:return kj;case 35664:return Rj;case 35665:return Oj;case 35666:return Bj;case 35674:return Nj;case 35675:return Vj;case 35676:return zj;case 5124:case 35670:return Gj;case 35667:case 35671:return Uj;case 35668:case 35672:return Hj;case 35669:case 35673:return Wj;case 5125:return $j;case 36294:return Xj;case 36295:return Yj;case 36296:return jj;case 35678:case 36198:case 36298:case 36306:case 35682:return qj;case 35680:case 36300:case 36308:case 36293:return Jj}}function Zj(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Ij(e.type)}function BB(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=Kj(e.type)}BB.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Ci(e,t)};function NB(t){this.id=t,this.seq=[],this.map={}}NB.prototype.setValue=function(t,e,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const o=r[i];o.setValue(t,e[o.id],n)}};const xb=/(\w+)(\])?(\[|\.)?/g;function wP(t,e){t.seq.push(e),t.map[e.id]=e}function Qj(t,e,n){const r=t.name,i=r.length;for(xb.lastIndex=0;;){const s=xb.exec(r),o=xb.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){wP(n,u===void 0?new Zj(a,t,e):new BB(a,t,e));break}else{let f=n.map[a];f===void 0&&(f=new NB(a),wP(n,f)),n=f}}}function Cu(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let r=0;r<n;++r){const i=t.getActiveUniform(e,r),s=t.getUniformLocation(e,i.name);Qj(i,s,this)}}Cu.prototype.setValue=function(t,e,n,r){const i=this.map[e];i!==void 0&&i.setValue(t,n,r)};Cu.prototype.setOptional=function(t,e,n){const r=e[n];r!==void 0&&this.setValue(t,n,r)};Cu.upload=function(t,e,n,r){for(let i=0,s=e.length;i!==s;++i){const o=e[i],a=n[o.id];a.needsUpdate!==!1&&o.setValue(t,a.value,r)}};Cu.seqWithValue=function(t,e){const n=[];for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.id in e&&n.push(s)}return n};function bP(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let eq=0;function tq(t){const e=t.split(`
`);for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join(`
`)}function VB(t){switch(t){case Zr:return["Linear","( value )"];case Br:return["sRGB","( value )"];case S_:return["RGBE","( value )"];case mB:return["RGBM","( value, 7.0 )"];case vB:return["RGBM","( value, 16.0 )"];case yB:return["RGBD","( value, 256.0 )"];case lM:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case N7:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function xP(t,e,n){const r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&i===""?"":n.toUpperCase()+`

`+i+`

`+tq(t.getShaderSource(e))}function wc(t,e){const n=VB(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function nq(t,e){const n=VB(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function rq(t,e){let n;switch(e){case V9:n="Linear";break;case z9:n="Reinhard";break;case G9:n="OptimizedCineon";break;case fB:n="ACESFilmic";break;case U9:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function iq(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(qp).join(`
`)}function sq(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function oq(t,e){const n={},r=t.getProgramParameter(e,35721);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===35674&&(a=2),s.type===35675&&(a=3),s.type===35676&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function qp(t){return t!==""}function SP(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function AP(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const aq=/^[ \t]*#include +<([\w\d./]+)>/gm;function vA(t){return t.replace(aq,lq)}function lq(t,e){const n=Bt[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return vA(n)}const uq=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,cq=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function EP(t){return t.replace(cq,zB).replace(uq,fq)}function fq(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),zB(t,e,n,r)}function zB(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function CP(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function hq(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===oB?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===aB?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===jp&&(e="SHADOWMAP_TYPE_VSM"),e}function dq(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Hm:case Wm:e="ENVMAP_TYPE_CUBE";break;case x_:case oM:e="ENVMAP_TYPE_CUBE_UV";break}return e}function pq(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Wm:case oM:e="ENVMAP_MODE_REFRACTION";break}return e}function gq(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case b_:e="ENVMAP_BLENDING_MULTIPLY";break;case B9:e="ENVMAP_BLENDING_MIX";break;case N9:e="ENVMAP_BLENDING_ADD";break}return e}function mq(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=hq(n),u=dq(n),c=pq(n),f=gq(n),h=t.gammaFactor>0?t.gammaFactor:1,d=n.isWebGL2?"":iq(n),p=sq(s),g=i.createProgram();let x,_,m=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=[p].filter(qp).join(`
`),x.length>0&&(x+=`
`),_=[d,p].filter(qp).join(`
`),_.length>0&&(_+=`
`)):(x=[CP(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(qp).join(`
`),_=[d,CP(n),"#define SHADER_NAME "+n.shaderName,p,"#define GAMMA_FACTOR "+h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==qc?"#define TONE_MAPPING":"",n.toneMapping!==qc?Bt.tonemapping_pars_fragment:"",n.toneMapping!==qc?rq("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===_a?"#define OPAQUE":"",Bt.encodings_pars_fragment,n.map?wc("mapTexelToLinear",n.mapEncoding):"",n.matcap?wc("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?wc("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?wc("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?wc("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?wc("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?wc("lightMapTexelToLinear",n.lightMapEncoding):"",nq("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(qp).join(`
`)),o=vA(o),o=SP(o,n),o=AP(o,n),a=vA(a),a=SP(a,n),a=AP(a,n),o=EP(o),a=EP(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(m=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,_=["#define varying in",n.glslVersion===qT?"":"out highp vec4 pc_fragColor;",n.glslVersion===qT?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+_);const v=m+x+o,b=m+_+a,w=bP(i,35633,v),A=bP(i,35632,b);if(i.attachShader(g,w),i.attachShader(g,A),n.index0AttributeName!==void 0?i.bindAttribLocation(g,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),t.debug.checkShaderErrors){const C=i.getProgramInfoLog(g).trim(),M=i.getShaderInfoLog(w).trim(),D=i.getShaderInfoLog(A).trim();let T=!0,L=!0;if(i.getProgramParameter(g,35714)===!1){T=!1;const F=xP(i,w,"vertex"),k=xP(i,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,35715)+`

Program Info Log: `+C+`
`+F+`
`+k)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(M===""||D==="")&&(L=!1);L&&(this.diagnostics={runnable:T,programLog:C,vertexShader:{log:M,prefix:x},fragmentShader:{log:D,prefix:_}})}i.deleteShader(w),i.deleteShader(A);let E;this.getUniforms=function(){return E===void 0&&(E=new Cu(i,g)),E};let S;return this.getAttributes=function(){return S===void 0&&(S=oq(i,g)),S},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=eq++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=A,this}function vq(t,e,n,r,i,s,o){const a=[],l=i.isWebGL2,u=i.logarithmicDepthBuffer,c=i.floatVertexTextures,f=i.maxVertexUniforms,h=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap",,"roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","specularIntensityMap","specularColorMap","specularColorMapEncoding","transmission","transmissionMap","thicknessMap","sheen","sheenColorMap","sheenColorMapEncoding","sheenRoughnessMap"];function x(E){const C=E.skeleton.bones;if(c)return 1024;{const D=Math.floor((f-20)/4),T=Math.min(D,C.length);return T<C.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+C.length+" bones. This GPU supports "+T+"."),0):T}}function _(E){let S;return E&&E.isTexture?S=E.encoding:E&&E.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),S=E.texture.encoding):S=Zr,l&&E&&E.isTexture&&E.format===ci&&E.type===Hs&&E.encoding===Br&&(S=Zr),S}function m(E,S,C,M,D){const T=M.fog,L=E.isMeshStandardMaterial?M.environment:null,F=(E.isMeshStandardMaterial?n:e).get(E.envMap||L),k=p[E.type],I=D.isSkinnedMesh?x(D):0;E.precision!==null&&(d=i.getMaxPrecision(E.precision),d!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",d,"instead."));let O,$;if(k){const ee=ra[k];O=ee.vertexShader,$=ee.fragmentShader}else O=E.vertexShader,$=E.fragmentShader;const N=t.getRenderTarget(),W=E.alphaTest>0,H=E.clearcoat>0;return{isWebGL2:l,shaderID:k,shaderName:E.type,vertexShader:O,fragmentShader:$,defines:E.defines,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:d,instancing:D.isInstancedMesh===!0,instancingColor:D.isInstancedMesh===!0&&D.instanceColor!==null,supportsVertexTextures:h,outputEncoding:N!==null?_(N.texture):t.outputEncoding,map:!!E.map,mapEncoding:_(E.map),matcap:!!E.matcap,matcapEncoding:_(E.matcap),envMap:!!F,envMapMode:F&&F.mapping,envMapEncoding:_(F),envMapCubeUV:!!F&&(F.mapping===x_||F.mapping===oM),lightMap:!!E.lightMap,lightMapEncoding:_(E.lightMap),aoMap:!!E.aoMap,emissiveMap:!!E.emissiveMap,emissiveMapEncoding:_(E.emissiveMap),bumpMap:!!E.bumpMap,normalMap:!!E.normalMap,objectSpaceNormalMap:E.normalMapType===z7,tangentSpaceNormalMap:E.normalMapType===Fd,clearcoat:H,clearcoatMap:H&&!!E.clearcoatMap,clearcoatRoughnessMap:H&&!!E.clearcoatRoughnessMap,clearcoatNormalMap:H&&!!E.clearcoatNormalMap,displacementMap:!!E.displacementMap,roughnessMap:!!E.roughnessMap,metalnessMap:!!E.metalnessMap,specularMap:!!E.specularMap,specularIntensityMap:!!E.specularIntensityMap,specularColorMap:!!E.specularColorMap,specularColorMapEncoding:_(E.specularColorMap),alphaMap:!!E.alphaMap,alphaTest:W,gradientMap:!!E.gradientMap,sheen:E.sheen>0,sheenColorMap:!!E.sheenColorMap,sheenColorMapEncoding:_(E.sheenColorMap),sheenRoughnessMap:!!E.sheenRoughnessMap,transmission:E.transmission>0,transmissionMap:!!E.transmissionMap,thicknessMap:!!E.thicknessMap,combine:E.combine,vertexTangents:!!E.normalMap&&!!D.geometry&&!!D.geometry.attributes.tangent,vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!D.geometry&&!!D.geometry.attributes.color&&D.geometry.attributes.color.itemSize===4,vertexUvs:!!E.map||!!E.bumpMap||!!E.normalMap||!!E.specularMap||!!E.alphaMap||!!E.emissiveMap||!!E.roughnessMap||!!E.metalnessMap||!!E.clearcoatMap||!!E.clearcoatRoughnessMap||!!E.clearcoatNormalMap||!!E.displacementMap||!!E.transmissionMap||!!E.thicknessMap||!!E.specularIntensityMap||!!E.specularColorMap||!!E.sheenColorMap||E.sheenRoughnessMap,uvsVertexOnly:!(!!E.map||!!E.bumpMap||!!E.normalMap||!!E.specularMap||!!E.alphaMap||!!E.emissiveMap||!!E.roughnessMap||!!E.metalnessMap||!!E.clearcoatNormalMap||E.transmission>0||!!E.transmissionMap||!!E.thicknessMap||!!E.specularIntensityMap||!!E.specularColorMap||!!E.sheen>0||!!E.sheenColorMap||!!E.sheenRoughnessMap)&&!!E.displacementMap,fog:!!T,useFog:E.fog,fogExp2:T&&T.isFogExp2,flatShading:!!E.flatShading,sizeAttenuation:E.sizeAttenuation,logarithmicDepthBuffer:u,skinning:D.isSkinnedMesh===!0&&I>0,maxBones:I,useVertexTexture:c,morphTargets:!!D.geometry&&!!D.geometry.morphAttributes.position,morphNormals:!!D.geometry&&!!D.geometry.morphAttributes.normal,morphTargetsCount:!!D.geometry&&!!D.geometry.morphAttributes.position?D.geometry.morphAttributes.position.length:0,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:E.format,dithering:E.dithering,shadowMapEnabled:t.shadowMap.enabled&&C.length>0,shadowMapType:t.shadowMap.type,toneMapping:E.toneMapped?t.toneMapping:qc,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===_r,flipSided:E.side===rr,depthPacking:E.depthPacking!==void 0?E.depthPacking:!1,index0AttributeName:E.index0AttributeName,extensionDerivatives:E.extensions&&E.extensions.derivatives,extensionFragDepth:E.extensions&&E.extensions.fragDepth,extensionDrawBuffers:E.extensions&&E.extensions.drawBuffers,extensionShaderTextureLOD:E.extensions&&E.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}}function v(E){const S=[];if(E.shaderID?S.push(E.shaderID):(S.push(JT(E.fragmentShader)),S.push(JT(E.vertexShader))),E.defines!==void 0)for(const C in E.defines)S.push(C),S.push(E.defines[C]);if(E.isRawShaderMaterial===!1){for(let C=0;C<g.length;C++)S.push(E[g[C]]);S.push(t.outputEncoding),S.push(t.gammaFactor)}return S.push(E.customProgramCacheKey),S.join()}function b(E){const S=p[E.type];let C;if(S){const M=ra[S];C=DB.clone(M.uniforms)}else C=E.uniforms;return C}function w(E,S){let C;for(let M=0,D=a.length;M<D;M++){const T=a[M];if(T.cacheKey===S){C=T,++C.usedTimes;break}}return C===void 0&&(C=new mq(t,S,E,s),a.push(C)),C}function A(E){if(--E.usedTimes===0){const S=a.indexOf(E);a[S]=a[a.length-1],a.pop(),E.destroy()}}return{getParameters:m,getProgramCacheKey:v,getUniforms:b,acquireProgram:w,releaseProgram:A,programs:a}}function yq(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function _q(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function MP(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function DP(t){const e=[];let n=0;const r=[],i=[],s=[],o={id:-1};function a(){n=0,r.length=0,i.length=0,s.length=0}function l(d,p,g,x,_,m){let v=e[n];const b=t.get(g);return v===void 0?(v={id:d.id,object:d,geometry:p,material:g,program:b.program||o,groupOrder:x,renderOrder:d.renderOrder,z:_,group:m},e[n]=v):(v.id=d.id,v.object=d,v.geometry=p,v.material=g,v.program=b.program||o,v.groupOrder=x,v.renderOrder=d.renderOrder,v.z=_,v.group=m),n++,v}function u(d,p,g,x,_,m){const v=l(d,p,g,x,_,m);g.transmission>0?i.push(v):g.transparent===!0?s.push(v):r.push(v)}function c(d,p,g,x,_,m){const v=l(d,p,g,x,_,m);g.transmission>0?i.unshift(v):g.transparent===!0?s.unshift(v):r.unshift(v)}function f(d,p){r.length>1&&r.sort(d||_q),i.length>1&&i.sort(p||MP),s.length>1&&s.sort(p||MP)}function h(){for(let d=n,p=e.length;d<p;d++){const g=e[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.program=null,g.group=null}}return{opaque:r,transmissive:i,transparent:s,init:a,push:u,unshift:c,finish:h,sort:f}}function wq(t){let e=new WeakMap;function n(i,s){let o;return e.has(i)===!1?(o=new DP(t),e.set(i,[o])):s>=e.get(i).length?(o=new DP(t),e.get(i).push(o)):o=e.get(i)[s],o}function r(){e=new WeakMap}return{get:n,dispose:r}}function bq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new q,color:new ut};break;case"SpotLight":n={position:new q,direction:new q,color:new ut,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new q,color:new ut,distance:0,decay:0};break;case"HemisphereLight":n={direction:new q,skyColor:new ut,groundColor:new ut};break;case"RectAreaLight":n={color:new ut,position:new q,halfWidth:new q,halfHeight:new q};break}return t[e.id]=n,n}}}function xq(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Sq=0;function Aq(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Eq(t,e){const n=new bq,r=xq(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)i.probe.push(new q);const s=new q,o=new st,a=new st;function l(c,f){let h=0,d=0,p=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let g=0,x=0,_=0,m=0,v=0,b=0,w=0,A=0;c.sort(Aq);const E=f!==!0?Math.PI:1;for(let C=0,M=c.length;C<M;C++){const D=c[C],T=D.color,L=D.intensity,F=D.distance,k=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)h+=T.r*L*E,d+=T.g*L*E,p+=T.b*L*E;else if(D.isLightProbe)for(let I=0;I<9;I++)i.probe[I].addScaledVector(D.sh.coefficients[I],L);else if(D.isDirectionalLight){const I=n.get(D);if(I.color.copy(D.color).multiplyScalar(D.intensity*E),D.castShadow){const O=D.shadow,$=r.get(D);$.shadowBias=O.bias,$.shadowNormalBias=O.normalBias,$.shadowRadius=O.radius,$.shadowMapSize=O.mapSize,i.directionalShadow[g]=$,i.directionalShadowMap[g]=k,i.directionalShadowMatrix[g]=D.shadow.matrix,b++}i.directional[g]=I,g++}else if(D.isSpotLight){const I=n.get(D);if(I.position.setFromMatrixPosition(D.matrixWorld),I.color.copy(T).multiplyScalar(L*E),I.distance=F,I.coneCos=Math.cos(D.angle),I.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),I.decay=D.decay,D.castShadow){const O=D.shadow,$=r.get(D);$.shadowBias=O.bias,$.shadowNormalBias=O.normalBias,$.shadowRadius=O.radius,$.shadowMapSize=O.mapSize,i.spotShadow[_]=$,i.spotShadowMap[_]=k,i.spotShadowMatrix[_]=D.shadow.matrix,A++}i.spot[_]=I,_++}else if(D.isRectAreaLight){const I=n.get(D);I.color.copy(T).multiplyScalar(L),I.halfWidth.set(D.width*.5,0,0),I.halfHeight.set(0,D.height*.5,0),i.rectArea[m]=I,m++}else if(D.isPointLight){const I=n.get(D);if(I.color.copy(D.color).multiplyScalar(D.intensity*E),I.distance=D.distance,I.decay=D.decay,D.castShadow){const O=D.shadow,$=r.get(D);$.shadowBias=O.bias,$.shadowNormalBias=O.normalBias,$.shadowRadius=O.radius,$.shadowMapSize=O.mapSize,$.shadowCameraNear=O.camera.near,$.shadowCameraFar=O.camera.far,i.pointShadow[x]=$,i.pointShadowMap[x]=k,i.pointShadowMatrix[x]=D.shadow.matrix,w++}i.point[x]=I,x++}else if(D.isHemisphereLight){const I=n.get(D);I.skyColor.copy(D.color).multiplyScalar(L*E),I.groundColor.copy(D.groundColor).multiplyScalar(L*E),i.hemi[v]=I,v++}}m>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Qe.LTC_FLOAT_1,i.rectAreaLTC2=Qe.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Qe.LTC_HALF_1,i.rectAreaLTC2=Qe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=h,i.ambient[1]=d,i.ambient[2]=p;const S=i.hash;(S.directionalLength!==g||S.pointLength!==x||S.spotLength!==_||S.rectAreaLength!==m||S.hemiLength!==v||S.numDirectionalShadows!==b||S.numPointShadows!==w||S.numSpotShadows!==A)&&(i.directional.length=g,i.spot.length=_,i.rectArea.length=m,i.point.length=x,i.hemi.length=v,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=A,i.spotShadowMap.length=A,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=w,i.spotShadowMatrix.length=A,S.directionalLength=g,S.pointLength=x,S.spotLength=_,S.rectAreaLength=m,S.hemiLength=v,S.numDirectionalShadows=b,S.numPointShadows=w,S.numSpotShadows=A,i.version=Sq++)}function u(c,f){let h=0,d=0,p=0,g=0,x=0;const _=f.matrixWorldInverse;for(let m=0,v=c.length;m<v;m++){const b=c[m];if(b.isDirectionalLight){const w=i.directional[h];w.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(_),h++}else if(b.isSpotLight){const w=i.spot[p];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(_),w.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),w.direction.sub(s),w.direction.transformDirection(_),p++}else if(b.isRectAreaLight){const w=i.rectArea[g];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(_),a.identity(),o.copy(b.matrixWorld),o.premultiply(_),a.extractRotation(o),w.halfWidth.set(b.width*.5,0,0),w.halfHeight.set(0,b.height*.5,0),w.halfWidth.applyMatrix4(a),w.halfHeight.applyMatrix4(a),g++}else if(b.isPointLight){const w=i.point[d];w.position.setFromMatrixPosition(b.matrixWorld),w.position.applyMatrix4(_),d++}else if(b.isHemisphereLight){const w=i.hemi[x];w.direction.setFromMatrixPosition(b.matrixWorld),w.direction.transformDirection(_),w.direction.normalize(),x++}}}return{setup:l,setupView:u,state:i}}function TP(t,e){const n=new Eq(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(f){r.push(f)}function a(f){i.push(f)}function l(f){n.setup(r,f)}function u(f){n.setupView(r,f)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function Cq(t,e){let n=new WeakMap;function r(s,o=0){let a;return n.has(s)===!1?(a=new TP(t,e),n.set(s,[a])):o>=n.get(s).length?(a=new TP(t,e),n.get(s).push(a)):a=n.get(s)[o],a}function i(){n=new WeakMap}return{get:r,dispose:i}}class mM extends Pi{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=V7,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}mM.prototype.isMeshDepthMaterial=!0;class vM extends Pi{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}vM.prototype.isMeshDistanceMaterial=!0;const Mq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Dq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function GB(t,e,n){let r=new C_;const i=new Ie,s=new Ie,o=new $t,a=new mM({depthPacking:_B}),l=new vM,u={},c=n.maxTextureSize,f={0:rr,1:Ou,2:_r},h=new rf({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:Mq,fragmentShader:Dq}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const p=new Gt;p.setAttribute("position",new Rn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new Fe(p,h),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=oB,this.render=function(b,w,A){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||b.length===0)return;const E=t.getRenderTarget(),S=t.getActiveCubeFace(),C=t.getActiveMipmapLevel(),M=t.state;M.setBlending(Au),M.buffers.color.setClear(1,1,1,1),M.buffers.depth.setTest(!0),M.setScissorTest(!1);for(let D=0,T=b.length;D<T;D++){const L=b[D],F=L.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",L,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;i.copy(F.mapSize);const k=F.getFrameExtents();if(i.multiply(k),s.copy(F.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/k.x),i.x=s.x*k.x,F.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/k.y),i.y=s.y*k.y,F.mapSize.y=s.y)),F.map===null&&!F.isPointLightShadow&&this.type===jp){const O={minFilter:kn,magFilter:kn,format:ci};F.map=new wa(i.x,i.y,O),F.map.texture.name=L.name+".shadowMap",F.mapPass=new wa(i.x,i.y,O),F.camera.updateProjectionMatrix()}if(F.map===null){const O={minFilter:mr,magFilter:mr,format:ci};F.map=new wa(i.x,i.y,O),F.map.texture.name=L.name+".shadowMap",F.camera.updateProjectionMatrix()}t.setRenderTarget(F.map),t.clear();const I=F.getViewportCount();for(let O=0;O<I;O++){const $=F.getViewport(O);o.set(s.x*$.x,s.y*$.y,s.x*$.z,s.y*$.w),M.viewport(o),F.updateMatrices(L,O),r=F.getFrustum(),v(w,A,F.camera,L,this.type)}!F.isPointLightShadow&&this.type===jp&&_(F,A),F.needsUpdate=!1}x.needsUpdate=!1,t.setRenderTarget(E,S,C)};function _(b,w){const A=e.update(g);h.defines.VSM_SAMPLES!==b.blurSamples&&(h.defines.VSM_SAMPLES=b.blurSamples,d.defines.VSM_SAMPLES=b.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),h.uniforms.shadow_pass.value=b.map.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,t.setRenderTarget(b.mapPass),t.clear(),t.renderBufferDirect(w,null,A,h,g,null),d.uniforms.shadow_pass.value=b.mapPass.texture,d.uniforms.resolution.value=b.mapSize,d.uniforms.radius.value=b.radius,t.setRenderTarget(b.map),t.clear(),t.renderBufferDirect(w,null,A,d,g,null)}function m(b,w,A,E,S,C,M){let D=null;const T=E.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(T!==void 0?D=T:D=E.isPointLight===!0?l:a,t.localClippingEnabled&&A.clipShadows===!0&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0){const L=D.uuid,F=A.uuid;let k=u[L];k===void 0&&(k={},u[L]=k);let I=k[F];I===void 0&&(I=D.clone(),k[F]=I),D=I}return D.visible=A.visible,D.wireframe=A.wireframe,M===jp?D.side=A.shadowSide!==null?A.shadowSide:A.side:D.side=A.shadowSide!==null?A.shadowSide:f[A.side],D.alphaMap=A.alphaMap,D.alphaTest=A.alphaTest,D.clipShadows=A.clipShadows,D.clippingPlanes=A.clippingPlanes,D.clipIntersection=A.clipIntersection,D.displacementMap=A.displacementMap,D.displacementScale=A.displacementScale,D.displacementBias=A.displacementBias,D.wireframeLinewidth=A.wireframeLinewidth,D.linewidth=A.linewidth,E.isPointLight===!0&&D.isMeshDistanceMaterial===!0&&(D.referencePosition.setFromMatrixPosition(E.matrixWorld),D.nearDistance=S,D.farDistance=C),D}function v(b,w,A,E,S){if(b.visible===!1)return;if(b.layers.test(w.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&S===jp)&&(!b.frustumCulled||r.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,b.matrixWorld);const D=e.update(b),T=b.material;if(Array.isArray(T)){const L=D.groups;for(let F=0,k=L.length;F<k;F++){const I=L[F],O=T[I.materialIndex];if(O&&O.visible){const $=m(b,D,O,E,A.near,A.far,S);t.renderBufferDirect(A,null,D,$,b,I)}}}else if(T.visible){const L=m(b,D,T,E,A.near,A.far,S);t.renderBufferDirect(A,null,D,L,b,null)}}const M=b.children;for(let D=0,T=M.length;D<T;D++)v(M[D],w,A,E,S)}}function Tq(t,e,n){const r=n.isWebGL2;function i(){let ne=!1;const de=new $t;let pe=null;const _e=new $t(0,0,0,0);return{setMask:function(be){pe!==be&&!ne&&(t.colorMask(be,be,be,be),pe=be)},setLocked:function(be){ne=be},setClear:function(be,Me,Ve,Pe,je){je===!0&&(be*=Pe,Me*=Pe,Ve*=Pe),de.set(be,Me,Ve,Pe),_e.equals(de)===!1&&(t.clearColor(be,Me,Ve,Pe),_e.copy(de))},reset:function(){ne=!1,pe=null,_e.set(-1,0,0,0)}}}function s(){let ne=!1,de=null,pe=null,_e=null;return{setTest:function(be){be?Z(2929):J(2929)},setMask:function(be){de!==be&&!ne&&(t.depthMask(be),de=be)},setFunc:function(be){if(pe!==be){if(be)switch(be){case P9:t.depthFunc(512);break;case L9:t.depthFunc(519);break;case F9:t.depthFunc(513);break;case hA:t.depthFunc(515);break;case I9:t.depthFunc(514);break;case k9:t.depthFunc(518);break;case R9:t.depthFunc(516);break;case O9:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);pe=be}},setLocked:function(be){ne=be},setClear:function(be){_e!==be&&(t.clearDepth(be),_e=be)},reset:function(){ne=!1,de=null,pe=null,_e=null}}}function o(){let ne=!1,de=null,pe=null,_e=null,be=null,Me=null,Ve=null,Pe=null,je=null;return{setTest:function(Ze){ne||(Ze?Z(2960):J(2960))},setMask:function(Ze){de!==Ze&&!ne&&(t.stencilMask(Ze),de=Ze)},setFunc:function(Ze,ft,gt){(pe!==Ze||_e!==ft||be!==gt)&&(t.stencilFunc(Ze,ft,gt),pe=Ze,_e=ft,be=gt)},setOp:function(Ze,ft,gt){(Me!==Ze||Ve!==ft||Pe!==gt)&&(t.stencilOp(Ze,ft,gt),Me=Ze,Ve=ft,Pe=gt)},setLocked:function(Ze){ne=Ze},setClear:function(Ze){je!==Ze&&(t.clearStencil(Ze),je=Ze)},reset:function(){ne=!1,de=null,pe=null,_e=null,be=null,Me=null,Ve=null,Pe=null,je=null}}}const a=new i,l=new s,u=new o;let c={},f=null,h={},d=null,p=!1,g=null,x=null,_=null,m=null,v=null,b=null,w=null,A=!1,E=null,S=null,C=null,M=null,D=null;const T=t.getParameter(35661);let L=!1,F=0;const k=t.getParameter(7938);k.indexOf("WebGL")!==-1?(F=parseFloat(/^WebGL (\d)/.exec(k)[1]),L=F>=1):k.indexOf("OpenGL ES")!==-1&&(F=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),L=F>=2);let I=null,O={};const $=t.getParameter(3088),N=t.getParameter(2978),W=new $t().fromArray($),H=new $t().fromArray(N);function K(ne,de,pe){const _e=new Uint8Array(4),be=t.createTexture();t.bindTexture(ne,be),t.texParameteri(ne,10241,9728),t.texParameteri(ne,10240,9728);for(let Me=0;Me<pe;Me++)t.texImage2D(de+Me,0,6408,1,1,0,6408,5121,_e);return be}const ee={};ee[3553]=K(3553,3553,1),ee[34067]=K(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Z(2929),l.setFunc(hA),R(!1),B(IT),Z(2884),ye(Au);function Z(ne){c[ne]!==!0&&(t.enable(ne),c[ne]=!0)}function J(ne){c[ne]!==!1&&(t.disable(ne),c[ne]=!1)}function X(ne){ne!==f&&(t.bindFramebuffer(36160,ne),f=ne)}function Q(ne,de){return de===null&&f!==null&&(de=f),h[ne]!==de?(t.bindFramebuffer(ne,de),h[ne]=de,r&&(ne===36009&&(h[36160]=de),ne===36160&&(h[36009]=de)),!0):!1}function oe(ne){return d!==ne?(t.useProgram(ne),d=ne,!0):!1}const he={[gh]:32774,[_9]:32778,[w9]:32779};if(r)he[BT]=32775,he[NT]=32776;else{const ne=e.get("EXT_blend_minmax");ne!==null&&(he[BT]=ne.MIN_EXT,he[NT]=ne.MAX_EXT)}const ve={[b9]:0,[x9]:1,[S9]:768,[uB]:770,[T9]:776,[M9]:774,[E9]:772,[A9]:769,[cB]:771,[D9]:775,[C9]:773};function ye(ne,de,pe,_e,be,Me,Ve,Pe){if(ne===Au){p===!0&&(J(3042),p=!1);return}if(p===!1&&(Z(3042),p=!0),ne!==y9){if(ne!==g||Pe!==A){if((x!==gh||v!==gh)&&(t.blendEquation(32774),x=gh,v=gh),Pe)switch(ne){case dg:t.blendFuncSeparate(1,771,1,771);break;case kT:t.blendFunc(1,1);break;case RT:t.blendFuncSeparate(0,0,769,771);break;case OT:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}else switch(ne){case dg:t.blendFuncSeparate(770,771,1,771);break;case kT:t.blendFunc(770,1);break;case RT:t.blendFunc(0,769);break;case OT:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ne);break}_=null,m=null,b=null,w=null,g=ne,A=Pe}return}be=be||de,Me=Me||pe,Ve=Ve||_e,(de!==x||be!==v)&&(t.blendEquationSeparate(he[de],he[be]),x=de,v=be),(pe!==_||_e!==m||Me!==b||Ve!==w)&&(t.blendFuncSeparate(ve[pe],ve[_e],ve[Me],ve[Ve]),_=pe,m=_e,b=Me,w=Ve),g=ne,A=null}function V(ne,de){ne.side===_r?J(2884):Z(2884);let pe=ne.side===rr;de&&(pe=!pe),R(pe),ne.blending===dg&&ne.transparent===!1?ye(Au):ye(ne.blending,ne.blendEquation,ne.blendSrc,ne.blendDst,ne.blendEquationAlpha,ne.blendSrcAlpha,ne.blendDstAlpha,ne.premultipliedAlpha),l.setFunc(ne.depthFunc),l.setTest(ne.depthTest),l.setMask(ne.depthWrite),a.setMask(ne.colorWrite);const _e=ne.stencilWrite;u.setTest(_e),_e&&(u.setMask(ne.stencilWriteMask),u.setFunc(ne.stencilFunc,ne.stencilRef,ne.stencilFuncMask),u.setOp(ne.stencilFail,ne.stencilZFail,ne.stencilZPass)),se(ne.polygonOffset,ne.polygonOffsetFactor,ne.polygonOffsetUnits),ne.alphaToCoverage===!0?Z(32926):J(32926)}function R(ne){E!==ne&&(ne?t.frontFace(2304):t.frontFace(2305),E=ne)}function B(ne){ne!==m9?(Z(2884),ne!==S&&(ne===IT?t.cullFace(1029):ne===v9?t.cullFace(1028):t.cullFace(1032))):J(2884),S=ne}function j(ne){ne!==C&&(L&&t.lineWidth(ne),C=ne)}function se(ne,de,pe){ne?(Z(32823),(M!==de||D!==pe)&&(t.polygonOffset(de,pe),M=de,D=pe)):J(32823)}function Y(ne){ne?Z(3089):J(3089)}function G(ne){ne===void 0&&(ne=33984+T-1),I!==ne&&(t.activeTexture(ne),I=ne)}function le(ne,de){I===null&&G();let pe=O[I];pe===void 0&&(pe={type:void 0,texture:void 0},O[I]=pe),(pe.type!==ne||pe.texture!==de)&&(t.bindTexture(ne,de||ee[ne]),pe.type=ne,pe.texture=de)}function ge(){const ne=O[I];ne!==void 0&&ne.type!==void 0&&(t.bindTexture(ne.type,null),ne.type=void 0,ne.texture=void 0)}function ae(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function ue(){try{t.texImage2D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function U(){try{t.texImage3D.apply(t,arguments)}catch(ne){console.error("THREE.WebGLState:",ne)}}function z(ne){W.equals(ne)===!1&&(t.scissor(ne.x,ne.y,ne.z,ne.w),W.copy(ne))}function te(ne){H.equals(ne)===!1&&(t.viewport(ne.x,ne.y,ne.z,ne.w),H.copy(ne))}function fe(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),r===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},I=null,O={},f=null,h={},d=null,p=!1,g=null,x=null,_=null,m=null,v=null,b=null,w=null,A=!1,E=null,S=null,C=null,M=null,D=null,W.set(0,0,t.canvas.width,t.canvas.height),H.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Z,disable:J,bindFramebuffer:Q,bindXRFramebuffer:X,useProgram:oe,setBlending:ye,setMaterial:V,setFlipSided:R,setCullFace:B,setLineWidth:j,setPolygonOffset:se,setScissorTest:Y,activeTexture:G,bindTexture:le,unbindTexture:ge,compressedTexImage2D:ae,texImage2D:ue,texImage3D:U,scissor:z,viewport:te,reset:fe}}function Pq(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,f=i.maxSamples,h=new WeakMap;let d,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function g(Y,G){return p?new OffscreenCanvas(Y,G):A_("canvas")}function x(Y,G,le,ge){let ae=1;if((Y.width>ge||Y.height>ge)&&(ae=ge/Math.max(Y.width,Y.height)),ae<1||G===!0)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap){const ue=G?wB:Math.floor,U=ue(ae*Y.width),z=ue(ae*Y.height);d===void 0&&(d=g(U,z));const te=le?g(U,z):d;return te.width=U,te.height=z,te.getContext("2d").drawImage(Y,0,0,U,z),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Y.width+"x"+Y.height+") to ("+U+"x"+z+")."),te}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Y.width+"x"+Y.height+")."),Y;return Y}function _(Y){return mA(Y.width)&&mA(Y.height)}function m(Y){return a?!1:Y.wrapS!==xi||Y.wrapT!==xi||Y.minFilter!==mr&&Y.minFilter!==kn}function v(Y,G){return Y.generateMipmaps&&G&&Y.minFilter!==mr&&Y.minFilter!==kn}function b(Y,G,le,ge,ae=1){t.generateMipmap(Y);const ue=r.get(G);ue.__maxMipLevel=Math.log2(Math.max(le,ge,ae))}function w(Y,G,le,ge){if(a===!1)return G;if(Y!==null){if(t[Y]!==void 0)return t[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let ae=G;return G===6403&&(le===5126&&(ae=33326),le===5131&&(ae=33325),le===5121&&(ae=33321)),G===6407&&(le===5126&&(ae=34837),le===5131&&(ae=34843),le===5121&&(ae=32849)),G===6408&&(le===5126&&(ae=34836),le===5131&&(ae=34842),le===5121&&(ae=ge===Br?35907:32856)),(ae===33325||ae===33326||ae===34842||ae===34836)&&e.get("EXT_color_buffer_float"),ae}function A(Y){return Y===mr||Y===pA||Y===gA?9728:9729}function E(Y){const G=Y.target;G.removeEventListener("dispose",E),C(G),G.isVideoTexture&&h.delete(G),o.memory.textures--}function S(Y){const G=Y.target;G.removeEventListener("dispose",S),M(G)}function C(Y){const G=r.get(Y);G.__webglInit!==void 0&&(t.deleteTexture(G.__webglTexture),r.remove(Y))}function M(Y){const G=Y.texture,le=r.get(Y),ge=r.get(G);if(!!Y){if(ge.__webglTexture!==void 0&&(t.deleteTexture(ge.__webglTexture),o.memory.textures--),Y.depthTexture&&Y.depthTexture.dispose(),Y.isWebGLCubeRenderTarget)for(let ae=0;ae<6;ae++)t.deleteFramebuffer(le.__webglFramebuffer[ae]),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer[ae]);else t.deleteFramebuffer(le.__webglFramebuffer),le.__webglDepthbuffer&&t.deleteRenderbuffer(le.__webglDepthbuffer),le.__webglMultisampledFramebuffer&&t.deleteFramebuffer(le.__webglMultisampledFramebuffer),le.__webglColorRenderbuffer&&t.deleteRenderbuffer(le.__webglColorRenderbuffer),le.__webglDepthRenderbuffer&&t.deleteRenderbuffer(le.__webglDepthRenderbuffer);if(Y.isWebGLMultipleRenderTargets)for(let ae=0,ue=G.length;ae<ue;ae++){const U=r.get(G[ae]);U.__webglTexture&&(t.deleteTexture(U.__webglTexture),o.memory.textures--),r.remove(G[ae])}r.remove(G),r.remove(Y)}}let D=0;function T(){D=0}function L(){const Y=D;return Y>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+l),D+=1,Y}function F(Y,G){const le=r.get(Y);if(Y.isVideoTexture&&V(Y),Y.version>0&&le.__version!==Y.version){const ge=Y.image;if(ge===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(ge.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{K(le,Y,G);return}}n.activeTexture(33984+G),n.bindTexture(3553,le.__webglTexture)}function k(Y,G){const le=r.get(Y);if(Y.version>0&&le.__version!==Y.version){K(le,Y,G);return}n.activeTexture(33984+G),n.bindTexture(35866,le.__webglTexture)}function I(Y,G){const le=r.get(Y);if(Y.version>0&&le.__version!==Y.version){K(le,Y,G);return}n.activeTexture(33984+G),n.bindTexture(32879,le.__webglTexture)}function O(Y,G){const le=r.get(Y);if(Y.version>0&&le.__version!==Y.version){ee(le,Y,G);return}n.activeTexture(33984+G),n.bindTexture(34067,le.__webglTexture)}const $={[Er]:10497,[xi]:33071,[o1]:33648},N={[mr]:9728,[pA]:9984,[gA]:9986,[kn]:9729,[dB]:9985,[Ld]:9987};function W(Y,G,le){if(le?(t.texParameteri(Y,10242,$[G.wrapS]),t.texParameteri(Y,10243,$[G.wrapT]),(Y===32879||Y===35866)&&t.texParameteri(Y,32882,$[G.wrapR]),t.texParameteri(Y,10240,N[G.magFilter]),t.texParameteri(Y,10241,N[G.minFilter])):(t.texParameteri(Y,10242,33071),t.texParameteri(Y,10243,33071),(Y===32879||Y===35866)&&t.texParameteri(Y,32882,33071),(G.wrapS!==xi||G.wrapT!==xi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Y,10240,A(G.magFilter)),t.texParameteri(Y,10241,A(G.minFilter)),G.minFilter!==mr&&G.minFilter!==kn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ge=e.get("EXT_texture_filter_anisotropic");if(G.type===Ao&&e.has("OES_texture_float_linear")===!1||a===!1&&G.type===ll&&e.has("OES_texture_half_float_linear")===!1)return;(G.anisotropy>1||r.get(G).__currentAnisotropy)&&(t.texParameterf(Y,ge.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,i.getMaxAnisotropy())),r.get(G).__currentAnisotropy=G.anisotropy)}}function H(Y,G){Y.__webglInit===void 0&&(Y.__webglInit=!0,G.addEventListener("dispose",E),Y.__webglTexture=t.createTexture(),o.memory.textures++)}function K(Y,G,le){let ge=3553;G.isDataTexture2DArray&&(ge=35866),G.isDataTexture3D&&(ge=32879),H(Y,G),n.activeTexture(33984+le),n.bindTexture(ge,Y.__webglTexture),t.pixelStorei(37440,G.flipY),t.pixelStorei(37441,G.premultiplyAlpha),t.pixelStorei(3317,G.unpackAlignment),t.pixelStorei(37443,0);const ae=m(G)&&_(G.image)===!1,ue=x(G.image,ae,!1,c),U=_(ue)||a,z=s.convert(G.format);let te=s.convert(G.type),fe=w(G.internalFormat,z,te,G.encoding);W(ge,G,U);let ne;const de=G.mipmaps;if(G.isDepthTexture)fe=6402,a?G.type===Ao?fe=36012:G.type===Sy?fe=33190:G.type===pg?fe=35056:fe=33189:G.type===Ao&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),G.format===Nh&&fe===6402&&G.type!==a1&&G.type!==Sy&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),G.type=a1,te=s.convert(G.type)),G.format===Yg&&fe===6402&&(fe=34041,G.type!==pg&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),G.type=pg,te=s.convert(G.type))),n.texImage2D(3553,0,fe,ue.width,ue.height,0,z,te,null);else if(G.isDataTexture)if(de.length>0&&U){for(let pe=0,_e=de.length;pe<_e;pe++)ne=de[pe],n.texImage2D(3553,pe,fe,ne.width,ne.height,0,z,te,ne.data);G.generateMipmaps=!1,Y.__maxMipLevel=de.length-1}else n.texImage2D(3553,0,fe,ue.width,ue.height,0,z,te,ue.data),Y.__maxMipLevel=0;else if(G.isCompressedTexture){for(let pe=0,_e=de.length;pe<_e;pe++)ne=de[pe],G.format!==ci&&G.format!==_a?z!==null?n.compressedTexImage2D(3553,pe,fe,ne.width,ne.height,0,ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,pe,fe,ne.width,ne.height,0,z,te,ne.data);Y.__maxMipLevel=de.length-1}else if(G.isDataTexture2DArray)n.texImage3D(35866,0,fe,ue.width,ue.height,ue.depth,0,z,te,ue.data),Y.__maxMipLevel=0;else if(G.isDataTexture3D)n.texImage3D(32879,0,fe,ue.width,ue.height,ue.depth,0,z,te,ue.data),Y.__maxMipLevel=0;else if(de.length>0&&U){for(let pe=0,_e=de.length;pe<_e;pe++)ne=de[pe],n.texImage2D(3553,pe,fe,z,te,ne);G.generateMipmaps=!1,Y.__maxMipLevel=de.length-1}else n.texImage2D(3553,0,fe,z,te,ue),Y.__maxMipLevel=0;v(G,U)&&b(ge,G,ue.width,ue.height),Y.__version=G.version,G.onUpdate&&G.onUpdate(G)}function ee(Y,G,le){if(G.image.length!==6)return;H(Y,G),n.activeTexture(33984+le),n.bindTexture(34067,Y.__webglTexture),t.pixelStorei(37440,G.flipY),t.pixelStorei(37441,G.premultiplyAlpha),t.pixelStorei(3317,G.unpackAlignment),t.pixelStorei(37443,0);const ge=G&&(G.isCompressedTexture||G.image[0].isCompressedTexture),ae=G.image[0]&&G.image[0].isDataTexture,ue=[];for(let pe=0;pe<6;pe++)!ge&&!ae?ue[pe]=x(G.image[pe],!1,!0,u):ue[pe]=ae?G.image[pe].image:G.image[pe];const U=ue[0],z=_(U)||a,te=s.convert(G.format),fe=s.convert(G.type),ne=w(G.internalFormat,te,fe,G.encoding);W(34067,G,z);let de;if(ge){for(let pe=0;pe<6;pe++){de=ue[pe].mipmaps;for(let _e=0;_e<de.length;_e++){const be=de[_e];G.format!==ci&&G.format!==_a?te!==null?n.compressedTexImage2D(34069+pe,_e,ne,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+pe,_e,ne,be.width,be.height,0,te,fe,be.data)}}Y.__maxMipLevel=de.length-1}else{de=G.mipmaps;for(let pe=0;pe<6;pe++)if(ae){n.texImage2D(34069+pe,0,ne,ue[pe].width,ue[pe].height,0,te,fe,ue[pe].data);for(let _e=0;_e<de.length;_e++){const Me=de[_e].image[pe].image;n.texImage2D(34069+pe,_e+1,ne,Me.width,Me.height,0,te,fe,Me.data)}}else{n.texImage2D(34069+pe,0,ne,te,fe,ue[pe]);for(let _e=0;_e<de.length;_e++){const be=de[_e];n.texImage2D(34069+pe,_e+1,ne,te,fe,be.image[pe])}}Y.__maxMipLevel=de.length}v(G,z)&&b(34067,G,U.width,U.height),Y.__version=G.version,G.onUpdate&&G.onUpdate(G)}function Z(Y,G,le,ge,ae){const ue=s.convert(le.format),U=s.convert(le.type),z=w(le.internalFormat,ue,U,le.encoding);ae===32879||ae===35866?n.texImage3D(ae,0,z,G.width,G.height,G.depth,0,ue,U,null):n.texImage2D(ae,0,z,G.width,G.height,0,ue,U,null),n.bindFramebuffer(36160,Y),t.framebufferTexture2D(36160,ge,ae,r.get(le).__webglTexture,0),n.bindFramebuffer(36160,null)}function J(Y,G,le){if(t.bindRenderbuffer(36161,Y),G.depthBuffer&&!G.stencilBuffer){let ge=33189;if(le){const ae=G.depthTexture;ae&&ae.isDepthTexture&&(ae.type===Ao?ge=36012:ae.type===Sy&&(ge=33190));const ue=ye(G);t.renderbufferStorageMultisample(36161,ue,ge,G.width,G.height)}else t.renderbufferStorage(36161,ge,G.width,G.height);t.framebufferRenderbuffer(36160,36096,36161,Y)}else if(G.depthBuffer&&G.stencilBuffer){if(le){const ge=ye(G);t.renderbufferStorageMultisample(36161,ge,35056,G.width,G.height)}else t.renderbufferStorage(36161,34041,G.width,G.height);t.framebufferRenderbuffer(36160,33306,36161,Y)}else{const ge=G.isWebGLMultipleRenderTargets===!0?G.texture[0]:G.texture,ae=s.convert(ge.format),ue=s.convert(ge.type),U=w(ge.internalFormat,ae,ue,ge.encoding);if(le){const z=ye(G);t.renderbufferStorageMultisample(36161,z,U,G.width,G.height)}else t.renderbufferStorage(36161,U,G.width,G.height)}t.bindRenderbuffer(36161,null)}function X(Y,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,Y),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(G.depthTexture).__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),F(G.depthTexture,0);const ge=r.get(G.depthTexture).__webglTexture;if(G.depthTexture.format===Nh)t.framebufferTexture2D(36160,36096,3553,ge,0);else if(G.depthTexture.format===Yg)t.framebufferTexture2D(36160,33306,3553,ge,0);else throw new Error("Unknown depthTexture format")}function Q(Y){const G=r.get(Y),le=Y.isWebGLCubeRenderTarget===!0;if(Y.depthTexture){if(le)throw new Error("target.depthTexture not supported in Cube render targets");X(G.__webglFramebuffer,Y)}else if(le){G.__webglDepthbuffer=[];for(let ge=0;ge<6;ge++)n.bindFramebuffer(36160,G.__webglFramebuffer[ge]),G.__webglDepthbuffer[ge]=t.createRenderbuffer(),J(G.__webglDepthbuffer[ge],Y,!1)}else n.bindFramebuffer(36160,G.__webglFramebuffer),G.__webglDepthbuffer=t.createRenderbuffer(),J(G.__webglDepthbuffer,Y,!1);n.bindFramebuffer(36160,null)}function oe(Y){const G=Y.texture,le=r.get(Y),ge=r.get(G);Y.addEventListener("dispose",S),Y.isWebGLMultipleRenderTargets!==!0&&(ge.__webglTexture=t.createTexture(),ge.__version=G.version,o.memory.textures++);const ae=Y.isWebGLCubeRenderTarget===!0,ue=Y.isWebGLMultipleRenderTargets===!0,U=Y.isWebGLMultisampleRenderTarget===!0,z=G.isDataTexture3D||G.isDataTexture2DArray,te=_(Y)||a;if(a&&G.format===_a&&(G.type===Ao||G.type===ll)&&(G.format=ci,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),ae){le.__webglFramebuffer=[];for(let fe=0;fe<6;fe++)le.__webglFramebuffer[fe]=t.createFramebuffer()}else if(le.__webglFramebuffer=t.createFramebuffer(),ue)if(i.drawBuffers){const fe=Y.texture;for(let ne=0,de=fe.length;ne<de;ne++){const pe=r.get(fe[ne]);pe.__webglTexture===void 0&&(pe.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(U)if(a){le.__webglMultisampledFramebuffer=t.createFramebuffer(),le.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,le.__webglColorRenderbuffer);const fe=s.convert(G.format),ne=s.convert(G.type),de=w(G.internalFormat,fe,ne,G.encoding),pe=ye(Y);t.renderbufferStorageMultisample(36161,pe,de,Y.width,Y.height),n.bindFramebuffer(36160,le.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,le.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),Y.depthBuffer&&(le.__webglDepthRenderbuffer=t.createRenderbuffer(),J(le.__webglDepthRenderbuffer,Y,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(ae){n.bindTexture(34067,ge.__webglTexture),W(34067,G,te);for(let fe=0;fe<6;fe++)Z(le.__webglFramebuffer[fe],Y,G,36064,34069+fe);v(G,te)&&b(34067,G,Y.width,Y.height),n.unbindTexture()}else if(ue){const fe=Y.texture;for(let ne=0,de=fe.length;ne<de;ne++){const pe=fe[ne],_e=r.get(pe);n.bindTexture(3553,_e.__webglTexture),W(3553,pe,te),Z(le.__webglFramebuffer,Y,pe,36064+ne,3553),v(pe,te)&&b(3553,pe,Y.width,Y.height)}n.unbindTexture()}else{let fe=3553;z&&(a?fe=G.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(fe,ge.__webglTexture),W(fe,G,te),Z(le.__webglFramebuffer,Y,G,36064,fe),v(G,te)&&b(fe,G,Y.width,Y.height,Y.depth),n.unbindTexture()}Y.depthBuffer&&Q(Y)}function he(Y){const G=_(Y)||a,le=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let ge=0,ae=le.length;ge<ae;ge++){const ue=le[ge];if(v(ue,G)){const U=Y.isWebGLCubeRenderTarget?34067:3553,z=r.get(ue).__webglTexture;n.bindTexture(U,z),b(U,ue,Y.width,Y.height),n.unbindTexture()}}}function ve(Y){if(Y.isWebGLMultisampleRenderTarget)if(a){const G=Y.width,le=Y.height;let ge=16384;Y.depthBuffer&&(ge|=256),Y.stencilBuffer&&(ge|=1024);const ae=r.get(Y);n.bindFramebuffer(36008,ae.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,ae.__webglFramebuffer),t.blitFramebuffer(0,0,G,le,0,0,G,le,ge,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,ae.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function ye(Y){return a&&Y.isWebGLMultisampleRenderTarget?Math.min(f,Y.samples):0}function V(Y){const G=o.render.frame;h.get(Y)!==G&&(h.set(Y,G),Y.update())}let R=!1,B=!1;function j(Y,G){Y&&Y.isWebGLRenderTarget&&(R===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),R=!0),Y=Y.texture),F(Y,G)}function se(Y,G){Y&&Y.isWebGLCubeRenderTarget&&(B===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),B=!0),Y=Y.texture),O(Y,G)}this.allocateTextureUnit=L,this.resetTextureUnits=T,this.setTexture2D=F,this.setTexture2DArray=k,this.setTexture3D=I,this.setTextureCube=O,this.setupRenderTarget=oe,this.updateRenderTargetMipmap=he,this.updateMultisampleRenderTarget=ve,this.safeSetTexture2D=j,this.safeSetTextureCube=se}function Lq(t,e,n){const r=n.isWebGL2;function i(s){let o;if(s===Hs)return 5121;if(s===X9)return 32819;if(s===Y9)return 32820;if(s===j9)return 33635;if(s===H9)return 5120;if(s===W9)return 5122;if(s===a1)return 5123;if(s===$9)return 5124;if(s===Sy)return 5125;if(s===Ao)return 5126;if(s===ll)return r?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===q9)return 6406;if(s===_a)return 6407;if(s===ci)return 6408;if(s===J9)return 6409;if(s===K9)return 6410;if(s===Nh)return 6402;if(s===Yg)return 34041;if(s===Z9)return 6403;if(s===Q9)return 36244;if(s===e7)return 33319;if(s===t7)return 33320;if(s===n7)return 36248;if(s===r7)return 36249;if(s===VT||s===zT||s===GT||s===UT)if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===VT)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===zT)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===GT)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===UT)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===HT||s===WT||s===$T||s===XT)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===HT)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===WT)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===$T)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===XT)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===i7)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===YT||s===jT)&&(o=e.get("WEBGL_compressed_texture_etc"),o!==null)){if(s===YT)return o.COMPRESSED_RGB8_ETC2;if(s===jT)return o.COMPRESSED_RGBA8_ETC2_EAC}if(s===s7||s===o7||s===a7||s===l7||s===u7||s===c7||s===f7||s===h7||s===d7||s===p7||s===g7||s===m7||s===v7||s===y7||s===w7||s===b7||s===x7||s===S7||s===A7||s===E7||s===C7||s===M7||s===D7||s===T7||s===P7||s===L7||s===F7||s===I7)return o=e.get("WEBGL_compressed_texture_astc"),o!==null?s:null;if(s===_7)return o=e.get("EXT_texture_compression_bptc"),o!==null?s:null;if(s===pg)return r?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:i}}class UB extends zi{constructor(e=[]){super(),this.cameras=e}}UB.prototype.isArrayCamera=!0;class ss extends Qt{constructor(){super(),this.type="Group"}}ss.prototype.isGroup=!0;const Fq={type:"move"};class Sb{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ss,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ss,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ss,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred")if(a!==null&&(i=n.getPose(e.targetRaySpace,r),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Fq))),u&&e.hand){o=!0;for(const g of e.hand.values()){const x=n.getJointPose(g,r);if(u.joints[g.jointName]===void 0){const m=new ss;m.matrixAutoUpdate=!1,m.visible=!1,u.joints[g.jointName]=m,u.add(m)}const _=u.joints[g.jointName];x!==null&&(_.matrix.fromArray(x.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=x.radius),_.visible=x!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=c.position.distanceTo(f.position),d=.02,p=.005;u.inputState.pinching&&h>d+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=d-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}}class Iq extends bl{constructor(e,n){super();const r=this,i=e.state;let s=null,o=1,a=null,l="local-floor",u=null,c=null,f=null,h=null,d=null,p=!1,g=null,x=null,_=null,m=null,v=null,b=null;const w=[],A=new Map,E=new zi;E.layers.enable(1),E.viewport=new $t;const S=new zi;S.layers.enable(2),S.viewport=new $t;const C=[E,S],M=new UB;M.layers.enable(1),M.layers.enable(2);let D=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ee){let Z=w[ee];return Z===void 0&&(Z=new Sb,w[ee]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(ee){let Z=w[ee];return Z===void 0&&(Z=new Sb,w[ee]=Z),Z.getGripSpace()},this.getHand=function(ee){let Z=w[ee];return Z===void 0&&(Z=new Sb,w[ee]=Z),Z.getHandSpace()};function L(ee){const Z=A.get(ee.inputSource);Z&&Z.dispatchEvent({type:ee.type,data:ee.inputSource})}function F(){A.forEach(function(ee,Z){ee.disconnect(Z)}),A.clear(),D=null,T=null,i.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),f&&n.deleteFramebuffer(f),g&&n.deleteFramebuffer(g),x&&n.deleteRenderbuffer(x),_&&n.deleteRenderbuffer(_),f=null,g=null,x=null,_=null,d=null,h=null,c=null,s=null,K.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ee){o=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ee){l=ee,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return h!==null?h:d},this.getBinding=function(){return c},this.getFrame=function(){return m},this.getSession=function(){return s},this.setSession=async function(ee){if(s=ee,s!==null){s.addEventListener("select",L),s.addEventListener("selectstart",L),s.addEventListener("selectend",L),s.addEventListener("squeeze",L),s.addEventListener("squeezestart",L),s.addEventListener("squeezeend",L),s.addEventListener("end",F),s.addEventListener("inputsourceschange",k);const Z=n.getContextAttributes();if(Z.xrCompatible!==!0&&await n.makeXRCompatible(),s.renderState.layers===void 0){const J={antialias:Z.antialias,alpha:Z.alpha,depth:Z.depth,stencil:Z.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(s,n,J),s.updateRenderState({baseLayer:d})}else if(n instanceof WebGLRenderingContext){const J={antialias:!0,alpha:Z.alpha,depth:Z.depth,stencil:Z.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(s,n,J),s.updateRenderState({layers:[d]})}else{p=Z.antialias;let J=null;Z.depth&&(b=256,Z.stencil&&(b|=1024),v=Z.stencil?33306:36096,J=Z.stencil?35056:33190);const X={colorFormat:Z.alpha?32856:32849,depthFormat:J,scaleFactor:o};c=new XRWebGLBinding(s,n),h=c.createProjectionLayer(X),f=n.createFramebuffer(),s.updateRenderState({layers:[h]}),p&&(g=n.createFramebuffer(),x=n.createRenderbuffer(),n.bindRenderbuffer(36161,x),n.renderbufferStorageMultisample(36161,4,32856,h.textureWidth,h.textureHeight),i.bindFramebuffer(36160,g),n.framebufferRenderbuffer(36160,36064,36161,x),n.bindRenderbuffer(36161,null),J!==null&&(_=n.createRenderbuffer(),n.bindRenderbuffer(36161,_),n.renderbufferStorageMultisample(36161,4,J,h.textureWidth,h.textureHeight),n.framebufferRenderbuffer(36160,v,36161,_),n.bindRenderbuffer(36161,null)),i.bindFramebuffer(36160,null))}a=await s.requestReferenceSpace(l),K.setContext(s),K.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}};function k(ee){const Z=s.inputSources;for(let J=0;J<w.length;J++)A.set(Z[J],w[J]);for(let J=0;J<ee.removed.length;J++){const X=ee.removed[J],Q=A.get(X);Q&&(Q.dispatchEvent({type:"disconnected",data:X}),A.delete(X))}for(let J=0;J<ee.added.length;J++){const X=ee.added[J],Q=A.get(X);Q&&Q.dispatchEvent({type:"connected",data:X})}}const I=new q,O=new q;function $(ee,Z,J){I.setFromMatrixPosition(Z.matrixWorld),O.setFromMatrixPosition(J.matrixWorld);const X=I.distanceTo(O),Q=Z.projectionMatrix.elements,oe=J.projectionMatrix.elements,he=Q[14]/(Q[10]-1),ve=Q[14]/(Q[10]+1),ye=(Q[9]+1)/Q[5],V=(Q[9]-1)/Q[5],R=(Q[8]-1)/Q[0],B=(oe[8]+1)/oe[0],j=he*R,se=he*B,Y=X/(-R+B),G=Y*-R;Z.matrixWorld.decompose(ee.position,ee.quaternion,ee.scale),ee.translateX(G),ee.translateZ(Y),ee.matrixWorld.compose(ee.position,ee.quaternion,ee.scale),ee.matrixWorldInverse.copy(ee.matrixWorld).invert();const le=he+Y,ge=ve+Y,ae=j-G,ue=se+(X-G),U=ye*ve/ge*le,z=V*ve/ge*le;ee.projectionMatrix.makePerspective(ae,ue,U,z,le,ge)}function N(ee,Z){Z===null?ee.matrixWorld.copy(ee.matrix):ee.matrixWorld.multiplyMatrices(Z.matrixWorld,ee.matrix),ee.matrixWorldInverse.copy(ee.matrixWorld).invert()}this.updateCamera=function(ee){if(s===null)return;M.near=S.near=E.near=ee.near,M.far=S.far=E.far=ee.far,(D!==M.near||T!==M.far)&&(s.updateRenderState({depthNear:M.near,depthFar:M.far}),D=M.near,T=M.far);const Z=ee.parent,J=M.cameras;N(M,Z);for(let Q=0;Q<J.length;Q++)N(J[Q],Z);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),ee.position.copy(M.position),ee.quaternion.copy(M.quaternion),ee.scale.copy(M.scale),ee.matrix.copy(M.matrix),ee.matrixWorld.copy(M.matrixWorld);const X=ee.children;for(let Q=0,oe=X.length;Q<oe;Q++)X[Q].updateMatrixWorld(!0);J.length===2?$(M,E,S):M.projectionMatrix.copy(E.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(h!==null)return h.fixedFoveation;if(d!==null)return d.fixedFoveation},this.setFoveation=function(ee){h!==null&&(h.fixedFoveation=ee),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=ee)};let W=null;function H(ee,Z){if(u=Z.getViewerPose(a),m=Z,u!==null){const X=u.views;d!==null&&i.bindXRFramebuffer(d.framebuffer);let Q=!1;X.length!==M.cameras.length&&(M.cameras.length=0,Q=!0);for(let oe=0;oe<X.length;oe++){const he=X[oe];let ve=null;if(d!==null)ve=d.getViewport(he);else{const V=c.getViewSubImage(h,he);i.bindXRFramebuffer(f),V.depthStencilTexture!==void 0&&n.framebufferTexture2D(36160,v,3553,V.depthStencilTexture,0),n.framebufferTexture2D(36160,36064,3553,V.colorTexture,0),ve=V.viewport}const ye=C[oe];ye.matrix.fromArray(he.transform.matrix),ye.projectionMatrix.fromArray(he.projectionMatrix),ye.viewport.set(ve.x,ve.y,ve.width,ve.height),oe===0&&M.matrix.copy(ye.matrix),Q===!0&&M.cameras.push(ye)}p&&(i.bindXRFramebuffer(g),b!==null&&n.clear(b))}const J=s.inputSources;for(let X=0;X<w.length;X++){const Q=w[X],oe=J[X];Q.update(oe,Z,a)}if(W&&W(ee,Z),p){const X=h.textureWidth,Q=h.textureHeight;i.bindFramebuffer(36008,g),i.bindFramebuffer(36009,f),n.invalidateFramebuffer(36008,[v]),n.invalidateFramebuffer(36009,[v]),n.blitFramebuffer(0,0,X,Q,0,0,X,Q,16384,9728),n.invalidateFramebuffer(36008,[36064]),i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),i.bindFramebuffer(36160,g)}m=null}const K=new PB;K.setAnimationLoop(H),this.setAnimationLoop=function(ee){W=ee},this.dispose=function(){}}}function kq(t){function e(_,m){_.fogColor.value.copy(m.color),m.isFog?(_.fogNear.value=m.near,_.fogFar.value=m.far):m.isFogExp2&&(_.fogDensity.value=m.density)}function n(_,m,v,b,w){m.isMeshBasicMaterial?r(_,m):m.isMeshLambertMaterial?(r(_,m),l(_,m)):m.isMeshToonMaterial?(r(_,m),c(_,m)):m.isMeshPhongMaterial?(r(_,m),u(_,m)):m.isMeshStandardMaterial?(r(_,m),m.isMeshPhysicalMaterial?h(_,m,w):f(_,m)):m.isMeshMatcapMaterial?(r(_,m),d(_,m)):m.isMeshDepthMaterial?(r(_,m),p(_,m)):m.isMeshDistanceMaterial?(r(_,m),g(_,m)):m.isMeshNormalMaterial?(r(_,m),x(_,m)):m.isLineBasicMaterial?(i(_,m),m.isLineDashedMaterial&&s(_,m)):m.isPointsMaterial?o(_,m,v,b):m.isSpriteMaterial?a(_,m):m.isShadowMaterial?(_.color.value.copy(m.color),_.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function r(_,m){_.opacity.value=m.opacity,m.color&&_.diffuse.value.copy(m.color),m.emissive&&_.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(_.map.value=m.map),m.alphaMap&&(_.alphaMap.value=m.alphaMap),m.specularMap&&(_.specularMap.value=m.specularMap),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest);const v=t.get(m).envMap;if(v){_.envMap.value=v,_.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=m.reflectivity,_.ior.value=m.ior,_.refractionRatio.value=m.refractionRatio;const A=t.get(v).__maxMipLevel;A!==void 0&&(_.maxMipLevel.value=A)}m.lightMap&&(_.lightMap.value=m.lightMap,_.lightMapIntensity.value=m.lightMapIntensity),m.aoMap&&(_.aoMap.value=m.aoMap,_.aoMapIntensity.value=m.aoMapIntensity);let b;m.map?b=m.map:m.specularMap?b=m.specularMap:m.displacementMap?b=m.displacementMap:m.normalMap?b=m.normalMap:m.bumpMap?b=m.bumpMap:m.roughnessMap?b=m.roughnessMap:m.metalnessMap?b=m.metalnessMap:m.alphaMap?b=m.alphaMap:m.emissiveMap?b=m.emissiveMap:m.clearcoatMap?b=m.clearcoatMap:m.clearcoatNormalMap?b=m.clearcoatNormalMap:m.clearcoatRoughnessMap?b=m.clearcoatRoughnessMap:m.specularIntensityMap?b=m.specularIntensityMap:m.specularColorMap?b=m.specularColorMap:m.transmissionMap?b=m.transmissionMap:m.thicknessMap?b=m.thicknessMap:m.sheenColorMap?b=m.sheenColorMap:m.sheenRoughnessMap&&(b=m.sheenRoughnessMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),_.uvTransform.value.copy(b.matrix));let w;m.aoMap?w=m.aoMap:m.lightMap&&(w=m.lightMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),_.uv2Transform.value.copy(w.matrix))}function i(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity}function s(_,m){_.dashSize.value=m.dashSize,_.totalSize.value=m.dashSize+m.gapSize,_.scale.value=m.scale}function o(_,m,v,b){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.size.value=m.size*v,_.scale.value=b*.5,m.map&&(_.map.value=m.map),m.alphaMap&&(_.alphaMap.value=m.alphaMap),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest);let w;m.map?w=m.map:m.alphaMap&&(w=m.alphaMap),w!==void 0&&(w.matrixAutoUpdate===!0&&w.updateMatrix(),_.uvTransform.value.copy(w.matrix))}function a(_,m){_.diffuse.value.copy(m.color),_.opacity.value=m.opacity,_.rotation.value=m.rotation,m.map&&(_.map.value=m.map),m.alphaMap&&(_.alphaMap.value=m.alphaMap),m.alphaTest>0&&(_.alphaTest.value=m.alphaTest);let v;m.map?v=m.map:m.alphaMap&&(v=m.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),_.uvTransform.value.copy(v.matrix))}function l(_,m){m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap)}function u(_,m){_.specular.value.copy(m.specular),_.shininess.value=Math.max(m.shininess,1e-4),m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap),m.bumpMap&&(_.bumpMap.value=m.bumpMap,_.bumpScale.value=m.bumpScale,m.side===rr&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,_.normalScale.value.copy(m.normalScale),m.side===rr&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias)}function c(_,m){m.gradientMap&&(_.gradientMap.value=m.gradientMap),m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap),m.bumpMap&&(_.bumpMap.value=m.bumpMap,_.bumpScale.value=m.bumpScale,m.side===rr&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,_.normalScale.value.copy(m.normalScale),m.side===rr&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias)}function f(_,m){_.roughness.value=m.roughness,_.metalness.value=m.metalness,m.roughnessMap&&(_.roughnessMap.value=m.roughnessMap),m.metalnessMap&&(_.metalnessMap.value=m.metalnessMap),m.emissiveMap&&(_.emissiveMap.value=m.emissiveMap),m.bumpMap&&(_.bumpMap.value=m.bumpMap,_.bumpScale.value=m.bumpScale,m.side===rr&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,_.normalScale.value.copy(m.normalScale),m.side===rr&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias),t.get(m).envMap&&(_.envMapIntensity.value=m.envMapIntensity)}function h(_,m,v){f(_,m),_.ior.value=m.ior,m.sheen>0&&(_.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),_.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(_.sheenColorMap.value=m.sheenColorMap),m.sheenRoughnessMap&&(_.sheenRoughnessMap.value=m.sheenRoughnessMap)),m.clearcoat>0&&(_.clearcoat.value=m.clearcoat,_.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(_.clearcoatMap.value=m.clearcoatMap),m.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap),m.clearcoatNormalMap&&(_.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),_.clearcoatNormalMap.value=m.clearcoatNormalMap,m.side===rr&&_.clearcoatNormalScale.value.negate())),m.transmission>0&&(_.transmission.value=m.transmission,_.transmissionSamplerMap.value=v.texture,_.transmissionSamplerSize.value.set(v.width,v.height),m.transmissionMap&&(_.transmissionMap.value=m.transmissionMap),_.thickness.value=m.thickness,m.thicknessMap&&(_.thicknessMap.value=m.thicknessMap),_.attenuationDistance.value=m.attenuationDistance,_.attenuationColor.value.copy(m.attenuationColor)),_.specularIntensity.value=m.specularIntensity,_.specularColor.value.copy(m.specularColor),m.specularIntensityMap&&(_.specularIntensityMap.value=m.specularIntensityMap),m.specularColorMap&&(_.specularColorMap.value=m.specularColorMap)}function d(_,m){m.matcap&&(_.matcap.value=m.matcap),m.bumpMap&&(_.bumpMap.value=m.bumpMap,_.bumpScale.value=m.bumpScale,m.side===rr&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,_.normalScale.value.copy(m.normalScale),m.side===rr&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias)}function p(_,m){m.displacementMap&&(_.displacementMap.value=m.displacementMap,_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias)}function g(_,m){m.displacementMap&&(_.displacementMap.value=m.displacementMap,_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias),_.referencePosition.value.copy(m.referencePosition),_.nearDistance.value=m.nearDistance,_.farDistance.value=m.farDistance}function x(_,m){m.bumpMap&&(_.bumpMap.value=m.bumpMap,_.bumpScale.value=m.bumpScale,m.side===rr&&(_.bumpScale.value*=-1)),m.normalMap&&(_.normalMap.value=m.normalMap,_.normalScale.value.copy(m.normalScale),m.side===rr&&_.normalScale.value.negate()),m.displacementMap&&(_.displacementMap.value=m.displacementMap,_.displacementScale.value=m.displacementScale,_.displacementBias.value=m.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:n}}function Rq(){const t=A_("canvas");return t.style.display="block",t}function gn(t={}){const e=t.canvas!==void 0?t.canvas:Rq(),n=t.context!==void 0?t.context:null,r=t.alpha!==void 0?t.alpha:!1,i=t.depth!==void 0?t.depth:!0,s=t.stencil!==void 0?t.stencil:!0,o=t.antialias!==void 0?t.antialias:!1,a=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,l=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,u=t.powerPreference!==void 0?t.powerPreference:"default",c=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1;let f=null,h=null;const d=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Zr,this.physicallyCorrectLights=!1,this.toneMapping=qc,this.toneMappingExposure=1;const g=this;let x=!1,_=0,m=0,v=null,b=-1,w=null;const A=new $t,E=new $t;let S=null,C=e.width,M=e.height,D=1,T=null,L=null;const F=new $t(0,0,C,M),k=new $t(0,0,C,M);let I=!1;const O=[],$=new C_;let N=!1,W=!1,H=null;const K=new st,ee=new q,Z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return v===null?D:1}let X=n;function Q(ce,Ee){for(let Te=0;Te<ce.length;Te++){const Ce=ce[Te],Le=e.getContext(Ce,Ee);if(Le!==null)return Le}return null}try{const ce={alpha:r,depth:i,stencil:s,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if(e.addEventListener("webglcontextlost",Ve,!1),e.addEventListener("webglcontextrestored",Pe,!1),X===null){const Ee=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&Ee.shift(),X=Q(Ee,ce),X===null)throw Q(Ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}X.getShaderPrecisionFormat===void 0&&(X.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ce){throw console.error("THREE.WebGLRenderer: "+ce.message),ce}let oe,he,ve,ye,V,R,B,j,se,Y,G,le,ge,ae,ue,U,z,te,fe,ne,de,pe,_e;function be(){oe=new ij(X),he=new JY(X,oe,t),oe.init(he),pe=new Lq(X,oe,he),ve=new Tq(X,oe,he),O[0]=1029,ye=new aj,V=new yq,R=new Pq(X,oe,ve,V,he,pe,ye),B=new ZY(g),j=new rj(g),se=new w$(X,he),_e=new jY(X,oe,se,he),Y=new sj(X,se,ye,_e),G=new fj(X,Y,se,ye),fe=new cj(X,he,R),U=new KY(V),le=new vq(g,B,j,oe,he,_e,U),ge=new kq(V),ae=new wq(V),ue=new Cq(oe,he),te=new YY(g,B,ve,G,a),z=new GB(g,G,he),ne=new qY(X,oe,ye,he),de=new oj(X,oe,ye,he),ye.programs=le.programs,g.capabilities=he,g.extensions=oe,g.properties=V,g.renderLists=ae,g.shadowMap=z,g.state=ve,g.info=ye}be();const Me=new Iq(g,X);this.xr=Me,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const ce=oe.get("WEBGL_lose_context");ce&&ce.loseContext()},this.forceContextRestore=function(){const ce=oe.get("WEBGL_lose_context");ce&&ce.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(ce){ce!==void 0&&(D=ce,this.setSize(C,M,!1))},this.getSize=function(ce){return ce.set(C,M)},this.setSize=function(ce,Ee,Te){if(Me.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=ce,M=Ee,e.width=Math.floor(ce*D),e.height=Math.floor(Ee*D),Te!==!1&&(e.style.width=ce+"px",e.style.height=Ee+"px"),this.setViewport(0,0,ce,Ee)},this.getDrawingBufferSize=function(ce){return ce.set(C*D,M*D).floor()},this.setDrawingBufferSize=function(ce,Ee,Te){C=ce,M=Ee,D=Te,e.width=Math.floor(ce*Te),e.height=Math.floor(Ee*Te),this.setViewport(0,0,ce,Ee)},this.getCurrentViewport=function(ce){return ce.copy(A)},this.getViewport=function(ce){return ce.copy(F)},this.setViewport=function(ce,Ee,Te,Ce){ce.isVector4?F.set(ce.x,ce.y,ce.z,ce.w):F.set(ce,Ee,Te,Ce),ve.viewport(A.copy(F).multiplyScalar(D).floor())},this.getScissor=function(ce){return ce.copy(k)},this.setScissor=function(ce,Ee,Te,Ce){ce.isVector4?k.set(ce.x,ce.y,ce.z,ce.w):k.set(ce,Ee,Te,Ce),ve.scissor(E.copy(k).multiplyScalar(D).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(ce){ve.setScissorTest(I=ce)},this.setOpaqueSort=function(ce){T=ce},this.setTransparentSort=function(ce){L=ce},this.getClearColor=function(ce){return ce.copy(te.getClearColor())},this.setClearColor=function(){te.setClearColor.apply(te,arguments)},this.getClearAlpha=function(){return te.getClearAlpha()},this.setClearAlpha=function(){te.setClearAlpha.apply(te,arguments)},this.clear=function(ce,Ee,Te){let Ce=0;(ce===void 0||ce)&&(Ce|=16384),(Ee===void 0||Ee)&&(Ce|=256),(Te===void 0||Te)&&(Ce|=1024),X.clear(Ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ve,!1),e.removeEventListener("webglcontextrestored",Pe,!1),ae.dispose(),ue.dispose(),V.dispose(),B.dispose(),j.dispose(),G.dispose(),_e.dispose(),Me.dispose(),Me.removeEventListener("sessionstart",At),Me.removeEventListener("sessionend",nn),H&&(H.dispose(),H=null),qt.stop()};function Ve(ce){ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Pe(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const ce=ye.autoReset,Ee=z.enabled,Te=z.autoUpdate,Ce=z.needsUpdate,Le=z.type;be(),ye.autoReset=ce,z.enabled=Ee,z.autoUpdate=Te,z.needsUpdate=Ce,z.type=Le}function je(ce){const Ee=ce.target;Ee.removeEventListener("dispose",je),Ze(Ee)}function Ze(ce){ft(ce),V.remove(ce)}function ft(ce){const Ee=V.get(ce).programs;Ee!==void 0&&Ee.forEach(function(Te){le.releaseProgram(Te)})}this.renderBufferDirect=function(ce,Ee,Te,Ce,Le,rt){Ee===null&&(Ee=Z);const ct=Le.isMesh&&Le.matrixWorld.determinant()<0,lt=Ln(ce,Ee,Te,Ce,Le);ve.setMaterial(Ce,ct);let wt=Te.index;const Jt=Te.attributes.position;if(wt===null){if(Jt===void 0||Jt.count===0)return}else if(wt.count===0)return;let It=1;Ce.wireframe===!0&&(wt=Y.getWireframeAttribute(Te),It=2),_e.setup(Le,Ce,lt,Te,wt);let Rt,mn=ne;wt!==null&&(Rt=se.get(wt),mn=de,mn.setIndex(Rt));const go=wt!==null?wt.count:Jt.count,Ut=Te.drawRange.start*It,Is=Te.drawRange.count*It,rn=rt!==null?rt.start*It:0,ms=rt!==null?rt.count*It:1/0,it=Math.max(Ut,rn),Ri=Math.min(go,Ut+Is,rn+ms)-1,ks=Math.max(0,Ri-it+1);if(ks!==0){if(Le.isMesh)Ce.wireframe===!0?(ve.setLineWidth(Ce.wireframeLinewidth*J()),mn.setMode(1)):mn.setMode(4);else if(Le.isLine){let hn=Ce.linewidth;hn===void 0&&(hn=1),ve.setLineWidth(hn*J()),Le.isLineSegments?mn.setMode(1):Le.isLineLoop?mn.setMode(2):mn.setMode(3)}else Le.isPoints?mn.setMode(0):Le.isSprite&&mn.setMode(4);if(Le.isInstancedMesh)mn.renderInstances(it,ks,Le.count);else if(Te.isInstancedBufferGeometry){const hn=Math.min(Te.instanceCount,Te._maxInstanceCount);mn.renderInstances(it,ks,hn)}else mn.render(it,ks)}},this.compile=function(ce,Ee){h=ue.get(ce),h.init(),p.push(h),ce.traverseVisible(function(Te){Te.isLight&&Te.layers.test(Ee.layers)&&(h.pushLight(Te),Te.castShadow&&h.pushShadow(Te))}),h.setupLights(g.physicallyCorrectLights),ce.traverse(function(Te){const Ce=Te.material;if(Ce)if(Array.isArray(Ce))for(let Le=0;Le<Ce.length;Le++){const rt=Ce[Le];Ii(rt,ce,Te)}else Ii(Ce,ce,Te)}),p.pop(),h=null};let gt=null;function dt(ce){gt&&gt(ce)}function At(){qt.stop()}function nn(){qt.start()}const qt=new PB;qt.setAnimationLoop(dt),typeof window<"u"&&qt.setContext(window),this.setAnimationLoop=function(ce){gt=ce,Me.setAnimationLoop(ce),ce===null?qt.stop():qt.start()},Me.addEventListener("sessionstart",At),Me.addEventListener("sessionend",nn),this.render=function(ce,Ee){if(Ee!==void 0&&Ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;ce.autoUpdate===!0&&ce.updateMatrixWorld(),Ee.parent===null&&Ee.updateMatrixWorld(),Me.enabled===!0&&Me.isPresenting===!0&&(Me.cameraAutoUpdate===!0&&Me.updateCamera(Ee),Ee=Me.getCamera()),ce.isScene===!0&&ce.onBeforeRender(g,ce,Ee,v),h=ue.get(ce,p.length),h.init(),p.push(h),K.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse),$.setFromProjectionMatrix(K),W=this.localClippingEnabled,N=U.init(this.clippingPlanes,W,Ee),f=ae.get(ce,d.length),f.init(),d.push(f),Dn(ce,Ee,0,g.sortObjects),f.finish(),g.sortObjects===!0&&f.sort(T,L),N===!0&&U.beginShadows();const Te=h.state.shadowsArray;if(z.render(Te,ce,Ee),N===!0&&U.endShadows(),this.info.autoReset===!0&&this.info.reset(),te.render(f,ce),h.setupLights(g.physicallyCorrectLights),Ee.isArrayCamera){const Ce=Ee.cameras;for(let Le=0,rt=Ce.length;Le<rt;Le++){const ct=Ce[Le];Tr(f,ce,ct,ct.viewport)}}else Tr(f,ce,Ee);v!==null&&(R.updateMultisampleRenderTarget(v),R.updateRenderTargetMipmap(v)),ce.isScene===!0&&ce.onAfterRender(g,ce,Ee),ve.buffers.depth.setTest(!0),ve.buffers.depth.setMask(!0),ve.buffers.color.setMask(!0),ve.setPolygonOffset(!1),_e.resetDefaultState(),b=-1,w=null,p.pop(),p.length>0?h=p[p.length-1]:h=null,d.pop(),d.length>0?f=d[d.length-1]:f=null};function Dn(ce,Ee,Te,Ce){if(ce.visible===!1)return;if(ce.layers.test(Ee.layers)){if(ce.isGroup)Te=ce.renderOrder;else if(ce.isLOD)ce.autoUpdate===!0&&ce.update(Ee);else if(ce.isLight)h.pushLight(ce),ce.castShadow&&h.pushShadow(ce);else if(ce.isSprite){if(!ce.frustumCulled||$.intersectsSprite(ce)){Ce&&ee.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(K);const ct=G.update(ce),lt=ce.material;lt.visible&&f.push(ce,ct,lt,Te,ee.z,null)}}else if((ce.isMesh||ce.isLine||ce.isPoints)&&(ce.isSkinnedMesh&&ce.skeleton.frame!==ye.render.frame&&(ce.skeleton.update(),ce.skeleton.frame=ye.render.frame),!ce.frustumCulled||$.intersectsObject(ce))){Ce&&ee.setFromMatrixPosition(ce.matrixWorld).applyMatrix4(K);const ct=G.update(ce),lt=ce.material;if(Array.isArray(lt)){const wt=ct.groups;for(let Jt=0,It=wt.length;Jt<It;Jt++){const Rt=wt[Jt],mn=lt[Rt.materialIndex];mn&&mn.visible&&f.push(ce,ct,mn,Te,ee.z,Rt)}}else lt.visible&&f.push(ce,ct,lt,Te,ee.z,null)}}const rt=ce.children;for(let ct=0,lt=rt.length;ct<lt;ct++)Dn(rt[ct],Ee,Te,Ce)}function Tr(ce,Ee,Te,Ce){const Le=ce.opaque,rt=ce.transmissive,ct=ce.transparent;h.setupLightsView(Te),rt.length>0&&cn(Le,Ee,Te),Ce&&ve.viewport(A.copy(Ce)),Le.length>0&&Tn(Le,Ee,Te),rt.length>0&&Tn(rt,Ee,Te),ct.length>0&&Tn(ct,Ee,Te)}function cn(ce,Ee,Te){if(H===null){const ct=o===!0&&he.isWebGL2===!0?SB:wa;H=new ct(1024,1024,{generateMipmaps:!0,type:pe.convert(ll)!==null?ll:Hs,minFilter:Ld,magFilter:mr,wrapS:xi,wrapT:xi})}const Ce=g.getRenderTarget();g.setRenderTarget(H),g.clear();const Le=g.toneMapping;g.toneMapping=qc,Tn(ce,Ee,Te),g.toneMapping=Le,R.updateMultisampleRenderTarget(H),R.updateRenderTargetMipmap(H),g.setRenderTarget(Ce)}function Tn(ce,Ee,Te){const Ce=Ee.isScene===!0?Ee.overrideMaterial:null;for(let Le=0,rt=ce.length;Le<rt;Le++){const ct=ce[Le],lt=ct.object,wt=ct.geometry,Jt=Ce===null?ct.material:Ce,It=ct.group;lt.layers.test(Te.layers)&&fn(lt,Ee,Te,wt,Jt,It)}}function fn(ce,Ee,Te,Ce,Le,rt){ce.onBeforeRender(g,Ee,Te,Ce,Le,rt),ce.modelViewMatrix.multiplyMatrices(Te.matrixWorldInverse,ce.matrixWorld),ce.normalMatrix.getNormalMatrix(ce.modelViewMatrix),Le.onBeforeRender(g,Ee,Te,Ce,ce,rt),Le.transparent===!0&&Le.side===_r?(Le.side=rr,Le.needsUpdate=!0,g.renderBufferDirect(Te,Ee,Ce,Le,ce,rt),Le.side=Ou,Le.needsUpdate=!0,g.renderBufferDirect(Te,Ee,Ce,Le,ce,rt),Le.side=_r):g.renderBufferDirect(Te,Ee,Ce,Le,ce,rt),ce.onAfterRender(g,Ee,Te,Ce,Le,rt)}function Ii(ce,Ee,Te){Ee.isScene!==!0&&(Ee=Z);const Ce=V.get(ce),Le=h.state.lights,rt=h.state.shadowsArray,ct=Le.state.version,lt=le.getParameters(ce,Le.state,rt,Ee,Te),wt=le.getProgramCacheKey(lt);let Jt=Ce.programs;Ce.environment=ce.isMeshStandardMaterial?Ee.environment:null,Ce.fog=Ee.fog,Ce.envMap=(ce.isMeshStandardMaterial?j:B).get(ce.envMap||Ce.environment),Jt===void 0&&(ce.addEventListener("dispose",je),Jt=new Map,Ce.programs=Jt);let It=Jt.get(wt);if(It!==void 0){if(Ce.currentProgram===It&&Ce.lightsStateVersion===ct)return Pn(ce,lt),It}else lt.uniforms=le.getUniforms(ce),ce.onBuild(Te,lt,g),ce.onBeforeCompile(lt,g),It=le.acquireProgram(lt,wt),Jt.set(wt,It),Ce.uniforms=lt.uniforms;const Rt=Ce.uniforms;(!ce.isShaderMaterial&&!ce.isRawShaderMaterial||ce.clipping===!0)&&(Rt.clippingPlanes=U.uniform),Pn(ce,lt),Ce.needsLights=ni(ce),Ce.lightsStateVersion=ct,Ce.needsLights&&(Rt.ambientLightColor.value=Le.state.ambient,Rt.lightProbe.value=Le.state.probe,Rt.directionalLights.value=Le.state.directional,Rt.directionalLightShadows.value=Le.state.directionalShadow,Rt.spotLights.value=Le.state.spot,Rt.spotLightShadows.value=Le.state.spotShadow,Rt.rectAreaLights.value=Le.state.rectArea,Rt.ltc_1.value=Le.state.rectAreaLTC1,Rt.ltc_2.value=Le.state.rectAreaLTC2,Rt.pointLights.value=Le.state.point,Rt.pointLightShadows.value=Le.state.pointShadow,Rt.hemisphereLights.value=Le.state.hemi,Rt.directionalShadowMap.value=Le.state.directionalShadowMap,Rt.directionalShadowMatrix.value=Le.state.directionalShadowMatrix,Rt.spotShadowMap.value=Le.state.spotShadowMap,Rt.spotShadowMatrix.value=Le.state.spotShadowMatrix,Rt.pointShadowMap.value=Le.state.pointShadowMap,Rt.pointShadowMatrix.value=Le.state.pointShadowMatrix);const mn=It.getUniforms(),go=Cu.seqWithValue(mn.seq,Rt);return Ce.currentProgram=It,Ce.uniformsList=go,It}function Pn(ce,Ee){const Te=V.get(ce);Te.outputEncoding=Ee.outputEncoding,Te.instancing=Ee.instancing,Te.skinning=Ee.skinning,Te.morphTargets=Ee.morphTargets,Te.morphNormals=Ee.morphNormals,Te.morphTargetsCount=Ee.morphTargetsCount,Te.numClippingPlanes=Ee.numClippingPlanes,Te.numIntersection=Ee.numClipIntersection,Te.vertexAlphas=Ee.vertexAlphas,Te.vertexTangents=Ee.vertexTangents}function Ln(ce,Ee,Te,Ce,Le){Ee.isScene!==!0&&(Ee=Z),R.resetTextureUnits();const rt=Ee.fog,ct=Ce.isMeshStandardMaterial?Ee.environment:null,lt=v===null?g.outputEncoding:v.texture.encoding,wt=(Ce.isMeshStandardMaterial?j:B).get(Ce.envMap||ct),Jt=Ce.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,It=!!Ce.normalMap&&!!Te.attributes.tangent,Rt=!!Te.morphAttributes.position,mn=!!Te.morphAttributes.normal,go=Te.morphAttributes.position?Te.morphAttributes.position.length:0,Ut=V.get(Ce),Is=h.state.lights;if(N===!0&&(W===!0||ce!==w)){const ur=ce===w&&Ce.id===b;U.setState(Ce,ce,ur)}let rn=!1;Ce.version===Ut.__version?(Ut.needsLights&&Ut.lightsStateVersion!==Is.state.version||Ut.outputEncoding!==lt||Le.isInstancedMesh&&Ut.instancing===!1||!Le.isInstancedMesh&&Ut.instancing===!0||Le.isSkinnedMesh&&Ut.skinning===!1||!Le.isSkinnedMesh&&Ut.skinning===!0||Ut.envMap!==wt||Ce.fog&&Ut.fog!==rt||Ut.numClippingPlanes!==void 0&&(Ut.numClippingPlanes!==U.numPlanes||Ut.numIntersection!==U.numIntersection)||Ut.vertexAlphas!==Jt||Ut.vertexTangents!==It||Ut.morphTargets!==Rt||Ut.morphNormals!==mn||he.isWebGL2===!0&&Ut.morphTargetsCount!==go)&&(rn=!0):(rn=!0,Ut.__version=Ce.version);let ms=Ut.currentProgram;rn===!0&&(ms=Ii(Ce,Ee,Le));let it=!1,Ri=!1,ks=!1;const hn=ms.getUniforms(),$o=Ut.uniforms;if(ve.useProgram(ms.program)&&(it=!0,Ri=!0,ks=!0),Ce.id!==b&&(b=Ce.id,Ri=!0),it||w!==ce){if(hn.setValue(X,"projectionMatrix",ce.projectionMatrix),he.logarithmicDepthBuffer&&hn.setValue(X,"logDepthBufFC",2/(Math.log(ce.far+1)/Math.LN2)),w!==ce&&(w=ce,Ri=!0,ks=!0),Ce.isShaderMaterial||Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshStandardMaterial||Ce.envMap){const ur=hn.map.cameraPosition;ur!==void 0&&ur.setValue(X,ee.setFromMatrixPosition(ce.matrixWorld))}(Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshLambertMaterial||Ce.isMeshBasicMaterial||Ce.isMeshStandardMaterial||Ce.isShaderMaterial)&&hn.setValue(X,"isOrthographic",ce.isOrthographicCamera===!0),(Ce.isMeshPhongMaterial||Ce.isMeshToonMaterial||Ce.isMeshLambertMaterial||Ce.isMeshBasicMaterial||Ce.isMeshStandardMaterial||Ce.isShaderMaterial||Ce.isShadowMaterial||Le.isSkinnedMesh)&&hn.setValue(X,"viewMatrix",ce.matrixWorldInverse)}if(Le.isSkinnedMesh){hn.setOptional(X,Le,"bindMatrix"),hn.setOptional(X,Le,"bindMatrixInverse");const ur=Le.skeleton;ur&&(he.floatVertexTextures?(ur.boneTexture===null&&ur.computeBoneTexture(),hn.setValue(X,"boneTexture",ur.boneTexture,R),hn.setValue(X,"boneTextureSize",ur.boneTextureSize)):hn.setOptional(X,ur,"boneMatrices"))}return!!Te&&(Te.morphAttributes.position!==void 0||Te.morphAttributes.normal!==void 0)&&fe.update(Le,Te,Ce,ms),(Ri||Ut.receiveShadow!==Le.receiveShadow)&&(Ut.receiveShadow=Le.receiveShadow,hn.setValue(X,"receiveShadow",Le.receiveShadow)),Ri&&(hn.setValue(X,"toneMappingExposure",g.toneMappingExposure),Ut.needsLights&&ki($o,ks),rt&&Ce.fog&&ge.refreshFogUniforms($o,rt),ge.refreshMaterialUniforms($o,Ce,D,M,H),Cu.upload(X,Ut.uniformsList,$o,R)),Ce.isShaderMaterial&&Ce.uniformsNeedUpdate===!0&&(Cu.upload(X,Ut.uniformsList,$o,R),Ce.uniformsNeedUpdate=!1),Ce.isSpriteMaterial&&hn.setValue(X,"center",Le.center),hn.setValue(X,"modelViewMatrix",Le.modelViewMatrix),hn.setValue(X,"normalMatrix",Le.normalMatrix),hn.setValue(X,"modelMatrix",Le.matrixWorld),ms}function ki(ce,Ee){ce.ambientLightColor.needsUpdate=Ee,ce.lightProbe.needsUpdate=Ee,ce.directionalLights.needsUpdate=Ee,ce.directionalLightShadows.needsUpdate=Ee,ce.pointLights.needsUpdate=Ee,ce.pointLightShadows.needsUpdate=Ee,ce.spotLights.needsUpdate=Ee,ce.spotLightShadows.needsUpdate=Ee,ce.rectAreaLights.needsUpdate=Ee,ce.hemisphereLights.needsUpdate=Ee}function ni(ce){return ce.isMeshLambertMaterial||ce.isMeshToonMaterial||ce.isMeshPhongMaterial||ce.isMeshStandardMaterial||ce.isShadowMaterial||ce.isShaderMaterial&&ce.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return v},this.setRenderTarget=function(ce,Ee=0,Te=0){v=ce,_=Ee,m=Te,ce&&V.get(ce).__webglFramebuffer===void 0&&R.setupRenderTarget(ce);let Ce=null,Le=!1,rt=!1;if(ce){const lt=ce.texture;(lt.isDataTexture3D||lt.isDataTexture2DArray)&&(rt=!0);const wt=V.get(ce).__webglFramebuffer;ce.isWebGLCubeRenderTarget?(Ce=wt[Ee],Le=!0):ce.isWebGLMultisampleRenderTarget?Ce=V.get(ce).__webglMultisampledFramebuffer:Ce=wt,A.copy(ce.viewport),E.copy(ce.scissor),S=ce.scissorTest}else A.copy(F).multiplyScalar(D).floor(),E.copy(k).multiplyScalar(D).floor(),S=I;if(ve.bindFramebuffer(36160,Ce)&&he.drawBuffers){let lt=!1;if(ce)if(ce.isWebGLMultipleRenderTargets){const wt=ce.texture;if(O.length!==wt.length||O[0]!==36064){for(let Jt=0,It=wt.length;Jt<It;Jt++)O[Jt]=36064+Jt;O.length=wt.length,lt=!0}}else(O.length!==1||O[0]!==36064)&&(O[0]=36064,O.length=1,lt=!0);else(O.length!==1||O[0]!==1029)&&(O[0]=1029,O.length=1,lt=!0);lt&&(he.isWebGL2?X.drawBuffers(O):oe.get("WEBGL_draw_buffers").drawBuffersWEBGL(O))}if(ve.viewport(A),ve.scissor(E),ve.setScissorTest(S),Le){const lt=V.get(ce.texture);X.framebufferTexture2D(36160,36064,34069+Ee,lt.__webglTexture,Te)}else if(rt){const lt=V.get(ce.texture),wt=Ee||0;X.framebufferTextureLayer(36160,36064,lt.__webglTexture,Te||0,wt)}b=-1},this.readRenderTargetPixels=function(ce,Ee,Te,Ce,Le,rt,ct){if(!(ce&&ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let lt=V.get(ce).__webglFramebuffer;if(ce.isWebGLCubeRenderTarget&&ct!==void 0&&(lt=lt[ct]),lt){ve.bindFramebuffer(36160,lt);try{const wt=ce.texture,Jt=wt.format,It=wt.type;if(Jt!==ci&&pe.convert(Jt)!==X.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Rt=It===ll&&(oe.has("EXT_color_buffer_half_float")||he.isWebGL2&&oe.has("EXT_color_buffer_float"));if(It!==Hs&&pe.convert(It)!==X.getParameter(35738)&&!(It===Ao&&(he.isWebGL2||oe.has("OES_texture_float")||oe.has("WEBGL_color_buffer_float")))&&!Rt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}X.checkFramebufferStatus(36160)===36053?Ee>=0&&Ee<=ce.width-Ce&&Te>=0&&Te<=ce.height-Le&&X.readPixels(Ee,Te,Ce,Le,pe.convert(Jt),pe.convert(It),rt):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const wt=v!==null?V.get(v).__webglFramebuffer:null;ve.bindFramebuffer(36160,wt)}}},this.copyFramebufferToTexture=function(ce,Ee,Te=0){const Ce=Math.pow(2,-Te),Le=Math.floor(Ee.image.width*Ce),rt=Math.floor(Ee.image.height*Ce);let ct=pe.convert(Ee.format);he.isWebGL2&&(ct===6407&&(ct=32849),ct===6408&&(ct=32856)),R.setTexture2D(Ee,0),X.copyTexImage2D(3553,Te,ct,ce.x,ce.y,Le,rt,0),ve.unbindTexture()},this.copyTextureToTexture=function(ce,Ee,Te,Ce=0){const Le=Ee.image.width,rt=Ee.image.height,ct=pe.convert(Te.format),lt=pe.convert(Te.type);R.setTexture2D(Te,0),X.pixelStorei(37440,Te.flipY),X.pixelStorei(37441,Te.premultiplyAlpha),X.pixelStorei(3317,Te.unpackAlignment),Ee.isDataTexture?X.texSubImage2D(3553,Ce,ce.x,ce.y,Le,rt,ct,lt,Ee.image.data):Ee.isCompressedTexture?X.compressedTexSubImage2D(3553,Ce,ce.x,ce.y,Ee.mipmaps[0].width,Ee.mipmaps[0].height,ct,Ee.mipmaps[0].data):X.texSubImage2D(3553,Ce,ce.x,ce.y,ct,lt,Ee.image),Ce===0&&Te.generateMipmaps&&X.generateMipmap(3553),ve.unbindTexture()},this.copyTextureToTexture3D=function(ce,Ee,Te,Ce,Le=0){if(g.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const rt=ce.max.x-ce.min.x+1,ct=ce.max.y-ce.min.y+1,lt=ce.max.z-ce.min.z+1,wt=pe.convert(Ce.format),Jt=pe.convert(Ce.type);let It;if(Ce.isDataTexture3D)R.setTexture3D(Ce,0),It=32879;else if(Ce.isDataTexture2DArray)R.setTexture2DArray(Ce,0),It=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}X.pixelStorei(37440,Ce.flipY),X.pixelStorei(37441,Ce.premultiplyAlpha),X.pixelStorei(3317,Ce.unpackAlignment);const Rt=X.getParameter(3314),mn=X.getParameter(32878),go=X.getParameter(3316),Ut=X.getParameter(3315),Is=X.getParameter(32877),rn=Te.isCompressedTexture?Te.mipmaps[0]:Te.image;X.pixelStorei(3314,rn.width),X.pixelStorei(32878,rn.height),X.pixelStorei(3316,ce.min.x),X.pixelStorei(3315,ce.min.y),X.pixelStorei(32877,ce.min.z),Te.isDataTexture||Te.isDataTexture3D?X.texSubImage3D(It,Le,Ee.x,Ee.y,Ee.z,rt,ct,lt,wt,Jt,rn.data):Te.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),X.compressedTexSubImage3D(It,Le,Ee.x,Ee.y,Ee.z,rt,ct,lt,wt,rn.data)):X.texSubImage3D(It,Le,Ee.x,Ee.y,Ee.z,rt,ct,lt,wt,Jt,rn),X.pixelStorei(3314,Rt),X.pixelStorei(32878,mn),X.pixelStorei(3316,go),X.pixelStorei(3315,Ut),X.pixelStorei(32877,Is),Le===0&&Ce.generateMipmaps&&X.generateMipmap(It),ve.unbindTexture()},this.initTexture=function(ce){R.setTexture2D(ce,0),ve.unbindTexture()},this.resetState=function(){_=0,m=0,v=null,ve.reset(),_e.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}gn.prototype.isWebGLRenderer=!0;class Oq extends gn{}Oq.prototype.isWebGL1Renderer=!0;class Zg extends Qt{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}Zg.prototype.isScene=!0;class $m{constructor(e,n){this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=Jg,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Lo()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Lo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Lo()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}$m.prototype.isInterleavedBuffer=!0;const cr=new q;class Qg{constructor(e,n,r,i=!1){this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)cr.x=this.getX(n),cr.y=this.getY(n),cr.z=this.getZ(n),cr.applyMatrix4(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)cr.x=this.getX(n),cr.y=this.getY(n),cr.z=this.getZ(n),cr.applyNormalMatrix(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)cr.x=this.getX(n),cr.y=this.getY(n),cr.z=this.getZ(n),cr.transformDirection(e),this.setXYZ(n,cr.x,cr.y,cr.z);return this}setX(e,n){return this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Rn(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}Qg.prototype.isInterleavedBufferAttribute=!0;class HB extends Pi{constructor(e){super(),this.type="SpriteMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}HB.prototype.isSpriteMaterial=!0;let qf;const wp=new q,Jf=new q,Kf=new q,Zf=new Ie,bp=new Ie,WB=new st,i0=new q,xp=new q,s0=new q,PP=new Ie,Ab=new Ie,LP=new Ie;class Bq extends Qt{constructor(e){if(super(),this.type="Sprite",qf===void 0){qf=new Gt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new $m(n,5);qf.setIndex([0,1,2,0,2,3]),qf.setAttribute("position",new Qg(r,3,0,!1)),qf.setAttribute("uv",new Qg(r,2,3,!1))}this.geometry=qf,this.material=e!==void 0?e:new HB,this.center=new Ie(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Jf.setFromMatrixScale(this.matrixWorld),WB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Jf.multiplyScalar(-Kf.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;o0(i0.set(-.5,-.5,0),Kf,o,Jf,i,s),o0(xp.set(.5,-.5,0),Kf,o,Jf,i,s),o0(s0.set(.5,.5,0),Kf,o,Jf,i,s),PP.set(0,0),Ab.set(1,0),LP.set(1,1);let a=e.ray.intersectTriangle(i0,xp,s0,!1,wp);if(a===null&&(o0(xp.set(-.5,.5,0),Kf,o,Jf,i,s),Ab.set(0,1),a=e.ray.intersectTriangle(i0,s0,xp,!1,wp),a===null))return;const l=e.ray.origin.distanceTo(wp);l<e.near||l>e.far||n.push({distance:l,point:wp.clone(),uv:on.getUV(wp,i0,xp,s0,PP,Ab,LP,new Ie),face:null,object:this})}copy(e){return super.copy(e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}Bq.prototype.isSprite=!0;function o0(t,e,n,r,i,s){Zf.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(bp.x=s*Zf.x-i*Zf.y,bp.y=i*Zf.x+s*Zf.y):bp.copy(Zf),t.copy(e),t.x+=bp.x,t.y+=bp.y,t.applyMatrix4(WB)}const FP=new q,IP=new $t,kP=new $t,Nq=new q,RP=new st;class $B extends Fe{constructor(e,n){super(e,n),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new st,this.bindMatrixInverse=new st}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new $t,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.x=n.getX(r),e.y=n.getY(r),e.z=n.getZ(r),e.w=n.getW(r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,n){const r=this.skeleton,i=this.geometry;IP.fromBufferAttribute(i.attributes.skinIndex,e),kP.fromBufferAttribute(i.attributes.skinWeight,e),FP.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=kP.getComponent(s);if(o!==0){const a=IP.getComponent(s);RP.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(Nq.copy(FP).applyMatrix4(RP),o)}}return n.applyMatrix4(this.bindMatrixInverse)}}$B.prototype.isSkinnedMesh=!0;class Vq extends Qt{constructor(){super(),this.type="Bone"}}Vq.prototype.isBone=!0;class XB extends Qr{constructor(e=null,n=1,r=1,i,s,o,a,l,u=mr,c=mr,f,h){super(null,o,a,l,u,c,i,s,f,h),this.image={data:e,width:n,height:r},this.magFilter=u,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}XB.prototype.isDataTexture=!0;class c1 extends Rn{constructor(e,n,r,i=1){typeof r=="number"&&(i=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,n,r),this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}c1.prototype.isInstancedBufferAttribute=!0;const OP=new st,BP=new st,a0=[],Sp=new Fe;class zq extends Fe{constructor(e,n,r){super(e,n),this.instanceMatrix=new c1(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Sp.geometry=this.geometry,Sp.material=this.material,Sp.material!==void 0)for(let s=0;s<i;s++){this.getMatrixAt(s,OP),BP.multiplyMatrices(r,OP),Sp.matrixWorld=BP,Sp.raycast(e,a0);for(let o=0,a=a0.length;o<a;o++){const l=a0[o];l.instanceId=s,l.object=this,n.push(l)}a0.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new c1(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}zq.prototype.isInstancedMesh=!0;class Ks extends Pi{constructor(e){super(),this.type="LineBasicMaterial",this.color=new ut(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}Ks.prototype.isLineBasicMaterial=!0;const NP=new q,VP=new q,zP=new st,Eb=new Ju,l0=new qu;class Pr extends Qt{constructor(e=new Gt,n=new Ks){super(),this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)NP.fromBufferAttribute(n,i-1),VP.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=NP.distanceTo(VP);e.setAttribute("lineDistance",new Vt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),l0.copy(r.boundingSphere),l0.applyMatrix4(i),l0.radius+=s,e.ray.intersectsSphere(l0)===!1)return;zP.copy(i).invert(),Eb.copy(e.ray).applyMatrix4(zP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new q,c=new q,f=new q,h=new q,d=this.isLineSegments?2:1;if(r.isBufferGeometry){const p=r.index,x=r.attributes.position;if(p!==null){const _=Math.max(0,o.start),m=Math.min(p.count,o.start+o.count);for(let v=_,b=m-1;v<b;v+=d){const w=p.getX(v),A=p.getX(v+1);if(u.fromBufferAttribute(x,w),c.fromBufferAttribute(x,A),Eb.distanceSqToSegment(u,c,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||n.push({distance:S,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else{const _=Math.max(0,o.start),m=Math.min(x.count,o.start+o.count);for(let v=_,b=m-1;v<b;v+=d){if(u.fromBufferAttribute(x,v),c.fromBufferAttribute(x,v+1),Eb.distanceSqToSegment(u,c,h,f)>l)continue;h.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(h);A<e.near||A>e.far||n.push({distance:A,point:f.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}else r.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const n=e.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const n=e.morphTargets;n!==void 0&&n.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Pr.prototype.isLine=!0;const GP=new q,UP=new q;class em extends Pr{constructor(e,n){super(e,n),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)GP.fromBufferAttribute(n,i),UP.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+GP.distanceTo(UP);e.setAttribute("lineDistance",new Vt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}em.prototype.isLineSegments=!0;class Gq extends Pr{constructor(e,n){super(e,n),this.type="LineLoop"}}Gq.prototype.isLineLoop=!0;class YB extends Pi{constructor(e){super(),this.type="PointsMaterial",this.color=new ut(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}YB.prototype.isPointsMaterial=!0;const HP=new st,yA=new Ju,u0=new qu,c0=new q;class Uq extends Qt{constructor(e=new Gt,n=new YB){super(),this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),u0.copy(r.boundingSphere),u0.applyMatrix4(i),u0.radius+=s,e.ray.intersectsSphere(u0)===!1)return;HP.copy(i).invert(),yA.copy(e.ray).applyMatrix4(HP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a;if(r.isBufferGeometry){const u=r.index,f=r.attributes.position;if(u!==null){const h=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let p=h,g=d;p<g;p++){const x=u.getX(p);c0.fromBufferAttribute(f,x),WP(c0,x,l,i,e,n,this)}}else{const h=Math.max(0,o.start),d=Math.min(f.count,o.start+o.count);for(let p=h,g=d;p<g;p++)c0.fromBufferAttribute(f,p),WP(c0,p,l,i,e,n,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const n=e.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}else{const n=e.morphTargets;n!==void 0&&n.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Uq.prototype.isPoints=!0;function WP(t,e,n,r,i,s,o){const a=yA.distanceSqToPoint(t);if(a<n){const l=new q;yA.closestPointToPoint(t,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Hq extends Qr{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.format=a!==void 0?a:_a,this.minFilter=o!==void 0?o:kn,this.magFilter=s!==void 0?s:kn,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}Hq.prototype.isVideoTexture=!0;class Wq extends Qr{constructor(e,n,r,i,s,o,a,l,u,c,f,h){super(null,o,a,l,u,c,i,s,f,h),this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}Wq.prototype.isCompressedTexture=!0;class $q extends Qr{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.needsUpdate=!0}}$q.prototype.isCanvasTexture=!0;class Xq extends Qr{constructor(e,n,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:Nh,c!==Nh&&c!==Yg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Nh&&(r=a1),r===void 0&&c===Yg&&(r=pg),super(null,i,s,o,a,l,c,r,u),this.image={width:e,height:n},this.magFilter=a!==void 0?a:mr,this.minFilter=l!==void 0?l:mr,this.flipY=!1,this.generateMipmaps=!1}}Xq.prototype.isDepthTexture=!0;class D_ extends Gt{constructor(e=1,n=8,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new q,c=new Ie;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=n;f++,h+=3){const d=r+f/n*i;u.x=e*Math.cos(d),u.y=e*Math.sin(d),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=n;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Vt(o,3)),this.setAttribute("normal",new Vt(a,3)),this.setAttribute("uv",new Vt(l,2))}static fromJSON(e){return new D_(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class oi extends Gt{constructor(e=1,n=1,r=1,i=8,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],f=[],h=[],d=[];let p=0;const g=[],x=r/2;let _=0;m(),o===!1&&(e>0&&v(!0),n>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Vt(f,3)),this.setAttribute("normal",new Vt(h,3)),this.setAttribute("uv",new Vt(d,2));function m(){const b=new q,w=new q;let A=0;const E=(n-e)/r;for(let S=0;S<=s;S++){const C=[],M=S/s,D=M*(n-e)+e;for(let T=0;T<=i;T++){const L=T/i,F=L*l+a,k=Math.sin(F),I=Math.cos(F);w.x=D*k,w.y=-M*r+x,w.z=D*I,f.push(w.x,w.y,w.z),b.set(k,E,I).normalize(),h.push(b.x,b.y,b.z),d.push(L,1-M),C.push(p++)}g.push(C)}for(let S=0;S<i;S++)for(let C=0;C<s;C++){const M=g[C][S],D=g[C+1][S],T=g[C+1][S+1],L=g[C][S+1];c.push(M,D,L),c.push(D,T,L),A+=6}u.addGroup(_,A,0),_+=A}function v(b){const w=p,A=new Ie,E=new q;let S=0;const C=b===!0?e:n,M=b===!0?1:-1;for(let T=1;T<=i;T++)f.push(0,x*M,0),h.push(0,M,0),d.push(.5,.5),p++;const D=p;for(let T=0;T<=i;T++){const F=T/i*l+a,k=Math.cos(F),I=Math.sin(F);E.x=C*I,E.y=x*M,E.z=C*k,f.push(E.x,E.y,E.z),h.push(0,M,0),A.x=k*.5+.5,A.y=I*.5*M+.5,d.push(A.x,A.y),p++}for(let T=0;T<i;T++){const L=w+T,F=D+T;b===!0?c.push(F,F+1,L):c.push(F+1,F,L),S+=3}u.addGroup(_,S,b===!0?1:2),_+=S}}static fromJSON(e){return new oi(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class yM extends Gt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new Vt(s,3)),this.setAttribute("normal",new Vt(s.slice(),3)),this.setAttribute("uv",new Vt(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(m){const v=new q,b=new q,w=new q;for(let A=0;A<n.length;A+=3)d(n[A+0],v),d(n[A+1],b),d(n[A+2],w),l(v,b,w,m)}function l(m,v,b,w){const A=w+1,E=[];for(let S=0;S<=A;S++){E[S]=[];const C=m.clone().lerp(b,S/A),M=v.clone().lerp(b,S/A),D=A-S;for(let T=0;T<=D;T++)T===0&&S===A?E[S][T]=C:E[S][T]=C.clone().lerp(M,T/D)}for(let S=0;S<A;S++)for(let C=0;C<2*(A-S)-1;C++){const M=Math.floor(C/2);C%2===0?(h(E[S][M+1]),h(E[S+1][M]),h(E[S][M])):(h(E[S][M+1]),h(E[S+1][M+1]),h(E[S+1][M]))}}function u(m){const v=new q;for(let b=0;b<s.length;b+=3)v.x=s[b+0],v.y=s[b+1],v.z=s[b+2],v.normalize().multiplyScalar(m),s[b+0]=v.x,s[b+1]=v.y,s[b+2]=v.z}function c(){const m=new q;for(let v=0;v<s.length;v+=3){m.x=s[v+0],m.y=s[v+1],m.z=s[v+2];const b=x(m)/2/Math.PI+.5,w=_(m)/Math.PI+.5;o.push(b,1-w)}p(),f()}function f(){for(let m=0;m<o.length;m+=6){const v=o[m+0],b=o[m+2],w=o[m+4],A=Math.max(v,b,w),E=Math.min(v,b,w);A>.9&&E<.1&&(v<.2&&(o[m+0]+=1),b<.2&&(o[m+2]+=1),w<.2&&(o[m+4]+=1))}}function h(m){s.push(m.x,m.y,m.z)}function d(m,v){const b=m*3;v.x=e[b+0],v.y=e[b+1],v.z=e[b+2]}function p(){const m=new q,v=new q,b=new q,w=new q,A=new Ie,E=new Ie,S=new Ie;for(let C=0,M=0;C<s.length;C+=9,M+=6){m.set(s[C+0],s[C+1],s[C+2]),v.set(s[C+3],s[C+4],s[C+5]),b.set(s[C+6],s[C+7],s[C+8]),A.set(o[M+0],o[M+1]),E.set(o[M+2],o[M+3]),S.set(o[M+4],o[M+5]),w.copy(m).add(v).add(b).divideScalar(3);const D=x(w);g(A,M+0,m,D),g(E,M+2,v,D),g(S,M+4,b,D)}}function g(m,v,b,w){w<0&&m.x===1&&(o[v]=m.x-1),b.x===0&&b.z===0&&(o[v]=w/2/Math.PI+.5)}function x(m){return Math.atan2(m.z,-m.x)}function _(m){return Math.atan2(-m.y,Math.sqrt(m.x*m.x+m.z*m.z))}}static fromJSON(e){return new yM(e.vertices,e.indices,e.radius,e.details)}}const f0=new q,h0=new q,Cb=new q,d0=new on;class $P extends Gt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(Vh*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),h={},d=[];for(let p=0;p<l;p+=3){o?(u[0]=o.getX(p),u[1]=o.getX(p+1),u[2]=o.getX(p+2)):(u[0]=p,u[1]=p+1,u[2]=p+2);const{a:g,b:x,c:_}=d0;if(g.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),_.fromBufferAttribute(a,u[2]),d0.getNormal(Cb),f[0]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,f[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,f[2]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let m=0;m<3;m++){const v=(m+1)%3,b=f[m],w=f[v],A=d0[c[m]],E=d0[c[v]],S=`${b}_${w}`,C=`${w}_${b}`;C in h&&h[C]?(Cb.dot(h[C].normal)<=s&&(d.push(A.x,A.y,A.z),d.push(E.x,E.y,E.z)),h[C]=null):S in h||(h[S]={index0:u[m],index1:u[v],normal:Cb.clone()})}}for(const p in h)if(h[p]){const{index0:g,index1:x}=h[p];f0.fromBufferAttribute(a,g),h0.fromBufferAttribute(a,x),d.push(f0.x,f0.y,f0.z),d.push(h0.x,h0.y,h0.z)}this.setAttribute("position",new Vt(d,3))}}}class Zs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],h=r[i+1]-c,d=(o-c)/h;return(i+d)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new Ie:new q);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new q,i=[],s=[],o=[],a=new q,l=new st;for(let d=0;d<=e;d++){const p=d/e;i[d]=this.getTangentAt(p,new q)}s[0]=new q,o[0]=new q;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),f=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),f<=u&&(u=f,r.set(0,1,0)),h<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const p=Math.acos(wi(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,p))}o[d].crossVectors(i[d],s[d])}if(n===!0){let d=Math.acos(wi(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(i[p],d*p)),o[p].crossVectors(i[p],s[p])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class T_ extends Zs{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new Ie,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,d=u-this.aY;l=h*c-d*f+this.aX,u=h*f+d*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}T_.prototype.isEllipseCurve=!0;class jB extends T_{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.type="ArcCurve"}}jB.prototype.isArcCurve=!0;function _M(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,f){let h=(o-s)/u-(a-s)/(u+c)+(a-o)/c,d=(a-o)/c-(l-o)/(c+f)+(l-a)/f;h*=c,d*=c,i(o,a,h,d)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const p0=new q,Mb=new _M,Db=new _M,Tb=new _M;class qB extends Zs{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new q){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(p0.subVectors(i[0],i[1]).add(i[0]),u=p0);const f=i[a%s],h=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(p0.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=p0),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(f),d),g=Math.pow(f.distanceToSquared(h),d),x=Math.pow(h.distanceToSquared(c),d);g<1e-4&&(g=1),p<1e-4&&(p=g),x<1e-4&&(x=g),Mb.initNonuniformCatmullRom(u.x,f.x,h.x,c.x,p,g,x),Db.initNonuniformCatmullRom(u.y,f.y,h.y,c.y,p,g,x),Tb.initNonuniformCatmullRom(u.z,f.z,h.z,c.z,p,g,x)}else this.curveType==="catmullrom"&&(Mb.initCatmullRom(u.x,f.x,h.x,c.x,this.tension),Db.initCatmullRom(u.y,f.y,h.y,c.y,this.tension),Tb.initCatmullRom(u.z,f.z,h.z,c.z,this.tension));return r.set(Mb.calc(l),Db.calc(l),Tb.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new q().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}qB.prototype.isCatmullRomCurve3=!0;function XP(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function Yq(t,e){const n=1-t;return n*n*e}function jq(t,e){return 2*(1-t)*t*e}function qq(t,e){return t*t*e}function mg(t,e,n,r){return Yq(t,e)+jq(t,n)+qq(t,r)}function Jq(t,e){const n=1-t;return n*n*n*e}function Kq(t,e){const n=1-t;return 3*n*n*t*e}function Zq(t,e){return 3*(1-t)*t*t*e}function Qq(t,e){return t*t*t*e}function vg(t,e,n,r,i){return Jq(t,e)+Kq(t,n)+Zq(t,r)+Qq(t,i)}class wM extends Zs{constructor(e=new Ie,n=new Ie,r=new Ie,i=new Ie){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new Ie){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(vg(e,i.x,s.x,o.x,a.x),vg(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}wM.prototype.isCubicBezierCurve=!0;class JB extends Zs{constructor(e=new q,n=new q,r=new q,i=new q){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new q){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(vg(e,i.x,s.x,o.x,a.x),vg(e,i.y,s.y,o.y,a.y),vg(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}JB.prototype.isCubicBezierCurve3=!0;class P_ extends Zs{constructor(e=new Ie,n=new Ie){super(),this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new Ie){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n){const r=n||new Ie;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}P_.prototype.isLineCurve=!0;class eJ extends Zs{constructor(e=new q,n=new q){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=n}getPoint(e,n=new q){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class bM extends Zs{constructor(e=new Ie,n=new Ie,r=new Ie){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new Ie){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(mg(e,i.x,s.x,o.x),mg(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}bM.prototype.isQuadraticBezierCurve=!0;class KB extends Zs{constructor(e=new q,n=new q,r=new q){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new q){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(mg(e,i.x,s.x,o.x),mg(e,i.y,s.y,o.y),mg(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}KB.prototype.isQuadraticBezierCurve3=!0;class xM extends Zs{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,n=new Ie){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],f=i[o>i.length-3?i.length-1:o+2];return r.set(XP(a,l.x,u.x,c.x,f.x),XP(a,l.y,u.y,c.y,f.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new Ie().fromArray(i))}return this}}xM.prototype.isSplineCurve=!0;var ZB=Object.freeze({__proto__:null,ArcCurve:jB,CatmullRomCurve3:qB,CubicBezierCurve:wM,CubicBezierCurve3:JB,EllipseCurve:T_,LineCurve:P_,LineCurve3:eJ,QuadraticBezierCurve:bM,QuadraticBezierCurve3:KB,SplineCurve:xM});class tJ extends Zs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new P_(n,e))}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(n.push(c),r=c)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new ZB[i.type]().fromJSON(i))}return this}}class _A extends tJ{constructor(e){super(),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new P_(this.currentPoint.clone(),new Ie(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new bM(this.currentPoint.clone(),new Ie(e,n),new Ie(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new wM(this.currentPoint.clone(),new Ie(e,n),new Ie(r,i),new Ie(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new xM(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,n+c,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const u=new T_(e,n,r,i,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class dl extends _A{constructor(e){super(e),this.uuid=Lo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new _A().fromJSON(i))}return this}}const nJ={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=QB(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,f,h,d;if(r&&(s=aJ(t,e,s,n)),t.length>80*n){a=u=t[0],l=c=t[1];for(let p=n;p<i;p+=n)f=t[p],h=t[p+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-a,c-l),d=d!==0?1/d:0}return tm(s,o,n,a,l,d),o}};function QB(t,e,n,r,i){let s,o;if(i===yJ(t,e,n,r)>0)for(s=e;s<n;s+=r)o=YP(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=YP(s,t[s],t[s+1],o);return o&&L_(o,o.next)&&(rm(o),o=o.next),o}function Nu(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(L_(n,n.next)||Jn(n.prev,n,n.next)===0)){if(rm(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function tm(t,e,n,r,i,s,o){if(!t)return;!o&&s&&hJ(t,r,i,s);let a=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?iJ(t,r,i,s):rJ(t)){e.push(l.i/n),e.push(t.i/n),e.push(u.i/n),rm(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=sJ(Nu(t),e,n),tm(t,e,n,r,i,s,2)):o===2&&oJ(t,e,n,r,i,s):tm(Nu(t),e,n,r,i,s,1);break}}}function rJ(t){const e=t.prev,n=t,r=t.next;if(Jn(e,n,r)>=0)return!1;let i=t.next.next;for(;i!==t.prev;){if(bh(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Jn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function iJ(t,e,n,r){const i=t.prev,s=t,o=t.next;if(Jn(i,s,o)>=0)return!1;const a=i.x<s.x?i.x<o.x?i.x:o.x:s.x<o.x?s.x:o.x,l=i.y<s.y?i.y<o.y?i.y:o.y:s.y<o.y?s.y:o.y,u=i.x>s.x?i.x>o.x?i.x:o.x:s.x>o.x?s.x:o.x,c=i.y>s.y?i.y>o.y?i.y:o.y:s.y>o.y?s.y:o.y,f=wA(a,l,e,n,r),h=wA(u,c,e,n,r);let d=t.prevZ,p=t.nextZ;for(;d&&d.z>=f&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&bh(i.x,i.y,s.x,s.y,o.x,o.y,d.x,d.y)&&Jn(d.prev,d,d.next)>=0||(d=d.prevZ,p!==t.prev&&p!==t.next&&bh(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Jn(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&bh(i.x,i.y,s.x,s.y,o.x,o.y,d.x,d.y)&&Jn(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&bh(i.x,i.y,s.x,s.y,o.x,o.y,p.x,p.y)&&Jn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function sJ(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!L_(i,s)&&eN(i,r,r.next,s)&&nm(i,s)&&nm(s,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(s.i/n),rm(r),rm(r.next),r=t=s),r=r.next}while(r!==t);return Nu(r)}function oJ(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&gJ(o,a)){let l=tN(o,a);o=Nu(o,o.next),l=Nu(l,l.next),tm(o,e,n,r,i,s),tm(l,e,n,r,i,s);return}a=a.next}o=o.next}while(o!==t)}function aJ(t,e,n,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,u=QB(t,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(pJ(u));for(i.sort(lJ),s=0;s<i.length;s++)uJ(i[s],n),n=Nu(n,n.next);return n}function lJ(t,e){return t.x-e.x}function uJ(t,e){if(e=cJ(t,e),e){const n=tN(e,t);Nu(e,e.next),Nu(n,n.next)}}function cJ(t,e){let n=e;const r=t.x,i=t.y;let s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const h=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=r&&h>s){if(s=h,h===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(r===s)return o;const a=o,l=o.x,u=o.y;let c=1/0,f;n=o;do r>=n.x&&n.x>=l&&r!==n.x&&bh(i<u?r:s,i,l,u,i<u?s:r,i,n.x,n.y)&&(f=Math.abs(i-n.y)/(r-n.x),nm(n,t)&&(f<c||f===c&&(n.x>o.x||n.x===o.x&&fJ(o,n)))&&(o=n,c=f)),n=n.next;while(n!==a);return o}function fJ(t,e){return Jn(t.prev,t,e.prev)<0&&Jn(e.next,t,t.next)<0}function hJ(t,e,n,r){let i=t;do i.z===null&&(i.z=wA(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,dJ(i)}function dJ(t){let e,n,r,i,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,u*=2}while(o>1);return t}function wA(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function pJ(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function bh(t,e,n,r,i,s,o,a){return(i-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(n-o)*(e-a)>=0&&(n-o)*(s-a)-(i-o)*(r-a)>=0}function gJ(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!mJ(t,e)&&(nm(t,e)&&nm(e,t)&&vJ(t,e)&&(Jn(t.prev,t,e.prev)||Jn(t,e.prev,e))||L_(t,e)&&Jn(t.prev,t,t.next)>0&&Jn(e.prev,e,e.next)>0)}function Jn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function L_(t,e){return t.x===e.x&&t.y===e.y}function eN(t,e,n,r){const i=m0(Jn(t,e,n)),s=m0(Jn(t,e,r)),o=m0(Jn(n,r,t)),a=m0(Jn(n,r,e));return!!(i!==s&&o!==a||i===0&&g0(t,n,e)||s===0&&g0(t,r,e)||o===0&&g0(n,t,r)||a===0&&g0(n,e,r))}function g0(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function m0(t){return t>0?1:t<0?-1:0}function mJ(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&eN(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function nm(t,e){return Jn(t.prev,t,t.next)<0?Jn(t,e,t.next)>=0&&Jn(t,t.prev,e)>=0:Jn(t,e,t.prev)<0||Jn(t,t.next,e)<0}function vJ(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function tN(t,e){const n=new bA(t.i,t.x,t.y),r=new bA(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function YP(t,e,n,r){const i=new bA(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function rm(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function bA(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function yJ(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class Mu{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Mu.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];jP(e),qP(r,e);let o=e.length;n.forEach(jP);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,qP(r,n[l]);const a=nJ.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function jP(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function qP(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Fo extends Gt{constructor(e=new dl([new Ie(.5,.5),new Ie(-.5,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Vt(i,3)),this.setAttribute("uv",new Vt(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,c=n.steps!==void 0?n.steps:1;let f=n.depth!==void 0?n.depth:1,h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:.2,p=n.bevelSize!==void 0?n.bevelSize:d-.1,g=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const _=n.extrudePath,m=n.UVGenerator!==void 0?n.UVGenerator:_J;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),f=n.amount);let v,b=!1,w,A,E,S;_&&(v=_.getSpacedPoints(c),b=!0,h=!1,w=_.computeFrenetFrames(c,!1),A=new q,E=new q,S=new q),h||(x=0,d=0,p=0,g=0);const C=a.extractPoints(u);let M=C.shape;const D=C.holes;if(!Mu.isClockWise(M)){M=M.reverse();for(let V=0,R=D.length;V<R;V++){const B=D[V];Mu.isClockWise(B)&&(D[V]=B.reverse())}}const L=Mu.triangulateShape(M,D),F=M;for(let V=0,R=D.length;V<R;V++){const B=D[V];M=M.concat(B)}function k(V,R,B){return R||console.error("THREE.ExtrudeGeometry: vec does not exist"),R.clone().multiplyScalar(B).add(V)}const I=M.length,O=L.length;function $(V,R,B){let j,se,Y;const G=V.x-R.x,le=V.y-R.y,ge=B.x-V.x,ae=B.y-V.y,ue=G*G+le*le,U=G*ae-le*ge;if(Math.abs(U)>Number.EPSILON){const z=Math.sqrt(ue),te=Math.sqrt(ge*ge+ae*ae),fe=R.x-le/z,ne=R.y+G/z,de=B.x-ae/te,pe=B.y+ge/te,_e=((de-fe)*ae-(pe-ne)*ge)/(G*ae-le*ge);j=fe+G*_e-V.x,se=ne+le*_e-V.y;const be=j*j+se*se;if(be<=2)return new Ie(j,se);Y=Math.sqrt(be/2)}else{let z=!1;G>Number.EPSILON?ge>Number.EPSILON&&(z=!0):G<-Number.EPSILON?ge<-Number.EPSILON&&(z=!0):Math.sign(le)===Math.sign(ae)&&(z=!0),z?(j=-le,se=G,Y=Math.sqrt(ue)):(j=G,se=le,Y=Math.sqrt(ue/2))}return new Ie(j/Y,se/Y)}const N=[];for(let V=0,R=F.length,B=R-1,j=V+1;V<R;V++,B++,j++)B===R&&(B=0),j===R&&(j=0),N[V]=$(F[V],F[B],F[j]);const W=[];let H,K=N.concat();for(let V=0,R=D.length;V<R;V++){const B=D[V];H=[];for(let j=0,se=B.length,Y=se-1,G=j+1;j<se;j++,Y++,G++)Y===se&&(Y=0),G===se&&(G=0),H[j]=$(B[j],B[Y],B[G]);W.push(H),K=K.concat(H)}for(let V=0;V<x;V++){const R=V/x,B=d*Math.cos(R*Math.PI/2),j=p*Math.sin(R*Math.PI/2)+g;for(let se=0,Y=F.length;se<Y;se++){const G=k(F[se],N[se],j);Q(G.x,G.y,-B)}for(let se=0,Y=D.length;se<Y;se++){const G=D[se];H=W[se];for(let le=0,ge=G.length;le<ge;le++){const ae=k(G[le],H[le],j);Q(ae.x,ae.y,-B)}}}const ee=p+g;for(let V=0;V<I;V++){const R=h?k(M[V],K[V],ee):M[V];b?(E.copy(w.normals[0]).multiplyScalar(R.x),A.copy(w.binormals[0]).multiplyScalar(R.y),S.copy(v[0]).add(E).add(A),Q(S.x,S.y,S.z)):Q(R.x,R.y,0)}for(let V=1;V<=c;V++)for(let R=0;R<I;R++){const B=h?k(M[R],K[R],ee):M[R];b?(E.copy(w.normals[V]).multiplyScalar(B.x),A.copy(w.binormals[V]).multiplyScalar(B.y),S.copy(v[V]).add(E).add(A),Q(S.x,S.y,S.z)):Q(B.x,B.y,f/c*V)}for(let V=x-1;V>=0;V--){const R=V/x,B=d*Math.cos(R*Math.PI/2),j=p*Math.sin(R*Math.PI/2)+g;for(let se=0,Y=F.length;se<Y;se++){const G=k(F[se],N[se],j);Q(G.x,G.y,f+B)}for(let se=0,Y=D.length;se<Y;se++){const G=D[se];H=W[se];for(let le=0,ge=G.length;le<ge;le++){const ae=k(G[le],H[le],j);b?Q(ae.x,ae.y+v[c-1].y,v[c-1].x+B):Q(ae.x,ae.y,f+B)}}}Z(),J();function Z(){const V=i.length/3;if(h){let R=0,B=I*R;for(let j=0;j<O;j++){const se=L[j];oe(se[2]+B,se[1]+B,se[0]+B)}R=c+x*2,B=I*R;for(let j=0;j<O;j++){const se=L[j];oe(se[0]+B,se[1]+B,se[2]+B)}}else{for(let R=0;R<O;R++){const B=L[R];oe(B[2],B[1],B[0])}for(let R=0;R<O;R++){const B=L[R];oe(B[0]+I*c,B[1]+I*c,B[2]+I*c)}}r.addGroup(V,i.length/3-V,0)}function J(){const V=i.length/3;let R=0;X(F,R),R+=F.length;for(let B=0,j=D.length;B<j;B++){const se=D[B];X(se,R),R+=se.length}r.addGroup(V,i.length/3-V,1)}function X(V,R){let B=V.length;for(;--B>=0;){const j=B;let se=B-1;se<0&&(se=V.length-1);for(let Y=0,G=c+x*2;Y<G;Y++){const le=I*Y,ge=I*(Y+1),ae=R+j+le,ue=R+se+le,U=R+se+ge,z=R+j+ge;he(ae,ue,U,z)}}}function Q(V,R,B){l.push(V),l.push(R),l.push(B)}function oe(V,R,B){ve(V),ve(R),ve(B);const j=i.length/3,se=m.generateTopUV(r,i,j-3,j-2,j-1);ye(se[0]),ye(se[1]),ye(se[2])}function he(V,R,B,j){ve(V),ve(R),ve(j),ve(R),ve(B),ve(j);const se=i.length/3,Y=m.generateSideWallUV(r,i,se-6,se-3,se-2,se-1);ye(Y[0]),ye(Y[1]),ye(Y[3]),ye(Y[1]),ye(Y[2]),ye(Y[3])}function ve(V){i.push(l[V*3+0]),i.push(l[V*3+1]),i.push(l[V*3+2])}function ye(V){s.push(V.x),s.push(V.y)}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return wJ(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new ZB[i.type]().fromJSON(i)),new Fo(r,e.options)}}const _J={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new Ie(s,o),new Ie(a,l),new Ie(u,c)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[r*3],c=e[r*3+1],f=e[r*3+2],h=e[i*3],d=e[i*3+1],p=e[i*3+2],g=e[s*3],x=e[s*3+1],_=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new Ie(o,1-l),new Ie(u,1-f),new Ie(h,1-p),new Ie(g,1-_)]:[new Ie(a,1-l),new Ie(c,1-f),new Ie(d,1-p),new Ie(x,1-_)]}};function wJ(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class xh extends yM{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new xh(e.radius,e.detail)}}class SM extends Gt{constructor(e=new dl([new Ie(0,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new Vt(i,3)),this.setAttribute("normal",new Vt(s,3)),this.setAttribute("uv",new Vt(o,2));function u(c){const f=i.length/3,h=c.extractPoints(n);let d=h.shape;const p=h.holes;Mu.isClockWise(d)===!1&&(d=d.reverse());for(let x=0,_=p.length;x<_;x++){const m=p[x];Mu.isClockWise(m)===!0&&(p[x]=m.reverse())}const g=Mu.triangulateShape(d,p);for(let x=0,_=p.length;x<_;x++){const m=p[x];d=d.concat(m)}for(let x=0,_=d.length;x<_;x++){const m=d[x];i.push(m.x,m.y,0),s.push(0,0,1),o.push(m.x,m.y)}for(let x=0,_=g.length;x<_;x++){const m=g[x],v=m[0]+f,b=m[1]+f,w=m[2]+f;r.push(v,b,w),l+=3}}}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return bJ(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new SM(r,e.curveSegments)}}function bJ(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class F_ extends Gt{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],f=new q,h=new q,d=[],p=[],g=[],x=[];for(let _=0;_<=r;_++){const m=[],v=_/r;let b=0;_==0&&o==0?b=.5/n:_==r&&l==Math.PI&&(b=-.5/n);for(let w=0;w<=n;w++){const A=w/n;f.x=-e*Math.cos(i+A*s)*Math.sin(o+v*a),f.y=e*Math.cos(o+v*a),f.z=e*Math.sin(i+A*s)*Math.sin(o+v*a),p.push(f.x,f.y,f.z),h.copy(f).normalize(),g.push(h.x,h.y,h.z),x.push(A+b,1-v),m.push(u++)}c.push(m)}for(let _=0;_<r;_++)for(let m=0;m<n;m++){const v=c[_][m+1],b=c[_][m],w=c[_+1][m],A=c[_+1][m+1];(_!==0||o>0)&&d.push(v,b,A),(_!==r-1||l<Math.PI)&&d.push(b,w,A)}this.setIndex(d),this.setAttribute("position",new Vt(p,3)),this.setAttribute("normal",new Vt(g,3)),this.setAttribute("uv",new Vt(x,2))}static fromJSON(e){return new F_(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Nc extends Gt{constructor(e=1,n=.4,r=8,i=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new q,f=new q,h=new q;for(let d=0;d<=r;d++)for(let p=0;p<=i;p++){const g=p/i*s,x=d/r*Math.PI*2;f.x=(e+n*Math.cos(x))*Math.cos(g),f.y=(e+n*Math.cos(x))*Math.sin(g),f.z=n*Math.sin(x),a.push(f.x,f.y,f.z),c.x=e*Math.cos(g),c.y=e*Math.sin(g),h.subVectors(f,c).normalize(),l.push(h.x,h.y,h.z),u.push(p/i),u.push(d/r)}for(let d=1;d<=r;d++)for(let p=1;p<=i;p++){const g=(i+1)*d+p-1,x=(i+1)*(d-1)+p-1,_=(i+1)*(d-1)+p,m=(i+1)*d+p;o.push(g,x,m),o.push(x,_,m)}this.setIndex(o),this.setAttribute("position",new Vt(a,3)),this.setAttribute("normal",new Vt(l,3)),this.setAttribute("uv",new Vt(u,2))}static fromJSON(e){return new Nc(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class xJ extends Pi{constructor(e){super(),this.type="ShadowMaterial",this.color=new ut(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}xJ.prototype.isShadowMaterial=!0;class Zn extends Pi{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ut(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}Zn.prototype.isMeshStandardMaterial=!0;class AM extends Zn{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return wi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.sheenColor=new ut(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new ut(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ut(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}AM.prototype.isMeshPhysicalMaterial=!0;class EM extends Pi{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new ut(16777215),this.specular=new ut(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=b_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}EM.prototype.isMeshPhongMaterial=!0;class SJ extends Pi{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ut(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}SJ.prototype.isMeshToonMaterial=!0;class AJ extends Pi{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}AJ.prototype.isMeshNormalMaterial=!0;class nN extends Pi{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new ut(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ut(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=b_,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}nN.prototype.isMeshLambertMaterial=!0;class EJ extends Pi{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ut(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Fd,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}EJ.prototype.isMeshMatcapMaterial=!0;class CJ extends Ks{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}CJ.prototype.isLineDashedMaterial=!0;const Hn={arraySlice:function(t,e,n){return Hn.isTypedArray(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r},sortedArray:function(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i},flattenJSON:function(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)},subclip:function(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],h=[];for(let d=0;d<u.times.length;++d){const p=u.times[d]*i;if(!(p<n||p>=r)){f.push(u.times[d]);for(let g=0;g<c;++g)h.push(u.values[d*c+g])}}f.length!==0&&(u.times=Hn.convertArray(f,u.times.constructor),u.values=Hn.convertArray(h,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(_){return _.name===a.name&&_.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let h=0;const d=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const p=a.times.length-1;let g;if(s<=a.times[0]){const _=c,m=f-c;g=Hn.arraySlice(a.values,_,m)}else if(s>=a.times[p]){const _=p*f+c,m=_+f-c;g=Hn.arraySlice(a.values,_,m)}else{const _=a.createInterpolant(),m=c,v=f-c;_.evaluate(s),g=Hn.arraySlice(_.resultBuffer,m,v)}l==="quaternion"&&new In().fromArray(g).normalize().conjugate().toArray(g);const x=u.times.length;for(let _=0;_<x;++_){const m=_*d+h;if(l==="quaternion")In.multiplyQuaternionsFlat(u.values,m,g,0,u.values,m);else{const v=d-h*2;for(let b=0;b<v;++b)u.values[m+b]-=g[b]}}}return t.blendMode=gB,t}};class Vu{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,e,s)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return r=n.length,this._cachedIndex=r,this.afterEnd_(r-1,s,e)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Vu.prototype.beforeStart_=Vu.prototype.copySampleValue_;Vu.prototype.afterEnd_=Vu.prototype.copySampleValue_;class MJ extends Vu{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:_h,endingEnd:_h}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case wh:s=e,a=2*n-r;break;case l1:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case wh:o=e,l=2*r-n;break;case l1:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const u=(r-n)*.5,c=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(r-n)/(i-n),g=p*p,x=g*p,_=-h*x+2*h*g-h*p,m=(1+h)*x+(-1.5-2*h)*g+(-.5+h)*p+1,v=(-1-d)*x+(1.5+d)*g+.5*p,b=d*x-d*g;for(let w=0;w!==a;++w)s[w]=_*o[c+w]+m*o[u+w]+v*o[l+w]+b*o[f+w];return s}}class rN extends Vu{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-n)/(i-n),f=1-c;for(let h=0;h!==a;++h)s[h]=o[u+h]*f+o[l+h]*c;return s}}class DJ extends Vu{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ra{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Hn.convertArray(n,this.TimeBufferType),this.values=Hn.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Hn.convertArray(e.times,Array),values:Hn.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new DJ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new MJ(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case jg:n=this.InterpolantFactoryMethodDiscrete;break;case qg:n=this.InterpolantFactoryMethodLinear;break;case qw:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return jg;case this.InterpolantFactoryMethodLinear:return qg;case this.InterpolantFactoryMethodSmooth:return qw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Hn.arraySlice(r,s,o),this.values=Hn.arraySlice(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&Hn.isTypedArray(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Hn.arraySlice(this.times),n=Hn.arraySlice(this.values),r=this.getValueSize(),i=this.getInterpolation()===qw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const f=a*r,h=f-r,d=f+r;for(let p=0;p!==r;++p){const g=n[f+p];if(g!==n[h+p]||g!==n[d+p]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*r,h=o*r;for(let d=0;d!==r;++d)n[h+d]=n[f+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=Hn.arraySlice(e,0,o),this.values=Hn.arraySlice(n,0,o*r)):(this.times=e,this.values=n),this}clone(){const e=Hn.arraySlice(this.times,0),n=Hn.arraySlice(this.values,0),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Ra.prototype.TimeBufferType=Float32Array;Ra.prototype.ValueBufferType=Float32Array;Ra.prototype.DefaultInterpolation=qg;class Rd extends Ra{}Rd.prototype.ValueTypeName="bool";Rd.prototype.ValueBufferType=Array;Rd.prototype.DefaultInterpolation=jg;Rd.prototype.InterpolantFactoryMethodLinear=void 0;Rd.prototype.InterpolantFactoryMethodSmooth=void 0;class iN extends Ra{}iN.prototype.ValueTypeName="color";class f1 extends Ra{}f1.prototype.ValueTypeName="number";class TJ extends Vu{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let u=e*a;for(let c=u+a;u!==c;u+=4)In.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Xm extends Ra{InterpolantFactoryMethodLinear(e){return new TJ(this.times,this.values,this.getValueSize(),e)}}Xm.prototype.ValueTypeName="quaternion";Xm.prototype.DefaultInterpolation=qg;Xm.prototype.InterpolantFactoryMethodSmooth=void 0;class Od extends Ra{}Od.prototype.ValueTypeName="string";Od.prototype.ValueBufferType=Array;Od.prototype.DefaultInterpolation=jg;Od.prototype.InterpolantFactoryMethodLinear=void 0;Od.prototype.InterpolantFactoryMethodSmooth=void 0;class h1 extends Ra{}h1.prototype.ValueTypeName="vector";class JP{constructor(e,n=-1,r,i=aM){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Lo(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(LJ(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Ra.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=Hn.getKeyframeOrder(l);l=Hn.sortedArray(l,1,c),u=Hn.sortedArray(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new f1(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let h=i[f];h||(i[f]=h=[]),h.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(f,h,d,p,g){if(d.length!==0){const x=[],_=[];Hn.flattenJSON(d,x,_,p),x.length!==0&&g.push(new f(h,x,_))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const h=u[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let p;for(p=0;p<h.length;p++)if(h[p].morphTargets)for(let g=0;g<h[p].morphTargets.length;g++)d[h[p].morphTargets[g]]=-1;for(const g in d){const x=[],_=[];for(let m=0;m!==h[p].morphTargets.length;++m){const v=h[p];x.push(v.time),_.push(v.morphTarget===g?1:0)}i.push(new f1(".morphTargetInfluence["+g+"]",x,_))}l=d.length*(o||1)}else{const d=".bones["+n[f].name+"]";r(h1,d+".position",h,"pos",i),r(Xm,d+".quaternion",h,"rot",i),r(h1,d+".scale",h,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function PJ(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return f1;case"vector":case"vector2":case"vector3":case"vector4":return h1;case"color":return iN;case"quaternion":return Xm;case"bool":case"boolean":return Rd;case"string":return Od}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function LJ(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=PJ(t.type);if(t.times===void 0){const n=[],r=[];Hn.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const od={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class FJ{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,h=u.length;f<h;f+=2){const d=u[f],p=u[f+1];if(d.global&&(d.lastIndex=0),d.test(c))return p}return null}}}const IJ=new FJ;class xl{constructor(e){this.manager=e!==void 0?e:IJ,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Wa={};class sN extends xl{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=od.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Wa[e]!==void 0){Wa[e].push({onLoad:n,onProgress:r,onError:i});return}Wa[e]=[],Wa[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(a=>{if(a.status===200||a.status===0){a.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received.");const l=Wa[e],u=a.body.getReader(),c=a.headers.get("Content-Length"),f=c?parseInt(c):0,h=f!==0;let d=0;return new ReadableStream({start(p){g();function g(){u.read().then(({done:x,value:_})=>{if(x)p.close();else{d+=_.byteLength;const m=new ProgressEvent("progress",{lengthComputable:h,loaded:d,total:f});for(let v=0,b=l.length;v<b;v++){const w=l[v];w.onProgress&&w.onProgress(m)}p.enqueue(_),g()}})}}})}else throw Error(`fetch for "${a.url}" responded with ${a.status}: ${a.statusText}`)}).then(a=>{const l=new Response(a);switch(this.responseType){case"arraybuffer":return l.arrayBuffer();case"blob":return l.blob();case"document":return l.text().then(u=>new DOMParser().parseFromString(u,this.mimeType));case"json":return l.json();default:return l.text()}}).then(a=>{od.add(e,a);const l=Wa[e];delete Wa[e];for(let u=0,c=l.length;u<c;u++){const f=l[u];f.onLoad&&f.onLoad(a)}this.manager.itemEnd(e)}).catch(a=>{const l=Wa[e];delete Wa[e];for(let u=0,c=l.length;u<c;u++){const f=l[u];f.onError&&f.onError(a)}this.manager.itemError(e),this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class oN extends xl{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=od.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=A_("img");function l(){c(),od.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(f){c(),i&&i(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class kJ extends xl{constructor(e){super(e)}load(e,n,r,i){const s=new E_,o=new oN(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class RJ extends xl{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new XB,a=new sN(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);!u||(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:xi,o.wrapT=u.wrapT!==void 0?u.wrapT:xi,o.magFilter=u.magFilter!==void 0?u.magFilter:kn,o.minFilter=u.minFilter!==void 0?u.minFilter:kn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Ld),u.mipmapCount===1&&(o.minFilter=kn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u))},r,i),o}}class as extends xl{constructor(e){super(e)}load(e,n,r,i){const s=new Qr,o=new oN(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Ca extends Qt{constructor(e,n=1){super(),this.type="Light",this.color=new ut(e),this.intensity=n}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}Ca.prototype.isLight=!0;class OJ extends Ca{constructor(e,n,r){super(e,r),this.type="HemisphereLight",this.position.copy(Qt.DefaultUp),this.updateMatrix(),this.groundColor=new ut(n)}copy(e){return Ca.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}OJ.prototype.isHemisphereLight=!0;const KP=new st,ZP=new q,QP=new q;class CM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new st,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new C_,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new $t(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;ZP.setFromMatrixPosition(e.matrixWorld),n.position.copy(ZP),QP.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(QP),n.updateMatrixWorld(),KP.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KP),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(n.projectionMatrix),r.multiply(n.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class aN extends CM{constructor(){super(new zi(50,1,.5,500)),this.focus=1}updateMatrices(e){const n=this.camera,r=Kg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}aN.prototype.isSpotLightShadow=!0;class BJ extends Ca{constructor(e,n,r=0,i=Math.PI/3,s=0,o=1){super(e,n),this.type="SpotLight",this.position.copy(Qt.DefaultUp),this.updateMatrix(),this.target=new Qt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.shadow=new aN}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}BJ.prototype.isSpotLight=!0;const eL=new st,Ap=new q,Pb=new q;class lN extends CM{constructor(){super(new zi(90,1,.5,500)),this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new $t(2,1,1,1),new $t(0,1,1,1),new $t(3,1,1,1),new $t(1,1,1,1),new $t(3,0,1,1),new $t(1,0,1,1)],this._cubeDirections=[new q(1,0,0),new q(-1,0,0),new q(0,0,1),new q(0,0,-1),new q(0,1,0),new q(0,-1,0)],this._cubeUps=[new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,1,0),new q(0,0,1),new q(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Ap.setFromMatrixPosition(e.matrixWorld),r.position.copy(Ap),Pb.copy(r.position),Pb.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(Pb),r.updateMatrixWorld(),i.makeTranslation(-Ap.x,-Ap.y,-Ap.z),eL.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(eL)}}lN.prototype.isPointLightShadow=!0;class NJ extends Ca{constructor(e,n,r=0,i=1){super(e,n),this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new lN}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}NJ.prototype.isPointLight=!0;class uN extends CM{constructor(){super(new hM(-5,5,5,-5,.5,500))}}uN.prototype.isDirectionalLightShadow=!0;class cN extends Ca{constructor(e,n){super(e,n),this.type="DirectionalLight",this.position.copy(Qt.DefaultUp),this.updateMatrix(),this.target=new Qt,this.shadow=new uN}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}cN.prototype.isDirectionalLight=!0;class fN extends Ca{constructor(e,n){super(e,n),this.type="AmbientLight"}}fN.prototype.isAmbientLight=!0;class VJ extends Ca{constructor(e,n,r=10,i=10){super(e,n),this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}VJ.prototype.isRectAreaLight=!0;class hN{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new q)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}hN.prototype.isSphericalHarmonics3=!0;class MM extends Ca{constructor(e=new hN,n=1){super(void 0,n),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}MM.prototype.isLightProbe=!0;class zJ{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.substr(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class dN extends Gt{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}dN.prototype.isInstancedBufferGeometry=!0;class GJ extends xl{constructor(e){super(e),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=od.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){od.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}GJ.prototype.isImageBitmapLoader=!0;let v0;const UJ={getContext:function(){return v0===void 0&&(v0=new(window.AudioContext||window.webkitAudioContext)),v0},setContext:function(t){v0=t}};class HJ extends xl{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new sN(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{const l=a.slice(0);UJ.getContext().decodeAudioData(l,function(c){n(c)})}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}}class WJ extends MM{constructor(e,n,r=1){super(void 0,r);const i=new ut().set(e),s=new ut().set(n),o=new q(i.r,i.g,i.b),a=new q(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}WJ.prototype.isHemisphereLightProbe=!0;class $J extends MM{constructor(e,n=1){super(void 0,n);const r=new ut().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}$J.prototype.isAmbientLightProbe=!0;class XJ extends Qt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}class YJ{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){In.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;In.multiplyQuaternionsFlat(e,o,e,n,e,r),In.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const DM="\\[\\]\\.:\\/",jJ=new RegExp("["+DM+"]","g"),TM="[^"+DM+"]",qJ="[^"+DM.replace("\\.","")+"]",JJ=/((?:WC+[\/:])*)/.source.replace("WC",TM),KJ=/(WCOD+)?/.source.replace("WCOD",qJ),ZJ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",TM),QJ=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",TM),eK=new RegExp("^"+JJ+KJ+ZJ+QJ+"$"),tK=["material","materials","bones"];class nK{constructor(e,n,r){const i=r||Zt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Zt{constructor(e,n,r){this.path=n,this.parsedPath=r||Zt.parseTrackName(n),this.node=Zt.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Zt.Composite(e,n,r):new Zt(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(jJ,"")}static parseTrackName(e){const n=eK.exec(e);if(!n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);tK.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(!n||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=Zt.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Zt.Composite=nK;Zt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Zt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Zt.prototype.GetterByBindingType=[Zt.prototype._getValue_direct,Zt.prototype._getValue_array,Zt.prototype._getValue_arrayElement,Zt.prototype._getValue_toArray];Zt.prototype.SetterByBindingTypeAndVersioning=[[Zt.prototype._setValue_direct,Zt.prototype._setValue_direct_setNeedsUpdate,Zt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_array,Zt.prototype._setValue_array_setNeedsUpdate,Zt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_arrayElement,Zt.prototype._setValue_arrayElement_setNeedsUpdate,Zt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Zt.prototype._setValue_fromArray,Zt.prototype._setValue_fromArray_setNeedsUpdate,Zt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rK{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:_h,endingEnd:_h};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=R7,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;if(l<0||r===0)return;this._startTime=null,n=r*l}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case gB:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case aM:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===O7;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===k7){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=wh,i.endingEnd=wh):(e?i.endingStart=this.zeroSlopeAtStart?wh:_h:i.endingStart=l1,n?i.endingEnd=this.zeroSlopeAtEnd?wh:_h:i.endingEnd=l1)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}class iK extends bl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const h=i[f],d=h.name;let p=c[d];if(p!==void 0)o[f]=p;else{if(p=o[f],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,d));continue}const g=n&&n._propertyBindings[f].binding.parsedPath;p=new YJ(Zt.create(r,d,g),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,d),o[f]=p}a[f].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new rN(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?JP.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=aM),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===r)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new rK(this,o,n,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?JP.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,f=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,n[c]=f,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}iK.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class sK extends $m{constructor(e,n,r=1){super(e,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}sK.prototype.isInstancedInterleavedBuffer=!0;class I_{constructor(e,n,r=0,i=1/0){this.ray=new Ju(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new AB,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n&&n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n&&n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return xA(e,this,r,n),r.sort(tL),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)xA(e[i],this,r,n);return r.sort(tL),r}}function tL(t,e){return t.distance-e.distance}function xA(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)xA(i[s],e,n,!0)}}class nL{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(wi(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const rL=new q,y0=new q;class qr{constructor(e=new q,n=new q){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){rL.subVectors(e,this.start),y0.subVectors(this.end,this.start);const r=y0.dot(y0);let s=y0.dot(rL)/r;return n&&(s=wi(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const $l=new q,_0=new st,Lb=new st;class oK extends em{constructor(e){const n=pN(e),r=new Gt,i=[],s=[],o=new ut(0,0,1),a=new ut(0,1,0);for(let u=0;u<n.length;u++){const c=n[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new Vt(i,3)),r.setAttribute("color",new Vt(s,3));const l=new Ks({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");Lb.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(_0.multiplyMatrices(Lb,a.matrixWorld),$l.setFromMatrixPosition(_0),i.setXYZ(o,$l.x,$l.y,$l.z),_0.multiplyMatrices(Lb,a.parent.matrixWorld),$l.setFromMatrixPosition(_0),i.setXYZ(o+1,$l.x,$l.y,$l.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function pN(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,pN(t.children[n]));return e}class aK extends em{constructor(e=10,n=10,r=4473924,i=8947848){r=new ut(r),i=new ut(i);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let h=0,d=0,p=-a;h<=n;h++,p+=o){l.push(-a,0,p,a,0,p),l.push(p,0,-a,p,0,a);const g=h===s?r:i;g.toArray(u,d),d+=3,g.toArray(u,d),d+=3,g.toArray(u,d),d+=3,g.toArray(u,d),d+=3}const c=new Gt;c.setAttribute("position",new Vt(l,3)),c.setAttribute("color",new Vt(u,3));const f=new Ks({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}}const iL=new q;let w0,Fb;class lK extends Qt{constructor(e=new q(0,0,1),n=new q(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",w0===void 0&&(w0=new Gt,w0.setAttribute("position",new Vt([0,0,0,0,1,0],3)),Fb=new oi(0,.5,1,5,1),Fb.translate(0,-.5,0)),this.position.copy(n),this.line=new Pr(w0,new Ks({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Fe(Fb,new gs({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{iL.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(iL,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}const gN=new Float32Array(1),uK=new Int32Array(gN.buffer);class Ib{static toHalfFloat(e){e>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),gN[0]=e;const n=uK[0];let r=n>>16&32768,i=n>>12&2047;const s=n>>23&255;return s<103?r:s>142?(r|=31744,r|=(s==255?0:1)&&n&8388607,r):s<113?(i|=2048,r|=(i>>114-s)+(i>>113-s&1),r):(r|=s-112<<10|i>>1,r+=i&1,r)}}Zs.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Zs.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t};_A.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)};aK.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};oK.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};xl.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),zJ.extractUrlBase(t)};xl.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Mr.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)};Mr.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()};Mr.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)};Mr.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)};Mr.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)};qu.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()};C_.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)};qr.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)};kr.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)};kr.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)};kr.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")};kr.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)};kr.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")};kr.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()};st.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)};st.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)};st.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new q().setFromMatrixColumn(this,3)};st.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)};st.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")};st.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)};st.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)};st.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")};st.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)};st.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)};st.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")};st.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")};st.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")};st.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")};st.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")};st.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)};st.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")};st.prototype.makeFrustum=function(t,e,n,r,i,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,s)};st.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()};xs.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)};In.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)};In.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()};Ju.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)};Ju.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)};Ju.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)};on.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()};on.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)};on.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)};on.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)};on.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)};on.barycoordFromPoint=function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),on.getBarycoord(t,e,n,r,i)};on.normal=function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),on.getNormal(t,e,n,r)};dl.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)};dl.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Fo(this,t)};dl.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new SM(this,t)};Ie.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)};Ie.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)};Ie.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};q.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")};q.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")};q.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)};q.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)};q.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)};q.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)};q.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)};q.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)};q.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};$t.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)};$t.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()};Qt.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)};Qt.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")};Qt.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)};Qt.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")};Qt.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)};Object.defineProperties(Qt.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Fe.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")};Object.defineProperties(Fe.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),B7},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});$B.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};zi.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(t)};Object.defineProperties(Ca.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}});Object.defineProperties(Rn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===u1},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(u1)}}});Rn.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?u1:Jg),this};Rn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Rn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Gt.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)};Gt.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Rn(arguments[1],arguments[2]))):t==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e)};Gt.prototype.addDrawCall=function(t,e,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)};Gt.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()};Gt.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")};Gt.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)};Gt.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)};Object.defineProperties(Gt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});$m.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(t===!0?u1:Jg),this};$m.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")};Fo.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")};Fo.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")};Fo.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")};Zg.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")};Object.defineProperties(Pi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ut}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===lB}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}});Object.defineProperties(rf.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}});gn.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)};gn.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)};gn.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()};gn.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()};gn.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision};gn.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()};gn.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")};gn.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")};gn.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")};gn.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")};gn.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")};gn.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")};gn.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures};gn.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")};gn.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)};gn.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")};gn.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")};gn.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")};gn.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")};gn.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")};gn.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")};gn.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")};gn.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")};gn.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")};gn.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()};Object.defineProperties(gn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=t===!0?Br:Zr}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(GB.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(wa.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}});XJ.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return new HJ().load(t,function(r){e.setBuffer(r)}),this};fM.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};fM.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)};Id.crossOrigin=void 0;Id.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new as;i.setCrossOrigin(this.crossOrigin);const s=i.load(t,n,void 0,r);return e&&(s.mapping=e),s};Id.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new kJ;i.setCrossOrigin(this.crossOrigin);const s=i.load(t,n,void 0,r);return e&&(s.mapping=e),s};Id.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Id.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:sB}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=sB);const mN=.01;function at(t){return t*mN}function ir(t){return t*(1/mN)}function sf(t){return t.map(([e,n])=>[e,n].map(at))}const cK=(()=>{function t(){this.pluginCallbacks=[],this.register(w=>new m(w)),this.register(w=>new v(w)),this.register(w=>new b(w))}t.prototype={constructor:t,register:function(w){return this.pluginCallbacks.indexOf(w)===-1&&this.pluginCallbacks.push(w),this},unregister:function(w){return this.pluginCallbacks.indexOf(w)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(w),1),this},parse:function(w,A,E){const S=new _,C=[];for(let M=0,D=this.pluginCallbacks.length;M<D;M++)C.push(this.pluginCallbacks[M](S));S.setPlugins(C),S.write(w,A,E)}};const e={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},n={};n[mr]=e.NEAREST,n[pA]=e.NEAREST_MIPMAP_NEAREST,n[gA]=e.NEAREST_MIPMAP_LINEAR,n[kn]=e.LINEAR,n[dB]=e.LINEAR_MIPMAP_NEAREST,n[Ld]=e.LINEAR_MIPMAP_LINEAR,n[xi]=e.CLAMP_TO_EDGE,n[Er]=e.REPEAT,n[o1]=e.MIRRORED_REPEAT;const r={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},i=12,s=1179937895,o=2,a=8,l=1313821514,u=5130562;function c(w,A){return w.length===A.length&&w.every((E,S)=>E===A[S])}function f(w){if(window.TextEncoder!==void 0)return new TextEncoder().encode(w).buffer;const A=new Uint8Array(new ArrayBuffer(w.length));for(let E=0,S=w.length;E<S;E++){const C=w.charCodeAt(E);A[E]=C>255?32:C}return A.buffer}function h(w){return c(w.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function d(w,A,E){const S={min:new Array(w.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(w.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let C=A;C<A+E;C++)for(let M=0;M<w.itemSize;M++){let D;w.itemSize>4?D=w.array[C*w.itemSize+M]:M===0?D=w.getX(C):M===1?D=w.getY(C):M===2?D=w.getZ(C):M===3&&(D=w.getW(C)),S.min[M]=Math.min(S.min[M],D),S.max[M]=Math.max(S.max[M],D)}return S}function p(w){return Math.ceil(w/4)*4}function g(w,A){A=A||0;const E=p(w.byteLength);if(E!==w.byteLength){const S=new Uint8Array(E);if(S.set(new Uint8Array(w)),A!==0)for(let C=w.byteLength;C<E;C++)S[C]=A;return S.buffer}return w}let x=null;function _(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}_.prototype={constructor:_,setPlugins:function(w){this.plugins=w},write:function(w,A,E){this.options=Object.assign({},{binary:!1,trs:!1,onlyVisible:!0,truncateDrawRange:!0,embedImages:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},E),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(w);const S=this;Promise.all(this.pending).then(()=>{const C=S.buffers,M=S.json,D=S.options,T=S.extensionsUsed,L=new Blob(C,{type:"application/octet-stream"}),F=Object.keys(T);if(F.length>0&&(M.extensionsUsed=F),M.buffers&&M.buffers.length>0&&(M.buffers[0].byteLength=L.size),D.binary===!0){var k=new window.FileReader;k.readAsArrayBuffer(L),k.onloadend=()=>{const I=g(k.result),O=new DataView(new ArrayBuffer(a));O.setUint32(0,I.byteLength,!0),O.setUint32(4,u,!0);const $=g(f(JSON.stringify(M)),32),N=new DataView(new ArrayBuffer(a));N.setUint32(0,$.byteLength,!0),N.setUint32(4,l,!0);const W=new ArrayBuffer(i),H=new DataView(W);H.setUint32(0,s,!0),H.setUint32(4,o,!0);const K=i+N.byteLength+$.byteLength+O.byteLength+I.byteLength;H.setUint32(8,K,!0);const ee=new Blob([W,N,$,O,I],{type:"application/octet-stream"}),Z=new window.FileReader;Z.readAsArrayBuffer(ee),Z.onloadend=()=>{A(Z.result)}}}else if(M.buffers&&M.buffers.length>0){var k=new window.FileReader;k.readAsDataURL(L),k.onloadend=()=>{const O=k.result;M.buffers[0].uri=O,A(M)}}else A(M)})},serializeUserData:function(w,A){if(Object.keys(w.userData).length===0)return;const E=this.options,S=this.extensionsUsed;try{const C=JSON.parse(JSON.stringify(w.userData));if(E.includeCustomExtensions&&C.gltfExtensions){A.extensions===void 0&&(A.extensions={});for(let M in C.gltfExtensions)A.extensions[M]=C.gltfExtensions[M],S[M]=!0;delete C.gltfExtensions}Object.keys(C).length>0&&(A.extras=C)}catch(C){console.warn(`THREE.GLTFExporter: userData of '${w.name}' won't be serialized because of JSON.stringify error - ${C.message}`)}},getUID:function(w){return this.uids.has(w)||this.uids.set(w,this.uid++),this.uids.get(w)},isNormalizedNormalAttribute:function(w){if(this.cache.attributesNormalized.has(w))return!1;const E=new q;for(let S=0,C=w.count;S<C;S++)if(Math.abs(E.fromBufferAttribute(w,S).length()-1)>5e-4)return!1;return!0},createNormalizedNormalAttribute:function(w){const A=this.cache;if(A.attributesNormalized.has(w))return A.attributesNormalized.get(w);const E=w.clone(),S=new q;for(let C=0,M=E.count;C<M;C++)S.fromBufferAttribute(E,C),S.x===0&&S.y===0&&S.z===0?S.setX(1):S.normalize(),E.setXYZ(C,S.x,S.y,S.z);return A.attributesNormalized.set(w,E),E},applyTextureTransform:function(w,A){let E=!1;const S={};(A.offset.x!==0||A.offset.y!==0)&&(S.offset=A.offset.toArray(),E=!0),A.rotation!==0&&(S.rotation=A.rotation,E=!0),(A.repeat.x!==1||A.repeat.y!==1)&&(S.scale=A.repeat.toArray(),E=!0),E&&(w.extensions=w.extensions||{},w.extensions.KHR_texture_transform=S,this.extensionsUsed.KHR_texture_transform=!0)},processBuffer:function(w){const A=this.json,E=this.buffers;return A.buffers||(A.buffers=[{byteLength:0}]),E.push(w),0},processBufferView:function(w,A,E,S,C){const M=this.json;M.bufferViews||(M.bufferViews=[]);let D;A===e.UNSIGNED_BYTE?D=1:A===e.UNSIGNED_SHORT?D=2:D=4;const T=p(S*w.itemSize*D),L=new DataView(new ArrayBuffer(T));let F=0;for(let O=E;O<E+S;O++)for(let $=0;$<w.itemSize;$++){let N;w.itemSize>4?N=w.array[O*w.itemSize+$]:$===0?N=w.getX(O):$===1?N=w.getY(O):$===2?N=w.getZ(O):$===3&&(N=w.getW(O)),A===e.FLOAT?L.setFloat32(F,N,!0):A===e.UNSIGNED_INT?L.setUint32(F,N,!0):A===e.UNSIGNED_SHORT?L.setUint16(F,N,!0):A===e.UNSIGNED_BYTE&&L.setUint8(F,N),F+=D}const k={buffer:this.processBuffer(L.buffer),byteOffset:this.byteOffset,byteLength:T};return C!==void 0&&(k.target=C),C===e.ARRAY_BUFFER&&(k.byteStride=w.itemSize*D),this.byteOffset+=T,M.bufferViews.push(k),{id:M.bufferViews.length-1,byteLength:0}},processBufferViewImage:function(w){const A=this,E=A.json;return E.bufferViews||(E.bufferViews=[]),new Promise(S=>{const C=new window.FileReader;C.readAsArrayBuffer(w),C.onloadend=()=>{const M=g(C.result),D={buffer:A.processBuffer(M),byteOffset:A.byteOffset,byteLength:M.byteLength};A.byteOffset+=M.byteLength,S(E.bufferViews.push(D)-1)}})},processAccessor:function(w,A,E,S){const C=this.options,M=this.json,D={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let T;if(w.array.constructor===Float32Array)T=e.FLOAT;else if(w.array.constructor===Uint32Array)T=e.UNSIGNED_INT;else if(w.array.constructor===Uint16Array)T=e.UNSIGNED_SHORT;else if(w.array.constructor===Uint8Array)T=e.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(E===void 0&&(E=0),S===void 0&&(S=w.count),C.truncateDrawRange&&A!==void 0&&A.index===null){const O=E+S,$=A.drawRange.count===1/0?w.count:A.drawRange.start+A.drawRange.count;E=Math.max(E,A.drawRange.start),S=Math.min(O,$)-E,S<0&&(S=0)}if(S===0)return null;const L=d(w,E,S);let F;A!==void 0&&(F=w===A.index?e.ELEMENT_ARRAY_BUFFER:e.ARRAY_BUFFER);const k=this.processBufferView(w,T,E,S,F),I={bufferView:k.id,byteOffset:k.byteOffset,componentType:T,count:S,max:L.max,min:L.min,type:D[w.itemSize]};return w.normalized===!0&&(I.normalized=!0),M.accessors||(M.accessors=[]),M.accessors.push(I)-1},processImage:function(w,A,E){const S=this,C=S.cache,M=S.json,D=S.options,T=S.pending;C.images.has(w)||C.images.set(w,{});const L=C.images.get(w),F=A===ci?"image/png":"image/jpeg",k=`${F}:flipY/${E.toString()}`;if(L[k]!==void 0)return L[k];M.images||(M.images=[]);const I={mimeType:F};if(D.embedImages){const $=x=x||document.createElement("canvas");$.width=Math.min(w.width,D.maxTextureSize),$.height=Math.min(w.height,D.maxTextureSize);const N=$.getContext("2d");if(E===!0&&(N.translate(0,$.height),N.scale(1,-1)),typeof HTMLImageElement<"u"&&w instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&w instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&w instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&w instanceof ImageBitmap)N.drawImage(w,0,0,$.width,$.height);else{A!==ci&&A!==_a&&console.error("GLTFExporter: Only RGB and RGBA formats are supported."),(w.width>D.maxTextureSize||w.height>D.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",w);let W=w.data;if(A===_a){W=new Uint8ClampedArray(w.height*w.width*4);for(let H=0,K=0;H<W.length;H+=4,K+=3)W[H+0]=w.data[K+0],W[H+1]=w.data[K+1],W[H+2]=w.data[K+2],W[H+3]=255}N.putImageData(new ImageData(W,w.width,w.height),0,0)}D.binary===!0?T.push(new Promise(W=>{$.toBlob(H=>{S.processBufferViewImage(H).then(K=>{I.bufferView=K,W()})},F)})):I.uri=$.toDataURL(F)}else I.uri=w.src;const O=M.images.push(I)-1;return L[k]=O,O},processSampler:function(w){const A=this.json;A.samplers||(A.samplers=[]);const E={magFilter:n[w.magFilter],minFilter:n[w.minFilter],wrapS:n[w.wrapS],wrapT:n[w.wrapT]};return A.samplers.push(E)-1},processTexture:function(w){const A=this.cache,E=this.json;if(A.textures.has(w))return A.textures.get(w);E.textures||(E.textures=[]);const S={sampler:this.processSampler(w),source:this.processImage(w.image,w.format,w.flipY)};w.name&&(S.name=w.name),this._invokeAll(M=>{M.writeTexture&&M.writeTexture(w,S)});const C=E.textures.push(S)-1;return A.textures.set(w,C),C},processMaterial:function(w){const A=this.cache,E=this.json;if(A.materials.has(w))return A.materials.get(w);if(w.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;E.materials||(E.materials=[]);const S={pbrMetallicRoughness:{}};w.isMeshStandardMaterial!==!0&&w.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const C=w.color.toArray().concat([w.opacity]);if(c(C,[1,1,1,1])||(S.pbrMetallicRoughness.baseColorFactor=C),w.isMeshStandardMaterial?(S.pbrMetallicRoughness.metallicFactor=w.metalness,S.pbrMetallicRoughness.roughnessFactor=w.roughness):(S.pbrMetallicRoughness.metallicFactor=.5,S.pbrMetallicRoughness.roughnessFactor=.5),w.metalnessMap||w.roughnessMap)if(w.metalnessMap===w.roughnessMap){const D={index:this.processTexture(w.metalnessMap)};this.applyTextureTransform(D,w.metalnessMap),S.pbrMetallicRoughness.metallicRoughnessTexture=D}else console.warn("THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.");if(w.map){const D={index:this.processTexture(w.map)};this.applyTextureTransform(D,w.map),S.pbrMetallicRoughness.baseColorTexture=D}if(w.emissive){const D=w.emissive.clone().multiplyScalar(w.emissiveIntensity).toArray();if(c(D,[0,0,0])||(S.emissiveFactor=D),w.emissiveMap){const T={index:this.processTexture(w.emissiveMap)};this.applyTextureTransform(T,w.emissiveMap),S.emissiveTexture=T}}if(w.normalMap){const D={index:this.processTexture(w.normalMap)};w.normalScale&&w.normalScale.x!==-1&&(w.normalScale.x!==w.normalScale.y&&console.warn("THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X."),D.scale=w.normalScale.x),this.applyTextureTransform(D,w.normalMap),S.normalTexture=D}if(w.aoMap){const D={index:this.processTexture(w.aoMap),texCoord:1};w.aoMapIntensity!==1&&(D.strength=w.aoMapIntensity),this.applyTextureTransform(D,w.aoMap),S.occlusionTexture=D}w.transparent?S.alphaMode="BLEND":w.alphaTest>0&&(S.alphaMode="MASK",S.alphaCutoff=w.alphaTest),w.side===_r&&(S.doubleSided=!0),w.name!==""&&(S.name=w.name),this.serializeUserData(w,S),this._invokeAll(D=>{D.writeMaterial&&D.writeMaterial(w,S)});const M=E.materials.push(S)-1;return A.materials.set(w,M),M},processMesh:function(w){const A=this.cache,E=this.json,S=[w.geometry.uuid];if(Array.isArray(w.material))for(let Z=0,J=w.material.length;Z<J;Z++)S.push(w.material[Z].uuid);else S.push(w.material.uuid);const C=S.join(":");if(A.meshes.has(C))return A.meshes.get(C);const M=w.geometry;let D;if(w.isLineSegments?D=e.LINES:w.isLineLoop?D=e.LINE_LOOP:w.isLine?D=e.LINE_STRIP:w.isPoints?D=e.POINTS:D=w.material.wireframe?e.LINES:e.TRIANGLES,M.isBufferGeometry!==!0)throw new Error("THREE.GLTFExporter: Geometry is not of type THREE.BufferGeometry.");const T={},L={},F=[],k=[],I={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},O=M.getAttribute("normal");O!==void 0&&!this.isNormalizedNormalAttribute(O)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),M.setAttribute("normal",this.createNormalizedNormalAttribute(O)));let $=null;for(let Z in M.attributes){if(Z.substr(0,5)==="morph")continue;var N=M.attributes[Z];if(Z=I[Z]||Z.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(Z)||(Z=`_${Z}`),A.attributes.has(this.getUID(N))){L[Z]=A.attributes.get(this.getUID(N));continue}$=null;const X=N.array;Z==="JOINTS_0"&&!(X instanceof Uint16Array)&&!(X instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),$=new Rn(new Uint16Array(X),N.itemSize,N.normalized));const Q=this.processAccessor($||N,M);Q!==null&&(L[Z]=Q,A.attributes.set(this.getUID(N),Q))}if(O!==void 0&&M.setAttribute("normal",O),Object.keys(L).length===0)return null;if(w.morphTargetInfluences!==void 0&&w.morphTargetInfluences.length>0){const Z=[],J=[],X={};if(w.morphTargetDictionary!==void 0)for(let Q in w.morphTargetDictionary)X[w.morphTargetDictionary[Q]]=Q;for(let Q=0;Q<w.morphTargetInfluences.length;++Q){const oe={};let he=!1;for(let ve in M.morphAttributes){if(ve!=="position"&&ve!=="normal"){he||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),he=!0);continue}var N=M.morphAttributes[ve][Q];const V=ve.toUpperCase(),R=M.attributes[ve];if(A.attributes.has(this.getUID(N))){oe[V]=A.attributes.get(this.getUID(N));continue}const B=N.clone();if(!M.morphTargetsRelative)for(let j=0,se=N.count;j<se;j++)B.setXYZ(j,N.getX(j)-R.getX(j),N.getY(j)-R.getY(j),N.getZ(j)-R.getZ(j));oe[V]=this.processAccessor(B,M),A.attributes.set(this.getUID(R),oe[V])}k.push(oe),Z.push(w.morphTargetInfluences[Q]),w.morphTargetDictionary!==void 0&&J.push(X[Q])}T.weights=Z,J.length>0&&(T.extras={},T.extras.targetNames=J)}const W=Array.isArray(w.material);if(W&&M.groups.length===0)return null;const H=W?w.material:[w.material],K=W?M.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let Z=0,J=K.length;Z<J;Z++){const X={mode:D,attributes:L};if(this.serializeUserData(M,X),k.length>0&&(X.targets=k),M.index!==null){let oe=this.getUID(M.index);(K[Z].start!==void 0||K[Z].count!==void 0)&&(oe+=`:${K[Z].start}:${K[Z].count}`),A.attributes.has(oe)?X.indices=A.attributes.get(oe):(X.indices=this.processAccessor(M.index,M,K[Z].start,K[Z].count),A.attributes.set(oe,X.indices)),X.indices===null&&delete X.indices}const Q=this.processMaterial(H[K[Z].materialIndex]);Q!==null&&(X.material=Q),F.push(X)}T.primitives=F,E.meshes||(E.meshes=[]),this._invokeAll(Z=>{Z.writeMesh&&Z.writeMesh(w,T)});const ee=E.meshes.push(T)-1;return A.meshes.set(C,ee),ee},processCamera:function(w){const A=this.json;A.cameras||(A.cameras=[]);const E=w.isOrthographicCamera,S={type:E?"orthographic":"perspective"};return E?S.orthographic={xmag:w.right*2,ymag:w.top*2,zfar:w.far<=0?.001:w.far,znear:w.near<0?0:w.near}:S.perspective={aspectRatio:w.aspect,yfov:bB.degToRad(w.fov),zfar:w.far<=0?.001:w.far,znear:w.near<0?0:w.near},w.name!==""&&(S.name=w.type),A.cameras.push(S)-1},processAnimation:function(w,A){const E=this.json,S=this.nodeMap;E.animations||(E.animations=[]),w=t.Utils.mergeMorphTargetTracks(w.clone(),A);const C=w.tracks,M=[],D=[];for(let T=0;T<C.length;++T){const L=C[T],F=Zt.parseTrackName(L.name);let k=Zt.findNode(A,F.nodeName);const I=r[F.propertyName];if(F.objectName==="bones"&&(k.isSkinnedMesh===!0?k=k.skeleton.getBoneByName(F.objectIndex):k=void 0),!k||!I)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',L.name),null;const O=1;let $=L.values.length/L.times.length;I===r.morphTargetInfluences&&($/=k.morphTargetInfluences.length);let N;L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(N="CUBICSPLINE",$/=3):L.getInterpolation()===jg?N="STEP":N="LINEAR",D.push({input:this.processAccessor(new Rn(L.times,O)),output:this.processAccessor(new Rn(L.values,$)),interpolation:N}),M.push({sampler:D.length-1,target:{node:S.get(k),path:I}})}return E.animations.push({name:w.name||`clip_${E.animations.length}`,samplers:D,channels:M}),E.animations.length-1},processSkin:function(w){const A=this.json,E=this.nodeMap,S=A.nodes[E.get(w)],C=w.skeleton;if(C===void 0)return null;const M=w.skeleton.bones[0];if(M===void 0)return null;const D=[],T=new Float32Array(C.bones.length*16),L=new st;for(let k=0;k<C.bones.length;++k)D.push(E.get(C.bones[k])),L.copy(C.boneInverses[k]),L.multiply(w.bindMatrix).toArray(T,k*16);return A.skins===void 0&&(A.skins=[]),A.skins.push({inverseBindMatrices:this.processAccessor(new Rn(T,16)),joints:D,skeleton:E.get(M)}),S.skin=A.skins.length-1},processNode:function(w){const A=this.json,E=this.options,S=this.nodeMap;A.nodes||(A.nodes=[]);const C={};if(E.trs){const D=w.quaternion.toArray(),T=w.position.toArray(),L=w.scale.toArray();c(D,[0,0,0,1])||(C.rotation=D),c(T,[0,0,0])||(C.translation=T),c(L,[1,1,1])||(C.scale=L)}else w.matrixAutoUpdate&&w.updateMatrix(),h(w.matrix)===!1&&(C.matrix=w.matrix.elements);if(w.name!==""&&(C.name=String(w.name)),this.serializeUserData(w,C),w.isMesh||w.isLine||w.isPoints){const D=this.processMesh(w);D!==null&&(C.mesh=D)}else w.isCamera&&(C.camera=this.processCamera(w));if(w.isSkinnedMesh&&this.skins.push(w),w.children.length>0){const D=[];for(let T=0,L=w.children.length;T<L;T++){const F=w.children[T];if(F.visible||E.onlyVisible===!1){var M=this.processNode(F);M!==null&&D.push(M)}}D.length>0&&(C.children=D)}this._invokeAll(D=>{D.writeNode&&D.writeNode(w,C)});var M=A.nodes.push(C)-1;return S.set(w,M),M},processScene:function(w){const A=this.json,E=this.options;A.scenes||(A.scenes=[],A.scene=0);const S={};w.name!==""&&(S.name=w.name),A.scenes.push(S);const C=[];for(let M=0,D=w.children.length;M<D;M++){const T=w.children[M];if(T.visible||E.onlyVisible===!1){const L=this.processNode(T);L!==null&&C.push(L)}}C.length>0&&(S.nodes=C),this.serializeUserData(w,S)},processObjects:function(w){const A=new Zg;A.name="AuxScene";for(let E=0;E<w.length;E++)A.children.push(w[E]);this.processScene(A)},processInput:function(w){const A=this.options;w=w instanceof Array?w:[w],this._invokeAll(S=>{S.beforeParse&&S.beforeParse(w)});const E=[];for(let S=0;S<w.length;S++)w[S]instanceof Zg?this.processScene(w[S]):E.push(w[S]);E.length>0&&this.processObjects(E);for(let S=0;S<this.skins.length;++S)this.processSkin(this.skins[S]);for(let S=0;S<A.animations.length;++S)this.processAnimation(A.animations[S],w[0]);this._invokeAll(S=>{S.afterParse&&S.afterParse(w)})},_invokeAll:function(w){for(let A=0,E=this.plugins.length;A<E;A++)w(this.plugins[A])}};function m(w){this.writer=w,this.name="KHR_lights_punctual"}m.prototype={constructor:m,writeNode:function(w,A){if(!w.isLight)return;if(!w.isDirectionalLight&&!w.isPointLight&&!w.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",w);return}const E=this.writer,S=E.json,C=E.extensionsUsed,M={};w.name&&(M.name=w.name),M.color=w.color.toArray(),M.intensity=w.intensity,w.isDirectionalLight?M.type="directional":w.isPointLight?(M.type="point",w.distance>0&&(M.range=w.distance)):w.isSpotLight&&(M.type="spot",w.distance>0&&(M.range=w.distance),M.spot={},M.spot.innerConeAngle=(w.penumbra-1)*w.angle*-1,M.spot.outerConeAngle=w.angle),w.decay!==void 0&&w.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),w.target&&(w.target.parent!==w||w.target.position.x!==0||w.target.position.y!==0||w.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),C[this.name]||(S.extensions=S.extensions||{},S.extensions[this.name]={lights:[]},C[this.name]=!0);const D=S.extensions[this.name].lights;D.push(M),A.extensions=A.extensions||{},A.extensions[this.name]={light:D.length-1}}};function v(w){this.writer=w,this.name="KHR_materials_unlit"}v.prototype={constructor:v,writeMaterial:function(w,A){if(!w.isMeshBasicMaterial)return;const S=this.writer.extensionsUsed;A.extensions=A.extensions||{},A.extensions[this.name]={},S[this.name]=!0,A.pbrMetallicRoughness.metallicFactor=0,A.pbrMetallicRoughness.roughnessFactor=.9}};function b(w){this.writer=w,this.name="KHR_materials_pbrSpecularGlossiness"}return b.prototype={constructor:b,writeMaterial:function(w,A){if(!w.isGLTFSpecularGlossinessMaterial)return;const E=this.writer,S=E.extensionsUsed,C={};A.pbrMetallicRoughness.baseColorFactor&&(C.diffuseFactor=A.pbrMetallicRoughness.baseColorFactor);const M=[1,1,1];if(w.specular.toArray(M,0),C.specularFactor=M,C.glossinessFactor=w.glossiness,A.pbrMetallicRoughness.baseColorTexture&&(C.diffuseTexture=A.pbrMetallicRoughness.baseColorTexture),w.specularMap){const D={index:E.processTexture(w.specularMap)};E.applyTextureTransform(D,w.specularMap),C.specularGlossinessTexture=D}A.extensions=A.extensions||{},A.extensions[this.name]=C,S[this.name]=!0}},t.Utils={insertKeyframe:function(w,A){const S=w.getValueSize(),C=new w.TimeBufferType(w.times.length+1),M=new w.ValueBufferType(w.values.length+S),D=w.createInterpolant(new w.ValueBufferType(S));let T;if(w.times.length===0){C[0]=A;for(let L=0;L<S;L++)M[L]=0;T=0}else if(A<w.times[0]){if(Math.abs(w.times[0]-A)<.001)return 0;C[0]=A,C.set(w.times,1),M.set(D.evaluate(A),0),M.set(w.values,S),T=0}else if(A>w.times[w.times.length-1]){if(Math.abs(w.times[w.times.length-1]-A)<.001)return w.times.length-1;C[C.length-1]=A,C.set(w.times,0),M.set(w.values,0),M.set(D.evaluate(A),w.values.length),T=C.length-1}else for(let L=0;L<w.times.length;L++){if(Math.abs(w.times[L]-A)<.001)return L;if(w.times[L]<A&&w.times[L+1]>A){C.set(w.times.slice(0,L+1),0),C[L+1]=A,C.set(w.times.slice(L+1),L+2),M.set(w.values.slice(0,(L+1)*S),0),M.set(D.evaluate(A),(L+1)*S),M.set(w.values.slice((L+1)*S),(L+2)*S),T=L+1;break}}return w.times=C,w.values=M,T},mergeMorphTargetTracks:function(w,A){const E=[],S={},C=w.tracks;for(let M=0;M<C.length;++M){let D=C[M];const T=Zt.parseTrackName(D.name),L=Zt.findNode(A,T.nodeName);if(T.propertyName!=="morphTargetInfluences"||T.propertyIndex===void 0){E.push(D);continue}if(D.createInterpolant!==D.InterpolantFactoryMethodDiscrete&&D.createInterpolant!==D.InterpolantFactoryMethodLinear){if(D.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),D=D.clone(),D.setInterpolation(qg)}const F=L.morphTargetInfluences.length,k=L.morphTargetDictionary[T.propertyIndex];if(k===void 0)throw new Error(`THREE.GLTFExporter: Morph target name not found: ${T.propertyIndex}`);let I;if(S[L.uuid]===void 0){I=D.clone();const $=new I.ValueBufferType(F*I.times.length);for(let N=0;N<I.times.length;N++)$[N*F+k]=I.values[N];I.name=`${T.nodeName||""}.morphTargetInfluences`,I.values=$,S[L.uuid]=I,E.push(I);continue}const O=D.createInterpolant(new D.ValueBufferType(1));I=S[L.uuid];for(let $=0;$<I.times.length;$++)I.values[$*F+k]=O.evaluate(I.times[$]);for(let $=0;$<D.times.length;$++){const N=this.insertKeyframe(I,D.times[$]);I.values[N*F+k]=D.values[$]}}return w.tracks=E,w}},t})();var Ku=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ym(t){var e=t.default;if(typeof e=="function"){var n=function(){return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}class fK extends RJ{constructor(e){super(e),this.type=Hs}parse(e){const a=function(v,b){switch(v){case 1:console.error("THREE.RGBELoader Read Error: "+(b||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(b||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(b||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(b||""))}return-1},f=`
`,h=function(v,b,w){b=b||1024;let E=v.pos,S=-1,C=0,M="",D=String.fromCharCode.apply(null,new Uint16Array(v.subarray(E,E+128)));for(;0>(S=D.indexOf(f))&&C<b&&E<v.byteLength;)M+=D,C+=D.length,E+=128,D+=String.fromCharCode.apply(null,new Uint16Array(v.subarray(E,E+128)));return-1<S?(w!==!1&&(v.pos+=C+S+1),M+D.slice(0,S)):!1},d=function(v){const b=/^#\?(\S+)/,w=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,A=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,E=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,C={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let M,D;if(v.pos>=v.byteLength||!(M=h(v)))return a(1,"no header found");if(!(D=M.match(b)))return a(3,"bad initial token");for(C.valid|=1,C.programtype=D[1],C.string+=M+`
`;M=h(v),M!==!1;){if(C.string+=M+`
`,M.charAt(0)==="#"){C.comments+=M+`
`;continue}if((D=M.match(w))&&(C.gamma=parseFloat(D[1],10)),(D=M.match(A))&&(C.exposure=parseFloat(D[1],10)),(D=M.match(E))&&(C.valid|=2,C.format=D[1]),(D=M.match(S))&&(C.valid|=4,C.height=parseInt(D[1],10),C.width=parseInt(D[2],10)),C.valid&2&&C.valid&4)break}return C.valid&2?C.valid&4?C:a(3,"missing image size specifier"):a(3,"missing format specifier")},p=function(v,b,w){const A=b;if(A<8||A>32767||v[0]!==2||v[1]!==2||v[2]&128)return new Uint8Array(v);if(A!==(v[2]<<8|v[3]))return a(3,"wrong scanline width");const E=new Uint8Array(4*b*w);if(!E.length)return a(4,"unable to allocate buffer space");let S=0,C=0;const M=4*A,D=new Uint8Array(4),T=new Uint8Array(M);let L=w;for(;L>0&&C<v.byteLength;){if(C+4>v.byteLength)return a(1);if(D[0]=v[C++],D[1]=v[C++],D[2]=v[C++],D[3]=v[C++],D[0]!=2||D[1]!=2||(D[2]<<8|D[3])!=A)return a(3,"bad rgbe scanline format");let F=0,k;for(;F<M&&C<v.byteLength;){k=v[C++];const O=k>128;if(O&&(k-=128),k===0||F+k>M)return a(3,"bad scanline data");if(O){const $=v[C++];for(let N=0;N<k;N++)T[F++]=$}else T.set(v.subarray(C,C+k),F),F+=k,C+=k}const I=A;for(let O=0;O<I;O++){let $=0;E[S]=T[O+$],$+=A,E[S+1]=T[O+$],$+=A,E[S+2]=T[O+$],$+=A,E[S+3]=T[O+$],S+=4}L--}return E},g=function(v,b,w,A){const E=v[b+3],S=Math.pow(2,E-128)/255;w[A+0]=v[b+0]*S,w[A+1]=v[b+1]*S,w[A+2]=v[b+2]*S},x=function(v,b,w,A){const E=v[b+3],S=Math.pow(2,E-128)/255;w[A+0]=Ib.toHalfFloat(v[b+0]*S),w[A+1]=Ib.toHalfFloat(v[b+1]*S),w[A+2]=Ib.toHalfFloat(v[b+2]*S)},_=new Uint8Array(e);_.pos=0;const m=d(_);if(m!==-1){const v=m.width,b=m.height,w=p(_.subarray(_.pos),v,b);if(w!==-1){let A,E,S,C;switch(this.type){case Hs:A=w,E=pB,S=Hs;break;case Ao:C=w.length/4*3;const M=new Float32Array(C);for(let T=0;T<C;T++)g(w,T*4,M,T*3);A=M,E=_a,S=Ao;break;case ll:C=w.length/4*3;const D=new Uint16Array(C);for(let T=0;T<C;T++)x(w,T*4,D,T*3);A=D,E=_a,S=ll;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:v,height:b,data:A,header:m.string,gamma:m.gamma,exposure:m.exposure,format:E,type:S}}}return null}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){switch(o.type){case Hs:o.encoding=S_,o.minFilter=mr,o.magFilter=mr,o.generateMipmaps=!1,o.flipY=!0;break;case Ao:o.encoding=Zr,o.minFilter=kn,o.magFilter=kn,o.generateMipmaps=!1,o.flipY=!0;break;case ll:o.encoding=Zr,o.minFilter=kn,o.magFilter=kn,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,r,i)}}function hK(t,e){const n=new cK,r={trs:!1,onlyVisible:!0,truncateDrawRange:!1,binary:!1,forcePowerOfTwoTextures:!1,maxTextureSize:1/0};n.parse(t,e,r)}var kb=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Rb(t,e,n,r){t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent("on".concat(e),function(){n(window.event)})}function yN(t,e){for(var n=e.slice(0,e.length-1),r=0;r<n.length;r++)n[r]=t[n[r].toLowerCase()];return n}function _N(t){typeof t!="string"&&(t=""),t=t.replace(/\s/g,"");for(var e=t.split(","),n=e.lastIndexOf("");n>=0;)e[n-1]+=",",e.splice(n,1),n=e.lastIndexOf("");return e}function dK(t,e){for(var n=t.length>=e.length?t:e,r=t.length>=e.length?e:t,i=!0,s=0;s<n.length;s++)r.indexOf(n[s])===-1&&(i=!1);return i}var im={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":kb?173:189,"=":kb?61:187,";":kb?59:186,"'":222,"[":219,"]":221,"\\":220},Ma={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},SA={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},ai={16:!1,18:!1,17:!1,91:!1},xr={};for(var b0=1;b0<20;b0++)im["f".concat(b0)]=111+b0;var Nn=[],sL=!1,wN="all",bN=[],k_=function(e){return im[e.toLowerCase()]||Ma[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},pK=function(e){return Object.keys(im).find(function(n){return im[n]===e})},gK=function(e){return Object.keys(Ma).find(function(n){return Ma[n]===e})};function xN(t){wN=t||"all"}function sm(){return wN||"all"}function mK(){return Nn.slice(0)}function vK(){return Nn.map(function(t){return pK(t)||gK(t)||String.fromCharCode(t)})}function yK(t){var e=t.target||t.srcElement,n=e.tagName,r=!0;return(e.isContentEditable||(n==="INPUT"||n==="TEXTAREA"||n==="SELECT")&&!e.readOnly)&&(r=!1),r}function _K(t){return typeof t=="string"&&(t=k_(t)),Nn.indexOf(t)!==-1}function wK(t,e){var n,r;t||(t=sm());for(var i in xr)if(Object.prototype.hasOwnProperty.call(xr,i))for(n=xr[i],r=0;r<n.length;)n[r].scope===t?n.splice(r,1):r++;sm()===t&&xN(e||"all")}function bK(t){var e=t.keyCode||t.which||t.charCode,n=Nn.indexOf(e);if(n>=0&&Nn.splice(n,1),t.key&&t.key.toLowerCase()==="meta"&&Nn.splice(0,Nn.length),(e===93||e===224)&&(e=91),e in ai){ai[e]=!1;for(var r in Ma)Ma[r]===e&&(ol[r]=!1)}}function xK(t){if(typeof t>"u")Object.keys(xr).forEach(function(o){return delete xr[o]});else if(Array.isArray(t))t.forEach(function(o){o.key&&Ob(o)});else if(typeof t=="object")t.key&&Ob(t);else if(typeof t=="string"){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n[0],s=n[1];typeof i=="function"&&(s=i,i=""),Ob({key:t,scope:i,method:s,splitKey:"+"})}}var Ob=function(e){var n=e.key,r=e.scope,i=e.method,s=e.splitKey,o=s===void 0?"+":s,a=_N(n);a.forEach(function(l){var u=l.split(o),c=u.length,f=u[c-1],h=f==="*"?"*":k_(f);if(!!xr[h]){r||(r=sm());var d=c>1?yN(Ma,u):[];xr[h]=xr[h].filter(function(p){var g=i?p.method===i:!0;return!(g&&p.scope===r&&dK(p.mods,d))})}})};function oL(t,e,n,r){if(e.element===r){var i;if(e.scope===n||e.scope==="all"){i=e.mods.length>0;for(var s in ai)Object.prototype.hasOwnProperty.call(ai,s)&&(!ai[s]&&e.mods.indexOf(+s)>-1||ai[s]&&e.mods.indexOf(+s)===-1)&&(i=!1);(e.mods.length===0&&!ai[16]&&!ai[18]&&!ai[17]&&!ai[91]||i||e.shortcut==="*")&&e.method(t,e)===!1&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}}function aL(t,e){var n=xr["*"],r=t.keyCode||t.which||t.charCode;if(!!ol.filter.call(this,t)){if((r===93||r===224)&&(r=91),Nn.indexOf(r)===-1&&r!==229&&Nn.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(p){var g=SA[p];t[p]&&Nn.indexOf(g)===-1?Nn.push(g):!t[p]&&Nn.indexOf(g)>-1?Nn.splice(Nn.indexOf(g),1):p==="metaKey"&&t[p]&&Nn.length===3&&(t.ctrlKey||t.shiftKey||t.altKey||(Nn=Nn.slice(Nn.indexOf(g))))}),r in ai){ai[r]=!0;for(var i in Ma)Ma[i]===r&&(ol[i]=!0);if(!n)return}for(var s in ai)Object.prototype.hasOwnProperty.call(ai,s)&&(ai[s]=t[SA[s]]);t.getModifierState&&!(t.altKey&&!t.ctrlKey)&&t.getModifierState("AltGraph")&&(Nn.indexOf(17)===-1&&Nn.push(17),Nn.indexOf(18)===-1&&Nn.push(18),ai[17]=!0,ai[18]=!0);var o=sm();if(n)for(var a=0;a<n.length;a++)n[a].scope===o&&(t.type==="keydown"&&n[a].keydown||t.type==="keyup"&&n[a].keyup)&&oL(t,n[a],o,e);if(r in xr){for(var l=0;l<xr[r].length;l++)if((t.type==="keydown"&&xr[r][l].keydown||t.type==="keyup"&&xr[r][l].keyup)&&xr[r][l].key){for(var u=xr[r][l],c=u.splitKey,f=u.key.split(c),h=[],d=0;d<f.length;d++)h.push(k_(f[d]));h.sort().join("")===Nn.sort().join("")&&oL(t,u,o,e)}}}}function SK(t){return bN.indexOf(t)>-1}function ol(t,e,n){Nn=[];var r=_N(t),i=[],s="all",o=document,a=0,l=!1,u=!0,c="+",f=!1;for(n===void 0&&typeof e=="function"&&(n=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(s=e.scope),e.element&&(o=e.element),e.keyup&&(l=e.keyup),e.keydown!==void 0&&(u=e.keydown),e.capture!==void 0&&(f=e.capture),typeof e.splitKey=="string"&&(c=e.splitKey)),typeof e=="string"&&(s=e);a<r.length;a++)t=r[a].split(c),i=[],t.length>1&&(i=yN(Ma,t)),t=t[t.length-1],t=t==="*"?"*":k_(t),t in xr||(xr[t]=[]),xr[t].push({keyup:l,keydown:u,scope:s,mods:i,shortcut:r[a],method:n,key:r[a],splitKey:c,element:o});typeof o<"u"&&!SK(o)&&window&&(bN.push(o),Rb(o,"keydown",function(h){aL(h,o)},f),sL||(sL=!0,Rb(window,"focus",function(){Nn=[]},f)),Rb(o,"keyup",function(h){aL(h,o),bK(h)},f))}function AK(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(xr).forEach(function(n){var r=xr[n].filter(function(i){return i.scope===e&&i.shortcut===t});r.forEach(function(i){i&&i.method&&i.method()})})}var Bb={getPressedKeyString:vK,setScope:xN,getScope:sm,deleteScope:wK,getPressedKeyCodes:mK,isPressed:_K,filter:yK,trigger:AK,unbind:xK,keyMap:im,modifier:Ma,modifierMap:SA};for(var Nb in Bb)Object.prototype.hasOwnProperty.call(Bb,Nb)&&(ol[Nb]=Bb[Nb]);if(typeof window<"u"){var EK=window.hotkeys;ol.noConflict=function(t){return t&&window.hotkeys===ol&&(window.hotkeys=EK),ol},window.hotkeys=ol}const CK="autosave_db",Vb="autosave_store",MK=function(t){const e=t instanceof ArrayBuffer?new Blob([t],{type:"application/octet-stream"}):new Blob([JSON.stringify(t,null,2)],{type:"text/plain"});TK(e)};function DK(){hK(_i,MK)}ol("ctrl+s",function(t){t.preventDefault(),DK()});function TK(t){const e=window.indexedDB.open(CK,1);e.onerror=function(n){console.error("IndexedDB error:",n.target.error)},e.onupgradeneeded=function(n){n.target.result.createObjectStore(Vb,{autoIncrement:!0})},e.onsuccess=function(n){const s=n.target.result.transaction([Vb],"readwrite").objectStore(Vb);s.clear();const o=s.add(t);o.onerror=function(a){console.error("IndexedDB error:",a.target.error)},o.onsuccess=function(){}}}const PM=t=>{Wt&&(Wt.enabled=t)},bc=new I_,ts=new q,Xl=new q,Un=new In,lL={X:new q(1,0,0),Y:new q(0,1,0),Z:new q(0,0,1)},uL={type:"change"},cL={type:"mouseDown"},fL={type:"mouseUp",mode:null},PK={type:"objectChange"};class SN extends Qt{constructor(e,n){super(),n===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),n=document),this.visible=!1,this.domElement=n,this.domElement.style.touchAction="none";const r=new AN;this._gizmo=r,this.add(r);const i=new EN;this._plane=i,this.add(i);const s=this;function o(m,v){let b=v;Object.defineProperty(s,m,{get:function(){return b!==void 0?b:v},set:function(w){b!==w&&(b=w,i[m]=w,r[m]=w,s.dispatchEvent({type:m+"-changed",value:w}),s.dispatchEvent(uL))}}),s[m]=v,i[m]=v,r[m]=v}o("camera",e),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const a=new q,l=new q,u=new In,c=new In,f=new q,h=new In,d=new q,p=new q,g=new q,x=0,_=new q;o("worldPosition",a),o("worldPositionStart",l),o("worldQuaternion",u),o("worldQuaternionStart",c),o("cameraPosition",f),o("cameraQuaternion",h),o("pointStart",d),o("pointEnd",p),o("rotationAxis",g),o("rotationAngle",x),o("eye",_),this._offset=new q,this._startNorm=new q,this._endNorm=new q,this._cameraScale=new q,this._parentPosition=new q,this._parentQuaternion=new In,this._parentQuaternionInv=new In,this._parentScale=new q,this._worldScaleStart=new q,this._worldQuaternionInv=new In,this._worldScale=new q,this._positionStart=new q,this._quaternionStart=new In,this._scaleStart=new q,this._getPointer=LK.bind(this),this._onPointerDown=IK.bind(this),this._onPointerHover=FK.bind(this),this._onPointerMove=kK.bind(this),this._onPointerUp=RK.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;bc.setFromCamera(e,this.camera);const n=zb(this._gizmo.picker[this.mode],bc);n?this.axis=n.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){bc.setFromCamera(e,this.camera);const n=zb(this._plane,bc,!0);n&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(n.point).sub(this.worldPositionStart)),this.dragging=!0,cL.mode=this.mode,this.dispatchEvent(cL)}}pointerMove(e){const n=this.axis,r=this.mode,i=this.object;let s=this.space;if(r==="scale"?s="local":(n==="E"||n==="XYZE"||n==="XYZ")&&(s="world"),i===void 0||n===null||this.dragging===!1||e.button!==-1)return;bc.setFromCamera(e,this.camera);const o=zb(this._plane,bc,!0);if(!!o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),r==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),s==="local"&&n!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),n.indexOf("X")===-1&&(this._offset.x=0),n.indexOf("Y")===-1&&(this._offset.y=0),n.indexOf("Z")===-1&&(this._offset.z=0),s==="local"&&n!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(s==="local"&&(i.position.applyQuaternion(Un.copy(this._quaternionStart).invert()),n.search("X")!==-1&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),n.search("Y")!==-1&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),n.search("Z")!==-1&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),s==="world"&&(i.parent&&i.position.add(ts.setFromMatrixPosition(i.parent.matrixWorld)),n.search("X")!==-1&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),n.search("Y")!==-1&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),n.search("Z")!==-1&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(ts.setFromMatrixPosition(i.parent.matrixWorld))));else if(r==="scale"){if(n.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),Xl.set(a,a,a)}else ts.copy(this.pointStart),Xl.copy(this.pointEnd),ts.applyQuaternion(this._worldQuaternionInv),Xl.applyQuaternion(this._worldQuaternionInv),Xl.divide(ts),n.search("X")===-1&&(Xl.x=1),n.search("Y")===-1&&(Xl.y=1),n.search("Z")===-1&&(Xl.z=1);if(i.scale.copy(this._scaleStart).multiply(Xl),this.scaleSnap){if(n.search("X")!==-1){const a=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap,l=a-this._scaleStart.x;i.scale.x=a,i.position.x=+l/2}n.search("Y")!==-1&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),n.search("Z")!==-1&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap)}}else if(r==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(ts.setFromMatrixPosition(this.camera.matrixWorld));n==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):n==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(ts.copy(this.rotationAxis).cross(this.eye))*a):(n==="X"||n==="Y"||n==="Z")&&(this.rotationAxis.copy(lL[n]),ts.copy(lL[n]),s==="local"&&ts.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(ts.cross(this.eye).normalize())*a),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),s==="local"&&n!=="E"&&n!=="XYZE"?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(Un.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(Un.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(uL),this.dispatchEvent(PK)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(fL.mode=this.mode,this.dispatchEvent(fL)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}getRaycaster(){return bc}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}SN.prototype.isTransformControls=!0;function LK(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{const e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function FK(t){if(!!this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t));break}}function IK(t){!this.enabled||(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function kK(t){!this.enabled||this.pointerMove(this._getPointer(t))}function RK(t){!this.enabled||(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function zb(t,e,n){const r=e.intersectObject(t,!0);for(let i=0;i<r.length;i++)if(r[i].object.visible||n)return r[i];return!1}const x0=new ff,bn=new q(0,1,0),hL=new q(0,0,0),dL=new st,S0=new In,Ay=new In,jo=new q,pL=new st,Jp=new q(1,0,0),Fc=new q(0,1,0),Kp=new q(0,0,1),A0=new q,Ep=new q,Cp=new q;class AN extends Qt{constructor(){super(),this.type="TransformControlsGizmo";const e=new gs({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=new Ks({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),r=e.clone();r.opacity=.15;const i=n.clone();i.opacity=.5;const s=e.clone();s.color.setHex(16711680);const o=e.clone();o.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const u=e.clone();u.color.setHex(65280),u.opacity=.5;const c=e.clone();c.color.setHex(255),c.opacity=.5;const f=e.clone();f.opacity=.25;const h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);const p=e.clone();p.color.setHex(7895160);const g=new oi(0,.04,.1,12);g.translate(0,.05,0);const x=new Ot(.08,.08,.08);x.translate(0,.04,0);const _=new Gt;_.setAttribute("position",new Vt([0,0,0,1,0,0],3));const m=new oi(.0075,.0075,.5,3);m.translate(0,.25,0);function v(k,I){const O=new Nc(k,.0075,3,64,I*Math.PI*2);return O.rotateY(Math.PI/2),O.rotateX(Math.PI/2),O}function b(){const k=new Gt;return k.setAttribute("position",new Vt([0,0,0,1,1,1],3)),k}const w={X:[[new Fe(g,s),[.5,0,0],[0,0,-Math.PI/2]],[new Fe(g,s),[-.5,0,0],[0,0,Math.PI/2]],[new Fe(m,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Fe(g,o),[0,.5,0]],[new Fe(g,o),[0,-.5,0],[Math.PI,0,0]],[new Fe(m,o)]],Z:[[new Fe(g,a),[0,0,.5],[Math.PI/2,0,0]],[new Fe(g,a),[0,0,-.5],[-Math.PI/2,0,0]],[new Fe(m,a),null,[Math.PI/2,0,0]]],XYZ:[[new Fe(new xh(.1,0),f.clone()),[0,0,0]]],XY:[[new Fe(new Ot(.15,.15,.01),c.clone()),[.15,.15,0]]],YZ:[[new Fe(new Ot(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fe(new Ot(.15,.15,.01),u.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},A={X:[[new Fe(new oi(.2,0,.6,4),r),[.3,0,0],[0,0,-Math.PI/2]],[new Fe(new oi(.2,0,.6,4),r),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Fe(new oi(.2,0,.6,4),r),[0,.3,0]],[new Fe(new oi(.2,0,.6,4),r),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Fe(new oi(.2,0,.6,4),r),[0,0,.3],[Math.PI/2,0,0]],[new Fe(new oi(.2,0,.6,4),r),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Fe(new xh(.2,0),r)]],XY:[[new Fe(new Ot(.2,.2,.01),r),[.15,.15,0]]],YZ:[[new Fe(new Ot(.2,.2,.01),r),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fe(new Ot(.2,.2,.01),r),[.15,0,.15],[-Math.PI/2,0,0]]]},E={START:[[new Fe(new xh(.01,2),i),null,null,null,"helper"]],END:[[new Fe(new xh(.01,2),i),null,null,null,"helper"]],DELTA:[[new Pr(b(),i),null,null,null,"helper"]],X:[[new Pr(_,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Pr(_,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Pr(_,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},S={XYZE:[[new Fe(v(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new Fe(v(.5,.5),s)]],Y:[[new Fe(v(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new Fe(v(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new Fe(v(.75,1),h),null,[0,Math.PI/2,0]]]},C={AXIS:[[new Pr(_,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},M={XYZE:[[new Fe(new F_(.25,10,8),r)]],X:[[new Fe(new Nc(.5,.1,4,24),r),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Fe(new Nc(.5,.1,4,24),r),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Fe(new Nc(.5,.1,4,24),r),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Fe(new Nc(.75,.1,2,24),r)]]},D={X:[[new Fe(x,s),[.5,0,0],[0,0,-Math.PI/2]],[new Fe(m,s),[0,0,0],[0,0,-Math.PI/2]],[new Fe(x,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Fe(x,o),[0,.5,0]],[new Fe(m,o)],[new Fe(x,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Fe(x,a),[0,0,.5],[Math.PI/2,0,0]],[new Fe(m,a),[0,0,0],[Math.PI/2,0,0]],[new Fe(x,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Fe(new Ot(.15,.15,.01),c),[.15,.15,0]]],YZ:[[new Fe(new Ot(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fe(new Ot(.15,.15,.01),u),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Fe(new Ot(.1,.1,.1),f.clone())]]},T={X:[[new Fe(new oi(.2,0,.6,4),r),[.3,0,0],[0,0,-Math.PI/2]],[new Fe(new oi(.2,0,.6,4),r),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Fe(new oi(.2,0,.6,4),r),[0,.3,0]],[new Fe(new oi(.2,0,.6,4),r),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Fe(new oi(.2,0,.6,4),r),[0,0,.3],[Math.PI/2,0,0]],[new Fe(new oi(.2,0,.6,4),r),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Fe(new Ot(.2,.2,.01),r),[.15,.15,0]]],YZ:[[new Fe(new Ot(.2,.2,.01),r),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Fe(new Ot(.2,.2,.01),r),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Fe(new Ot(.2,.2,.2),r),[0,0,0]]]},L={X:[[new Pr(_,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Pr(_,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Pr(_,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function F(k){const I=new Qt;for(const O in k)for(let $=k[O].length;$--;){const N=k[O][$][0].clone(),W=k[O][$][1],H=k[O][$][2],K=k[O][$][3],ee=k[O][$][4];N.name=O,N.tag=ee,W&&N.position.set(W[0],W[1],W[2]),H&&N.rotation.set(H[0],H[1],H[2]),K&&N.scale.set(K[0],K[1],K[2]),N.updateMatrix();const Z=N.geometry.clone();Z.applyMatrix4(N.matrix),N.geometry=Z,N.renderOrder=1/0,N.position.set(0,0,0),N.rotation.set(0,0,0),N.scale.set(1,1,1),I.add(N)}return I}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=F(w)),this.add(this.gizmo.rotate=F(S)),this.add(this.gizmo.scale=F(D)),this.add(this.picker.translate=F(A)),this.add(this.picker.rotate=F(M)),this.add(this.picker.scale=F(T)),this.add(this.helper.translate=F(E)),this.add(this.helper.rotate=F(C)),this.add(this.helper.scale=F(L)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const r=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:Ay;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let s=0;s<i.length;s++){const o=i[s];o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(a*this.size/4),o.tag==="helper"){o.visible=!1,o.name==="AXIS"?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,this.axis==="X"&&(Un.setFromEuler(x0.set(0,0,0)),o.quaternion.copy(r).multiply(Un),Math.abs(bn.copy(Jp).applyQuaternion(r).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Y"&&(Un.setFromEuler(x0.set(0,0,Math.PI/2)),o.quaternion.copy(r).multiply(Un),Math.abs(bn.copy(Fc).applyQuaternion(r).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="Z"&&(Un.setFromEuler(x0.set(0,Math.PI/2,0)),o.quaternion.copy(r).multiply(Un),Math.abs(bn.copy(Kp).applyQuaternion(r).dot(this.eye))>.9&&(o.visible=!1)),this.axis==="XYZE"&&(Un.setFromEuler(x0.set(0,Math.PI/2,0)),bn.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(dL.lookAt(hL,bn,Fc)),o.quaternion.multiply(Un),o.visible=this.dragging),this.axis==="E"&&(o.visible=!1)):o.name==="START"?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):o.name==="END"?(o.position.copy(this.worldPosition),o.visible=this.dragging):o.name==="DELTA"?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),ts.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),ts.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(ts),o.visible=this.dragging):(o.quaternion.copy(r),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=this.axis.search(o.name)!==-1));continue}o.quaternion.copy(r),this.mode==="translate"||this.mode==="scale"?(o.name==="X"&&Math.abs(bn.copy(Jp).applyQuaternion(r).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Y"&&Math.abs(bn.copy(Fc).applyQuaternion(r).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="Z"&&Math.abs(bn.copy(Kp).applyQuaternion(r).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XY"&&Math.abs(bn.copy(Kp).applyQuaternion(r).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="YZ"&&Math.abs(bn.copy(Jp).applyQuaternion(r).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),o.name==="XZ"&&Math.abs(bn.copy(Fc).applyQuaternion(r).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):this.mode==="rotate"&&(S0.copy(r),bn.copy(this.eye).applyQuaternion(Un.copy(r).invert()),o.name.search("E")!==-1&&o.quaternion.setFromRotationMatrix(dL.lookAt(this.eye,hL,Fc)),o.name==="X"&&(Un.setFromAxisAngle(Jp,Math.atan2(-bn.y,bn.z)),Un.multiplyQuaternions(S0,Un),o.quaternion.copy(Un)),o.name==="Y"&&(Un.setFromAxisAngle(Fc,Math.atan2(bn.x,bn.z)),Un.multiplyQuaternions(S0,Un),o.quaternion.copy(Un)),o.name==="Z"&&(Un.setFromAxisAngle(Kp,Math.atan2(bn.y,bn.x)),Un.multiplyQuaternions(S0,Un),o.quaternion.copy(Un))),o.visible=o.visible&&(o.name.indexOf("X")===-1||this.showX),o.visible=o.visible&&(o.name.indexOf("Y")===-1||this.showY),o.visible=o.visible&&(o.name.indexOf("Z")===-1||this.showZ),o.visible=o.visible&&(o.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(l){return o.name===l}))&&(o.material.color.setHex(16776960),o.material.opacity=1)}super.updateMatrixWorld(e)}}AN.prototype.isTransformControlsGizmo=!0;class EN extends Fe{constructor(){super(new No(1e5,1e5,2,2),new gs({visible:!1,wireframe:!0,side:_r,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(e){let n=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(n="local"),A0.copy(Jp).applyQuaternion(n==="local"?this.worldQuaternion:Ay),Ep.copy(Fc).applyQuaternion(n==="local"?this.worldQuaternion:Ay),Cp.copy(Kp).applyQuaternion(n==="local"?this.worldQuaternion:Ay),bn.copy(Ep),this.mode){case"translate":case"scale":switch(this.axis){case"X":bn.copy(this.eye).cross(A0),jo.copy(A0).cross(bn);break;case"Y":bn.copy(this.eye).cross(Ep),jo.copy(Ep).cross(bn);break;case"Z":bn.copy(this.eye).cross(Cp),jo.copy(Cp).cross(bn);break;case"XY":jo.copy(Cp);break;case"YZ":jo.copy(A0);break;case"XZ":bn.copy(Cp),jo.copy(Ep);break;case"XYZ":case"E":jo.set(0,0,0);break}break;case"rotate":default:jo.set(0,0,0)}jo.length()===0?this.quaternion.copy(this.cameraQuaternion):(pL.lookAt(ts.set(0,0,0),jo,bn),this.quaternion.setFromRotationMatrix(pL)),super.updateMatrixWorld(e)}}EN.prototype.isTransformControlsPlane=!0;const CN=0,OK=1,BK=2,gL=2,Gb=1.25,mL=1,Ey=6*4+4+4,AA=65535,NK=Math.pow(2,-24);class E0{constructor(){}}function fa(t,e,n){return n.min.x=e[t],n.min.y=e[t+1],n.min.z=e[t+2],n.max.x=e[t+3],n.max.y=e[t+4],n.max.z=e[t+5],n}function vL(t){let e=-1,n=-1/0;for(let r=0;r<3;r++){const i=t[r+3]-t[r];i>n&&(n=i,e=r)}return e}function yL(t,e){e.set(t)}function _L(t,e,n){let r,i;for(let s=0;s<3;s++){const o=s+3;r=t[s],i=e[s],n[s]=r<i?r:i,r=t[o],i=e[o],n[o]=r>i?r:i}}function C0(t,e,n){for(let r=0;r<3;r++){const i=e[t+2*r],s=e[t+2*r+1],o=i-s,a=i+s;o<n[r]&&(n[r]=o),a>n[r+3]&&(n[r+3]=a)}}function Mp(t){const e=t[3]-t[0],n=t[4]-t[1],r=t[5]-t[2];return 2*(e*n+n*r+r*e)}function VK(t,e){if(!t.index){const n=t.attributes.position.count,r=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let i;n>65535?i=new Uint32Array(new r(4*n)):i=new Uint16Array(new r(2*n)),t.setIndex(new Rn(i,1));for(let s=0;s<n;s++)i[s]=s}}function zK(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];const e=[],n=new Set;for(const i of t.groups)n.add(i.start),n.add(i.start+i.count);const r=Array.from(n.values()).sort((i,s)=>i-s);for(let i=0;i<r.length-1;i++){const s=r[i],o=r[i+1];e.push({offset:s/3,count:(o-s)/3})}return e}function Ub(t,e,n,r,i=null){let s=1/0,o=1/0,a=1/0,l=-1/0,u=-1/0,c=-1/0,f=1/0,h=1/0,d=1/0,p=-1/0,g=-1/0,x=-1/0;const _=i!==null;for(let m=e*6,v=(e+n)*6;m<v;m+=6){const b=t[m+0],w=t[m+1],A=b-w,E=b+w;A<s&&(s=A),E>l&&(l=E),_&&b<f&&(f=b),_&&b>p&&(p=b);const S=t[m+2],C=t[m+3],M=S-C,D=S+C;M<o&&(o=M),D>u&&(u=D),_&&S<h&&(h=S),_&&S>g&&(g=S);const T=t[m+4],L=t[m+5],F=T-L,k=T+L;F<a&&(a=F),k>c&&(c=k),_&&T<d&&(d=T),_&&T>x&&(x=T)}r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=u,r[5]=c,_&&(i[0]=f,i[1]=h,i[2]=d,i[3]=p,i[4]=g,i[5]=x)}function GK(t,e,n,r){let i=1/0,s=1/0,o=1/0,a=-1/0,l=-1/0,u=-1/0;for(let c=e*6,f=(e+n)*6;c<f;c+=6){const h=t[c+0];h<i&&(i=h),h>a&&(a=h);const d=t[c+2];d<s&&(s=d),d>l&&(l=d);const p=t[c+4];p<o&&(o=p),p>u&&(u=p)}r[0]=i,r[1]=s,r[2]=o,r[3]=a,r[4]=l,r[5]=u}function UK(t,e,n,r,i){let s=n,o=n+r-1;const a=i.pos,l=i.axis*2;for(;;){for(;s<=o&&e[s*6+l]<a;)s++;for(;s<=o&&e[o*6+l]>=a;)o--;if(s<o){for(let u=0;u<3;u++){let c=t[s*3+u];t[s*3+u]=t[o*3+u],t[o*3+u]=c;let f=e[s*6+u*2+0];e[s*6+u*2+0]=e[o*6+u*2+0],e[o*6+u*2+0]=f;let h=e[s*6+u*2+1];e[s*6+u*2+1]=e[o*6+u*2+1],e[o*6+u*2+1]=h}s++,o--}else return s}}const Qa=32,HK=(t,e)=>t.candidate-e.candidate,Yl=new Array(Qa).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),M0=new Float32Array(6);function WK(t,e,n,r,i,s){let o=-1,a=0;if(s===CN)o=vL(e),o!==-1&&(a=(e[o]+e[o+3])/2);else if(s===OK)o=vL(t),o!==-1&&(a=$K(n,r,i,o));else if(s===BK){const l=Mp(t);let u=Gb*i;const c=r*6,f=(r+i)*6;for(let h=0;h<3;h++){const d=e[h],x=(e[h+3]-d)/Qa;if(i<Qa/4){const _=[...Yl];_.length=i;let m=0;for(let b=c;b<f;b+=6,m++){const w=_[m];w.candidate=n[b+2*h],w.count=0;const{bounds:A,leftCacheBounds:E,rightCacheBounds:S}=w;for(let C=0;C<3;C++)S[C]=1/0,S[C+3]=-1/0,E[C]=1/0,E[C+3]=-1/0,A[C]=1/0,A[C+3]=-1/0;C0(b,n,A)}_.sort(HK);let v=i;for(let b=0;b<v;b++){const w=_[b];for(;b+1<v&&_[b+1].candidate===w.candidate;)_.splice(b+1,1),v--}for(let b=c;b<f;b+=6){const w=n[b+2*h];for(let A=0;A<v;A++){const E=_[A];w>=E.candidate?C0(b,n,E.rightCacheBounds):(C0(b,n,E.leftCacheBounds),E.count++)}}for(let b=0;b<v;b++){const w=_[b],A=w.count,E=i-w.count,S=w.leftCacheBounds,C=w.rightCacheBounds;let M=0;A!==0&&(M=Mp(S)/l);let D=0;E!==0&&(D=Mp(C)/l);const T=mL+Gb*(M*A+D*E);T<u&&(o=h,u=T,a=w.candidate)}}else{for(let v=0;v<Qa;v++){const b=Yl[v];b.count=0,b.candidate=d+x+v*x;const w=b.bounds;for(let A=0;A<3;A++)w[A]=1/0,w[A+3]=-1/0}for(let v=c;v<f;v+=6){let A=~~((n[v+2*h]-d)/x);A>=Qa&&(A=Qa-1);const E=Yl[A];E.count++,C0(v,n,E.bounds)}const _=Yl[Qa-1];yL(_.bounds,_.rightCacheBounds);for(let v=Qa-2;v>=0;v--){const b=Yl[v],w=Yl[v+1];_L(b.bounds,w.rightCacheBounds,b.rightCacheBounds)}let m=0;for(let v=0;v<Qa-1;v++){const b=Yl[v],w=b.count,A=b.bounds,S=Yl[v+1].rightCacheBounds;w!==0&&(m===0?yL(A,M0):_L(A,M0,M0)),m+=w;let C=0,M=0;m!==0&&(C=Mp(M0)/l);const D=i-m;D!==0&&(M=Mp(S)/l);const T=mL+Gb*(C*m+M*D);T<u&&(o=h,u=T,a=b.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${s} used.`);return{axis:o,pos:a}}function $K(t,e,n,r){let i=0;for(let s=e,o=e+n;s<o;s++)i+=t[s*6+r*2];return i/n}function XK(t,e){const n=t.attributes.position,r=t.index.array,i=r.length/3,s=new Float32Array(i*6),o=n.normalized,a=n.array,l=n.offset||0;let u=3;n.isInterleavedBufferAttribute&&(u=n.data.stride);const c=["getX","getY","getZ"];for(let f=0;f<i;f++){const h=f*3,d=f*6;let p,g,x;o?(p=r[h+0],g=r[h+1],x=r[h+2]):(p=r[h+0]*u+l,g=r[h+1]*u+l,x=r[h+2]*u+l);for(let _=0;_<3;_++){let m,v,b;o?(m=n[c[_]](p),v=n[c[_]](g),b=n[c[_]](x)):(m=a[p+_],v=a[g+_],b=a[x+_]);let w=m;v<w&&(w=v),b<w&&(w=b);let A=m;v>A&&(A=v),b>A&&(A=b);const E=(A-w)/2,S=_*2;s[d+S+0]=w+E,s[d+S+1]=E+(Math.abs(w)+E)*NK,w<e[_]&&(e[_]=w),A>e[_+3]&&(e[_+3]=A)}}return s}function YK(t,e){function n(_){h&&h(_/d)}function r(_,m,v,b=null,w=0){if(!p&&w>=l&&(p=!0,u&&(console.warn(`MeshBVH: Max depth of ${l} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),v<=c||w>=l)return n(m+v),_.offset=m,_.count=v,_;const A=WK(_.boundingData,b,o,m,v,f);if(A.axis===-1)return n(m+v),_.offset=m,_.count=v,_;const E=UK(a,o,m,v,A);if(E===m||E===m+v)n(m+v),_.offset=m,_.count=v;else{_.splitAxis=A.axis;const S=new E0,C=m,M=E-m;_.left=S,S.boundingData=new Float32Array(6),Ub(o,C,M,S.boundingData,s),r(S,C,M,s,w+1);const D=new E0,T=E,L=v-M;_.right=D,D.boundingData=new Float32Array(6),Ub(o,T,L,D.boundingData,s),r(D,T,L,s,w+1)}return _}VK(t,e);const i=new Float32Array(6),s=new Float32Array(6),o=XK(t,i),a=t.index.array,l=e.maxDepth,u=e.verbose,c=e.maxLeafTris,f=e.strategy,h=e.onProgress,d=t.index.count/3;let p=!1;const g=[],x=zK(t);if(x.length===1){const _=x[0],m=new E0;m.boundingData=i,GK(o,_.offset,_.count,s),r(m,_.offset,_.count,s),g.push(m)}else for(let _ of x){const m=new E0;m.boundingData=new Float32Array(6),Ub(o,_.offset,_.count,m.boundingData,s),r(m,_.offset,_.count,s),g.push(m)}return g}function jK(t,e){const n=YK(t,e);let r,i,s;const o=[],a=e.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let c=0;c<n.length;c++){const f=n[c];let h=l(f);const d=new a(Ey*h);r=new Float32Array(d),i=new Uint32Array(d),s=new Uint16Array(d),u(0,f),o.push(d)}return o;function l(c){return c.count?1:1+l(c.left)+l(c.right)}function u(c,f){const h=c/4,d=c/2,p=!!f.count,g=f.boundingData;for(let x=0;x<6;x++)r[h+x]=g[x];if(p){const x=f.offset,_=f.count;return i[h+6]=x,s[d+14]=_,s[d+15]=AA,c+Ey}else{const x=f.left,_=f.right,m=f.splitAxis;let v;if(v=u(c+Ey,x),v/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return i[h+6]=v/4,v=u(v,_),i[h+7]=m,v}}}class Da{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,n){let r=1/0,i=-1/0;for(let s=0,o=e.length;s<o;s++){const l=e[s][n];r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}setFromPoints(e,n){let r=1/0,i=-1/0;for(let s=0,o=n.length;s<o;s++){const a=n[s],l=e.dot(a);r=l<r?l:r,i=l>i?l:i}this.min=r,this.max=i}isSeparated(e){return this.min>e.max||e.min>this.max}}Da.prototype.setFromBox=function(){const t=new q;return function(n,r){const i=r.min,s=r.max;let o=1/0,a=-1/0;for(let l=0;l<=1;l++)for(let u=0;u<=1;u++)for(let c=0;c<=1;c++){t.x=i.x*l+s.x*(1-l),t.y=i.y*u+s.y*(1-u),t.z=i.z*c+s.z*(1-c);const f=n.dot(t);o=Math.min(f,o),a=Math.max(f,a)}this.min=o,this.max=a}}();(function(){const t=new Da;return function(n,r){const i=n.points,s=n.satAxes,o=n.satBounds,a=r.points,l=r.satAxes,u=r.satBounds;for(let c=0;c<3;c++){const f=o[c],h=s[c];if(t.setFromPoints(h,a),f.isSeparated(t))return!1}for(let c=0;c<3;c++){const f=u[c],h=l[c];if(t.setFromPoints(h,i),f.isSeparated(t))return!1}}})();const qK=function(){const t=new q,e=new q,n=new q;return function(i,s,o){const a=i.start,l=t,u=s.start,c=e;n.subVectors(a,u),t.subVectors(i.end,i.start),e.subVectors(s.end,s.start);const f=n.dot(c),h=c.dot(l),d=c.dot(c),p=n.dot(l),x=l.dot(l)*d-h*h;let _,m;x!==0?_=(f*h-p*d)/x:_=0,m=(f+_*h)/d,o.x=_,o.y=m}}(),LM=function(){const t=new Ie,e=new q,n=new q;return function(i,s,o,a){qK(i,s,t);let l=t.x,u=t.y;if(l>=0&&l<=1&&u>=0&&u<=1){i.at(l,o),s.at(u,a);return}else if(l>=0&&l<=1){u<0?s.at(0,a):s.at(1,a),i.closestPointToPoint(a,!0,o);return}else if(u>=0&&u<=1){l<0?i.at(0,o):i.at(1,o),s.closestPointToPoint(o,!0,a);return}else{let c;l<0?c=i.start:c=i.end;let f;u<0?f=s.start:f=s.end;const h=e,d=n;if(i.closestPointToPoint(f,!0,e),s.closestPointToPoint(c,!0,n),h.distanceToSquared(f)<=d.distanceToSquared(c)){o.copy(h),a.copy(f);return}else{o.copy(c),a.copy(d);return}}}}(),JK=function(){const t=new q,e=new q,n=new xs,r=new qr;return function(s,o){const{radius:a,center:l}=s,{a:u,b:c,c:f}=o;if(r.start=u,r.end=c,r.closestPointToPoint(l,!0,t).distanceTo(l)<=a||(r.start=u,r.end=f,r.closestPointToPoint(l,!0,t).distanceTo(l)<=a)||(r.start=c,r.end=f,r.closestPointToPoint(l,!0,t).distanceTo(l)<=a))return!0;const g=o.getPlane(n);if(Math.abs(g.distanceToPoint(l))<=a){const _=g.projectPoint(l,e);if(o.containsPoint(_))return!0}return!1}}(),KK=1e-15;function Qf(t){return Math.abs(t)<KK}class Ta extends on{constructor(...e){super(...e),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new q),this.satBounds=new Array(4).fill().map(()=>new Da),this.points=[this.a,this.b,this.c],this.sphere=new qu,this.plane=new xs,this.needsUpdate=!0}intersectsSphere(e){return JK(e,this)}update(){const e=this.a,n=this.b,r=this.c,i=this.points,s=this.satAxes,o=this.satBounds,a=s[0],l=o[0];this.getNormal(a),l.setFromPoints(a,i);const u=s[1],c=o[1];u.subVectors(e,n),c.setFromPoints(u,i);const f=s[2],h=o[2];f.subVectors(n,r),h.setFromPoints(f,i);const d=s[3],p=o[3];d.subVectors(r,e),p.setFromPoints(d,i),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}Ta.prototype.closestPointToSegment=function(){const t=new q,e=new q,n=new qr;return function(i,s=null,o=null){const{start:a,end:l}=i,u=this.points;let c,f=1/0;for(let h=0;h<3;h++){const d=(h+1)%3;n.start.copy(u[h]),n.end.copy(u[d]),LM(n,i,t,e),c=t.distanceToSquared(e),c<f&&(f=c,s&&s.copy(t),o&&o.copy(e))}return this.closestPointToPoint(a,t),c=a.distanceToSquared(t),c<f&&(f=c,s&&s.copy(t),o&&o.copy(a)),this.closestPointToPoint(l,t),c=l.distanceToSquared(t),c<f&&(f=c,s&&s.copy(t),o&&o.copy(l)),Math.sqrt(f)}}();Ta.prototype.intersectsTriangle=function(){const t=new Ta,e=new Array(3),n=new Array(3),r=new Da,i=new Da,s=new q,o=new q,a=new q,l=new q,u=new qr,c=new qr,f=new qr;return function(d,p=null,g=!1){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(t.copy(d),t.update(),d=t);const x=this.plane,_=d.plane;if(Math.abs(x.normal.dot(_.normal))>1-1e-10){const m=this.satBounds,v=this.satAxes;n[0]=d.a,n[1]=d.b,n[2]=d.c;for(let A=0;A<4;A++){const E=m[A],S=v[A];if(r.setFromPoints(S,n),E.isSeparated(r))return!1}const b=d.satBounds,w=d.satAxes;e[0]=this.a,e[1]=this.b,e[2]=this.c;for(let A=0;A<4;A++){const E=b[A],S=w[A];if(r.setFromPoints(S,e),E.isSeparated(r))return!1}for(let A=0;A<4;A++){const E=v[A];for(let S=0;S<4;S++){const C=w[S];if(s.crossVectors(E,C),r.setFromPoints(s,e),i.setFromPoints(s,n),r.isSeparated(i))return!1}}return p&&(g||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),p.start.set(0,0,0),p.end.set(0,0,0)),!0}else{const m=this.points;let v=!1,b=0;for(let F=0;F<3;F++){const k=m[F],I=m[(F+1)%3];u.start.copy(k),u.end.copy(I),u.delta(o);const O=v?c.start:c.end,$=Qf(_.distanceToPoint(k));if(Qf(_.normal.dot(o))&&$){c.copy(u),b=2;break}if((_.intersectLine(u,O)||$)&&!Qf(O.distanceTo(I))){if(b++,v)break;v=!0}}if(b===1&&d.containsPoint(c.end))return p&&(p.start.copy(c.end),p.end.copy(c.end)),!0;if(b!==2)return!1;const w=d.points;let A=!1,E=0;for(let F=0;F<3;F++){const k=w[F],I=w[(F+1)%3];u.start.copy(k),u.end.copy(I),u.delta(a);const O=A?f.start:f.end,$=Qf(x.distanceToPoint(k));if(Qf(x.normal.dot(a))&&$){f.copy(u),E=2;break}if((x.intersectLine(u,O)||$)&&!Qf(O.distanceTo(I))){if(E++,A)break;A=!0}}if(E===1&&this.containsPoint(f.end))return p&&(p.start.copy(f.end),p.end.copy(f.end)),!0;if(E!==2)return!1;if(c.delta(o),f.delta(a),o.dot(a)<0){let F=f.start;f.start=f.end,f.end=F}const S=c.start.dot(o),C=c.end.dot(o),M=f.start.dot(o),D=f.end.dot(o),T=C<M,L=S<D;return S!==D&&M!==C&&T===L?!1:(p&&(l.subVectors(c.start,f.start),l.dot(o)>0?p.start.copy(c.start):p.start.copy(f.start),l.subVectors(c.end,f.end),l.dot(o)<0?p.end.copy(c.end):p.end.copy(f.end)),!0)}}}();Ta.prototype.distanceToPoint=function(){const t=new q;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();Ta.prototype.distanceToTriangle=function(){const t=new q,e=new q,n=["a","b","c"],r=new qr,i=new qr;return function(o,a=null,l=null){const u=a||l?r:null;if(this.intersectsTriangle(o,u))return(a||l)&&(a&&u.getCenter(a),l&&u.getCenter(l)),0;let c=1/0;for(let f=0;f<3;f++){let h;const d=n[f],p=o[d];this.closestPointToPoint(p,t),h=p.distanceToSquared(t),h<c&&(c=h,a&&a.copy(t),l&&l.copy(p));const g=this[d];o.closestPointToPoint(g,t),h=g.distanceToSquared(t),h<c&&(c=h,a&&a.copy(g),l&&l.copy(t))}for(let f=0;f<3;f++){const h=n[f],d=n[(f+1)%3];r.set(this[h],this[d]);for(let p=0;p<3;p++){const g=n[p],x=n[(p+1)%3];i.set(o[g],o[x]),LM(r,i,t,e);const _=t.distanceToSquared(e);_<c&&(c=_,a&&a.copy(t),l&&l.copy(e))}}return Math.sqrt(c)}}();class Pa{constructor(e,n,r){this.isOrientedBox=!0,this.min=new q,this.max=new q,this.matrix=new st,this.invMatrix=new st,this.points=new Array(8).fill().map(()=>new q),this.satAxes=new Array(3).fill().map(()=>new q),this.satBounds=new Array(3).fill().map(()=>new Da),this.alignedSatBounds=new Array(3).fill().map(()=>new Da),this.needsUpdate=!1,e&&this.min.copy(e),n&&this.max.copy(n),r&&this.matrix.copy(r)}set(e,n,r){this.min.copy(e),this.max.copy(n),this.matrix.copy(r),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}Pa.prototype.update=function(){return function(){const e=this.matrix,n=this.min,r=this.max,i=this.points;for(let u=0;u<=1;u++)for(let c=0;c<=1;c++)for(let f=0;f<=1;f++){const h=1*u|2*c|4*f,d=i[h];d.x=u?r.x:n.x,d.y=c?r.y:n.y,d.z=f?r.z:n.z,d.applyMatrix4(e)}const s=this.satBounds,o=this.satAxes,a=i[0];for(let u=0;u<3;u++){const c=o[u],f=s[u],h=1<<u,d=i[h];c.subVectors(a,d),f.setFromPoints(c,i)}const l=this.alignedSatBounds;l[0].setFromPointsField(i,"x"),l[1].setFromPointsField(i,"y"),l[2].setFromPointsField(i,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();Pa.prototype.intersectsBox=function(){const t=new Da;return function(n){this.needsUpdate&&this.update();const r=n.min,i=n.max,s=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(t.min=r.x,t.max=i.x,a[0].isSeparated(t)||(t.min=r.y,t.max=i.y,a[1].isSeparated(t))||(t.min=r.z,t.max=i.z,a[2].isSeparated(t)))return!1;for(let l=0;l<3;l++){const u=o[l],c=s[l];if(t.setFromBox(u,n),c.isSeparated(t))return!1}return!0}}();Pa.prototype.intersectsTriangle=function(){const t=new Ta,e=new Array(3),n=new Da,r=new Da,i=new q;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(t.copy(o),t.update(),o=t);const a=this.satBounds,l=this.satAxes;e[0]=o.a,e[1]=o.b,e[2]=o.c;for(let h=0;h<3;h++){const d=a[h],p=l[h];if(n.setFromPoints(p,e),d.isSeparated(n))return!1}const u=o.satBounds,c=o.satAxes,f=this.points;for(let h=0;h<3;h++){const d=u[h],p=c[h];if(n.setFromPoints(p,f),d.isSeparated(n))return!1}for(let h=0;h<3;h++){const d=l[h];for(let p=0;p<4;p++){const g=c[p];if(i.crossVectors(d,g),n.setFromPoints(i,e),r.setFromPoints(i,f),n.isSeparated(r))return!1}}return!0}}();Pa.prototype.closestPointToPoint=function(){return function(e,n){return this.needsUpdate&&this.update(),n.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),n}}();Pa.prototype.distanceToPoint=function(){const t=new q;return function(n){return this.closestPointToPoint(n,t),n.distanceTo(t)}}();Pa.prototype.distanceToBox=function(){const t=["x","y","z"],e=new Array(12).fill().map(()=>new qr),n=new Array(12).fill().map(()=>new qr),r=new q,i=new q;return function(o,a=0,l=null,u=null){if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(l||u)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),l&&l.copy(r),u&&u.copy(i)),0;const c=a*a,f=o.min,h=o.max,d=this.points;let p=1/0;for(let x=0;x<8;x++){const _=d[x];i.copy(_).clamp(f,h);const m=_.distanceToSquared(i);if(m<p&&(p=m,l&&l.copy(_),u&&u.copy(i),m<c))return Math.sqrt(m)}let g=0;for(let x=0;x<3;x++)for(let _=0;_<=1;_++)for(let m=0;m<=1;m++){const v=(x+1)%3,b=(x+2)%3,w=_<<v|m<<b,A=1<<x|_<<v|m<<b,E=d[w],S=d[A];e[g].set(E,S);const M=t[x],D=t[v],T=t[b],L=n[g],F=L.start,k=L.end;F[M]=f[M],F[D]=_?f[D]:h[D],F[T]=m?f[T]:h[D],k[M]=h[M],k[D]=_?f[D]:h[D],k[T]=m?f[T]:h[D],g++}for(let x=0;x<=1;x++)for(let _=0;_<=1;_++)for(let m=0;m<=1;m++){i.x=x?h.x:f.x,i.y=_?h.y:f.y,i.z=m?h.z:f.z,this.closestPointToPoint(i,r);const v=i.distanceToSquared(r);if(v<p&&(p=v,l&&l.copy(r),u&&u.copy(i),v<c))return Math.sqrt(v)}for(let x=0;x<12;x++){const _=e[x];for(let m=0;m<12;m++){const v=n[m];LM(_,v,r,i);const b=r.distanceToSquared(i);if(b<p&&(p=b,l&&l.copy(r),u&&u.copy(i),b<c))return Math.sqrt(b)}}return Math.sqrt(p)}}();const D0=new q,T0=new q,P0=new q,wL=new Ie,bL=new Ie,xL=new Ie,SL=new q;function ZK(t,e,n,r,i,s){let o;return s===rr?o=t.intersectTriangle(r,n,e,!0,i):o=t.intersectTriangle(e,n,r,s!==_r,i),o===null?null:{distance:t.origin.distanceTo(i),point:i.clone()}}function QK(t,e,n,r,i,s,o){D0.fromBufferAttribute(e,r),T0.fromBufferAttribute(e,i),P0.fromBufferAttribute(e,s);const a=ZK(t,D0,T0,P0,SL,o);if(a){n&&(wL.fromBufferAttribute(n,r),bL.fromBufferAttribute(n,i),xL.fromBufferAttribute(n,s),a.uv=on.getUV(SL,D0,T0,P0,wL,bL,xL,new Ie));const l={a:r,b:i,c:s,normal:new q,materialIndex:0};on.getNormal(D0,T0,P0,l.normal),a.face=l,a.faceIndex=r}return a}function MN(t,e,n,r,i){const s=r*3,o=t.index.getX(s),a=t.index.getX(s+1),l=t.index.getX(s+2),u=QK(n,t.attributes.position,t.attributes.uv,o,a,l,e);return u?(u.faceIndex=r,i&&i.push(u),u):null}function eZ(t,e,n,r,i,s){for(let o=r,a=r+i;o<a;o++)MN(t,e,n,o,s)}function tZ(t,e,n,r,i){let s=1/0,o=null;for(let a=r,l=r+i;a<l;a++){const u=MN(t,e,n,a);u&&u.distance<s&&(o=u,s=u.distance)}return o}function ia(t,e,n,r){const i=t.a,s=t.b,o=t.c;let a=e,l=e+1,u=e+2;n&&(a=n.getX(e),l=n.getX(e+1),u=n.getX(e+2)),i.x=r.getX(a),i.y=r.getY(a),i.z=r.getZ(a),s.x=r.getX(l),s.y=r.getY(l),s.z=r.getZ(l),o.x=r.getX(u),o.y=r.getY(u),o.z=r.getZ(u)}function AL(t,e,n,r,i,s,o){const a=n.index,l=n.attributes.position;for(let u=t,c=e+t;u<c;u++)if(ia(o,u*3,a,l),o.needsUpdate=!0,r(o,u,i,s))return!0;return!1}class DN{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return e.length===0?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}function ou(t,e){return e[t+15]===65535}function Gh(t,e){return e[t+6]}function om(t,e){return e[t+14]}function am(t){return t+8}function lm(t,e){return e[t+6]}function nZ(t,e){return e[t+7]}const Sh=new Mr,d1=new q,rZ=["x","y","z"];function EA(t,e,n,r,i){let s=t*2,o=Bd,a=Du,l=Tu;if(ou(s,a)){const c=Gh(t,l),f=om(s,a);eZ(e,n,r,c,f,i)}else{const c=am(t);p1(c,o,r,d1)&&EA(c,e,n,r,i);const f=lm(t,l);p1(f,o,r,d1)&&EA(f,e,n,r,i)}}function CA(t,e,n,r){let i=t*2,s=Bd,o=Du,a=Tu;if(ou(i,o)){const u=Gh(t,a),c=om(i,o);return tZ(e,n,r,u,c)}else{const u=nZ(t,a),c=rZ[u],h=r.direction[c]>=0;let d,p;h?(d=am(t),p=lm(t,a)):(d=lm(t,a),p=am(t));const x=p1(d,s,r,d1)?CA(d,e,n,r):null;if(x){const v=x.point[c];if(h?v<=s[p+u]:v>=s[p+u+3])return x}const m=p1(p,s,r,d1)?CA(p,e,n,r):null;return x&&m?x.distance<=m.distance?x:m:x||m||null}}const iZ=function(){let t,e;const n=[],r=new DN(()=>new Mr);return function(...o){t=r.getPrimitive(),e=r.getPrimitive(),n.push(t,e);const a=i(...o);r.releasePrimitive(t),r.releasePrimitive(e),n.pop(),n.pop();const l=n.length;return l>0&&(e=n[l-1],t=n[l-2]),a};function i(s,o,a,l,u=null,c=0,f=0){function h(v){let b=v*2,w=Du,A=Tu;for(;!ou(b,w);)v=am(v),b=v*2;return Gh(v,A)}function d(v){let b=v*2,w=Du,A=Tu;for(;!ou(b,w);)v=lm(v,A),b=v*2;return Gh(v,A)+om(b,w)}let p=s*2,g=Bd,x=Du,_=Tu;if(ou(p,x)){const v=Gh(s,_),b=om(p,x);return fa(s,g,t),l(v,b,!1,f,c+s,t)}else{const v=am(s),b=lm(s,_);let w=v,A=b,E,S,C,M;if(u&&(C=t,M=e,fa(w,g,C),fa(A,g,M),E=u(C),S=u(M),S<E)){w=b,A=v;const O=E;E=S,S=O,C=M}C||(C=t,fa(w,g,C));const D=ou(w*2,x),T=a(C,D,E,f+1,c+w);let L;if(T===gL){const O=h(w),N=d(w)-O;L=l(O,N,!0,f+1,c+w,C)}else L=T&&i(w,o,a,l,u,c,f+1);if(L)return!0;M=e,fa(A,g,M);const F=ou(A*2,x),k=a(M,F,S,f+1,c+A);let I;if(k===gL){const O=h(A),N=d(A)-O;I=l(O,N,!0,f+1,c+A,M)}else I=k&&i(A,o,a,l,u,c,f+1);return!!I}}}(),sZ=function(){const t=new Ta,e=new Ta,n=new st,r=new Pa,i=new Pa;return function s(o,a,l,u,c=null){let f=o*2,h=Bd,d=Du,p=Tu;if(c===null&&(l.boundingBox||l.computeBoundingBox(),r.set(l.boundingBox.min,l.boundingBox.max,u),c=r),ou(f,d)){const x=a,_=x.index,m=x.attributes.position,v=l.index,b=l.attributes.position,w=Gh(o,p),A=om(f,d);if(n.copy(u).invert(),l.boundsTree)return fa(o,h,i),i.matrix.copy(n),i.needsUpdate=!0,l.boundsTree.shapecast({intersectsBounds:S=>i.intersectsBox(S),intersectsTriangle:S=>{S.a.applyMatrix4(u),S.b.applyMatrix4(u),S.c.applyMatrix4(u),S.needsUpdate=!0;for(let C=w*3,M=(A+w)*3;C<M;C+=3)if(ia(e,C,_,m),e.needsUpdate=!0,S.intersectsTriangle(e))return!0;return!1}});for(let E=w*3,S=A+w*3;E<S;E+=3){ia(t,E,_,m),t.a.applyMatrix4(n),t.b.applyMatrix4(n),t.c.applyMatrix4(n),t.needsUpdate=!0;for(let C=0,M=v.count;C<M;C+=3)if(ia(e,C,v,b),e.needsUpdate=!0,t.intersectsTriangle(e))return!0}}else{const x=o+8,_=p[o+6];return fa(x,h,Sh),!!(c.intersectsBox(Sh)&&s(x,a,l,u,c)||(fa(_,h,Sh),c.intersectsBox(Sh)&&s(_,a,l,u,c)))}}}();function p1(t,e,n,r){return fa(t,e,Sh),n.intersectBox(Sh,r)}const MA=[];let Cy,Bd,Du,Tu;function Zp(t){Cy&&MA.push(Cy),Cy=t,Bd=new Float32Array(t),Du=new Uint16Array(t),Tu=new Uint32Array(t)}function L0(){Cy=null,Bd=null,Du=null,Tu=null,MA.length&&Zp(MA.pop())}const Hb=Symbol("skip tree generation"),Wb=new Mr,$b=new Mr,eh=new st,xc=new Pa,Dp=new Pa,Tp=new q,F0=new q,oZ=new q,aZ=new q,lZ=new q,EL=new Mr,qo=new DN(()=>new Ta);class yg{static serialize(e,n={}){if(n.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),yg.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});n={cloneBuffers:!0,...n};const r=e.geometry,i=e._roots,s=r.getIndex();let o;return n.cloneBuffers?o={roots:i.map(a=>a.slice()),index:s.array.slice()}:o={roots:i,index:s.array},o}static deserialize(e,n,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),yg.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r={setIndex:!0,...r};const{index:i,roots:s}=e,o=new yg(n,{...r,[Hb]:!0});if(o._roots=s,r.setIndex){const a=n.getIndex();if(a===null){const l=new Rn(e.index,1,!1);n.setIndex(l)}else a.array!==i&&(a.array.set(i),a.needsUpdate=!0)}return o}constructor(e,n={}){if(e.isBufferGeometry){if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(n=Object.assign({strategy:CN,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[Hb]:!1},n),n.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,n[Hb]||(this._roots=jK(e,n),!e.boundingBox&&n.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new Mr))),this.geometry=e}refit(e=null){e&&Array.isArray(e)&&(e=new Set(e));const n=this.geometry,r=n.index.array,i=n.attributes.position;let s,o,a,l,u=0;const c=this._roots;for(let h=0,d=c.length;h<d;h++)s=c[h],o=new Uint32Array(s),a=new Uint16Array(s),l=new Float32Array(s),f(0,u),u+=s.byteLength;function f(h,d,p=!1){const g=h*2;if(a[g+15]===AA){const _=o[h+6],m=a[g+14];let v=1/0,b=1/0,w=1/0,A=-1/0,E=-1/0,S=-1/0;for(let C=3*_,M=3*(_+m);C<M;C++){const D=r[C],T=i.getX(D),L=i.getY(D),F=i.getZ(D);T<v&&(v=T),T>A&&(A=T),L<b&&(b=L),L>E&&(E=L),F<w&&(w=F),F>S&&(S=F)}return l[h+0]!==v||l[h+1]!==b||l[h+2]!==w||l[h+3]!==A||l[h+4]!==E||l[h+5]!==S?(l[h+0]=v,l[h+1]=b,l[h+2]=w,l[h+3]=A,l[h+4]=E,l[h+5]=S,!0):!1}else{const _=h+8,m=o[h+6],v=_+d,b=m+d;let w=p,A=!1,E=!1;e?w||(A=e.has(v),E=e.has(b),w=!A&&!E):(A=!0,E=!0);const S=w||A,C=w||E;let M=!1;S&&(M=f(_,d,w));let D=!1;C&&(D=f(m,d,w));const T=M||D;if(T)for(let L=0;L<3;L++){const F=_+L,k=m+L,I=l[F],O=l[F+3],$=l[k],N=l[k+3];l[h+L]=I<$?I:$,l[h+L+3]=O>N?O:N}return T}}}traverse(e,n=0){const r=this._roots[n],i=new Uint32Array(r),s=new Uint16Array(r);o(0);function o(a,l=0){const u=a*2,c=s[u+15]===AA;if(c){const f=i[a+6],h=s[u+14];e(l,c,new Float32Array(r,a*4,6),f,h)}else{const f=a+Ey/4,h=i[a+6],d=i[a+7];e(l,c,new Float32Array(r,a*4,6),d)||(o(f,l+1),o(h,l+1))}}}raycast(e,n=Ou){const r=this._roots,i=this.geometry,s=[],o=n.isMaterial,a=Array.isArray(n),l=i.groups,u=o?n.side:n;for(let c=0,f=r.length;c<f;c++){const h=a?n[l[c].materialIndex].side:u,d=s.length;if(Zp(r[c]),EA(0,i,h,e,s),L0(),a){const p=l[c].materialIndex;for(let g=d,x=s.length;g<x;g++)s[g].face.materialIndex=p}}return s}raycastFirst(e,n=Ou){const r=this._roots,i=this.geometry,s=n.isMaterial,o=Array.isArray(n);let a=null;const l=i.groups,u=s?n.side:n;for(let c=0,f=r.length;c<f;c++){const h=o?n[l[c].materialIndex].side:u;Zp(r[c]);const d=CA(0,i,h,e);L0(),d!=null&&(a==null||d.distance<a.distance)&&(a=d,o&&(d.face.materialIndex=l[c].materialIndex))}return a}intersectsGeometry(e,n){const r=this.geometry;let i=!1;for(const s of this._roots)if(Zp(s),i=sZ(0,r,e,n),L0(),i)break;return i}shapecast(e,n,r){const i=this.geometry;if(e instanceof Function){if(n){const h=n;n=(d,p,g,x)=>{const _=p*3;return h(d,_,_+1,_+2,g,x)}}e={boundsTraverseOrder:r,intersectsBounds:e,intersectsTriangle:n,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const s=qo.getPrimitive();let{boundsTraverseOrder:o,intersectsBounds:a,intersectsRange:l,intersectsTriangle:u}=e;if(l&&u){const h=l;l=(d,p,g,x,_)=>h(d,p,g,x,_)?!0:AL(d,p,i,u,g,x,s)}else l||(u?l=(h,d,p,g)=>AL(h,d,i,u,p,g,s):l=(h,d,p)=>p);let c=!1,f=0;for(const h of this._roots){if(Zp(h),c=iZ(0,i,a,l,o,f),L0(),c)break;f+=h.byteLength}return qo.releasePrimitive(s),c}bvhcast(e,n,r){let{intersectsRanges:i,intersectsTriangles:s}=r;const o=this.geometry.index,a=this.geometry.attributes.position,l=e.geometry.index,u=e.geometry.attributes.position;eh.copy(n).invert();const c=qo.getPrimitive(),f=qo.getPrimitive();if(s){let d=function(p,g,x,_,m,v,b,w){for(let A=x,E=x+_;A<E;A++){ia(f,A*3,l,u),f.a.applyMatrix4(n),f.b.applyMatrix4(n),f.c.applyMatrix4(n),f.needsUpdate=!0;for(let S=p,C=p+g;S<C;S++)if(ia(c,S*3,o,a),c.needsUpdate=!0,s(c,f,S,A,m,v,b,w))return!0}return!1};if(i){const p=i;i=function(g,x,_,m,v,b,w,A){return p(g,x,_,m,v,b,w,A)?!0:d(g,x,_,m,v,b,w,A)}}else i=d}e.getBoundingBox($b),$b.applyMatrix4(n);const h=this.shapecast({intersectsBounds:d=>$b.intersectsBox(d),intersectsRange:(d,p,g,x,_,m)=>(Wb.copy(m),Wb.applyMatrix4(eh),e.shapecast({intersectsBounds:v=>Wb.intersectsBox(v),intersectsRange:(v,b,w,A,E)=>i(d,p,v,b,x,_,A,E)}))});return qo.releasePrimitive(c),qo.releasePrimitive(f),h}intersectsBox(e,n){return xc.set(e.min,e.max,n),xc.needsUpdate=!0,this.shapecast({intersectsBounds:r=>xc.intersectsBox(r),intersectsTriangle:r=>xc.intersectsTriangle(r)})}intersectsSphere(e){return this.shapecast({intersectsBounds:n=>e.intersectsBox(n),intersectsTriangle:n=>n.intersectsSphere(e)})}closestPointToGeometry(e,n,r={},i={},s=0,o=1/0){e.boundingBox||e.computeBoundingBox(),xc.set(e.boundingBox.min,e.boundingBox.max,n),xc.needsUpdate=!0;const a=this.geometry,l=a.attributes.position,u=a.index,c=e.attributes.position,f=e.index,h=qo.getPrimitive(),d=qo.getPrimitive();let p=F0,g=oZ,x=null,_=null;i&&(x=aZ,_=lZ);let m=1/0,v=null,b=null;return eh.copy(n).invert(),Dp.matrix.copy(eh),this.shapecast({boundsTraverseOrder:w=>xc.distanceToBox(w),intersectsBounds:(w,A,E)=>E<m&&E<o?(A&&(Dp.min.copy(w.min),Dp.max.copy(w.max),Dp.needsUpdate=!0),!0):!1,intersectsRange:(w,A)=>{if(e.boundsTree)return e.boundsTree.shapecast({boundsTraverseOrder:E=>Dp.distanceToBox(E),intersectsBounds:(E,S,C)=>C<m&&C<o,intersectsRange:(E,S)=>{for(let C=E*3,M=(E+S)*3;C<M;C+=3){ia(d,C,f,c),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let D=w*3,T=(w+A)*3;D<T;D+=3){ia(h,D,u,l),h.needsUpdate=!0;const L=h.distanceToTriangle(d,p,x);if(L<m&&(g.copy(p),_&&_.copy(x),m=L,v=D/3,b=C/3),L<s)return!0}}}});{const E=f?f.count:c.count;for(let S=0,C=E;S<C;S+=3){ia(d,S,f,c),d.a.applyMatrix4(n),d.b.applyMatrix4(n),d.c.applyMatrix4(n),d.needsUpdate=!0;for(let M=w*3,D=(w+A)*3;M<D;M+=3){ia(h,M,u,l),h.needsUpdate=!0;const T=h.distanceToTriangle(d,p,x);if(T<m&&(g.copy(p),_&&_.copy(x),m=T,v=M/3,b=S/3),T<s)return!0}}}}}),qo.releasePrimitive(h),qo.releasePrimitive(d),m===1/0?null:(r.point?r.point.copy(g):r.point=g.clone(),r.distance=m,r.faceIndex=v,i&&(i.point?i.point.copy(_):i.point=_.clone(),i.point.applyMatrix4(eh),g.applyMatrix4(eh),i.distance=g.sub(i.point).length(),i.faceIndex=b),r)}closestPointToPoint(e,n={},r=0,i=1/0){const s=r*r,o=i*i;let a=1/0,l=null;if(this.shapecast({boundsTraverseOrder:c=>(Tp.copy(e).clamp(c.min,c.max),Tp.distanceToSquared(e)),intersectsBounds:(c,f,h)=>h<a&&h<o,intersectsTriangle:(c,f)=>{c.closestPointToPoint(e,Tp);const h=e.distanceToSquared(Tp);return h<a&&(F0.copy(Tp),a=h,l=f),h<s}}),a===1/0)return null;const u=Math.sqrt(a);return n.point?n.point.copy(F0):n.point=F0.clone(),n.distance=u,n.faceIndex=l,n}getBoundingBox(e){return e.makeEmpty(),this._roots.forEach(r=>{fa(0,new Float32Array(r),EL),e.union(EL)}),e}}const uZ=(1+1e-7)*1e6;function Xb(t){return~~(t*uZ)}function CL(t){return`${Xb(t.x)},${Xb(t.y)},${Xb(t.z)}`}const Yb=[new q,new q,new q];class cZ{constructor(e=null){this.data=null,this.unmatchedEdges=null,this.matchedEdges=null,this.useDrawRange=!0,e&&this.updateFrom(e)}getSiblingTriangleIndex(e,n){const r=this.data[e*3+n];return r===-1?-1:~~(r/3)}getSiblingEdgeIndex(e,n){const r=this.data[e*3+n];return r===-1?-1:r%3}updateFrom(e){const n=new Map,{attributes:r}=e,i=e.index,s=r.position;let o=i?i.count/3:s.count/3;const a=o;let l=0;this.useDrawRange&&(l=e.drawRange.start,e.drawRange.count!==1/0&&(o=~~(e.drawRange.count/3)));let u=this.data;(!u||u.length<3*a)&&(u=new Int32Array(3*a)),u.fill(-1);let c=0,f=0;for(let h=0;h<o;h++){const d=3*h+l;for(let p=0;p<3;p++){let g=d+p;i&&(g=i.getX(g)),Yb[p].fromBufferAttribute(s,g)}for(let p=0;p<3;p++){const g=(p+1)%3,x=Yb[p],_=Yb[g],m=CL(x),v=CL(_),b=`${v}_${m}`;if(n.has(b)){const w=n.get(b);u[d+p]=w,u[w]=d+p,n.delete(b),c--,f++}else{const w=`${m}_${v}`;n.set(w,d+p),c++}}}this.matchedEdges=f,this.unmatchedEdges=c,this.data=u}}function TN(){return typeof SharedArrayBuffer<"u"}function fZ(t){if(t.buffer instanceof SharedArrayBuffer)return t;const e=t.constructor,n=t.buffer,r=new SharedArrayBuffer(n.byteLength),i=new Uint8Array(n);return new Uint8Array(r).set(i,0),new e(r)}class ma extends Fe{constructor(...e){super(...e),this.isBrush=!0,this._previousMatrix=new st,this._previousMatrix.elements.fill(0)}markUpdated(){this._previousMatrix.copy(this.matrix)}isDirty(){const{matrix:e,_previousMatrix:n}=this,r=e.elements,i=n.elements;for(let s=0;s<16;s++)if(r[s]!==i[s])return!0;return!1}prepareGeometry(){const e=this.geometry,n=e.attributes;if(TN())for(const r in n){const i=n[r];if(i.isInterleavedBufferAttribute)throw new Error("Brush: InterleavedBufferAttributes are not supported.");i.array=fZ(i.array)}if(e.boundsTree||(e.boundsTree=new yg(e,{maxLeafTris:3}),e.halfEdges&&e.halfEdges.updateFrom(e)),e.halfEdges||(e.halfEdges=new cZ(e)),!e.groupIndices){const r=e.index.count/3,i=new Uint16Array(r),s=e.groups;for(let o=0,a=s.length;o<a;o++){const{start:l,count:u}=s[o];for(let c=l/3,f=(l+u)/3;c<f;c++)i[c]=o}e.groupIndices=i}}disposeCacheData(){const{geometry:e}=this;e.halfEdges=null,e.boundsTree=null,e.groupIndices=null}}class ML{constructor(){this.intersectionSet={},this.ids=[]}add(e,n){const{intersectionSet:r,ids:i}=this;r[e]||(r[e]=[],i.push(e)),r[e].push(n)}}const _g=0,g1=1,hZ=3,dZ=4,jl=new Ju,DL=new st,Oi=new on,$a=new q,TL=new $t,PL=new $t,LL=new $t,jb=new $t,I0=new $t,k0=new $t,qb=new qr,Jb=new q,Kb=1e-8,pZ=1e-15,My=-1,Dy=1,PN=-2,DA=2,m1=0,R0=1,FM=2;let Ty=null;function FL(t){Ty=t}function LN(t,e){function n(){return Math.random()-.5}t.getNormal(Jb),jl.direction.copy(Jb),t.getMidpoint(jl.origin);const r=3;let i=0,s=1/0;for(let o=0;o<r;o++){jl.direction.x+=n()*Kb,jl.direction.y+=n()*Kb,jl.direction.z+=n()*Kb,jl.direction.multiplyScalar(-1);const a=e.raycastFirst(jl,_r);if(Boolean(a&&jl.direction.dot(a.face.normal)>0)&&i++,a!==null&&(s=Math.min(s,a.distance)),s<=pZ)return a.face.normal.dot(Jb)>0?DA:PN;if(i/r>.5||(o-i+1)/r>.5)break}return i/r>.5?My:Dy}function gZ(t,e){const n=new ML,r=new ML;return DL.copy(t.matrixWorld).invert().multiply(e.matrixWorld),t.geometry.boundsTree.bvhcast(e.geometry.boundsTree,DL,{intersectsTriangles(i,s,o,a){if(i.intersectsTriangle(s,qb,!0)){if(qb.distanceSq()===0&&i.plane.normal.dot(s.plane.normal)<1-1e-10)return!1;n.add(o,a),r.add(a,o),Ty&&(Ty.addEdge(qb),Ty.addIntersectingTriangles(o,i,a,s))}return!1}}),{aIntersections:n,bIntersections:r}}function mZ(t,e,n,r,i,s,o=!1){const a=n.attributes,l=n.index,u=t*3,c=l.getX(u+0),f=l.getX(u+1),h=l.getX(u+2);for(const d in s){const p=a[d],g=s[d];if(!(d in a))throw new Error(`CSG Operations: Attribute ${d} not available on geometry.`);const x=p.itemSize;d==="position"?(Oi.a.fromBufferAttribute(p,c).applyMatrix4(r),Oi.b.fromBufferAttribute(p,f).applyMatrix4(r),Oi.c.fromBufferAttribute(p,h).applyMatrix4(r),Zb(Oi.a,Oi.b,Oi.c,e,3,g,o)):d==="normal"?(Oi.a.fromBufferAttribute(p,c).applyNormalMatrix(i),Oi.b.fromBufferAttribute(p,f).applyNormalMatrix(i),Oi.c.fromBufferAttribute(p,h).applyNormalMatrix(i),o&&(Oi.a.multiplyScalar(-1),Oi.b.multiplyScalar(-1),Oi.c.multiplyScalar(-1)),Zb(Oi.a,Oi.b,Oi.c,e,3,g,o,!0)):(TL.fromBufferAttribute(p,c),PL.fromBufferAttribute(p,f),LL.fromBufferAttribute(p,h),Zb(TL,PL,LL,e,x,g,o))}}function vZ(t,e,n,r,i,s,o,a=!1){Qb(t,r,i,s,o,a),Qb(a?n:e,r,i,s,o,a),Qb(a?e:n,r,i,s,o,a)}function FN(t,e,n=!1){switch(t){case _g:if(e===Dy||e===DA&&!n)return R0;break;case g1:if(n){if(e===My)return m1}else if(e===Dy||e===PN)return R0;break;case hZ:if(e===My)return m1;if(e===Dy)return R0;break;case dZ:if(e===My||e===DA&&!n)return R0;break;default:throw new Error(`Unrecognized CSG operation enum "${t}".`)}return FM}function Zb(t,e,n,r,i,s,o=!1,a=!1){const l=u=>{s.push(u.x),i>1&&s.push(u.y),i>2&&s.push(u.z),i>3&&s.push(u.w)};jb.set(0,0,0,0).addScaledVector(t,r.a.x).addScaledVector(e,r.a.y).addScaledVector(n,r.a.z),I0.set(0,0,0,0).addScaledVector(t,r.b.x).addScaledVector(e,r.b.y).addScaledVector(n,r.b.z),k0.set(0,0,0,0).addScaledVector(t,r.c.x).addScaledVector(e,r.c.y).addScaledVector(n,r.c.z),a&&(jb.normalize(),I0.normalize(),k0.normalize()),l(jb),o?(l(k0),l(I0)):(l(I0),l(k0))}function Qb(t,e,n,r,i,s=!1){for(const o in i){const a=e[o],l=i[o];if(!(o in e))throw new Error(`CSG Operations: Attribute ${o} no available on geometry.`);const u=a.itemSize;o==="position"?($a.fromBufferAttribute(a,t).applyMatrix4(n),l.push($a.x,$a.y,$a.z)):o==="normal"?($a.fromBufferAttribute(a,t).applyNormalMatrix(r),s&&$a.multiplyScalar(-1),l.push($a.x,$a.y,$a.z)):(l.push(a.getX(t)),u>1&&l.push(a.getY(t)),u>2&&l.push(a.getZ(t)),u>3&&l.push(a.getW(t)))}}const Uh=1e-14,th=1e-10,Xa=new qr,fr=new qr,Ya=new q,IL=new q,Pp=new xs,yZ=new Ta;function Lp(t){return t.a.distanceToSquared(t.b)<Uh||t.a.distanceToSquared(t.c)<Uh||t.b.distanceToSquared(t.c)<Uh}class _Z{constructor(){this._pool=[],this._index=0}getTriangle(){return this._index>=this._pool.length&&this._pool.push(new on),this._pool[this._index++]}clear(){this._index=0}reset(){this._pool.length=0,this._index=0}}class wZ{constructor(){this.trianglePool=new _Z,this.triangles=[],this.normal=new q}initialize(e){const{triangles:n,trianglePool:r,normal:i}=this;if(n.length=0,r.clear(),Array.isArray(e))for(let s=0,o=e.length;s<o;s++){const a=e[s];if(s===0)a.getNormal(i);else if(Math.abs(1-a.getNormal(Ya).dot(i))>Uh)throw new Error("Triangle Splitter: Cannot initialize with triangles that have different normals.");const l=r.getTriangle();l.copy(a),n.push(l)}else{e.getNormal(i);const s=r.getTriangle();s.copy(e),n.push(s)}}splitByTriangle(e){const{normal:n,triangles:r}=this;if(e.getPlane(Pp),Math.abs(1-Math.abs(Pp.normal.dot(n)))<th){const i=[e.a,e.b,e.c];for(let s=0;s<3;s++){const o=(s+1)%3,a=i[s],l=i[o];Ya.subVectors(l,a).normalize(),IL.crossVectors(n,Ya),Pp.setFromNormalAndCoplanarPoint(IL,a),this.splitByPlane(Pp,e,s)}for(let s=0,o=r.length;s<o;s++){const a=r[s];a.coplanarCount=0}}else this.splitByPlane(Pp,e)}splitByPlane(e,n=null,r=-1){const{triangles:i,trianglePool:s}=this;let o=null;n!==null&&(o=yZ,o.copy(n),o.needsUpdate=!0);for(let a=0,l=i.length;a<l;a++){const u=i[a],{a:c,b:f,c:h}=u;if(o&&!o.intersectsTriangle(u,Xa,!0))continue;let d=0,p=-1,g=0,x=!1;const _=[c,f,h];for(let m=0;m<3;m++){const v=(m+1)%3;Xa.start.copy(_[m]),Xa.end.copy(_[v]);const b=e.distanceToPoint(Xa.start),w=e.distanceToPoint(Xa.end);if(Math.abs(b)<th&&Math.abs(w)<th){x=!0;break}if(Math.abs(b)<th)continue;b>0&&g++;let A=!!e.intersectLine(Xa,Ya);!A&&Math.abs(w)<th&&(Ya.copy(Xa.end),A=!0),A&&!(Ya.distanceTo(Xa.start)<Uh)&&(Ya.distanceTo(Xa.end)<Uh&&(p=m),d===0?fr.start.copy(Ya):fr.end.copy(Ya),d++)}if(!x)if(d===2&&fr.distance()>th)if(p!==-1){p=(p+1)%3;let m=0;m===p&&(m=(m+1)%3);let v=m+1;v===p&&(v=(v+1)%3);const b=s.getTriangle();b.a.copy(_[v]),b.b.copy(fr.end),b.c.copy(fr.start),Lp(b)||i.push(b),u.a.copy(_[m]),u.b.copy(fr.start),u.c.copy(fr.end),Lp(u)&&(i.splice(a,1),a--,l--)}else{const m=_.findIndex(E=>g>=2?e.distanceToPoint(E)<0:e.distanceToPoint(E)>0);if(m===0){let E=fr.start;fr.start=fr.end,fr.end=E}else if(m===-1)continue;const v=(m+1)%3,b=(m+2)%3,w=s.getTriangle(),A=s.getTriangle();_[v].distanceToSquared(fr.start)<_[b].distanceToSquared(fr.end)?(w.a.copy(_[v]),w.b.copy(fr.start),w.c.copy(fr.end),A.a.copy(_[v]),A.b.copy(_[b]),A.c.copy(fr.start)):(w.a.copy(_[b]),w.b.copy(fr.start),w.c.copy(fr.end),A.a.copy(_[v]),A.b.copy(_[b]),A.c.copy(fr.end)),u.a.copy(_[m]),u.b.copy(fr.end),u.c.copy(fr.start),Lp(w)||i.push(w),Lp(A)||i.push(A),Lp(u)&&(i.splice(a,1),a--,l--)}else d===3&&console.warn("TriangleClipper: Coplanar clip not handled")}}reset(){this.triangles.length=0}}class kL{constructor(e,n=500){const r=TN()?SharedArrayBuffer:ArrayBuffer;this.expansionFactor=1.5,this.type=e,this.array=new e(new r(n*e.BYTES_PER_ELEMENT)),this.length=0}expand(e=null){const{type:n,array:r,expansionFactor:i}=this;e===null&&(e=~~(r.length*i));const s=new n(e);s.set(r,0),this.array=s}push(...e){let{array:n,length:r}=this;r+e.length>n.length&&(this.expand(),n=this.array);for(let i=0,s=e.length;i<s;i++)n[r+i]=e[i];this.length+=e.length}clear(){this.length=0}}class bZ{constructor(){this.groupAttributes=[{}],this.groupCount=0}getType(e){return this.groupAttributes[0][e].type}getTotalLength(e){const{groupCount:n,groupAttributes:r}=this;let i=0;for(let s=0;s<n;s++){const o=r[s];i+=o[e].length}return i}getGroupSet(e=0){const{groupAttributes:n}=this;if(n[e])return this.groupCount=Math.max(this.groupCount,e+1),n[e];const r=n[0];for(this.groupCount=Math.max(this.groupCount,e+1);e>=n.length;){const i={};n.push(i);for(const s in r)i[s]=new kL(r[s].type)}return n[e]}getGroupArray(e,n=0){const{groupAttributes:r}=this;if(!r[0][e])throw new Error(`TypedAttributeData: Attribute with "${e}" has not been initialized`);return this.getGroupSet(n)[e]}initializeArray(e,n){const{groupAttributes:r}=this,s=r[0][e];if(s){if(s.type!==n)throw new Error(`TypedAttributeData: Array ${e} already initialized with a different type.`)}else for(let o=0,a=r.length;o<a;o++)r[o][e]=new kL(n)}clear(){this.groupCount=0;const{groupAttributes:e}=this;e.forEach(n=>{for(const r in n)n[r].clear()})}delete(e){this.groupAttributes.forEach(n=>{delete n[e]})}reset(){this.groupAttributes=[]}}class xZ{constructor(e){this.triangle=new on().copy(e),this.intersects={}}addTriangle(e,n){this.intersects[e]=new on().copy(n)}getIntersectArray(){const e=[],{intersects:n}=this;for(const r in n)e.push(n[r]);return e}}class RL{constructor(){this.data={}}addTriangleIntersection(e,n,r,i){const{data:s}=this;s[e]||(s[e]=new xZ(n)),s[e].addTriangle(r,i)}getTrianglesAsArray(e=null){const{data:n}=this,r=[];if(e!==null)e in n&&r.push(n[e].triangle);else for(const i in n)r.push(n[i].triangle);return r}getTriangleIndices(){return Object.keys(this.data).map(e=>parseInt(e))}getIntersectionIndices(e){const{data:n}=this;return n[e]?Object.keys(n[e].intersects).map(r=>parseInt(r)):[]}getIntersectionsAsArray(e=null,n=null){const{data:r}=this,i=new Set,s=[],o=a=>{if(!!r[a])if(n!==null)r[a].intersects[n]&&s.push(r[a].intersects[n]);else{const l=r[a].intersects;for(const u in l)i.has(u)||(i.add(u),s.push(l[u]))}};if(e!==null)o(e);else for(const a in r)o(a);return s}reset(){this.data={}}}class SZ{constructor(){this.enabled=!1,this.triangleIntersectsA=new RL,this.triangleIntersectsB=new RL,this.intersectionEdges=[]}addIntersectingTriangles(e,n,r,i){const{triangleIntersectsA:s,triangleIntersectsB:o}=this;s.addTriangleIntersection(e,n,r,i),o.addTriangleIntersection(r,i,e,n)}addEdge(e){this.intersectionEdges.push(e.clone())}reset(){this.triangleIntersectsA.reset(),this.triangleIntersectsB.reset(),this.intersectionEdges=[]}}const fu=new st,v1=new kr,Sc=new on,O0=new on,B0=new on,N0=new on;function AZ(t){for(const e of t)return e}function EZ(t,e,n,r,i,s){const{useGroups:o=!0}=s,{aIntersections:a,bIntersections:l}=gZ(t,e),u=[];let c=null,f;return f=o?0:-1,BL(t,e,a,n,!1,i,f),OL(t,e,a,n,!1,r,i,f),f=o?t.geometry.groups.length||1:-1,BL(e,t,l,n,!0,i,f),OL(e,t,l,n,!0,r,i,f),{groups:u,materials:c}}function OL(t,e,n,r,i,s,o,a=0){const l=t.matrixWorld.determinant()<0;fu.copy(e.matrixWorld).invert().multiply(t.matrixWorld),v1.getNormalMatrix(t.matrixWorld).multiplyScalar(l?-1:1);const u=t.geometry.groupIndices,c=t.geometry.index,f=t.geometry.attributes.position,h=e.geometry.boundsTree,d=e.geometry.index,p=e.geometry.attributes.position,g=n.ids,x=n.intersectionSet;for(let _=0,m=g.length;_<m;_++){const v=g[_],b=a===-1?0:u[v]+a,w=o.getGroupSet(b),A=3*v,E=c.getX(A+0),S=c.getX(A+1),C=c.getX(A+2);Sc.a.fromBufferAttribute(f,E).applyMatrix4(fu),Sc.b.fromBufferAttribute(f,S).applyMatrix4(fu),Sc.c.fromBufferAttribute(f,C).applyMatrix4(fu),s.initialize(Sc);const M=x[v];for(let T=0,L=M.length;T<L;T++){const F=3*M[T],k=d.getX(F+0),I=d.getX(F+1),O=d.getX(F+2);O0.a.fromBufferAttribute(p,k),O0.b.fromBufferAttribute(p,I),O0.c.fromBufferAttribute(p,O),s.splitByTriangle(O0)}const D=s.triangles;for(let T=0,L=D.length;T<L;T++){const F=D[T],k=LN(F,h),I=FN(r,k,i);if(I!==FM){Sc.getBarycoord(F.a,N0.a),Sc.getBarycoord(F.b,N0.b),Sc.getBarycoord(F.c,N0.c);const O=I===m1;mZ(v,N0,t.geometry,t.matrixWorld,v1,w,l!==O)}}}return g.length}function BL(t,e,n,r,i,s,o=0){const a=t.matrixWorld.determinant()<0;fu.copy(e.matrixWorld).invert().multiply(t.matrixWorld),v1.getNormalMatrix(t.matrixWorld).multiplyScalar(a?-1:1);const l=e.geometry.boundsTree,u=t.geometry.groupIndices,c=t.geometry.index,f=t.geometry.attributes,h=f.position,d=[],p=t.geometry.halfEdges,g=new Set;for(let x=0,_=c.count/3;x<_;x++)x in n.intersectionSet||g.add(x);for(;g.size>0;){const x=AZ(g);g.delete(x),d.push(x);const _=3*x,m=c.getX(_+0),v=c.getX(_+1),b=c.getX(_+2);B0.a.fromBufferAttribute(h,m).applyMatrix4(fu),B0.b.fromBufferAttribute(h,v).applyMatrix4(fu),B0.c.fromBufferAttribute(h,b).applyMatrix4(fu);const w=LN(B0,l),A=FN(r,w,i);for(;d.length>0;){const E=d.pop(),S=o===-1?0:u[E]+o,C=s.getGroupSet(S);for(let k=0;k<3;k++){const I=p.getSiblingTriangleIndex(E,k);I!==-1&&g.has(I)&&(d.push(I),g.delete(I))}if(A===FM)continue;const M=3*E,D=c.getX(M+0),T=c.getX(M+1),L=c.getX(M+2),F=A===m1;vZ(D,T,L,f,t.matrixWorld,v1,C,F!==a)}}}function CZ(t,e,n,r){let i=!1,s=-1;const o=r.groupCount,a=t.attributes,l=r.groupAttributes[0];for(const c in l){const f=r.getTotalLength(c,o),h=l[c].type;let d=a[c];if(!d||d.array.length<f){const g=e.attributes[c];d=new Rn(new h(f),g.itemSize,g.normalized),t.setAttribute(c,d),i=!0}let p=0;for(let g=0;g<o;g++){const{array:x,type:_,length:m}=r.groupAttributes[g][c],v=new _(x.buffer,0,m);d.array.set(v,p),p+=v.length}d.needsUpdate=!0,s=f/d.itemSize}t.setDrawRange(0,s),t.clearGroups();let u=0;for(let c=0;c<o;c++){const f=r.getGroupArray("position",c).length/3;if(f!==0){const h=n[c];t.addGroup(u,f,h.materialIndex),u+=f}}if(t.index){const c=t.index.array;if(c.length<s)t.index=null,i=!0;else for(let f=0,h=c.length;f<h;f++)c[f]=f}return t.boundsTree=null,i&&t.dispose(),t}function NL(t,e){let n=e;return Array.isArray(e)||(n=[],t.forEach(r=>{n[r.materialIndex]=e})),n}class IM{constructor(){this.triangleSplitter=new wZ,this.attributeData=new bZ,this.attributes=["position","uv","normal"],this.useGroups=!0,this.debug=new SZ}evaluate(e,n,r,i=new ma){e.prepareGeometry(),n.prepareGeometry();const{triangleSplitter:s,attributeData:o,attributes:a,useGroups:l,debug:u}=this,c=i.geometry,f=e.geometry.attributes;for(let _=0,m=a.length;_<m;_++){const v=a[_],b=f[v];o.initializeArray(v,b.array.constructor)}for(const _ in o.attributes)a.includes(_)||o.delete(_);for(const _ in c.attributes)a.includes(_)||(c.deleteAttribute(_),c.dispose());o.clear(),u.enabled&&(u.reset(),FL(u)),EZ(e,n,r,s,o,{useGroups:l}),u.enabled&&FL(null);const h=!l||e.geometry.groups.length===0?[{start:0,count:1/0,materialIndex:0}]:e.geometry.groups.map(_=>({..._})),d=!l||n.geometry.groups.length===0?[{start:0,count:1/0,materialIndex:0}]:n.geometry.groups.map(_=>({..._})),p=NL(h,e.material),g=NL(d,n.material);d.forEach(_=>{_.materialIndex+=p.length}),CZ(c,e.geometry,[...h,...d],o);const x=c.groups;if(l){const _=new Map,m=[...p,...g];let v=0;for(let b=0,w=m.length;b<w;b++)Boolean(x.find(E=>E.materialIndex===b))?(_.set(b,v),v++):m[b]=null;for(let b=0,w=x.length;b<w;b++){const A=x[b];A.materialIndex=_.get(A.materialIndex)}i.material=m.filter(b=>b)}return i}evaluateHierarchy(e,n=new ma){e.updateMatrixWorld(!0);const r=(s,o)=>{const a=s.children;for(let l=0,u=a.length;l<u;l++){const c=a[l];c.isOperationGroup?r(c,o):o(c)}},i=s=>{const o=s.children;let a=!1;for(let u=0,c=o.length;u<c;u++){const f=o[u];a=i(f)||a}const l=s.isDirty();if(l&&s.markUpdated(),a&&!s.isOperationGroup){let u;return r(s,c=>{u?u=this.evaluate(u,c,c.operation):u=this.evaluate(s,c,c.operation)}),s._cachedGeometry=u.geometry,s._cachedMaterials=u.material,!0}else return a||l};return i(e),n.geometry=e._cachedGeometry,n.material=e._cachedMaterials,n}reset(){this.triangleSplitter.reset()}}function MZ(t,e){t.computeBoundingBox();var n=new q;n.addVectors(t.boundingBox.min,t.boundingBox.max),n.divideScalar(2);var r=new q;r.subVectors(e,n),t.translate(r.x,r.y,r.z)}const DZ="red",TZ=new IM,V0=new Zn({color:"yellow",transparent:!0,opacity:0});new Zn({color:"green"});new Zn({color:"red"});class R_ extends Fe{constructor(e,n){super(e,n),this.isReactiveMesh=!0,this.type="ReactiveMesh",this.controls=null,this.baseBrush=null,this.holeBrush=null,this.material.userData.oldColor=this.material.color.getHex()}setEnableControls(e){this.controls.enabled=e,this.controls.children[0].visible=e,this.controls.mode=De().transformControlsMode}initializeBrushes(){this.baseBrush=new ma(this.geometry.clone(),V0),this.holeBrush=new ma(this.geometry.clone(),V0)}destroyBrushes(){var n,r;(n=this.baseBrush)==null||n.geometry.dispose();for(var e=this.baseBrush.children.length-1;e>=0;e--){const i=this.baseBrush.children[e];i==null||i.geometry.dispose(),this.baseBrush.remove(i)}(r=this.holeBrush)==null||r.geometry.dispose();for(var e=this.holeBrush.children.length-1;e>=0;e--){const s=this.holeBrush.children[e];s==null||s.geometry.dispose(),this.holeBrush.remove(s)}this.remove(this.holeBrush,this.baseBrush)}createBrushEdges(){if(this.baseBrush!==null&&this.holeBrush!==null){const e=new $P(this.baseBrush.geometry);new em(e,new Ks({color:16777215}));const n=new $P(this.holeBrush.geometry);new em(n,new Ks({color:16777215})),this.add(this.holeBrush,this.baseBrush)}}updateHole(e){var u,c;this.destroyBrushes();var n=new q;this.geometry.computeBoundingBox(),(u=this.geometry.boundingBox)==null||u.getCenter(n);const r=new q;(c=this.geometry.boundingBox)==null||c.getSize(r);const i=r.clone();i.sub(new q(e.x,e.y,e.z));let s=i.clone();s.divide(r);const o=this.geometry.clone();this.baseBrush=new ma(o,V0);const a=this.geometry.clone();a.scale(s.x,s.y,s.z),MZ(a,n),this.holeBrush=new ma(a,V0),this.createBrushEdges();const l=this.material;TZ.evaluate(this.baseBrush,this.holeBrush,g1,this),this.material=l}initializeControls(e,n,r){this.controls=new SN(e,n.domElement,r),this.controls.setTranslationSnap(QL),this.controls.setScaleSnap(QL),this.controls.showY=!1,this.setEnableControls(!1),this.controls.addEventListener("dragging-changed",function(i){PM(!i.value)}),this.controls.attach(this),r.add(this.controls)}select(){this.setEnableControls(!0),this.material.userData.selected=!0,this.material.color.set(DZ)}deselect(){this.setEnableControls(!1),this.material.userData.selected=!1,this.material.color.set(this.material.userData.oldColor)}onClickOther(e){}onPointerUp(e){}onPointerDown(e){}onPointerEnter(e){this.userData.selected}onPointerLeave(){this.userData.selected}onPointerMove(e){}destroyExtras(){this.material.dispose(),this.controls.detach(),this.controls.dispose()}copy(e,n){return super.copy(e,n),this.controls=e.controls,this.baseBrush=e.baseBrush,this.holeBrush=e.holeBrush,this}}const PZ=({role:t,type:e,floorLevel:n,index:r})=>({role:t,type:e,floorLevel:n,index:r}),LZ={componentWrapper:"componentWrapper",component:"component"},FZ={wall:"wall",room:"room",box:"box",none:null};function vr(t){let e=0;const n=Ye(we().getLineArrayBuilding);for(let r=0;r<n.length;r++){const i=n[r];if(r<t){const s=i.floor.floorHeight;e+=Number(s)}}return De().verandarHeight+at(e)}function IZ(){var t=Object.create(null);function e(i,s){var o=i.id,a=i.name,l=i.dependencies;l===void 0&&(l=[]);var u=i.init;u===void 0&&(u=function(){});var c=i.getTransferables;if(c===void 0&&(c=null),!t[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(d){if(d instanceof Error)throw d}),h=t[h.id].value),h}),u=r("<"+a+">.init",u),c&&(c=r("<"+a+">.getTransferables",c));var f=null;typeof u=="function"?f=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:f,getTransferables:c},s(f)}catch(h){h&&h.noLog||console.error(h),s(h)}}function n(i,s){var o,a=i.id,l=i.args;(!t[a]||typeof t[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=t[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(c,function(f){return s(f instanceof Error?f:new Error(""+f))}):c(u)}catch(f){s(f)}function c(f){try{var h=t[a].getTransferables&&t[a].getTransferables(f);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(f,h)}catch(d){console.error(d),s(d)}}}function r(i,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+i.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(i){var s=i.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&n(l,function(u,c){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},c||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function kZ(t){var e=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return e._getInitResult().then(function(i){if(typeof i=="function")return i.apply(void 0,n);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var n=t.dependencies,r=t.init;n=Array.isArray(n)?n.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var i=Promise.all(n).then(function(s){return r.apply(null,s)});return e._getInitResult=function(){return i},i},e}var IN=function(){var t=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),t=!0}catch(n){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+n.message+"]")}return IN=function(){return t},t},RZ=0,OZ=0,ex=!1,wg=Object.create(null),bg=Object.create(null),TA=Object.create(null);function jm(t){if((!t||typeof t.init!="function")&&!ex)throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,r=t.getTransferables,i=t.workerId;if(!IN())return kZ(t);i==null&&(i="#default");var s="workerModule"+ ++RZ,o=t.name||s,a=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(ex=!0,u=jm({workerId:i,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+Py(u)+`
)}`}),ex=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];if(!a){a=VL(i,"registerModule",l.workerModuleData);var f=function(){a=null,bg[i].delete(f)};(bg[i]||(bg[i]=new Set)).add(f)}return a.then(function(h){var d=h.isCallable;if(d)return VL(i,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Py(n),getTransferables:r&&Py(r)},l}function BZ(t){bg[t]&&bg[t].forEach(function(e){e()}),wg[t]&&(wg[t].terminate(),delete wg[t])}function Py(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function NZ(t){var e=wg[t];if(!e){var n=Py(IZ);e=wg[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+` **/

;(`+n+")()"],{type:"application/javascript"}))),e.onmessage=function(r){var i=r.data,s=i.messageId,o=TA[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete TA[s],o(i)}}return e}function VL(t,e,n){return new Promise(function(r,i){var s=++OZ;TA[s]=function(o){o.success?r(o.result):i(new Error("Error in worker "+e+" call: "+o.error))},NZ(t).postMessage({messageId:s,action:e,data:n})})}function kN(){var t=function(e){function n(N,W,H,K,ee,Z,J,X){var Q=1-J;X.x=Q*Q*N+2*Q*J*H+J*J*ee,X.y=Q*Q*W+2*Q*J*K+J*J*Z}function r(N,W,H,K,ee,Z,J,X,Q,oe){var he=1-Q;oe.x=he*he*he*N+3*he*he*Q*H+3*he*Q*Q*ee+Q*Q*Q*J,oe.y=he*he*he*W+3*he*he*Q*K+3*he*Q*Q*Z+Q*Q*Q*X}function i(N,W){for(var H=/([MLQCZ])([^MLQCZ]*)/g,K,ee,Z,J,X;K=H.exec(N);){var Q=K[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(oe){return parseFloat(oe)});switch(K[1]){case"M":J=ee=Q[0],X=Z=Q[1];break;case"L":(Q[0]!==J||Q[1]!==X)&&W("L",J,X,J=Q[0],X=Q[1]);break;case"Q":{W("Q",J,X,J=Q[2],X=Q[3],Q[0],Q[1]);break}case"C":{W("C",J,X,J=Q[4],X=Q[5],Q[0],Q[1],Q[2],Q[3]);break}case"Z":(J!==ee||X!==Z)&&W("L",J,X,ee,Z);break}}}function s(N,W,H){H===void 0&&(H=16);var K={x:0,y:0};i(N,function(ee,Z,J,X,Q,oe,he,ve,ye){switch(ee){case"L":W(Z,J,X,Q);break;case"Q":{for(var V=Z,R=J,B=1;B<H;B++)n(Z,J,oe,he,X,Q,B/(H-1),K),W(V,R,K.x,K.y),V=K.x,R=K.y;break}case"C":{for(var j=Z,se=J,Y=1;Y<H;Y++)r(Z,J,oe,he,ve,ye,X,Q,Y/(H-1),K),W(j,se,K.x,K.y),j=K.x,se=K.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(N,W){var H=N.getContext?N.getContext("webgl",u):N,K=l.get(H);if(!K){let he=function(j){var se=Z[j];if(!se&&(se=Z[j]=H.getExtension(j),!se))throw new Error(j+" not supported");return se},ve=function(j,se){var Y=H.createShader(se);return H.shaderSource(Y,j),H.compileShader(Y),Y},ye=function(j,se,Y,G){if(!J[j]){var le={},ge={},ae=H.createProgram();H.attachShader(ae,ve(se,H.VERTEX_SHADER)),H.attachShader(ae,ve(Y,H.FRAGMENT_SHADER)),H.linkProgram(ae),J[j]={program:ae,transaction:function(U){H.useProgram(ae),U({setUniform:function(te,fe){for(var ne=[],de=arguments.length-2;de-- >0;)ne[de]=arguments[de+2];var pe=ge[fe]||(ge[fe]=H.getUniformLocation(ae,fe));H["uniform"+te].apply(H,[pe].concat(ne))},setAttribute:function(te,fe,ne,de,pe){var _e=le[te];_e||(_e=le[te]={buf:H.createBuffer(),loc:H.getAttribLocation(ae,te),data:null}),H.bindBuffer(H.ARRAY_BUFFER,_e.buf),H.vertexAttribPointer(_e.loc,fe,H.FLOAT,!1,0,0),H.enableVertexAttribArray(_e.loc),ee?H.vertexAttribDivisor(_e.loc,de):he("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(_e.loc,de),pe!==_e.data&&(H.bufferData(H.ARRAY_BUFFER,pe,ne),_e.data=pe)}})}}}J[j].transaction(G)},V=function(j,se){Q++;try{H.activeTexture(H.TEXTURE0+Q);var Y=X[j];Y||(Y=X[j]=H.createTexture(),H.bindTexture(H.TEXTURE_2D,Y),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.NEAREST),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.NEAREST)),H.bindTexture(H.TEXTURE_2D,Y),se(Y,Q)}finally{Q--}},R=function(j,se,Y){var G=H.createFramebuffer();oe.push(G),H.bindFramebuffer(H.FRAMEBUFFER,G),H.activeTexture(H.TEXTURE0+se),H.bindTexture(H.TEXTURE_2D,j),H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,j,0);try{Y(G)}finally{H.deleteFramebuffer(G),H.bindFramebuffer(H.FRAMEBUFFER,oe[--oe.length-1]||null)}},B=function(){Z={},J={},X={},Q=-1,oe.length=0};var ee=typeof WebGL2RenderingContext<"u"&&H instanceof WebGL2RenderingContext,Z={},J={},X={},Q=-1,oe=[];H.canvas.addEventListener("webglcontextlost",function(j){B(),j.preventDefault()},!1),l.set(H,K={gl:H,isWebGL2:ee,getExtension:he,withProgram:ye,withTexture:V,withTextureFramebuffer:R,handleContextLoss:B})}W(K)}function f(N,W,H,K,ee,Z,J,X){J===void 0&&(J=15),X===void 0&&(X=null),c(N,function(Q){var oe=Q.gl,he=Q.withProgram,ve=Q.withTexture;ve("copy",function(ye,V){oe.texImage2D(oe.TEXTURE_2D,0,oe.RGBA,ee,Z,0,oe.RGBA,oe.UNSIGNED_BYTE,W),he("copy",o,a,function(R){var B=R.setUniform,j=R.setAttribute;j("aUV",2,oe.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),B("1i","image",V),oe.bindFramebuffer(oe.FRAMEBUFFER,X||null),oe.disable(oe.BLEND),oe.colorMask(J&8,J&4,J&2,J&1),oe.viewport(H,K,ee,Z),oe.scissor(H,K,ee,Z),oe.drawArrays(oe.TRIANGLES,0,3)})})})}function h(N,W,H){var K=N.width,ee=N.height;c(N,function(Z){var J=Z.gl,X=new Uint8Array(K*ee*4);J.readPixels(0,0,K,ee,J.RGBA,J.UNSIGNED_BYTE,X),N.width=W,N.height=H,f(J,X,0,0,K,ee)})}var d=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:f,resizeWebGLCanvasWithoutClearing:h});function p(N,W,H,K,ee,Z){Z===void 0&&(Z=1);var J=new Uint8Array(N*W),X=K[2]-K[0],Q=K[3]-K[1],oe=[];s(H,function(j,se,Y,G){oe.push({x1:j,y1:se,x2:Y,y2:G,minX:Math.min(j,Y),minY:Math.min(se,G),maxX:Math.max(j,Y),maxY:Math.max(se,G)})}),oe.sort(function(j,se){return j.maxX-se.maxX});for(var he=0;he<N;he++)for(var ve=0;ve<W;ve++){var ye=R(K[0]+X*(he+.5)/N,K[1]+Q*(ve+.5)/W),V=Math.pow(1-Math.abs(ye)/ee,Z)/2;ye<0&&(V=1-V),V=Math.max(0,Math.min(255,Math.round(V*255))),J[ve*N+he]=V}return J;function R(j,se){for(var Y=1/0,G=1/0,le=oe.length;le--;){var ge=oe[le];if(ge.maxX+G<=j)break;if(j+G>ge.minX&&se-G<ge.maxY&&se+G>ge.minY){var ae=_(j,se,ge.x1,ge.y1,ge.x2,ge.y2);ae<Y&&(Y=ae,G=Math.sqrt(Y))}}return B(j,se)&&(G=-G),G}function B(j,se){for(var Y=0,G=oe.length;G--;){var le=oe[G];if(le.maxX<=j)break;var ge=le.y1>se!=le.y2>se&&j<(le.x2-le.x1)*(se-le.y1)/(le.y2-le.y1)+le.x1;ge&&(Y+=le.y1<le.y2?1:-1)}return Y!==0}}function g(N,W,H,K,ee,Z,J,X,Q,oe){Z===void 0&&(Z=1),X===void 0&&(X=0),Q===void 0&&(Q=0),oe===void 0&&(oe=0),x(N,W,H,K,ee,Z,J,null,X,Q,oe)}function x(N,W,H,K,ee,Z,J,X,Q,oe,he){Z===void 0&&(Z=1),Q===void 0&&(Q=0),oe===void 0&&(oe=0),he===void 0&&(he=0);for(var ve=p(N,W,H,K,ee,Z),ye=new Uint8Array(ve.length*4),V=0;V<ve.length;V++)ye[V*4+he]=ve[V];f(J,ye,Q,oe,N,W,1<<3-he,X)}function _(N,W,H,K,ee,Z){var J=ee-H,X=Z-K,Q=J*J+X*X,oe=Q?Math.max(0,Math.min(1,((N-H)*J+(W-K)*X)/Q)):0,he=N-(H+oe*J),ve=W-(K+oe*X);return he*he+ve*ve}var m=Object.freeze({__proto__:null,generate:p,generateIntoCanvas:g,generateIntoFramebuffer:x}),v="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",b="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",w="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",A=new Float32Array([0,0,2,0,0,2]),E=null,S=!1,C={},M=new WeakMap;function D(N){if(!S&&!k(N))throw new Error("WebGL generation not supported")}function T(N,W,H,K,ee,Z,J){if(Z===void 0&&(Z=1),J===void 0&&(J=null),!J&&(J=E,!J)){var X=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!X)throw new Error("OffscreenCanvas or DOM canvas not supported");J=E=X.getContext("webgl",{depth:!1})}D(J);var Q=new Uint8Array(N*W*4);c(J,function(ye){var V=ye.gl,R=ye.withTexture,B=ye.withTextureFramebuffer;R("readable",function(j,se){V.texImage2D(V.TEXTURE_2D,0,V.RGBA,N,W,0,V.RGBA,V.UNSIGNED_BYTE,null),B(j,se,function(Y){F(N,W,H,K,ee,Z,V,Y,0,0,0),V.readPixels(0,0,N,W,V.RGBA,V.UNSIGNED_BYTE,Q)})})});for(var oe=new Uint8Array(N*W),he=0,ve=0;he<Q.length;he+=4)oe[ve++]=Q[he];return oe}function L(N,W,H,K,ee,Z,J,X,Q,oe){Z===void 0&&(Z=1),X===void 0&&(X=0),Q===void 0&&(Q=0),oe===void 0&&(oe=0),F(N,W,H,K,ee,Z,J,null,X,Q,oe)}function F(N,W,H,K,ee,Z,J,X,Q,oe,he){Z===void 0&&(Z=1),Q===void 0&&(Q=0),oe===void 0&&(oe=0),he===void 0&&(he=0),D(J);var ve=[];s(H,function(ye,V,R,B){ve.push(ye,V,R,B)}),ve=new Float32Array(ve),c(J,function(ye){var V=ye.gl,R=ye.isWebGL2,B=ye.getExtension,j=ye.withProgram,se=ye.withTexture,Y=ye.withTextureFramebuffer,G=ye.handleContextLoss;if(se("rawDistances",function(le,ge){(N!==le._lastWidth||W!==le._lastHeight)&&V.texImage2D(V.TEXTURE_2D,0,V.RGBA,le._lastWidth=N,le._lastHeight=W,0,V.RGBA,V.UNSIGNED_BYTE,null),j("main",v,b,function(ae){var ue=ae.setAttribute,U=ae.setUniform,z=!R&&B("ANGLE_instanced_arrays"),te=!R&&B("EXT_blend_minmax");ue("aUV",2,V.STATIC_DRAW,0,A),ue("aLineSegment",4,V.DYNAMIC_DRAW,1,ve),U.apply(void 0,["4f","uGlyphBounds"].concat(K)),U("1f","uMaxDistance",ee),U("1f","uExponent",Z),Y(le,ge,function(fe){V.enable(V.BLEND),V.colorMask(!0,!0,!0,!0),V.viewport(0,0,N,W),V.scissor(0,0,N,W),V.blendFunc(V.ONE,V.ONE),V.blendEquationSeparate(V.FUNC_ADD,R?V.MAX:te.MAX_EXT),V.clear(V.COLOR_BUFFER_BIT),R?V.drawArraysInstanced(V.TRIANGLES,0,3,ve.length/4):z.drawArraysInstancedANGLE(V.TRIANGLES,0,3,ve.length/4)})}),j("post",o,w,function(ae){ae.setAttribute("aUV",2,V.STATIC_DRAW,0,A),ae.setUniform("1i","tex",ge),V.bindFramebuffer(V.FRAMEBUFFER,X),V.disable(V.BLEND),V.colorMask(he===0,he===1,he===2,he===3),V.viewport(Q,oe,N,W),V.scissor(Q,oe,N,W),V.drawArrays(V.TRIANGLES,0,3)})}),V.isContextLost())throw G(),new Error("webgl context lost")})}function k(N){var W=!N||N===E?C:N.canvas||N,H=M.get(W);if(H===void 0){S=!0;var K=null;try{var ee=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],Z=T(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,N);H=Z&&ee.length===Z.length&&Z.every(function(J,X){return J===ee[X]}),H||(K="bad trial run results",console.info(ee,Z))}catch(J){H=!1,K=J.message}K&&console.warn("WebGL SDF generation not supported:",K),S=!1,M.set(W,H)}return H}var I=Object.freeze({__proto__:null,generate:T,generateIntoCanvas:L,generateIntoFramebuffer:F,isSupported:k});function O(N,W,H,K,ee,Z){ee===void 0&&(ee=Math.max(K[2]-K[0],K[3]-K[1])/2),Z===void 0&&(Z=1);try{return T.apply(I,arguments)}catch(J){return console.info("WebGL SDF generation failed, falling back to JS",J),p.apply(m,arguments)}}function $(N,W,H,K,ee,Z,J,X,Q,oe){ee===void 0&&(ee=Math.max(K[2]-K[0],K[3]-K[1])/2),Z===void 0&&(Z=1),X===void 0&&(X=0),Q===void 0&&(Q=0),oe===void 0&&(oe=0);try{return L.apply(I,arguments)}catch(he){return console.info("WebGL SDF generation failed, falling back to JS",he),g.apply(m,arguments)}}return e.forEachPathCommand=i,e.generate=O,e.generateIntoCanvas=$,e.javascript=m,e.pathToLineSegments=s,e.webgl=I,e.webglUtils=d,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}function VZ(){var t=function(e){var n={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},r={},i={};r.L=1,i[1]="L",Object.keys(n).forEach(function(G,le){r[G]=1<<le+1,i[r[G]]=G}),Object.freeze(r);var s=r.LRI|r.RLI|r.FSI,o=r.L|r.R|r.AL,a=r.B|r.S|r.WS|r.ON|r.FSI|r.LRI|r.RLI|r.PDI,l=r.BN|r.RLE|r.LRE|r.RLO|r.LRO|r.PDF,u=r.S|r.WS|r.B|s|r.PDI|l,c=null;function f(){if(!c){c=new Map;var G=function(ge){if(n.hasOwnProperty(ge)){var ae=0;n[ge].split(",").forEach(function(ue){var U=ue.split("+"),z=U[0],te=U[1];z=parseInt(z,36),te=te?parseInt(te,36):0,c.set(ae+=z,r[ge]);for(var fe=0;fe<te;fe++)c.set(++ae,r[ge])})}};for(var le in n)G(le)}}function h(G){return f(),c.get(G.codePointAt(0))||r.L}function d(G){return i[h(G)]}var p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function g(G,le){var ge=36,ae=0,ue=new Map,U=le&&new Map,z;return G.split(",").forEach(function te(fe){if(fe.indexOf("+")!==-1)for(var ne=+fe;ne--;)te(z);else{z=fe;var de=fe.split(">"),pe=de[0],_e=de[1];pe=String.fromCodePoint(ae+=parseInt(pe,ge)),_e=String.fromCodePoint(ae+=parseInt(_e,ge)),ue.set(pe,_e),le&&U.set(_e,pe)}}),{map:ue,reverseMap:U}}var x,_,m;function v(){if(!x){var G=g(p.pairs,!0),le=G.map,ge=G.reverseMap;x=le,_=ge,m=g(p.canonical,!1).map}}function b(G){return v(),x.get(G)||null}function w(G){return v(),_.get(G)||null}function A(G){return v(),m.get(G)||null}var E=r.L,S=r.R,C=r.EN,M=r.ES,D=r.ET,T=r.AN,L=r.CS,F=r.B,k=r.S,I=r.ON,O=r.BN,$=r.NSM,N=r.AL,W=r.LRO,H=r.RLO,K=r.LRE,ee=r.RLE,Z=r.PDF,J=r.LRI,X=r.RLI,Q=r.FSI,oe=r.PDI;function he(G,le){for(var ge=125,ae=new Uint32Array(G.length),ue=0;ue<G.length;ue++)ae[ue]=h(G[ue]);var U=new Map;function z(gi,vo){var Ji=ae[gi];ae[gi]=vo,U.set(Ji,U.get(Ji)-1),Ji&a&&U.set(a,U.get(a)-1),U.set(vo,(U.get(vo)||0)+1),vo&a&&U.set(a,(U.get(a)||0)+1)}for(var te=new Uint8Array(G.length),fe=new Map,ne=[],de=null,pe=0;pe<G.length;pe++)de||ne.push(de={start:pe,end:G.length-1,level:le==="rtl"?1:le==="ltr"?0:jD(pe,!1)}),ae[pe]&F&&(de.end=pe,de=null);for(var _e=ee|K|H|W|s|oe|Z|F,be=function(gi){return gi+(gi&1?1:2)},Me=function(gi){return gi+(gi&1?2:1)},Ve=0;Ve<ne.length;Ve++){de=ne[Ve];var Pe=[{_level:de.level,_override:0,_isolate:0}],je=void 0,Ze=0,ft=0,gt=0;U.clear();for(var dt=de.start;dt<=de.end;dt++){var At=ae[dt];if(je=Pe[Pe.length-1],U.set(At,(U.get(At)||0)+1),At&a&&U.set(a,(U.get(a)||0)+1),At&_e)if(At&(ee|K)){te[dt]=je._level;var nn=(At===ee?Me:be)(je._level);nn<=ge&&!Ze&&!ft?Pe.push({_level:nn,_override:0,_isolate:0}):Ze||ft++}else if(At&(H|W)){te[dt]=je._level;var qt=(At===H?Me:be)(je._level);qt<=ge&&!Ze&&!ft?Pe.push({_level:qt,_override:At&H?S:E,_isolate:0}):Ze||ft++}else if(At&s){At&Q&&(At=jD(dt+1,!0)===1?X:J),te[dt]=je._level,je._override&&z(dt,je._override);var Dn=(At===X?Me:be)(je._level);Dn<=ge&&Ze===0&&ft===0?(gt++,Pe.push({_level:Dn,_override:0,_isolate:1,_isolInitIndex:dt})):Ze++}else if(At&oe){if(Ze>0)Ze--;else if(gt>0){for(ft=0;!Pe[Pe.length-1]._isolate;)Pe.pop();var Tr=Pe[Pe.length-1]._isolInitIndex;Tr!=null&&(fe.set(Tr,dt),fe.set(dt,Tr)),Pe.pop(),gt--}je=Pe[Pe.length-1],te[dt]=je._level,je._override&&z(dt,je._override)}else At&Z?(Ze===0&&(ft>0?ft--:!je._isolate&&Pe.length>1&&(Pe.pop(),je=Pe[Pe.length-1])),te[dt]=je._level):At&F&&(te[dt]=de.level);else te[dt]=je._level,je._override&&At!==O&&z(dt,je._override)}for(var cn=[],Tn=null,fn=de.start;fn<=de.end;fn++){var Ii=ae[fn];if(!(Ii&l)){var Pn=te[fn],Ln=Ii&s,ki=Ii===oe;Tn&&Pn===Tn._level?(Tn._end=fn,Tn._endsWithIsolInit=Ln):cn.push(Tn={_start:fn,_end:fn,_level:Pn,_startsWithPDI:ki,_endsWithIsolInit:Ln})}}for(var ni=[],ce=0;ce<cn.length;ce++){var Ee=cn[ce];if(!Ee._startsWithPDI||Ee._startsWithPDI&&!fe.has(Ee._start)){for(var Te=[Tn=Ee],Ce=void 0;Tn&&Tn._endsWithIsolInit&&(Ce=fe.get(Tn._end))!=null;)for(var Le=ce+1;Le<cn.length;Le++)if(cn[Le]._start===Ce){Te.push(Tn=cn[Le]);break}for(var rt=[],ct=0;ct<Te.length;ct++)for(var lt=Te[ct],wt=lt._start;wt<=lt._end;wt++)rt.push(wt);for(var Jt=te[rt[0]],It=de.level,Rt=rt[0]-1;Rt>=0;Rt--)if(!(ae[Rt]&l)){It=te[Rt];break}var mn=rt[rt.length-1],go=te[mn],Ut=de.level;if(!(ae[mn]&s)){for(var Is=mn+1;Is<=de.end;Is++)if(!(ae[Is]&l)){Ut=te[Is];break}}ni.push({_seqIndices:rt,_sosType:Math.max(It,Jt)%2?S:E,_eosType:Math.max(Ut,go)%2?S:E})}}for(var rn=0;rn<ni.length;rn++){var ms=ni[rn],it=ms._seqIndices,Ri=ms._sosType,ks=ms._eosType;if(U.get($))for(var hn=0;hn<it.length;hn++){var $o=it[hn];if(ae[$o]&$){for(var ur=Ri,Hr=hn-1;Hr>=0;Hr--)if(!(ae[it[Hr]]&l)){ur=ae[it[Hr]];break}z($o,ur&(s|oe)?I:ur)}}if(U.get(C))for(var nr=0;nr<it.length;nr++){var tp=it[nr];if(ae[tp]&C)for(var Cf=nr-1;Cf>=-1;Cf--){var pc=Cf===-1?Ri:ae[it[Cf]];if(pc&o){pc===N&&z(tp,T);break}}}if(U.get(N))for(var Fl=0;Fl<it.length;Fl++){var np=it[Fl];ae[np]&N&&z(np,S)}if(U.get(M)||U.get(L))for(var Il=1;Il<it.length-1;Il++){var Xo=it[Il];if(ae[Xo]&(M|L)){for(var Mf=0,Tw=0,Pw=Il-1;Pw>=0&&(Mf=ae[it[Pw]],!!(Mf&l));Pw--);for(var Lw=Il+1;Lw<it.length&&(Tw=ae[it[Lw]],!!(Tw&l));Lw++);Mf===Tw&&(ae[Xo]===M?Mf===C:Mf&(C|T))&&z(Xo,Mf)}}if(U.get(C))for(var rp=0;rp<it.length;rp++){var A6=it[rp];if(ae[A6]&C){for(var bv=rp-1;bv>=0&&ae[it[bv]]&(D|l);bv--)z(it[bv],C);for(var xv=rp+1;xv<it.length&&ae[it[xv]]&(D|l);xv++)z(it[xv],C)}}if(U.get(D)||U.get(M)||U.get(L))for(var ip=0;ip<it.length;ip++){var BD=it[ip];if(ae[BD]&(D|M|L)){z(BD,I);for(var Sv=ip-1;Sv>=0&&ae[it[Sv]]&l;Sv--)z(it[Sv],I);for(var Av=ip+1;Av<it.length&&ae[it[Av]]&l;Av++)z(it[Av],I)}}if(U.get(C))for(var Fw=0,ND=Ri;Fw<it.length;Fw++){var VD=it[Fw],Iw=ae[VD];Iw&C?ND===E&&z(VD,E):Iw&o&&(ND=Iw)}if(U.get(a)){var sp=S|C|T,zD=sp|E,Ev=[];{for(var Df=[],Tf=0;Tf<it.length;Tf++)if(ae[it[Tf]]&a){var op=G[it[Tf]],GD=void 0;if(b(op)!==null)if(Df.length<63)Df.push({char:op,seqIndex:Tf});else break;else if((GD=w(op))!==null)for(var ap=Df.length-1;ap>=0;ap--){var kw=Df[ap].char;if(kw===GD||kw===w(A(op))||b(A(kw))===op){Ev.push([Df[ap].seqIndex,Tf]),Df.length=ap;break}}}Ev.sort(function(gi,vo){return gi[0]-vo[0]})}for(var Rw=0;Rw<Ev.length;Rw++){for(var UD=Ev[Rw],lp=UD[0],Cv=UD[1],HD=!1,mo=0,Ow=lp+1;Ow<Cv;Ow++){var Bw=it[Ow];if(ae[Bw]&zD){HD=!0;var WD=ae[Bw]&sp?S:E;if(WD===Pf(Bw)){mo=WD;break}}}if(HD&&!mo){mo=Ri;for(var Nw=lp-1;Nw>=0;Nw--){var Mv=it[Nw];if(ae[Mv]&zD){var $D=ae[Mv]&sp?S:E;$D!==Pf(Mv)?mo=$D:mo=Pf(Mv);break}}}if(mo){if(ae[it[lp]]=ae[it[Cv]]=mo,mo!==Pf(it[lp])){for(var up=lp+1;up<it.length;up++)if(!(ae[it[up]]&l)){h(G[it[up]])&$&&(ae[it[up]]=mo);break}}if(mo!==Pf(it[Cv])){for(var cp=Cv+1;cp<it.length;cp++)if(!(ae[it[cp]]&l)){h(G[it[cp]])&$&&(ae[it[cp]]=mo);break}}}}for(var kl=0;kl<it.length;kl++)if(ae[it[kl]]&a){for(var XD=kl,Vw=kl,zw=Ri,fp=kl-1;fp>=0;fp--)if(ae[it[fp]]&l)XD=fp;else{zw=ae[it[fp]]&sp?S:E;break}for(var YD=ks,hp=kl+1;hp<it.length;hp++)if(ae[it[hp]]&(a|l))Vw=hp;else{YD=ae[it[hp]]&sp?S:E;break}for(var Dv=XD;Dv<=Vw;Dv++)ae[it[Dv]]=zw===YD?zw:Pf(it[Dv]);kl=Vw}}}for(var vs=de.start;vs<=de.end;vs++){var E6=te[vs],Tv=ae[vs];if(E6&1?Tv&(E|C|T)&&te[vs]++:Tv&S?te[vs]++:Tv&(T|C)&&(te[vs]+=2),Tv&l&&(te[vs]=vs===0?de.level:te[vs-1]),vs===de.end||h(G[vs])&(k|F))for(var Pv=vs;Pv>=0&&h(G[Pv])&u;Pv--)te[Pv]=de.level}}return{levels:te,paragraphs:ne};function jD(gi,vo){for(var Ji=gi;Ji<G.length;Ji++){var Rl=ae[Ji];if(Rl&(S|N))return 1;if(Rl&(F|E)||vo&&Rl===oe)return 0;if(Rl&s){var qD=C6(Ji);Ji=qD===-1?G.length:qD}}return 0}function C6(gi){for(var vo=1,Ji=gi+1;Ji<G.length;Ji++){var Rl=ae[Ji];if(Rl&F)break;if(Rl&oe){if(--vo===0)return Ji}else Rl&s&&vo++}return-1}function Pf(gi){return te[gi]&1?S:E}}var ve="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ye;function V(){if(!ye){var G=g(ve,!0),le=G.map,ge=G.reverseMap;ge.forEach(function(ae,ue){le.set(ue,ae)}),ye=le}}function R(G){return V(),ye.get(G)||null}function B(G,le,ge,ae){var ue=G.length;ge=Math.max(0,ge==null?0:+ge),ae=Math.min(ue-1,ae==null?ue-1:+ae);for(var U=new Map,z=ge;z<=ae;z++)if(le[z]&1){var te=R(G[z]);te!==null&&U.set(z,te)}return U}function j(G,le,ge,ae){var ue=G.length;ge=Math.max(0,ge==null?0:+ge),ae=Math.min(ue-1,ae==null?ue-1:+ae);var U=[];return le.paragraphs.forEach(function(z){var te=Math.max(ge,z.start),fe=Math.min(ae,z.end);if(te<fe){for(var ne=le.levels.slice(te,fe+1),de=fe;de>=te&&h(G[de])&u;de--)ne[de]=z.level;for(var pe=z.level,_e=1/0,be=0;be<ne.length;be++){var Me=ne[be];Me>pe&&(pe=Me),Me<_e&&(_e=Me|1)}for(var Ve=pe;Ve>=_e;Ve--)for(var Pe=0;Pe<ne.length;Pe++)if(ne[Pe]>=Ve){for(var je=Pe;Pe+1<ne.length&&ne[Pe+1]>=Ve;)Pe++;Pe>je&&U.push([je+ge,Pe+ge])}}}),U}function se(G,le,ge,ae){var ue=Y(G,le,ge,ae),U=[].concat(G);return ue.forEach(function(z,te){U[te]=(le.levels[z]&1?R(G[z]):null)||G[z]}),U.join("")}function Y(G,le,ge,ae){for(var ue=j(G,le,ge,ae),U=[],z=0;z<G.length;z++)U[z]=z;return ue.forEach(function(te){for(var fe=te[0],ne=te[1],de=U.slice(fe,ne+1),pe=de.length;pe--;)U[ne-pe]=de[pe]}),U}return e.closingToOpeningBracket=w,e.getBidiCharType=h,e.getBidiCharTypeName=d,e.getCanonicalBracket=A,e.getEmbeddingLevels=he,e.getMirroredCharacter=R,e.getMirroredCharactersMap=B,e.getReorderSegments=j,e.getReorderedIndices=Y,e.getReorderedString=se,e.openingToClosingBracket=b,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return t}const RN=/\bvoid\s+main\s*\(\s*\)\s*{/g;function PA(t){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(r,i){let s=Bt[i];return s?PA(s):r}return t.replace(e,n)}const si=[];for(let t=0;t<256;t++)si[t]=(t<16?"0":"")+t.toString(16);function zZ(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(si[t&255]+si[t>>8&255]+si[t>>16&255]+si[t>>24&255]+"-"+si[e&255]+si[e>>8&255]+"-"+si[e>>16&15|64]+si[e>>24&255]+"-"+si[n&63|128]+si[n>>8&255]+"-"+si[n>>16&255]+si[n>>24&255]+si[r&255]+si[r>>8&255]+si[r>>16&255]+si[r>>24&255]).toUpperCase()}const Ac=Object.assign||function(){let t=arguments[0];for(let e=1,n=arguments.length;e<n;e++){let r=arguments[e];if(r)for(let i in r)r.hasOwnProperty(i)&&(t[i]=r[i])}return t},GZ=Date.now(),zL=new WeakMap,GL=new Map;let UZ=1e10;function LA(t,e){const n=XZ(e);let r=zL.get(t);if(r||zL.set(t,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,s=function(u){t.onBeforeCompile.call(this,u);const c=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let f=GL[c];if(!f){const h=HZ(u,e,n);f=GL[c]=h}u.vertexShader=f.vertexShader,u.fragmentShader=f.fragmentShader,Ac(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-GZ}}),this[i]&&this[i](u)},o=function(){return a(e.chained?t:t.clone())},a=function(u){const c=Object.create(u,l);return Object.defineProperty(c,"baseMaterial",{value:t}),Object.defineProperty(c,"id",{value:UZ++}),c.uuid=zZ(),c.uniforms=Ac({},u.uniforms,e.uniforms),c.defines=Ac({},u.defines,e.defines),c.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",c.extensions=Ac({},u.extensions,e.extensions),c._listeners=void 0,c},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return t.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get(){return s},set(u){this[i]=u}},copy:{writable:!0,configurable:!0,value:function(u){return t.copy.call(this,u),!t.isShaderMaterial&&!t.isDerivedMaterial&&(Ac(this.extensions,u.extensions),Ac(this.defines,u.defines),Ac(this.uniforms,DB.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new t.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=LA(t.isDerivedMaterial?t.getDepthMaterial():new mM({depthPacking:_B}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=LA(t.isDerivedMaterial?t.getDistanceMaterial():new vM,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:c}=this;u&&u.dispose(),c&&c.dispose(),t.dispose.call(this)}}};return r[n]=o,new o}function HZ({vertexShader:t,fragmentShader:e},n,r){let{vertexDefs:i,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:a,fragmentDefs:l,fragmentMainIntro:u,fragmentMainOutro:c,fragmentColorTransform:f,customRewriter:h,timeUniform:d}=n;if(i=i||"",s=s||"",o=o||"",l=l||"",u=u||"",c=c||"",(a||h)&&(t=PA(t)),(f||h)&&(e=e.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),e=PA(e)),h){let p=h({vertexShader:t,fragmentShader:e});t=p.vertexShader,e=p.fragmentShader}if(f){let p=[];e=e.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(p.push(g),"")),c=`${f}
${p.join(`
`)}
${c}`}if(d){const p=`
uniform float ${d};
`;i=p+i,l=p+l}return a&&(t=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${t}
`,i=`${i}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${a}
}
`,s=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${s}
`,t=t.replace(/\b(position|normal|uv)\b/g,(p,g,x,_)=>/\battribute\s+vec[23]\s+$/.test(_.substr(0,x))?g:`troika_${g}_${r}`)),t=UL(t,r,i,s,o),e=UL(e,r,l,u,c),{vertexShader:t,fragmentShader:e}}function UL(t,e,n,r,i){return(r||i||n)&&(t=t.replace(RN,`
${n}
void troikaOrigMain${e}() {`),t+=`
void main() {
  ${r}
  troikaOrigMain${e}();
  ${i}
}`),t}function WZ(t,e){return t==="uniforms"?void 0:typeof e=="function"?e.toString():e}let $Z=0;const HL=new Map;function XZ(t){const e=JSON.stringify(t,WZ);let n=HL.get(e);return n==null&&HL.set(e,n=++$Z),n}function YZ(t,e,n){const{defaultFontURL:r}=n,i=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(m,v){function b(){const w=A=>{console.error(`Failure loading font ${m}${m===r?"":"; trying fallback"}`,A),m!==r&&(m=r,b())};try{const A=new XMLHttpRequest;A.open("get",m,!0),A.responseType="arraybuffer",A.onload=function(){if(A.status>=400)w(new Error(A.statusText));else if(A.status>0)try{const E=t(A.response);v(E)}catch(E){w(E)}},A.onerror=w,A.send()}catch(A){w(A)}}b()}function c(m,v){m||(m=r);let b=i[m];b?b.pending?b.pending.push(v):v(b):(i[m]={pending:[v]},u(m,w=>{let A=i[m].pending;i[m]=w,A.forEach(E=>E(w))}))}function f({text:m="",font:v=r,sdfGlyphSize:b=64,fontSize:w=1,letterSpacing:A=0,lineHeight:E="normal",maxWidth:S=s,direction:C,textAlign:M="left",textIndent:D=0,whiteSpace:T="normal",overflowWrap:L="normal",anchorX:F=0,anchorY:k=0,includeCaretPositions:I=!1,chunkedBoundsSize:O=8192,colorRanges:$=null},N,W=!1){const H=g(),K={fontLoad:0,typesetting:0};m.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),m=m.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),w=+w,A=+A,S=+S,E=E||"normal",D=+D,c(v,ee=>{const Z=isFinite(S);let J=null,X=null,Q=null,oe=null,he=null,ve=null,ye=null,V=0,R=0,B=T!=="nowrap";const{ascender:j,descender:se,unitsPerEm:Y,lineGap:G,capHeight:le,xHeight:ge}=ee;K.fontLoad=g()-H;const ae=g(),ue=w/Y;E==="normal"&&(E=(j-se+G)/Y),E=E*w;const U=(E-(j-se)*ue)/2,z=-(j*ue+U),te=Math.min(E,(j-se)*ue),fe=(j+se)/2*ue-te/2;let ne=D,de=new x;const pe=[de];ee.forEachGlyph(m,w,A,(Me,Ve,Pe)=>{const je=m.charAt(Pe),Ze=Me.advanceWidth*ue,ft=de.count;let gt;if("isEmpty"in Me||(Me.isWhitespace=!!je&&new RegExp(a).test(je),Me.canBreakAfter=!!je&&l.test(je),Me.isEmpty=Me.xMin===Me.xMax||Me.yMin===Me.yMax||o.test(je)),!Me.isWhitespace&&!Me.isEmpty&&R++,B&&Z&&!Me.isWhitespace&&Ve+Ze+ne>S&&ft){if(de.glyphAt(ft-1).glyphObj.canBreakAfter)gt=new x,ne=-Ve;else for(let At=ft;At--;)if(At===0&&L==="break-word"){gt=new x,ne=-Ve;break}else if(de.glyphAt(At).glyphObj.canBreakAfter){gt=de.splitAt(At+1);const nn=gt.glyphAt(0).x;ne-=nn;for(let qt=gt.count;qt--;)gt.glyphAt(qt).x-=nn;break}gt&&(de.isSoftWrapped=!0,de=gt,pe.push(de),V=S)}let dt=de.glyphAt(de.count);dt.glyphObj=Me,dt.x=Ve+ne,dt.width=Ze,dt.charIndex=Pe,je===`
`&&(de=new x,pe.push(de),ne=-(Ve+Ze+A*w)+D)}),pe.forEach(Me=>{for(let Ve=Me.count;Ve--;){let{glyphObj:Pe,x:je,width:Ze}=Me.glyphAt(Ve);if(!Pe.isWhitespace){Me.width=je+Ze,Me.width>V&&(V=Me.width);return}}});let _e=0,be=0;if(F&&(typeof F=="number"?_e=-F:typeof F=="string"&&(_e=-V*(F==="left"?0:F==="center"?.5:F==="right"?1:d(F)))),k){if(typeof k=="number")be=-k;else if(typeof k=="string"){let Me=pe.length*E;be=k==="top"?0:k==="top-baseline"?-z:k==="top-cap"?-z-le*ue:k==="top-ex"?-z-ge*ue:k==="middle"?Me/2:k==="bottom"?Me:k==="bottom-baseline"?Me-U+se*ue:d(k)*Me}}if(!W){const Me=e.getEmbeddingLevels(m,C);J=new Uint16Array(R),X=new Float32Array(R*2),Q={},ve=[s,s,-s,-s],ye=[];let Ve=z;I&&(he=new Float32Array(m.length*3)),$&&(oe=new Uint8Array(R*3));let Pe=0,je=-1,Ze=-1,ft,gt;if(pe.forEach((dt,At)=>{let{count:nn,width:qt}=dt;if(nn>0){let Dn=0;for(let Pn=nn;Pn--&&dt.glyphAt(Pn).glyphObj.isWhitespace;)Dn++;let Tr=0,cn=0;if(M==="center")Tr=(V-qt)/2;else if(M==="right")Tr=V-qt;else if(M==="justify"&&dt.isSoftWrapped){let Pn=0;for(let Ln=nn-Dn;Ln--;)dt.glyphAt(Ln).glyphObj.isWhitespace&&Pn++;cn=(V-qt)/Pn}if(cn||Tr){let Pn=0;for(let Ln=0;Ln<nn;Ln++){let ki=dt.glyphAt(Ln);const ni=ki.glyphObj;ki.x+=Tr+Pn,cn!==0&&ni.isWhitespace&&Ln<nn-Dn&&(Pn+=cn,ki.width+=cn)}}const Tn=e.getReorderSegments(m,Me,dt.glyphAt(0).charIndex,dt.glyphAt(dt.count-1).charIndex);for(let Pn=0;Pn<Tn.length;Pn++){const[Ln,ki]=Tn[Pn];let ni=1/0,ce=-1/0;for(let Ee=0;Ee<nn;Ee++)if(dt.glyphAt(Ee).charIndex>=Ln){let Te=Ee,Ce=Ee;for(;Ce<nn;Ce++){let Le=dt.glyphAt(Ce);if(Le.charIndex>ki)break;Ce<nn-Dn&&(ni=Math.min(ni,Le.x),ce=Math.max(ce,Le.x+Le.width))}for(let Le=Te;Le<Ce;Le++){const rt=dt.glyphAt(Le);rt.x=ce-(rt.x+rt.width-ni)}break}}let fn;const Ii=Pn=>fn=Pn;for(let Pn=0;Pn<nn;Pn++){let Ln=dt.glyphAt(Pn);fn=Ln.glyphObj;const ki=fn.index,ni=Me.levels[Ln.charIndex]&1;if(ni){const ce=e.getMirroredCharacter(m[Ln.charIndex]);ce&&ee.forEachGlyph(ce,0,0,Ii)}if(I){const{charIndex:ce}=Ln,Ee=Ln.x+_e,Te=Ln.x+Ln.width+_e;he[ce*3]=ni?Te:Ee,he[ce*3+1]=ni?Ee:Te,he[ce*3+2]=Ve+fe+be;const Ce=ce-je;Ce>1&&p(he,je,Ce),je=ce}if($){const{charIndex:ce}=Ln;for(;ce>Ze;)Ze++,$.hasOwnProperty(Ze)&&(gt=$[Ze])}if(!fn.isWhitespace&&!fn.isEmpty){const ce=Pe++;Q[ki]||(Q[ki]={path:fn.path,pathBounds:[fn.xMin,fn.yMin,fn.xMax,fn.yMax]});const Ee=Ln.x+_e,Te=Ve+be;X[ce*2]=Ee,X[ce*2+1]=Te;const Ce=Ee+fn.xMin*ue,Le=Te+fn.yMin*ue,rt=Ee+fn.xMax*ue,ct=Te+fn.yMax*ue;Ce<ve[0]&&(ve[0]=Ce),Le<ve[1]&&(ve[1]=Le),rt>ve[2]&&(ve[2]=rt),ct>ve[3]&&(ve[3]=ct),ce%O===0&&(ft={start:ce,end:ce,rect:[s,s,-s,-s]},ye.push(ft)),ft.end++;const lt=ft.rect;if(Ce<lt[0]&&(lt[0]=Ce),Le<lt[1]&&(lt[1]=Le),rt>lt[2]&&(lt[2]=rt),ct>lt[3]&&(lt[3]=ct),J[ce]=ki,$){const wt=ce*3;oe[wt]=gt>>16&255,oe[wt+1]=gt>>8&255,oe[wt+2]=gt&255}}}}Ve-=E}),he){const dt=m.length-je;dt>1&&p(he,je,dt)}}K.typesetting=g()-ae,N({glyphIds:J,glyphPositions:X,glyphData:Q,caretPositions:he,caretHeight:te,glyphColors:oe,chunkedBounds:ye,fontSize:w,unitsPerEm:Y,ascender:j*ue,descender:se*ue,capHeight:le*ue,xHeight:ge*ue,lineHeight:E,topBaseline:z,blockBounds:[_e,be-pe.length*E,_e+V,be],visibleBounds:ve,timings:K})})}function h(m,v){f(m,b=>{const[w,A,E,S]=b.blockBounds;v({width:E-w,height:S-A})},{metricsOnly:!0})}function d(m){let v=m.match(/^([\d.]+)%$/),b=v?parseFloat(v[1]):NaN;return isNaN(b)?0:b/100}function p(m,v,b){const w=m[v*3],A=m[v*3+1],E=m[v*3+2],S=(A-w)/b;for(let C=0;C<b;C++){const M=(v+C)*3;m[M]=w+S*C,m[M+1]=w+S*(C+1),m[M+2]=E}}function g(){return(self.performance||Date).now()}function x(){this.data=[]}const _=["glyphObj","x","width","charIndex"];return x.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/_.length)},glyphAt(m){let v=x.flyweight;return v.data=this.data,v.index=m,v},splitAt(m){let v=new x;return v.data=this.data.splice(m*_.length),v}},x.flyweight=_.reduce((m,v,b,w)=>(Object.defineProperty(m,v,{get(){return this.data[this.index*_.length+b]},set(A){this.data[this.index*_.length+b]=A}}),m),{data:null,index:0}),{typeset:f,measure:h,loadFont:c}}const Jc=()=>(self.performance||Date).now(),O_=kN();let WL;function jZ(t,e,n,r,i,s,o,a,l,u,c=!0){return c?JZ(t,e,n,r,i,s,o,a,l,u).then(null,f=>(WL||(console.warn("WebGL SDF generation failed, falling back to JS",f),WL=!0),XL(t,e,n,r,i,s,o,a,l,u))):XL(t,e,n,r,i,s,o,a,l,u)}const Ly=[],qZ=5;let FA=0;function ON(){const t=Jc();for(;Ly.length&&Jc()-t<qZ;)Ly.shift()();FA=Ly.length?setTimeout(ON,0):0}const JZ=(...t)=>new Promise((e,n)=>{Ly.push(()=>{const r=Jc();try{O_.webgl.generateIntoCanvas(...t),e({timing:Jc()-r})}catch(i){n(i)}}),FA||(FA=setTimeout(ON,0))}),KZ=4,ZZ=2e3,$L={};let QZ=0;function XL(t,e,n,r,i,s,o,a,l,u){const c="TroikaTextSDFGenerator_JS_"+QZ++%KZ;let f=$L[c];return f||(f=$L[c]={workerModule:jm({name:c,workerId:c,dependencies:[kN,Jc],init(h,d){const p=h().javascript.generate;return function(...g){const x=d();return{textureData:p(...g),timing:d()-x}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),f.requests++,clearTimeout(f.idleTimer),f.workerModule(t,e,n,r,i,s).then(({textureData:h,timing:d})=>{const p=Jc(),g=new Uint8Array(h.length*4);for(let x=0;x<h.length;x++)g[x*4+u]=h[x];return O_.webglUtils.renderImageData(o,g,a,l,t,e,1<<3-u),d+=Jc()-p,--f.requests===0&&(f.idleTimer=setTimeout(()=>{BZ(c)},ZZ)),{timing:d}})}function eQ(t){t._warm||(O_.webgl.isSupported(t),t._warm=!0)}const tQ=O_.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function nQ(){return typeof window>"u"&&(self.window=self),function(t){var e={parse:function(i){var s=e._bin,o=new Uint8Array(i);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],c=0;c<l;c++){var f=s.readUint(o,a);a+=4,u.push(e._readFont(o,f))}return u}return[e._readFont(o,0)]},_readFont:function(i,s){var o=e._bin,a=s;o.readFixed(i,s),s+=4;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],c={_data:i,_offset:a},f={},h=0;h<l;h++){var d=o.readASCII(i,s,4);s+=4,o.readUint(i,s),s+=4;var p=o.readUint(i,s);s+=4;var g=o.readUint(i,s);s+=4,f[d]={offset:p,length:g}}for(h=0;h<u.length;h++){var x=u[h];f[x]&&(c[x.trim()]=e[x.trim()].parse(i,f[x].offset,f[x].length,c))}return c},_tabOffset:function(i,s,o){for(var a=e._bin,l=a.readUshort(i,o+4),u=o+12,c=0;c<l;c++){var f=a.readASCII(i,u,4);u+=4,a.readUint(i,u),u+=4;var h=a.readUint(i,u);if(u+=4,a.readUint(i,u),u+=4,f==s)return h}return 0}};e._bin={readFixed:function(i,s){return(i[s]<<8|i[s+1])+(i[s+2]<<8|i[s+3])/65540},readF2dot14:function(i,s){return e._bin.readShort(i,s)/16384},readInt:function(i,s){return e._bin._view(i).getInt32(s)},readInt8:function(i,s){return e._bin._view(i).getInt8(s)},readShort:function(i,s){return e._bin._view(i).getInt16(s)},readUshort:function(i,s){return e._bin._view(i).getUint16(s)},readUshorts:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(i,s+2*l));return a},readUint:function(i,s){return e._bin._view(i).getUint32(s)},readUint64:function(i,s){return 4294967296*e._bin.readUint(i,s)+e._bin.readUint(i,s+4)},readASCII:function(i,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(i[s+l]);return a},readUnicode:function(i,s,o){for(var a="",l=0;l<o;l++){var u=i[s++]<<8|i[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(i,s,o){var a=e._bin._tdec;return a&&s==0&&o==i.length?a.decode(i):e._bin.readASCII(i,s,o)},readBytes:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(i[s+l]);return a},readASCIIArray:function(i,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(i[s+l]));return a},_view:function(i){return i._dataView||(i._dataView=i.buffer?new DataView(i.buffer,i.byteOffset,i.byteLength):new DataView(new Uint8Array(i).buffer))}},e._lctf={},e._lctf.parse=function(i,s,o,a,l){var u=e._bin,c={},f=s;u.readFixed(i,s),s+=4;var h=u.readUshort(i,s);s+=2;var d=u.readUshort(i,s);s+=2;var p=u.readUshort(i,s);return s+=2,c.scriptList=e._lctf.readScriptList(i,f+h),c.featureList=e._lctf.readFeatureList(i,f+d),c.lookupList=e._lctf.readLookupList(i,f+p,l),c},e._lctf.readLookupList=function(i,s,o){var a=e._bin,l=s,u=[],c=a.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var h=a.readUshort(i,s);s+=2;var d=e._lctf.readLookupTable(i,l+h,o);u.push(d)}return u},e._lctf.readLookupTable=function(i,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(i,s),s+=2,u.flag=a.readUshort(i,s),s+=2;var c=a.readUshort(i,s);s+=2;for(var f=u.ltype,h=0;h<c;h++){var d=a.readUshort(i,s);s+=2;var p=o(i,f,l+d,u);u.tabs.push(p)}return u},e._lctf.numOfOnes=function(i){for(var s=0,o=0;o<32;o++)(i>>>o&1)!=0&&s++;return s},e._lctf.readClassDef=function(i,s){var o=e._bin,a=[],l=o.readUshort(i,s);if(s+=2,l==1){var u=o.readUshort(i,s);s+=2;var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++)a.push(u+f),a.push(u+f),a.push(o.readUshort(i,s)),s+=2}if(l==2){var h=o.readUshort(i,s);for(s+=2,f=0;f<h;f++)a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2,a.push(o.readUshort(i,s)),s+=2}return a},e._lctf.getInterval=function(i,s){for(var o=0;o<i.length;o+=3){var a=i[o],l=i[o+1];if(i[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(i,s){var o=e._bin,a={};a.fmt=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(i,s,l)),a.fmt==2&&(a.tab=o.readUshorts(i,s,3*l)),a},e._lctf.coverageIndex=function(i,s){var o=i.tab;if(i.fmt==1)return o.indexOf(s);if(i.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2;var d=e._lctf.readFeatureTable(i,a+h);d.tag=f.trim(),l.push(d)}return l},e._lctf.readFeatureTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,u>0&&(l.featureParams=a+u);var c=o.readUshort(i,s);s+=2,l.tab=[];for(var f=0;f<c;f++)l.tab.push(o.readUshort(i,s+2*f));return l},e._lctf.readScriptList=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readASCII(i,s,4);s+=4;var h=o.readUshort(i,s);s+=2,l[f.trim()]=e._lctf.readScriptTable(i,a+h)}return l},e._lctf.readScriptTable=function(i,s){var o=e._bin,a=s,l={},u=o.readUshort(i,s);s+=2,l.default=e._lctf.readLangSysTable(i,a+u);var c=o.readUshort(i,s);s+=2;for(var f=0;f<c;f++){var h=o.readASCII(i,s,4);s+=4;var d=o.readUshort(i,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(i,a+d)}return l},e._lctf.readLangSysTable=function(i,s){var o=e._bin,a={};o.readUshort(i,s),s+=2,a.reqFeature=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);return s+=2,a.features=o.readUshorts(i,s,l),a},e.CFF={},e.CFF.parse=function(i,s,o){var a=e._bin;(i=new Uint8Array(i.buffer,s,o))[s=0],i[++s],i[++s],i[++s],s++;var l=[];s=e.CFF.readIndex(i,s,l);for(var u=[],c=0;c<l.length-1;c++)u.push(a.readASCII(i,s+l[c],l[c+1]-l[c]));s+=l[l.length-1];var f=[];s=e.CFF.readIndex(i,s,f);var h=[];for(c=0;c<f.length-1;c++)h.push(e.CFF.readDict(i,s+f[c],s+f[c+1]));s+=f[f.length-1];var d=h[0],p=[];s=e.CFF.readIndex(i,s,p);var g=[];for(c=0;c<p.length-1;c++)g.push(a.readASCII(i,s+p[c],p[c+1]-p[c]));if(s+=p[p.length-1],e.CFF.readSubrs(i,s,d),d.CharStrings){s=d.CharStrings,p=[],s=e.CFF.readIndex(i,s,p);var x=[];for(c=0;c<p.length-1;c++)x.push(a.readBytes(i,s+p[c],p[c+1]-p[c]));d.CharStrings=x}if(d.ROS){s=d.FDArray;var _=[];for(s=e.CFF.readIndex(i,s,_),d.FDArray=[],c=0;c<_.length-1;c++){var m=e.CFF.readDict(i,s+_[c],s+_[c+1]);e.CFF._readFDict(i,m,g),d.FDArray.push(m)}s+=_[_.length-1],s=d.FDSelect,d.FDSelect=[];var v=i[s];if(s++,v!=3)throw v;var b=a.readUshort(i,s);for(s+=2,c=0;c<b+1;c++)d.FDSelect.push(a.readUshort(i,s),i[s+2]),s+=3}return d.Encoding&&(d.Encoding=e.CFF.readEncoding(i,d.Encoding,d.CharStrings.length)),d.charset&&(d.charset=e.CFF.readCharset(i,d.charset,d.CharStrings.length)),e.CFF._readFDict(i,d,g),d},e.CFF._readFDict=function(i,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(i,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(i,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(i,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(i,s,l);var u,c=l.length;u=c<1240?107:c<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var f=0;f<l.length-1;f++)o.Subrs.push(a.readBytes(i,s+l[f],l[f+1]-l[f]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(i,s){for(var o=0;o<i.charset.length;o++)if(i.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(i,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(i,e.CFF.tableSE[s])},e.CFF.readEncoding=function(i,s,o){e._bin;var a=[".notdef"],l=i[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=i[s];s++;for(var c=0;c<u;c++)a.push(i[s+c]);return a},e.CFF.readCharset=function(i,s,o){var a=e._bin,l=[".notdef"],u=i[s];if(s++,u==0)for(var c=0;c<o;c++){var f=a.readUshort(i,s);s+=2,l.push(f)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){f=a.readUshort(i,s),s+=2;var h=0;for(u==1?(h=i[s],s++):(h=a.readUshort(i,s),s+=2),c=0;c<=h;c++)l.push(f),f++}}return l},e.CFF.readIndex=function(i,s,o){var a=e._bin,l=a.readUshort(i,s)+1,u=i[s+=2];if(s++,u==1)for(var c=0;c<l;c++)o.push(i[s+c]);else if(u==2)for(c=0;c<l;c++)o.push(a.readUshort(i,s+2*c));else if(u==3)for(c=0;c<l;c++)o.push(16777215&a.readUint(i,s+3*c-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(i,s,o){var a=e._bin,l=i[s],u=i[s+1];i[s+2],i[s+3],i[s+4];var c=1,f=null,h=null;l<=20&&(f=l,c=1),l==12&&(f=100*l+u,c=2),21<=l&&l<=27&&(f=l,c=1),l==28&&(h=a.readShort(i,s+1),c=3),29<=l&&l<=31&&(f=l,c=1),32<=l&&l<=246&&(h=l-139,c=1),247<=l&&l<=250&&(h=256*(l-247)+u+108,c=2),251<=l&&l<=254&&(h=256*-(l-251)-u-108,c=2),l==255&&(h=a.readInt(i,s+1)/65535,c=5),o.val=h!=null?h:"o"+f,o.size=c},e.CFF.readCharString=function(i,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,d=null,p=null;c<=20&&(d=c,h=1),c==12&&(d=100*c+f,h=2),c!=19&&c!=20||(d=c,h=2),21<=c&&c<=27&&(d=c,h=1),c==28&&(p=l.readShort(i,s+1),h=3),29<=c&&c<=31&&(d=c,h=1),32<=c&&c<=246&&(p=c-139,h=1),247<=c&&c<=250&&(p=256*(c-247)+f+108,h=2),251<=c&&c<=254&&(p=256*-(c-251)-f-108,h=2),c==255&&(p=l.readInt(i,s+1)/65535,h=5),u.push(p!=null?p:"o"+d),s+=h}return u},e.CFF.readDict=function(i,s,o){for(var a=e._bin,l={},u=[];s<o;){var c=i[s],f=i[s+1];i[s+2],i[s+3],i[s+4];var h=1,d=null,p=null;if(c==28&&(p=a.readShort(i,s+1),h=3),c==29&&(p=a.readInt(i,s+1),h=5),32<=c&&c<=246&&(p=c-139,h=1),247<=c&&c<=250&&(p=256*(c-247)+f+108,h=2),251<=c&&c<=254&&(p=256*-(c-251)-f-108,h=2),c==255)throw p=a.readInt(i,s+1)/65535,h=5,"unknown number";if(c==30){var g=[];for(h=1;;){var x=i[s+h];h++;var _=x>>4,m=15&x;if(_!=15&&g.push(_),m!=15&&g.push(m),m==15)break}for(var v="",b=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],w=0;w<g.length;w++)v+=b[g[w]];p=parseFloat(v)}c<=21&&(d=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][c],h=1,c==12&&(d=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][f],h=2)),d!=null?(l[d]=u.length==1?u[0]:u,u=[]):u.push(p),s+=h}return l},e.cmap={},e.cmap.parse=function(i,s,o){i=new Uint8Array(i.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2;var c=[];l.tables=[];for(var f=0;f<u;f++){var h=a.readUshort(i,s);s+=2;var d=a.readUshort(i,s);s+=2;var p=a.readUint(i,s);s+=4;var g="p"+h+"e"+d,x=c.indexOf(p);if(x==-1){var _;x=l.tables.length,c.push(p);var m=a.readUshort(i,p);m==0?_=e.cmap.parse0(i,p):m==4?_=e.cmap.parse4(i,p):m==6?_=e.cmap.parse6(i,p):m==12?_=e.cmap.parse12(i,p):console.debug("unknown format: "+m,h,d,p),l.tables.push(_)}if(l[g]!=null)throw"multiple tables for one platform+encoding";l[g]=x}return l},e.cmap.parse0=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(i[s+u]);return a},e.cmap.parse4=function(i,s){var o=e._bin,a=s,l={};l.format=o.readUshort(i,s),s+=2;var u=o.readUshort(i,s);s+=2,o.readUshort(i,s),s+=2;var c=o.readUshort(i,s);s+=2;var f=c/2;l.searchRange=o.readUshort(i,s),s+=2,l.entrySelector=o.readUshort(i,s),s+=2,l.rangeShift=o.readUshort(i,s),s+=2,l.endCount=o.readUshorts(i,s,f),s+=2*f,s+=2,l.startCount=o.readUshorts(i,s,f),s+=2*f,l.idDelta=[];for(var h=0;h<f;h++)l.idDelta.push(o.readShort(i,s)),s+=2;for(l.idRangeOffset=o.readUshorts(i,s,f),s+=2*f,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(i,s)),s+=2;return l},e.cmap.parse6=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,o.readUshort(i,s),s+=2,a.firstCode=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(i,s)),s+=2;return a},e.cmap.parse12=function(i,s){var o=e._bin,a={};a.format=o.readUshort(i,s),s+=2,s+=2,o.readUint(i,s),s+=4,o.readUint(i,s),s+=4;var l=o.readUint(i,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var c=s+12*u,f=o.readUint(i,c+0),h=o.readUint(i,c+4),d=o.readUint(i,c+8);a.groups.push([f,h,d])}return a},e.glyf={},e.glyf.parse=function(i,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(i,s){var o=e._bin,a=i._data,l=e._tabOffset(a,"glyf",i._offset)+i.loca[s];if(i.loca[s]==i.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var c=0;c<u.noc;c++)u.endPts.push(o.readUshort(a,l)),l+=2;var f=o.readUshort(a,l);if(l+=2,a.length-l<f)return null;u.instructions=o.readBytes(a,l,f),l+=f;var h=u.endPts[u.noc-1]+1;for(u.flags=[],c=0;c<h;c++){var d=a[l];if(l++,u.flags.push(d),(8&d)!=0){var p=a[l];l++;for(var g=0;g<p;g++)u.flags.push(d),c++}}for(u.xs=[],c=0;c<h;c++){var x=(2&u.flags[c])!=0,_=(16&u.flags[c])!=0;x?(u.xs.push(_?a[l]:-a[l]),l++):_?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],c=0;c<h;c++)x=(4&u.flags[c])!=0,_=(32&u.flags[c])!=0,x?(u.ys.push(_?a[l]:-a[l]),l++):_?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var m=0,v=0;for(c=0;c<h;c++)m+=u.xs[c],v+=u.ys[c],u.xs[c]=m,u.ys[c]=v}else{var b;u.parts=[];do{b=o.readUshort(a,l),l+=2;var w={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(w),w.glyphIndex=o.readUshort(a,l),l+=2,1&b){var A=o.readShort(a,l);l+=2;var E=o.readShort(a,l);l+=2}else A=o.readInt8(a,l),l++,E=o.readInt8(a,l),l++;2&b?(w.m.tx=A,w.m.ty=E):(w.p1=A,w.p2=E),8&b?(w.m.a=w.m.d=o.readF2dot14(a,l),l+=2):64&b?(w.m.a=o.readF2dot14(a,l),l+=2,w.m.d=o.readF2dot14(a,l),l+=2):128&b&&(w.m.a=o.readF2dot14(a,l),l+=2,w.m.b=o.readF2dot14(a,l),l+=2,w.m.c=o.readF2dot14(a,l),l+=2,w.m.d=o.readF2dot14(a,l),l+=2)}while(32&b);if(256&b){var S=o.readUshort(a,l);for(l+=2,u.instr=[],c=0;c<S;c++)u.instr.push(a[l]),l++}}return u},e.GPOS={},e.GPOS.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s==1||s==2||s==3||s==7||s==8&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,f+u)}if(s==1&&c.fmt==1){var h=l.readUshort(i,o);o+=2;var d=e._lctf.numOfOnes(h);h!=0&&(c.pos=e.GPOS.readValueRecord(i,o,h))}else if(s==2&&c.fmt>=1&&c.fmt<=2){h=l.readUshort(i,o),o+=2;var p=l.readUshort(i,o);o+=2,d=e._lctf.numOfOnes(h);var g=e._lctf.numOfOnes(p);if(c.fmt==1){c.pairsets=[];var x=l.readUshort(i,o);o+=2;for(var _=0;_<x;_++){var m=u+l.readUshort(i,o);o+=2;var v=l.readUshort(i,m);m+=2;for(var b=[],w=0;w<v;w++){var A=l.readUshort(i,m);m+=2,h!=0&&(T=e.GPOS.readValueRecord(i,m,h),m+=2*d),p!=0&&(L=e.GPOS.readValueRecord(i,m,p),m+=2*g),b.push({gid2:A,val1:T,val2:L})}c.pairsets.push(b)}}if(c.fmt==2){var E=l.readUshort(i,o);o+=2;var S=l.readUshort(i,o);o+=2;var C=l.readUshort(i,o);o+=2;var M=l.readUshort(i,o);for(o+=2,c.classDef1=e._lctf.readClassDef(i,u+E),c.classDef2=e._lctf.readClassDef(i,u+S),c.matrix=[],_=0;_<C;_++){var D=[];for(w=0;w<M;w++){var T=null,L=null;h!=0&&(T=e.GPOS.readValueRecord(i,o,h),o+=2*d),p!=0&&(L=e.GPOS.readValueRecord(i,o,p),o+=2*g),D.push({val1:T,val2:L})}c.matrix.push(D)}}}else{if(s==9&&c.fmt==1){var F=l.readUshort(i,o);o+=2;var k=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=F;else if(a.ltype!=F)throw"invalid extension substitution";return e.GPOS.subt(i,a.ltype,u+k)}console.debug("unsupported GPOS table LookupType",s,"format",c.fmt)}return c},e.GPOS.readValueRecord=function(i,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(i,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(i,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(i,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(i,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(i,s,o,a){return e._lctf.parse(i,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(i,s,o,a){var l=e._bin,u=o,c={};if(c.fmt=l.readUshort(i,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&c.fmt<=2||s==6&&c.fmt<=2){var f=l.readUshort(i,o);o+=2,c.coverage=e._lctf.readCoverage(i,u+f)}if(s==1&&c.fmt>=1&&c.fmt<=2){if(c.fmt==1)c.delta=l.readShort(i,o),o+=2;else if(c.fmt==2){var h=l.readUshort(i,o);o+=2,c.newg=l.readUshorts(i,o,h),o+=2*c.newg.length}}else if(s==4){c.vals=[],h=l.readUshort(i,o),o+=2;for(var d=0;d<h;d++){var p=l.readUshort(i,o);o+=2,c.vals.push(e.GSUB.readLigatureSet(i,u+p))}}else if(s==5&&c.fmt==2){if(c.fmt==2){var g=l.readUshort(i,o);o+=2,c.cDef=e._lctf.readClassDef(i,u+g),c.scset=[];var x=l.readUshort(i,o);for(o+=2,d=0;d<x;d++){var _=l.readUshort(i,o);o+=2,c.scset.push(_==0?null:e.GSUB.readSubClassSet(i,u+_))}}}else if(s==6&&c.fmt==3){if(c.fmt==3){for(d=0;d<3;d++){h=l.readUshort(i,o),o+=2;for(var m=[],v=0;v<h;v++)m.push(e._lctf.readCoverage(i,u+l.readUshort(i,o+2*v)));o+=2*h,d==0&&(c.backCvg=m),d==1&&(c.inptCvg=m),d==2&&(c.ahedCvg=m)}h=l.readUshort(i,o),o+=2,c.lookupRec=e.GSUB.readSubstLookupRecords(i,o,h)}}else{if(s==7&&c.fmt==1){var b=l.readUshort(i,o);o+=2;var w=l.readUint(i,o);if(o+=4,a.ltype==9)a.ltype=b;else if(a.ltype!=b)throw"invalid extension substitution";return e.GSUB.subt(i,a.ltype,u+w)}console.debug("unsupported GSUB table LookupType",s,"format",c.fmt)}return c},e.GSUB.readSubClassSet=function(i,s){var o=e._bin.readUshort,a=s,l=[],u=o(i,s);s+=2;for(var c=0;c<u;c++){var f=o(i,s);s+=2,l.push(e.GSUB.readSubClassRule(i,a+f))}return l},e.GSUB.readSubClassRule=function(i,s){var o=e._bin.readUshort,a={},l=o(i,s),u=o(i,s+=2);s+=2,a.input=[];for(var c=0;c<l-1;c++)a.input.push(o(i,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(i,s,u),a},e.GSUB.readSubstLookupRecords=function(i,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(i,s),a(i,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readChainSubClassRule(i,a+f))}return l},e.GSUB.readChainSubClassRule=function(i,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var c=o.readUshort(i,s);s+=2,u==1&&c--,a[l[u]]=o.readUshorts(i,s,c),s+=2*a[l[u]].length}return c=o.readUshort(i,s),s+=2,a.subst=o.readUshorts(i,s,2*c),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(i,s){var o=e._bin,a=s,l=[],u=o.readUshort(i,s);s+=2;for(var c=0;c<u;c++){var f=o.readUshort(i,s);s+=2,l.push(e.GSUB.readLigature(i,a+f))}return l},e.GSUB.readLigature=function(i,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(i,s),s+=2;var l=o.readUshort(i,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(i,s)),s+=2;return a},e.head={},e.head.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.fontRevision=a.readFixed(i,s),s+=4,a.readUint(i,s),s+=4,a.readUint(i,s),s+=4,l.flags=a.readUshort(i,s),s+=2,l.unitsPerEm=a.readUshort(i,s),s+=2,l.created=a.readUint64(i,s),s+=8,l.modified=a.readUint64(i,s),s+=8,l.xMin=a.readShort(i,s),s+=2,l.yMin=a.readShort(i,s),s+=2,l.xMax=a.readShort(i,s),s+=2,l.yMax=a.readShort(i,s),s+=2,l.macStyle=a.readUshort(i,s),s+=2,l.lowestRecPPEM=a.readUshort(i,s),s+=2,l.fontDirectionHint=a.readShort(i,s),s+=2,l.indexToLocFormat=a.readShort(i,s),s+=2,l.glyphDataFormat=a.readShort(i,s),s+=2,l},e.hhea={},e.hhea.parse=function(i,s,o){var a=e._bin,l={};return a.readFixed(i,s),s+=4,l.ascender=a.readShort(i,s),s+=2,l.descender=a.readShort(i,s),s+=2,l.lineGap=a.readShort(i,s),s+=2,l.advanceWidthMax=a.readUshort(i,s),s+=2,l.minLeftSideBearing=a.readShort(i,s),s+=2,l.minRightSideBearing=a.readShort(i,s),s+=2,l.xMaxExtent=a.readShort(i,s),s+=2,l.caretSlopeRise=a.readShort(i,s),s+=2,l.caretSlopeRun=a.readShort(i,s),s+=2,l.caretOffset=a.readShort(i,s),s+=2,s+=8,l.metricDataFormat=a.readShort(i,s),s+=2,l.numberOfHMetrics=a.readUshort(i,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(i,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},c=0,f=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(c=l.readUshort(i,s),s+=2,f=l.readShort(i,s),s+=2),u.aWidth.push(c),u.lsBearing.push(f);return u},e.kern={},e.kern.parse=function(i,s,o,a){var l=e._bin,u=l.readUshort(i,s);if(s+=2,u==1)return e.kern.parseV1(i,s-2,o,a);var c=l.readUshort(i,s);s+=2;for(var f={glyph1:[],rval:[]},h=0;h<c;h++){s+=2,o=l.readUshort(i,s),s+=2;var d=l.readUshort(i,s);s+=2;var p=d>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(i,s,f)}return f},e.kern.parseV1=function(i,s,o,a){var l=e._bin;l.readFixed(i,s),s+=4;var u=l.readUint(i,s);s+=4;for(var c={glyph1:[],rval:[]},f=0;f<u;f++){l.readUint(i,s),s+=4;var h=l.readUshort(i,s);s+=2,l.readUshort(i,s),s+=2;var d=h>>>8;if((d&=15)!=0)throw"unknown kern table format: "+d;s=e.kern.readFormat0(i,s,c)}return c},e.kern.readFormat0=function(i,s,o){var a=e._bin,l=-1,u=a.readUshort(i,s);s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2,a.readUshort(i,s),s+=2;for(var c=0;c<u;c++){var f=a.readUshort(i,s);s+=2;var h=a.readUshort(i,s);s+=2;var d=a.readShort(i,s);s+=2,f!=l&&(o.glyph1.push(f),o.rval.push({glyph2:[],vals:[]}));var p=o.rval[o.rval.length-1];p.glyph2.push(h),p.vals.push(d),l=f}return s},e.loca={},e.loca.parse=function(i,s,o,a){var l=e._bin,u=[],c=a.head.indexToLocFormat,f=a.maxp.numGlyphs+1;if(c==0)for(var h=0;h<f;h++)u.push(l.readUshort(i,s+(h<<1))<<1);if(c==1)for(h=0;h<f;h++)u.push(l.readUint(i,s+(h<<2)));return u},e.maxp={},e.maxp.parse=function(i,s,o){var a=e._bin,l={},u=a.readUint(i,s);return s+=4,l.numGlyphs=a.readUshort(i,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(i,s),s+=2,l.maxContours=a.readUshort(i,s),s+=2,l.maxCompositePoints=a.readUshort(i,s),s+=2,l.maxCompositeContours=a.readUshort(i,s),s+=2,l.maxZones=a.readUshort(i,s),s+=2,l.maxTwilightPoints=a.readUshort(i,s),s+=2,l.maxStorage=a.readUshort(i,s),s+=2,l.maxFunctionDefs=a.readUshort(i,s),s+=2,l.maxInstructionDefs=a.readUshort(i,s),s+=2,l.maxStackElements=a.readUshort(i,s),s+=2,l.maxSizeOfInstructions=a.readUshort(i,s),s+=2,l.maxComponentElements=a.readUshort(i,s),s+=2,l.maxComponentDepth=a.readUshort(i,s),s+=2),l},e.name={},e.name.parse=function(i,s,o){var a=e._bin,l={};a.readUshort(i,s),s+=2;var u=a.readUshort(i,s);s+=2,a.readUshort(i,s);for(var c,f=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,d=0;d<u;d++){var p=a.readUshort(i,s);s+=2;var g=a.readUshort(i,s);s+=2;var x=a.readUshort(i,s);s+=2;var _=a.readUshort(i,s);s+=2;var m=a.readUshort(i,s);s+=2;var v=a.readUshort(i,s);s+=2;var b,w=f[_],A=h+12*u+v;if(p==0)b=a.readUnicode(i,A,m/2);else if(p==3&&g==0)b=a.readUnicode(i,A,m/2);else if(g==0)b=a.readASCII(i,A,m);else if(g==1)b=a.readUnicode(i,A,m/2);else if(g==3)b=a.readUnicode(i,A,m/2);else{if(p!=1)throw"unknown encoding "+g+", platformID: "+p;b=a.readASCII(i,A,m),console.debug("reading unknown MAC encoding "+g+" as ASCII")}var E="p"+p+","+x.toString(16);l[E]==null&&(l[E]={}),l[E][w!==void 0?w:_]=b,l[E]._lang=x}for(var S in l)if(l[S].postScriptName!=null&&l[S]._lang==1033)return l[S];for(var S in l)if(l[S].postScriptName!=null&&l[S]._lang==0)return l[S];for(var S in l)if(l[S].postScriptName!=null&&l[S]._lang==3084)return l[S];for(var S in l)if(l[S].postScriptName!=null)return l[S];for(var S in l){c=S;break}return console.debug("returning name table with languageID "+l[c]._lang),l[c]},e["OS/2"]={},e["OS/2"].parse=function(i,s,o){var a=e._bin.readUshort(i,s);s+=2;var l={};if(a==0)e["OS/2"].version0(i,s,l);else if(a==1)e["OS/2"].version1(i,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(i,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(i,s,l)}return l},e["OS/2"].version0=function(i,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(i,s),s+=2,o.usWeightClass=a.readUshort(i,s),s+=2,o.usWidthClass=a.readUshort(i,s),s+=2,o.fsType=a.readUshort(i,s),s+=2,o.ySubscriptXSize=a.readShort(i,s),s+=2,o.ySubscriptYSize=a.readShort(i,s),s+=2,o.ySubscriptXOffset=a.readShort(i,s),s+=2,o.ySubscriptYOffset=a.readShort(i,s),s+=2,o.ySuperscriptXSize=a.readShort(i,s),s+=2,o.ySuperscriptYSize=a.readShort(i,s),s+=2,o.ySuperscriptXOffset=a.readShort(i,s),s+=2,o.ySuperscriptYOffset=a.readShort(i,s),s+=2,o.yStrikeoutSize=a.readShort(i,s),s+=2,o.yStrikeoutPosition=a.readShort(i,s),s+=2,o.sFamilyClass=a.readShort(i,s),s+=2,o.panose=a.readBytes(i,s,10),s+=10,o.ulUnicodeRange1=a.readUint(i,s),s+=4,o.ulUnicodeRange2=a.readUint(i,s),s+=4,o.ulUnicodeRange3=a.readUint(i,s),s+=4,o.ulUnicodeRange4=a.readUint(i,s),s+=4,o.achVendID=[a.readInt8(i,s),a.readInt8(i,s+1),a.readInt8(i,s+2),a.readInt8(i,s+3)],s+=4,o.fsSelection=a.readUshort(i,s),s+=2,o.usFirstCharIndex=a.readUshort(i,s),s+=2,o.usLastCharIndex=a.readUshort(i,s),s+=2,o.sTypoAscender=a.readShort(i,s),s+=2,o.sTypoDescender=a.readShort(i,s),s+=2,o.sTypoLineGap=a.readShort(i,s),s+=2,o.usWinAscent=a.readUshort(i,s),s+=2,o.usWinDescent=a.readUshort(i,s),s+=2},e["OS/2"].version1=function(i,s,o){var a=e._bin;return s=e["OS/2"].version0(i,s,o),o.ulCodePageRange1=a.readUint(i,s),s+=4,o.ulCodePageRange2=a.readUint(i,s),s+=4},e["OS/2"].version2=function(i,s,o){var a=e._bin;return s=e["OS/2"].version1(i,s,o),o.sxHeight=a.readShort(i,s),s+=2,o.sCapHeight=a.readShort(i,s),s+=2,o.usDefault=a.readUshort(i,s),s+=2,o.usBreak=a.readUshort(i,s),s+=2,o.usMaxContext=a.readUshort(i,s),s+=2},e["OS/2"].version5=function(i,s,o){var a=e._bin;return s=e["OS/2"].version2(i,s,o),o.usLowerOpticalPointSize=a.readUshort(i,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(i,s),s+=2},e.post={},e.post.parse=function(i,s,o){var a=e._bin,l={};return l.version=a.readFixed(i,s),s+=4,l.italicAngle=a.readFixed(i,s),s+=4,l.underlinePosition=a.readShort(i,s),s+=2,l.underlineThickness=a.readShort(i,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(i,s){var o=i.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,c=0;c<l.endCount.length;c++)if(s<=l.endCount[c]){u=c;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(c=0;c<l.groups.length;c++){var f=l.groups[c];if(f[0]<=s&&s<=f[1])return f[2]+(s-f[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(i,s){var o={cmds:[],crds:[]};if(i.SVG&&i.SVG.entries[s]){var a=i.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),i.SVG.entries[s]=a),a)}if(i.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:i.CFF.Private?i.CFF.Private.defaultWidthX:0,open:!1},u=i.CFF,c=i.CFF.Private;if(u.ROS){for(var f=0;u.FDSelect[f+2]<=s;)f+=2;c=u.FDArray[u.FDSelect[f+1]].Private}e.U._drawCFF(i.CFF.CharStrings[s],l,u,c,o)}else i.glyf&&e.U._drawGlyf(s,i,o);return o},e.U._drawGlyf=function(i,s,o){var a=s.glyf[i];a==null&&(a=s.glyf[i]=e.glyf._parseGlyf(s,i)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(i,s){for(var o=0;o<i.noc;o++){for(var a=o==0?0:i.endPts[o-1]+1,l=i.endPts[o],u=a;u<=l;u++){var c=u==a?l:u-1,f=u==l?a:u+1,h=1&i.flags[u],d=1&i.flags[c],p=1&i.flags[f],g=i.xs[u],x=i.ys[u];if(u==a)if(h){if(!d){e.U.P.moveTo(s,g,x);continue}e.U.P.moveTo(s,i.xs[c],i.ys[c])}else d?e.U.P.moveTo(s,i.xs[c],i.ys[c]):e.U.P.moveTo(s,(i.xs[c]+g)/2,(i.ys[c]+x)/2);h?d&&e.U.P.lineTo(s,g,x):p?e.U.P.qcurveTo(s,g,x,i.xs[f],i.ys[f]):e.U.P.qcurveTo(s,g,x,(g+i.xs[f])/2,(x+i.ys[f])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(i,s,o){for(var a=0;a<i.parts.length;a++){var l={cmds:[],crds:[]},u=i.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var c=u.m,f=0;f<l.crds.length;f+=2){var h=l.crds[f],d=l.crds[f+1];o.crds.push(h*c.a+d*c.b+c.tx),o.crds.push(h*c.c+d*c.d+c.ty)}for(f=0;f<l.cmds.length;f++)o.cmds.push(l.cmds[f])}},e.U._getGlyphClass=function(i,s){var o=e._lctf.getInterval(s,i);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(i,s,o){var a=!1;if(i.GPOS)for(var l=i.GPOS,u=l.lookupList,c=l.featureList,f=[],h=0;h<c.length;h++){var d=c[h];if(d.tag=="kern"){a=!0;for(var p=0;p<d.tab.length;p++)if(!f[d.tab[p]]){f[d.tab[p]]=!0;for(var g=u[d.tab[p]],x=0;x<g.tabs.length;x++)if(g.tabs[x]!=null){var _,m=g.tabs[x];if((!m.coverage||(_=e._lctf.coverageIndex(m.coverage,s))!=-1)&&g.ltype!=1){if(g.ltype==2){var v=null;if(m.fmt==1){var b=m.pairsets[_];for(h=0;h<b.length;h++)b[h].gid2==o&&(v=b[h])}else if(m.fmt==2){var w=e.U._getGlyphClass(s,m.classDef1),A=e.U._getGlyphClass(o,m.classDef2);v=m.matrix[w][A]}if(v){var E=0;return v.val1&&v.val1[2]&&(E+=v.val1[2]),v.val2&&v.val2[0]&&(E+=v.val2[0]),E}}}}}}}if(i.kern&&!a){var S=i.kern.glyph1.indexOf(s);if(S!=-1){var C=i.kern.rval[S].glyph2.indexOf(o);if(C!=-1)return i.kern.rval[S].vals[C]}}return 0},e.U._applySubs=function(i,s,o,a){for(var l=i.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var c,f=o.tabs[u];if(!f.coverage||(c=e._lctf.coverageIndex(f.coverage,i[s]))!=-1){if(o.ltype==1)i[s],f.fmt==1?i[s]=i[s]+f.delta:i[s]=f.newg[c];else if(o.ltype==4)for(var h=f.vals[c],d=0;d<h.length;d++){var p=h[d],g=p.chain.length;if(!(g>l)){for(var x=!0,_=0,m=0;m<g;m++){for(;i[s+_+(1+m)]==-1;)_++;p.chain[m]!=i[s+_+(1+m)]&&(x=!1)}if(x){for(i[s]=p.nglyph,m=0;m<g+_;m++)i[s+m+1]=-1;break}}}else if(o.ltype==5&&f.fmt==2)for(var v=e._lctf.getInterval(f.cDef,i[s]),b=f.cDef[v+2],w=f.scset[b],A=0;A<w.length;A++){var E=w[A],S=E.input;if(!(S.length>l)){for(x=!0,m=0;m<S.length;m++){var C=e._lctf.getInterval(f.cDef,i[s+1+m]);if(v==-1&&f.cDef[C+2]!=S[m]){x=!1;break}}if(x){var M=E.substLookupRecords;for(d=0;d<M.length;d+=2)M[d],M[d+1]}}}else if(o.ltype==6&&f.fmt==3){if(!e.U._glsCovered(i,f.backCvg,s-f.backCvg.length)||!e.U._glsCovered(i,f.inptCvg,s)||!e.U._glsCovered(i,f.ahedCvg,s+f.inptCvg.length))continue;var D=f.lookupRec;for(A=0;A<D.length;A+=2){v=D[A];var T=a[D[A+1]];e.U._applySubs(i,s+v,T,a)}}}}},e.U._glsCovered=function(i,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],i[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(i,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var c=s[u];if(c!=-1){for(var f=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,h=e.U.glyphToPath(i,c),d=0;d<h.crds.length;d+=2)a.crds.push(h.crds[d]+l),a.crds.push(h.crds[d+1]);for(o&&a.cmds.push(o),d=0;d<h.cmds.length;d++)a.cmds.push(h.cmds[d]);o&&a.cmds.push("X"),l+=i.hmtx.aWidth[c],u<s.length-1&&(l+=e.U.getPairAdjustment(i,c,f))}}return a},e.U.P={},e.U.P.moveTo=function(i,s,o){i.cmds.push("M"),i.crds.push(s,o)},e.U.P.lineTo=function(i,s,o){i.cmds.push("L"),i.crds.push(s,o)},e.U.P.curveTo=function(i,s,o,a,l,u,c){i.cmds.push("C"),i.crds.push(s,o,a,l,u,c)},e.U.P.qcurveTo=function(i,s,o,a,l){i.cmds.push("Q"),i.crds.push(s,o,a,l)},e.U.P.closePath=function(i){i.cmds.push("Z")},e.U._drawCFF=function(i,s,o,a,l){for(var u=s.stack,c=s.nStems,f=s.haveWidth,h=s.width,d=s.open,p=0,g=s.x,x=s.y,_=0,m=0,v=0,b=0,w=0,A=0,E=0,S=0,C=0,M=0,D={val:0,size:0};p<i.length;){e.CFF.getCharString(i,p,D);var T=D.val;if(p+=D.size,T=="o1"||T=="o18")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(T=="o3"||T=="o23")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0;else if(T=="o4")u.length>1&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),d&&e.U.P.closePath(l),x+=u.pop(),e.U.P.moveTo(l,g,x),d=!0;else if(T=="o5")for(;u.length>0;)g+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,g,x);else if(T=="o6"||T=="o7")for(var L=u.length,F=T=="o6",k=0;k<L;k++){var I=u.shift();F?g+=I:x+=I,F=!F,e.U.P.lineTo(l,g,x)}else if(T=="o8"||T=="o24"){L=u.length;for(var O=0;O+6<=L;)_=g+u.shift(),m=x+u.shift(),v=_+u.shift(),b=m+u.shift(),g=v+u.shift(),x=b+u.shift(),e.U.P.curveTo(l,_,m,v,b,g,x),O+=6;T=="o24"&&(g+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,g,x))}else{if(T=="o11")break;if(T=="o1234"||T=="o1235"||T=="o1236"||T=="o1237")T=="o1234"&&(m=x,v=(_=g+u.shift())+u.shift(),M=b=m+u.shift(),A=b,S=x,g=(E=(w=(C=v+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,_,m,v,b,C,M),e.U.P.curveTo(l,w,A,E,S,g,x)),T=="o1235"&&(_=g+u.shift(),m=x+u.shift(),v=_+u.shift(),b=m+u.shift(),C=v+u.shift(),M=b+u.shift(),w=C+u.shift(),A=M+u.shift(),E=w+u.shift(),S=A+u.shift(),g=E+u.shift(),x=S+u.shift(),u.shift(),e.U.P.curveTo(l,_,m,v,b,C,M),e.U.P.curveTo(l,w,A,E,S,g,x)),T=="o1236"&&(_=g+u.shift(),m=x+u.shift(),v=_+u.shift(),M=b=m+u.shift(),A=b,E=(w=(C=v+u.shift())+u.shift())+u.shift(),S=A+u.shift(),g=E+u.shift(),e.U.P.curveTo(l,_,m,v,b,C,M),e.U.P.curveTo(l,w,A,E,S,g,x)),T=="o1237"&&(_=g+u.shift(),m=x+u.shift(),v=_+u.shift(),b=m+u.shift(),C=v+u.shift(),M=b+u.shift(),w=C+u.shift(),A=M+u.shift(),E=w+u.shift(),S=A+u.shift(),Math.abs(E-g)>Math.abs(S-x)?g=E+u.shift():x=S+u.shift(),e.U.P.curveTo(l,_,m,v,b,C,M),e.U.P.curveTo(l,w,A,E,S,g,x));else if(T=="o14"){if(u.length>0&&!f&&(h=u.shift()+o.nominalWidthX,f=!0),u.length==4){var $=u.shift(),N=u.shift(),W=u.shift(),H=u.shift(),K=e.CFF.glyphBySE(o,W),ee=e.CFF.glyphBySE(o,H);e.U._drawCFF(o.CharStrings[K],s,o,a,l),s.x=$,s.y=N,e.U._drawCFF(o.CharStrings[ee],s,o,a,l)}d&&(e.U.P.closePath(l),d=!1)}else if(T=="o19"||T=="o20")u.length%2!=0&&!f&&(h=u.shift()+a.nominalWidthX),c+=u.length>>1,u.length=0,f=!0,p+=c+7>>3;else if(T=="o21")u.length>2&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),x+=u.pop(),g+=u.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,g,x),d=!0;else if(T=="o22")u.length>1&&!f&&(h=u.shift()+a.nominalWidthX,f=!0),g+=u.pop(),d&&e.U.P.closePath(l),e.U.P.moveTo(l,g,x),d=!0;else if(T=="o25"){for(;u.length>6;)g+=u.shift(),x+=u.shift(),e.U.P.lineTo(l,g,x);_=g+u.shift(),m=x+u.shift(),v=_+u.shift(),b=m+u.shift(),g=v+u.shift(),x=b+u.shift(),e.U.P.curveTo(l,_,m,v,b,g,x)}else if(T=="o26")for(u.length%2&&(g+=u.shift());u.length>0;)_=g,m=x+u.shift(),g=v=_+u.shift(),x=(b=m+u.shift())+u.shift(),e.U.P.curveTo(l,_,m,v,b,g,x);else if(T=="o27")for(u.length%2&&(x+=u.shift());u.length>0;)m=x,v=(_=g+u.shift())+u.shift(),b=m+u.shift(),g=v+u.shift(),x=b,e.U.P.curveTo(l,_,m,v,b,g,x);else if(T=="o10"||T=="o29"){var Z=T=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var J=u.pop(),X=Z.Subrs[J+Z.Bias];s.x=g,s.y=x,s.nStems=c,s.haveWidth=f,s.width=h,s.open=d,e.U._drawCFF(X,s,o,a,l),g=s.x,x=s.y,c=s.nStems,f=s.haveWidth,h=s.width,d=s.open}}else if(T=="o30"||T=="o31"){var Q=u.length,oe=(O=0,T=="o31");for(O+=Q-(L=-3&Q);O<L;)oe?(m=x,v=(_=g+u.shift())+u.shift(),x=(b=m+u.shift())+u.shift(),L-O==5?(g=v+u.shift(),O++):g=v,oe=!1):(_=g,m=x+u.shift(),v=_+u.shift(),b=m+u.shift(),g=v+u.shift(),L-O==5?(x=b+u.shift(),O++):x=b,oe=!0),e.U.P.curveTo(l,_,m,v,b,g,x),O+=4}else{if((T+"").charAt(0)=="o")throw console.debug("Unknown operation: "+T,i),T;u.push(T)}}}s.x=g,s.y=x,s.nStems=c,s.haveWidth=f,s.width=h,s.open=d};var n=e,r={Typr:n};return t.Typr=n,t.default=r,Object.defineProperty(t,"__esModule",{value:!0}),t}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function rQ(){return function(t){var e=Uint8Array,n=Uint16Array,r=Uint32Array,i=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(T,L){for(var F=new n(31),k=0;k<31;++k)F[k]=L+=1<<T[k-1];var I=new r(F[30]);for(k=1;k<30;++k)for(var O=F[k];O<F[k+1];++O)I[O]=O-F[k]<<5|k;return[F,I]},l=a(i,2),u=l[0],c=l[1];u[28]=258,c[258]=28;for(var f=a(s,0)[0],h=new n(32768),d=0;d<32768;++d){var p=(43690&d)>>>1|(21845&d)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,h[d]=((65280&p)>>>8|(255&p)<<8)>>>1}var g=function(T,L,F){for(var k=T.length,I=0,O=new n(L);I<k;++I)++O[T[I]-1];var $,N=new n(L);for(I=0;I<L;++I)N[I]=N[I-1]+O[I-1]<<1;if(F){$=new n(1<<L);var W=15-L;for(I=0;I<k;++I)if(T[I])for(var H=I<<4|T[I],K=L-T[I],ee=N[T[I]-1]++<<K,Z=ee|(1<<K)-1;ee<=Z;++ee)$[h[ee]>>>W]=H}else for($=new n(k),I=0;I<k;++I)T[I]&&($[I]=h[N[T[I]-1]++]>>>15-T[I]);return $},x=new e(288);for(d=0;d<144;++d)x[d]=8;for(d=144;d<256;++d)x[d]=9;for(d=256;d<280;++d)x[d]=7;for(d=280;d<288;++d)x[d]=8;var _=new e(32);for(d=0;d<32;++d)_[d]=5;var m=g(x,9,1),v=g(_,5,1),b=function(T){for(var L=T[0],F=1;F<T.length;++F)T[F]>L&&(L=T[F]);return L},w=function(T,L,F){var k=L/8|0;return(T[k]|T[k+1]<<8)>>(7&L)&F},A=function(T,L){var F=L/8|0;return(T[F]|T[F+1]<<8|T[F+2]<<16)>>(7&L)},E=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],S=function(T,L,F){var k=new Error(L||E[T]);if(k.code=T,Error.captureStackTrace&&Error.captureStackTrace(k,S),!F)throw k;return k},C=function(T,L,F){var k=T.length;if(!k||F&&!F.l&&k<5)return L||new e(0);var I=!L||F,O=!F||F.i;F||(F={}),L||(L=new e(3*k));var $,N=function(je){var Ze=L.length;if(je>Ze){var ft=new e(Math.max(2*Ze,je));ft.set(L),L=ft}},W=F.f||0,H=F.p||0,K=F.b||0,ee=F.l,Z=F.d,J=F.m,X=F.n,Q=8*k;do{if(!ee){F.f=W=w(T,H,1);var oe=w(T,H+1,3);if(H+=3,!oe){var he=T[(ge=(($=H)/8|0)+(7&$&&1)+4)-4]|T[ge-3]<<8,ve=ge+he;if(ve>k){O&&S(0);break}I&&N(K+he),L.set(T.subarray(ge,ve),K),F.b=K+=he,F.p=H=8*ve;continue}if(oe==1)ee=m,Z=v,J=9,X=5;else if(oe==2){var ye=w(T,H,31)+257,V=w(T,H+10,15)+4,R=ye+w(T,H+5,31)+1;H+=14;for(var B=new e(R),j=new e(19),se=0;se<V;++se)j[o[se]]=w(T,H+3*se,7);H+=3*V;var Y=b(j),G=(1<<Y)-1,le=g(j,Y,1);for(se=0;se<R;){var ge,ae=le[w(T,H,G)];if(H+=15&ae,(ge=ae>>>4)<16)B[se++]=ge;else{var ue=0,U=0;for(ge==16?(U=3+w(T,H,3),H+=2,ue=B[se-1]):ge==17?(U=3+w(T,H,7),H+=3):ge==18&&(U=11+w(T,H,127),H+=7);U--;)B[se++]=ue}}var z=B.subarray(0,ye),te=B.subarray(ye);J=b(z),X=b(te),ee=g(z,J,1),Z=g(te,X,1)}else S(1);if(H>Q){O&&S(0);break}}I&&N(K+131072);for(var fe=(1<<J)-1,ne=(1<<X)-1,de=H;;de=H){var pe=(ue=ee[A(T,H)&fe])>>>4;if((H+=15&ue)>Q){O&&S(0);break}if(ue||S(2),pe<256)L[K++]=pe;else{if(pe==256){de=H,ee=null;break}var _e=pe-254;if(pe>264){var be=i[se=pe-257];_e=w(T,H,(1<<be)-1)+u[se],H+=be}var Me=Z[A(T,H)&ne],Ve=Me>>>4;if(Me||S(3),H+=15&Me,te=f[Ve],Ve>3&&(be=s[Ve],te+=A(T,H)&(1<<be)-1,H+=be),H>Q){O&&S(0);break}I&&N(K+131072);for(var Pe=K+_e;K<Pe;K+=4)L[K]=L[K-te],L[K+1]=L[K+1-te],L[K+2]=L[K+2-te],L[K+3]=L[K+3-te];K=Pe}}F.l=ee,F.p=de,F.b=K,ee&&(W=1,F.m=J,F.d=Z,F.n=X)}while(!W);return K==L.length?L:function(je,Ze,ft){(Ze==null||Ze<0)&&(Ze=0),(ft==null||ft>je.length)&&(ft=je.length);var gt=new(je instanceof n?n:je instanceof r?r:e)(ft-Ze);return gt.set(je.subarray(Ze,ft)),gt}(L,0,K)},M=new e(0),D=typeof TextDecoder<"u"&&new TextDecoder;try{D.decode(M,{stream:!0})}catch{}return t.convert_streams=function(T){var L=new DataView(T),F=0;function k(){var ye=L.getUint16(F);return F+=2,ye}function I(){var ye=L.getUint32(F);return F+=4,ye}function O(ye){he.setUint16(ve,ye),ve+=2}function $(ye){he.setUint32(ve,ye),ve+=4}for(var N={signature:I(),flavor:I(),length:I(),numTables:k(),reserved:k(),totalSfntSize:I(),majorVersion:k(),minorVersion:k(),metaOffset:I(),metaLength:I(),metaOrigLength:I(),privOffset:I(),privLength:I()},W=0;Math.pow(2,W)<=N.numTables;)W++;W--;for(var H=16*Math.pow(2,W),K=16*N.numTables-H,ee=12,Z=[],J=0;J<N.numTables;J++)Z.push({tag:I(),offset:I(),compLength:I(),origLength:I(),origChecksum:I()}),ee+=16;var X,Q=new Uint8Array(12+16*Z.length+Z.reduce(function(ye,V){return ye+V.origLength+4},0)),oe=Q.buffer,he=new DataView(oe),ve=0;return $(N.flavor),O(N.numTables),O(H),O(W),O(K),Z.forEach(function(ye){$(ye.tag),$(ye.origChecksum),$(ee),$(ye.origLength),ye.outOffset=ee,(ee+=ye.origLength)%4!=0&&(ee+=4-ee%4)}),Z.forEach(function(ye){var V,R=T.slice(ye.offset,ye.offset+ye.compLength);if(ye.compLength!=ye.origLength){var B=new Uint8Array(ye.origLength);V=new Uint8Array(R,2),C(V,B)}else B=new Uint8Array(R);Q.set(B,ye.outOffset);var j=0;(ee=ye.outOffset+ye.origLength)%4!=0&&(j=4-ee%4),Q.set(new Uint8Array(j).buffer,ye.outOffset+ye.origLength),X=ee+j}),oe.slice(0,X)},Object.defineProperty(t,"__esModule",{value:!0}),t}({}).convert_streams}function iQ(t,e){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,s=2,o=4,a=8,l=16,u=32;let c;function f(w){if(!c){const A={R:s,L:i,D:o,C:l,U:u,T:a};c=new Map;for(let E in r){let S=0;r[E].split(",").forEach(C=>{let[M,D]=C.split("+");M=parseInt(M,36),D=D?parseInt(D,36):0,c.set(S+=M,A[E]);for(let T=D;T--;)c.set(++S,A[E])})}}return c.get(w)||u}const h=1,d=2,p=3,g=4,x=[null,"isol","init","fina","medi"];function _(w){const A=new Uint8Array(w.length);let E=u,S=h,C=-1;for(let M=0;M<w.length;M++){const D=w.codePointAt(M);let T=f(D)|0,L=h;T&a||(E&(i|o|l)?T&(s|o|l)?(L=p,(S===h||S===p)&&A[C]++):T&(i|u)&&(S===d||S===g)&&A[C]--:E&(s|u)&&(S===d||S===g)&&A[C]--,S=A[M]=L,E=T,C=M,D>65535&&M++)}return A}function m(w,A){const E=[];for(let C=0;C<A.length;C++){const M=A.codePointAt(C);M>65535&&C++,E.push(t.U.codeToGlyph(w,M))}const S=w.GSUB;if(S){const{lookupList:C,featureList:M}=S;let D;const T=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,L=[];M.forEach(F=>{if(T.test(F.tag))for(let k=0;k<F.tab.length;k++){if(L[F.tab[k]])continue;L[F.tab[k]]=!0;const I=C[F.tab[k]],O=/^(isol|init|fina|medi)$/.test(F.tag);O&&!D&&(D=_(A));for(let $=0;$<E.length;$++)(!D||!O||x[D[$]]===F.tag)&&t.U._applySubs(E,$,I,C)}})}return E}function v(...w){for(let A=0;A<w.length;A++)if(typeof w[A]=="number")return w[A]}function b(w){const A=Object.create(null),E=w["OS/2"],S=w.hhea,C=w.head.unitsPerEm,M=v(E&&E.sTypoAscender,S&&S.ascender,C),D={unitsPerEm:C,ascender:M,descender:v(E&&E.sTypoDescender,S&&S.descender,0),capHeight:v(E&&E.sCapHeight,M),xHeight:v(E&&E.sxHeight,M),lineGap:v(E&&E.sTypoLineGap,S&&S.lineGap),forEachGlyph(T,L,F,k){let I=0;const O=1/D.unitsPerEm*L,$=m(w,T);let N=0,W=-1;return $.forEach((H,K)=>{if(H!==-1){let ee=A[H];if(!ee){const{cmds:Z,crds:J}=t.U.glyphToPath(w,H);let X="",Q=0;for(let V=0,R=Z.length;V<R;V++){const B=n[Z[V]];X+=Z[V];for(let j=1;j<=B;j++)X+=(j>1?",":"")+J[Q++]}let oe,he,ve,ye;if(J.length){oe=he=1/0,ve=ye=-1/0;for(let V=0,R=J.length;V<R;V+=2){let B=J[V],j=J[V+1];B<oe&&(oe=B),j<he&&(he=j),B>ve&&(ve=B),j>ye&&(ye=j)}}else oe=ve=he=ye=0;ee=A[H]={index:H,advanceWidth:w.hmtx.aWidth[H],xMin:oe,yMin:he,xMax:ve,yMax:ye,path:X,pathCommandCount:Z.length}}W!==-1&&(I+=t.U.getPairAdjustment(w,W,H)*O),k.call(null,ee,I,N),ee.advanceWidth&&(I+=ee.advanceWidth*O),F&&(I+=F*L),W=H}N+=T.codePointAt(N)>65535?2:1}),I}};return D}return function(A){const E=new Uint8Array(A,0,4),S=t._bin.readASCII(E,0,4);if(S==="wOFF")A=e(A);else if(S==="wOF2")throw new Error("woff2 fonts not supported");return b(t.parse(A)[0])}}const sQ=jm({name:"Typr Font Parser",dependencies:[nQ,rQ,iQ],init(t,e,n){const r=t(),i=e();return n(r,i)}}),Ah={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},oQ=new ut;function nh(){return(self.performance||Date).now()}const YL=Object.create(null);function aQ(t,e){t=uQ({},t);const n=nh();if(t.font=cQ(t.font||Ah.defaultFontURL),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||Ah.sdfGlyphSize,t.colorRanges!=null){let f={};for(let h in t.colorRanges)if(t.colorRanges.hasOwnProperty(h)){let d=t.colorRanges[h];typeof d!="number"&&(d=oQ.set(d).getHex()),f[h]=d}t.colorRanges=f}Object.freeze(t);const{textureWidth:r,sdfExponent:i}=Ah,{sdfGlyphSize:s}=t,o=r/s*4;let a=YL[s];if(!a){const f=document.createElement("canvas");f.width=r,f.height=s*256/o,a=YL[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:f,sdfTexture:new Qr(f,void 0,void 0,void 0,kn,kn),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,lQ(a)}const{sdfTexture:l,sdfCanvas:u}=a;let c=a.glyphsByFont.get(t.font);c||a.glyphsByFont.set(t.font,c=new Map),hQ(t).then(f=>{const{glyphIds:h,glyphPositions:d,fontSize:p,unitsPerEm:g,timings:x}=f,_=[],m=new Float32Array(h.length*4),v=p/g;let b=0,w=0;const A=nh();h.forEach((D,T)=>{let L=c.get(D);if(!L){const{path:O,pathBounds:$}=f.glyphData[D],N=Math.max($[2]-$[0],$[3]-$[1])/s*(Ah.sdfMargin*s+.5),W=a.glyphCount++,H=[$[0]-N,$[1]-N,$[2]+N,$[3]+N];c.set(D,L={path:O,atlasIndex:W,sdfViewBox:H}),_.push(L)}const{sdfViewBox:F}=L,k=d[w++],I=d[w++];m[b++]=k+F[0]*v,m[b++]=I+F[1]*v,m[b++]=k+F[2]*v,m[b++]=I+F[3]*v,h[T]=L.atlasIndex}),x.quads=(x.quads||0)+(nh()-A);const E=nh();x.sdf={};const S=u.height,C=Math.ceil(a.glyphCount/o),M=Math.pow(2,Math.ceil(Math.log2(C*s)));M>S&&(console.info(`Increasing SDF texture size ${S}->${M}`),tQ(u,r,M),l.dispose()),Promise.all(_.map(D=>BN(D,a,t.gpuAccelerateSDF).then(({timing:T})=>{x.sdf[D.atlasIndex]=T}))).then(()=>{_.length&&!a.contextLost&&(NN(a),l.needsUpdate=!0),x.sdfTotal=nh()-E,x.total=nh()-n,e(Object.freeze({parameters:t,sdfTexture:l,sdfGlyphSize:s,sdfExponent:i,glyphBounds:m,glyphAtlasIndices:h,glyphColors:f.glyphColors,caretPositions:f.caretPositions,caretHeight:f.caretHeight,chunkedBounds:f.chunkedBounds,ascender:f.ascender,descender:f.descender,lineHeight:f.lineHeight,capHeight:f.capHeight,xHeight:f.xHeight,topBaseline:f.topBaseline,blockBounds:f.blockBounds,visibleBounds:f.visibleBounds,timings:f.timings}))})}),Promise.resolve().then(()=>{a.contextLost||eQ(u)})}function BN({path:t,atlasIndex:e,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Ah,u=Math.max(n[2]-n[0],n[3]-n[1]),c=Math.floor(e/4),f=c%(a/r)*r,h=Math.floor(c/(a/r))*r,d=e%4;return jZ(r,r,t,n,u,l,i,f,h,d,o)}function lQ(t){const e=t.sdfCanvas;e.addEventListener("webglcontextlost",n=>{console.log("Context Lost",n),n.preventDefault(),t.contextLost=!0}),e.addEventListener("webglcontextrestored",n=>{console.log("Context Restored",n),t.contextLost=!1;const r=[];t.glyphsByFont.forEach(i=>{i.forEach(s=>{r.push(BN(s,t,!0))})}),Promise.all(r).then(()=>{NN(t),t.sdfTexture.needsUpdate=!0})})}function uQ(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}let z0;function cQ(t){return z0||(z0=typeof document>"u"?{}:document.createElement("a")),z0.href=t,z0.href}function NN(t){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:n}=t,{width:r,height:i}=e,s=t.sdfCanvas.getContext("webgl");let o=n.image.data;(!o||o.length!==r*i*4)&&(o=new Uint8Array(r*i*4),n.image={width:r,height:i,data:o},n.flipY=!1,n.isDataTexture=!0),s.readPixels(0,0,r,i,s.RGBA,s.UNSIGNED_BYTE,o)}}const fQ=jm({name:"Typesetter",dependencies:[Ah,sQ,YZ,VZ],init(t,e,n,r){const{defaultFontURL:i}=t;return n(e,r(),{defaultFontURL:i})}}),hQ=jm({name:"Typesetter",dependencies:[fQ],init(t){return function(e){return new Promise(n=>{t.typeset(e,n)})}},getTransferables(t){const e=[t.glyphPositions.buffer,t.glyphIds.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.glyphColors&&e.push(t.glyphColors.buffer),e}}),jL={};function dQ(t){let e=jL[t];if(!e){const n=new No(1,1,t,t),r=n.clone(),i=n.attributes,s=r.attributes,o=new Gt,a=i.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Vt([...i[l].array,...s[l].array],i[l].itemSize))}),o.setIndex([...n.index.array,...r.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=jL[t]=o}return e}const pQ="aTroikaGlyphBounds",qL="aTroikaGlyphIndex",gQ="aTroikaGlyphColor";class mQ extends dN{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new qu,this.boundingBox=new Mr}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const n=this.getIndex().count;this.setDrawRange(e===rr?n/2:0,e===_r?n:n/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let n=dQ(e);["position","normal","uv"].forEach(r=>{this.attributes[r]=n.attributes[r].clone()}),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,i,s){tx(this,pQ,e,4),tx(this,qL,n,1),tx(this,gQ,s,3),this._blockBounds=r,this._chunkedBounds=i,this.instanceCount=n.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:n,boundingBox:r}=this;if(n){const{PI:i,floor:s,min:o,max:a,sin:l,cos:u}=Math,c=i/2,f=i*2,h=Math.abs(n),d=e[0]/h,p=e[2]/h,g=s((d+c)/f)!==s((p+c)/f)?-h:o(l(d)*h,l(p)*h),x=s((d-c)/f)!==s((p-c)/f)?h:a(l(d)*h,l(p)*h),_=s((d+i)/f)!==s((p+i)/f)?h*2:a(h-u(d)*h,h-u(p)*h);r.min.set(g,e[1],n<0?-_:0),r.max.set(x,e[3],n<0?0:_)}else r.min.set(e[0],e[1],0),r.max.set(e[2],e[3],0);r.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(qL).count,r=this._chunkedBounds;if(r)for(let i=r.length;i--;){n=r[i].end;let s=r[i].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=n}}function tx(t,e,n,r){const i=t.getAttribute(e);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(t.setAttribute(e,new c1(n,r)),delete t._maxInstanceCount,t.dispose()):i&&t.deleteAttribute(e)}const vQ=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,yQ=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,_Q=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,wQ=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function bQ(t){const e=LA(t,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Ie},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new $t(0,0,0,0)},uTroikaClipRect:{value:new $t(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Ie},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new ut},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new kr},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:vQ,vertexTransform:yQ,fragmentDefs:_Q,fragmentColorTransform:wQ,customRewriter({vertexShader:n,fragmentShader:r}){let i=/\buniform\s+vec3\s+diffuse\b/;return i.test(r)&&(r=r.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(n)||(n=n.replace(RN,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:n,fragmentShader:r}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const kM=new gs({color:16777215,side:_r,transparent:!0}),JL=8421504,KL=new st,G0=new q,nx=new q,Fp=[],xQ=new q,rx="+x+y";function ZL(t){return Array.isArray(t)?t[0]:t}let VN=()=>{const t=new Fe(new No(1,1),kM);return VN=()=>t,t},zN=()=>{const t=new Fe(new No(1,1,32,1),kM);return zN=()=>t,t};const SQ={type:"syncstart"},AQ={type:"synccomplete"},GN=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],EQ=GN.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class RM extends Fe{constructor(){const e=new mQ;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=JL,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=rx,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(SQ),aQ({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},n=>{this._isSyncing=!1,this._textRenderInfo=n,this.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.blockBounds,n.chunkedBounds,n.glyphColors);const r=this._queuedSyncs;r&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{r.forEach(i=>i&&i())})),this.dispatchEvent(AQ),e&&e()})))}onBeforeRender(e,n,r,i,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=Ou}onAfterRender(e,n,r,i,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=kM.clone());if((!e||e.baseMaterial!==n)&&(e=this._derivedMaterial=bQ(n),n.addEventListener("dispose",function r(){n.removeEventListener("dispose",r),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let r=e._outlineMtl;return r||(r=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),r.isTextOutlineMaterial=!0,r.depthWrite=!1,r.map=null,e.addEventListener("dispose",function i(){e.removeEventListener("dispose",i),r.dispose()})),[r,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return ZL(this.material).getDepthMaterial()}get customDistanceMaterial(){return ZL(this.material).getDistanceMaterial()}_prepareForRender(e){const n=e.isTextOutlineMaterial,r=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:a,blockBounds:l}=i;r.uTroikaSDFTexture.value=a,r.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),r.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,r.uTroikaSDFExponent.value=i.sdfExponent,r.uTroikaTotalBounds.value.fromArray(l),r.uTroikaUseGlyphColors.value=!n&&!!i.glyphColors;let u=0,c=0,f=0,h,d,p,g=0,x=0;if(n){let{outlineWidth:m,outlineOffsetX:v,outlineOffsetY:b,outlineBlur:w,outlineOpacity:A}=this;u=this._parsePercent(m)||0,c=Math.max(0,this._parsePercent(w)||0),h=A,g=this._parsePercent(v)||0,x=this._parsePercent(b)||0}else f=Math.max(0,this._parsePercent(this.strokeWidth)||0),f&&(p=this.strokeColor,r.uTroikaStrokeColor.value.set(p==null?JL:p),d=this.strokeOpacity,d==null&&(d=1)),h=this.fillOpacity;r.uTroikaDistanceOffset.value=u,r.uTroikaPositionOffset.value.set(g,x),r.uTroikaBlurRadius.value=c,r.uTroikaStrokeWidth.value=f,r.uTroikaStrokeOpacity.value=d,r.uTroikaFillOpacity.value=h==null?1:h,r.uTroikaCurveRadius.value=this.curveRadius||0;let _=this.clipRect;if(_&&Array.isArray(_)&&_.length===4)r.uTroikaClipRect.value.fromArray(_);else{const m=(this.fontSize||.1)*100;r.uTroikaClipRect.value.set(l[0]-m,l[1]-m,l[2]+m,l[3]+m)}this.geometry.applyClipRect(r.uTroikaClipRect.value)}r.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=n?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new ut;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||rx;if(o!==e._orientation){let a=r.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==rx&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,c,f,h]=l;G0.set(0,0,0)[c]=u==="-"?1:-1,nx.set(0,0,0)[h]=f==="-"?-1:1,KL.lookAt(xQ,G0.cross(nx),nx),a.setFromMatrix4(KL)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let n=e.match(/^(-?[\d.]+)%$/),r=n?parseFloat(n[1]):NaN;e=(isNaN(r)?0:r/100)*this.fontSize}return e}localPositionToTextCoords(e,n=new Ie){n.copy(e);const r=this.curveRadius;return r&&(n.x=Math.atan2(e.x,Math.abs(r)-Math.abs(e.z))*Math.abs(r)),n}worldPositionToTextCoords(e,n=new Ie){return G0.copy(e),this.localPositionToTextCoords(this.worldToLocal(G0),n)}raycast(e,n){const{textRenderInfo:r,curveRadius:i}=this;if(r){const s=r.blockBounds,o=i?zN():VN(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let c=0;c<u.count;c++){let f=s[0]+u.getX(c)*(s[2]-s[0]);const h=s[1]+u.getY(c)*(s[3]-s[1]);let d=0;i&&(d=i-Math.cos(f/i)*i,f=Math.sin(f/i)*i),l.setXYZ(c,f,h,d)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Fp.length=0,o.raycast(e,Fp);for(let c=0;c<Fp.length;c++)Fp[c].object=this,n.push(Fp[c])}}copy(e){const n=this.geometry;return super.copy(e),this.geometry=n,EQ.forEach(r=>{this[r]=e[r]}),this}clone(){return new this.constructor().copy(this)}}GN.forEach(t=>{const e="_private_"+t;Object.defineProperty(RM.prototype,t,{get(){return this[e]},set(n){n!==this[e]&&(this[e]=n,this._needsSync=!0)}})});const OM=()=>{const t=new RM;return t.anchorX="center",t.anchorY="middle",t.color="#000",t.material.depthTest=!1,t.material.depthWrite=!1,t.renderOrder=2,t},IA=({hasBackground:t=!1}={})=>{const e=OM();if(e.text="edit",e.font="./own/fonts/material_icons.woff",e.fontSize=.8,t){const n=e.fontSize*.7,r=new D_(n,32),i=new gs({color:"#000000",depthTest:!1,transparent:!0,opacity:.5}),s=new Fe(r,i);e.color="#ffffff",e.outlineBlur=.2,e.outlineColor="#0a0a0a",e.outlineWidth=.01,e.add(s),e.userData.background=s}return e},UN=(t,e,n,r,i,s=.5)=>{let o=t.userData.text;o||(o=OM(),o.outlineBlur=.1,o.outlineColor="gray",o.outlineWidth=.003,o.rotateY(-Math.PI/2),o.rotateX(-Math.PI/2));const a=Math.sqrt(Math.pow(e-n,2)+Math.pow(r-i,2)),u=ir(a).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,".");o.text=`${u} cm`,o.fontSize=s,o.position.copy(t.position);const c=-De().wallWidth*4;o.translateY(c),o.fontSize=s,o.position.y=vr(t.userData.componentIndex)+jr,Ct.add(o),o.userData.section=t,t.userData.text=o};function HN(t,e,n,r){const i=new q().subVectors(e,t).normalize(),s=new q().subVectors(r,n).normalize(),o=i.dot(s),a=Math.acos(o);return bB.radToDeg(a)}let ha,Hh,el;const kt=new q,CQ=new q(0,-1,0),QL=.2,WN={freeForm:"gesture",rectangle:"crop_square"},$N=new Zn({side:_r});new Zn({side:_r,transparent:!0,opacity:.2});new Zn({color:"red"});const MQ=new Ot;let XN=new R_(MQ,$N);XN.scale.copy(new q(0,1,0));const DQ=new Zn({transparent:!0,opacity:0}),TQ=new Ot;let BM=new R_(TQ,DQ);BM.initializeBrushes();BM.scale.copy(new q(0,1,0));const PQ=new Ot;let YN=new R_(PQ,$N);YN.scale.copy(new q(0,1,0));const eF={box:XN,wall:YN,room:BM},LQ=()=>{const t=new as;var n="./own/media/"+"images/our_grid.png",r=t.load(n);r.encoding=Br;var i=new No(30,30),s=new nN({map:r,transparent:!0}),o=new Fe(i,s);o.rotateX(-Math.PI/2),eo.add(o),o.addEventListener("pointermove",OQ),o.addEventListener("pointerdown",FQ),o.addEventListener("pointerup",IQ),o.addEventListener("mouseleave",VQ);const a=new q(0,5,0),l=5,u=16777215;ha=new lK(CQ,a,l,u),ha.renderOrder=20,ha.line.material.depthTest=!0;const c=.5,f=new D_(c,32),h=new gs({color:"#a5fabc",depthTest:!1,transparent:!0,opacity:.6});Hh=new Fe(f,h),ha.add(Hh),zM(),el=IA(),el.fontSize=.6,el.color="#4cf50f",el.outlineBlur=.1,el.outlineColor="#000000",el.outlineWidth=.001,el.text=WN[we().drawingForm],Hh.add(el),Ct.add(ha);for(const d in eF)Ct.add(eF[d]);return o.receiveShadow=!0,o};function FQ(t){if(t.stopPropagation(),(t.originalEvent.which===1||t.originalEvent.button===0)&&t.intersected&&we().drawing){switch(PM(!1),we().drawingForm){case"freeForm":const r=ir(kt.x),i=ir(kt.z);tF(r,i);const s=Ye(we().getLineArrayBuilding[we().selectedFloor].floor.lineArray),o=s.length>2&&s[0][0]===r&&s[0][1]===i;if(s.length>1&&!o){De().measurementDialogVisible=!0,De().measurementDialogDistanceValue=Math.round(ir(kt.distanceTo(Jl)));const a=Ye(we().getLineArrayBuilding[we().selectedFloor].floor.lineArray),l=sf(a);zc.set(l[l.length-2][0],kt.y,l[l.length-2][1]),l[l.length-3]?Wh.set(l[l.length-3][0],kt.y,l[l.length-3][1]):Wh.set(l[l.length-2][0]+1,kt.y,l[l.length-2][1]);const u=HN(kt,zc,Wh,zc);De().measurementDialogAngleValue=u,De().measurementDialogTop=Math.min(t.originalEvent.clientY,window.innerHeight-200-210),De().measurementDialogLeft=Math.min(t.originalEvent.clientX,window.innerWidth-310)}else De().measurementDialogVisible=!1;break;case"rectangle":if(we().mouseDownCount===1){const l=[[Jl.x,Jl.z],[Jl.x,kt.z],[kt.x,kt.z],[kt.x,Jl.z],[Jl.x,Jl.z]].map(u=>[ir(u[0]),ir(u[1])]);kQ(l)}else tF(ir(kt.x),ir(kt.z))}Jl.set(kt.x,0,kt.z),we().mouseDownCount++}}function IQ(t){t.intersected,PM(!0)}function tF(t,e){const n=[t,e],r=we().getLineArrayBuilding[we().selectedFloor].floor.lineArray;if(r.push(n),De().setFloorLineArray(we().selectedFloor,r),r.length>2){const i=r[0],s=r[r.length-1];i[0]===s[0]&&i[1]===s[1]&&(we().setDrawing(!1),we().mouseLocked=!1,we().setTempLineArray(we().getLineArrayBuilding[we().selectedFloor].floor.lineArray),vu.emit("update2dCanvas"))}}function kQ(t){if(De().setFloorLineArray(we().selectedFloor,t),t.length>2){const e=t[0],n=t[t.length-1];e[0]===n[0]&&e[1]===n[1]&&(we().setDrawing(!1),we().mouseLocked=!1,we().setTempLineArray(we().getLineArrayBuilding[we().selectedFloor].floor.lineArray),vu.emit("update2dCanvas"))}}const mi=new q,nF=new q,zc=new q,Wh=new q,B_=new q,N_=new q(50,0,0),NM=new Gt().setFromPoints([B_,N_]),VM=new Ks({color:0,linewidth:5,depthTest:!1,transparent:!0,opacity:.7}),ba=new Pr(NM.clone(),VM);ba.renderOrder=1;ba.visible=!1;ba.computeLineDistances();ba.userData.point1=B_.clone();ba.userData.point2=N_.clone();const V_=new ss;V_.add(ba);const ul=new Pr(NM.clone(),VM);ul.renderOrder=1;ul.visible=!1;ul.userData.point1=B_.clone();ul.userData.point2=N_.clone();V_.add(ul);const cl=new Pr(NM.clone(),VM);cl.renderOrder=1;cl.visible=!1;cl.userData.point1=B_.clone();cl.userData.point2=N_.clone();V_.add(cl);const U0=new q,ix=new q,sx=new q,ox=new q,H0=new q,ax=new q;function RQ(t){ba.visible=t,ul.visible=t,cl.visible=t}function OQ(t){if(t.stopPropagation(),t.intersected&&(!De().measurementDialogHover||!De().measurementDialogVisible)){const e=we().drawing,n=we().enableSnapIn?1:.2,r=n*.9;if(ba.visible=!1,ul.visible=!1,cl.visible=!1,e){zM();const i=eo.raycaster.intersectObject(t.target,!1)[0];if(i){const{point:s}=i,o=vr(we().selectedFloor);kt.set(s.x,o,s.z);const a=[],l=we().selectedFloor-1;if(l>=0){const p=we().getLineArrayBuilding[l].floor.lineArray;a.push(...sf(p))}const u=Ye(we().getLineArrayBuilding[we().selectedFloor].floor.lineArray),c=sf(u);a.push(...c);let f=1/0,h=1/0,d=1/0;for(let p=0;p<a.length;p++){const g=a[p];mi.set(g[0],o,g[1]);const x=mi.distanceTo(kt);x<n&&x<h&&(h=x,nF.copy(mi),sx.copy(mi),sx.y=-100,ox.copy(mi),ox.y=100);const _=Math.abs(mi.x-kt.x);_<r&&_<f&&(f=_,U0.copy(mi),U0.z=-100,ix.copy(mi),ix.z=100);const m=Math.abs(mi.z-kt.z);m<r&&m<d&&(d=m,H0.copy(mi),H0.x=-100,ax.copy(mi),ax.x=100)}if(h!==1/0&&(ul.visible=!0,we().enableSnapIn&&kt.copy(nF),Fy(ul,sx,ox)),f!==1/0&&(ba.visible=!0,we().enableSnapIn&&(kt.x=U0.x),Fy(ba,U0,ix)),d!==1/0&&(cl.visible=!0,we().enableSnapIn&&(kt.z=H0.z),Fy(cl,H0,ax)),jN(u.length>0),qN(u.length>0),u.length>0){const p=u[u.length-1];switch(zc.copy(mi),mi.set(at(p[0]),o,at(p[1])),we().drawingForm){case"freeForm":{const g=[mi,kt];if(um(g),cm(g),zn){zc.set(c[c.length-1][0],kt.y,c[c.length-1][1]),c[c.length-2]?Wh.set(c[c.length-2][0],kt.y,c[c.length-2][1]):Wh.set(c[c.length-1][0]+1,kt.y,c[c.length-1][1]);const x=HN(kt,zc,Wh,zc);zn.text=`${x.toFixed(0)}\xB0`,zn.position.copy(mi),zn.lookAt(qn.position),zn.translateY(at(we().floorHeight)+zn.fontSize);const _=qn.position.distanceTo(zn.position);zn.fontSize=.5+_/100}}break;case"rectangle":{const g=BQ(mi.clone(),kt.clone());um(g),cm(g)}break}}}}}}const BQ=(t,e)=>[t,new q(t.x,t.y,e.z),e,new q(e.x,t.y,t.z),t];function zM(){if(Hh){const t=qn.position.distanceTo(kt);Hh.scale.set(1,1,1).multiplyScalar(t/30),Hh.lookAt(qn.position)}}function NQ(t){jN(t),RQ(t),qN(t)}function VQ(t){zQ()}function zQ(){we().drawing}const Qp=[];function jN(t){Qp.forEach(e=>{e.visible=t})}const um=t=>{let e=0;for(;;){const n=Qp[e];if(e+1>t.length-1){if(n)for(let r=e;r<Qp.length;r++){const i=Qp[r];Ct.remove(i),i.geometry.dispose(),i.material.dispose()}}else if(n)Fy(n,t[e],t[e+1]);else{const r=GQ(t[e],t[e+1]);Ct.add(r),Qp.push(r)}if(e+1>t.length)break;e++}},eg=[];function qN(t){eg.forEach(e=>{e.visible=t,e.userData.text&&(e.userData.text.visible=t)}),zn&&(zn.visible=t&&we().drawingForm==="freeForm")}const cm=t=>{const e=De().wallWidth,n=at(we().floorHeight/2),i=vr(we().selectedFloor)+n;let s=0;for(;;){let o=eg[s];if(s+1>t.length-1){if(o)for(let a=s;a<eg.length;a++){const l=eg[a];Ct.remove(l),l.geometry.dispose(),l.material.dispose()}}else{const a=t[s].x,l=t[s].z,u=t[s+1].x,c=t[s+1].z,f=[a+e,l,a-e,l,u-e,c,u+e,c,a+e,l];o?V1(o,f,a,l,u,c):(o=V1(o,f,a,l,u,c,!1),o.material=Fu(!0),Ct.add(o),eg.push(o)),o.position.y=i,o.userData.componentIndex=we().selectedFloor,UN(o,u,a,c,l)}if(s+1>t.length)break;s++}},GQ=(t,e)=>{const n=t.clone(),r=e.clone(),i=new Gt().setFromPoints([n,r]),s=new Ks({color:255,linewidth:5,depthTest:!1}),o=new Pr(i,s);return o.renderOrder=1,o.userData.point1=t.clone(),o.userData.point2=e.clone(),o},Fy=(t,e,n)=>{if(t.userData.point1.equals(e)&&t.userData.point2.equals(n))return;t.userData.point1=e.clone(),t.userData.point2=n.clone();const r=e.clone(),i=n.clone(),s=t.geometry.attributes.position.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=i.x,s[4]=i.y,s[5]=i.z,t.geometry.attributes.position.needsUpdate=!0};function UQ(t){const e=Ye(we().getLineArrayBuilding[we().selectedFloor].floor.lineArray),n=e[e.length-1],r=e[e.length-2],i=new q(at(n[0]),kt.y,at(n[1])),s=new q(at(r[0]),kt.y,at(r[1])),o=t-s.distanceTo(i),a=i.clone().sub(s).normalize().multiplyScalar(o).add(i);e[e.length-1]=[ir(a.x),ir(a.z)],De().setFloorLineArray(we().selectedFloor,e),um(e.map(l=>new q(at(l[0]),kt.y,at(l[1])))),cm(e.map(l=>new q(at(l[0]),kt.y,at(l[1]))))}function HQ(t){const e=Ye(we().getLineArrayBuilding[we().selectedFloor].floor.lineArray),n=e[e.length-1],r=e[e.length-2],i=e[e.length-3],s=WQ(i,r,n,t*(Math.PI/180));e[e.length-1]=s,De().setFloorLineArray(we().selectedFloor,e),um(e.map(o=>new q(at(o[0]),kt.y,at(o[1])))),cm(e.map(o=>new q(at(o[0]),kt.y,at(o[1]))))}function WQ(t,e,n,r){const i=t[0]-e[0],s=t[1]-e[1],o=Math.atan2(s,i),a=n[0]-e[0],l=n[1]-e[1];{const u=Math.sqrt(a*a+l*l),c=r-o,f=e[0]+u*Math.sin(c),h=e[1]+u*Math.cos(c);n=[f,h];const d=Ye(we().getLineArrayBuilding[we().selectedFloor].floor.lineArray);if(d[d.length-1]=n,De().setFloorLineArray(we().selectedFloor,d),um(d.map(p=>new q(at(p[0]),kt.y,at(p[1])))),cm(d.map(p=>new q(at(p[0]),kt.y,at(p[1])))),zn){const p=r*180/Math.PI;zn.text=`${p.toFixed(0)}\xB0`,zn.position.copy(new q(at(e[0]),kt.y,at(e[1]))),zn.lookAt(qn.position),zn.translateY(at(we().floorHeight)+zn.fontSize);const g=qn.position.distanceTo(zn.position);zn.fontSize=.5+g/100}}return n}function JN(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function Ro(t,e){this.current=t,this.next=e,this._inNormal=this.inwardsNormal(),this._outNormal=this.outwardsNormal()}Ro.prototype.outwardsNormal=function(){var t=this.inwardsNormal();return[-t[0],-t[1]]};Ro.prototype.inwardsNormal=function(){var t=this.next[0]-this.current[0],e=this.next[1]-this.current[1],n=Math.sqrt(t*t+e*e);if(n===0)throw new Error("Vertices overlap");return[-e/n,t/n]};Ro.prototype.offset=function(t,e){return Ro.offsetEdge(this.current,this.next,t,e)};Ro.prototype.inverseOffset=function(t,e){return Ro.offsetEdge(this.next,this.current,t,e)};Ro.offsetEdge=function(t,e,n,r){return new Ro([t[0]+n,t[1]+r],[e[0]+n,e[1]+r])};Ro.prototype.inverse=function(){return new Ro(this.next,this.current)};var $Q=Ro,KN={exports:{}},ro={exports:{}},ZN={NORMAL:0,NON_CONTRIBUTING:1,SAME_TRANSITION:2,DIFFERENT_TRANSITION:3},GM={exports:{}};GM.exports=fm;GM.exports.default=fm;function fm(t,e){if(!(this instanceof fm))return new fm(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||XQ,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function XQ(t,e){return t<e?-1:t>e?1:0}fm.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(this.length!==0){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,s=e[i];if(n(r,s)>=0)break;e[t]=s,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var s=(t<<1)+1,o=s+1,a=e[s];if(o<this.length&&n(e[o],a)<0&&(s=o,a=e[o]),n(a,i)>=0)break;e[t]=a,t=s}e[t]=i}};function Vo(){}Vo.prototype.clear=function(){this._root=null,this.size=0};Vo.prototype.find=function(t){for(var e=this._root;e!==null;){var n=this._comparator(t,e.data);if(n===0)return e.data;e=e.get_child(n>0)}return null};Vo.prototype.findIter=function(t){for(var e=this._root,n=this.iterator();e!==null;){var r=this._comparator(t,e.data);if(r===0)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(r>0)}return null};Vo.prototype.lowerBound=function(t){for(var e=this._root,n=this.iterator(),r=this._comparator;e!==null;){var i=r(t,e.data);if(i===0)return n._cursor=e,n;n._ancestors.push(e),e=e.get_child(i>0)}for(var s=n._ancestors.length-1;s>=0;--s)if(e=n._ancestors[s],r(t,e.data)<0)return n._cursor=e,n._ancestors.length=s,n;return n._ancestors.length=0,n};Vo.prototype.upperBound=function(t){for(var e=this.lowerBound(t),n=this._comparator;e.data()!==null&&n(e.data(),t)===0;)e.next();return e};Vo.prototype.min=function(){var t=this._root;if(t===null)return null;for(;t.left!==null;)t=t.left;return t.data};Vo.prototype.max=function(){var t=this._root;if(t===null)return null;for(;t.right!==null;)t=t.right;return t.data};Vo.prototype.iterator=function(){return new Nd(this)};Vo.prototype.each=function(t){for(var e=this.iterator(),n;(n=e.next())!==null;)if(t(n)===!1)return};Vo.prototype.reach=function(t){for(var e=this.iterator(),n;(n=e.prev())!==null;)if(t(n)===!1)return};function Nd(t){this._tree=t,this._ancestors=[],this._cursor=null}Nd.prototype.data=function(){return this._cursor!==null?this._cursor.data:null};Nd.prototype.next=function(){if(this._cursor===null){var t=this._tree._root;t!==null&&this._minNode(t)}else if(this._cursor.right===null){var e;do if(e=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.right===e)}else this._ancestors.push(this._cursor),this._minNode(this._cursor.right);return this._cursor!==null?this._cursor.data:null};Nd.prototype.prev=function(){if(this._cursor===null){var t=this._tree._root;t!==null&&this._maxNode(t)}else if(this._cursor.left===null){var e;do if(e=this._cursor,this._ancestors.length)this._cursor=this._ancestors.pop();else{this._cursor=null;break}while(this._cursor.left===e)}else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left);return this._cursor!==null?this._cursor.data:null};Nd.prototype._minNode=function(t){for(;t.left!==null;)this._ancestors.push(t),t=t.left;this._cursor=t};Nd.prototype._maxNode=function(t){for(;t.right!==null;)this._ancestors.push(t),t=t.right;this._cursor=t};var QN=Vo,YQ=QN;function $h(t){this.data=t,this.left=null,this.right=null,this.red=!0}$h.prototype.get_child=function(t){return t?this.right:this.left};$h.prototype.set_child=function(t,e){t?this.right=e:this.left=e};function z_(t){this._root=null,this._comparator=t,this.size=0}z_.prototype=new YQ;z_.prototype.insert=function(t){var e=!1;if(this._root===null)this._root=new $h(t),e=!0,this.size++;else{var n=new $h(void 0),r=0,i=0,s=null,o=n,a=null,l=this._root;for(o.right=this._root;;){if(l===null?(l=new $h(t),a.set_child(r,l),e=!0,this.size++):zs(l.left)&&zs(l.right)&&(l.red=!0,l.left.red=!1,l.right.red=!1),zs(l)&&zs(a)){var u=o.right===s;l===a.get_child(i)?o.set_child(u,hm(s,!i)):o.set_child(u,e5(s,!i))}var c=this._comparator(l.data,t);if(c===0)break;i=r,r=c<0,s!==null&&(o=s),s=a,a=l,l=l.get_child(r)}this._root=n.right}return this._root.red=!1,e};z_.prototype.remove=function(t){if(this._root===null)return!1;var e=new $h(void 0),n=e;n.right=this._root;for(var r=null,i=null,s=null,o=1;n.get_child(o)!==null;){var a=o;i=r,r=n,n=n.get_child(o);var l=this._comparator(t,n.data);if(o=l>0,l===0&&(s=n),!zs(n)&&!zs(n.get_child(o))){if(zs(n.get_child(!o))){var u=hm(n,o);r.set_child(a,u),r=u}else if(!zs(n.get_child(!o))){var c=r.get_child(!a);if(c!==null)if(!zs(c.get_child(!a))&&!zs(c.get_child(a)))r.red=!1,c.red=!0,n.red=!0;else{var f=i.right===r;zs(c.get_child(a))?i.set_child(f,e5(r,a)):zs(c.get_child(!a))&&i.set_child(f,hm(r,a));var h=i.get_child(f);h.red=!0,n.red=!0,h.left.red=!1,h.right.red=!1}}}}return s!==null&&(s.data=n.data,r.set_child(r.right===n,n.get_child(n.left===null)),this.size--),this._root=e.right,this._root!==null&&(this._root.red=!1),s!==null};function zs(t){return t!==null&&t.red}function hm(t,e){var n=t.get_child(!e);return t.set_child(!e,n.get_child(e)),n.set_child(e,t),t.red=!0,n.red=!1,n}function e5(t,e){return t.set_child(!e,hm(t.get_child(!e),!e)),hm(t,e)}var jQ=z_,qQ=QN;function dm(t){this.data=t,this.left=null,this.right=null}dm.prototype.get_child=function(t){return t?this.right:this.left};dm.prototype.set_child=function(t,e){t?this.right=e:this.left=e};function G_(t){this._root=null,this._comparator=t,this.size=0}G_.prototype=new qQ;G_.prototype.insert=function(t){if(this._root===null)return this._root=new dm(t),this.size++,!0;for(var e=0,n=null,r=this._root;;){if(r===null)return r=new dm(t),n.set_child(e,r),ret=!0,this.size++,!0;if(this._comparator(r.data,t)===0)return!1;e=this._comparator(r.data,t)<0,n=r,r=r.get_child(e)}};G_.prototype.remove=function(t){if(this._root===null)return!1;var e=new dm(void 0),n=e;n.right=this._root;for(var r=null,i=null,s=1;n.get_child(s)!==null;){r=n,n=n.get_child(s);var o=this._comparator(t,n.data);s=o>0,o===0&&(i=n)}return i!==null?(i.data=n.data,r.set_child(r.right===n,n.get_child(n.left===null)),this._root=e.right,this.size--,!0):!1};var JQ=G_,KQ={RBTree:jQ,BinTree:JQ},UM=function(e,n,r){return(e[0]-r[0])*(n[1]-r[1])-(n[0]-r[0])*(e[1]-r[1])},rF=UM,ZQ=ZN;function t5(t,e,n,r,i){this.left=e,this.point=t,this.otherEvent=n,this.isSubject=r,this.type=i||ZQ.NORMAL,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1}t5.prototype={isBelow:function(t){return this.left?rF(this.point,this.otherEvent.point,t)>0:rF(this.otherEvent.point,this.point,t)>0},isAbove:function(t){return!this.isBelow(t)},isVertical:function(){return this.point[0]===this.otherEvent.point[0]}};var QQ=t5,eee=UM,n5=function(e,n){var r=e.point,i=n.point;return r[0]>i[0]?1:r[0]<i[0]?-1:r[1]!==i[1]?r[1]>i[1]?1:-1:tee(e,n,r)};function tee(t,e,n,r){return t.left!==e.left?t.left?1:-1:eee(n,t.otherEvent.point,e.otherEvent.point)!==0?t.isBelow(e.otherEvent.point)?-1:1:!t.isSubject&&e.isSubject?1:-1}var r5=function(e,n){return e[0]===n[0]&&e[1]===n[1]},iF=UM,sF=n5,lx=r5,nee=function(e,n){if(e===n)return 0;if(iF(e.point,e.otherEvent.point,n.point)!==0||iF(e.point,e.otherEvent.point,n.otherEvent.point)!==0)return lx(e.point,n.point)?e.isBelow(n.otherEvent.point)?-1:1:e.point[0]===n.point[0]?e.point[1]<n.point[1]?-1:1:sF(e,n)===1?n.isAbove(e.point)?-1:1:e.isBelow(n.point)?-1:1;if(e.isSubject===n.isSubject){if(lx(e.point,n.point))return lx(e.otherEvent.point,n.otherEvent.point)?0:e.contourId>n.contourId?1:-1}else return e.isSubject?-1:1;return sF(e,n)===1?1:-1},oF=1e-9;function W0(t,e){return t[0]*e[1]-t[1]*e[0]}function Ip(t,e){return t[0]*e[0]+t[1]*e[1]}var ree=function(t,e,n,r,i){var s=[e[0]-t[0],e[1]-t[1]],o=[r[0]-n[0],r[1]-n[1]];function a(b,w,A){return[b[0]+w*A[0],b[1]+w*A[1]]}var l=[n[0]-t[0],n[1]-t[1]],u=W0(s,o),c=u*u,f=Ip(s,s),h=Ip(o,o);if(c>oF*f*h){var d=W0(l,o)/u;if(d<0||d>1)return null;var p=W0(l,s)/u;return p<0||p>1||i?null:[a(t,d,s)]}var g=Ip(l,l);if(u=W0(l,s),c=u*u,c>oF*f*g)return null;var x=Ip(s,l)/f,_=x+Ip(s,o)/f,m=Math.min(x,_),v=Math.max(x,_);return m<=1&&v>=0?m===1?i?null:[a(t,m>0?m:0,s)]:v===0?i?null:[a(t,v<1?v:1,s)]:i&&m===0&&v===1?null:[a(t,m>0?m:0,s),a(t,v<1?v:1,s)]:null},of=0,ad=1,af=2,qm=3,y1=[],Gc=ZN,iee=GM.exports,see=KQ.RBTree,_1=QQ,ld=n5,oee=nee,aee=ree,ea=r5,aF=Math.max,kA=Math.min;function lee(t,e,n,r,i,s){var o=new _1(t,!1,void 0,n),a=new _1(e,!1,o,n);o.otherEvent=a,o.contourId=a.contourId=r,ld(o,a)>0?a.left=!0:o.left=!0,s[0]=kA(s[0],t[0]),s[1]=kA(s[1],t[1]),s[2]=aF(s[2],t[0]),s[3]=aF(s[3],t[1]),i.push(o),i.push(a)}var RA=0;function OA(t,e,n,r,i){var s,o;if(typeof t[0][0]=="number")for(s=0,o=t.length-1;s<o;s++)lee(t[s],t[s+1],e,n+1,r,i);else for(s=0,o=t.length;s<o;s++)RA++,OA(t[s],e,RA,r,i)}function i5(t,e,n,r){var i=new iee(null,ld);return RA=0,OA(t,!0,0,i,n),OA(e,!1,0,i,r),i}function mh(t,e,n,r){e===null?(t.inOut=!1,t.otherInOut=!0):t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!lF(e,r)||e.isVertical()?e.prevInResult:e),t.inResult=lF(t,r)}function lF(t,e){switch(t.type){case Gc.NORMAL:switch(e){case of:return!t.otherInOut;case ad:return t.otherInOut;case af:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case qm:return!0}case Gc.SAME_TRANSITION:return e===of||e===ad;case Gc.DIFFERENT_TRANSITION:return e===af;case Gc.NON_CONTRIBUTING:return!1}return!1}function Iy(t,e,n){var r=aee(t.point,t.otherEvent.point,e.point,e.otherEvent.point),i=r?r.length:0;if(i===0||i===1&&(ea(t.point,e.point)||ea(t.otherEvent.point,e.otherEvent.point)))return 0;if(i===2&&t.isSubject===e.isSubject)return t.contourId===e.contourId&&console.warn("Edges of the same polygon overlap",t.point,t.otherEvent.point,e.point,e.otherEvent.point),0;if(i===1)return!ea(t.point,r[0])&&!ea(t.otherEvent.point,r[0])&&tl(t,r[0],n),!ea(e.point,r[0])&&!ea(e.otherEvent.point,r[0])&&tl(e,r[0],n),1;var s=[],o=!1,a=!1;return ea(t.point,e.point)?o=!0:ld(t,e)===1?s.push(e,t):s.push(t,e),ea(t.otherEvent.point,e.otherEvent.point)?a=!0:ld(t.otherEvent,e.otherEvent)===1?s.push(e.otherEvent,t.otherEvent):s.push(t.otherEvent,e.otherEvent),o&&a||o?(t.type=Gc.NON_CONTRIBUTING,e.type=t.inOut===e.inOut?Gc.SAME_TRANSITION:Gc.DIFFERENT_TRANSITION,o&&!a&&tl(s[0].otherEvent,s[1].point,n),2):a?(tl(s[0],s[1].point,n),3):s[0]!==s[3].otherEvent?(tl(s[0],s[1].point,n),tl(s[1],s[2].point,n),3):(tl(s[0],s[1].point,n),tl(s[3].otherEvent,s[2].point,n),3)}function tl(t,e,n){var r=new _1(e,!1,t,t.isSubject),i=new _1(e,!0,t.otherEvent,t.isSubject);return ea(t.point,t.otherEvent.point)&&console.warn("what is that?",t),r.contourId=i.contourId=t.contourId,ld(i,t.otherEvent)>0&&(t.otherEvent.left=!0,i.left=!1),t.otherEvent.otherEvent=i,t.otherEvent=r,n.push(i),n.push(r),n}function s5(t,e,n,r,i,s){for(var a=[],u,c,o=new see(oee),a=[],l=kA(r[2],i[2]),u,c;t.length;){var f=t.pop();if(a.push(f),s===of&&f.point[0]>l||s===af&&f.point[0]>r[2])break;if(f.left){if(o.insert(f),c=o.findIter(f),u=o.findIter(f),f.iterator=o.findIter(f),!u||!c){console.log("brute");var h=uee(o);u=h[0],c=h[1]}if(u.data()!==o.min()?u.prev():(u=o.iterator(),u.prev(),u.next()),c.next(),mh(f,u.data(),o,s),c.data()&&Iy(f,c.data(),t)===2&&(mh(f,u.data(),o,s),mh(f,c.data(),o,s)),u.data()&&Iy(u.data(),f,t)===2){var d=o.findIter(u.data());d.data()!==o.min()?d.prev():(d=o.findIter(o.max()),d.next()),mh(u.data(),d.data(),o,s),mh(f,u.data(),o,s)}}else{if(f=f.otherEvent,c=o.findIter(f),u=o.findIter(f),!(u&&c))continue;u.data()!==o.min()?u.prev():(u=o.iterator(),u.prev(),u.next()),c.next(),o.remove(f),c.data()&&u.data()&&Iy(u.data(),c.data(),t)}}return a}function uee(t,e){for(var n=t.iterator(),r=t.iterator(),i=t.iterator(),s;(s=i.next())!==null&&(n.next(),r.next(),s!==event););return[n,r]}function cee(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function fee(t){return t.reverse()}function uF(t){return Object.prototype.toString.call(t)==="[object Array]"}function cF(t,e){return uF(t[0])&&!uF(t[0][0])&&(t=[t]),t[e]=[],t}function hee(t){var e,n,r,i=[];for(n=0,r=t.length;n<r;n++)e=t[n],(e.left&&e.inResult||!e.left&&e.otherEvent.inResult)&&i.push(e);for(var s=!1;!s;)for(s=!0,n=0,r=i.length;n<r;n++)n+1<r&&ld(i[n],i[n+1])===1&&(cee(i,n,n+1),s=!1);for(n=0,r=i.length;n<r;n++)i[n].pos=n;for(n=0,r=i.length;n<r;n++)if(!i[n].left){var o=i[n].pos;i[n].pos=i[n].otherEvent.pos,i[n].otherEvent.pos=o}return i}function dee(t){var e,n,r=hee(t),i=Array(r.length),s=[],o=[],a=[],l={};for(e=0,n=r.length;e<n;e++)if(!i[e]){var u=[];s.push(u);var c=s.length-1;if(o.push(0),a.push(-1),r[e].prevInResult){var f=r[e].prevInResult.contourId;r[e].prevInResult.resultInOut?l[f]&&(cF(s[a[f]],c),a[c]=a[f],o[c]=o[f],l[c]=!0):(cF(s[f],c),a[c]=f,o[c]=o[f]+1,l[c]=!0)}var h=e,d=r[e].point;for(u.push(d);h>=e;)i[h]=!0,r[h].left?(r[h].resultInOut=!1,r[h].contourId=c):(r[h].otherEvent.resultInOut=!0,r[h].otherEvent.contourId=c),h=r[h].pos,i[h]=!0,u.push(r[h].point),h=pee(h,r,i);h=h===-1?e:h,i[h]=i[r[h].pos]=!0,r[h].otherEvent.resultInOut=!0,r[h].otherEvent.contourId=c,o[c]&1&&fee(u)}return s}function pee(t,e,n){for(var r=t+1,i=e.length;r<i&&ea(e[r].point,e[t].point);)if(n[r])r=r+1;else return r;for(r=t-1;n[r];)r=r-1;return r}function gee(t,e,n){var r=null;return t.length*e.length===0&&(n===of?r=y1:n===af?r=t:(n===ad||n===qm)&&(r=t.length===0?e:t)),r}function mee(t,e,n,r,i){var s=null;return(n[0]>r[2]||r[0]>n[2]||n[1]>r[3]||r[1]>n[3])&&(i===of?s=y1:i===af?s=t:(i===ad||i===qm)&&(s=t.concat(e))),s}function Jm(t,e,n){var r=gee(t,e,n);if(r)return r===y1?null:r;var i=[1/0,1/0,-1/0,-1/0],s=[1/0,1/0,-1/0,-1/0],o=i5(t,e,i,s);if(r=mee(t,e,i,s,n),r)return r===y1?null:r;var a=s5(o,t,e,i,s,n);return dee(a)}ro.exports=Jm;ro.exports.union=function(t,e){return Jm(t,e,ad)};ro.exports.diff=function(t,e){return Jm(t,e,af)};ro.exports.xor=function(t,e){return Jm(t,e,qm)};ro.exports.intersection=function(t,e){return Jm(t,e,of)};ro.exports.operations={INTERSECTION:of,DIFFERENCE:af,UNION:ad,XOR:qm};ro.exports.fillQueue=i5;ro.exports.computeFields=mh;ro.exports.subdivideSegments=s5;ro.exports.divideSegment=tl;ro.exports.possibleIntersection=Iy;(function(t){t.exports=ro.exports})(KN);var Km={},vee=Km.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},ux=Km.isNonEmptyArray=function(t){return vee(t)&&t.length};Km.equals=function(e,n){return e[0]===n[0]&&e[1]===n[1]};Km.orientRings=function t(e,n,r){n=n||0;var i,s;if(ux(e)&&typeof e[0][0]=="number"){var o=0,a=e;for(i=0,s=a.length;i<s;i++){var l=a[i],u=a[(i+1)%s];o+=l[0]*u[1],o-=u[0]*l[1]}(!r&&o>0||r&&o<0)&&a.reverse()}else for(i=0,s=e.length;i<s;i++)t(e[i],n+1,i>0);if(n===0&&ux(e)&&ux(e[0])&&typeof e[0][0][0]=="number"){var c=e[0].slice(0,1)[0];e[0].pop(),e[0].push([c[0],c[1]])}return e};var yee=$Q,pm=KN.exports,HM=Km,gm=HM.isArray,o5=HM.equals,Vd=HM.orientRings;function ti(t,e){this.vertices=null,this.edges=null,this._closed=!1,this._distance=0,t&&this.data(t),this._arcSegments=e!==void 0?e:5}ti.prototype.data=function(t){if(this._edges=[],!gm(t))throw new Error("Offset requires at least one coodinate to work with");return gm(t)&&typeof t[0]=="number"?this.vertices=t:(this.vertices=Vd(t),this._processContour(this.vertices,this._edges)),this};ti.prototype._processContour=function(t,e){var n,r;if(gm(t[0])&&typeof t[0][0]=="number")for(r=t.length,o5(t[0],t[r-1])&&(r-=1),n=0;n<r;n++)e.push(new yee(t[n],t[(n+1)%r]));else for(n=0,r=t.length;n<r;n++)e.push([]),this._processContour(t[n],e[e.length-1])};ti.prototype.arcSegments=function(t){return this._arcSegments=t,this};ti.prototype.validate=function(t){var e=t.length;return typeof t[0]=="number"?[t]:(t[0][0]===t[e-1][0]&&t[0][1]===t[e-1][1]&&e>1&&(t=t.slice(0,e-1),this._closed=!0),t)};ti.prototype.createArc=function(t,e,n,r,i,s,o){var a=Math.PI*2,l=Math.atan2(r[1]-e[1],r[0]-e[0]),u=Math.atan2(i[1]-e[1],i[0]-e[0]);s%2===0&&(s-=1),l<0&&(l+=a),u<0&&(u+=a);var c=l>u?l-u:l+a-u,f=(o?-c:a-c)/s;t.push(r);for(var h=1;h<s;++h)c=l+f*h,t.push([e[0]+Math.cos(c)*n,e[1]+Math.sin(c)*n]);return t.push(i),t};ti.prototype.distance=function(t,e){return this._distance=t||0,this};ti.degreesToUnits=function(t,e){switch(e){case"miles":t=t/69.047;break;case"feet":t=t/364568;break;case"kilometers":t=t/111.12;break;case"meters":case"metres":t=t/111120;break}return t};ti.prototype.ensureLastPoint=function(t){return o5(t[0],t[t.length-1])||t.push([t[0][0],t[0][1]]),t};ti.prototype.offset=function(t){return this.distance(t),this._distance===0?this.vertices:this._distance>0?this.margin(this._distance):this.padding(-this._distance)};ti.prototype._offsetSegment=function(t,e,n,r){for(var i=[],s=[n.offset(n._inNormal[0]*r,n._inNormal[1]*r),n.inverseOffset(n._outNormal[0]*r,n._outNormal[1]*r)],o=0,a=2;o<a;o++){var l=s[o],u=s[(o+a-1)%a];this.createArc(i,o===0?t:e,r,u.next,l.current,this._arcSegments,!0)}return i};ti.prototype.margin=function(t){if(this.distance(t),typeof this.vertices[0]=="number")return this.offsetPoint(this._distance);if(t===0)return this.vertices;var e=this.offsetLines(this._distance);return e=pm.union(this.vertices,e),Vd(e)};ti.prototype.padding=function(t){if(this.distance(t),this._distance===0)return this.ensureLastPoint(this.vertices);if(this.vertices.length===2&&typeof this.vertices[0]=="number")return this.vertices;var e=this.offsetLines(this._distance),n=pm.diff(this.vertices,e);return Vd(n)};ti.prototype.offsetLine=function(t){return t===0?this.vertices:Vd(this.offsetLines(t))};ti.prototype.offsetLines=function(t){if(t<0)throw new Error("Cannot apply negative margin to the line");var e;if(this.distance(t),gm(this.vertices[0])&&typeof this.vertices[0][0]!="number")for(var n=0,r=this._edges.length;n<r;n++)e=n===0?this.offsetContour(this.vertices[n],this._edges[n]):pm.union(e,this.offsetContour(this.vertices[n],this._edges[n]));else e=this.vertices.length===1?this.offsetPoint():this.offsetContour(this.vertices,this._edges);return e};ti.prototype.offsetContour=function(t,e){var n,r,i;if(gm(t[0])&&typeof t[0][0]=="number")for(r=0,i=t.length-1;r<i;r++){var s=this.ensureLastPoint(this._offsetSegment(t[r],t[r+1],e[r],this._distance));n=r===0?[this.ensureLastPoint(s)]:pm.union(n,this.ensureLastPoint(s))}else for(r=0,i=e.length;r<i;r++)n=r===0?this.offsetContour(t[r],e[r]):pm.union(n,this.offsetContour(t[r],e[r]));return n};ti.prototype.offsetPoint=function(t){this.distance(t);var e=this._arcSegments*2,n=[],r=this.vertices,i=this._distance,s=0;e%2===0&&e++;for(var o=0;o<e;o++)s+=2*Math.PI/e,n.push([r[0]+i*Math.cos(s),r[1]+i*Math.sin(s)]);return Vd([this.ensureLastPoint(n)])};ti.orientRings=Vd;var WM=ti;const rh=new xs,ql=new I_,Jo=new Ie,fF=new q,$0=new q,cx=new q,hF=new st;class _ee extends bl{constructor(e,n){const r={dragstart:{},dragend:{},drag:{},hoveron:{},hoveroff:{}};super();const i={},s={};n.style.touchAction="none";let o=null,a=null;const l=[],u=this;function c(S,C=0){return i[S.uuid]=S,s[S.uuid]=C,{addEventListener:function(M,D){r[M][S.uuid]=D}}}function f(S){return i[S.uuid]=S,s[S.uuid]=1/0,S.userData.isNonDraggable=!0,{addEventListener:function(C,M){r[C][S.uuid]=M}}}function h(S){delete r.drag[S.uuid],delete i[S.uuid],delete s[S.uuid]}function d(S){o=S,a=S}function p(){n.addEventListener("pointermove",b),n.addEventListener("pointerdown",w),n.addEventListener("pointerup",A),n.addEventListener("pointerleave",A)}function g(){n.removeEventListener("pointermove",b),n.removeEventListener("pointerdown",w),n.removeEventListener("pointerup",A),n.removeEventListener("pointerleave",A),n.style.cursor=""}function x(){g()}function _(){return Object.values(i)}function m(){return ql}const v=()=>l.sort((S,C)=>{const M=s[S.object.uuid];return s[C.object.uuid]-M});function b(S){if(u.enabled!==!1){if(E(S),ql.setFromCamera(Jo,e),o){if(o.userData.isNonDraggable)return;ql.ray.intersectPlane(rh,$0)&&o.position.copy($0.sub(fF).applyMatrix4(hF));const C=o.uuid;r.drag[C]&&r.drag[C]({object:o,mouse:Jo,camera:e});return}if(S.pointerType==="mouse"||S.pointerType==="pen"){if(l.length=0,ql.setFromCamera(Jo,e),ql.intersectObjects(Object.values(i),!0,l),l.length>0){v();const C=l[0].object;if(rh.setFromNormalAndCoplanarPoint(e.getWorldDirection(rh.normal),cx.setFromMatrixPosition(C.matrixWorld)),a!==C&&a!==null){const M=a.uuid;r.hoveroff[M]&&r.hoveroff[M]({object:a,mouse:Jo,camera:e}),n.style.cursor="auto",a=null}if(a!==C){const M=C.uuid;r.hoveron[M]&&r.hoveron[M]({object:C}),n.style.cursor="pointer",a=C}}else if(a!==null){const C=a.uuid;r.hoveroff[C]&&r.hoveroff[C]({object:a,mouse:Jo,camera:e}),n.style.cursor="auto",a=null}}}}function w(S){if(!(u.enabled===!1||!(S.which===1||S.button===0))&&(E(S),l.length=0,ql.setFromCamera(Jo,e),ql.intersectObjects(Object.values(i),!0,l),l.length>0)){v(),o=l[0].object,rh.setFromNormalAndCoplanarPoint(e.getWorldDirection(rh.normal),cx.setFromMatrixPosition(o.matrixWorld)),ql.ray.intersectPlane(rh,$0)&&(hF.copy(o.parent.matrixWorld).invert(),fF.copy($0).sub(cx.setFromMatrixPosition(o.matrixWorld))),n.style.cursor="move";const M=o.uuid;r.dragstart[M]&&r.dragstart[M]({object:o,mouse:Jo,camera:e})}}function A(){if(u.enabled!==!1){if(o){const S=o.uuid;r.dragend[S]&&r.dragend[S]({object:o,mouse:Jo,camera:e}),o=null}n.style.cursor=a?"pointer":"auto"}}function E(S){const C=n.getBoundingClientRect();Jo.x=(S.clientX-C.left)/C.width*2-1,Jo.y=-(S.clientY-C.top)/C.height*2+1}p(),this.enabled=!0,this.transformGroup=!1,this.addObject=c,this.addNonDraggableObject=f,this.removeObject=h,this.setSelected=d,this.activate=p,this.deactivate=g,this.dispose=x,this.getObjects=_,this.getRaycaster=m}}function wee(t){if(t<0)throw new Error("Index must be a positive integer.");let e="";const n=26;for(;t>=0;)e=String.fromCharCode(65+t%n)+e,t=Math.floor(t/n)-1;return e}const dF=new EM({color:65280}),pF=.02,bee=.6,xee=(t,e)=>{if(t.userData.markers){for(let i=0;i<t.userData.markers.length;i++){Rr.removeObject(t.userData.markers[i]);const s=t.userData.markers[i];s.geometry.dispose(),s.material.dispose(),s.parent.remove(s)}t.userData.markers=[]}const n=[];for(let i=0;i<e.length;i++){const[s,o]=e[i];if(e.length>1&&i===e.length-1&&e[0][0]===s&&e[0][1]===o)break;const a=Eee(s,o,t.userData.index,t);Ct.add(a),a.userData.index=i,a.userData.component=t;const l=new RM;l.text=wee(i),l.fontSize=bee,l.anchorX="center",l.anchorY="middle",l.color="#000",l.rotateX(-Math.PI/2),l.material.depthTest=!1,l.material.depthWrite=!1,l.renderOrder=2,l.position.y=-at(we().getLineArrayBuilding[t.userData.index].floor.floorHeight)/2+jr,a.userData.label=l,a.add(l),n.push(a)}if(t.userData.markers=n,t.userData.lines)for(let i=0;i<t.userData.lines.length;i++){const s=t.userData.lines[i];s.geometry.dispose(),s.material.dispose(),s.parent.remove(s)}const r=[];for(let i=0;i<n.length;i++){const s=n[i];let o=n[i+1];if(o===void 0&&t.userData.isShapeComplete&&(o=n[0]),o){const a=See(s,o);r.push(a),Ct.add(a)}}t.userData.lines=r},See=(t,e)=>{const n=t.position.clone(),r=we().getLineArrayBuilding[t.userData.component.userData.index].floor.floorHeight;n.y-=at(Number(r)/2);const i=e.position.clone();i.y-=at(Number(r)/2);const s=new Gt().setFromPoints([n,i]),o=new Ks({color:65280,linewidth:2}),a=new Pr(s,o);return t.userData.component.userData,a.userData.marker1=t,a.userData.marker2=e,a},Aee=t=>{const e=t.userData.marker1,n=t.userData.marker2,r=e.position.clone(),i=we().getLineArrayBuilding[e.userData.component.userData.index].floor.floorHeight;r.y-=at(Number(i)/2);const s=n.position.clone();s.y-=at(Number(i)/2);const o=t.geometry.attributes.position.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=s.x,o[4]=s.y,o[5]=s.z,t.geometry.attributes.position.needsUpdate=!0},Eee=(t,e,n,r)=>{const i=we().getLineArrayBuilding[r.userData.index].floor.floorHeight,s=new Ot(pF,at(Number(i)),pF),o=dF,a=new Fe(s,o);a.position.set(t,vr(n)+at(Number(i)/2)+.03,e);const l=Rr.addObject(a,1);return l.addEventListener("hoveron",function(u){we().drawing||(a.material=Hae)}),l.addEventListener("hoveroff",function(u){a.material=dF}),l.addEventListener("dragstart",function(u){we().drawing||(Wt.enabled=!1,a.material.emissive.set(11184810))}),l.addEventListener("dragend",function(u){if(Wt.enabled=!0,a.material.emissive.set(0),!we().drawing){const{index:c}=a.userData.component.userData;a.userData.index;const f=r.userData.markers.map(h=>[ir(h.position.x),ir(h.position.z)]);f.push(f[0]),De().setFloorLineArray(c,f)}}),l.addEventListener("drag",function(u){if(!we().drawing){const{index:c,floorLevel:f}=a.userData.component.userData,h=we().getLineArrayBuilding[c].floor.floorHeight;a.position.y=vr(f)+at(Number(h)/2)+.03;const d=a.userData.component.userData.lines;for(let p=0;p<d.length;p++){const g=d[p];Aee(g)}}}),a},U_=function(t){var e=t.map(s=>s[0]),n=t.map(s=>s[1]),r=(Math.min(...e)+Math.max(...e))/2,i=(Math.min(...n)+Math.max(...n))/2;return[r,i]},BA=new as().load("./own/media/textures/door.png");BA.encoding=Br;function a5(){const t=new No;BA.anisotropy=vn.capabilities.getMaxAnisotropy();const e=new AM({map:BA,metalness:.9,roughness:.05,envMapIntensity:.9,clearcoat:1,transparent:!0,transmission:.95,reflectivity:.2,ior:.9,side:_r}),n=new Fe(t,e);return n.name="door",n}function mm(t,e,n){const r=new qr(t,e),i=r.distance(),s=n/i,o=r.at(s,new q),a=r.at(1-s,new q);return[o,a]}function w1(t,e,n){const r=new qr(t,e),i=r.distance(),s=n/i;return r.at(s,new q)}const l5=new gs({color:"red",wireframe:!0}),Cee=.1;function Mee(t){t.userData.doors&&t.userData.doors.forEach(r=>{Rr.removeObject(r),r.geometry.dispose(),r.material.dispose(),Ct.remove(r)}),t.userData.doors=[];const e=[],n=t.userData.doorHoles;for(let r=0;r<n.length;r++){const i=n[r],s=Dee(i,t);e.push(s)}t.userData.doors=e}const Dee=(t,e)=>{const n=a5();n.matrix.copy(t.matrix),n.position.copy(t.position),n.rotation.copy(t.rotation),t.geometry.computeBoundingBox();const r=new q(1,1,1);t.geometry.boundingBox.getSize(r),n.geometry.computeBoundingBox();const i=new q(1,1,1);n.geometry.boundingBox.getSize(i);const s=r.clone().divide(i);s.subScalar(jr),s.z=1,n.scale.copy(s),n.userData.index=t.userData.index;const o=e.userData.points,a=new q(o[0][0],t.position.y,o[0][1]),l=new q(o[1][0],t.position.y,o[1][1]),u=new qr(...mm(a,l,r.x/2+Cee)),c=Rr.addObject(n,1);if(c.addEventListener("dragstart",function(f){Wt.enabled=!1,f.object.material.emissive.set(11184810)}),c.addEventListener("dragend",function(f){Wt.enabled=!0,f.object.material.emissive.set(0),e.userData.componentIndex,e.userData.index;const h=n.userData.index;De().addConstructionElementToLineArray(e,h,n.position.toArray(),"door",t.userData.width,t.userData.height)}),c.addEventListener("hoveron",function(f){f.object.material.emissive.set(11184810)}),c.addEventListener("hoveroff",function(f){f.object.material.emissive.set(0)}),c.addEventListener("drag",function(f){Wt.enabled=!1;const h=f.object;gF(u,h,t),Ye(De().selectedSection)instanceof Fe&&(Ye(De().selectedSection).material=iv)}),Ct.add(n),n.userData.dragControls=c,!Iee(n,u,t)){gF(u,n,t);const f=n.userData.index,h=[n.position.x,t.position.y,n.position.z];De().addConstructionElementToLineArray(e,f,h,"door",t.userData.width,t.userData.height)}return n},Tee=(t,e,n,r,i)=>{i.userData.doorHoles&&i.userData.doorHoles.forEach(u=>{u.geometry.dispose(),u.material.dispose(),Ct.remove(u)}),i.userData.doorHoles=[];const s=[],o=i.userData.componentIndex,a=i.userData.index,l=Lee(o,a);for(let u=0;u<l.length;u++){const c=l[u],{points:f}=c,h=sf(f),[d,p]=U_(h),{width:g,height:x}=sr().standardDoorValue,_=w1(i.userData.elementsLeftOrigin,i.userData.elementsRightOrigin,d),m=w1(i.userData.elementsTopOrigin,i.userData.elementsBottomOrigin,p),v=new q(_.x,m.y,_.z),b=Pee(v,g,x,i,t,e,n,r);b.userData.index=c.index,b.userData.width=g,b.userData.height=x,s.push(b)}i.userData.doorHoles=s},Pee=(t,e,n,r,i,s,o,a)=>{t instanceof q||(t=new q(...t));const l=at(e),u=at(n),c=De().wallWidth*1.2+jr*4,f=c*1.8,h=new ma(new Ot(l,u,f),l5);h.position.copy(t);const d=we().getLineArrayBuilding[r.userData.componentIndex].floor.floorHeight;h.position.y=r.position.y+at(n)/2-at(d)/2;const g=nt[r.userData.componentIndex].userData.centroid;if(g){const[m,v]=mm(h.position,g,c/2);h.position.copy(m)}const x=Math.atan2(i-s,o-a)-Math.PI/2;h.rotateY(x),r.userData.doorHoles.push(h);const _=Kc(h);return h.userData.holeBrush=_,h},Lee=(t,e)=>{const n=we().getLineArrayBuilding[t].floor;if(n){const r=n.wall[e];if(r){const i=r.elements;if(i)return i.filter((o,a)=>(o.index=a,o.id==="door"))}}return[]},Fee=(t,e,n,r,i)=>{const o=nt[t].userData.sections[e];De().addConstructionElementToLineArray(o,null,n,"door",r,i)};function gF(t,e,n){const r=new q;t.closestPointToPoint(e.position,!0,r),e.position.set(r.x,n.position.y,r.z)}function Iee(t,e,n){const r=new q;e.closestPointToPoint(t.position,!0,r);const i=De().wallWidth/1.5;return Math.abs(r.x-t.position.x)<i&&Math.abs(r.z-t.position.z)<i&&Math.abs(n.position.y-t.position.y)<i}function Kc(t){const e=t.geometry.clone();return e.applyQuaternion(t.quaternion),e.translate(t.position.x,t.position.y,t.position.z),new ma(e,new Zn({roughness:.25,color:16717636}))}const kee=new as,fx={map:kee.load("./own/media/textures/flat_roof_black.jpeg")},NA=()=>{for(const e in fx){const n=fx[e];n.outputEncoding=Br,n.anisotropy=vn.capabilities.getMaxAnisotropy()}return new Zn({side:_r,bumpScale:1,...fx})},Ree=()=>{if(Ct.remove(Ct.getObjectByName("roof")),Ct.remove(Ct.getObjectByName("roofBoarderLines")),we().selectedRoof==="flatRoof")return nt[Object.keys(nt).length-1].userData.frameTop;const t=new q(1,1,1),e=Object.keys(nt).length;for(let p=0;p<e;p++){const g=nt[p],x=new q;g.geometry.computeBoundingBox(),g.geometry.boundingBox.getSize(x),t.x=Math.max(t.x,x.x),t.z=Math.max(t.z,x.z)}const n=1.2;t.addScalar(n);const r=we().getLineArrayBuilding.length,i=vr(r);let s,o,a;const l=15*(Math.PI/180),u=1.1,c=[];for(let p=0;p<we().getLineArrayBuilding.length;p++){const g=we().getLineArrayBuilding[p].floor;for(let x=0;x<g.lineArray.length;x++){const _=g.lineArray[x];c.push(_)}}const f=U_(c),h=we().getLineArrayBuilding[nt.length-1].floor.floorHeight,d=at(h)*1.2;switch(we().selectedRoof){case"saddleRoof":{s=new ss;const p=t.x*u-De().roofBoardPadding,g=t.z/2*u-De().roofBoardPadding,x=new Ot(p,De().roofBoardHeight,.04),_=new Ot(g+De().roofBoardHeight,De().roofBoardHeight,.04),m=new Zn({color:16777215}),v=new Ot(t.x*u,De().roofThickness,t.z/2*u),b=new ss,w=new Fe(v,NA());b.add(w),v.rotateX(l);const A=new ss,E=new Fe(x,m);E.position.set(0,De().roofBoardHeight/2,(t.z/2*u-De().roofBoardPadding)/2),E.rotation.x=-l,A.add(E);const S=new Fe(_,m);S.position.set((t.x*u-De().roofBoardPadding)/2,De().roofBoardHeight/2,-De().roofBoardHeight/2+De().roofThickness),S.rotation.y=Math.PI/2,A.add(S);const C=new Fe(_,m);C.position.set(-(t.x*u-De().roofBoardPadding)/2,De().roofBoardHeight/2,-De().roofBoardHeight/2+De().roofThickness),C.rotation.y=-Math.PI/2,A.add(C);const M=new Fe(new Ot(t.x*u,De().roofThickness,t.z/2*u),new Zn({color:16777215}));M.position.set(0,De().roofBoardHeight-De().roofThickness/2,-De().roofThickness*1.8),A.add(M),A.position.set(0,-De().roofThickness-De().roofBoardHeight,0),A.rotation.x=l,A.name="roofBoarderLines",b.add(A);const L=new Mr().setFromObject(w).getSize(new q).z/2;b.position.z=L-De().roofThickness;const F=b.clone();F.position.z=-L,F.rotation.y=Math.PI,s.add(b),s.add(F);const k=new Fe(new Ot(t.x*u,d,t.z*u));a=t.z/2*u*Math.tan(l)/2,k.position.set(at(f[0]),i-a+d/2,at(f[1])+L-De().roofThickness),k.rotation.x=l;const I=new Fe(new Ot(t.x*u,d,t.z*u));a=t.z/2*u*Math.tan(l)/2,I.position.set(at(f[0]),i-a+d/2,at(f[1])-L-De().roofThickness),I.rotation.x=-l,o=Dae.evaluate(Kc(k),Kc(I),_g)}break;default:{const p=t.x*u-De().roofBoardPadding,g=t.z*u-De().roofBoardPadding,x=new Ot(p,De().roofBoardHeight,.04),_=new Ot(g,De().roofBoardHeight,.04),m=new Zn({color:16777215}),v=new Ot(t.x*u,De().roofThickness,t.z*u);t.z*u/Math.sin(l),v.rotateX(l),o=new Fe(new Ot(t.x,d,t.z*u)),a=t.z*u*Math.tan(l)/2,o.position.set(at(f[0]),i-a+d/2,at(f[1])),o.rotation.x=l;const b=new ss,w=new Fe(x,m);w.position.set(0,De().roofBoardHeight/2,(t.z*u-De().roofBoardPadding)/2),w.rotation.x=-l,b.add(w);const A=new Fe(_,m);A.position.set((t.x*u-De().roofBoardPadding)/2,De().roofBoardHeight/2,0),A.rotation.y=Math.PI/2,b.add(A);const E=new Fe(x,m);E.position.set(0,De().roofBoardHeight/2,-(t.z*u-De().roofBoardPadding)/2),E.rotation.y=Math.PI,E.rotation.x=-l,b.add(E);const S=new Fe(_,m);S.position.set(-(t.x*u-De().roofBoardPadding)/2,De().roofBoardHeight/2,0),S.rotation.y=-Math.PI/2,b.add(S);const C=new Fe(new Ot(t.x*u,De().roofThickness,t.z*u),new Zn({color:16777215}));C.position.set(0,De().roofBoardHeight-De().roofThickness/2,0),b.add(C),b.position.set(0,-De().roofThickness-De().roofBoardHeight,0),b.rotation.x=l,b.name="roofBoarderLines",s=new Fe(v,NA()),s.add(b)}break}return s.position.set(at(f[0]),i-a,at(f[1])),s.name="roof",s.receiveShadow=!0,s.castShadow=!0,Ct.add(s),s.userData.subtractor=Kc(o),s};function u5(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Oee={exports:{}},hx={exports:{}},mF;function Bee(){return mF||(mF=1,function(t){(function e(n,r,i){var s=function(l){return Object.prototype.toString.call(l)==="[object Array]"};function o(l,u){if(!(this instanceof o))return new o(l,u);s(l)?(u=l[1],l=l[0]):typeof l=="object"&&l&&(u=l.y,l=l.x),this.x=o.clean(l||0),this.y=o.clean(u||0)}o.prototype={change:function(l){if(typeof l=="function")this.observers?this.observers.push(l):this.observers=[l];else if(this.observers&&this.observers.length)for(var u=this.observers.length-1;u>=0;u--)this.observers[u](this,l);return this},ignore:function(l){if(this.observers)if(!l)this.observers=[];else for(var u=this.observers,c=u.length;c--;)u[c]===l&&u.splice(c,1);return this},set:function(l,u,c){if(typeof l!="number"&&(c=u,u=l.y,l=l.x),this.x===l&&this.y===u)return this;var f=null;if(c!==!1&&this.observers&&this.observers.length&&(f=this.clone()),this.x=o.clean(l),this.y=o.clean(u),c!==!1)return this.change(f)},zero:function(){return this.set(0,0)},clone:function(){return new this.constructor(this.x,this.y)},negate:function(l){return l?new this.constructor(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(l,u,c){return typeof l!="number"&&(c=u,s(l)?(u=l[1],l=l[0]):(u=l.y,l=l.x)),l+=this.x,u+=this.y,c?new this.constructor(l,u):this.set(l,u)},subtract:function(l,u,c){return typeof l!="number"&&(c=u,s(l)?(u=l[1],l=l[0]):(u=l.y,l=l.x)),l=this.x-l,u=this.y-u,c?new this.constructor(l,u):this.set(l,u)},multiply:function(l,u,c){return typeof l!="number"?(c=u,s(l)?(u=l[1],l=l[0]):(u=l.y,l=l.x)):typeof u!="number"&&(c=u,u=l),l*=this.x,u*=this.y,c?new this.constructor(l,u):this.set(l,u)},rotate:function(l,u,c){var f=this.x,h=this.y,d=Math.cos(l),p=Math.sin(l),g,x;return u=u?-1:1,g=d*f-u*p*h,x=u*p*f+d*h,c?new this.constructor(g,x):this.set(g,x)},length:function(){var l=this.x,u=this.y;return Math.sqrt(l*l+u*u)},lengthSquared:function(){var l=this.x,u=this.y;return l*l+u*u},distance:function(l){var u=this.x-l.x,c=this.y-l.y;return Math.sqrt(u*u+c*c)},nearest:function(l){for(var u=Number.MAX_VALUE,c=null,f,h=l.length-1;h>=0;h--)f=this.distance(l[h]),f<=u&&(u=f,c=l[h]);return c},normalize:function(l){var u=this.length(),c=u<Number.MIN_VALUE?0:1/u;return l?new this.constructor(this.x*c,this.y*c):this.set(this.x*c,this.y*c)},equal:function(l,u){return typeof l!="number"&&(s(l)?(u=l[1],l=l[0]):(u=l.y,l=l.x)),o.clean(l)===this.x&&o.clean(u)===this.y},abs:function(l){var u=Math.abs(this.x),c=Math.abs(this.y);return l?new this.constructor(u,c):this.set(u,c)},min:function(l,u){var c=this.x,f=this.y,h=l.x,d=l.y,p=c<h?c:h,g=f<d?f:d;return u?new this.constructor(p,g):this.set(p,g)},max:function(l,u){var c=this.x,f=this.y,h=l.x,d=l.y,p=c>h?c:h,g=f>d?f:d;return u?new this.constructor(p,g):this.set(p,g)},clamp:function(l,u,c){var f=this.min(u,!0).max(l);return c?f:this.set(f.x,f.y)},lerp:function(l,u,c){return this.add(l.subtract(this,!0).multiply(u),c)},skew:function(l){return l?new this.constructor(-this.y,this.x):this.set(-this.y,this.x)},dot:function(l){return o.clean(this.x*l.x+l.y*this.y)},perpDot:function(l){return o.clean(this.x*l.y-this.y*l.x)},angleTo:function(l){return Math.atan2(this.perpDot(l),this.dot(l))},divide:function(l,u,c){if(typeof l!="number"?(c=u,s(l)?(u=l[1],l=l[0]):(u=l.y,l=l.x)):typeof u!="number"&&(c=u,u=l),l===0||u===0)throw new Error("division by zero");if(isNaN(l)||isNaN(u))throw new Error("NaN detected");return c?new this.constructor(this.x/l,this.y/u):this.set(this.x/l,this.y/u)},isPointOnLine:function(l,u){return(l.y-this.y)*(l.x-u.x)===(l.y-u.y)*(l.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(l){return this.set(l[0],l[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"},constructor:o},o.fromArray=function(l,u){return new(u||o)(l[0],l[1])},o.precision=r||8;var a=Math.pow(10,o.precision);return o.clean=n||function(l){if(isNaN(l))throw new Error("NaN detected");if(!isFinite(l))throw new Error("Infinity detected");return Math.round(l)===l?l:Math.round(l*a)/a},o.inject=e,n||(o.fast=e(function(l){return l}),t.exports=o),o})()}(hx)),hx.exports}var dx={exports:{}},vF;function $M(){return vF||(vF=1,function(t){function e(n,r,i,s,o,a,l,u){if(arguments.length===4){var c=n,f=r,h=i,d=s;c.length&&c.length===2?(n=c[0],r=c[1],i=f[0],s=f[1],o=h[0],a=h[1],l=d[0],u=d[1]):(n=c.x,r=c.y,i=f.x,s=f.y,o=h.x,a=h.y,l=d.x,u=d.y)}var p,g,x,_,m,v,b,w,A,E,S,C,M;if(p=s-r,x=n-i,m=i*r-n*s,A=p*o+x*a+m,E=p*l+x*u+m,!(A!==0&&E!==0&&(A>=0&&E>=0||A<0&&E<0))&&(g=u-a,_=o-l,v=l*a-o*u,b=g*n+_*r+v,w=g*i+_*s+v,!(b!==0&&w!==0&&(b>=0&&w>=0||b<0&&w<0))))return S=p*_-g*x,S===0?!0:(C=x*v-_*m,M=g*m-p*v,[(C<0,C/S),(M<0,M/S)])}t.exports&&(t.exports=e),typeof window<"u"&&(window.segseg=window.segseg||e)}(dx)),dx.exports}var px={exports:{}},gx={exports:{}},yF;function Nee(){return yF||(yF=1,function(t){(function e(n,r,i){function s(a,l){if(!(this instanceof s))return new s(a,l);if(typeof a=="object"&&a){this.y=a.y||0,this.x=a.x||0;return}this.x=s.clean(a||0),this.y=s.clean(l||0)}s.prototype={change:function(a){if(a)this.observers?this.observers.push(a):this.observers=[a];else if(this.observers)for(var l=this.observers.length-1;l>=0;l--)this.observers[l](this);return this},ignore:function(a){if(this.observers)for(var l=this.observers,u=l.length;u--;)l[u]===a&&l.splice(u,1);return this},set:function(a,l,u){if(typeof a!="number"&&(u=l,l=a.y,a=a.x),this.x===a&&this.y===l)return this;if(this.x=s.clean(a),this.y=s.clean(l),u!==!1)return this.change()},zero:function(){return this.set(0,0)},clone:function(){return new s(this.x,this.y)},negate:function(a){return a?new s(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(a,l){return l?new s(this.x+a.x,this.y+a.y):(this.x+=a.x,this.y+=a.y,this.change())},subtract:function(a,l){return l?new s(this.x-a.x,this.y-a.y):(this.x-=a.x,this.y-=a.y,this.change())},multiply:function(a,l){var u,c;return typeof a!="number"?(u=a.x,c=a.y):u=c=a,l?new s(this.x*u,this.y*c):this.set(this.x*u,this.y*c)},rotate:function(a,l,u){var c=this.x,f=this.y,h=Math.cos(a),d=Math.sin(a),p,g;return l=l?-1:1,p=h*c-l*d*f,g=l*d*c+h*f,u?new s(p,g):this.set(p,g)},length:function(){var a=this.x,l=this.y;return Math.sqrt(a*a+l*l)},lengthSquared:function(){var a=this.x,l=this.y;return a*a+l*l},distance:function(a){var l=this.x-a.x,u=this.y-a.y;return Math.sqrt(l*l+u*u)},normalize:function(a){var l=this.length(),u=l<Number.MIN_VALUE?0:1/l;return a?new s(this.x*u,this.y*u):this.set(this.x*u,this.y*u)},equal:function(a,l){return l===i&&(l=a.y,a=a.x),s.clean(a)===this.x&&s.clean(l)===this.y},abs:function(a){var l=Math.abs(this.x),u=Math.abs(this.y);return a?new s(l,u):this.set(l,u)},min:function(a,l){var u=this.x,c=this.y,f=a.x,h=a.y,d=u<f?u:f,p=c<h?c:h;return l?new s(d,p):this.set(d,p)},max:function(a,l){var u=this.x,c=this.y,f=a.x,h=a.y,d=u>f?u:f,p=c>h?c:h;return l?new s(d,p):this.set(d,p)},clamp:function(a,l,u){var c=this.min(l,!0).max(a);return u?c:this.set(c.x,c.y)},lerp:function(a,l){return this.add(a.subtract(this,!0).multiply(l),!0)},skew:function(){return new s(-this.y,this.x)},dot:function(a){return s.clean(this.x*a.x+a.y*this.y)},perpDot:function(a){return s.clean(this.x*a.y-this.y*a.x)},angleTo:function(a){return Math.atan2(this.perpDot(a),this.dot(a))},divide:function(a,l){var u,c;if(typeof a!="number"?(u=a.x,c=a.y):u=c=a,u===0||c===0)throw new Error("division by zero");if(isNaN(u)||isNaN(c))throw new Error("NaN detected");return l?new s(this.x/u,this.y/c):this.set(this.x/u,this.y/c)},isPointOnLine:function(a,l){return(a.y-this.y)*(a.x-l.x)===(a.y-l.y)*(a.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(a){return this.set(a[0],a[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"}},s.fromArray=function(a){return new s(a[0],a[1])},s.precision=r||8;var o=Math.pow(10,s.precision);return s.clean=n||function(a){if(isNaN(a))throw new Error("NaN detected");if(!isFinite(a))throw new Error("Infinity detected");return Math.round(a)===a?a:Math.round(a*o)/o},s.inject=e,n||(s.fast=e(function(a){return a}),t.exports=s),s})()}(gx)),gx.exports}var _F;function Vee(){return _F||(_F=1,function(t){if(typeof u5<"u")var e=Nee(),n=$M();var r=function(u){return Object.prototype.toString.call(u)==="[object Array]"},i=function(u){return typeof u<"u"},s=function(u,c){return i(u)?u:c},o=function(u){return u!==1/0&&u!==-1/0},a=function(u,c,f,h){return u*h-c*f};function l(u,c,f,h){if(this._listeners=[],!(this instanceof l))return new l(u,c,f,h);if(i(f)&&i(h))return l.fromPoints(u,c,f,h);i(u)&&this.slope(u),i(c)&&this.yintercept(c)}l.prototype._yintercept=null,l.prototype._xintercept=null,l.prototype._slope=null,l.prototype.change=function(u){if(typeof u=="function")return this._listeners.push(u),u},l.prototype.ignore=function(u){u?this._listeners=this._listeners.filter(function(c){return c!==u}):this._listeners=[]},l.prototype.notify=function(u){for(var c=this._listeners,f=c.length,h=0;h<f;h++)c[h](this)},l.prototype.yintercept=function(u){return i(u)&&(o(u)&&(u=e.clean(u)),this._yintercept!==u&&(this._yintercept=u,this.isHorizontal()||(this._xintercept=this.solveForX(0)),this.notify())),s(this._yintercept,null)},l.prototype.xintercept=function(u){if(i(u)&&(o(u)&&(u=e.clean(u)),this._xintercept!==u)){if(!this.isVertical()){var c=this._xintercept-u;this._yintercept-=c*-this._slope}this._xintercept=u,this.notify()}return s(this._xintercept,null)},l.prototype.slope=function(u){if(i(u)&&(o(u)&&(u=e.clean(u)),this._slope!==u)){var c=this._slope;if(this._slope=u,c!==null){var f=this.solveForX(0);o(f)||(f=null),this._xintercept=f}this.notify()}return s(this._slope,null)},l.prototype.intersectSegment=function(u,c,f,h){var d=f-u,p=h-c,g,x,_,m,v=this.isHorizontal(),b=this.isVertical();if(d===0){if(b)return u===this.xintercept()}else if(p===0){if(v)return c===this.yintercept()}else if(p/d===this.slope())return c===this.solveForY(u);u>f?(g=f-10,_=u+10):(g=u-10,_=f+10);var w;if(this.isHorizontal())y=this.yintercept(),w=n(g,y,_,y,u,c,f,h);else if(this.isVertical()){c>h?(x=h-10,m=c+10):(x=c-10,m=h+10);var A=this.xintercept();w=n(A,x,A,m,u,c,f,h)}else x=this.solveForY(g),m=this.solveForY(_),w=n(g,x,_,m,u,c,f,h);return w&&w!==!0?e.fromArray(w):w},l.prototype.createPerpendicular=function(u){if(this.isVertical())return new l(0,u.y);if(this.isHorizontal()){var c=new l;return c.xintercept(u.x),c.slope(1/0),c}else{var f=-1/this.slope();return new l(f,u.y-f*u.x)}},l.prototype.intersectCircle=function(u,c){var f=c*c,h=this.slope(),d=this.yintercept(),p,g,x,_;this.isHorizontal()?(p=1,g=0):this.isVertical()?(h=c,d=f,p=0,g=h):(p=1/h,g=1);var m=this.isVertical()?this.xintercept():1,v=d+h,b=p*p,w=g*g,A=p*(u.y-v)-g*(u.x-m);A*=A;var E=b+w,S=Math.sqrt(f*(b+w)-A);if(isNaN(S))return[];S/=E;var C=p*(u.x-m)+g*(u.y-v),M=C/E+S,D=C/E-S;x=new e(m+M*p,v+M*g),_=new e(m+D*p,v+D*g);var T=[x];return x.equal(_)||T.push(_),T},l.prototype.solveForX=function(u){return this.isVertical()?this.xintercept():(u-this.yintercept())/this.slope()},l.prototype.solveForY=function(u){return this.isHorizontal()?this.yintercept():this.slope()*u+this.yintercept()},l.prototype.intersect=function(u,c,f,h){if(i(c)&&i(h)||i(u.end))return this.intersectSegment(u,c,f,h);var d=this.slope(),p=u.slope();if(d===p)return this.yintercept()===u.yintercept()&&this.xintercept()===u.xintercept();if(o(d)&&o(p)){if(this.isHorizontal())return new e(u.solveForX(this.yintercept()),this.yintercept());if(u.isHorizontal())return new e(this.solveForX(u.yintercept()),u.yintercept());var g=u.solveForX(-1);c=u.solveForY(g),f=u.solveForX(1),h=u.solveForY(f);var x=this.solveForX(-1),_=this.solveForY(x),m=this.solveForX(1),v=this.solveForY(m),b=a(g,c,f,h),w=a(x,_,m,v),A=a(b,g-f,w,x-m),E=a(b,c-h,w,_-v),S=a(g-f,c-h,x-m,_-v);return e(A/S,E/S)}else{var C,M,D=this.xintercept()||u.xintercept();return o(d)?(C=d,M=this.yintercept()):(C=p,M=u.yintercept()),C!==0?e(D,D*C+M):e(D,M)}},l.fromPoints=function(u,c,f,h){r(c)?(h=c[1],f=c[0]):i(c)&&i(c.x)&&i(c.y)&&(h=c.y,f=c.x),r(u)?(c=u[1],u=u[0]):i(u)&&i(u.x)&&i(u.y)&&(c=u.y,u=u.x);var d=new l,p=(h-c)/(f-u);return d.slope(p),d.isHorizontal()?d.yintercept(c):d.isVertical()?d.xintercept(f):d.yintercept(c-p*u),d},l.prototype.isHorizontal=function(){return!this.slope()},l.prototype.isVertical=function(){return!o(this.slope())},l.prototype.closestPointTo=function(u){var c=this.yintercept(),f=this.xintercept();return this.slope(),this.isHorizontal()?e(u.x,c):this.isVertical()?e(f,u.y):this.intersect(this.createPerpendicular(u))},l.prototype.containsPoint=function(u,c){var f=u;return i(c)||(c=u.y,f=u.x),this.isHorizontal()?c===this.yintercept():this.isVertical()?f===this.xintercept():c===this.solveForY(f)},t.exports=l,typeof window<"u"&&(window.Line2=window.Line2||l)}(px)),px.exports}var mx={exports:{}},vx,wF;function XM(){if(wF)return vx;wF=1,vx=e;var t=+(Math.pow(2,27)+1);function e(n,r,i){var s=n*r,o=t*n,a=o-n,l=o-a,u=n-l,c=t*r,f=c-r,h=c-f,d=r-h,p=s-l*h,g=p-u*h,x=g-l*d,_=u*d-x;return i?(i[0]=_,i[1]=s,i):[_,s]}return vx}var yx,bF;function c5(){if(bF)return yx;bF=1,yx=e;function t(n,r){var i=n+r,s=i-n,o=i-s,a=r-s,l=n-o,u=l+a;return u?[u,i]:[i]}function e(n,r){var i=n.length|0,s=r.length|0;if(i===1&&s===1)return t(n[0],r[0]);var o=i+s,a=new Array(o),l=0,u=0,c=0,f=Math.abs,h=n[u],d=f(h),p=r[c],g=f(p),x,_;d<g?(_=h,u+=1,u<i&&(h=n[u],d=f(h))):(_=p,c+=1,c<s&&(p=r[c],g=f(p))),u<i&&d<g||c>=s?(x=h,u+=1,u<i&&(h=n[u],d=f(h))):(x=p,c+=1,c<s&&(p=r[c],g=f(p)));for(var m=x+_,v=m-x,b=_-v,w=b,A=m,E,S,C,M,D;u<i&&c<s;)d<g?(x=h,u+=1,u<i&&(h=n[u],d=f(h))):(x=p,c+=1,c<s&&(p=r[c],g=f(p))),_=w,m=x+_,v=m-x,b=_-v,b&&(a[l++]=b),E=A+m,S=E-A,C=E-S,M=m-S,D=A-C,w=D+M,A=E;for(;u<i;)x=h,_=w,m=x+_,v=m-x,b=_-v,b&&(a[l++]=b),E=A+m,S=E-A,C=E-S,M=m-S,D=A-C,w=D+M,A=E,u+=1,u<i&&(h=n[u]);for(;c<s;)x=p,_=w,m=x+_,v=m-x,b=_-v,b&&(a[l++]=b),E=A+m,S=E-A,C=E-S,M=m-S,D=A-C,w=D+M,A=E,c+=1,c<s&&(p=r[c]);return w&&(a[l++]=w),A&&(a[l++]=A),l||(a[l++]=0),a.length=l,a}return yx}var _x,xF;function zee(){if(xF)return _x;xF=1,_x=t;function t(e,n,r){var i=e+n,s=i-e,o=i-s,a=n-s,l=e-o;return r?(r[0]=l+a,r[1]=i,r):[l+a,i]}return _x}var wx,SF;function f5(){if(SF)return wx;SF=1;var t=XM(),e=zee();wx=n;function n(r,i){var s=r.length;if(s===1){var o=t(r[0],i);return o[0]?o:[o[1]]}var a=new Array(2*s),l=[.1,.1],u=[.1,.1],c=0;t(r[0],i,l),l[0]&&(a[c++]=l[0]);for(var f=1;f<s;++f){t(r[f],i,u);var h=l[1];e(h,u[0],l),l[0]&&(a[c++]=l[0]);var d=u[1],p=l[1],g=d+p,x=g-d,_=p-x;l[1]=g,_&&(a[c++]=_)}return l[1]&&(a[c++]=l[1]),c===0&&(a[c++]=0),a.length=c,a}return wx}var bx,AF;function Gee(){if(AF)return bx;AF=1,bx=e;function t(n,r){var i=n+r,s=i-n,o=i-s,a=r-s,l=n-o,u=l+a;return u?[u,i]:[i]}function e(n,r){var i=n.length|0,s=r.length|0;if(i===1&&s===1)return t(n[0],-r[0]);var o=i+s,a=new Array(o),l=0,u=0,c=0,f=Math.abs,h=n[u],d=f(h),p=-r[c],g=f(p),x,_;d<g?(_=h,u+=1,u<i&&(h=n[u],d=f(h))):(_=p,c+=1,c<s&&(p=-r[c],g=f(p))),u<i&&d<g||c>=s?(x=h,u+=1,u<i&&(h=n[u],d=f(h))):(x=p,c+=1,c<s&&(p=-r[c],g=f(p)));for(var m=x+_,v=m-x,b=_-v,w=b,A=m,E,S,C,M,D;u<i&&c<s;)d<g?(x=h,u+=1,u<i&&(h=n[u],d=f(h))):(x=p,c+=1,c<s&&(p=-r[c],g=f(p))),_=w,m=x+_,v=m-x,b=_-v,b&&(a[l++]=b),E=A+m,S=E-A,C=E-S,M=m-S,D=A-C,w=D+M,A=E;for(;u<i;)x=h,_=w,m=x+_,v=m-x,b=_-v,b&&(a[l++]=b),E=A+m,S=E-A,C=E-S,M=m-S,D=A-C,w=D+M,A=E,u+=1,u<i&&(h=n[u]);for(;c<s;)x=p,_=w,m=x+_,v=m-x,b=_-v,b&&(a[l++]=b),E=A+m,S=E-A,C=E-S,M=m-S,D=A-C,w=D+M,A=E,c+=1,c<s&&(p=-r[c]);return w&&(a[l++]=w),A&&(a[l++]=A),l||(a[l++]=0),a.length=l,a}return bx}var EF;function H_(){return EF||(EF=1,function(t){var e=XM(),n=c5(),r=f5(),i=Gee(),s=5,o=11102230246251565e-32,a=(3+16*o)*o,l=(7+56*o)*o;function u(v,b,w,A){return function(S,C,M){var D=v(v(b(C[1],M[0]),b(-M[1],C[0])),v(b(S[1],C[0]),b(-C[1],S[0]))),T=v(b(S[1],M[0]),b(-M[1],S[0])),L=A(D,T);return L[L.length-1]}}function c(v,b,w,A){return function(S,C,M,D){var T=v(v(w(v(b(M[1],D[0]),b(-D[1],M[0])),C[2]),v(w(v(b(C[1],D[0]),b(-D[1],C[0])),-M[2]),w(v(b(C[1],M[0]),b(-M[1],C[0])),D[2]))),v(w(v(b(C[1],D[0]),b(-D[1],C[0])),S[2]),v(w(v(b(S[1],D[0]),b(-D[1],S[0])),-C[2]),w(v(b(S[1],C[0]),b(-C[1],S[0])),D[2])))),L=v(v(w(v(b(M[1],D[0]),b(-D[1],M[0])),S[2]),v(w(v(b(S[1],D[0]),b(-D[1],S[0])),-M[2]),w(v(b(S[1],M[0]),b(-M[1],S[0])),D[2]))),v(w(v(b(C[1],M[0]),b(-M[1],C[0])),S[2]),v(w(v(b(S[1],M[0]),b(-M[1],S[0])),-C[2]),w(v(b(S[1],C[0]),b(-C[1],S[0])),M[2])))),F=A(T,L);return F[F.length-1]}}function f(v,b,w,A){return function(S,C,M,D,T){var L=v(v(v(w(v(w(v(b(D[1],T[0]),b(-T[1],D[0])),M[2]),v(w(v(b(M[1],T[0]),b(-T[1],M[0])),-D[2]),w(v(b(M[1],D[0]),b(-D[1],M[0])),T[2]))),C[3]),v(w(v(w(v(b(D[1],T[0]),b(-T[1],D[0])),C[2]),v(w(v(b(C[1],T[0]),b(-T[1],C[0])),-D[2]),w(v(b(C[1],D[0]),b(-D[1],C[0])),T[2]))),-M[3]),w(v(w(v(b(M[1],T[0]),b(-T[1],M[0])),C[2]),v(w(v(b(C[1],T[0]),b(-T[1],C[0])),-M[2]),w(v(b(C[1],M[0]),b(-M[1],C[0])),T[2]))),D[3]))),v(w(v(w(v(b(M[1],D[0]),b(-D[1],M[0])),C[2]),v(w(v(b(C[1],D[0]),b(-D[1],C[0])),-M[2]),w(v(b(C[1],M[0]),b(-M[1],C[0])),D[2]))),-T[3]),v(w(v(w(v(b(D[1],T[0]),b(-T[1],D[0])),C[2]),v(w(v(b(C[1],T[0]),b(-T[1],C[0])),-D[2]),w(v(b(C[1],D[0]),b(-D[1],C[0])),T[2]))),S[3]),w(v(w(v(b(D[1],T[0]),b(-T[1],D[0])),S[2]),v(w(v(b(S[1],T[0]),b(-T[1],S[0])),-D[2]),w(v(b(S[1],D[0]),b(-D[1],S[0])),T[2]))),-C[3])))),v(v(w(v(w(v(b(C[1],T[0]),b(-T[1],C[0])),S[2]),v(w(v(b(S[1],T[0]),b(-T[1],S[0])),-C[2]),w(v(b(S[1],C[0]),b(-C[1],S[0])),T[2]))),D[3]),v(w(v(w(v(b(C[1],D[0]),b(-D[1],C[0])),S[2]),v(w(v(b(S[1],D[0]),b(-D[1],S[0])),-C[2]),w(v(b(S[1],C[0]),b(-C[1],S[0])),D[2]))),-T[3]),w(v(w(v(b(M[1],D[0]),b(-D[1],M[0])),C[2]),v(w(v(b(C[1],D[0]),b(-D[1],C[0])),-M[2]),w(v(b(C[1],M[0]),b(-M[1],C[0])),D[2]))),S[3]))),v(w(v(w(v(b(M[1],D[0]),b(-D[1],M[0])),S[2]),v(w(v(b(S[1],D[0]),b(-D[1],S[0])),-M[2]),w(v(b(S[1],M[0]),b(-M[1],S[0])),D[2]))),-C[3]),v(w(v(w(v(b(C[1],D[0]),b(-D[1],C[0])),S[2]),v(w(v(b(S[1],D[0]),b(-D[1],S[0])),-C[2]),w(v(b(S[1],C[0]),b(-C[1],S[0])),D[2]))),M[3]),w(v(w(v(b(C[1],M[0]),b(-M[1],C[0])),S[2]),v(w(v(b(S[1],M[0]),b(-M[1],S[0])),-C[2]),w(v(b(S[1],C[0]),b(-C[1],S[0])),M[2]))),-D[3]))))),F=v(v(v(w(v(w(v(b(D[1],T[0]),b(-T[1],D[0])),M[2]),v(w(v(b(M[1],T[0]),b(-T[1],M[0])),-D[2]),w(v(b(M[1],D[0]),b(-D[1],M[0])),T[2]))),S[3]),w(v(w(v(b(D[1],T[0]),b(-T[1],D[0])),S[2]),v(w(v(b(S[1],T[0]),b(-T[1],S[0])),-D[2]),w(v(b(S[1],D[0]),b(-D[1],S[0])),T[2]))),-M[3])),v(w(v(w(v(b(M[1],T[0]),b(-T[1],M[0])),S[2]),v(w(v(b(S[1],T[0]),b(-T[1],S[0])),-M[2]),w(v(b(S[1],M[0]),b(-M[1],S[0])),T[2]))),D[3]),w(v(w(v(b(M[1],D[0]),b(-D[1],M[0])),S[2]),v(w(v(b(S[1],D[0]),b(-D[1],S[0])),-M[2]),w(v(b(S[1],M[0]),b(-M[1],S[0])),D[2]))),-T[3]))),v(v(w(v(w(v(b(M[1],T[0]),b(-T[1],M[0])),C[2]),v(w(v(b(C[1],T[0]),b(-T[1],C[0])),-M[2]),w(v(b(C[1],M[0]),b(-M[1],C[0])),T[2]))),S[3]),w(v(w(v(b(M[1],T[0]),b(-T[1],M[0])),S[2]),v(w(v(b(S[1],T[0]),b(-T[1],S[0])),-M[2]),w(v(b(S[1],M[0]),b(-M[1],S[0])),T[2]))),-C[3])),v(w(v(w(v(b(C[1],T[0]),b(-T[1],C[0])),S[2]),v(w(v(b(S[1],T[0]),b(-T[1],S[0])),-C[2]),w(v(b(S[1],C[0]),b(-C[1],S[0])),T[2]))),M[3]),w(v(w(v(b(C[1],M[0]),b(-M[1],C[0])),S[2]),v(w(v(b(S[1],M[0]),b(-M[1],S[0])),-C[2]),w(v(b(S[1],C[0]),b(-C[1],S[0])),M[2]))),-T[3])))),k=A(L,F);return k[k.length-1]}}function h(v){var b=v===3?u:v===4?c:f;return b(n,e,r,i)}var d=h(3),p=h(4),g=[function(){return 0},function(){return 0},function(b,w){return w[0]-b[0]},function(b,w,A){var E=(b[1]-A[1])*(w[0]-A[0]),S=(b[0]-A[0])*(w[1]-A[1]),C=E-S,M;if(E>0){if(S<=0)return C;M=E+S}else if(E<0){if(S>=0)return C;M=-(E+S)}else return C;var D=a*M;return C>=D||C<=-D?C:d(b,w,A)},function(b,w,A,E){var S=b[0]-E[0],C=w[0]-E[0],M=A[0]-E[0],D=b[1]-E[1],T=w[1]-E[1],L=A[1]-E[1],F=b[2]-E[2],k=w[2]-E[2],I=A[2]-E[2],O=C*L,$=M*T,N=M*D,W=S*L,H=S*T,K=C*D,ee=F*(O-$)+k*(N-W)+I*(H-K),Z=(Math.abs(O)+Math.abs($))*Math.abs(F)+(Math.abs(N)+Math.abs(W))*Math.abs(k)+(Math.abs(H)+Math.abs(K))*Math.abs(I),J=l*Z;return ee>J||-ee>J?ee:p(b,w,A,E)}];function x(v){var b=g[v.length];return b||(b=g[v.length]=h(v.length)),b.apply(void 0,v)}function _(v,b,w,A,E,S,C){return function(D,T,L,F,k){switch(arguments.length){case 0:case 1:return 0;case 2:return A(D,T);case 3:return E(D,T,L);case 4:return S(D,T,L,F);case 5:return C(D,T,L,F,k)}for(var I=new Array(arguments.length),O=0;O<arguments.length;++O)I[O]=arguments[O];return v(I)}}function m(){for(;g.length<=s;)g.push(h(g.length));t.exports=_.apply(void 0,[x].concat(g));for(var v=0;v<=s;++v)t.exports[v]=g[v]}m()}(mx)),mx.exports}var xx,CF;function Uee(){if(CF)return xx;CF=1;function t(o,a,l,u,c){for(var f=c+1;u<=c;){var h=u+c>>>1,d=o[h],p=l!==void 0?l(d,a):d-a;p>=0?(f=h,c=h-1):u=h+1}return f}function e(o,a,l,u,c){for(var f=c+1;u<=c;){var h=u+c>>>1,d=o[h],p=l!==void 0?l(d,a):d-a;p>0?(f=h,c=h-1):u=h+1}return f}function n(o,a,l,u,c){for(var f=u-1;u<=c;){var h=u+c>>>1,d=o[h],p=l!==void 0?l(d,a):d-a;p<0?(f=h,u=h+1):c=h-1}return f}function r(o,a,l,u,c){for(var f=u-1;u<=c;){var h=u+c>>>1,d=o[h],p=l!==void 0?l(d,a):d-a;p<=0?(f=h,u=h+1):c=h-1}return f}function i(o,a,l,u,c){for(;u<=c;){var f=u+c>>>1,h=o[f],d=l!==void 0?l(h,a):h-a;if(d===0)return f;d<=0?u=f+1:c=f-1}return-1}function s(o,a,l,u,c,f){return typeof l=="function"?f(o,a,l,u===void 0?0:u|0,c===void 0?o.length-1:c|0):f(o,a,void 0,l===void 0?0:l|0,u===void 0?o.length-1:u|0)}return xx={ge:function(o,a,l,u,c){return s(o,a,l,u,c,t)},gt:function(o,a,l,u,c){return s(o,a,l,u,c,e)},lt:function(o,a,l,u,c){return s(o,a,l,u,c,n)},le:function(o,a,l,u,c){return s(o,a,l,u,c,r)},eq:function(o,a,l,u,c){return s(o,a,l,u,c,i)}},xx}var Sx,MF;function Hee(){if(MF)return Sx;MF=1,Sx=x;var t=0,e=1;function n(_,m,v,b,w,A){this._color=_,this.key=m,this.value=v,this.left=b,this.right=w,this._count=A}function r(_){return new n(_._color,_.key,_.value,_.left,_.right,_._count)}function i(_,m){return new n(_,m.key,m.value,m.left,m.right,m._count)}function s(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function o(_,m){this._compare=_,this.root=m}var a=o.prototype;Object.defineProperty(a,"keys",{get:function(){var _=[];return this.forEach(function(m,v){_.push(m)}),_}}),Object.defineProperty(a,"values",{get:function(){var _=[];return this.forEach(function(m,v){_.push(v)}),_}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(_,m){for(var v=this._compare,b=this.root,w=[],A=[];b;){var E=v(_,b.key);w.push(b),A.push(E),E<=0?b=b.left:b=b.right}w.push(new n(t,_,m,null,null,1));for(var S=w.length-2;S>=0;--S){var b=w[S];A[S]<=0?w[S]=new n(b._color,b.key,b.value,w[S+1],b.right,b._count+1):w[S]=new n(b._color,b.key,b.value,b.left,w[S+1],b._count+1)}for(var S=w.length-1;S>1;--S){var C=w[S-1],b=w[S];if(C._color===e||b._color===e)break;var M=w[S-2];if(M.left===C)if(C.left===b){var D=M.right;if(D&&D._color===t)C._color=e,M.right=i(e,D),M._color=t,S-=1;else{if(M._color=t,M.left=C.right,C._color=e,C.right=M,w[S-2]=C,w[S-1]=b,s(M),s(C),S>=3){var T=w[S-3];T.left===M?T.left=C:T.right=C}break}}else{var D=M.right;if(D&&D._color===t)C._color=e,M.right=i(e,D),M._color=t,S-=1;else{if(C.right=b.left,M._color=t,M.left=b.right,b._color=e,b.left=C,b.right=M,w[S-2]=b,w[S-1]=C,s(M),s(C),s(b),S>=3){var T=w[S-3];T.left===M?T.left=b:T.right=b}break}}else if(C.right===b){var D=M.left;if(D&&D._color===t)C._color=e,M.left=i(e,D),M._color=t,S-=1;else{if(M._color=t,M.right=C.left,C._color=e,C.left=M,w[S-2]=C,w[S-1]=b,s(M),s(C),S>=3){var T=w[S-3];T.right===M?T.right=C:T.left=C}break}}else{var D=M.left;if(D&&D._color===t)C._color=e,M.left=i(e,D),M._color=t,S-=1;else{if(C.left=b.right,M._color=t,M.right=b.left,b._color=e,b.right=C,b.left=M,w[S-2]=b,w[S-1]=C,s(M),s(C),s(b),S>=3){var T=w[S-3];T.right===M?T.right=b:T.left=b}break}}}return w[0]._color=e,new o(v,w[0])};function l(_,m){if(m.left){var v=l(_,m.left);if(v)return v}var v=_(m.key,m.value);if(v)return v;if(m.right)return l(_,m.right)}function u(_,m,v,b){var w=m(_,b.key);if(w<=0){if(b.left){var A=u(_,m,v,b.left);if(A)return A}var A=v(b.key,b.value);if(A)return A}if(b.right)return u(_,m,v,b.right)}function c(_,m,v,b,w){var A=v(_,w.key),E=v(m,w.key),S;if(A<=0&&(w.left&&(S=c(_,m,v,b,w.left),S)||E>0&&(S=b(w.key,w.value),S)))return S;if(E>0&&w.right)return c(_,m,v,b,w.right)}a.forEach=function(m,v,b){if(!!this.root)switch(arguments.length){case 1:return l(m,this.root);case 2:return u(v,this._compare,m,this.root);case 3:return this._compare(v,b)>=0?void 0:c(v,b,this._compare,m,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var _=[],m=this.root;m;)_.push(m),m=m.left;return new f(this,_)}}),Object.defineProperty(a,"end",{get:function(){for(var _=[],m=this.root;m;)_.push(m),m=m.right;return new f(this,_)}}),a.at=function(_){if(_<0)return new f(this,[]);for(var m=this.root,v=[];;){if(v.push(m),m.left){if(_<m.left._count){m=m.left;continue}_-=m.left._count}if(!_)return new f(this,v);if(_-=1,m.right){if(_>=m.right._count)break;m=m.right}else break}return new f(this,[])},a.ge=function(_){for(var m=this._compare,v=this.root,b=[],w=0;v;){var A=m(_,v.key);b.push(v),A<=0&&(w=b.length),A<=0?v=v.left:v=v.right}return b.length=w,new f(this,b)},a.gt=function(_){for(var m=this._compare,v=this.root,b=[],w=0;v;){var A=m(_,v.key);b.push(v),A<0&&(w=b.length),A<0?v=v.left:v=v.right}return b.length=w,new f(this,b)},a.lt=function(_){for(var m=this._compare,v=this.root,b=[],w=0;v;){var A=m(_,v.key);b.push(v),A>0&&(w=b.length),A<=0?v=v.left:v=v.right}return b.length=w,new f(this,b)},a.le=function(_){for(var m=this._compare,v=this.root,b=[],w=0;v;){var A=m(_,v.key);b.push(v),A>=0&&(w=b.length),A<0?v=v.left:v=v.right}return b.length=w,new f(this,b)},a.find=function(_){for(var m=this._compare,v=this.root,b=[];v;){var w=m(_,v.key);if(b.push(v),w===0)return new f(this,b);w<=0?v=v.left:v=v.right}return new f(this,[])},a.remove=function(_){var m=this.find(_);return m?m.remove():this},a.get=function(_){for(var m=this._compare,v=this.root;v;){var b=m(_,v.key);if(b===0)return v.value;b<=0?v=v.left:v=v.right}};function f(_,m){this.tree=_,this._stack=m}var h=f.prototype;Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new f(this.tree,this._stack.slice())};function d(_,m){_.key=m.key,_.value=m.value,_.left=m.left,_.right=m.right,_._color=m._color,_._count=m._count}function p(_){for(var m,v,b,w,A=_.length-1;A>=0;--A){if(m=_[A],A===0){m._color=e;return}if(v=_[A-1],v.left===m){if(b=v.right,b.right&&b.right._color===t){if(b=v.right=r(b),w=b.right=r(b.right),v.right=b.left,b.left=v,b.right=w,b._color=v._color,m._color=e,v._color=e,w._color=e,s(v),s(b),A>1){var E=_[A-2];E.left===v?E.left=b:E.right=b}_[A-1]=b;return}else if(b.left&&b.left._color===t){if(b=v.right=r(b),w=b.left=r(b.left),v.right=w.left,b.left=w.right,w.left=v,w.right=b,w._color=v._color,v._color=e,b._color=e,m._color=e,s(v),s(b),s(w),A>1){var E=_[A-2];E.left===v?E.left=w:E.right=w}_[A-1]=w;return}if(b._color===e)if(v._color===t){v._color=e,v.right=i(t,b);return}else{v.right=i(t,b);continue}else{if(b=r(b),v.right=b.left,b.left=v,b._color=v._color,v._color=t,s(v),s(b),A>1){var E=_[A-2];E.left===v?E.left=b:E.right=b}_[A-1]=b,_[A]=v,A+1<_.length?_[A+1]=m:_.push(m),A=A+2}}else{if(b=v.left,b.left&&b.left._color===t){if(b=v.left=r(b),w=b.left=r(b.left),v.left=b.right,b.right=v,b.left=w,b._color=v._color,m._color=e,v._color=e,w._color=e,s(v),s(b),A>1){var E=_[A-2];E.right===v?E.right=b:E.left=b}_[A-1]=b;return}else if(b.right&&b.right._color===t){if(b=v.left=r(b),w=b.right=r(b.right),v.left=w.right,b.right=w.left,w.right=v,w.left=b,w._color=v._color,v._color=e,b._color=e,m._color=e,s(v),s(b),s(w),A>1){var E=_[A-2];E.right===v?E.right=w:E.left=w}_[A-1]=w;return}if(b._color===e)if(v._color===t){v._color=e,v.left=i(t,b);return}else{v.left=i(t,b);continue}else{if(b=r(b),v.left=b.right,b.right=v,b._color=v._color,v._color=t,s(v),s(b),A>1){var E=_[A-2];E.right===v?E.right=b:E.left=b}_[A-1]=b,_[A]=v,A+1<_.length?_[A+1]=m:_.push(m),A=A+2}}}}h.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var m=new Array(_.length),v=_[_.length-1];m[m.length-1]=new n(v._color,v.key,v.value,v.left,v.right,v._count);for(var b=_.length-2;b>=0;--b){var v=_[b];v.left===_[b+1]?m[b]=new n(v._color,v.key,v.value,m[b+1],v.right,v._count):m[b]=new n(v._color,v.key,v.value,v.left,m[b+1],v._count)}if(v=m[m.length-1],v.left&&v.right){var w=m.length;for(v=v.left;v.right;)m.push(v),v=v.right;var A=m[w-1];m.push(new n(v._color,A.key,A.value,v.left,v.right,v._count)),m[w-1].key=v.key,m[w-1].value=v.value;for(var b=m.length-2;b>=w;--b)v=m[b],m[b]=new n(v._color,v.key,v.value,v.left,m[b+1],v._count);m[w-1].left=m[w]}if(v=m[m.length-1],v._color===t){var E=m[m.length-2];E.left===v?E.left=null:E.right===v&&(E.right=null),m.pop();for(var b=0;b<m.length;++b)m[b]._count--;return new o(this.tree._compare,m[0])}else if(v.left||v.right){v.left?d(v,v.left):v.right&&d(v,v.right),v._color=e;for(var b=0;b<m.length-1;++b)m[b]._count--;return new o(this.tree._compare,m[0])}else{if(m.length===1)return new o(this.tree._compare,null);for(var b=0;b<m.length;++b)m[b]._count--;var S=m[m.length-2];p(m),S.left===v?S.left=null:S.right=null}return new o(this.tree._compare,m[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var _=0,m=this._stack;if(m.length===0){var v=this.tree.root;return v?v._count:0}else m[m.length-1].left&&(_=m[m.length-1].left._count);for(var b=m.length-2;b>=0;--b)m[b+1]===m[b].right&&(++_,m[b].left&&(_+=m[b].left._count));return _},enumerable:!0}),h.next=function(){var _=this._stack;if(_.length!==0){var m=_[_.length-1];if(m.right)for(m=m.right;m;)_.push(m),m=m.left;else for(_.pop();_.length>0&&_[_.length-1].right===m;)m=_[_.length-1],_.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var m=_.length-1;m>0;--m)if(_[m-1].left===_[m])return!0;return!1}}),h.update=function(_){var m=this._stack;if(m.length===0)throw new Error("Can't update empty node!");var v=new Array(m.length),b=m[m.length-1];v[v.length-1]=new n(b._color,b.key,_,b.left,b.right,b._count);for(var w=m.length-2;w>=0;--w)b=m[w],b.left===m[w+1]?v[w]=new n(b._color,b.key,b.value,v[w+1],b.right,b._count):v[w]=new n(b._color,b.key,b.value,b.left,v[w+1],b._count);return new o(this.tree._compare,v[0])},h.prev=function(){var _=this._stack;if(_.length!==0){var m=_[_.length-1];if(m.left)for(m=m.left;m;)_.push(m),m=m.right;else for(_.pop();_.length>0&&_[_.length-1].left===m;)m=_[_.length-1],_.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var m=_.length-1;m>0;--m)if(_[m-1].right===_[m])return!0;return!1}});function g(_,m){return _<m?-1:_>m?1:0}function x(_){return new o(_||g,null)}return Sx}var Ax,DF;function Wee(){if(DF)return Ax;DF=1,Ax=n;var t=H_();function e(r,i){var s,o;if(i[0][0]<i[1][0])s=i[0],o=i[1];else if(i[0][0]>i[1][0])s=i[1],o=i[0];else{var a=Math.min(r[0][1],r[1][1]),l=Math.max(r[0][1],r[1][1]),u=Math.min(i[0][1],i[1][1]),c=Math.max(i[0][1],i[1][1]);return l<u?l-u:a>c?a-c:l-c}var f,h;r[0][1]<r[1][1]?(f=r[0],h=r[1]):(f=r[1],h=r[0]);var d=t(o,s,f);return d||(d=t(o,s,h),d)?d:h-o}function n(r,i){var s,o;if(i[0][0]<i[1][0])s=i[0],o=i[1];else if(i[0][0]>i[1][0])s=i[1],o=i[0];else return e(i,r);var a,l;if(r[0][0]<r[1][0])a=r[0],l=r[1];else if(r[0][0]>r[1][0])a=r[1],l=r[0];else return-e(r,i);var u=t(s,o,l),c=t(s,o,a);if(u<0){if(c<=0)return u}else if(u>0){if(c>=0)return u}else if(c)return c;if(u=t(l,a,o),c=t(l,a,s),u<0){if(c<=0)return u}else if(u>0){if(c>=0)return u}else if(c)return c;return o[0]-l[0]}return Ax}var Ex,TF;function $ee(){if(TF)return Ex;TF=1,Ex=c;var t=Uee(),e=Hee(),n=H_(),r=Wee();function i(f,h,d){this.slabs=f,this.coordinates=h,this.horizontal=d}var s=i.prototype;function o(f,h){return f.y-h}function a(f,h){for(var d=null;f;){var p=f.key,g,x;p[0][0]<p[1][0]?(g=p[0],x=p[1]):(g=p[1],x=p[0]);var _=n(g,x,h);if(_<0)f=f.left;else if(_>0)if(h[0]!==p[1][0])d=f,f=f.right;else{var m=a(f.right,h);if(m)return m;f=f.left}else{if(h[0]!==p[1][0])return f;var m=a(f.right,h);if(m)return m;f=f.left}}return d}s.castUp=function(f){var h=t.le(this.coordinates,f[0]);if(h<0)return-1;this.slabs[h];var d=a(this.slabs[h],f),p=-1;if(d&&(p=d.value),this.coordinates[h]===f[0]){var g=null;if(d&&(g=d.key),h>0){var x=a(this.slabs[h-1],f);x&&(g?r(x.key,g)>0&&(g=x.key,p=x.value):(p=x.value,g=x.key))}var _=this.horizontal[h];if(_.length>0){var m=t.ge(_,f[1],o);if(m<_.length){var v=_[m];if(f[1]===v.y){if(v.closed)return v.index;for(;m<_.length-1&&_[m+1].y===f[1];)if(m=m+1,v=_[m],v.closed)return v.index;if(v.y===f[1]&&!v.start){if(m=m+1,m>=_.length)return p;v=_[m]}}if(v.start)if(g){var b=n(g[0],g[1],[f[0],v.y]);g[0][0]>g[1][0]&&(b=-b),b>0&&(p=v.index)}else p=v.index;else v.y!==f[1]&&(p=v.index)}}}return p};function l(f,h,d,p){this.y=f,this.index=h,this.start=d,this.closed=p}function u(f,h,d,p){this.x=f,this.segment=h,this.create=d,this.index=p}function c(f){for(var h=f.length,d=2*h,p=new Array(d),g=0;g<h;++g){var x=f[g],_=x[0][0]<x[1][0];p[2*g]=new u(x[0][0],x,_,g),p[2*g+1]=new u(x[1][0],x,!_,g)}p.sort(function(C,M){var D=C.x-M.x;return D||(D=C.create-M.create,D)?D:Math.min(C.segment[0][1],C.segment[1][1])-Math.min(M.segment[0][1],M.segment[1][1])});for(var m=e(r),v=[],b=[],w=[],g=0;g<d;){for(var A=p[g].x,E=[];g<d;){var S=p[g];if(S.x!==A)break;g+=1,S.segment[0][0]===S.x&&S.segment[1][0]===S.x?S.create&&(S.segment[0][1]<S.segment[1][1]?(E.push(new l(S.segment[0][1],S.index,!0,!0)),E.push(new l(S.segment[1][1],S.index,!1,!1))):(E.push(new l(S.segment[1][1],S.index,!0,!1)),E.push(new l(S.segment[0][1],S.index,!1,!0)))):S.create?m=m.insert(S.segment,S.index):m=m.remove(S.segment)}v.push(m.root),b.push(A),w.push(E)}return new i(v,b,w)}return Ex}var Cx,PF;function Xee(){if(PF)return Cx;PF=1,Cx=i;var t=H_(),e=$ee();function n(s){return-1}function r(s,o,a,l){function u(c){var f=o.castUp(c);if(f<0)return a;var h=s[f];return l?t(c,h[1],h[0]):t(c,h[0],h[1])}return u}function i(s,o){o=!!o;for(var a=s.length,l=0,u=0;u<a;++u)l+=s[u].length;if(l===0)return n;for(var c=new Array(l),f=0,u=0;u<a;++u)for(var h=s[u],d=h.length,p=d-1,g=0;g<d;p=g++)c[f++]=[h[p],h[g]];var x=e(c),_,m=x.slabs[0];if(m){for(;m.left;)m=m.left;var v=m.key;v[0][0]<v[1][0]?_=-1:_=1}else{var v=c[x.horizontal[0][0].index];v[0][1]<v[1][1]?_=1:_=-1}return o&&(_=-_),r(c,x,_,o)}return Cx}var Mx,LF;function Yee(){if(LF)return Mx;LF=1,Mx=n;var t=[0,0],e=[0,0];function n(r){for(var i=0,s=r[0],o=r.length,a=2;a<o;a++){var l=r[a-1],u=r[a];t[0]=s[0]-u[0],t[1]=s[1]-u[1],e[0]=s[0]-l[0],e[1]=s[1]-l[1],i+=t[0]*e[1]-t[1]*e[0]}return i/2}return Mx}var Dx,FF;function jee(){return FF||(FF=1,Dx=function(e){return e<0?-1:e>0?1:0}),Dx}var Tx,IF;function qee(){if(IF)return Tx;IF=1;var t=$M(),e=Xee(),n=Yee(),r=jee(),i=Math.abs;function s(p){for(var g=p.length,x=new Array(g),_=0;_<g;_++)x[_]=p[_].slice();return x}function o(p,g,x){this.vec=p,this.alpha=g||0,this.intersect=!!x}o.prototype={vec:null,next:null,next:null,prev:null,nextPoly:null,neighbor:null,intersect:null,entry:null,visited:!1,alpha:0,nextNonIntersection:function(){for(var g=this;g&&g.intersect;)g=g.next;return g},last:function(){for(var g=this;g.next&&g.next!==this;)g=g.next;return g},createLoop:function(){var g=this.last();g.prev.next=this,this.prev=g.prev},firstNodeOfInterest:function(){var g=this;if(g)do g=g.next;while(g!==this&&(!g.intersect||g.intersect&&g.visited));return g},insertBetween:function(g,x){for(var _=g;_!==x&&_.alpha<this.alpha;)_=_.next;this.next=_,this.prev=_.prev,this.prev&&(this.prev.next=this),this.next.prev=this}};function a(p){for(var g=p.length,x,_,m=0;m<g;m++){var v=p[m];x?(_.next=new o(v),_.next.prev=_,_=_.next):_=x=new o(v)}return x}function l(p,g){var x=p[0]-g[0],_=p[1]-g[1];return Math.sqrt(x*x+_*_)}function u(p){for(var g=p.length-1;g--;){var x=p[g],_=p[g+1];x[0]===_[0]&&x[1]===_[1]&&p.splice(g,1)}return p}function c(p,g){var x,_,m=p.last();m.next=new o(p.vec,m),m.next.prev=m;var v=g.last();v.next=new o(g.vec,v),v.next.prev=v;var b=!1;for(x=p;x.next;x=x.next)if(!x.intersect){for(_=g;_.next;_=_.next)if(!_.intersect){var w=x.vec,A=x.next.nextNonIntersection().vec,E=_.vec,S=_.next.nextNonIntersection().vec,C=t(w,A,E,S);if(C&&C!==!0){b=!0;var M=new o(C,l(w,C)/l(w,A),!0),D=new o(C,l(E,C)/l(E,S),!0);M.neighbor=D,D.neighbor=M,M.insertBetween(x,x.next.nextNonIntersection()),D.insertBetween(_,_.next.nextNonIntersection())}}}return b}function f(p,g,x,_,m){var v,b,w=x(p.vec)<0;for(m==="and"&&(w=!w),v=p;v.next;v=v.next)v.intersect&&(v.entry=w,w=!w);var A=_(g.vec)>0;for(m==="or"&&(A=!A),b=g;b.next;b=b.next)b.intersect&&(b.entry=A,A=!A)}function h(p,g){p.createLoop(),g.createLoop();for(var x,_=[],m;(x=p.firstNodeOfInterest())!==p;){for(m=[];!x.visited;x=x.neighbor){m.push(x.vec);for(var v=x.entry;;)if(x.visited=!0,x=v?x.next:x.prev,x.intersect){x.visited=!0;break}else m.push(x.vec)}_.push(u(m))}return _}function d(p,g,x){var _=a(p),m=a(g),v=e([g]),b=e([p]),w,A=c(_,m);if(A)f(_,m,v,b,x),w=h(_,m);else{var E=v(p[0])<0,S=b(g[0])<0;switch(w=[],x){case"or":!E&&!S?(w.push(s(p)),w.push(s(g))):E?w.push(s(g)):S&&w.push(s(p));break;case"and":if(E)w.push(s(p));else if(S)w.push(s(g));else throw new Error("woops");break;case"not":var C=s(p),M=s(g),D=n(C),T=n(M);r(D)===r(T)&&(S?M.reverse():E&&C.reverse()),w.push(C),i(D)>i(T)?w.push(M):w.unshift(M);break}}return w}return Tx=d,Tx}var Px,kF;function Jee(){if(kF)return Px;kF=1,Px=t;function t(e){for(var n=e.length,r=e[e.length-1],i=n,s=n-2;s>=0;--s){var o=r,a=e[s];r=o+a;var l=r-o,u=a-l;u&&(e[--i]=r,r=u)}for(var c=0,s=i;s<n;++s){var o=e[s],a=r;r=o+a;var l=r-o,u=a-l;u&&(e[c++]=u)}return e[c++]=r,e.length=c,e}return Px}var Lx,RF;function Kee(){if(RF)return Lx;RF=1,Lx=n;var t=H_()[3];function e(r,i,s,o){for(var a=0;a<2;++a){var l=r[a],u=i[a],c=Math.min(l,u),f=Math.max(l,u),h=s[a],d=o[a],p=Math.min(h,d),g=Math.max(h,d);if(g<c||f<p)return!1}return!0}function n(r,i,s,o){var a=t(r,s,o),l=t(i,s,o);if(a>0&&l>0||a<0&&l<0)return!1;var u=t(s,r,i),c=t(o,r,i);return u>0&&c>0||u<0&&c<0?!1:a===0&&l===0&&u===0&&c===0?e(r,i,s,o):!0}return Lx}var Fx,OF;function Zee(){if(OF)return Fx;OF=1,Fx=s;var t=XM(),e=c5(),n=f5(),r=Jee(),i=Kee();function s(o,a,l,u){if(!i(o,a,l,u))return[[0],[0],[0]];var c=e([l[1]],[-u[1]]),f=e([-l[0]],[u[0]]),h=e(e(n(f,o[1]),n(f,-a[1])),e(n(c,o[0]),n(c,-a[0]))),d=e(t(-o[0],a[1]),t(o[1],a[0])),p=e(t(-l[0],u[1]),t(l[1],u[0])),g=e(e(n(p,o[0]),n(p,-a[0])),e(n(d,-l[0]),n(d,u[0]))),x=e(e(n(p,o[1]),n(p,-a[1])),e(n(d,-l[1]),n(d,u[1])));return[r(g),r(x),r(h)]}return Fx}var Ix,BF;function Qee(){if(BF)return Ix;BF=1,Ix=t;function t(e){var n=0,r=e.length;switch(r){case 1:n=e[0];break;case 2:n=e[0]+e[1];break;case 3:n=e[0]+e[1]+e[2];break;case 4:n=e[0]+e[1]+e[2]+e[3];break;default:for(var i=0;i<r;i++)n+=e[i]}return n}return Ix}var kx,NF;function ete(){if(NF)return kx;NF=1;var t=Zee(),e=Qee();kx=l;function n(u,c){return u[0]===c[0]&&u[1]===c[1]}var r=[0,0],i=[0,0],s=[0,0],o=[0,0];function a(u,c){Array.isArray(u)?(c[0]=u[0],c[1]=u[1]):(c[0]=u.x,c[1]=u.y)}function l(u,c){for(var f={},h=u.length,d=[],p=0;p<h;p++){var g=u[p],x=u[(p+1)%h];a(g,s),a(x,o);for(var _=0;_<h;_++)if(p!==_){var m=u[_],v=u[(_+1)%h];if(a(m,r),a(v,i),!(n(r,s)||n(r,o)||n(i,s)||n(i,o))){var b=t(s,o,r,i),w=b[2];if(!(w.length===1&&!w[0])){var A=e(b[2]);if(b[0]=e(b[0])/A,b[1]=e(b[1])/A,b.pop(),!(n(b,s)||n(b,o)||n(b,r)||n(b,i))){var E=b+"",S=!f[E];S&&(f[E]=!0);var C=S;c&&(C=c(b,p,g,x,_,m,v,S)),C&&d.push(b)}}}}}return d}return kx}(function(t){if(typeof u5<"u")var e=Bee(),n=$M(),r=Vee(),i=qee(),s=ete();var o=Math.PI,a=o*2,l=function(d){return d<0&&(d+=a),d},u=function(d){return Object.prototype.toString.call(d)==="[object Array]"},c=function(d){return typeof d=="function"},f=function(d){return typeof d<"u"};function h(d){if(d instanceof h)return d;if(!(this instanceof h))return new h(d);Array.isArray(d)||(d=d?[d]:[]),this.points=d.map(function(p){if(Array.isArray(p))return e.fromArray(p);if(p instanceof e)return p;if(typeof p.x<"u"&&typeof p.y<"u")return e(p.x,p.y)})}h.prototype={each:function(d){for(var p=0;p<this.points.length&&d.call(this,this.point(p-1),this.point(p),this.point(p+1),p)!==!1;p++);return this},insert:function(d,p){this.points.splice(p,0,d)},point:function(d){var p=d%this.points.length;return p<0&&(p=this.points.length+p),this.points[p]},dedupe:function(d){var p={},g=this.points.filter(function(x){var _=x.x+":"+x.y;if(!p[_])return p[_]=!0,!0});return d?new h(g):(this.points=g,this)},remove:function(d){return typeof d=="number"?this.points.splice(d,1):this.points=this.points.filter(function(p){return p!==d}),this},clean:function(d){var p=this.point(-1),g=this.points.filter(function(x){var _=!1;return p.equal(x)||(_=!0),p=x,_});return d?new h(g):(this.points=g,this)},simplify:function(){var d=function(w){return Math.round(w*1e4)/1e4},p=function(w,A,E){var S=w.x*(A.y-E.y)+A.x*(E.y-w.y)+E.x*(w.y-A.y);return d(S)===0};this.points=this.points.filter(Boolean);for(var g=[],x=0;x<this.points.length;x++){var _=this.point(x-1),m=this.point(x+1),v=this.point(x),b=v.subtract(_,!0).angleTo(v.subtract(m,!0));!p(_,v,m)&&d(b)&&g.push(v)}return this.points=g,this},winding:function(){return this.area()>0},rewind:function(d){d=!!d;var p=this.winding();return p!==d&&this.points.reverse(),this},area:function(){var d=0,p=this.point(0);return this.each(function(g,x,_,m){if(!(m<2)){var v=p.subtract(x,!0),b=p.subtract(g,!0);d+=v.x*b.y-v.y*b.x}}),d/2},closestPointTo:function(d){var p=this.points.length,g=1/0,x=null,_=0,m=!1,v;for(v=0;v<p;v++){var b=this.point(v-1),w=this.point(v);if(!b.equal(w)){var A=w.subtract(b,!0),E=d.subtract(b,!0),S=E.dot(A),C=A.dot(A),M=Math.min(Math.max(S/C,0),1),D=A.multiply(M).add(b),T=d.subtract(D,!0).lengthSquared();T<g&&(x=D,_=v,m=M===0||M===1,g=T)}}return x.prev=this.point(_-1),x.next=this.point(_+1),m&&(x.current=this.point(_)),x},center:function(){var d=this.aabb();return e(d.x+d.w/2,d.y+d.h/2)},scale:function(d,p,g){var x=this;g&&(x=this.clone()),p||(p=x.center()),x.each(function(m,v){v.multiply(d)});var _=p.multiply(d,!0).subtract(p);return x.each(function(m,v){v.subtract(_)}),x},containsPoint:function(d){var p=!1;return this.each(function(g,x,_){(g.y<=d.y&&d.y<x.y||x.y<=d.y&&d.y<g.y)&&d.x<(x.x-g.x)*(d.y-g.y)/(x.y-g.y)+g.x&&(p=!p)}),p},containsPolygon:function(d){u(d)&&(d=new h(d));for(var p=0;p<d.points.length;p++)if(!this.containsPoint(d.points[p]))return!1;for(var p=0;p<this.points.length;p++)for(var g=this.line(p),x=0;x<d.points.length;x++){var _=d.line(x),m=n(g[0],g[1],_[0],_[1]);if(m&&m!==!0)return!1}return!0},aabb:function(){if(this.points.length<2)return{x:0,y:0,w:0,h:0};var d,p,g,x,_=this.point(1);return p=d=_.x,g=x=_.y,this.each(function(m,v){v.x>p&&(p=v.x),v.x<d&&(d=v.x),v.y>g&&(g=v.y),v.y<x&&(x=v.y)}),{x:d,y:x,w:p-d,h:g-x}},offset:function(d,p){var g=[];this.rewind(!1).simplify().each(function(v,b,w,A){var E=b.subtract(v,!0).normalize(),S=b.subtract(w,!0).normalize(),C=d/Math.sin(Math.acos(E.dot(S))/2),M=E.add(S,!0).normalize().multiply(C,!0),D=l(E.angleTo(S)),T=E.perpDot(S)<0?b.add(M,!0):b.subtract(M,!0);(D>a*.75||D<a*.25)&&(T.computeSegments=D,b.color="white",b.radius=3),T.point=b,g.push(T)});var x=function(v,b){var w=v.subtract(b,!0),A=e(1,0).angleTo(w),E=e(d,0).rotate(A+Math.PI/2);E.add(b);var S=E.add(w,!0),C=new r(E.x,E.y,S.x,S.y),M=v.add(w,!0);return new r(v.x,v.y,M.x,M.y),C},_=h(g),m=[];return _.each(function(v,b,w,A){var E=n(b,b.point,w,w.point);if(E){var S=_.point(A-2),C=_.point(A+2);x(S.point,v.point);var M=x(v.point,b.point);x(b.point,w.point);var D=x(w.point,C.point),T=M.intersect(D);T.color="yellow",T.point=b.point,m.push(T)}else m.push(b)}),m.length?h(m):_},line:function(d){return[this.point(d),this.point(d+1)]},lines:function(d){var p=0;return this.each(function(g,x,_){d(x,_,p++)}),this},selfIntersections:function(){var d=[];return s(this.points,function(p,g,x,_,m,v,b,w){if(!!w){var A=e.fromArray(p);return d.push(A),A.s=g+x.subtract(A,!0).length()/x.subtract(_,!0).length(),A.b=m+v.subtract(A,!0).length()/v.subtract(b,!0).length(),A.si=g,A.bi=m,!1}}),h(d)},pruneSelfIntersections:function(){var d=this.selfIntersections(),p=function(T,L,F,k){return T>F&&L<k},g=function(T,L,F,k){return T<F&&L>k},x=function(T,L,F,k){return T<F&&F<L&&k>L||F<L&&L<k&&T<F};function _(T,L){this.value=T,this.depth=this.depth,this.children=[]}var m=this.point(0).clone();m.s=0,m.b=this.points.length-1+.99;var v=new _(m),b=v,w=[m];d.each(function(T,L,F){console.log("belongTo:",p(b.s,b.b,L.s,L.b),"contain:",g(b.s,b.b,L.s,L.b),"interfere:",x(b.s,b.b,L.s,L.b)),w.push(L),b=L});var A=[];if(w.length<2)return[this];w.sort(function(T,L){return T.s-L.s});for(var E=0;E<w.length;E+=2){var S=[],C=E<w.length-1?w[E+1]:null;if(C){for(var M=Math.floor(w[E].s);M<=Math.floor(C.s);M++)S.push(this.point(M));S.push(C);for(var M=Math.floor(C.b+1);M<=Math.floor(w[E].b);M++)S.push(this.point(M))}else{S.push(w[E]);for(var D=Math.floor(w[E].s+1);D<=Math.floor(w[E].b);D++)S.push(this.point(D))}A.push(new h(S))}return A},get length(){return this.points.length},clone:function(){var d=[];return this.each(function(p,g){d.push(g.clone())}),new h(d)},rotate:function(d,p,g){p=p||this.center();var x=g?this.clone():this;return x.each(function(_,m){m.subtract(p).rotate(d).add(p)})},translate:function(d,p){var g=p?this.clone():this;return g.each(function(x,_){_.add(d)}),g},equal:function(d){for(var p=d.length;p--;)if(!this.point(p).equal(d.point(p)))return!1;return!0},containsCircle:function(d,p,g){var x=new e(d,p);if(!this.containsPoint(x))return!1;var _=this.closestPointTo(x);if(_.distance(x)>=g)return!0},contains:function(d){if(!d)return!1;if(f(d.radius)&&d.position){var p;return c(d.radius)?p=d.radius():p=d.radius,this.containsCircle(d.position.x,d.position.y,p)}else if(typeof d.points<"u"){var g;return(c(d.containsPolygon)||u(d.points))&&(g=d.points),this.containsPolygon(g)}else{if(f(d.x1)&&f(d.x2)&&f(d.y1)&&f(d.y2))return this.containsPolygon([new e(d.x1,d.y1),new e(d.x2,d.y1),new e(d.x2,d.y2),new e(d.x1,d.y2)]);if(f(d.x)&&f(d.y)){var x,_;return f(d.w)&&f(d.h)&&(x=d.x+d.w,_=d.y+d.h),f(d.width)&&f(d.height)&&(x=d.x+d.width,_=d.y+d.height),this.containsPolygon([new e(d.x,d.y),new e(x,d.y),new e(x,_),new e(d.x,_)])}}return!1},union:function(d){return h(i(this.toArray(),d.toArray(),"or")[0])},cut:function(d){return i(this.toArray(),d.toArray(),"not").map(function(p){return new h(p)})},intersect:function(d){return i(this.toArray(),d.toArray(),"and").map(function(p){return new h(p)})},toArray:function(){for(var d=this.length,p=Array(d),g=0;g<d;g++)p[g]=this.points[g].toArray();return p},toString:function(){return this.points.join(",")}},t.exports&&(t.exports=h),typeof window<"u"&&(window.Polygon=h)})(Oee);const da=new as,ky={map:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_Color.jpg"),roughnessMap:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_Roughness.jpg"),normalMap:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_NormalDX.jpg"),aoMap:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_AmbientOcclusion.jpg"),bumpMap:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_Displacement.jpg")},tte=()=>{for(const e in ky){const n=ky[e];n.outputEncoding=Br,n.anisotropy=vn.capabilities.getMaxAnisotropy(),n.wrapS=Er,n.wrapT=Er,n.repeat.set(.3,.3)}return new Zn({side:_r,bumpScale:1,...ky})},Rx={map:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_Color.jpg"),roughnessMap:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_Roughness.jpg"),normalMap:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_NormalDX.jpg"),aoMap:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_AmbientOcclusion.jpg"),bumpMap:da.load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_Displacement.jpg")},nte=()=>{for(const e in Rx){const n=Rx[e];n.outputEncoding=Br,n.anisotropy=vn.capabilities.getMaxAnisotropy(),n.wrapS=Er,n.wrapT=Er,n.repeat.set(5,5)}return new Zn({side:_r,bumpScale:1,...Rx,transparent:!0,opacity:.7,color:"#2b2b2b"})},rte=new as,Ox={map:rte.load("./own/media/textures/wood.jpg")},ite=()=>{for(const e in Ox){const n=Ox[e];n.outputEncoding=Br,n.anisotropy=vn.capabilities.getMaxAnisotropy(),n.wrapS=Er,n.wrapT=Er,n.repeat.set(.5,.5)}return new Zn({side:_r,bumpScale:1,...Ox})};function YM(t){var e=t.length;if(e<3)return null;for(var n=0,r=0;r<e;r++){var i=t[r][0],s=t[r][1],o=t[(r+1)%e][0],a=t[(r+1)%e][1];n+=(o-i)*(a+s)}return n>0?!0:n<0?!1:null}function ste(t){return YM(t)?t.reverse():t}const ote=new WM,kp=new IM;let Bx=null;const ate=(t,e)=>{Bx&&clearTimeout(Bx),Bx=setTimeout(()=>h5(t,e),5)},h5=(t,e)=>{const n=new dl;for(let h=0;h<e.length;h++){const[d,p]=e[h];h===0?n.moveTo(d,p):n.lineTo(d,p)}const r=e.length>1&&JN(e[0],e[e.length-1]);var i=new dl;if(r&&!we().drawing){var s=ote.data([...e]).padding(De().wallWidth)[0];s&&i.setFromPoints(s.map(h=>new Ie(h[0],h[1])))}const o=we().getLineArrayBuilding[t].floor.floorHeight,a={bevelEnabled:!0,bevelThickness:at(o/2),bevelSegments:1,bevelSize:0,bevelOffset:0,steps:0,depth:0},l=new Fo(n,a);l.rotateX(Math.PI/2);const u={bevelEnabled:!0,bevelThickness:De().wallWidth/4,bevelSegments:1,bevelSize:0,bevelOffset:0,steps:0,depth:0},c=new Fo(i,u);if(c.rotateX(Math.PI/2),nt[t]&&nt[t].geometry)nt[t].geometry.dispose(),nt[t].geometry=l,nt[t].position.y=vr(t)+a.bevelThickness,nt[t].userData.frameBottom.geometry.dispose(),nt[t].userData.frameBottom.geometry=c,nt[t].userData.frameBottom.position.y=vr(t)+u.bevelThickness,nt[t].userData.frameTop.geometry.dispose(),nt[t].userData.frameTop.geometry=c;else{const h=new R_(l);nt[t]=h,h.castShadow=!0,h.receiveShadow=!0,h.position.y=vr(t)+a.bevelThickness,h.userData=PZ({floorLevel:t,type:FZ.box,role:LZ.component,index:t}),_i.add(h);const d=new Fe(c,ite());d.receiveShadow=!0,d.name="frameBottom",d.position.y=vr(t)+u.bevelThickness,h.userData.frameBottom=d,_i.add(d);const p=d.clone();p.material=NA(),p.receiveShadow=!0,p.castShadow=!0,p.name="frameTop",h.userData.frameTop=p,_i.add(p)}nt[t].userData.frameTop.position.y=vr(t+1)-u.bevelThickness*2-De().flatRoofInsetDepth,nt[t].material&&nt[t].material.dispose(),nt[t].material=tte();for(let h=0;h<Object.keys(nt).length;h++)nt[h]&&(nt[h].userData.frameTop.visible=h!==Object.keys(nt).length-1);nt[t].visible=!we().drawing&&De().componentsVisible;const f=!r&&De().componentsVisible;Wae(nt[t],e,f),xee(nt[t],e);for(let h=0;h<nt[t].userData.sections.length;h++){const d=nt[t].userData.sections[h];d.material=Fu(f)}if(nt[t].userData.isShapeComplete=r,nt[t].userData.isClockwise=YM(e),r){const h=Ree();h.visible=we().showRoof,nt[t].userData.roof=h;for(let b=0;b<nt.length;b++){if(we().selectedRoof==="flatRoof"&&b===we().getLineArrayBuilding.length-1){nt[b].userData.frameTop.name="roof";continue}nt[b].userData.frameTop.name="frameTop"}const d=U_(e);nt[t].userData.centroid=new q(d[0],nt[t].position.y,d[1]);let p=new ma(new Ot(0,0,0));for(let b=0;b<nt[t].userData.sections.length;b++){const w=nt[t].userData.sections[b],A=w.userData.windowHoles;if(A)for(let S=0;S<A.length;S++){const C=A[S].userData.holeBrush;p=kp.evaluate(p,C,_g)}const E=w.userData.doorHoles;if(E)for(let S=0;S<E.length;S++){const C=E[S].userData.holeBrush;p=kp.evaluate(p,C,_g)}}(we().showRoof||t===Object.keys(nt).length-1)&&h.userData.subtractor&&(p=kp.evaluate(p,h.userData.subtractor,_g)),p.material=new Zn({roughness:.25,color:16717636}),p.material.color.set(16717636).convertSRGBToLinear(),p=new ma(p.geometry,p.material),p.updateMatrixWorld();const g=nt[t],x=g.material;let _=Kc(g);const m=new Fo(i,{...a,bevelThickness:a.bevelThickness+jr});m.rotateX(Math.PI/2);const v=new Fe(m,new gs({color:"red"}));v.position.copy(g.position),_=kp.evaluate(_,Kc(v),g1),kp.evaluate(_,p,g1,g),g.position.set(0,0,0),g.material=x}},Ms=()=>{const t=Ye(we().getLineArrayBuilding);for(let e=0;e<t.length;e++){const n=t[e];h5(e,sf(n.floor.lineArray))}if(t.length<Object.keys(nt).length)for(let e=t.length;e<Object.keys(nt).length;e++){const n=nt[e];lte(n),delete nt[e]}d5()},lte=t=>{for(let e=t.userData.sections.length-1;e>=0;e--){const n=t.userData.sections[e];TV(n)}dte(t),_i.remove(t),t.geometry.dispose(),t.material.dispose()},ute=t=>{for(let e=0;e<Object.keys(nt).length;e++){const n=nt[e];n.visible=t;for(let r=0;r<n.userData.sections.length;r++){const i=n.userData.sections[r];i.visible=t}}},cte=t=>{for(let e=0;e<Object.keys(nt).length;e++){const n=nt[e];n.userData.markers.forEach(r=>{r.userData.label.visible=t});for(let r=0;r<n.userData.sections.length;r++){const i=n.userData.sections[r];i.userData.text&&(i.userData.text.visible=t)}}},fte=t=>{for(let e=0;e<Object.keys(nt).length;e++){const n=nt[e];for(let r=0;r<n.userData.sections.length;r++){const i=n.userData.sections[r];i.userData.facade&&(i.userData.facade.visible=t)}}},hte=t=>{for(let e=0;e<Object.keys(nt).length;e++){const n=nt[e];for(let r=0;r<n.userData.sections.length;r++){const i=n.userData.sections[r];i.userData.subConstruction&&(i.userData.subConstruction.visible=t)}}},d5=()=>{for(let t=0;t<Object.keys(nt).length;t++){const e=nt[t];e.userData.markers.forEach(n=>{n.userData.label.lookAt(qn.position)});for(let n=0;n<e.userData.sections.length;n++){const r=e.userData.sections[n];r.userData.text&&r.userData.text.lookAt(qn.position)}}};function dte(t){for(const e in t.userData)if(Object.hasOwnProperty.call(t.userData,e)){const n=t.userData[e];if(n instanceof Fe||n instanceof Pr)n.parent&&n.parent.remove(n),n.geometry.dispose(),n.material.dispose();else if(n instanceof Array)for(let r=0;r<n.length;r++){const i=n[r];(i instanceof Fe||i instanceof Pr)&&(i.parent&&i.parent.remove(i),i.geometry.dispose(),i.material.dispose())}}}const De=Um("3dStore",{state:()=>({toAddComponentType:null,componentsList:[],selectedComponentsList:[],prevPointerDownObject:null,prevHoveredObject:null,transformControlsMode:"translate",wallWidth:.2,hasUndo:!1,hasRedo:!1,lightingProgress:.42,selectedSection:null,selectedFacadePiece:null,selectedSubConstructionPiece:null,verandarHeight:0,roofThickness:.04,roofBoardHeight:.3,roofBoardPadding:.25,flatRoofInsetDepth:.2,componentsVisible:!0,substructurePieceHeight:.1,facadePieceSpacing:.013,substructurePieceLength:2,facadePieceThickness:.07,facadeVisible:!0,subConstructionVisible:!0,visibleNavOpen:!1,measurementDialogVisible:!1,measurementDialogDistanceValue:0,measurementDialogAngleValue:0,measurementDialogTop:0,measurementDialogLeft:0,showRoof:!1,measurementDialogHover:!1,wallConfigDialogVisible:!1,wallConfigDialogCanDelete:!1,currentWallIndex:0,currentWallHeight:0,currentWallThickness:0,currentWallLength:0}),actions:{setFloorLineArray(t,e){e.length>1&&JN(e[0],e[e.length-1])&&(e=ste(Ye(e)),vu.emit("2dCanvasRenderThingsRightHack")),we().setFloorLineArray(t,e)},addConstructionElementToLineArray(t,e,n,r,i,s){const{elementsLeftOrigin:o,elementsTopOrigin:a}=t.userData,l=new q(n[0],o.y,n[2]).distanceTo(o),u=new q(a.x,n[1],a.z).distanceTo(a),c=ir(l),f=ir(u),h=[[c-i/2,f-s/2],[c+i/2,f-s/2],[c+i/2,f+s/2],[c-i/2,f+s/2],[c-i/2,f-s/2]],d={id:r,points:h};e===null&&(e=we().getLineArrayBuilding[t.userData.componentIndex].floor.wall[t.userData.index].elements.length),we().getLineArrayBuilding[t.userData.componentIndex].floor.wall[t.userData.index].elements[e]?we().getLineArrayBuilding[t.userData.componentIndex].floor.wall[t.userData.index].elements[e]=d:we().getLineArrayBuilding[t.userData.componentIndex].floor.wall[t.userData.index].elements.push(d);const p=we().getLineArrayBuilding[t.userData.componentIndex].floor.wall[t.userData.index].elements;if(sr().lastInsertionDepth)for(let g=0;g<p[e].points.length-1;g++){if(p[e].id==="door"&&g===1)continue;let x,_,m,v,b;const w=Math.sqrt(Math.pow(p[e].points[g+1][0]-p[e].points[g][0],2)+Math.pow(p[e].points[g+1][1]-p[e].points[g][1],2));x=[0,0],_=[w,0],m=[w,sr().insertionDepth],v=[0,sr().insertionDepth],b=[0,0],p[e].insertionDepth.push({insertionDepthDimension:[x,_,m,v,b],startingPoint:0,layingDirection:"horizontal",layingType:"fugenschnitt"})}if(sr().lastFacingDepth){let g;p[e].id==="door"?g=[0,2,3]:g=[0,1,2,3],p[e].facing={facingDepth:sr().facingDepth,facingSides:g}}vu.emit("onElementAdd"),we().setAddConstructionElement(!1),Ms()},undo(){},redo(){},setUndoRedoAvailabilityState(t,e){this.hasUndo=t,this.hasRedo=e},setSelectedSection(t){this.selectedSection=t},resetSelectedSection(){this.selectedSection=null},setTransformControlsMode(t){this.prevPointerDownObject!==null&&(this.prevPointerDownObject.controls.mode=t),this.transformControlsMode=t},setPrevHoveredObject(t){this.prevHoveredObject=t},setPrevPointerDownObject(t){this.prevPointerDownObject=t},setToAddComponentType(t){this.toAddComponentType=t},resetToAddComponentType(){this.toAddComponentType=null},addComponent(t){_i.add(t),this.componentsList=_i.children},clearComponentsList(){_i.clone();for(var t=0;t<_i.children.length;t++){const e=_i.children[t];e.destroyExtras&&e.destroyExtras()}_i.remove(..._i.children),this.componentsList=_i.children},removeComponent(t){t.destroyExtras&&t.destroyExtras(),_i.remove(t),this.componentsList=_i.children},addSelected(t){this.selectedComponentsList.push(t)},clearSelectedList(){this.selectedComponentsList=[]},removeSelected(t){const e=this.selectedComponentsList.indexOf(t);this.selectedComponentsList.splice(e,1)}}}),VF={type:"change"},Nx={type:"start"},Vx={type:"end"};class pte extends bl{constructor(e,n){super(),n===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),n===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=n,this.enabled=!0,this.target=new q,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=10,this.minPolarAngle=1,this.maxPolarAngle=10,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=.1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Ff.ROTATE,MIDDLE:Ff.DOLLY,RIGHT:Ff.PAN},this.touches={ONE:If.ROTATE,TWO:If.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.listenToKeyEvents=function(z){z.addEventListener("keydown",le),this._domElementKeyEvents=z},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(VF),r.update(),s=i.NONE},this.update=function(){const z=new q,te=new In().setFromUnitVectors(e.up,new q(0,1,0)),fe=te.clone().invert(),ne=new q,de=new In,pe=2*Math.PI;return function(){const be=r.object.position;z.copy(be).sub(r.target),z.applyQuaternion(te),a.setFromVector3(z),r.autoRotate&&s===i.NONE&&E(w()),r.enableDamping?(a.theta+=l.theta*r.dampingFactor,a.phi+=l.phi*r.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Me=r.minAzimuthAngle,Ve=r.maxAzimuthAngle;return isFinite(Me)&&isFinite(Ve)&&(Me<-Math.PI?Me+=pe:Me>Math.PI&&(Me-=pe),Ve<-Math.PI?Ve+=pe:Ve>Math.PI&&(Ve-=pe),Me<=Ve?a.theta=Math.max(Me,Math.min(Ve,a.theta)):a.theta=a.theta>(Me+Ve)/2?Math.max(Me,a.theta):Math.min(Ve,a.theta)),a.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,a.phi)),a.makeSafe(),a.radius*=u,a.radius=Math.max(r.minDistance,Math.min(r.maxDistance,a.radius)),r.enableDamping===!0?r.target.addScaledVector(c,r.dampingFactor):r.target.add(c),z.setFromSpherical(a),z.applyQuaternion(fe),be.copy(r.target).add(z),r.object.lookAt(r.target),r.enableDamping===!0?(l.theta*=1-r.dampingFactor,l.phi*=1-r.dampingFactor,c.multiplyScalar(1-r.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),u=1,f||ne.distanceToSquared(r.object.position)>o||8*(1-de.dot(r.object.quaternion))>o?(r.dispatchEvent(VF),ne.copy(r.object.position),de.copy(r.object.quaternion),f=!1,!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",U),r.domElement.removeEventListener("pointerdown",V),r.domElement.removeEventListener("wheel",G),r.domElement.removeEventListener("touchstart",ge),r.domElement.removeEventListener("touchend",ue),r.domElement.removeEventListener("touchmove",ae),r.domElement.ownerDocument.removeEventListener("pointermove",R),r.domElement.ownerDocument.removeEventListener("pointerup",B),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",le)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=i.NONE;const o=1e-6,a=new nL,l=new nL;let u=1;const c=new q;let f=!1;const h=new Ie,d=new Ie,p=new Ie,g=new Ie,x=new Ie,_=new Ie,m=new Ie,v=new Ie,b=new Ie;function w(){return 2*Math.PI/60/60*r.autoRotateSpeed}function A(){return Math.pow(.95,r.zoomSpeed)}function E(z){l.theta-=z}function S(z){l.phi-=z}this.rotateLeft=E,this.rotateUp=S;const C=function(){const z=new q;return function(fe,ne){z.setFromMatrixColumn(ne,0),z.multiplyScalar(-fe),c.add(z)}}(),M=function(){const z=new q;return function(fe,ne){r.screenSpacePanning===!0?z.setFromMatrixColumn(ne,1):(z.setFromMatrixColumn(ne,0),z.crossVectors(r.object.up,z)),z.multiplyScalar(fe),c.add(z)}}(),D=function(){const z=new q;return function(fe,ne){const de=r.domElement;if(r.object.isPerspectiveCamera){const pe=r.object.position;z.copy(pe).sub(r.target);let _e=z.length();_e*=Math.tan(r.object.fov/2*Math.PI/180),C(2*fe*_e/de.clientHeight,r.object.matrix),M(2*ne*_e/de.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(C(fe*(r.object.right-r.object.left)/r.object.zoom/de.clientWidth,r.object.matrix),M(ne*(r.object.top-r.object.bottom)/r.object.zoom/de.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function T(z){r.object.isPerspectiveCamera?u/=z:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*z)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function L(z){r.object.isPerspectiveCamera?u*=z:r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/z)),r.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function F(z){h.set(z.clientX,z.clientY)}function k(z){m.set(z.clientX,z.clientY)}function I(z){g.set(z.clientX,z.clientY)}function O(z){d.set(z.clientX,z.clientY),p.subVectors(d,h).multiplyScalar(r.rotateSpeed);const te=r.domElement;E(2*Math.PI*p.x/te.clientHeight),S(2*Math.PI*p.y/te.clientHeight),h.copy(d),r.update()}function $(z){v.set(z.clientX,z.clientY),b.subVectors(v,m),b.y>0?T(A()):b.y<0&&L(A()),m.copy(v),r.update()}function N(z){x.set(z.clientX,z.clientY),_.subVectors(x,g).multiplyScalar(r.panSpeed),D(_.x,_.y),g.copy(x),r.update()}function W(z){z.deltaY<0?L(A()):z.deltaY>0&&T(A()),r.update()}function H(z){let te=!1;switch(z.code){case r.keys.UP:D(0,r.keyPanSpeed),te=!0;break;case r.keys.BOTTOM:D(0,-r.keyPanSpeed),te=!0;break;case r.keys.LEFT:D(r.keyPanSpeed,0),te=!0;break;case r.keys.RIGHT:D(-r.keyPanSpeed,0),te=!0;break}te&&(z.preventDefault(),r.update())}function K(z){if(z.touches.length==1)h.set(z.touches[0].pageX,z.touches[0].pageY);else{const te=.5*(z.touches[0].pageX+z.touches[1].pageX),fe=.5*(z.touches[0].pageY+z.touches[1].pageY);h.set(te,fe)}}function ee(z){if(z.touches.length==1)g.set(z.touches[0].pageX,z.touches[0].pageY);else{const te=.5*(z.touches[0].pageX+z.touches[1].pageX),fe=.5*(z.touches[0].pageY+z.touches[1].pageY);g.set(te,fe)}}function Z(z){const te=z.touches[0].pageX-z.touches[1].pageX,fe=z.touches[0].pageY-z.touches[1].pageY,ne=Math.sqrt(te*te+fe*fe);m.set(0,ne)}function J(z){r.enableZoom&&Z(z),r.enablePan&&ee(z)}function X(z){r.enableZoom&&Z(z),r.enableRotate&&K(z)}function Q(z){if(z.touches.length==1)d.set(z.touches[0].pageX,z.touches[0].pageY);else{const fe=.5*(z.touches[0].pageX+z.touches[1].pageX),ne=.5*(z.touches[0].pageY+z.touches[1].pageY);d.set(fe,ne)}p.subVectors(d,h).multiplyScalar(r.rotateSpeed);const te=r.domElement;E(2*Math.PI*p.x/te.clientHeight),S(2*Math.PI*p.y/te.clientHeight),h.copy(d)}function oe(z){if(z.touches.length==1)x.set(z.touches[0].pageX,z.touches[0].pageY);else{const te=.5*(z.touches[0].pageX+z.touches[1].pageX),fe=.5*(z.touches[0].pageY+z.touches[1].pageY);x.set(te,fe)}_.subVectors(x,g).multiplyScalar(r.panSpeed),D(_.x,_.y),g.copy(x)}function he(z){const te=z.touches[0].pageX-z.touches[1].pageX,fe=z.touches[0].pageY-z.touches[1].pageY,ne=Math.sqrt(te*te+fe*fe);v.set(0,ne),b.set(0,Math.pow(v.y/m.y,r.zoomSpeed)),T(b.y),m.copy(v)}function ve(z){r.enableZoom&&he(z),r.enablePan&&oe(z)}function ye(z){r.enableZoom&&he(z),r.enableRotate&&Q(z)}function V(z){if(r.enabled!==!1)switch(z.pointerType){case"mouse":case"pen":j(z);break}}function R(z){if(r.enabled!==!1)switch(z.pointerType){case"mouse":case"pen":se(z);break}}function B(z){switch(z.pointerType){case"mouse":case"pen":Y();break}}function j(z){z.preventDefault(),r.domElement.focus?r.domElement.focus():window.focus();let te;switch(z.button){case 0:te=r.mouseButtons.LEFT;break;case 1:te=r.mouseButtons.MIDDLE;break;case 2:te=r.mouseButtons.RIGHT;break;default:te=-1}switch(te){case Ff.DOLLY:if(r.enableZoom===!1)return;k(z),s=i.DOLLY;break;case Ff.ROTATE:if(z.ctrlKey||z.metaKey||z.shiftKey){if(r.enablePan===!1)return;I(z),s=i.PAN}else{if(r.enableRotate===!1)return;F(z),s=i.ROTATE}break;case Ff.PAN:if(z.ctrlKey||z.metaKey||z.shiftKey){if(r.enableRotate===!1)return;F(z),s=i.ROTATE}else{if(r.enablePan===!1)return;I(z),s=i.PAN}break;default:s=i.NONE}s!==i.NONE&&(r.domElement.ownerDocument.addEventListener("pointermove",R),r.domElement.ownerDocument.addEventListener("pointerup",B),r.dispatchEvent(Nx))}function se(z){if(r.enabled!==!1)switch(z.preventDefault(),s){case i.ROTATE:if(r.enableRotate===!1)return;O(z);break;case i.DOLLY:if(r.enableZoom===!1)return;$(z);break;case i.PAN:if(r.enablePan===!1)return;N(z);break}}function Y(z){r.domElement.ownerDocument.removeEventListener("pointermove",R),r.domElement.ownerDocument.removeEventListener("pointerup",B),r.enabled!==!1&&(r.dispatchEvent(Vx),s=i.NONE)}function G(z){r.enabled===!1||r.enableZoom===!1||s!==i.NONE&&s!==i.ROTATE||(z.preventDefault(),r.dispatchEvent(Nx),W(z),r.dispatchEvent(Vx))}function le(z){r.enabled===!1||r.enablePan===!1||H(z)}function ge(z){if(r.enabled!==!1){switch(z.preventDefault(),z.touches.length){case 1:switch(r.touches.ONE){case If.ROTATE:if(r.enableRotate===!1)return;K(z),s=i.TOUCH_ROTATE;break;case If.PAN:if(r.enablePan===!1)return;ee(z),s=i.TOUCH_PAN;break;default:s=i.NONE}break;case 2:switch(r.touches.TWO){case If.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;J(z),s=i.TOUCH_DOLLY_PAN;break;case If.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;X(z),s=i.TOUCH_DOLLY_ROTATE;break;default:s=i.NONE}break;default:s=i.NONE}s!==i.NONE&&r.dispatchEvent(Nx)}}function ae(z){if(r.enabled!==!1)switch(z.preventDefault(),s){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;Q(z),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;oe(z),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;ve(z),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ye(z),r.update();break;default:s=i.NONE}}function ue(z){r.enabled!==!1&&(r.dispatchEvent(Vx),s=i.NONE)}function U(z){r.enabled!==!1&&z.preventDefault()}r.domElement.addEventListener("contextmenu",U),r.domElement.addEventListener("pointerdown",V),r.domElement.addEventListener("wheel",G,{passive:!1}),r.domElement.addEventListener("touchstart",ge,{passive:!1}),r.domElement.addEventListener("touchend",ue),r.domElement.addEventListener("touchmove",ae,{passive:!1}),this.update()}}class gte{constructor(e,n){n=Object.assign({size:90,padding:8,bubbleSizePrimary:8,bubbleSizeSecondary:6,lineWidth:2,fontSize:"12px",fontFamily:"arial",fontWeight:"bold",fontColor:"#222222",className:"obit-controls-gizmo",colors:{x:["#f73c3c","#942424"],y:["#6ccb26","#417a17"],z:["#178cf0","#0e5490"]}},n),this.lock=!1,this.lockX=!1,this.lockY=!1,this.update=()=>{if(!this.lock){s.updateMatrix(),o.extractRotation(s.matrix).invert();for(let F=0,k=h.length;F<k;F++)L(h[F],o);h.sort((F,k)=>F.position.z>k.position.z?1:-1),T(!0)}},this.dispose=()=>{i.removeEventListener("change",this.update),i.removeEventListener("start",()=>this.domElement.classList.add("inactive")),i.removeEventListener("end",()=>this.domElement.classList.remove("inactive")),this.domElement.removeEventListener("pointerdown",b,!1),this.domElement.removeEventListener("pointerenter",A,!1),this.domElement.removeEventListener("pointermove",E,!1),this.domElement.removeEventListener("click",C,!1),window.removeEventListener("pointermove",S,!1),window.removeEventListener("pointerup",w,!1),this.domElement.remove()};const r=this,i=e,s=e.object,o=new st,a=new q,l=new Ie,u=new Ie,c=new Ie,f=new q(n.size/2,n.size/2,0),h=m();let d=null,p=!1,g,x,_;i.addEventListener("change",this.update),i.addEventListener("start",()=>this.domElement.classList.add("inactive")),i.addEventListener("end",()=>this.domElement.classList.remove("inactive"));function m(){const F=n.colors,k=n.lineWidth,I={primary:n.bubbleSizePrimary,secondary:n.bubbleSizeSecondary};return[{axis:"x",direction:new q(1,0,0),size:I.primary,color:F.x,line:k,label:"RIGHT",position:new q(0,0,0)},{axis:"y",direction:new q(0,1,0),size:I.primary,color:F.y,line:k,label:"TOP",position:new q(0,0,0)},{axis:"z",direction:new q(0,0,1),size:I.primary,color:F.z,line:k,label:"FRONT",position:new q(0,0,0)},{axis:"-x",direction:new q(-1,0,0),size:I.secondary,color:F.x,label:"",position:new q(0,0,0)},{axis:"-y",direction:new q(0,-1,0),size:I.secondary,color:F.y,label:"",position:new q(0,0,0)},{axis:"-z",direction:new q(0,0,-1),size:I.secondary,color:F.z,label:"",position:new q(0,0,0)}]}function v(){const F=document.createElement("canvas");return F.width=n.size,F.height=n.size,F.classList.add(n.className),F.addEventListener("pointerdown",b,!1),F.addEventListener("pointerenter",A,!1),F.addEventListener("pointermove",E,!1),F.addEventListener("click",C,!1),g=F.getContext("2d"),F}function b(F){l.set(F.clientX,F.clientY),_=i.enabled,i.enabled=!1,window.addEventListener("pointermove",S,!1),window.addEventListener("pointerup",w,!1)}function w(){setTimeout(()=>p=!1,0),r.domElement.classList.remove("dragging"),i.enabled=_,window.removeEventListener("pointermove",S,!1),window.removeEventListener("pointerup",w,!1)}function A(){x=r.domElement.getBoundingClientRect()}function E(F){if(p||r.lock)return;const k=d;d=null,F&&a.set(F.clientX-x.left,F.clientY-x.top,0);for(let I=0,O=h.length;I<O;I++)a.distanceTo(h[I].position)<h[I].size&&(d=h[I]);k!==d&&T()}function S(F){r.lock||(p||r.domElement.classList.add("dragging"),p=!0,d=null,u.set(F.clientX,F.clientY),c.subVectors(u,l).multiplyScalar(.5),r.lockX||i.rotateLeft(2*Math.PI*c.x/r.domElement.height),r.lockY||i.rotateUp(2*Math.PI*c.y/r.domElement.height),l.copy(u),i.update())}function C(){if(p||!d)return;const F=d.direction.clone(),k=s.position.distanceTo(i.target);F.multiplyScalar(k);const I=400,O=performance.now(),$=1;function N(){const H=performance.now()-O,K=Math.min(H/I,$);if(s.position.lerp(F,K),i.update(),K!==$)return requestAnimationFrame(N);E()}N(),d=null}function M(F,k=10,I="#FF0000"){g.beginPath(),g.arc(F.x,F.y,k,0,2*Math.PI,!1),g.fillStyle=I,g.fill(),g.closePath()}function D(F,k,I=1,O="#FF0000"){g.beginPath(),g.moveTo(F.x,F.y),g.lineTo(k.x,k.y),g.lineWidth=I,g.strokeStyle=O,g.stroke(),g.closePath()}function T(F){F&&g.clearRect(0,0,r.domElement.width,r.domElement.height);for(let k=0,I=h.length;k<I;k++){const O=h[k],$=d===O,N=O.position.z>=-.01?O.color[0]:O.color[1];O.line&&D(f,O.position,O.line,N),M(O.position,O.size,$?"#FFFFFF":N),O.label&&(g.font=[n.fontWeight,n.fontSize,n.fontFamily].join(" "),g.fillStyle=n.fontColor,g.textBaseline="middle",g.textAlign="center",g.fillText(O.label,O.position.x,O.position.y))}}function L(F){const k=F.direction.clone().applyMatrix4(o),I=F.size;F.position.set(k.x*(f.x-I/2-n.padding)+f.x,f.y-k.y*(f.y-I/2-n.padding),k.z)}this.domElement=v(),this.update()}}const mte=new as,vte="./own/media/",yte=()=>{const t=vte+"images/grasslight-small2.jpg",e=mte.load(t);e.wrapS=Er,e.wrapT=Er,e.repeat.set(100,100),e.minFilter=kn,e.magFilter=kn,e.repeat.set(60,60),e.anisotropy=vn.getMaxAnisotropy(),e.encoding=Br;const n=new No(200,200),r=new Zn({map:e,roughness:2,metalness:0,side:_r}),i=new Fe(n,r);return i.receiveShadow=!0,i.rotateX(-Math.PI/2),i};var zF=class{constructor(t,e){Lt(this,"target");Lt(this,"name");Lt(this,"intersected");Lt(this,"wasIntersected",!1);Lt(this,"distance");this.target=t,this.name=e,this.intersected=!1,this.distance=0}},Ki=class{constructor(t,e=null){Lt(this,"type");Lt(this,"cancelBubble");Lt(this,"originalEvent");Lt(this,"coords",new Ie(0,0));Lt(this,"distance",0);Lt(this,"intersected",!1);this.cancelBubble=!1,this.type=t,this.originalEvent=e}stopPropagation(){this.cancelBubble=!0}},_te=class{constructor(t,e,n,r){Lt(this,"renderer");Lt(this,"camera");Lt(this,"domElement");Lt(this,"bindEventsOnBodyElement");Lt(this,"autoAdd");Lt(this,"scene");Lt(this,"mouse");Lt(this,"supportsPointerEvents");Lt(this,"interactiveObjects");Lt(this,"closestObject");Lt(this,"raycaster");Lt(this,"treatTouchEventsAsMouseEvents");Lt(this,"dispose",()=>{this.domElement.removeEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("pointermove",this.onDocumentPointerMove):this.domElement.removeEventListener("pointermove",this.onDocumentPointerMove),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("mousemove",this.onDocumentMouseMove):this.domElement.removeEventListener("mousemove",this.onDocumentMouseMove),this.domElement.removeEventListener("mousedown",this.onMouseDown),this.domElement.removeEventListener("mouseup",this.onMouseUp),this.domElement.removeEventListener("touchstart",this.onTouchStart),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd)});Lt(this,"add",(t,e=[])=>{if(t&&!this.interactiveObjects.find(n=>n.target===t))if(e.length>0)e.forEach(n=>{let r=t.getObjectByName(n);if(r){let i=new zF(r,n);this.interactiveObjects.push(i)}});else{let n=new zF(t,t.name);this.interactiveObjects.push(n)}});Lt(this,"remove",(t,e=[])=>{!t||(e.length>0?e.forEach(n=>{let r=t.getObjectByName(n);r&&(this.interactiveObjects=this.interactiveObjects.filter(i=>i.target!==r))}):this.interactiveObjects=this.interactiveObjects.filter(n=>n.target!==t))});Lt(this,"update",()=>{var r;this.raycaster.setFromCamera(this.mouse,this.camera),this.interactiveObjects.forEach(i=>{i.target&&this.checkIntersection(i)}),this.interactiveObjects.sort(function(i,s){return i.distance-s.distance});let t=(r=this.interactiveObjects.find(i=>i.intersected))!=null?r:null;if(t!=this.closestObject){if(this.closestObject){let i=new Ki("mouseout");this.dispatch(this.closestObject,i)}if(t){let i=new Ki("mouseover");this.dispatch(t,i)}this.closestObject=t}let e;this.interactiveObjects.forEach(i=>{!i.intersected&&i.wasIntersected&&(e||(e=new Ki("mouseleave")),this.dispatch(i,e))});let n;this.interactiveObjects.forEach(i=>{i.intersected&&!i.wasIntersected&&(n||(n=new Ki("mouseenter")),this.dispatch(i,n))})});Lt(this,"checkIntersection",t=>{let e=this.raycaster.intersectObjects([t.target],!0);if(t.wasIntersected=t.intersected,e.length>0){let n=e[0].distance;e.forEach(r=>{r.distance<n&&(n=r.distance)}),t.intersected=!0,t.distance=n}else t.intersected=!1});Lt(this,"onDocumentMouseMove",t=>{this.mapPositionToPoint(this.mouse,t.clientX,t.clientY);let e=new Ki("mousemove",t);this.interactiveObjects.forEach(n=>{this.dispatch(n,e)})});Lt(this,"onDocumentPointerMove",t=>{this.mapPositionToPoint(this.mouse,t.clientX,t.clientY);let e=new Ki("pointermove",t);this.interactiveObjects.forEach(n=>{this.dispatch(n,e)})});Lt(this,"onTouchMove",t=>{t.touches.length>0&&this.mapPositionToPoint(this.mouse,t.touches[0].clientX,t.touches[0].clientY);let e=new Ki(this.treatTouchEventsAsMouseEvents?"mousemove":"touchmove",t);this.interactiveObjects.forEach(n=>{this.dispatch(n,e)})});Lt(this,"onMouseClick",t=>{this.update();let e=new Ki("click",t);this.interactiveObjects.forEach(n=>{n.intersected&&this.dispatch(n,e)})});Lt(this,"onMouseDown",t=>{this.mapPositionToPoint(this.mouse,t.clientX,t.clientY),this.update();let e=new Ki("mousedown",t);this.interactiveObjects.forEach(n=>{n.intersected&&this.dispatch(n,e)})});Lt(this,"onPointerDown",t=>{this.mapPositionToPoint(this.mouse,t.clientX,t.clientY),this.update();let e=new Ki("pointerdown",t);this.interactiveObjects.forEach(n=>{n.intersected&&this.dispatch(n,e)})});Lt(this,"onTouchStart",t=>{t.touches.length>0&&this.mapPositionToPoint(this.mouse,t.touches[0].clientX,t.touches[0].clientY),this.update();let e=new Ki(this.treatTouchEventsAsMouseEvents?"mousedown":"touchstart",t);this.interactiveObjects.forEach(n=>{n.intersected&&this.dispatch(n,e)})});Lt(this,"onMouseUp",t=>{let e=new Ki("mouseup",t);this.interactiveObjects.forEach(n=>{this.dispatch(n,e)})});Lt(this,"onPointerUp",t=>{let e=new Ki("pointerup",t);this.interactiveObjects.forEach(n=>{this.dispatch(n,e)})});Lt(this,"onTouchEnd",t=>{t.touches.length>0&&this.mapPositionToPoint(this.mouse,t.touches[0].clientX,t.touches[0].clientY),this.update();let e=new Ki(this.treatTouchEventsAsMouseEvents?"mouseup":"touchend",t);this.interactiveObjects.forEach(n=>{this.dispatch(n,e)})});Lt(this,"dispatch",(t,e)=>{t.target&&!e.cancelBubble&&(e.coords=this.mouse,e.distance=t.distance,e.intersected=t.intersected,t.target.dispatchEvent(e))});Lt(this,"mapPositionToPoint",(t,e,n)=>{let r=this.renderer.domElement.getBoundingClientRect();t.x=(e-r.left)/r.width*2-1,t.y=-((n-r.top)/r.height)*2+1});this.renderer=t,this.camera=e,this.domElement=n,this.bindEventsOnBodyElement=r&&typeof r.bindEventsOnBodyElement<"u"?r.bindEventsOnBodyElement:!0,this.scene=r&&typeof r.scene<"u"?r.scene:null,this.scene&&(this.scene.onBeforeRender=()=>{this.autoAdd&&this.scene!==null&&this.scene.traverse(i=>{this.add(i),i.addEventListener("removed",s=>{this.remove(s.target)})}),this.update()}),this.autoAdd=r&&typeof r.autoAdd<"u"?r.autoAdd:!1,this.autoAdd&&this.scene===null&&console.error("Attention: Options.scene needs to be set when using options.autoAdd"),this.mouse=new Ie(-1,1),this.supportsPointerEvents=!!window.PointerEvent,this.interactiveObjects=[],this.closestObject=null,this.raycaster=new I_,n.addEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?n.ownerDocument.addEventListener("pointermove",this.onDocumentPointerMove):n.addEventListener("pointermove",this.onDocumentPointerMove),n.addEventListener("pointerdown",this.onPointerDown),n.addEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?n.ownerDocument.addEventListener("mousemove",this.onDocumentMouseMove):n.addEventListener("mousemove",this.onDocumentMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("touchstart",this.onTouchStart,{passive:!0}),n.addEventListener("touchmove",this.onTouchMove,{passive:!0}),n.addEventListener("touchend",this.onTouchEnd,{passive:!0}),this.treatTouchEventsAsMouseEvents=!0}},p5={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Ku,function(){var n=function(){function r(d){return o.appendChild(d.dom),d}function i(d){for(var p=0;p<o.children.length;p++)o.children[p].style.display=p===d?"block":"none";s=d}var s=0,o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",o.addEventListener("click",function(d){d.preventDefault(),i(++s%o.children.length)},!1);var a=(performance||Date).now(),l=a,u=0,c=r(new n.Panel("FPS","#0ff","#002")),f=r(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=r(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:o,addPanel:r,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){u++;var d=(performance||Date).now();if(f.update(d-a,200),d>l+1e3&&(c.update(1e3*u/(d-l),100),l=d,u=0,h)){var p=performance.memory;h.update(p.usedJSHeapSize/1048576,p.jsHeapSizeLimit/1048576)}return d},update:function(){a=this.end()},domElement:o,setMode:i}};return n.Panel=function(r,i,s){var o=1/0,a=0,l=Math.round,u=l(window.devicePixelRatio||1),c=80*u,f=48*u,h=3*u,d=2*u,p=3*u,g=15*u,x=74*u,_=30*u,m=document.createElement("canvas");m.width=c,m.height=f,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*u+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=s,v.fillRect(0,0,c,f),v.fillStyle=i,v.fillText(r,h,d),v.fillRect(p,g,x,_),v.fillStyle=s,v.globalAlpha=.9,v.fillRect(p,g,x,_),{dom:m,update:function(b,w){o=Math.min(o,b),a=Math.max(a,b),v.fillStyle=s,v.globalAlpha=1,v.fillRect(0,0,c,g),v.fillStyle=i,v.fillText(l(b)+" "+r+" ("+l(o)+"-"+l(a)+")",h,d),v.drawImage(m,p+u,g,x-u,_,p,g,x-u,_),v.fillRect(p+x-u,g,u,_),v.fillStyle=s,v.globalAlpha=.9,v.fillRect(p+x-u,g,u,l((1-b/w)*_))}}},n})})(p5);const wte=p5.exports,VA=new as().load("./own/media/textures/window.png");VA.encoding=Br;const g5=()=>{VA.anisotropy=vn.capabilities.getMaxAnisotropy();const t=new No,e=new AM({map:VA,metalness:.9,roughness:.05,envMapIntensity:.9,clearcoat:1,transparent:!0,transmission:.95,reflectivity:.2,ior:.9,side:_r}),n=new Fe(t,e);return n.name="window",n},GF=.1,bte=t=>{t.userData.windows&&t.userData.windows.forEach(n=>{Rr.removeObject(n),n.geometry.dispose(),n.material.dispose(),Ct.remove(n)}),t.userData.windows=[];const e=t.userData.windowHoles;for(let n=0;n<e.length;n++){const r=e[n];xte(r,t)}};function xte(t,e){const n=g5();n.matrix.copy(t.matrix),n.position.copy(t.position),n.rotation.copy(t.rotation),t.geometry.computeBoundingBox();const r=new q(1,1,1);t.geometry.boundingBox.getSize(r),n.geometry.computeBoundingBox();const i=new q(1,1,1);n.geometry.boundingBox.getSize(i);const s=r.clone().divide(i);s.subScalar(jr),s.z=1,n.scale.copy(s),n.userData.index=t.userData.index,e.userData.windows.push(n);const o=e.userData.points,a=new q(o[0][0],t.position.y,o[0][1]),l=new q(o[1][0],t.position.y,o[1][1]),u=new q(0,vr(e.userData.componentIndex),0),c=new q(0,vr(e.userData.componentIndex+1),0),f=new qr(...mm(a,l,r.x/2+GF)),h=new qr(...mm(u,c,r.y/2+GF)),d=Rr.addObject(n,1);if(d.addEventListener("dragstart",function(p){Wt.enabled=!1,p.object.material.emissive.set(11184810)}),d.addEventListener("dragend",function(p){Wt.enabled=!0,p.object.material.emissive.set(0),e.userData.componentIndex,e.userData.index;const g=n.userData.index,x=[n.position.x,n.position.y,n.position.z];De().addConstructionElementToLineArray(e,g,x,"window",ir(r.x),ir(r.y))}),d.addEventListener("hoveron",function(p){p.object.material.emissive.set(11184810)}),d.addEventListener("hoveroff",function(p){p.object.material.emissive.set(0)}),d.addEventListener("drag",function(p){Wt.enabled=!1,UF(p.object,f,h),Ye(De().selectedSection)instanceof Fe&&(Ye(De().selectedSection).material=iv)}),Ct.add(n),n.userData.dragControls=d,!Ate(n,f,h)){UF(n,f,h);const p=n.userData.index,g=[n.position.x,n.position.y,n.position.z];De().addConstructionElementToLineArray(e,p,g,"window",ir(r.x),ir(r.y))}return n}new Zn({color:11184810,metalness:1,roughness:.1});const Ste=(t,e,n,r,i,s)=>{i.userData.windowHoles&&i.userData.windowHoles.forEach(u=>{u.geometry.dispose(),u.material.dispose(),Ct.remove(u)}),i.userData.windowHoles=[];const o=i.userData.componentIndex,a=i.userData.index,l=Cte(o,a);for(let u=0;u<l.length;u++){const c=l[u],{points:f}=c,h=sf(f),[d,p]=U_(h),g=w1(i.userData.elementsLeftOrigin,i.userData.elementsRightOrigin,d),x=w1(i.userData.elementsTopOrigin,i.userData.elementsBottomOrigin,p),_=new q(g.x,x.y,g.z),{width:m,height:v}=sr().standardWindowValue,b=Ete(_,m,v,i,t,e,n,r);b.userData.index=c.index}};function UF(t,e,n){const r=new q,i=new q;e.closestPointToPoint(t.position,!0,r),n.closestPointToPoint(t.position,!0,i),t.position.set(r.x,i.y,r.z)}function Ate(t,e,n){const r=new q,i=new q;e.closestPointToPoint(t.position,!0,r),n.closestPointToPoint(t.position,!0,i);const s=De().wallWidth/1.5;return Math.abs(r.x-t.position.x)<s&&Math.abs(i.y-t.position.y)<s&&Math.abs(r.z-t.position.z)<s}function Ete(t,e,n,r,i,s,o,a){t instanceof q||(t=new q(...t));const l=at(e),u=at(n),c=De().wallWidth*1.2+jr*4,f=c*1.8,h=new Fe(new Ot(l,u,f),l5),d=Math.atan2(i-s,o-a),p=new st().makeRotationY(d);h.applyMatrix4(p),h.position.copy(t);const x=nt[r.userData.componentIndex].userData.centroid;if(x){const[m,v]=mm(h.position,x,c/2);h.position.copy(m)}h.rotateY(Math.PI/2),r.userData.windowHoles.push(h);const _=Kc(h);return h.userData.holeBrush=_,h}function Cte(t,e){const n=we().getLineArrayBuilding[t].floor;if(n){const r=n.wall[e];if(r){const i=r.elements;if(i)return i.filter((o,a)=>(o.index=a,o.id==="window"))}}return[]}for(let t=0;t<256;t++)(t<16?"0":"")+t.toString(16);function Mte(t,e,n){return(1-n)*t+n*e}var Dte="Function.prototype.bind called on incompatible ",zx=Array.prototype.slice,Tte=Object.prototype.toString,Pte="[object Function]",Lte=function(e){var n=this;if(typeof n!="function"||Tte.call(n)!==Pte)throw new TypeError(Dte+n);for(var r=zx.call(arguments,1),i,s=function(){if(this instanceof i){var c=n.apply(this,r.concat(zx.call(arguments)));return Object(c)===c?c:this}else return n.apply(e,r.concat(zx.call(arguments)))},o=Math.max(0,n.length-r.length),a=[],l=0;l<o;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var u=function(){};u.prototype=n.prototype,i.prototype=new u,u.prototype=null}return i},Fte=Lte,jM=Function.prototype.bind||Fte,Ite=jM,m5=Ite.call(Function.call,Object.prototype.hasOwnProperty),kte={}.toString,Rte=Array.isArray||function(t){return kte.call(t)=="[object Array]"},v5=Function.prototype.toString,Eh=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,zA,Ry;if(typeof Eh=="function"&&typeof Object.defineProperty=="function")try{zA=Object.defineProperty({},"length",{get:function(){throw Ry}}),Ry={},Eh(function(){throw 42},null,zA)}catch(t){t!==Ry&&(Eh=null)}else Eh=null;var Ote=/^\s*class\b/,GA=function(e){try{var n=v5.call(e);return Ote.test(n)}catch{return!1}},Gx=function(e){try{return GA(e)?!1:(v5.call(e),!0)}catch{return!1}},Oy=Object.prototype.toString,Bte="[object Object]",Nte="[object Function]",Vte="[object GeneratorFunction]",zte="[object HTMLAllCollection]",Gte="[object HTML document.all class]",Ute="[object HTMLCollection]",Hte=typeof Symbol=="function"&&!!Symbol.toStringTag,Wte=!(0 in[,]),UA=function(){return!1};if(typeof document=="object"){var $te=document.all;Oy.call($te)===Oy.call(document.all)&&(UA=function(e){if((Wte||!e)&&(typeof e>"u"||typeof e=="object"))try{var n=Oy.call(e);return(n===zte||n===Gte||n===Ute||n===Bte)&&e("")==null}catch{}return!1})}var qM=Eh?function(e){if(UA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Eh(e,null,zA)}catch(n){if(n!==Ry)return!1}return!GA(e)&&Gx(e)}:function(e){if(UA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(Hte)return Gx(e);if(GA(e))return!1;var n=Oy.call(e);return n!==Nte&&n!==Vte&&!/^\[object HTML/.test(n)?!1:Gx(e)},W_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0},HF=typeof Symbol<"u"&&Symbol,Xte=W_,JM=function(){return typeof HF!="function"||typeof Symbol!="function"||typeof HF("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Xte()},Ht,ud=SyntaxError,y5=Function,Xh=TypeError,Ux=function(t){try{return y5('"use strict"; return ('+t+").constructor;")()}catch{}},Zc=Object.getOwnPropertyDescriptor;if(Zc)try{Zc({},"")}catch{Zc=null}var Hx=function(){throw new Xh},Yte=Zc?function(){try{return arguments.callee,Hx}catch{try{return Zc(arguments,"callee").get}catch{return Hx}}}():Hx,ih=JM(),sa=Object.getPrototypeOf||function(t){return t.__proto__},vh={},jte=typeof Uint8Array>"u"?Ht:sa(Uint8Array),Qc={"%AggregateError%":typeof AggregateError>"u"?Ht:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ht:ArrayBuffer,"%ArrayIteratorPrototype%":ih?sa([][Symbol.iterator]()):Ht,"%AsyncFromSyncIteratorPrototype%":Ht,"%AsyncFunction%":vh,"%AsyncGenerator%":vh,"%AsyncGeneratorFunction%":vh,"%AsyncIteratorPrototype%":vh,"%Atomics%":typeof Atomics>"u"?Ht:Atomics,"%BigInt%":typeof BigInt>"u"?Ht:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ht:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ht:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ht:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ht:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ht:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ht:FinalizationRegistry,"%Function%":y5,"%GeneratorFunction%":vh,"%Int8Array%":typeof Int8Array>"u"?Ht:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ht:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ht:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ih?sa(sa([][Symbol.iterator]())):Ht,"%JSON%":typeof JSON=="object"?JSON:Ht,"%Map%":typeof Map>"u"?Ht:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ih?Ht:sa(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ht:Promise,"%Proxy%":typeof Proxy>"u"?Ht:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ht:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ht:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ih?Ht:sa(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ht:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ih?sa(""[Symbol.iterator]()):Ht,"%Symbol%":ih?Symbol:Ht,"%SyntaxError%":ud,"%ThrowTypeError%":Yte,"%TypedArray%":jte,"%TypeError%":Xh,"%Uint8Array%":typeof Uint8Array>"u"?Ht:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ht:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ht:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ht:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ht:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ht:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ht:WeakSet};try{null.error}catch(t){var qte=sa(sa(t));Qc["%Error.prototype%"]=qte}var Jte=function t(e){var n;if(e==="%AsyncFunction%")n=Ux("async function () {}");else if(e==="%GeneratorFunction%")n=Ux("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=Ux("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&(n=sa(i.prototype))}return Qc[e]=n,n},WF={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Zm=jM,b1=m5,Kte=Zm.call(Function.call,Array.prototype.concat),Zte=Zm.call(Function.apply,Array.prototype.splice),$F=Zm.call(Function.call,String.prototype.replace),x1=Zm.call(Function.call,String.prototype.slice),Qte=Zm.call(Function.call,RegExp.prototype.exec),ene=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,tne=/\\(\\)?/g,nne=function(e){var n=x1(e,0,1),r=x1(e,-1);if(n==="%"&&r!=="%")throw new ud("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new ud("invalid intrinsic syntax, expected opening `%`");var i=[];return $F(e,ene,function(s,o,a,l){i[i.length]=a?$F(l,tne,"$1"):o||s}),i},rne=function(e,n){var r=e,i;if(b1(WF,r)&&(i=WF[r],r="%"+i[0]+"%"),b1(Qc,r)){var s=Qc[r];if(s===vh&&(s=Jte(r)),typeof s>"u"&&!n)throw new Xh("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new ud("intrinsic "+e+" does not exist!")},io=function(e,n){if(typeof e!="string"||e.length===0)throw new Xh("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Xh('"allowMissing" argument must be a boolean');if(Qte(/^%?[^%]*%?$/,e)===null)throw new ud("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=nne(e),i=r.length>0?r[0]:"",s=rne("%"+i+"%",n),o=s.name,a=s.value,l=!1,u=s.alias;u&&(i=u[0],Zte(r,Kte([0,1],u)));for(var c=1,f=!0;c<r.length;c+=1){var h=r[c],d=x1(h,0,1),p=x1(h,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new ud("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(l=!0),i+="."+h,o="%"+i+"%",b1(Qc,o))a=Qc[o];else if(a!=null){if(!(h in a)){if(!n)throw new Xh("base intrinsic for "+e+" exists, but the property is not available.");return}if(Zc&&c+1>=r.length){var g=Zc(a,h);f=!!g,f&&"get"in g&&!("originalValue"in g.get)?a=g.get:a=a[h]}else f=b1(a,h),a=a[h];f&&!l&&(Qc[o]=a)}}return a},$_={exports:{}};(function(t){var e=jM,n=io,r=n("%Function.prototype.apply%"),i=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||e.call(i,r),o=n("%Object.getOwnPropertyDescriptor%",!0),a=n("%Object.defineProperty%",!0),l=n("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(f){var h=s(e,i,arguments);if(o&&a){var d=o(h,"length");d.configurable&&a(h,"length",{value:1+l(0,f.length-(arguments.length-1))})}return h};var u=function(){return s(e,r,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u})($_);var _5=io,w5=$_.exports,ine=w5(_5("String.prototype.indexOf")),zo=function(e,n){var r=_5(e,!!n);return typeof r=="function"&&ine(e,".prototype.")>-1?w5(r):r},sne=W_,Go=function(){return sne()&&!!Symbol.toStringTag},b5=zo,one=b5("Boolean.prototype.toString"),ane=b5("Object.prototype.toString"),lne=function(e){try{return one(e),!0}catch{return!1}},une="[object Boolean]",cne=Go(),fne=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:cne&&Symbol.toStringTag in e?lne(e):ane(e)===une},hne=Date.prototype.getDay,dne=function(e){try{return hne.call(e),!0}catch{return!1}},pne=Object.prototype.toString,gne="[object Date]",mne=Go(),vne=function(e){return typeof e!="object"||e===null?!1:mne?dne(e):pne.call(e)===gne},yne=Object.prototype.toString,_ne=Function.prototype.toString,wne=/^\s*(?:function)?\*/,x5=Go(),Wx=Object.getPrototypeOf,bne=function(){if(!x5)return!1;try{return Function("return function*() {}")()}catch{}},$x,xne=function(e){if(typeof e!="function")return!1;if(wne.test(_ne.call(e)))return!0;if(!x5){var n=yne.call(e);return n==="[object GeneratorFunction]"}if(!Wx)return!1;if(typeof $x>"u"){var r=bne();$x=r?Wx(r):!1}return Wx(e)===$x},Sne=Number.prototype.toString,Ane=function(e){try{return Sne.call(e),!0}catch{return!1}},Ene=Object.prototype.toString,Cne="[object Number]",Mne=Go(),Dne=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:Mne?Ane(e):Ene.call(e)===Cne},HA=zo,S5=Go(),A5,E5,WA,$A;if(S5){A5=HA("Object.prototype.hasOwnProperty"),E5=HA("RegExp.prototype.exec"),WA={};var Xx=function(){throw WA};$A={toString:Xx,valueOf:Xx},typeof Symbol.toPrimitive=="symbol"&&($A[Symbol.toPrimitive]=Xx)}var Tne=HA("Object.prototype.toString"),Pne=Object.getOwnPropertyDescriptor,Lne="[object RegExp]",Fne=S5?function(e){if(!e||typeof e!="object")return!1;var n=Pne(e,"lastIndex"),r=n&&A5(n,"value");if(!r)return!1;try{E5(e,$A)}catch(i){return i===WA}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:Tne(e)===Lne},Ine=String.prototype.valueOf,kne=function(e){try{return Ine.call(e),!0}catch{return!1}},Rne=Object.prototype.toString,One="[object String]",Bne=Go(),Nne=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:Bne?kne(e):Rne.call(e)===One},XA={exports:{}},Vne=Object.prototype.toString,zne=JM();if(zne){var Gne=Symbol.prototype.toString,Une=/^Symbol\(.*\)$/,Hne=function(e){return typeof e.valueOf()!="symbol"?!1:Une.test(Gne.call(e))};XA.exports=function(e){if(typeof e=="symbol")return!0;if(Vne.call(e)!=="[object Symbol]")return!1;try{return Hne(e)}catch{return!1}}}else XA.exports=function(e){return!1};var YA={exports:{}},XF=typeof BigInt<"u"&&BigInt,C5=function(){return typeof XF=="function"&&typeof BigInt=="function"&&typeof XF(42)=="bigint"&&typeof BigInt(42)=="bigint"},Wne=C5();if(Wne){var $ne=BigInt.prototype.valueOf,Xne=function(e){try{return $ne.call(e),!0}catch{}return!1};YA.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:Xne(e)}}else YA.exports=function(e){return!1};var Yne=Go(),jne=zo,jA=jne("Object.prototype.toString"),KM=function(e){return Yne&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:jA(e)==="[object Arguments]"},qne=function(e){return KM(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&jA(e)!=="[object Array]"&&jA(e.callee)==="[object Function]"};(function(){return KM(arguments)})();KM.isLegacyArguments=qne;const Jne={},Kne=Object.freeze(Object.defineProperty({__proto__:null,default:Jne},Symbol.toStringTag,{value:"Module"})),Zne=Ym(Kne);var ZM=typeof Map=="function"&&Map.prototype,Yx=Object.getOwnPropertyDescriptor&&ZM?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,S1=ZM&&Yx&&typeof Yx.get=="function"?Yx.get:null,YF=ZM&&Map.prototype.forEach,QM=typeof Set=="function"&&Set.prototype,jx=Object.getOwnPropertyDescriptor&&QM?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,A1=QM&&jx&&typeof jx.get=="function"?jx.get:null,jF=QM&&Set.prototype.forEach,Qne=typeof WeakMap=="function"&&WeakMap.prototype,xg=Qne?WeakMap.prototype.has:null,ere=typeof WeakSet=="function"&&WeakSet.prototype,Sg=ere?WeakSet.prototype.has:null,tre=typeof WeakRef=="function"&&WeakRef.prototype,qF=tre?WeakRef.prototype.deref:null,nre=Boolean.prototype.valueOf,rre=Object.prototype.toString,ire=Function.prototype.toString,sre=String.prototype.match,e2=String.prototype.slice,hu=String.prototype.replace,ore=String.prototype.toUpperCase,JF=String.prototype.toLowerCase,M5=RegExp.prototype.test,KF=Array.prototype.concat,oa=Array.prototype.join,are=Array.prototype.slice,ZF=Math.floor,qA=typeof BigInt=="function"?BigInt.prototype.valueOf:null,qx=Object.getOwnPropertySymbols,JA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,cd=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Mi=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===cd?"object":"symbol")?Symbol.toStringTag:null,D5=Object.prototype.propertyIsEnumerable,QF=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function eI(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||M5.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-ZF(-t):ZF(t);if(r!==t){var i=String(r),s=e2.call(e,i.length+1);return hu.call(i,n,"$&_")+"."+hu.call(hu.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return hu.call(e,n,"$&_")}var KA=Zne,tI=KA.custom,nI=P5(tI)?tI:null,lre=function t(e,n,r,i){var s=n||{};if(ru(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ru(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ru(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ru(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ru(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return F5(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?eI(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?eI(e,u):u}var c=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=c&&c>0&&typeof e=="object")return ZA(e)?"[Array]":"[Object]";var f=Cre(s,r);if(typeof i>"u")i=[];else if(L5(i,e)>=0)return"[Circular]";function h(L,F,k){if(F&&(i=are.call(i),i.push(F)),k){var I={depth:s.depth};return ru(s,"quoteStyle")&&(I.quoteStyle=s.quoteStyle),t(L,I,r+1,i)}return t(L,s,r+1,i)}if(typeof e=="function"&&!rI(e)){var d=vre(e),p=X0(e,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+oa.call(p,", ")+" }":"")}if(P5(e)){var g=cd?hu.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):JA.call(e);return typeof e=="object"&&!cd?Rp(g):g}if(Sre(e)){for(var x="<"+JF.call(String(e.nodeName)),_=e.attributes||[],m=0;m<_.length;m++)x+=" "+_[m].name+"="+T5(ure(_[m].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+JF.call(String(e.nodeName))+">",x}if(ZA(e)){if(e.length===0)return"[]";var v=X0(e,h);return f&&!Ere(v)?"["+QA(v,f)+"]":"[ "+oa.call(v,", ")+" ]"}if(fre(e)){var b=X0(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!D5.call(e,"cause")?"{ ["+String(e)+"] "+oa.call(KF.call("[cause]: "+h(e.cause),b),", ")+" }":b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+oa.call(b,", ")+" }"}if(typeof e=="object"&&o){if(nI&&typeof e[nI]=="function"&&KA)return KA(e,{depth:c-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(yre(e)){var w=[];return YF&&YF.call(e,function(L,F){w.push(h(F,e,!0)+" => "+h(L,e))}),iI("Map",S1.call(e),w,f)}if(bre(e)){var A=[];return jF&&jF.call(e,function(L){A.push(h(L,e))}),iI("Set",A1.call(e),A,f)}if(_re(e))return Jx("WeakMap");if(xre(e))return Jx("WeakSet");if(wre(e))return Jx("WeakRef");if(dre(e))return Rp(h(Number(e)));if(gre(e))return Rp(h(qA.call(e)));if(pre(e))return Rp(nre.call(e));if(hre(e))return Rp(h(String(e)));if(!cre(e)&&!rI(e)){var E=X0(e,h),S=QF?QF(e)===Object.prototype:e instanceof Object||e.constructor===Object,C=e instanceof Object?"":"null prototype",M=!S&&Mi&&Object(e)===e&&Mi in e?e2.call(Zu(e),8,-1):C?"Object":"",D=S||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",T=D+(M||C?"["+oa.call(KF.call([],M||[],C||[]),": ")+"] ":"");return E.length===0?T+"{}":f?T+"{"+QA(E,f)+"}":T+"{ "+oa.call(E,", ")+" }"}return String(e)};function T5(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function ure(t){return hu.call(String(t),/"/g,"&quot;")}function ZA(t){return Zu(t)==="[object Array]"&&(!Mi||!(typeof t=="object"&&Mi in t))}function cre(t){return Zu(t)==="[object Date]"&&(!Mi||!(typeof t=="object"&&Mi in t))}function rI(t){return Zu(t)==="[object RegExp]"&&(!Mi||!(typeof t=="object"&&Mi in t))}function fre(t){return Zu(t)==="[object Error]"&&(!Mi||!(typeof t=="object"&&Mi in t))}function hre(t){return Zu(t)==="[object String]"&&(!Mi||!(typeof t=="object"&&Mi in t))}function dre(t){return Zu(t)==="[object Number]"&&(!Mi||!(typeof t=="object"&&Mi in t))}function pre(t){return Zu(t)==="[object Boolean]"&&(!Mi||!(typeof t=="object"&&Mi in t))}function P5(t){if(cd)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!JA)return!1;try{return JA.call(t),!0}catch{}return!1}function gre(t){if(!t||typeof t!="object"||!qA)return!1;try{return qA.call(t),!0}catch{}return!1}var mre=Object.prototype.hasOwnProperty||function(t){return t in this};function ru(t,e){return mre.call(t,e)}function Zu(t){return rre.call(t)}function vre(t){if(t.name)return t.name;var e=sre.call(ire.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function L5(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function yre(t){if(!S1||!t||typeof t!="object")return!1;try{S1.call(t);try{A1.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function _re(t){if(!xg||!t||typeof t!="object")return!1;try{xg.call(t,xg);try{Sg.call(t,Sg)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function wre(t){if(!qF||!t||typeof t!="object")return!1;try{return qF.call(t),!0}catch{}return!1}function bre(t){if(!A1||!t||typeof t!="object")return!1;try{A1.call(t);try{S1.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function xre(t){if(!Sg||!t||typeof t!="object")return!1;try{Sg.call(t,Sg);try{xg.call(t,xg)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function Sre(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function F5(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return F5(e2.call(t,0,e.maxStringLength),e)+r}var i=hu.call(hu.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Are);return T5(i,"single",e)}function Are(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+ore.call(e.toString(16))}function Rp(t){return"Object("+t+")"}function Jx(t){return t+" { ? }"}function iI(t,e,n,r){var i=r?QA(n,r):oa.call(n,", ");return t+" ("+e+") {"+i+"}"}function Ere(t){for(var e=0;e<t.length;e++)if(L5(t[e],`
`)>=0)return!1;return!0}function Cre(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=oa.call(Array(t.indent+1)," ");else return null;return{base:n,prev:oa.call(Array(e+1),n)}}function QA(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+oa.call(t,","+n)+`
`+e.prev}function X0(t,e){var n=ZA(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=ru(t,i)?e(t[i],t):""}var s=typeof qx=="function"?qx(t):[],o;if(cd){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)!ru(t,l)||n&&String(Number(l))===l&&l<t.length||cd&&o["$"+l]instanceof Symbol||(M5.call(/[^\w$]/,l)?r.push(e(l,t)+": "+e(t[l],t)):r.push(l+": "+e(t[l],t)));if(typeof qx=="function")for(var u=0;u<s.length;u++)D5.call(t,s[u])&&r.push("["+e(s[u])+"]: "+e(t[s[u]],t));return r}var t2=io,zd=zo,Mre=lre,Dre=t2("%TypeError%"),Y0=t2("%WeakMap%",!0),j0=t2("%Map%",!0),Tre=zd("WeakMap.prototype.get",!0),Pre=zd("WeakMap.prototype.set",!0),Lre=zd("WeakMap.prototype.has",!0),Fre=zd("Map.prototype.get",!0),Ire=zd("Map.prototype.set",!0),kre=zd("Map.prototype.has",!0),n2=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},Rre=function(t,e){var n=n2(t,e);return n&&n.value},Ore=function(t,e,n){var r=n2(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},Bre=function(t,e){return!!n2(t,e)},Nre=function(){var e,n,r,i={assert:function(s){if(!i.has(s))throw new Dre("Side channel does not contain "+Mre(s))},get:function(s){if(Y0&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Tre(e,s)}else if(j0){if(n)return Fre(n,s)}else if(r)return Rre(r,s)},has:function(s){if(Y0&&s&&(typeof s=="object"||typeof s=="function")){if(e)return Lre(e,s)}else if(j0){if(n)return kre(n,s)}else if(r)return Bre(r,s);return!1},set:function(s,o){Y0&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Y0),Pre(e,s,o)):j0?(n||(n=new j0),Ire(n,s,o)):(r||(r={key:{},next:null}),Ore(r,s,o))}};return i},Vre=io,zre=m5,Op=Nre(),ja=Vre("%TypeError%"),I5={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ja("`O` is not an object");if(typeof e!="string")throw new ja("`slot` must be a string");if(Op.assert(t),!I5.has(t,e))throw new ja("`"+e+"` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ja("`O` is not an object");if(typeof e!="string")throw new ja("`slot` must be a string");var n=Op.get(t);return n&&n["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new ja("`O` is not an object");if(typeof e!="string")throw new ja("`slot` must be a string");var n=Op.get(t);return!!n&&zre(n,"$"+e)},set:function(t,e,n){if(!t||typeof t!="object"&&typeof t!="function")throw new ja("`O` is not an object");if(typeof e!="string")throw new ja("`slot` must be a string");var r=Op.get(t);r||(r={},Op.set(t,r)),r["$"+e]=n}};Object.freeze&&Object.freeze(I5);var r2=typeof Map=="function"&&Map.prototype?Map:null,Gre=typeof Set=="function"&&Set.prototype?Set:null,E1;r2||(E1=function(e){return!1});var k5=r2?Map.prototype.has:null,sI=Gre?Set.prototype.has:null;!E1&&!k5&&(E1=function(e){return!1});var Ure=E1||function(e){if(!e||typeof e!="object")return!1;try{if(k5.call(e),sI)try{sI.call(e)}catch{return!0}return e instanceof r2}catch{}return!1},Hre=typeof Map=="function"&&Map.prototype?Map:null,i2=typeof Set=="function"&&Set.prototype?Set:null,C1;i2||(C1=function(e){return!1});var oI=Hre?Map.prototype.has:null,R5=i2?Set.prototype.has:null;!C1&&!R5&&(C1=function(e){return!1});var Wre=C1||function(e){if(!e||typeof e!="object")return!1;try{if(R5.call(e),oI)try{oI.call(e)}catch{return!0}return e instanceof i2}catch{}return!1};if(!(JM()||W_())){var aI=io,$re=aI("%Map%",!0),Xre=aI("%Set%",!0),bo=zo;bo("Array.prototype.push"),bo("String.prototype.charCodeAt"),bo("String.prototype.slice"),!$re&&!Xre||(bo("Map.prototype.forEach",!0),bo("Set.prototype.forEach",!0),(typeof process>"u"||!process.versions||!process.versions.node)&&(bo("Map.prototype.iterator",!0),bo("Set.prototype.iterator",!0)),bo("Map.prototype.@@iterator",!0)||bo("Map.prototype._es6-shim iterator_",!0),bo("Set.prototype.@@iterator",!0)||bo("Set.prototype._es6-shim iterator_",!0))}var M1=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,lI=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,D1;M1||(D1=function(e){return!1});var eE=M1?M1.prototype.has:null,Kx=lI?lI.prototype.has:null;!D1&&!eE&&(D1=function(e){return!1});var Yre=D1||function(e){if(!e||typeof e!="object")return!1;try{if(eE.call(e,eE),Kx)try{Kx.call(e,Kx)}catch{return!0}return e instanceof M1}catch{}return!1},tE={exports:{}},jre=io,O5=zo,qre=jre("%WeakSet%",!0),Zx=O5("WeakSet.prototype.has",!0);if(Zx){var Qx=O5("WeakMap.prototype.has",!0);tE.exports=function(e){if(!e||typeof e!="object")return!1;try{if(Zx(e,Zx),Qx)try{Qx(e,Qx)}catch{return!0}return e instanceof qre}catch{}return!1}}else tE.exports=function(e){return!1};var Jre=Ure,Kre=Wre,Zre=Yre,Qre=tE.exports,eie=function(e){if(e&&typeof e=="object"){if(Jre(e))return"Map";if(Kre(e))return"Set";if(Zre(e))return"WeakMap";if(Qre(e))return"WeakSet"}return!1},tie=Nne,nie=Dne,rie=fne,iie=XA.exports,sie=YA.exports,oie=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(tie(e))return"String";if(nie(e))return"Number";if(rie(e))return"Boolean";if(iie(e))return"Symbol";if(sie(e))return"BigInt"},s2={exports:{}},aie=io,lie=aie("%TypeError%"),uie=function(e,n){if(e==null)throw new lie(n||"Cannot call method on "+e);return e};(function(t){t.exports=uie})(s2);var cie=io,fie=cie("%Object%"),hie=s2.exports,die=function(e){return hie(e),fie(e)},uI=Object.prototype.toString,B5=function(e){var n=uI.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&uI.call(e.callee)==="[object Function]"),r},eS,cI;function pie(){if(cI)return eS;cI=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=B5,i=Object.prototype.propertyIsEnumerable,s=!i.call({toString:null},"toString"),o=i.call(function(){},"prototype"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(h){var d=h.constructor;return d&&d.prototype===h},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},c=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!u["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{l(window[h])}catch{return!0}}catch{return!0}return!1}(),f=function(h){if(typeof window>"u"||!c)return l(h);try{return l(h)}catch{return!1}};t=function(d){var p=d!==null&&typeof d=="object",g=n.call(d)==="[object Function]",x=r(d),_=p&&n.call(d)==="[object String]",m=[];if(!p&&!g&&!x)throw new TypeError("Object.keys called on a non-object");var v=o&&g;if(_&&d.length>0&&!e.call(d,0))for(var b=0;b<d.length;++b)m.push(String(b));if(x&&d.length>0)for(var w=0;w<d.length;++w)m.push(String(w));else for(var A in d)!(v&&A==="prototype")&&e.call(d,A)&&m.push(String(A));if(s)for(var E=f(d),S=0;S<a.length;++S)!(E&&a[S]==="constructor")&&e.call(d,a[S])&&m.push(a[S]);return m}}return eS=t,eS}var gie=Array.prototype.slice,mie=B5,fI=Object.keys,By=fI?function(e){return fI(e)}:pie(),hI=Object.keys;By.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return mie(r)?hI(gie.call(r)):hI(r)})}else Object.keys=By;return Object.keys||By};var vie=By,yie=io,nE=yie("%Object.defineProperty%",!0),rE=function(){if(nE)try{return nE({},"a",{value:1}),!0}catch{return!1}return!1};rE.hasArrayLengthDefineBug=function(){if(!rE())return null;try{return nE([],"length",{value:1}).length!==1}catch{return!0}};var _ie=rE,wie=vie,bie=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",xie=Object.prototype.toString,Sie=Array.prototype.concat,N5=Object.defineProperty,Aie=function(t){return typeof t=="function"&&xie.call(t)==="[object Function]"},Eie=_ie(),V5=N5&&Eie,Cie=function(t,e,n,r){if(e in t){if(r===!0){if(t[e]===n)return}else if(!Aie(r)||!r())return}V5?N5(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n},z5=function(t,e){var n=arguments.length>2?arguments[2]:{},r=wie(e);bie&&(r=Sie.call(r,Object.getOwnPropertySymbols(e)));for(var i=0;i<r.length;i+=1)Cie(t,r[i],e[r[i]],n[r[i]])};z5.supportsDescriptors=!!V5;var X_=z5,G5={exports:{}};(function(t){t.exports=qM})(G5);var Mie=function(e){if(e===null)return"Null";if(typeof e>"u")return"Undefined";if(typeof e=="function"||typeof e=="object")return"Object";if(typeof e=="number")return"Number";if(typeof e=="boolean")return"Boolean";if(typeof e=="string")return"String"},Die=Mie,U5=function(e){return typeof e=="symbol"?"Symbol":typeof e=="bigint"?"BigInt":Die(e)},Tie=qM,Pie=Object.prototype.toString,H5=Object.prototype.hasOwnProperty,Lie=function(e,n,r){for(var i=0,s=e.length;i<s;i++)H5.call(e,i)&&(r==null?n(e[i],i,e):n.call(r,e[i],i,e))},Fie=function(e,n,r){for(var i=0,s=e.length;i<s;i++)r==null?n(e.charAt(i),i,e):n.call(r,e.charAt(i),i,e)},Iie=function(e,n,r){for(var i in e)H5.call(e,i)&&(r==null?n(e[i],i,e):n.call(r,e[i],i,e))},kie=function(e,n,r){if(!Tie(n))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=r),Pie.call(e)==="[object Array]"?Lie(e,n,i):typeof e=="string"?Fie(e,n,i):Iie(e,n,i)},W5=kie,tS=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],Rie=typeof globalThis>"u"?Ku:globalThis,$5=function(){for(var e=[],n=0;n<tS.length;n++)typeof Rie[tS[n]]=="function"&&(e[e.length]=tS[n]);return e},Oie=io,Ny=Oie("%Object.getOwnPropertyDescriptor%",!0);if(Ny)try{Ny([],"length")}catch{Ny=null}var X5=Ny,nS,dI;function Bie(){if(dI)return nS;dI=1;var t=W5,e=$5,n=zo,r=n("Object.prototype.toString"),i=Go(),s=X5,o=typeof globalThis>"u"?Ku:globalThis,a=e(),l=n("Array.prototype.indexOf",!0)||function(p,g){for(var x=0;x<p.length;x+=1)if(p[x]===g)return x;return-1},u=n("String.prototype.slice"),c={},f=Object.getPrototypeOf;i&&s&&f&&t(a,function(d){var p=new o[d];if(Symbol.toStringTag in p){var g=f(p),x=s(g,Symbol.toStringTag);if(!x){var _=f(g);x=s(_,Symbol.toStringTag)}c[d]=x.get}});var h=function(p){var g=!1;return t(c,function(x,_){if(!g)try{g=x.call(p)===_}catch{}}),g};return nS=function(p){if(!p||typeof p!="object")return!1;if(!i||!(Symbol.toStringTag in p)){var g=u(r(p),8,-1);return l(a,g)>-1}return s?h(p):!1},nS}var Y5=W5,Nie=$5,j5=zo,rS=X5,Vie=j5("Object.prototype.toString"),q5=Go(),pI=typeof globalThis>"u"?Ku:globalThis,zie=Nie(),Gie=j5("String.prototype.slice"),J5={},iS=Object.getPrototypeOf;q5&&rS&&iS&&Y5(zie,function(t){if(typeof pI[t]=="function"){var e=new pI[t];if(Symbol.toStringTag in e){var n=iS(e),r=rS(n,Symbol.toStringTag);if(!r){var i=iS(n);r=rS(i,Symbol.toStringTag)}J5[t]=r.get}}});var Uie=function(e){var n=!1;return Y5(J5,function(r,i){if(!n)try{var s=r.call(e);s===i&&(n=s)}catch{}}),n},Hie=Bie(),Wie=function(e){return Hie(e)?!q5||!(Symbol.toStringTag in e)?Gie(Vie(e),8,-1):Uie(e):!1},$ie=zo,Xie=$ie("WeakRef.prototype.deref",!0),Yie=typeof WeakRef>"u"?function(e){return!1}:function(e){if(!e||typeof e!="object")return!1;try{return Xie(e),!0}catch{return!1}},jie=zo,gI=jie("FinalizationRegistry.prototype.register",!0),qie=gI?function(e){if(!e||typeof e!="object")return!1;try{return gI(e,{}),!0}catch{return!1}}:function(e){return!1},K5={exports:{}};(function(t){t.exports=qM})(K5);var sS,mI;function o2(){if(mI)return sS;mI=1;var t=function(){return typeof function(){}.name=="string"},e=Object.getOwnPropertyDescriptor;if(e)try{e([],"length")}catch{e=null}t.functionsHaveConfigurableNames=function(){if(!t()||!e)return!1;var i=e(function(){},"name");return!!i&&!!i.configurable};var n=Function.prototype.bind;return t.boundFunctionsHaveNames=function(){return t()&&typeof n=="function"&&function(){}.bind().name!==""},sS=t,sS}var Z5=K5.exports,Jie=o2()(),Q5=zo,e4=Q5("Function.prototype.toString"),t4=Q5("String.prototype.match"),Kie=/^class /,Zie=function(e){if(Z5(e)||typeof e!="function")return!1;try{var n=t4(e4(e),Kie);return!!n}catch{}return!1},Qie=/\s*function\s+([^(\s]*)\s*/,ese=Function.prototype,n4=function(){if(!Zie(this)&&!Z5(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(Jie)return this.name;if(this===ese)return"";var e=e4(this),n=t4(e,Qie),r=n&&n[1];return r},tse=n4,r4=function(){return tse},nse=X_.supportsDescriptors,rse=o2()(),ise=r4,vI=Object.defineProperty,sse=TypeError,ose=function(){var e=ise();if(rse)return e;if(!nse)throw new sse("Shimming Function.prototype.name support requires ES5 property descriptor support.");var n=Function.prototype;return vI(n,"name",{configurable:!0,enumerable:!1,get:function(){var r=e.call(this);return this!==n&&vI(this,"name",{configurable:!0,enumerable:!1,value:r,writable:!1}),r}}),e},ase=X_,lse=$_.exports,i4=n4,use=r4,cse=ose,s4=lse(i4);ase(s4,{getPolyfill:use,implementation:i4,shim:cse});var fse=s4,hse=Object.prototype.toString,dse=Function.prototype.toString,pse=/^\s*async(?:\s+function(?:\s+|\()|\s*\()/,o4=Go(),oS=Object.getPrototypeOf,gse=function(){if(!o4)return!1;try{return Function("return async function () {}")()}catch{}},aS,mse=function(e){if(typeof e!="function")return!1;if(pse.test(dse.call(e)))return!0;if(!o4){var n=hse.call(e);return n==="[object AsyncFunction]"}if(!oS)return!1;if(typeof aS>"u"){var r=gse();aS=r?oS(r):!1}return oS(e)===aS},vse=oie,yse=eie,_se=Wie,wse=Rte,bse=vne,xse=Fne,Sse=Yie,Ase=qie,Ese=fse,Cse=xne,Mse=mse,Dse=Go(),lS=Dse&&Symbol.toStringTag,Tse=Object,yI=typeof Promise=="function"&&Promise.prototype.then,Pse=function(e){if(!e||typeof e!="object"||!yI)return!1;try{return yI.call(e,null,function(){}),!0}catch{}return!1},_I=function(e){return e&&e!=="BigInt"&&e!=="Boolean"&&e!=="Null"&&e!=="Number"&&e!=="String"&&e!=="Symbol"&&e!=="Undefined"&&e!=="Math"&&e!=="JSON"&&e!=="Reflect"&&e!=="Atomics"&&e!=="Map"&&e!=="Set"&&e!=="WeakMap"&&e!=="WeakSet"&&e!=="BigInt64Array"&&e!=="BigUint64Array"&&e!=="Float32Array"&&e!=="Float64Array"&&e!=="Int16Array"&&e!=="Int32Array"&&e!=="Int8Array"&&e!=="Uint16Array"&&e!=="Uint32Array"&&e!=="Uint8Array"&&e!=="Uint8ClampedArray"&&e!=="Array"&&e!=="Date"&&e!=="FinalizationRegistry"&&e!=="Promise"&&e!=="RegExp"&&e!=="WeakRef"&&e!=="Function"&&e!=="GeneratorFunction"&&e!=="AsyncFunction"},Lse=function(e){if(e==null)return e;var n=vse(Tse(e))||yse(e)||_se(e);if(n)return n;if(wse(e))return"Array";if(bse(e))return"Date";if(xse(e))return"RegExp";if(Sse(e))return"WeakRef";if(Ase(e))return"FinalizationRegistry";if(typeof e=="function")return Cse(e)?"GeneratorFunction":Mse(e)?"AsyncFunction":"Function";if(Pse(e))return"Promise";if(lS&&lS in e){var r=e[lS];if(_I(r))return r}if(typeof e.constructor=="function"){var i=Ese(e.constructor);if(_I(i))return i}return"Object"},Y_=io,Fse=G5.exports,Ise=U5,kse=Lse,wI=Y_("%Object.getPrototypeOf%",!0),Rse=Y_("%Object.prototype%"),Ose=Y_("%TypeError%"),Bse=[].__proto__===Array.prototype,a4=function(e){if(Ise(e)!=="Object")throw new Ose("Reflect.getPrototypeOf called on non-object");if(wI)return wI(e);if(Bse){var n=e.__proto__;if(n||n===null)return n}var r=kse(e);if(r){var i=Y_("%"+r+"%.prototype",!0);if(i)return i}return Fse(e.constructor)?e.constructor.prototype:e instanceof Object?Rse:null},Nse=U5,Vse=io,zse=Vse("%TypeError%"),Gse=a4,Use=[].__proto__===Array.prototype,Hse=function(e){if(Nse(e)!=="Object")throw new zse("Reflect.getPrototypeOf called on non-object");return e.__proto__},l4=function(){return typeof Reflect=="object"&&Reflect&&Reflect.getPrototypeOf?Reflect.getPrototypeOf:Use?Hse:Gse},bI=X_,Wse=l4,$se=function(){bI(Ku,{Reflect:{}},{Reflect:function(){return typeof Reflect!="object"||!Reflect}});var e=Wse();return bI(Reflect,{getPrototypeOf:e},{getPrototypeOf:function(){return Reflect.getPrototypeOf!==e}}),e},Xse=$_.exports,Yse=X_,jse=a4,u4=l4,qse=$se,c4=Xse(u4(),typeof Reflect=="object"?Reflect:Object);Yse(c4,{getPolyfill:u4,implementation:jse,shim:qse});var Jse=c4,Kse=die,Zse=Jse,Qse=function(e){return Zse(Kse(e))},f4=s2.exports,eoe=Qse,toe=[].__proto__===Array.prototype,noe=function(e){return f4(e),e.__proto__},Vy=Object.getPrototypeOf,roe=function(e){return f4(e),Vy(Object(e))},ioe=function(){if(Vy){try{Vy(!0)}catch{return roe}return Vy}return toe?noe:eoe};ioe();W_();C5();o2()();var a2={exports:{}},Yh=typeof Reflect=="object"?Reflect:null,xI=Yh&&typeof Yh.apply=="function"?Yh.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},zy;Yh&&typeof Yh.ownKeys=="function"?zy=Yh.ownKeys:Object.getOwnPropertySymbols?zy=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zy=function(e){return Object.getOwnPropertyNames(e)};function soe(t){console&&console.warn&&console.warn(t)}var h4=Number.isNaN||function(e){return e!==e};function wn(){wn.init.call(this)}a2.exports=wn;a2.exports.once=uoe;wn.EventEmitter=wn;wn.prototype._events=void 0;wn.prototype._eventsCount=0;wn.prototype._maxListeners=void 0;var SI=10;function j_(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(wn,"defaultMaxListeners",{enumerable:!0,get:function(){return SI},set:function(t){if(typeof t!="number"||t<0||h4(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");SI=t}});wn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};wn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||h4(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function d4(t){return t._maxListeners===void 0?wn.defaultMaxListeners:t._maxListeners}wn.prototype.getMaxListeners=function(){return d4(this)};wn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")xI(l,this,n);else for(var u=l.length,c=y4(l,u),r=0;r<u;++r)xI(c[r],this,n);return!0};function p4(t,e,n,r){var i,s,o;if(j_(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=d4(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,soe(a)}return t}wn.prototype.addListener=function(e,n){return p4(this,e,n,!1)};wn.prototype.on=wn.prototype.addListener;wn.prototype.prependListener=function(e,n){return p4(this,e,n,!0)};function ooe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g4(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=ooe.bind(r);return i.listener=n,r.wrapFn=i,i}wn.prototype.once=function(e,n){return j_(n),this.on(e,g4(this,e,n)),this};wn.prototype.prependOnceListener=function(e,n){return j_(n),this.prependListener(e,g4(this,e,n)),this};wn.prototype.removeListener=function(e,n){var r,i,s,o,a;if(j_(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():aoe(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};wn.prototype.off=wn.prototype.removeListener;wn.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function m4(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?loe(i):y4(i,i.length)}wn.prototype.listeners=function(e){return m4(this,e,!0)};wn.prototype.rawListeners=function(e){return m4(this,e,!1)};wn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):v4.call(t,e)};wn.prototype.listenerCount=v4;function v4(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}wn.prototype.eventNames=function(){return this._eventsCount>0?zy(this._events):[]};function y4(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function aoe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function loe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function uoe(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}_4(t,e,s,{once:!0}),e!=="error"&&coe(t,i,{once:!0})})}function coe(t,e,n){typeof t.on=="function"&&_4(t,"error",e,n)}function _4(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}function il(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w4(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.11.5
 * https://greensock.com
 *
 * @license Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ds={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},fd={duration:.5,overwrite:!1,delay:0},l2,Ai,Sr,Ws=1e8,Sn=1/Ws,iE=Math.PI*2,foe=iE/4,hoe=0,b4=Math.sqrt,doe=Math.cos,poe=Math.sin,ei=function(e){return typeof e=="string"},or=function(e){return typeof e=="function"},pl=function(e){return typeof e=="number"},u2=function(e){return typeof e>"u"},La=function(e){return typeof e=="object"},ls=function(e){return e!==!1},c2=function(){return typeof window<"u"},q0=function(e){return or(e)||ei(e)},x4=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ei=Array.isArray,sE=/(?:-?\.?\d|\.)+/gi,S4=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ch=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,uS=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,A4=/[+-]=-?[.\d]+/,E4=/[^,'"\[\]\s]+/gi,goe=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Yn,Vs,oE,f2,Ps={},T1={},C4,M4=function(e){return(T1=lf(e,Ps))&&ds},h2=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},P1=function(e,n){return!n&&console.warn(e)},D4=function(e,n){return e&&(Ps[e]=n)&&T1&&(T1[e]=n)||Ps},vm=function(){return 0},moe={suppressEvents:!0,isStart:!0,kill:!1},Gy={suppressEvents:!0,kill:!1},voe={suppressEvents:!0},d2={},Pu=[],aE={},T4,bs={},cS={},AI=30,Uy=[],p2="",g2=function(e){var n=e[0],r,i;if(La(n)||or(n)||(e=[e]),!(r=(n._gsap||{}).harness)){for(i=Uy.length;i--&&!Uy[i].targetTest(n););r=Uy[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new Q4(e[i],r)))||e.splice(i,1);return e},ef=function(e){return e._gsap||g2($s(e))[0]._gsap},P4=function(e,n,r){return(r=e[n])&&or(r)?e[n]():u2(r)&&e.getAttribute&&e.getAttribute(n)||r},us=function(e,n){return(e=e.split(",")).forEach(n)||e},dr=function(e){return Math.round(e*1e5)/1e5||0},li=function(e){return Math.round(e*1e7)/1e7||0},jh=function(e,n){var r=n.charAt(0),i=parseFloat(n.substr(2));return e=parseFloat(e),r==="+"?e+i:r==="-"?e-i:r==="*"?e*i:e/i},yoe=function(e,n){for(var r=n.length,i=0;e.indexOf(n[i])<0&&++i<r;);return i<r},L1=function(){var e=Pu.length,n=Pu.slice(0),r,i;for(aE={},Pu.length=0,r=0;r<e;r++)i=n[r],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},L4=function(e,n,r,i){Pu.length&&!Ai&&L1(),e.render(n,r,i||Ai&&n<0&&(e._initted||e._startAt)),Pu.length&&!Ai&&L1()},F4=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(E4).length<2?n:ei(e)?e.trim():e},I4=function(e){return e},Qs=function(e,n){for(var r in n)r in e||(e[r]=n[r]);return e},_oe=function(e){return function(n,r){for(var i in r)i in n||i==="duration"&&e||i==="ease"||(n[i]=r[i])}},lf=function(e,n){for(var r in n)e[r]=n[r];return e},EI=function t(e,n){for(var r in n)r!=="__proto__"&&r!=="constructor"&&r!=="prototype"&&(e[r]=La(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},F1=function(e,n){var r={},i;for(i in e)i in n||(r[i]=e[i]);return r},Ag=function(e){var n=e.parent||Yn,r=e.keyframes?_oe(Ei(e.keyframes)):Qs;if(ls(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},woe=function(e,n){for(var r=e.length,i=r===n.length;i&&r--&&e[r]===n[r];);return r<0},k4=function(e,n,r,i,s){r===void 0&&(r="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=n[s];o&&o[s]>a;)o=o._prev;return o?(n._next=o._next,o._next=n):(n._next=e[r],e[r]=n),n._next?n._next._prev=n:e[i]=n,n._prev=o,n.parent=n._dp=e,n},q_=function(e,n,r,i){r===void 0&&(r="_first"),i===void 0&&(i="_last");var s=n._prev,o=n._next;s?s._next=o:e[r]===n&&(e[r]=o),o?o._prev=s:e[i]===n&&(e[i]=s),n._next=n._prev=n.parent=null},zu=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},tf=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},boe=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},lE=function(e,n,r,i){return e._startAt&&(Ai?e._startAt.revert(Gy):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,i))},xoe=function t(e){return!e||e._ts&&t(e.parent)},CI=function(e){return e._repeat?hd(e._tTime,e=e.duration()+e._rDelay)*e:0},hd=function(e,n){var r=Math.floor(e/=n);return e&&r===e?r-1:r},I1=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},J_=function(e){return e._end=li(e._start+(e._tDur/Math.abs(e._ts||e._rts||Sn)||0))},K_=function(e,n){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=li(r._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),J_(e),r._dirty||tf(r,e)),e},R4=function(e,n){var r;if((n._time||n._initted&&!n._dur)&&(r=I1(e.rawTime(),n),(!n._dur||Qm(0,n.totalDuration(),r)-n._tTime>Sn)&&n.render(r,!0)),tf(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-Sn}},pa=function(e,n,r,i){return n.parent&&zu(n),n._start=li((pl(r)?r:r||e!==Yn?Ns(e,r,n):e._time)+n._delay),n._end=li(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),k4(e,n,"_first","_last",e._sort?"_start":0),uE(n)||(e._recent=n),i||R4(e,n),e._ts<0&&K_(e,e._tTime),e},O4=function(e,n){return(Ps.ScrollTrigger||h2("scrollTrigger",n))&&Ps.ScrollTrigger.create(n,e)},B4=function(e,n,r,i,s){if(v2(e,n,s),!e._initted)return 1;if(!r&&e._pt&&!Ai&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&T4!==Ss.frame)return Pu.push(e),e._lazy=[s,i],1},Soe=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},uE=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},Aoe=function(e,n,r,i){var s=e.ratio,o=n<0||!n&&(!e._start&&Soe(e)&&!(!e._initted&&uE(e))||(e._ts<0||e._dp._ts<0)&&!uE(e))?0:1,a=e._rDelay,l=0,u,c,f;if(a&&e._repeat&&(l=Qm(0,e._tDur,n),c=hd(l,a),e._yoyo&&c&1&&(o=1-o),c!==hd(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||Ai||i||e._zTime===Sn||!n&&e._zTime){if(!e._initted&&B4(e,n,i,r,l))return;for(f=e._zTime,e._zTime=n||(r?Sn:0),r||(r=n&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=l,u=e._pt;u;)u.r(o,u.d),u=u._next;n<0&&lE(e,n,r,!0),e._onUpdate&&!r&&Xs(e,"onUpdate"),l&&e._repeat&&!r&&e.parent&&Xs(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===o&&(o&&zu(e,1),!r&&!Ai&&(Xs(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},Eoe=function(e,n,r){var i;if(r>n)for(i=e._first;i&&i._start<=r;){if(i.data==="isPause"&&i._start>n)return i;i=i._next}else for(i=e._last;i&&i._start>=r;){if(i.data==="isPause"&&i._start<n)return i;i=i._prev}},dd=function(e,n,r,i){var s=e._repeat,o=li(n)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:li(o*(s+1)+e._rDelay*s):o,a>0&&!i&&K_(e,e._tTime=e._tDur*a),e.parent&&J_(e),r||tf(e.parent,e),e},MI=function(e){return e instanceof is?tf(e):dd(e,e._dur)},Coe={_start:0,endTime:vm,totalDuration:vm},Ns=function t(e,n,r){var i=e.labels,s=e._recent||Coe,o=e.duration()>=Ws?s.endTime(!1):e._dur,a,l,u;return ei(n)&&(isNaN(n)||n in i)?(l=n.charAt(0),u=n.substr(-1)==="%",a=n.indexOf("="),l==="<"||l===">"?(a>=0&&(n=n.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(n.substr(1))||0)*(u?(a<0?s:r).totalDuration()/100:1)):a<0?(n in i||(i[n]=o),i[n]):(l=parseFloat(n.charAt(a-1)+n.substr(a+1)),u&&r&&(l=l/100*(Ei(r)?r[0]:r).totalDuration()),a>1?t(e,n.substr(0,a-1),r)+l:o+l)):n==null?o:+n},Eg=function(e,n,r){var i=pl(n[1]),s=(i?2:1)+(e<2?0:1),o=n[s],a,l;if(i&&(o.duration=n[1]),o.parent=r,e){for(a=o,l=r;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=ls(l.vars.inherit)&&l.parent;o.immediateRender=ls(a.immediateRender),e<2?o.runBackwards=1:o.startAt=n[s-1]}return new Lr(n[0],o,n[s+1])},Qu=function(e,n){return e||e===0?n(e):n},Qm=function(e,n,r){return r<e?e:r>n?n:r},Si=function(e,n){return!ei(e)||!(n=goe.exec(e))?"":n[1]},Moe=function(e,n,r){return Qu(r,function(i){return Qm(e,n,i)})},cE=[].slice,N4=function(e,n){return e&&La(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&La(e[0]))&&!e.nodeType&&e!==Vs},Doe=function(e,n,r){return r===void 0&&(r=[]),e.forEach(function(i){var s;return ei(i)&&!n||N4(i,1)?(s=r).push.apply(s,$s(i)):r.push(i)})||r},$s=function(e,n,r){return Sr&&!n&&Sr.selector?Sr.selector(e):ei(e)&&!r&&(oE||!pd())?cE.call((n||f2).querySelectorAll(e),0):Ei(e)?Doe(e,r):N4(e)?cE.call(e,0):e?[e]:[]},fE=function(e){return e=$s(e)[0]||P1("Invalid scope")||{},function(n){var r=e.current||e.nativeElement||e;return $s(n,r.querySelectorAll?r:r===e?P1("Invalid scope")||f2.createElement("div"):e)}},V4=function(e){return e.sort(function(){return .5-Math.random()})},z4=function(e){if(or(e))return e;var n=La(e)?e:{each:e},r=nf(n.ease),i=n.from||0,s=parseFloat(n.base)||0,o={},a=i>0&&i<1,l=isNaN(i)||a,u=n.axis,c=i,f=i;return ei(i)?c=f={center:.5,edges:.5,end:1}[i]||0:!a&&l&&(c=i[0],f=i[1]),function(h,d,p){var g=(p||n).length,x=o[g],_,m,v,b,w,A,E,S,C;if(!x){if(C=n.grid==="auto"?0:(n.grid||[1,Ws])[1],!C){for(E=-Ws;E<(E=p[C++].getBoundingClientRect().left)&&C<g;);C--}for(x=o[g]=[],_=l?Math.min(C,g)*c-.5:i%C,m=C===Ws?0:l?g*f/C-.5:i/C|0,E=0,S=Ws,A=0;A<g;A++)v=A%C-_,b=m-(A/C|0),x[A]=w=u?Math.abs(u==="y"?b:v):b4(v*v+b*b),w>E&&(E=w),w<S&&(S=w);i==="random"&&V4(x),x.max=E-S,x.min=S,x.v=g=(parseFloat(n.amount)||parseFloat(n.each)*(C>g?g-1:u?u==="y"?g/C:C:Math.max(C,g/C))||0)*(i==="edges"?-1:1),x.b=g<0?s-g:s,x.u=Si(n.amount||n.each)||0,r=r&&g<0?J4(r):r}return g=(x[h]-x.min)/x.max||0,li(x.b+(r?r(g):g)*x.v)+x.u}},hE=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var i=li(Math.round(parseFloat(r)/e)*e*n);return(i-i%1)/n+(pl(r)?0:Si(r))}},G4=function(e,n){var r=Ei(e),i,s;return!r&&La(e)&&(i=r=e.radius||Ws,e.values?(e=$s(e.values),(s=!pl(e[0]))&&(i*=i)):e=hE(e.increment)),Qu(n,r?or(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),u=Ws,c=0,f=e.length,h,d;f--;)s?(h=e[f].x-a,d=e[f].y-l,h=h*h+d*d):h=Math.abs(e[f]-a),h<u&&(u=h,c=f);return c=!i||u<=i?e[c]:o,s||c===o||pl(o)?c:c+Si(o)}:hE(e))},U4=function(e,n,r,i){return Qu(Ei(e)?!n:r===!0?!!(r=0):!i,function(){return Ei(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(i=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(n-e+r*.99))/r)*r*i)/i})},Toe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduce(function(s,o){return o(s)},i)}},Poe=function(e,n){return function(r){return e(parseFloat(r))+(n||Si(r))}},Loe=function(e,n,r){return W4(e,n,0,1,r)},H4=function(e,n,r){return Qu(r,function(i){return e[~~n(i)]})},Foe=function t(e,n,r){var i=n-e;return Ei(e)?H4(e,t(0,e.length),n):Qu(r,function(s){return(i+(s-e)%i)%i+e})},Ioe=function t(e,n,r){var i=n-e,s=i*2;return Ei(e)?H4(e,t(0,e.length-1),n):Qu(r,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},ym=function(e){for(var n=0,r="",i,s,o,a;~(i=e.indexOf("random(",n));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?E4:sE),r+=e.substr(n,i-n)+U4(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),n=o+1;return r+e.substr(n,e.length-n)},W4=function(e,n,r,i,s){var o=n-e,a=i-r;return Qu(s,function(l){return r+((l-e)/o*a||0)})},koe=function t(e,n,r,i){var s=isNaN(e+n)?0:function(d){return(1-d)*e+d*n};if(!s){var o=ei(e),a={},l,u,c,f,h;if(r===!0&&(i=1)&&(r=null),o)e={p:e},n={p:n};else if(Ei(e)&&!Ei(n)){for(c=[],f=e.length,h=f-2,u=1;u<f;u++)c.push(t(e[u-1],e[u]));f--,s=function(p){p*=f;var g=Math.min(h,~~p);return c[g](p-g)},r=n}else i||(e=lf(Ei(e)?[]:{},e));if(!c){for(l in n)m2.call(a,e,l,"get",n[l]);s=function(p){return w2(p,a)||(o?e.p:e)}}}return Qu(r,s)},DI=function(e,n,r){var i=e.labels,s=Ws,o,a,l;for(o in i)a=i[o]-n,a<0==!!r&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},Xs=function(e,n,r){var i=e.vars,s=i[n],o=Sr,a=e._ctx,l,u,c;if(!!s)return l=i[n+"Params"],u=i.callbackScope||e,r&&Pu.length&&L1(),a&&(Sr=a),c=l?s.apply(u,l):s.call(u),Sr=o,c},tg=function(e){return zu(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ai),e.progress()<1&&Xs(e,"onInterrupt"),e},Mh,$4=[],X4=function(e){if(!c2()){$4.push(e);return}e=!e.name&&e.default||e;var n=e.name,r=or(e),i=n&&!r&&e.init?function(){this._props=[]}:e,s={init:vm,render:w2,add:m2,kill:Joe,modifier:qoe,rawVars:0},o={targetTest:0,get:0,getSetter:_2,aliases:{},register:0};if(pd(),e!==i){if(bs[n])return;Qs(i,Qs(F1(e,s),o)),lf(i.prototype,lf(s,F1(e,o))),bs[i.prop=n]=i,e.targetTest&&(Uy.push(i),d2[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}D4(n,i),e.register&&e.register(ds,i,cs)},xn=255,ng={aqua:[0,xn,xn],lime:[0,xn,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xn],navy:[0,0,128],white:[xn,xn,xn],olive:[128,128,0],yellow:[xn,xn,0],orange:[xn,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xn,0,0],pink:[xn,192,203],cyan:[0,xn,xn],transparent:[xn,xn,xn,0]},fS=function(e,n,r){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(r-n)*e*6:e<.5?r:e*3<2?n+(r-n)*(2/3-e)*6:n)*xn+.5|0},Y4=function(e,n,r){var i=e?pl(e)?[e>>16,e>>8&xn,e&xn]:0:ng.black,s,o,a,l,u,c,f,h,d,p;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),ng[e])i=ng[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&xn,i&xn,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&xn,e&xn]}else if(e.substr(0,3)==="hsl"){if(i=p=e.match(sE),!n)l=+i[0]%360/360,u=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(u+1):c+u-c*u,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=fS(l+1/3,s,o),i[1]=fS(l,s,o),i[2]=fS(l-1/3,s,o);else if(~e.indexOf("="))return i=e.match(S4),r&&i.length<4&&(i[3]=1),i}else i=e.match(sE)||ng.transparent;i=i.map(Number)}return n&&!p&&(s=i[0]/xn,o=i[1]/xn,a=i[2]/xn,f=Math.max(s,o,a),h=Math.min(s,o,a),c=(f+h)/2,f===h?l=u=0:(d=f-h,u=c>.5?d/(2-f-h):d/(f+h),l=f===s?(o-a)/d+(o<a?6:0):f===o?(a-s)/d+2:(s-o)/d+4,l*=60),i[0]=~~(l+.5),i[1]=~~(u*100+.5),i[2]=~~(c*100+.5)),r&&i.length<4&&(i[3]=1),i},j4=function(e){var n=[],r=[],i=-1;return e.split(Lu).forEach(function(s){var o=s.match(Ch)||[];n.push.apply(n,o),r.push(i+=o.length+1)}),n.c=r,n},TI=function(e,n,r){var i="",s=(e+i).match(Lu),o=n?"hsla(":"rgba(",a=0,l,u,c,f;if(!s)return e;if(s=s.map(function(h){return(h=Y4(h,n,1))&&o+(n?h[0]+","+h[1]+"%,"+h[2]+"%,"+h[3]:h.join(","))+")"}),r&&(c=j4(e),l=r.c,l.join(i)!==c.c.join(i)))for(u=e.replace(Lu,"1").split(Ch),f=u.length-1;a<f;a++)i+=u[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:r).shift());if(!u)for(u=e.split(Lu),f=u.length-1;a<f;a++)i+=u[a]+s[a];return i+u[f]},Lu=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in ng)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Roe=/hsl[a]?\(/,q4=function(e){var n=e.join(" "),r;if(Lu.lastIndex=0,Lu.test(n))return r=Roe.test(n),e[1]=TI(e[1],r),e[0]=TI(e[0],r,j4(e[1])),!0},_m,Ss=function(){var t=Date.now,e=500,n=33,r=t(),i=r,s=1e3/240,o=s,a=[],l,u,c,f,h,d,p=function g(x){var _=t()-i,m=x===!0,v,b,w,A;if(_>e&&(r+=_-n),i+=_,w=i-r,v=w-o,(v>0||m)&&(A=++f.frame,h=w-f.time*1e3,f.time=w=w/1e3,o+=v+(v>=s?4:s-v),b=1),m||(l=u(g)),b)for(d=0;d<a.length;d++)a[d](w,h,A,x)};return f={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(x){return h/(1e3/(x||60))},wake:function(){C4&&(!oE&&c2()&&(Vs=oE=window,f2=Vs.document||{},Ps.gsap=ds,(Vs.gsapVersions||(Vs.gsapVersions=[])).push(ds.version),M4(T1||Vs.GreenSockGlobals||!Vs.gsap&&Vs||{}),c=Vs.requestAnimationFrame,$4.forEach(X4)),l&&f.sleep(),u=c||function(x){return setTimeout(x,o-f.time*1e3+1|0)},_m=1,p(2))},sleep:function(){(c?Vs.cancelAnimationFrame:clearTimeout)(l),_m=0,u=vm},lagSmoothing:function(x,_){e=x||1/0,n=Math.min(_||33,e)},fps:function(x){s=1e3/(x||240),o=f.time*1e3+s},add:function(x,_,m){var v=_?function(b,w,A,E){x(b,w,A,E),f.remove(v)}:x;return f.remove(x),a[m?"unshift":"push"](v),pd(),v},remove:function(x,_){~(_=a.indexOf(x))&&a.splice(_,1)&&d>=_&&d--},_listeners:a},f}(),pd=function(){return!_m&&Ss.wake()},Yt={},Ooe=/^[\d.\-M][\d.\-,\s]/,Boe=/["']/g,Noe=function(e){for(var n={},r=e.substr(1,e.length-3).split(":"),i=r[0],s=1,o=r.length,a,l,u;s<o;s++)l=r[s],a=s!==o-1?l.lastIndexOf(","):l.length,u=l.substr(0,a),n[i]=isNaN(u)?u.replace(Boe,"").trim():+u,i=l.substr(a+1).trim();return n},Voe=function(e){var n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n);return e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)},zoe=function(e){var n=(e+"").split("("),r=Yt[n[0]];return r&&n.length>1&&r.config?r.config.apply(null,~e.indexOf("{")?[Noe(n[1])]:Voe(e).split(",").map(F4)):Yt._CE&&Ooe.test(e)?Yt._CE("",e):r},J4=function(e){return function(n){return 1-e(1-n)}},K4=function t(e,n){for(var r=e._first,i;r;)r instanceof is?t(r,n):r.vars.yoyoEase&&(!r._yoyo||!r._repeat)&&r._yoyo!==n&&(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},nf=function(e,n){return e&&(or(e)?e:Yt[e]||zoe(e))||n},hf=function(e,n,r,i){r===void 0&&(r=function(l){return 1-n(1-l)}),i===void 0&&(i=function(l){return l<.5?n(l*2)/2:1-n((1-l)*2)/2});var s={easeIn:n,easeOut:r,easeInOut:i},o;return us(e,function(a){Yt[a]=Ps[a]=s,Yt[o=a.toLowerCase()]=r;for(var l in s)Yt[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Yt[a+"."+l]=s[l]}),s},Z4=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},hS=function t(e,n,r){var i=n>=1?n:1,s=(r||(e?.3:.45))/(n<1?n:1),o=s/iE*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*poe((c-o)*s)+1},l=e==="out"?a:e==="in"?function(u){return 1-a(1-u)}:Z4(a);return s=iE/s,l.config=function(u,c){return t(e,u,c)},l},dS=function t(e,n){n===void 0&&(n=1.70158);var r=function(o){return o?--o*o*((n+1)*o+n)+1:0},i=e==="out"?r:e==="in"?function(s){return 1-r(1-s)}:Z4(r);return i.config=function(s){return t(e,s)},i};us("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;hf(t+",Power"+(n-1),e?function(r){return Math.pow(r,n)}:function(r){return r},function(r){return 1-Math.pow(1-r,n)},function(r){return r<.5?Math.pow(r*2,n)/2:1-Math.pow((1-r)*2,n)/2})});Yt.Linear.easeNone=Yt.none=Yt.Linear.easeIn;hf("Elastic",hS("in"),hS("out"),hS());(function(t,e){var n=1/e,r=2*n,i=2.5*n,s=function(a){return a<n?t*a*a:a<r?t*Math.pow(a-1.5/e,2)+.75:a<i?t*(a-=2.25/e)*a+.9375:t*Math.pow(a-2.625/e,2)+.984375};hf("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);hf("Expo",function(t){return t?Math.pow(2,10*(t-1)):0});hf("Circ",function(t){return-(b4(1-t*t)-1)});hf("Sine",function(t){return t===1?1:-doe(t*foe)+1});hf("Back",dS("in"),dS("out"),dS());Yt.SteppedEase=Yt.steps=Ps.SteppedEase={config:function(e,n){e===void 0&&(e=1);var r=1/e,i=e+(n?0:1),s=n?1:0,o=1-Sn;return function(a){return((i*Qm(0,o,a)|0)+s)*r}}};fd.ease=Yt["quad.out"];us("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return p2+=t+","+t+"Params,"});var Q4=function(e,n){this.id=hoe++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:P4,this.set=n?n.getSetter:_2},gd=function(){function t(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,dd(this,+n.duration,1,1),this.data=n.data,Sr&&(this._ctx=Sr,Sr.data.push(this)),_m||Ss.wake()}var e=t.prototype;return e.delay=function(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay},e.duration=function(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur},e.totalDuration=function(r){return arguments.length?(this._dirty=0,dd(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(r,i){if(pd(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(K_(this,r),!s._dp||s.parent||R4(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&pa(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===Sn||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),L4(this,r,i)),this},e.time=function(r,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+CI(this))%(this._dur+this._rDelay)||(r?this._dur:0),i):this._time},e.totalProgress=function(r,i){return arguments.length?this.totalTime(this.totalDuration()*r,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(r,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+CI(this),i):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(r,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*s,i):this._repeat?hd(this._tTime,s)+1:1},e.timeScale=function(r){if(!arguments.length)return this._rts===-Sn?0:this._rts;if(this._rts===r)return this;var i=this.parent&&this._ts?I1(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Sn?0:this._rts,this.totalTime(Qm(-Math.abs(this._delay),this._tDur,i),!0),J_(this),boe(this)},e.paused=function(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(pd(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Sn&&(this._tTime-=Sn)))),this):this._ps},e.startTime=function(r){if(arguments.length){this._start=r;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&pa(i,this,r-this._delay),this}return this._start},e.endTime=function(r){return this._start+(ls(r)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(r){var i=this.parent||this._dp;return i?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?I1(i.rawTime(r),this):this._tTime:this._tTime},e.revert=function(r){r===void 0&&(r=voe);var i=Ai;return Ai=r,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(r),this.totalTime(-.01,r.suppressEvents)),this.data!=="nested"&&r.kill!==!1&&this.kill(),Ai=i,this},e.globalTime=function(r){for(var i=this,s=arguments.length?r:i.rawTime();i;)s=i._start+s/(i._ts||1),i=i._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(r):s},e.repeat=function(r){return arguments.length?(this._repeat=r===1/0?-2:r,MI(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(r){if(arguments.length){var i=this._time;return this._rDelay=r,MI(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(r){return arguments.length?(this._yoyo=r,this):this._yoyo},e.seek=function(r,i){return this.totalTime(Ns(this,r),ls(i))},e.restart=function(r,i){return this.play().totalTime(r?-this._delay:0,ls(i))},e.play=function(r,i){return r!=null&&this.seek(r,i),this.reversed(!1).paused(!1)},e.reverse=function(r,i){return r!=null&&this.seek(r||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(r,i){return r!=null&&this.seek(r,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Sn:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Sn,this},e.isActive=function(){var r=this.parent||this._dp,i=this._start,s;return!!(!r||this._ts&&this._initted&&r.isActive()&&(s=r.rawTime(!0))>=i&&s<this.endTime(!0)-Sn)},e.eventCallback=function(r,i,s){var o=this.vars;return arguments.length>1?(i?(o[r]=i,s&&(o[r+"Params"]=s),r==="onUpdate"&&(this._onUpdate=i)):delete o[r],this):o[r]},e.then=function(r){var i=this;return new Promise(function(s){var o=or(r)?r:I4,a=function(){var u=i.then;i.then=null,or(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=u),s(o),i.then=u};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){tg(this)},t}();Qs(gd.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Sn,_prom:0,_ps:!1,_rts:1});var is=function(t){w4(e,t);function e(r,i){var s;return r===void 0&&(r={}),s=t.call(this,r)||this,s.labels={},s.smoothChildTiming=!!r.smoothChildTiming,s.autoRemoveChildren=!!r.autoRemoveChildren,s._sort=ls(r.sortChildren),Yn&&pa(r.parent||Yn,il(s),i),r.reversed&&s.reverse(),r.paused&&s.paused(!0),r.scrollTrigger&&O4(il(s),r.scrollTrigger),s}var n=e.prototype;return n.to=function(i,s,o){return Eg(0,arguments,this),this},n.from=function(i,s,o){return Eg(1,arguments,this),this},n.fromTo=function(i,s,o,a){return Eg(2,arguments,this),this},n.set=function(i,s,o){return s.duration=0,s.parent=this,Ag(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Lr(i,s,Ns(this,o),1),this},n.call=function(i,s,o){return pa(this,Lr.delayedCall(0,i,s),o)},n.staggerTo=function(i,s,o,a,l,u,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=u,o.onCompleteParams=c,o.parent=this,new Lr(i,o,Ns(this,l)),this},n.staggerFrom=function(i,s,o,a,l,u,c){return o.runBackwards=1,Ag(o).immediateRender=ls(o.immediateRender),this.staggerTo(i,s,o,a,l,u,c)},n.staggerFromTo=function(i,s,o,a,l,u,c,f){return a.startAt=o,Ag(a).immediateRender=ls(a.immediateRender),this.staggerTo(i,s,a,l,u,c,f)},n.render=function(i,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,u=this._dur,c=i<=0?0:li(i),f=this._zTime<0!=i<0&&(this._initted||!u),h,d,p,g,x,_,m,v,b,w,A,E;if(this!==Yn&&c>l&&i>=0&&(c=l),c!==this._tTime||o||f){if(a!==this._time&&u&&(c+=this._time-a,i+=this._time-a),h=c,b=this._start,v=this._ts,_=!v,f&&(u||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(A=this._yoyo,x=u+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(x*100+i,s,o);if(h=li(c%x),c===l?(g=this._repeat,h=u):(g=~~(c/x),g&&g===c/x&&(h=u,g--),h>u&&(h=u)),w=hd(this._tTime,x),!a&&this._tTime&&w!==g&&this._tTime-w*x-this._dur<=0&&(w=g),A&&g&1&&(h=u-h,E=1),g!==w&&!this._lock){var S=A&&w&1,C=S===(A&&g&1);if(g<w&&(S=!S),a=S?0:u,this._lock=1,this.render(a||(E?0:li(g*x)),s,!u)._lock=0,this._tTime=c,!s&&this.parent&&Xs(this,"onRepeat"),this.vars.repeatRefresh&&!E&&(this.invalidate()._lock=1),a&&a!==this._time||_!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(u=this._dur,l=this._tDur,C&&(this._lock=2,a=S?u:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!E&&this.invalidate()),this._lock=0,!this._ts&&!_)return this;K4(this,E)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(m=Eoe(this,li(a),li(h)),m&&(c-=h-(h=m._start))),this._tTime=c,this._time=h,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&h&&!s&&!g&&(Xs(this,"onStart"),this._tTime!==c))return this;if(h>=a&&i>=0)for(d=this._first;d;){if(p=d._next,(d._act||h>=d._start)&&d._ts&&m!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(h-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(h-d._start)*d._ts,s,o),h!==this._time||!this._ts&&!_){m=0,p&&(c+=this._zTime=-Sn);break}}d=p}else{d=this._last;for(var M=i<0?i:h;d;){if(p=d._prev,(d._act||M<=d._end)&&d._ts&&m!==d){if(d.parent!==this)return this.render(i,s,o);if(d.render(d._ts>0?(M-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(M-d._start)*d._ts,s,o||Ai&&(d._initted||d._startAt)),h!==this._time||!this._ts&&!_){m=0,p&&(c+=this._zTime=M?-Sn:Sn);break}}d=p}}if(m&&!s&&(this.pause(),m.render(h>=a?0:-Sn)._zTime=h>=a?1:-1,this._ts))return this._start=b,J_(this),this.render(i,s,o);this._onUpdate&&!s&&Xs(this,"onUpdate",!0),(c===l&&this._tTime>=this.totalDuration()||!c&&a)&&(b===this._start||Math.abs(v)!==Math.abs(this._ts))&&(this._lock||((i||!u)&&(c===l&&this._ts>0||!c&&this._ts<0)&&zu(this,1),!s&&!(i<0&&!a)&&(c||a||!l)&&(Xs(this,c===l&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(i,s){var o=this;if(pl(s)||(s=Ns(this,s,i)),!(i instanceof gd)){if(Ei(i))return i.forEach(function(a){return o.add(a,s)}),this;if(ei(i))return this.addLabel(i,s);if(or(i))i=Lr.delayedCall(0,i);else return this}return this!==i?pa(this,i,s):this},n.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Ws);for(var l=[],u=this._first;u;)u._start>=a&&(u instanceof Lr?s&&l.push(u):(o&&l.push(u),i&&l.push.apply(l,u.getChildren(!0,s,o)))),u=u._next;return l},n.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},n.remove=function(i){return ei(i)?this.removeLabel(i):or(i)?this.killTweensOf(i):(q_(this,i),i===this._recent&&(this._recent=this._last),tf(this))},n.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=li(Ss.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),t.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},n.addLabel=function(i,s){return this.labels[i]=Ns(this,s),this},n.removeLabel=function(i){return delete this.labels[i],this},n.addPause=function(i,s,o){var a=Lr.delayedCall(0,s||vm,o);return a.data="isPause",this._hasPause=1,pa(this,a,Ns(this,i))},n.removePause=function(i){var s=this._first;for(i=Ns(this,i);s;)s._start===i&&s.data==="isPause"&&zu(s),s=s._next},n.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),l=a.length;l--;)du!==a[l]&&a[l].kill(i,s);return this},n.getTweensOf=function(i,s){for(var o=[],a=$s(i),l=this._first,u=pl(s),c;l;)l instanceof Lr?yoe(l._targets,a)&&(u?(!du||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(c=l.getTweensOf(a,s)).length&&o.push.apply(o,c),l=l._next;return o},n.tweenTo=function(i,s){s=s||{};var o=this,a=Ns(o,i),l=s,u=l.startAt,c=l.onStart,f=l.onStartParams,h=l.immediateRender,d,p=Lr.to(o,Qs({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale())||Sn,onStart:function(){if(o.pause(),!d){var x=s.duration||Math.abs((a-(u&&"time"in u?u.time:o._time))/o.timeScale());p._dur!==x&&dd(p,x,0,1).render(p._time,!0,!0),d=1}c&&c.apply(p,f||[])}},s));return h?p.render(0):p},n.tweenFromTo=function(i,s,o){return this.tweenTo(s,Qs({startAt:{time:Ns(this,i)}},o))},n.recent=function(){return this._recent},n.nextLabel=function(i){return i===void 0&&(i=this._time),DI(this,Ns(this,i))},n.previousLabel=function(i){return i===void 0&&(i=this._time),DI(this,Ns(this,i),1)},n.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+Sn)},n.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,u;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(u in l)l[u]>=o&&(l[u]+=i);return tf(this)},n.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return t.prototype.invalidate.call(this,i)},n.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),tf(this)},n.totalDuration=function(i){var s=0,o=this,a=o._last,l=Ws,u,c,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(f=o.parent;a;)u=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,pa(o,a,c-a._delay,1)._lock=0):l=c,c<0&&a._ts&&(s-=c,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=u;dd(o,o===Yn&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(Yn._ts&&(L4(Yn,I1(i,Yn)),T4=Ss.frame),Ss.frame>=AI){AI+=Ds.autoSleep||120;var s=Yn._first;if((!s||!s._ts)&&Ds.autoSleep&&Ss._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ss.sleep()}}},e}(gd);Qs(is.prototype,{_lock:0,_hasPause:0,_forcing:0});var Goe=function(e,n,r,i,s,o,a){var l=new cs(this._pt,e,n,0,1,sV,null,s),u=0,c=0,f,h,d,p,g,x,_,m;for(l.b=r,l.e=i,r+="",i+="",(_=~i.indexOf("random("))&&(i=ym(i)),o&&(m=[r,i],o(m,e,n),r=m[0],i=m[1]),h=r.match(uS)||[];f=uS.exec(i);)p=f[0],g=i.substring(u,f.index),d?d=(d+1)%5:g.substr(-5)==="rgba("&&(d=1),p!==h[c++]&&(x=parseFloat(h[c-1])||0,l._pt={_next:l._pt,p:g||c===1?g:",",s:x,c:p.charAt(1)==="="?jh(x,p)-x:parseFloat(p)-x,m:d&&d<4?Math.round:0},u=uS.lastIndex);return l.c=u<i.length?i.substring(u,i.length):"",l.fp=a,(A4.test(i)||_)&&(l.e=0),this._pt=l,l},m2=function(e,n,r,i,s,o,a,l,u,c){or(i)&&(i=i(s||0,e,o));var f=e[n],h=r!=="get"?r:or(f)?u?e[n.indexOf("set")||!or(e["get"+n.substr(3)])?n:"get"+n.substr(3)](u):e[n]():f,d=or(f)?u?Xoe:rV:y2,p;if(ei(i)&&(~i.indexOf("random(")&&(i=ym(i)),i.charAt(1)==="="&&(p=jh(h,i)+(Si(h)||0),(p||p===0)&&(i=p))),!c||h!==i||dE)return!isNaN(h*i)&&i!==""?(p=new cs(this._pt,e,n,+h||0,i-(h||0),typeof f=="boolean"?joe:iV,0,d),u&&(p.fp=u),a&&p.modifier(a,this,e),this._pt=p):(!f&&!(n in e)&&h2(n,i),Goe.call(this,e,n,h,i,d,l||Ds.stringFilter,u))},Uoe=function(e,n,r,i,s){if(or(e)&&(e=Cg(e,s,n,r,i)),!La(e)||e.style&&e.nodeType||Ei(e)||x4(e))return ei(e)?Cg(e,s,n,r,i):e;var o={},a;for(a in e)o[a]=Cg(e[a],s,n,r,i);return o},eV=function(e,n,r,i,s,o){var a,l,u,c;if(bs[e]&&(a=new bs[e]).init(s,a.rawVars?n[e]:Uoe(n[e],i,s,o,r),r,i,o)!==!1&&(r._pt=l=new cs(r._pt,s,e,0,1,a.render,a,0,a.priority),r!==Mh))for(u=r._ptLookup[r._targets.indexOf(s)],c=a._props.length;c--;)u[a._props[c]]=l;return a},du,dE,v2=function t(e,n,r){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,l=i.lazy,u=i.onUpdate,c=i.onUpdateParams,f=i.callbackScope,h=i.runBackwards,d=i.yoyoEase,p=i.keyframes,g=i.autoRevert,x=e._dur,_=e._startAt,m=e._targets,v=e.parent,b=v&&v.data==="nested"?v.vars.targets:m,w=e._overwrite==="auto"&&!l2,A=e.timeline,E,S,C,M,D,T,L,F,k,I,O,$,N;if(A&&(!p||!s)&&(s="none"),e._ease=nf(s,fd.ease),e._yEase=d?J4(nf(d===!0?s:d,fd.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!A&&!!i.runBackwards,!A||p&&!i.stagger){if(F=m[0]?ef(m[0]).harness:0,$=F&&i[F.prop],E=F1(i,d2),_&&(_._zTime<0&&_.progress(1),n<0&&h&&a&&!g?_.render(-1,!0):_.revert(h&&x?Gy:moe),_._lazy=0),o){if(zu(e._startAt=Lr.set(m,Qs({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!_&&ls(l),startAt:null,delay:0,onUpdate:u,onUpdateParams:c,callbackScope:f,stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Ai||!a&&!g)&&e._startAt.revert(Gy),a&&x&&n<=0&&r<=0){n&&(e._zTime=n);return}}else if(h&&x&&!_){if(n&&(a=!1),C=Qs({overwrite:!1,data:"isFromStart",lazy:a&&!_&&ls(l),immediateRender:a,stagger:0,parent:v},E),$&&(C[F.prop]=$),zu(e._startAt=Lr.set(m,C)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Ai?e._startAt.revert(Gy):e._startAt.render(-1,!0)),e._zTime=n,!a)t(e._startAt,Sn,Sn);else if(!n)return}for(e._pt=e._ptCache=0,l=x&&ls(l)||l&&!x,S=0;S<m.length;S++){if(D=m[S],L=D._gsap||g2(m)[S]._gsap,e._ptLookup[S]=I={},aE[L.id]&&Pu.length&&L1(),O=b===m?S:b.indexOf(D),F&&(k=new F).init(D,$||E,e,O,b)!==!1&&(e._pt=M=new cs(e._pt,D,k.name,0,1,k.render,k,0,k.priority),k._props.forEach(function(W){I[W]=M}),k.priority&&(T=1)),!F||$)for(C in E)bs[C]&&(k=eV(C,E,e,O,D,b))?k.priority&&(T=1):I[C]=M=m2.call(e,D,C,"get",E[C],O,b,0,i.stringFilter);e._op&&e._op[S]&&e.kill(D,e._op[S]),w&&e._pt&&(du=e,Yn.killTweensOf(D,I,e.globalTime(n)),N=!e.parent,du=0),e._pt&&l&&(aE[L.id]=1)}T&&oV(e),e._onInit&&e._onInit(e)}e._onUpdate=u,e._initted=(!e._op||e._pt)&&!N,p&&n<=0&&A.render(Ws,!0,!0)},Hoe=function(e,n,r,i,s,o,a){var l=(e._pt&&e._ptCache||(e._ptCache={}))[n],u,c,f,h;if(!l)for(l=e._ptCache[n]=[],f=e._ptLookup,h=e._targets.length;h--;){if(u=f[h][n],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==n&&u.fp!==n;)u=u._next;if(!u)return dE=1,e.vars[n]="+=0",v2(e,a),dE=0,1;l.push(u)}for(h=l.length;h--;)c=l[h],u=c._pt||c,u.s=(i||i===0)&&!s?i:u.s+(i||0)+o*u.c,u.c=r-u.s,c.e&&(c.e=dr(r)+Si(c.e)),c.b&&(c.b=u.s+Si(c.b))},Woe=function(e,n){var r=e[0]?ef(e[0]).harness:0,i=r&&r.aliases,s,o,a,l;if(!i)return n;s=lf({},n);for(o in i)if(o in s)for(l=i[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},$oe=function(e,n,r,i){var s=n.ease||i||"power1.inOut",o,a;if(Ei(n))a=r[e]||(r[e]=[]),n.forEach(function(l,u){return a.push({t:u/(n.length-1)*100,v:l,e:s})});else for(o in n)a=r[o]||(r[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:n[o],e:s})},Cg=function(e,n,r,i,s){return or(e)?e.call(n,r,i,s):ei(e)&&~e.indexOf("random(")?ym(e):e},tV=p2+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",nV={};us(tV+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return nV[t]=1});var Lr=function(t){w4(e,t);function e(r,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=t.call(this,o?i:Ag(i))||this;var l=a.vars,u=l.duration,c=l.delay,f=l.immediateRender,h=l.stagger,d=l.overwrite,p=l.keyframes,g=l.defaults,x=l.scrollTrigger,_=l.yoyoEase,m=i.parent||Yn,v=(Ei(r)||x4(r)?pl(r[0]):"length"in i)?[r]:$s(r),b,w,A,E,S,C,M,D;if(a._targets=v.length?g2(v):P1("GSAP target "+r+" not found. https://greensock.com",!Ds.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,p||h||q0(u)||q0(c)){if(i=a.vars,b=a.timeline=new is({data:"nested",defaults:g||{},targets:m&&m.data==="nested"?m.vars.targets:v}),b.kill(),b.parent=b._dp=il(a),b._start=0,h||q0(u)||q0(c)){if(E=v.length,M=h&&z4(h),La(h))for(S in h)~tV.indexOf(S)&&(D||(D={}),D[S]=h[S]);for(w=0;w<E;w++)A=F1(i,nV),A.stagger=0,_&&(A.yoyoEase=_),D&&lf(A,D),C=v[w],A.duration=+Cg(u,il(a),w,C,v),A.delay=(+Cg(c,il(a),w,C,v)||0)-a._delay,!h&&E===1&&A.delay&&(a._delay=c=A.delay,a._start+=c,A.delay=0),b.to(C,A,M?M(w,C,v):0),b._ease=Yt.none;b.duration()?u=c=0:a.timeline=0}else if(p){Ag(Qs(b.vars.defaults,{ease:"none"})),b._ease=nf(p.ease||i.ease||"none");var T=0,L,F,k;if(Ei(p))p.forEach(function(I){return b.to(v,I,">")}),b.duration();else{A={};for(S in p)S==="ease"||S==="easeEach"||$oe(S,p[S],A,p.easeEach);for(S in A)for(L=A[S].sort(function(I,O){return I.t-O.t}),T=0,w=0;w<L.length;w++)F=L[w],k={ease:F.e,duration:(F.t-(w?L[w-1].t:0))/100*u},k[S]=F.v,b.to(v,k,T),T+=k.duration;b.duration()<u&&b.to({},{duration:u-b.duration()})}}u||a.duration(u=b.duration())}else a.timeline=0;return d===!0&&!l2&&(du=il(a),Yn.killTweensOf(v),du=0),pa(m,il(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(f||!u&&!p&&a._start===li(m._time)&&ls(f)&&xoe(il(a))&&m.data!=="nested")&&(a._tTime=-Sn,a.render(Math.max(0,-c)||0)),x&&O4(il(a),x),a}var n=e.prototype;return n.render=function(i,s,o){var a=this._time,l=this._tDur,u=this._dur,c=i<0,f=i>l-Sn&&!c?l:i<Sn?0:i,h,d,p,g,x,_,m,v,b;if(!u)Aoe(this,i,s,o);else if(f!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c){if(h=f,v=this.timeline,this._repeat){if(g=u+this._rDelay,this._repeat<-1&&c)return this.totalTime(g*100+i,s,o);if(h=li(f%g),f===l?(p=this._repeat,h=u):(p=~~(f/g),p&&p===f/g&&(h=u,p--),h>u&&(h=u)),_=this._yoyo&&p&1,_&&(b=this._yEase,h=u-h),x=hd(this._tTime,g),h===a&&!o&&this._initted)return this._tTime=f,this;p!==x&&(v&&this._yEase&&K4(v,_),this.vars.repeatRefresh&&!_&&!this._lock&&(this._lock=o=1,this.render(li(g*p),!0).invalidate()._lock=0))}if(!this._initted){if(B4(this,c?i:h,o,s,f))return this._tTime=0,this;if(a!==this._time)return this;if(u!==this._dur)return this.render(i,s,o)}if(this._tTime=f,this._time=h,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=m=(b||this._ease)(h/u),this._from&&(this.ratio=m=1-m),h&&!a&&!s&&!p&&(Xs(this,"onStart"),this._tTime!==f))return this;for(d=this._pt;d;)d.r(m,d.d),d=d._next;v&&v.render(i<0?i:!h&&_?-Sn:v._dur*v._ease(h/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&lE(this,i,s,o),Xs(this,"onUpdate")),this._repeat&&p!==x&&this.vars.onRepeat&&!s&&this.parent&&Xs(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(c&&!this._onUpdate&&lE(this,i,!0,!0),(i||!u)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&zu(this,1),!s&&!(c&&!a)&&(f||a||_)&&(Xs(this,f===l?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),t.prototype.invalidate.call(this,i)},n.resetTo=function(i,s,o,a){_m||Ss.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||v2(this,l),u=this._ease(l/this._dur),Hoe(this,i,s,o,a,u,l)?this.resetTo(i,s,o,a):(K_(this,0),this.parent||k4(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?tg(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,du&&du.vars.overwrite!==!0)._first||tg(this),this.parent&&o!==this.timeline.totalDuration()&&dd(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=i?$s(i):a,u=this._ptLookup,c=this._pt,f,h,d,p,g,x,_;if((!s||s==="all")&&woe(a,l))return s==="all"&&(this._pt=0),tg(this);for(f=this._op=this._op||[],s!=="all"&&(ei(s)&&(g={},us(s,function(m){return g[m]=1}),s=g),s=Woe(a,s)),_=a.length;_--;)if(~l.indexOf(a[_])){h=u[_],s==="all"?(f[_]=s,p=h,d={}):(d=f[_]=f[_]||{},p=s);for(g in p)x=h&&h[g],x&&((!("kill"in x.d)||x.d.kill(g)===!0)&&q_(this,x,"_pt"),delete h[g]),d!=="all"&&(d[g]=1)}return this._initted&&!this._pt&&c&&tg(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Eg(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Eg(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return Yn.killTweensOf(i,s,o)},e}(gd);Qs(Lr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});us("staggerTo,staggerFrom,staggerFromTo",function(t){Lr[t]=function(){var e=new is,n=cE.call(arguments,0);return n.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,n)}});var y2=function(e,n,r){return e[n]=r},rV=function(e,n,r){return e[n](r)},Xoe=function(e,n,r,i){return e[n](i.fp,r)},Yoe=function(e,n,r){return e.setAttribute(n,r)},_2=function(e,n){return or(e[n])?rV:u2(e[n])&&e.setAttribute?Yoe:y2},iV=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},joe=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},sV=function(e,n){var r=n._pt,i="";if(!e&&n.b)i=n.b;else if(e===1&&n.e)i=n.e;else{for(;r;)i=r.p+(r.m?r.m(r.s+r.c*e):Math.round((r.s+r.c*e)*1e4)/1e4)+i,r=r._next;i+=n.c}n.set(n.t,n.p,i,n)},w2=function(e,n){for(var r=n._pt;r;)r.r(e,r.d),r=r._next},qoe=function(e,n,r,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,n,r),s=o},Joe=function(e){for(var n=this._pt,r,i;n;)i=n._next,n.p===e&&!n.op||n.op===e?q_(this,n,"_pt"):n.dep||(r=1),n=i;return!r},Koe=function(e,n,r,i){i.mSet(e,n,i.m.call(i.tween,r,i.mt),i)},oV=function(e){for(var n=e._pt,r,i,s,o;n;){for(r=n._next,i=s;i&&i.pr>n.pr;)i=i._next;(n._prev=i?i._prev:o)?n._prev._next=n:s=n,(n._next=i)?i._prev=n:o=n,n=r}e._pt=s},cs=function(){function t(n,r,i,s,o,a,l,u,c){this.t=r,this.s=s,this.c=o,this.p=i,this.r=a||iV,this.d=l||this,this.set=u||y2,this.pr=c||0,this._next=n,n&&(n._prev=this)}var e=t.prototype;return e.modifier=function(r,i,s){this.mSet=this.mSet||this.set,this.set=Koe,this.m=r,this.mt=s,this.tween=i},t}();us(p2+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return d2[t]=1});Ps.TweenMax=Ps.TweenLite=Lr;Ps.TimelineLite=Ps.TimelineMax=is;Yn=new is({sortChildren:!1,defaults:fd,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ds.stringFilter=q4;var md=[],Hy={},Zoe=[],PI=0,pS=function(e){return(Hy[e]||Zoe).map(function(n){return n()})},pE=function(){var e=Date.now(),n=[];e-PI>2&&(pS("matchMediaInit"),md.forEach(function(r){var i=r.queries,s=r.conditions,o,a,l,u;for(a in i)o=Vs.matchMedia(i[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,u=1);u&&(r.revert(),l&&n.push(r))}),pS("matchMediaRevert"),n.forEach(function(r){return r.onMatch(r)}),PI=e,pS("matchMedia"))},aV=function(){function t(n,r){this.selector=r&&fE(r),this.data=[],this._r=[],this.isReverted=!1,n&&this.add(n)}var e=t.prototype;return e.add=function(r,i,s){or(r)&&(s=i,i=r,r=or);var o=this,a=function(){var u=Sr,c=o.selector,f;return u&&u!==o&&u.data.push(o),s&&(o.selector=fE(s)),Sr=o,f=i.apply(o,arguments),or(f)&&o._r.push(f),Sr=u,o.selector=c,o.isReverted=!1,f};return o.last=a,r===or?a(o):r?o[r]=a:a},e.ignore=function(r){var i=Sr;Sr=null,r(this),Sr=i},e.getTweens=function(){var r=[];return this.data.forEach(function(i){return i instanceof t?r.push.apply(r,i.getTweens()):i instanceof Lr&&!(i.parent&&i.parent.data==="nested")&&r.push(i)}),r},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(r,i){var s=this;if(r){var o=this.getTweens();this.data.forEach(function(l){l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(u){return o.splice(o.indexOf(u),1)}))}),o.map(function(l){return{g:l.globalTime(0),t:l}}).sort(function(l,u){return u.g-l.g||-1}).forEach(function(l){return l.t.revert(r)}),this.data.forEach(function(l){return!(l instanceof gd)&&l.revert&&l.revert(r)}),this._r.forEach(function(l){return l(r,s)}),this.isReverted=!0}else this.data.forEach(function(l){return l.kill&&l.kill()});if(this.clear(),i){var a=md.indexOf(this);~a&&md.splice(a,1)}},e.revert=function(r){this.kill(r||{})},t}(),Qoe=function(){function t(n){this.contexts=[],this.scope=n}var e=t.prototype;return e.add=function(r,i,s){La(r)||(r={matches:r});var o=new aV(0,s||this.scope),a=o.conditions={},l,u,c;this.contexts.push(o),i=o.add("onMatch",i),o.queries=r;for(u in r)u==="all"?c=1:(l=Vs.matchMedia(r[u]),l&&(md.indexOf(o)<0&&md.push(o),(a[u]=l.matches)&&(c=1),l.addListener?l.addListener(pE):l.addEventListener("change",pE)));return c&&i(o),this},e.revert=function(r){this.kill(r||{})},e.kill=function(r){this.contexts.forEach(function(i){return i.kill(r,!0)})},t}(),k1={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(function(i){return X4(i)})},timeline:function(e){return new is(e)},getTweensOf:function(e,n){return Yn.getTweensOf(e,n)},getProperty:function(e,n,r,i){ei(e)&&(e=$s(e)[0]);var s=ef(e||{}).get,o=r?I4:F4;return r==="native"&&(r=""),e&&(n?o((bs[n]&&bs[n].get||s)(e,n,r,i)):function(a,l,u){return o((bs[a]&&bs[a].get||s)(e,a,l,u))})},quickSetter:function(e,n,r){if(e=$s(e),e.length>1){var i=e.map(function(c){return ds.quickSetter(c,n,r)}),s=i.length;return function(c){for(var f=s;f--;)i[f](c)}}e=e[0]||{};var o=bs[n],a=ef(e),l=a.harness&&(a.harness.aliases||{})[n]||n,u=o?function(c){var f=new o;Mh._pt=0,f.init(e,r?c+r:c,Mh,0,[e]),f.render(1,f),Mh._pt&&w2(1,Mh)}:a.set(e,l);return o?u:function(c){return u(e,l,r?c+r:c,a,1)}},quickTo:function(e,n,r){var i,s=ds.to(e,lf((i={},i[n]="+=0.1",i.paused=!0,i),r||{})),o=function(l,u,c){return s.resetTo(n,l,u,c)};return o.tween=s,o},isTweening:function(e){return Yn.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=nf(e.ease,fd.ease)),EI(fd,e||{})},config:function(e){return EI(Ds,e||{})},registerEffect:function(e){var n=e.name,r=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!bs[a]&&!Ps[a]&&P1(n+" effect requires "+a+" plugin.")}),cS[n]=function(a,l,u){return r($s(a),Qs(l||{},s),u)},o&&(is.prototype[n]=function(a,l,u){return this.add(cS[n](a,La(l)?l:(u=l)&&{},this),u)})},registerEase:function(e,n){Yt[e]=nf(n)},parseEase:function(e,n){return arguments.length?nf(e,n):Yt},getById:function(e){return Yn.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var r=new is(e),i,s;for(r.smoothChildTiming=ls(e.smoothChildTiming),Yn.remove(r),r._dp=0,r._time=r._tTime=Yn._time,i=Yn._first;i;)s=i._next,(n||!(!i._dur&&i instanceof Lr&&i.vars.onComplete===i._targets[0]))&&pa(r,i,i._start-i._delay),i=s;return pa(Yn,r,0),r},context:function(e,n){return e?new aV(e,n):Sr},matchMedia:function(e){return new Qoe(e)},matchMediaRefresh:function(){return md.forEach(function(e){var n=e.conditions,r,i;for(i in n)n[i]&&(n[i]=!1,r=1);r&&e.revert()})||pE()},addEventListener:function(e,n){var r=Hy[e]||(Hy[e]=[]);~r.indexOf(n)||r.push(n)},removeEventListener:function(e,n){var r=Hy[e],i=r&&r.indexOf(n);i>=0&&r.splice(i,1)},utils:{wrap:Foe,wrapYoyo:Ioe,distribute:z4,random:U4,snap:G4,normalize:Loe,getUnit:Si,clamp:Moe,splitColor:Y4,toArray:$s,selector:fE,mapRange:W4,pipe:Toe,unitize:Poe,interpolate:koe,shuffle:V4},install:M4,effects:cS,ticker:Ss,updateRoot:is.updateRoot,plugins:bs,globalTimeline:Yn,core:{PropTween:cs,globals:D4,Tween:Lr,Timeline:is,Animation:gd,getCache:ef,_removeLinkedListItem:q_,reverting:function(){return Ai},context:function(e){return e&&Sr&&(Sr.data.push(e),e._ctx=Sr),Sr},suppressOverwrites:function(e){return l2=e}}};us("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return k1[t]=Lr[t]});Ss.add(is.updateRoot);Mh=k1.to({},{duration:0});var eae=function(e,n){for(var r=e._pt;r&&r.p!==n&&r.op!==n&&r.fp!==n;)r=r._next;return r},tae=function(e,n){var r=e._targets,i,s,o;for(i in n)for(s=r.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=eae(o,i)),o&&o.modifier&&o.modifier(n[i],e,r[s],i))},gS=function(e,n){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var l,u;if(ei(s)&&(l={},us(s,function(c){return l[c]=1}),s=l),n){l={};for(u in s)l[u]=n(s[u]);s=l}tae(a,s)}}}},ds=k1.registerPlugin({name:"attr",init:function(e,n,r,i,s){var o,a,l;this.tween=r;for(o in n)l=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(l||0)+"",n[o],i,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(e,n){for(var r=n._pt;r;)Ai?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",init:function(e,n){for(var r=n.length;r--;)this.add(e,r,e[r]||0,n[r],0,0,0,0,0,1)}},gS("roundProps",hE),gS("modifiers"),gS("snap",G4))||k1;Lr.version=is.version=ds.version="3.11.5";C4=1;c2()&&pd();Yt.Power0;Yt.Power1;Yt.Power2;Yt.Power3;Yt.Power4;Yt.Linear;Yt.Quad;Yt.Cubic;Yt.Quart;Yt.Quint;Yt.Strong;Yt.Elastic;Yt.Back;Yt.SteppedEase;Yt.Bounce;Yt.Sine;Yt.Expo;Yt.Circ;/*!
 * CSSPlugin 3.11.5
 * https://greensock.com
 *
 * Copyright 2008-2023, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var LI,pu,qh,b2,Uc,FI,x2,nae=function(){return typeof window<"u"},gl={},Ic=180/Math.PI,Jh=Math.PI/180,sh=Math.atan2,II=1e8,S2=/([A-Z])/g,rae=/(left|right|width|margin|padding|x)/i,iae=/[\s,\(]\S/,va={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},gE=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},sae=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},oae=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},aae=function(e,n){var r=n.s+n.c*e;n.set(n.t,n.p,~~(r+(r<0?-.5:.5))+n.u,n)},lV=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},uV=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},lae=function(e,n,r){return e.style[n]=r},uae=function(e,n,r){return e.style.setProperty(n,r)},cae=function(e,n,r){return e._gsap[n]=r},fae=function(e,n,r){return e._gsap.scaleX=e._gsap.scaleY=r},hae=function(e,n,r,i,s){var o=e._gsap;o.scaleX=o.scaleY=r,o.renderTransform(s,o)},dae=function(e,n,r,i,s){var o=e._gsap;o[n]=r,o.renderTransform(s,o)},Kn="transform",Io=Kn+"Origin",pae=function t(e,n){var r=this,i=this.target,s=i.style;if(e in gl){if(this.tfm=this.tfm||{},e!=="transform")e=va[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return r.tfm[o]=sl(i,o)}):this.tfm[e]=i._gsap.x?i._gsap[e]:sl(i,e);else return va.transform.split(",").forEach(function(o){return t.call(r,o,n)});if(this.props.indexOf(Kn)>=0)return;i._gsap.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Io,n,"")),e=Kn}(s||n)&&this.props.push(e,n,s[e])},cV=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},gae=function(){var e=this.props,n=this.target,r=n.style,i=n._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?n[e[s]]=e[s+2]:e[s+2]?r[e[s]]=e[s+2]:r.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(S2,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),s=x2(),(!s||!s.isStart)&&!r[Kn]&&(cV(r),i.uncache=1)}},fV=function(e,n){var r={target:e,props:[],revert:gae,save:pae};return e._gsap||ds.core.getCache(e),n&&n.split(",").forEach(function(i){return r.save(i)}),r},hV,mE=function(e,n){var r=pu.createElementNS?pu.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):pu.createElement(e);return r.style?r:pu.createElement(e)},xa=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(S2,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,vd(n)||n,1)||""},kI="O,Moz,ms,Ms,Webkit".split(","),vd=function(e,n,r){var i=n||Uc,s=i.style,o=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(kI[o]+e in s););return o<0?null:(o===3?"ms":o>=0?kI[o]:"")+e},vE=function(){nae()&&window.document&&(LI=window,pu=LI.document,qh=pu.documentElement,Uc=mE("div")||{style:{}},mE("div"),Kn=vd(Kn),Io=Kn+"Origin",Uc.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",hV=!!vd("perspective"),x2=ds.core.reverting,b2=1)},mS=function t(e){var n=mE("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,i=this.nextSibling,s=this.style.cssText,o;if(qh.appendChild(n),n.appendChild(this),this.style.display="block",e)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch{}else this._gsapBBox&&(o=this._gsapBBox());return r&&(i?r.insertBefore(this,i):r.appendChild(this)),qh.removeChild(n),this.style.cssText=s,o},RI=function(e,n){for(var r=n.length;r--;)if(e.hasAttribute(n[r]))return e.getAttribute(n[r])},dV=function(e){var n;try{n=e.getBBox()}catch{n=mS.call(e,!0)}return n&&(n.width||n.height)||e.getBBox===mS||(n=mS.call(e,!0)),n&&!n.width&&!n.x&&!n.y?{x:+RI(e,["x","cx","x1"])||0,y:+RI(e,["y","cy","y1"])||0,width:0,height:0}:n},pV=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&dV(e))},wm=function(e,n){if(n){var r=e.style;n in gl&&n!==Io&&(n=Kn),r.removeProperty?((n.substr(0,2)==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),r.removeProperty(n.replace(S2,"-$1").toLowerCase())):r.removeAttribute(n)}},gu=function(e,n,r,i,s,o){var a=new cs(e._pt,n,r,0,1,o?uV:lV);return e._pt=a,a.b=i,a.e=s,e._props.push(r),a},OI={deg:1,rad:1,turn:1},mae={grid:1,flex:1},Gu=function t(e,n,r,i){var s=parseFloat(r)||0,o=(r+"").trim().substr((s+"").length)||"px",a=Uc.style,l=rae.test(n),u=e.tagName.toLowerCase()==="svg",c=(u?"client":"offset")+(l?"Width":"Height"),f=100,h=i==="px",d=i==="%",p,g,x,_;return i===o||!s||OI[i]||OI[o]?s:(o!=="px"&&!h&&(s=t(e,n,r,"px")),_=e.getCTM&&pV(e),(d||o==="%")&&(gl[n]||~n.indexOf("adius"))?(p=_?e.getBBox()[l?"width":"height"]:e[c],dr(d?s/p*f:s/100*p)):(a[l?"width":"height"]=f+(h?o:i),g=~n.indexOf("adius")||i==="em"&&e.appendChild&&!u?e:e.parentNode,_&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===pu||!g.appendChild)&&(g=pu.body),x=g._gsap,x&&d&&x.width&&l&&x.time===Ss.time&&!x.uncache?dr(s/x.width*f):((d||o==="%")&&!mae[xa(g,"display")]&&(a.position=xa(e,"position")),g===e&&(a.position="static"),g.appendChild(Uc),p=Uc[c],g.removeChild(Uc),a.position="absolute",l&&d&&(x=ef(g),x.time=Ss.time,x.width=g[c]),dr(h?p*s/f:p&&s?f/p*s:0))))},sl=function(e,n,r,i){var s;return b2||vE(),n in va&&n!=="transform"&&(n=va[n],~n.indexOf(",")&&(n=n.split(",")[0])),gl[n]&&n!=="transform"?(s=xm(e,i),s=n!=="transformOrigin"?s[n]:s.svg?s.origin:O1(xa(e,Io))+" "+s.zOrigin+"px"):(s=e.style[n],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=R1[n]&&R1[n](e,n,r)||xa(e,n)||P4(e,n)||(n==="opacity"?1:0))),r&&!~(s+"").trim().indexOf(" ")?Gu(e,n,s,r)+r:s},vae=function(e,n,r,i){if(!r||r==="none"){var s=vd(n,e,1),o=s&&xa(e,s,1);o&&o!==r?(n=s,r=o):n==="borderColor"&&(r=xa(e,"borderTopColor"))}var a=new cs(this._pt,e.style,n,0,1,sV),l=0,u=0,c,f,h,d,p,g,x,_,m,v,b,w;if(a.b=r,a.e=i,r+="",i+="",i==="auto"&&(e.style[n]=i,i=xa(e,n)||i,e.style[n]=r),c=[r,i],q4(c),r=c[0],i=c[1],h=r.match(Ch)||[],w=i.match(Ch)||[],w.length){for(;f=Ch.exec(i);)x=f[0],m=i.substring(l,f.index),p?p=(p+1)%5:(m.substr(-5)==="rgba("||m.substr(-5)==="hsla(")&&(p=1),x!==(g=h[u++]||"")&&(d=parseFloat(g)||0,b=g.substr((d+"").length),x.charAt(1)==="="&&(x=jh(d,x)+b),_=parseFloat(x),v=x.substr((_+"").length),l=Ch.lastIndex-v.length,v||(v=v||Ds.units[n]||b,l===i.length&&(i+=v,a.e+=v)),b!==v&&(d=Gu(e,n,g,v)||0),a._pt={_next:a._pt,p:m||u===1?m:",",s:d,c:_-d,m:p&&p<4||n==="zIndex"?Math.round:0});a.c=l<i.length?i.substring(l,i.length):""}else a.r=n==="display"&&i==="none"?uV:lV;return A4.test(i)&&(a.e=0),this._pt=a,a},BI={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},yae=function(e){var n=e.split(" "),r=n[0],i=n[1]||"50%";return(r==="top"||r==="bottom"||i==="left"||i==="right")&&(e=r,r=i,i=e),n[0]=BI[r]||r,n[1]=BI[i]||i,n.join(" ")},_ae=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var r=n.t,i=r.style,s=n.u,o=r._gsap,a,l,u;if(s==="all"||s===!0)i.cssText="",l=1;else for(s=s.split(","),u=s.length;--u>-1;)a=s[u],gl[a]&&(l=1,a=a==="transformOrigin"?Io:Kn),wm(r,a);l&&(wm(r,Kn),o&&(o.svg&&r.removeAttribute("transform"),xm(r,1),o.uncache=1,cV(i)))}},R1={clearProps:function(e,n,r,i,s){if(s.data!=="isFromStart"){var o=e._pt=new cs(e._pt,n,r,0,0,_ae);return o.u=i,o.pr=-10,o.tween=s,e._props.push(r),1}}},bm=[1,0,0,1,0,0],gV={},mV=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},NI=function(e){var n=xa(e,Kn);return mV(n)?bm:n.substr(7).match(S4).map(dr)},A2=function(e,n){var r=e._gsap||ef(e),i=e.style,s=NI(e),o,a,l,u;return r.svg&&e.getAttribute("transform")?(l=e.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?bm:s):(s===bm&&!e.offsetParent&&e!==qh&&!r.svg&&(l=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent)&&(u=1,a=e.nextElementSibling,qh.appendChild(e)),s=NI(e),l?i.display=l:wm(e,"display"),u&&(a?o.insertBefore(e,a):o?o.appendChild(e):qh.removeChild(e))),n&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},yE=function(e,n,r,i,s,o){var a=e._gsap,l=s||A2(e,!0),u=a.xOrigin||0,c=a.yOrigin||0,f=a.xOffset||0,h=a.yOffset||0,d=l[0],p=l[1],g=l[2],x=l[3],_=l[4],m=l[5],v=n.split(" "),b=parseFloat(v[0])||0,w=parseFloat(v[1])||0,A,E,S,C;r?l!==bm&&(E=d*x-p*g)&&(S=b*(x/E)+w*(-g/E)+(g*m-x*_)/E,C=b*(-p/E)+w*(d/E)-(d*m-p*_)/E,b=S,w=C):(A=dV(e),b=A.x+(~v[0].indexOf("%")?b/100*A.width:b),w=A.y+(~(v[1]||v[0]).indexOf("%")?w/100*A.height:w)),i||i!==!1&&a.smooth?(_=b-u,m=w-c,a.xOffset=f+(_*d+m*g)-_,a.yOffset=h+(_*p+m*x)-m):a.xOffset=a.yOffset=0,a.xOrigin=b,a.yOrigin=w,a.smooth=!!i,a.origin=n,a.originIsAbsolute=!!r,e.style[Io]="0px 0px",o&&(gu(o,a,"xOrigin",u,b),gu(o,a,"yOrigin",c,w),gu(o,a,"xOffset",f,a.xOffset),gu(o,a,"yOffset",h,a.yOffset)),e.setAttribute("data-svg-origin",b+" "+w)},xm=function(e,n){var r=e._gsap||new Q4(e);if("x"in r&&!n&&!r.uncache)return r;var i=e.style,s=r.scaleX<0,o="px",a="deg",l=getComputedStyle(e),u=xa(e,Io)||"0",c,f,h,d,p,g,x,_,m,v,b,w,A,E,S,C,M,D,T,L,F,k,I,O,$,N,W,H,K,ee,Z,J;return c=f=h=g=x=_=m=v=b=0,d=p=1,r.svg=!!(e.getCTM&&pV(e)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(i[Kn]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[Kn]!=="none"?l[Kn]:"")),i.scale=i.rotate=i.translate="none"),E=A2(e,r.svg),r.svg&&(r.uncache?($=e.getBBox(),u=r.xOrigin-$.x+"px "+(r.yOrigin-$.y)+"px",O=""):O=!n&&e.getAttribute("data-svg-origin"),yE(e,O||u,!!O||r.originIsAbsolute,r.smooth!==!1,E)),w=r.xOrigin||0,A=r.yOrigin||0,E!==bm&&(D=E[0],T=E[1],L=E[2],F=E[3],c=k=E[4],f=I=E[5],E.length===6?(d=Math.sqrt(D*D+T*T),p=Math.sqrt(F*F+L*L),g=D||T?sh(T,D)*Ic:0,m=L||F?sh(L,F)*Ic+g:0,m&&(p*=Math.abs(Math.cos(m*Jh))),r.svg&&(c-=w-(w*D+A*L),f-=A-(w*T+A*F))):(J=E[6],ee=E[7],W=E[8],H=E[9],K=E[10],Z=E[11],c=E[12],f=E[13],h=E[14],S=sh(J,K),x=S*Ic,S&&(C=Math.cos(-S),M=Math.sin(-S),O=k*C+W*M,$=I*C+H*M,N=J*C+K*M,W=k*-M+W*C,H=I*-M+H*C,K=J*-M+K*C,Z=ee*-M+Z*C,k=O,I=$,J=N),S=sh(-L,K),_=S*Ic,S&&(C=Math.cos(-S),M=Math.sin(-S),O=D*C-W*M,$=T*C-H*M,N=L*C-K*M,Z=F*M+Z*C,D=O,T=$,L=N),S=sh(T,D),g=S*Ic,S&&(C=Math.cos(S),M=Math.sin(S),O=D*C+T*M,$=k*C+I*M,T=T*C-D*M,I=I*C-k*M,D=O,k=$),x&&Math.abs(x)+Math.abs(g)>359.9&&(x=g=0,_=180-_),d=dr(Math.sqrt(D*D+T*T+L*L)),p=dr(Math.sqrt(I*I+J*J)),S=sh(k,I),m=Math.abs(S)>2e-4?S*Ic:0,b=Z?1/(Z<0?-Z:Z):0),r.svg&&(O=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!mV(xa(e,Kn)),O&&e.setAttribute("transform",O))),Math.abs(m)>90&&Math.abs(m)<270&&(s?(d*=-1,m+=g<=0?180:-180,g+=g<=0?180:-180):(p*=-1,m+=m<=0?180:-180)),n=n||r.uncache,r.x=c-((r.xPercent=c&&(!n&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+o,r.y=f-((r.yPercent=f&&(!n&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+o,r.z=h+o,r.scaleX=dr(d),r.scaleY=dr(p),r.rotation=dr(g)+a,r.rotationX=dr(x)+a,r.rotationY=dr(_)+a,r.skewX=m+a,r.skewY=v+a,r.transformPerspective=b+o,(r.zOrigin=parseFloat(u.split(" ")[2])||0)&&(i[Io]=O1(u)),r.xOffset=r.yOffset=0,r.force3D=Ds.force3D,r.renderTransform=r.svg?bae:hV?vV:wae,r.uncache=0,r},O1=function(e){return(e=e.split(" "))[0]+" "+e[1]},vS=function(e,n,r){var i=Si(n);return dr(parseFloat(n)+parseFloat(Gu(e,"x",r+"px",i)))+i},wae=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,vV(e,n)},Ec="0deg",Bp="0px",Cc=") ",vV=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.z,u=r.rotation,c=r.rotationY,f=r.rotationX,h=r.skewX,d=r.skewY,p=r.scaleX,g=r.scaleY,x=r.transformPerspective,_=r.force3D,m=r.target,v=r.zOrigin,b="",w=_==="auto"&&e&&e!==1||_===!0;if(v&&(f!==Ec||c!==Ec)){var A=parseFloat(c)*Jh,E=Math.sin(A),S=Math.cos(A),C;A=parseFloat(f)*Jh,C=Math.cos(A),o=vS(m,o,E*C*-v),a=vS(m,a,-Math.sin(A)*-v),l=vS(m,l,S*C*-v+v)}x!==Bp&&(b+="perspective("+x+Cc),(i||s)&&(b+="translate("+i+"%, "+s+"%) "),(w||o!==Bp||a!==Bp||l!==Bp)&&(b+=l!==Bp||w?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+Cc),u!==Ec&&(b+="rotate("+u+Cc),c!==Ec&&(b+="rotateY("+c+Cc),f!==Ec&&(b+="rotateX("+f+Cc),(h!==Ec||d!==Ec)&&(b+="skew("+h+", "+d+Cc),(p!==1||g!==1)&&(b+="scale("+p+", "+g+Cc),m.style[Kn]=b||"translate(0, 0)"},bae=function(e,n){var r=n||this,i=r.xPercent,s=r.yPercent,o=r.x,a=r.y,l=r.rotation,u=r.skewX,c=r.skewY,f=r.scaleX,h=r.scaleY,d=r.target,p=r.xOrigin,g=r.yOrigin,x=r.xOffset,_=r.yOffset,m=r.forceCSS,v=parseFloat(o),b=parseFloat(a),w,A,E,S,C;l=parseFloat(l),u=parseFloat(u),c=parseFloat(c),c&&(c=parseFloat(c),u+=c,l+=c),l||u?(l*=Jh,u*=Jh,w=Math.cos(l)*f,A=Math.sin(l)*f,E=Math.sin(l-u)*-h,S=Math.cos(l-u)*h,u&&(c*=Jh,C=Math.tan(u-c),C=Math.sqrt(1+C*C),E*=C,S*=C,c&&(C=Math.tan(c),C=Math.sqrt(1+C*C),w*=C,A*=C)),w=dr(w),A=dr(A),E=dr(E),S=dr(S)):(w=f,S=h,A=E=0),(v&&!~(o+"").indexOf("px")||b&&!~(a+"").indexOf("px"))&&(v=Gu(d,"x",o,"px"),b=Gu(d,"y",a,"px")),(p||g||x||_)&&(v=dr(v+p-(p*w+g*E)+x),b=dr(b+g-(p*A+g*S)+_)),(i||s)&&(C=d.getBBox(),v=dr(v+i/100*C.width),b=dr(b+s/100*C.height)),C="matrix("+w+","+A+","+E+","+S+","+v+","+b+")",d.setAttribute("transform",C),m&&(d.style[Kn]=C)},xae=function(e,n,r,i,s){var o=360,a=ei(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?Ic:1),u=l-i,c=i+u+"deg",f,h;return a&&(f=s.split("_")[1],f==="short"&&(u%=o,u!==u%(o/2)&&(u+=u<0?o:-o)),f==="cw"&&u<0?u=(u+o*II)%o-~~(u/o)*o:f==="ccw"&&u>0&&(u=(u-o*II)%o-~~(u/o)*o)),e._pt=h=new cs(e._pt,n,r,i,u,sae),h.e=c,h.u="deg",e._props.push(r),h},VI=function(e,n){for(var r in n)e[r]=n[r];return e},Sae=function(e,n,r){var i=VI({},r._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=r.style,a,l,u,c,f,h,d,p;i.svg?(u=r.getAttribute("transform"),r.setAttribute("transform",""),o[Kn]=n,a=xm(r,1),wm(r,Kn),r.setAttribute("transform",u)):(u=getComputedStyle(r)[Kn],o[Kn]=n,a=xm(r,1),o[Kn]=u);for(l in gl)u=i[l],c=a[l],u!==c&&s.indexOf(l)<0&&(d=Si(u),p=Si(c),f=d!==p?Gu(r,l,u,p):parseFloat(u),h=parseFloat(c),e._pt=new cs(e._pt,a,l,f,h-f,gE),e._pt.u=p||0,e._props.push(l));VI(a,i)};us("padding,margin,Width,Radius",function(t,e){var n="Top",r="Right",i="Bottom",s="Left",o=(e<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map(function(a){return e<2?t+a:"border"+a+t});R1[e>1?"border"+t:t]=function(a,l,u,c,f){var h,d;if(arguments.length<4)return h=o.map(function(p){return sl(a,p,u)}),d=h.join(" "),d.split(h[0]).length===5?h[0]:d;h=(c+"").split(" "),d={},o.forEach(function(p,g){return d[p]=h[g]=h[g]||h[(g-1)/2|0]}),a.init(l,d,f)}});var yV={name:"css",register:vE,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,r,i,s){var o=this._props,a=e.style,l=r.vars.startAt,u,c,f,h,d,p,g,x,_,m,v,b,w,A,E,S;b2||vE(),this.styles=this.styles||fV(e),S=this.styles.props,this.tween=r;for(g in n)if(g!=="autoRound"&&(c=n[g],!(bs[g]&&eV(g,n,r,i,e,s)))){if(d=typeof c,p=R1[g],d==="function"&&(c=c.call(r,i,e,s),d=typeof c),d==="string"&&~c.indexOf("random(")&&(c=ym(c)),p)p(this,e,g,c,r)&&(E=1);else if(g.substr(0,2)==="--")u=(getComputedStyle(e).getPropertyValue(g)+"").trim(),c+="",Lu.lastIndex=0,Lu.test(u)||(x=Si(u),_=Si(c)),_?x!==_&&(u=Gu(e,g,u,_)+_):x&&(c+=x),this.add(a,"setProperty",u,c,i,s,0,0,g),o.push(g),S.push(g,0,a[g]);else if(d!=="undefined"){if(l&&g in l?(u=typeof l[g]=="function"?l[g].call(r,i,e,s):l[g],ei(u)&&~u.indexOf("random(")&&(u=ym(u)),Si(u+"")||(u+=Ds.units[g]||Si(sl(e,g))||""),(u+"").charAt(1)==="="&&(u=sl(e,g))):u=sl(e,g),h=parseFloat(u),m=d==="string"&&c.charAt(1)==="="&&c.substr(0,2),m&&(c=c.substr(2)),f=parseFloat(c),g in va&&(g==="autoAlpha"&&(h===1&&sl(e,"visibility")==="hidden"&&f&&(h=0),S.push("visibility",0,a.visibility),gu(this,a,"visibility",h?"inherit":"hidden",f?"inherit":"hidden",!f)),g!=="scale"&&g!=="transform"&&(g=va[g],~g.indexOf(",")&&(g=g.split(",")[0]))),v=g in gl,v){if(this.styles.save(g),b||(w=e._gsap,w.renderTransform&&!n.parseTransform||xm(e,n.parseTransform),A=n.smoothOrigin!==!1&&w.smooth,b=this._pt=new cs(this._pt,a,Kn,0,1,w.renderTransform,w,0,-1),b.dep=1),g==="scale")this._pt=new cs(this._pt,w,"scaleY",w.scaleY,(m?jh(w.scaleY,m+f):f)-w.scaleY||0,gE),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){S.push(Io,0,a[Io]),c=yae(c),w.svg?yE(e,c,0,A,0,this):(_=parseFloat(c.split(" ")[2])||0,_!==w.zOrigin&&gu(this,w,"zOrigin",w.zOrigin,_),gu(this,a,g,O1(u),O1(c)));continue}else if(g==="svgOrigin"){yE(e,c,1,A,0,this);continue}else if(g in gV){xae(this,w,g,h,m?jh(h,m+c):c);continue}else if(g==="smoothOrigin"){gu(this,w,"smooth",w.smooth,c);continue}else if(g==="force3D"){w[g]=c;continue}else if(g==="transform"){Sae(this,c,e);continue}}else g in a||(g=vd(g)||g);if(v||(f||f===0)&&(h||h===0)&&!iae.test(c)&&g in a)x=(u+"").substr((h+"").length),f||(f=0),_=Si(c)||(g in Ds.units?Ds.units[g]:x),x!==_&&(h=Gu(e,g,u,_)),this._pt=new cs(this._pt,v?w:a,g,h,(m?jh(h,m+f):f)-h,!v&&(_==="px"||g==="zIndex")&&n.autoRound!==!1?aae:gE),this._pt.u=_||0,x!==_&&_!=="%"&&(this._pt.b=u,this._pt.r=oae);else if(g in a)vae.call(this,e,g,u,m?m+c:c);else if(g in e)this.add(e,g,u||e[g],m?m+c:c,i,s);else if(g!=="parseTransform"){h2(g,c);continue}v||(g in a?S.push(g,0,a[g]):S.push(g,1,u||e[g])),o.push(g)}}E&&oV(this)},render:function(e,n){if(n.tween._time||!x2())for(var r=n._pt;r;)r.r(e,r.d),r=r._next;else n.styles.revert()},get:sl,aliases:va,getSetter:function(e,n,r){var i=va[n];return i&&i.indexOf(",")<0&&(n=i),n in gl&&n!==Io&&(e._gsap.x||sl(e,"x"))?r&&FI===r?n==="scale"?fae:cae:(FI=r||{})&&(n==="scale"?hae:dae):e.style&&!u2(e.style[n])?lae:~n.indexOf("-")?uae:_2(e,n)},core:{_removeProperty:wm,_getMatrix:A2}};ds.utils.checkPrefix=vd;ds.core.getStyleSaver=fV;(function(t,e,n,r){var i=us(t+","+e+","+n,function(s){gl[s]=1});us(e,function(s){Ds.units[s]="deg",gV[s]=1}),va[i[13]]=t+","+e,us(r,function(s){var o=s.split(":");va[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");us("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){Ds.units[t]="px"});ds.registerPlugin(yV);var aa=ds.registerPlugin(yV)||ds;aa.core.Tween;const Aae=t=>{const e=new Mr().setFromObject(t),n=new q;e.getCenter(n);const r=new q;e.getSize(r);const i=Math.max(r.x,r.y,r.z)+8,s=Eae(n,t,new q(1,0,0),i);aa.to(qn.position,{...s,duration:1,ease:"power2.inOut"}),aa.to(Wt.target,{...n,duration:1})};function Eae(t,e,n,r){var i=n.clone().applyQuaternion(e.quaternion),s=i.clone().multiplyScalar(r);return t.clone().add(s)}let Zi,Bi,yS=new q,_S=new q;class Cae{constructor(){o();let e;const n=a=>{e=a,Zi.position.copy(a.position);const l=we().getLineArrayBuilding[a.userData.componentIndex].floor.floorHeight;Zi.position.y+=at(l/2)+Zi.fontSize/2+jr,Zi.rotation.copy(a.rotation),Zi.rotation.y+=Math.PI/2,Bi.position.copy(a.position),Bi.position.y+=at(l/2)+Bi.fontSize/2+jr,Bi.rotation.copy(a.rotation),Bi.rotation.y+=Math.PI/2,Zi.translateX(-1),Bi.translateX(1),s(),aa.to(Zi.scale,{duration:.2,x:1,y:1,z:1});const u=nt[e.userData.componentIndex].userData.sections.length>3;u&&aa.to(Bi.scale,{duration:.2,x:1,y:1,z:1}),De().wallConfigDialogCanDelete=u},r=()=>{aa.to(Zi.scale,{duration:.2,x:0,y:0,z:0}),aa.to(Bi.scale,{duration:.2,x:0,y:0,z:0})},i=()=>{aa.to(qn.position,{...yS,duration:1,ease:"power2.inOut"}),aa.to(Wt.target,{..._S,duration:1}),n(e)},s=()=>{Zi.lookAt(qn.position),Bi.lookAt(qn.position)};function o(){Zi=IA({hasBackground:!0}),Zi.text="settings",Zi.scale.setScalar(0),Rr.addNonDraggableObject(Zi.userData.background).addEventListener("dragstart",()=>{yS.copy(qn.position),_S.copy(Wt.target),r(),Aae(e),De().wallConfigDialogVisible=!0}),Ct.add(Zi),Bi=IA({hasBackground:!0}),Bi.text="clear",Bi.color="#ff0000",Bi.scale.setScalar(0),Rr.addNonDraggableObject(Bi.userData.background).addEventListener("dragstart",()=>{yS.copy(qn.position),_S.copy(Wt.target),DV(e),r()}),Ct.add(Bi)}this.lookAtCamera=s,this.show=n,this.hide=r,this.resetCameraToBeforeAnyViewClicked=i}}function Mae(t){if(au){const a=t*Math.PI,l=0+40*Math.cos(a),u=30+-20*(1-Math.sin(a)),c=-12*Math.sin(a);au.position.set(l,u,c);const f=new ut(16777215);if(t>.75){const h=new ut(16753920),d=(t-.75)/.25;f.lerp(h,d)}au.color=f}}let vn,qn,Ct,Wt,Mg,eo,zn,Rr,mu,au;new q(0,1,0);const _E=new wte;_E.showPanel(0);const Jl=new q;new q;const vu=new a2.exports.EventEmitter,_i=new ss,nt={},Dae=new IM;function Tae(){vn=new gn({antialias:!0}),vn.shadowMap.enabled=!0,vn.shadowMap.type=aB,vn.setSize(window.innerWidth,window.innerHeight),window.addEventListener("resize",Lae),vn.setClearColor(0),vn.gammaFactor=2.2,vn.outputEncoding=Br,vn.toneMapping=fB,vn.toneMappingExposure=.8,vn.powerPreference="high-performance",document.body.appendChild(vn.domElement),qn=new zi(40,window.innerWidth/window.innerHeight,.1,1e3),qn.position.set(0,20,40),qn.updateProjectionMatrix(),Wt=new pte(qn,vn.domElement),Wt.enableDamping=!0,Wt.minDistance=10,Wt.maxDistance=70,Wt.minPolarAngle=0,Wt.rotateSpeed=1.6,Wt.zoomSpeed=1.4,Wt.maxPolarAngle=Math.PI/2.04;const t=20,e=new q;Wt.addEventListener("change",()=>{requestAnimationFrame(d5),zM(),mu&&mu.lookAtCamera();const{x:a,y:l,z:u}=Wt.target;Math.sqrt(Math.pow(a,2)+Math.pow(u,2))>t&&(e.copy(Wt.target),e.y=0,e.setLength(t),Wt.target.x=e.x,Wt.target.z=e.z)}),new gte(Wt,{size:100,padding:8}),Ct=new Zg,eo=new _te(vn,qn,vn.domElement),Mg=LQ(),Ct.add(Mg);const n=yte();Ct.add(n),Ct.add(_i);const r=new fN(16777215,.2);Ct.add(r),au=new cN(16444076,.8),au.castShadow=!0,au.position.set(50,15,8),Ct.add(au);const i=au.shadow.camera;i.top=20,i.bottom=-20,i.left=-20,i.right=20,i.far=200,new fK().setPath("./own/media/hdr/").load("lilienstein_1k.hdr",function(a){a.mapping=s1,Ct.environment=a}),Ct.add(V_);const s=new as().load("./own/media/hdr/lilienstein-2k.jpeg");s.generateMipmaps=!1,s.magFilter=kn,s.minFilter=kn,s.outputEncoding=Br,s.anisotropy=vn.capabilities.getMaxAnisotropy();const o=new Fe(new F_(70,24,10),new gs({side:rr,map:s,color:"#8a97ab"}));Ct.add(o),zn=OM(),zn.color="#ffffff",zn.outlineBlur=.2,zn.outlineColor="#000000",zn.outlineWidth=.01,zn.visible=!1,Ct.add(zn),Rr=new _ee(qn,vn.domElement),mu=new Cae,eo.add(Ct),Ct.addEventListener("pointerdown",a=>{mu.hide(),Ye(De().selectedSection)instanceof Fe&&(Ye(De().selectedSection).material=iv)}),Pae(),_V()}function Pae(){we().$onAction(({name:t,args:e,after:n})=>{switch(t){case"setFloorLineArray":n(()=>{const r=Ye(e[0]),i=Ye(e[1]),s=sf(i);ate(r,s)});break;case"addWindowToFloorSection":n(()=>{});break;case"addDoorToFloorSection":n(()=>{const r=Ye(e[0]),i=Ye(e[1]),s=we().getLineArrayBuilding[r].floor.xWall[i].doors,o=Object.keys(s).length-1,{centerPoint:a,width:l,height:u}=Ye(we().getLineArrayBuilding[r].floor.xWall[i].doors[o]);Fee(r,i,a,l,u)});break}})}function Lae(){qn.aspect=window.innerWidth/window.innerHeight,qn.updateProjectionMatrix(),vn.setSize(window.innerWidth,window.innerHeight)}let zI=0;const Fae=30;function _V(){if(requestAnimationFrame(_V),zI>Fae){if(we().activeCanvas!=="3D")return}else zI++;_E.begin(),Wt.update(),eo.update();const t=vr(we().selectedFloor);Mg&&(Mg.position.y=Mte(Mg.position.y,t+jr,.1),we().drawing===!1&&NQ(!1));const e=we().drawing;if(ha&&(ha.visible=e,e)){ha.position.copy(kt);const n=at(we().floorHeight)+De().wallWidth;ha.setLength(n),ha.position.y=kt.y+n}vn.render(Ct,qn),_E.end()}var J0=Math.PI*2;function wV(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);return{x:-r/i,y:n/i}}function Iae(t,e){var n=wV(t,e);return{x:-n.x,y:-n.y}}function E2(t){const e=[];let n=t.length>0?t[0].x:void 0,r=t.length>0?t[0].y:void 0,i=n,s=r;for(let a=0;a<t.length;a++){const l=t[a],u=t[(a+1)%t.length],c=Iae(l,u),f=wV(l,u),h={vertex1:l,vertex2:u,index:a,outwardNormal:c,inwardNormal:f};e.push(h);const d=t[a].x,p=t[a].y;n=Math.min(d,n),r=Math.min(p,r),i=Math.max(d,i),s=Math.max(p,s)}return{vertices:t,edges:e,minX:n,minY:r,maxX:i,maxY:s}}function bV(t,e){const n=(e.vertex2.y-e.vertex1.y)*(t.vertex2.x-t.vertex1.x)-(e.vertex2.x-e.vertex1.x)*(t.vertex2.y-t.vertex1.y);if(n==0)return null;const r=((e.vertex2.x-e.vertex1.x)*(t.vertex1.y-e.vertex1.y)-(e.vertex2.y-e.vertex1.y)*(t.vertex1.x-e.vertex1.x))/n,i=((t.vertex2.x-t.vertex1.x)*(t.vertex1.y-e.vertex1.y)-(t.vertex2.y-t.vertex1.y)*(t.vertex1.x-e.vertex1.x))/n,s=r<0||i<0||r>1||i>1;return{x:t.vertex1.x+r*(t.vertex2.x-t.vertex1.x),y:t.vertex1.y+r*(t.vertex2.y-t.vertex1.y),isIntersectionOutside:s}}function xV(t,e,n,r,i,s,o){var a=Math.atan2(i.y-n.y,i.x-n.x),l=Math.atan2(s.y-n.y,s.x-n.x);a<0&&(a+=J0),l<0&&(l+=J0);const u=a>l?a-l:a+J0-l,c=(o?-u:J0-u)/t;e.push(i);for(let f=1;f<t;++f){const h=a+c*f,d={x:n.x+Math.cos(h)*r,y:n.y+Math.sin(h)*r};e.push(d)}e.push(s)}function SV(t,e,n){return{vertex1:{x:t.vertex1.x+e,y:t.vertex1.y+n},vertex2:{x:t.vertex2.x+e,y:t.vertex2.y+n}}}function kae(t,e,n){const r=[];for(let o=0;o<t.edges.length;o++){const a=t.edges[o],l=a.outwardNormal.x*e,u=a.outwardNormal.y*e;r.push(SV(a,l,u))}const i=[];for(let o=0;o<r.length;o++){const a=r[o],l=r[(o+r.length-1)%r.length],u=bV(l,a);if(u&&(!u.isIntersectionOutside||n<1))i.push({x:u.x,y:u.y});else{const c=t.edges[o].vertex1;xV(n,i,c,e,l.vertex2,a.vertex1,!1)}}const s=E2(i);return s.offsetEdges=r,s}function Rae(t,e,n){const r=[];for(let o=0;o<t.edges.length;o++){const a=t.edges[o],l=a.inwardNormal.x*e,u=a.inwardNormal.y*e;r.push(SV(a,l,u))}const i=[];for(let o=0;o<r.length;o++){const a=r[o],l=r[(o+r.length-1)%r.length],u=bV(l,a);if(u&&(!u.isIntersectionOutside||n<1))i.push({x:u.x,y:u.y});else{const c=t.edges[o].vertex1;xV(n,i,c,e,l.vertex2,a.vertex1,!0)}}const s=E2(i);return s.offsetEdges=r,s}function AV(t,e,n=0){const r=E2(t);return e>0?kae(r,e,n).vertices:Rae(r,-e,n).vertices}function Oae(t,e){var n=[];t.forEach(i=>{n.push({x:i[0],y:i[1]})}),n.pop(),n=AV(n,YM(t)?-e:e,0);var r=[];return n.forEach(i=>{r.push([i.x,i.y])}),r=Array.from(new Set(r.map(JSON.stringify)),JSON.parse),r.push(r[0]),r}function GI(t){const e=t.startsWith("#")?t.slice(1):t,n=parseInt(e.substring(0,2),16)/255,r=parseInt(e.substring(2,4),16)/255,i=parseInt(e.substring(4,6),16)/255;return parseInt(e.substring(6,8),16)/255,new ut(n,r,i)}new WM;const EV=new as,ev=EV.load("./own/media/textures/substructure_wood.jpg");ev.wrapS=Er;ev.wrapT=Er;ev.repeat.set(1,1);ev.rotation=Math.PI/2;const tv=EV.load("./own/media/textures/substructure_wood.jpg");tv.wrapS=Er;tv.wrapT=Er;tv.repeat.set(1,1);tv.rotation=-Math.PI/2;const B1=[ev,tv],Bae=(t,e,n,r,i)=>{if(t.userData.facade){for(var s=t.userData.facade.children.length-1;s>=0;s--){const S=t.userData.facade.children[s];eo.remove(S),S.geometry.dispose(),S.material.dispose(),S.parent.remove(S)}Ct.remove(t.userData.facade)}const a=we().getLineArrayBuilding[t.userData.componentIndex].floor.wall;if(!a[t.userData.index])return;const l=a[t.userData.index].facade;if(!l||l.facadePoints.length===0)return;const u=new ss;for(let S=0;S<B1.length;S++){const C=B1[S];C.outputEncoding=Br,C.anisotropy=vn.capabilities.getMaxAnisotropy()}const c=new Zn({}),f=Math.atan2(e-n,r-i)+Math.PI/2,h=new st().makeRotationY(f),d=Ye(a[t.userData.index].partialArea),p=Ye(l.facadePoints);let g=p.map(S=>S.map((M,D)=>{const T=[];for(let L=0;L<M.length;L++){const F=at(M[L]);T.push(F)}return T}));const x=Math.min(g[0][0][0],g[0][0][2],g[0][0][4],g[0][0][6],g[0][0][8]),_=Math.max(g[p.length-1][0][0],g[p.length-1][0][2],g[p.length-1][0][4],g[p.length-1][0][6],g[p.length-1][0][8]),m=Math.sqrt(Math.pow(_-x,2)),v={bevelEnabled:!1,bevelThickness:De().facadePieceThickness/2,bevelSegments:0,bevelSize:0,bevelOffset:0,steps:1,depth:De().facadePieceThickness},b=GI(l.colorHexa);for(let S=0;S<g.length;S++){const C=HI(g,S,v,c,t);l.colorHexa&&(C.material.color=b),u.add(C)}if(d)for(let S=0;S<d.length;S++){const C=d[S],M=C.facadePoints,D=[];if(M){const L=[];for(let F=0;F<M.length;F++){const k=M[F][0];L.push(k)}L.map(F=>{const k=F.map((I,O)=>at(I));D.push([k])})}const T=GI(C.colorHexa);for(let L=0;L<D.length;L++){const F=HI(D,L,v,c,t);l.colorHexa&&(F.material.color=T),u.add(F)}}u.applyMatrix4(h),u.position.copy(t.position),u.rotateX(Math.PI),u.rotateY(Math.PI),u.translateX(-g[0][0][0]-m/2);const w=l.subConstructionLayer?l.subConstructionLayer.length:0,A=nt[t.userData.componentIndex].userData.isClockwise?-(De().facadePieceThickness*.67+w*(De().facadePieceThickness+De().facadePieceSpacing)):De().facadePieceThickness*2.5+w*(De().facadePieceThickness+De().facadePieceSpacing);u.translateZ(A),Math.abs(g[0][0][1]-g[0][0][3]);const E=we().getLineArrayBuilding[t.userData.componentIndex].floor.floorHeight;u.translateY(-g[0][0][1]-at(E)/2+jr),u.visible=De().facadeVisible,Ct.add(u),t.userData.facade=u};let K0=null;const Nae=t=>{eo.add(t);const e=r=>{r.intersected&&(we().drawing||r.stopPropagation(),K0&&!UI(K0)&&!we().drawing&&K0.material.emissive.set(0),K0=t,!UI(t)&&!we().drawing&&t.material.emissive.set(16777215).multiplyScalar(.2))};t.addEventListener("mousemove",e);const n=r=>{we().drawing||r.stopPropagation(),!(Ye(De().selectedSection)===t)&&!we().drawing&&t.material.emissive.set(0)};t.addEventListener("mouseout",n),t.addEventListener("pointerdown",r=>{we().drawing||r.stopPropagation(),Ye(De().selectedFacadePiece)instanceof Fe&&t.material.emissive.set(0),we().drawing||(t.material.emissive.set("white"),we().selectedFloor=t.userData.section.userData.componentIndex,De().selectedFacadePiece=t)})},UI=t=>{if(Ye(De().selectedFacadePiece)instanceof Fe&&Ye(we().selectedFloor)instanceof Fe){const e=nt[t.userData.section.userData.componentIndex];return Ye(De().selectedFacadePiece).userData.index===t.userData.index&&Ye(we().selectedFloor).userData.index===e.userData.index}return!1};function HI(t,e,n,r,i){const s=t[e][0],o=[];for(let f=0;f<s.length;f+=2)o.push([s[f],s[f+1]]);let a=Oae([...o],-(De().facadePieceSpacing/2));const l=new dl;l.moveTo(a[0][0],a[0][1]);for(let f=1;f<a.length;f++)l.lineTo(a[f][0],a[f][1]);const u=new Fo(l,n),c=new Fe(u,r.clone());return c.material.map=B1[Math.floor(Math.random()*B1.length)],c.castShadow=!0,c.receiveShadow=!0,Nae(c),c.userData={section:i,index:e},c}const Vae=new WM,CV=new as,nv=CV.load("./own/media/textures/substructure_wood.jpg");nv.wrapS=Er;nv.wrapT=Er;nv.repeat.set(1,1);nv.rotation=Math.PI/2;const rv=CV.load("./own/media/textures/substructure_wood.jpg");rv.wrapS=Er;rv.wrapT=Er;rv.repeat.set(1,1);rv.rotation=-Math.PI/2;const N1=[nv,rv],zae=(t,e,n,r,i)=>{MV(t);const o=we().getLineArrayBuilding[t.userData.componentIndex].floor.wall;if(!o[t.userData.index])return;const a=o[t.userData.index].facade;if(!a||a.subConstructionLayer.length===0)return;const l=new ss;for(let u=0;u<a.subConstructionLayer.length;u++){const{subConstructionPoints:c}=a.subConstructionLayer[u];if(!c||c.length===0)continue;const h=Ye(c).map(M=>Array.isArray(M[0][0])?M.map(D=>[D.flat()])[0]:[M.flat()]),d=new ss;for(let M=0;M<N1.length;M++){const D=N1[M];D.outputEncoding=Br,D.anisotropy=vn.capabilities.getMaxAnisotropy()}const p=new Zn({}),g=Math.atan2(e-n,r-i)+Math.PI/2,x=new st().makeRotationY(g),_=h;let m=_.map(M=>M.map((T,L)=>{const F=[];for(let k=0;k<T.length;k++){const I=at(T[k]);F.push(I)}return F}));const v=Math.min(m[0][0][0],m[0][0][2],m[0][0][4],m[0][0][6],m[0][0][8]),b=Math.max(m[_.length-1][0][0],m[_.length-1][0][2],m[_.length-1][0][4],m[_.length-1][0][6],m[_.length-1][0][8]),w=Math.sqrt(Math.pow(b-v,2)),A={bevelEnabled:!1,bevelThickness:De().facadePieceThickness/2,bevelSegments:0,bevelSize:0,bevelOffset:0,steps:1,depth:De().facadePieceThickness};for(let M=0;M<m.length;M++){const D=Uae(m,M,A,p,t);d.add(D)}d.applyMatrix4(x),d.position.copy(t.position),d.rotateX(Math.PI),d.rotateY(Math.PI),d.translateX(-m[0][0][0]-w/2);const E=u,S=nt[t.userData.componentIndex].userData.isClockwise?De().facadePieceThickness/2+(De().facadePieceThickness+De().facadePieceSpacing)*E:De().facadePieceThickness*1.6+(De().facadePieceThickness+De().facadePieceSpacing)*E;d.translateZ(S),l.add(d);const C=we().getLineArrayBuilding[t.userData.componentIndex].floor.floorHeight;d.translateY(-m[0][0][1]-at(C)/2),d.visible=De().subConstructionVisible}Ct.add(l),t.userData.subConstruction=l};let Z0=null;const Gae=t=>{eo.add(t);const e=r=>{r.intersected&&(we().drawing||r.stopPropagation(),Z0&&!WI(Z0)&&!we().drawing&&Z0.material.emissive.set(0),Z0=t,!WI(t)&&!we().drawing&&t.material.emissive.set(16777215).multiplyScalar(.2))};t.addEventListener("mousemove",e);const n=r=>{we().drawing||r.stopPropagation(),!(Ye(De().selectedSection)===t)&&!we().drawing&&t.material.emissive.set(0)};t.addEventListener("mouseout",n),t.addEventListener("pointerdown",r=>{we().drawing||r.stopPropagation(),Ye(De().selectedSubConstructionPiece)instanceof Fe&&t.material.emissive.set(0),we().drawing||(t.material.emissive.set("white"),we().selectedFloor=t.userData.section.userData.componentIndex,De().selectedSubConstructionPiece=t)})},WI=t=>{if(Ye(De().selectedSubConstructionPiece)instanceof Fe&&Ye(we().selectedFloor)instanceof Fe){const e=nt[t.userData.section.userData.componentIndex];return Ye(De().selectedSubConstructionPiece).userData.index===t.userData.index&&Ye(we().selectedFloor).userData.index===e.userData.index}return!1};function MV(t){if(t.userData.subConstruction){for(var e=t.userData.subConstruction.children.length-1;e>=0;e--){const n=t.userData.subConstruction.children[e];for(var e=n.children.length-1;e>=0;e--){const i=n.children[e];eo.remove(i),i.geometry.dispose(),i.material.dispose(),i.parent.remove(i)}n.parent.remove(n)}Ct.remove(t.userData.subConstruction)}}function Uae(t,e,n,r,i){const s=t[e][0],o=[];for(let f=0;f<s.length;f+=2)o.push([s[f],s[f+1]]);let a=Vae.data([...o]).padding(De().facadePieceSpacing/2)[0];a||(a=o);const l=new dl;l.moveTo(a[0][0],a[0][1]);for(let f=1;f<a.length;f++)l.lineTo(a[f][0],a[f][1]);const u=new Fo(l,n),c=new Fe(u,r.clone());return c.material.map=N1[Math.floor(Math.random()*N1.length)],c.castShadow=!0,c.receiveShadow=!0,Gae(c),c.userData={section:i,index:e},c}const iv=new gs;iv.visible=!1;new gs({color:65280,transparent:!0,opacity:.5});const Hae=new EM({color:255,transparent:!0,opacity:.7}),jr=.005,Fu=t=>t?nte():iv,Wae=(t,e,n)=>{const r=we().getLineArrayBuilding[t.userData.index].floor.floorHeight,i={bevelEnabled:!0,bevelThickness:at(r/2)+jr,bevelSegments:1,bevelSize:0,bevelOffset:0,steps:0,depth:0};t.userData.sections||(t.userData.sections=[]);const s=De().wallWidth;for(let o=0;o<e.length-1;o++){const[a,l]=e[o],[u,c]=e[o+1],f=[a+s,l,a-s,l,u-s,c,u+s,c,a+s,l];let h=t.userData.sections[o];!h?(h=V1(h,f,a,l,u,c),Ct.add(h),t.userData.sections.push(h),h.material=Fu(n),h.userData.visibleMaterial=Fu(!0),h.userData.bearlyVisibleMaterial=h.userData.visibleMaterial.clone(),h.userData.bearlyVisibleMaterial.opacity=.2,h.userData.invisibleMaterial=Fu(!1),Jae(h,t)):h=V1(h,f,a,l,u,c),h.userData.index=o,h.userData.componentIndex=t.userData.index,h.userData.previousPosition=h.position.clone(),h.userData.elementsLeftOrigin=$ae(h),h.userData.elementsRightOrigin=Xae(h),h.userData.elementsTopOrigin=Yae(h),h.userData.elementsBottomOrigin=jae(h),h.position.y=vr(t.userData.index)+i.bevelThickness,Ste(u,a,c,l,h,h.position),bte(h),Tee(u,a,c,l,h),Mee(h),UN(h,u,a,c,l),Bae(h,u,a,c,l),zae(h,u,a,c,l)}};function V1(t,e,n,r,i,s,o=!0){const a=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),l=t?t.userData.componentIndex:we().selectedFloor,u=we().getLineArrayBuilding[l].floor.floorHeight,c=new Ot(De().wallWidth+jr,at(u),a+jr);if(t===void 0){if(t=new Fe(c),o){const f=Rr.addObject(t);t.userData.dragControls=f,f.addEventListener("hoveron",function(h){mu.show(t);const d=we().getLineArrayBuilding[t.userData.componentIndex].floor.floorHeight;De().currentWallIndex=t.userData.index,De().currentWallLength=ir(a),De().currentWallThickness=ir(De().wallWidth),De().currentWallHeight=d}),f.addEventListener("dragstart",function(h){Wt.enabled=!1,h.object.material=Fu(!0)}),f.addEventListener("dragend",function(h){Wt.enabled=!0,h.object.material=Fu(!1);const d=Ye(we().getLineArrayBuilding[t.userData.componentIndex].floor.lineArray),p=h.object.userData.index;if(h.object.userData.index!==void 0){const g=ir(h.object.position.x-h.object.userData.previousPosition.x),x=ir(h.object.position.z-h.object.userData.previousPosition.z);d[p][0]+=g,d[p][1]+=x,d[p+1][0]+=g,d[p+1][1]+=x,t.userData.index===0&&(d[d.length-1][0]=d[0][0],d[d.length-1][1]=d[0][1]),t.userData.index===d.length-2&&(d[0][0]=d[d.length-1][0],d[0][1]=d[d.length-1][1]),De().setFloorLineArray(t.userData.componentIndex,d)}}),f.addEventListener("drag",function(h){const d=we().getLineArrayBuilding[t.userData.componentIndex].floor.floorHeight;h.object.position.y=vr(t.userData.componentIndex)+at(d/2)+jr})}}else t.geometry.dispose(),t.geometry=c;return t.userData.isSection=!0,Rr&&(we().drawing?Rr.deactivate():Rr.activate()),t.userData.points=[[n,r],[i,s]],t.userData.shapePoints=e,t.position.x=(n+i)/2,t.position.z=(r+s)/2,t.translateX(-(De().wallWidth/2)-jr),t.rotation.y=Math.atan2(i-n,s-r),t.position.z-=jr,t.visible=De().componentsVisible,t}const $ae=t=>new q(t.userData.points[0][0],vr(t.userData.componentIndex+1),t.userData.points[0][1]),Xae=t=>new q(t.userData.points[1][0],vr(t.userData.componentIndex+1),t.userData.points[1][1]),Yae=t=>new q(t.userData.points[0][0],vr(t.userData.componentIndex+1),t.userData.points[0][1]),jae=t=>new q(t.userData.points[0][0],vr(t.userData.componentIndex),t.userData.points[0][1]),qae=t=>{if(Ye(De().selectedSection)instanceof Fe&&Ye(we().selectedFloor)instanceof Fe){const e=t.parent;return Ye(De().selectedSection).userData.index===t.userData.index&&Ye(we().selectedFloor).userData.index===e.userData.index}return!1};function Jae(t,e){eo.add(t);const n=i=>{t.visible&&(we().drawing||i.stopPropagation(),!qae(t)&&we().drawing)};t.addEventListener("mouseover",n);const r=i=>{t.visible&&(we().drawing||i.stopPropagation(),!(Ye(De().selectedSection)===t)&&!we().drawing&&(t.material=Fu()))};t.addEventListener("mouseout",r),t.addEventListener("pointerdown",i=>{t.visible&&(we().drawing||i.stopPropagation(),Ye(De().selectedSection)instanceof Fe,we().drawing||(we().selectedFloor=e.userData.index,De().setSelectedSection(t)))})}const $I=(t,e)=>nt[t].userData.sections[e].position.toArray(),DV=t=>{const e=Ye(we().getLineArrayBuilding[t.userData.componentIndex].floor),n=e.lineArray,r=e.wall;r&&r.splice([t.userData.index],1),n.splice([t.userData.index],1),n[n.length-1]=n[0],TV(t),De().setFloorLineArray(t.userData.componentIndex,n)},TV=t=>{if(Rr.removeObject(t),eo.remove(t),t.userData.text){const n=t.userData.text;n.geometry.dispose(),n.parent.remove(n)}if(t.userData.windows&&t.userData.windows.forEach(r=>{Rr.removeObject(r),r.geometry.dispose(),r.material.dispose(),r.parent.remove(r)}),t.userData.doors&&t.userData.doors.forEach(r=>{Rr.removeObject(r),r.geometry.dispose(),r.material.dispose(),r.parent.remove(r)}),t.userData.facade){for(var e=t.userData.facade.children.length-1;e>=0;e--){const n=t.userData.facade.children[e];eo.remove(n),n.geometry.dispose(),n.material.dispose()}Ct.remove(t.userData.facade)}MV(t),nt[t.userData.componentIndex].userData.sections.splice(t.userData.index,1),nt[t.userData.componentIndex].userData.sections.forEach((n,r)=>{n.userData.index=r}),t.geometry.dispose(),t.material.dispose(),t.parent.remove(t)},we=Um({id:"store",state:()=>({debug:!1,activeCanvas:"2D",activeFloorplan:!0,activeConstructionElement:!1,activeFacade:!1,activeSubconstruction:!1,angleArray:[],draggingEdgeGroup:null,drawingDistancesGroup:null,drawingPointsGroup:null,configKonva:{container:"containerCanvas",width:950,height:585,draggable:!1,scale:{x:1.1448140900195696,y:1.1448140900195696},offsetX:-14.259295499021505,offsetY:0},configLineArray:[],configTempLineWhileDrawing:[],drawing:!0,isDrawing:!1,mouseDownCount:0,addConstructionElement:!1,mouseLocked:!1,defaultFloorHeight:2.4,distanceArray:[],floorView:[0],distanceTextConfig:{},drawingForm:"freeForm",tempCircle:[],tempFreeForm:[],tempRectangle:[],tempTriangle:[],tempTriangleSwitch:!1,enableAngles:!0,enableSnapIn:!0,floorLevel:0,helpingText:[{id:1,name:"drawing",value:"Click here to set a new point"},{id:2,name:"drawing",value:"Zoom with mouse wheel"}],helpLineXConfig:{},helpLineYConfig:{},constructionHelpLineXConfig:{},constructionHelpLineYConfig:{},lineArray:[],lineArrayBuilding:{house:[{floor:{distanceArray:[],floorHeight:null,lineArray:[],wall:[],xWall:[{windows:[],doors:[]}]}}],roofRidge:[]},lineArrayBuildingFloorDummy:{distanceArray:[],floorHeight:null,lineArray:[],wall:[],xWall:[{windows:[],doors:[]}]},lineArrayBuildingWallDummy:{elements:[],facade:{colorHexa:"#FFFFFF00",colorRgba:{r:255,g:255,b:255,a:0},facadePoints:[],layingDirection:"horizontal",layingType:"fugenschnitt",material:"",selectedArea:[],startingPoint:0,subConstructionPoints:[],subConstructionLayer:[]},pointsArray:[]},lineArrayBuildingSubConstructionLayerDummy:{subConstructionPoints:[],depth:null},lineArrayBuildingPartialAreaDummy:{colorHexa:"#FFFFFF00",colorRgba:{r:255,g:255,b:255,a:0},Points:[],ignore:!1,layingDirection:"horizontal",layingType:"fugenschnitt",material:"",pointsArray:[],redraw:!1,selectedArea:[],startingPoint:0,subConstructionPoints:[],subConstructionLayer:[]},dummyLineArrayBuilding:{house:[{floor:{distanceArray:[],lineArray:[],wall:[{pointsArray:[],facade:{colorHexa:"#FFFFFF00",colorRgba:{r:255,g:255,b:255,a:0},facadePoints:[],layingDirection:"horizontal",layingType:"fugenschnitt",material:"default_wpc.png",selectedArea:["pointsArray"],startingPoint:0,subConstructionLayer:[{subConstructionPoints:[],depth:0},{subConstructionPoints:[],depth:0}]},partialArea:[{colorHexa:"#FFFFFF00",colorRgba:{r:255,g:255,b:255,a:0},facadePoints:[],layingDirection:"horizontal",layingType:"fugenschnitt",material:"",pointsArray:[],selectedArea:[],startingPoint:0,subConstructionLayer:[{subConstructionPoints:[],depth:null}]},{colorHexa:"#FFFFFF00",colorRgba:{r:255,g:255,b:255,a:0},facadePoints:[],layingDirection:"vertical",layingType:"fugenschnitt",material:"",pointsArray:[],selectedArea:[],startingPoint:0,subConstructionLayer:[{subConstructionPoints:[],depth:null}]}],elements:[{id:"door",points:[],insertionDepth:30},{id:"window",points:[]}]},{pointsArray:[],elements:[]},{pointsArray:[],elements:[]},{pointsArray:[],elements:[]}],xWall:[{windows:[{centerPoint:[0,0,0],...sr().standardWindowValue}],doors:[{centerPoint:[0,0,0],...sr().standardDoorValue}]},{pointsArray:[],facade:{layingType:"fugenschnitt",layingDirection:"horizontal",startingPoint:0,selectedArea:["pointsArray"],facadePoints:[],material:"default_wpc.png"},partialArea:[{facadePoints:[],layingDirection:"horizontal",layingType:"fugenschnitt",material:"",pointsArray:[],selectedArea:[],startingPoint:0}],elements:[{id:"door",points:[],insertionDepth:30},{id:"windows",points:[]}]},{pointsArray:[],elements:[]},{pointsArray:[],elements:[]},{pointsArray:[],elements:[]}]}}],roofRidge:[]},dummyLineArray:[[["Stock"],[["Wand1"],[]],[["Wand2",["pointArray"]],[]],[["Wand3",["pointArray"]],[]],[["Wand4",["pointArray"]],[]]],[["Stock2",["pointArray"]],[["Wand1",["pointArray"]],[]],[["Wand2",["pointArray"]],[]]]],lineArrayPoints:null,tempLineArray:null,lineConfig:[],offsetX:0,offsetY:0,pointsTextArray:[],showSummary:!1,tempLineConfig:[],tempCursorConfig:[],tempDistanceTextConfig:[],tempConfigTempLineWhileDrawing:[],configHelperLine:[],cursorConfig:[],cursorStyle:"default",convaStage:[],realAnglesArray:[],distanceTextArray:[],posX:0,posY:0,showSideView:!1,floorHeight:300,miniMapScale:1,zoomFactor:1,zoomInMax:1.5,zoomOutMax:.3,drawingHeight:.8,preFactor:1,measureUnit:"",measureUnits:[{unit:"m",preFactor:.01},{unit:"cm",preFactor:1},{unit:"mm",preFactor:10}],draggableSidesConfig:[],visibleSidesConfig:[],draggingToleranz:15,canvasWidth:window.innerWidth,canvasHeight:window.innerHeight-2,responseMessage:!1,responseText:"",responseColor:"",persistMessage:!1,persistHeader:"",persistText:"",persistChoices:[],persistChoice:void 0,persistColor:"",showMenu:!1,vMenuPosition:{left:"0px",top:"0px"},vMenuHeadline:"",vMenuItems:[],selectedFloor:0,draggingCorner:!1,draggingEdge:!1,roofOptions:[{option:"Satteldach",image:"Giebeldach.svg",value:"saddleRoof"},{option:"Schr\xE4gdach",image:"Schr\xE4gdach.svg",value:"pitchedRoof"},{option:"Flachdach",image:"Flachdach.svg",value:"flatRoof"}],selectedRoof:"flatRoof",canvasCopy:[],showMeasurement:!0,showRoof:!0,showDescriptions:!0,showCornerAndEdges:!0,showMiniMap:!0}),getters:{getActiveCanvas(){return this.activeCanvas},getDistanceArray(){return this.distanceArray},getConfigKonva(){return this.configKonva},getDrawing(){return this.drawing},getIsDrawing(){return this.isDrawing},getAddConstructionElement(){return this.addConstructionElement},getMouseLocked(){return this.mouseLocked},getConfigTempLineWhileDrawing(){return this.configTempLineWhileDrawing},getConfigLineArray(){return this.configLineArray},getFloorHeight(){return this.floorHeight},getDefaultFloorHeight(){return this.defaultFloorHeight},getEnableAngles(){return this.enableAngles},getLineArray(){return this.lineArray},getLineArrayBuilding(){return this.lineArrayBuilding.house},getLineArrayBuildingRoofRidge(){return this.lineArrayBuilding.roofRidge},getLineArrayBuildingFloorDummy(){return this.lineArrayBuildingFloorDummy},getLineArrayBuildingWallDummy(){return this.lineArrayBuildingWallDummy},getLineArrayBuildingFacadeDummy(){return this.lineArrayBuildingFacadeDummy},getLineArrayBuildingPartialAreaDummy(){return this.lineArrayBuildingPartialAreaDummy},getTempLineArray(){return this.tempLineArray},getFloorLevel(){return this.floorLevel},getDraggingEdgeGroup(){return this.draggingEdgeGroup},getDrawingDistancesGroup(){return this.drawingDistancesGroup},getDrawingPointsGroup(){return this.drawingPointsGroup},getAngleArray(){return this.angleArray},getPointsTextArray(){return this.pointsTextArray},getHelpLineXConfig(){return this.helpLineXConfig},getHelpLineYConfig(){return this.helpLineYConfig},getConstructionHelpLineXConfig(){return this.constructionHelpLineXConfig},getConstructionHelpLineYConfig(){return this.constructionHelpLineYConfig},getLineConfig(){return this.lineConfig},getTempLineConfig(){return this.tempLineConfig},getDrawingForm(){return this.drawingForm},getTempCircle(){return this.tempCircle},getTempFreeForm(){return this.tempFreeForm},getTempRectangle(){return this.tempRectangle},getTempTriangle(){return this.tempTriangle},getTempTriangleSwitch(){return this.tempTriangleSwitch},getCursorStyle(){return this.cursorStyle},getConvaStage(){return this.convaStage},getZoomFactor(){return this.zoomFactor},getMeasureUnit(){return this.measureUnit},getDraggableSidesConfig(){return this.draggableSidesConfig},getVisibleSidesConfig(){return this.visibleSidesConfig},getCanvasWidth(){return this.canvasWidth},getCanvasHeight(){return this.canvasHeight}},actions:{setActiveCanvas(t){this.activeCanvas=t},setHelpLineXConfig(t){this.helpLineXConfig=t},setHelpLineYConfig(t){this.helpLineYConfig=t},setConstructionHelpLineXConfig(t){this.constructionHelpLineXConfig=t},setConstructionHelpLineYConfig(t){this.constructionHelpLineYConfig=t},setLineArray(t){this.lineArray=t},setLineArrayBuildingRoofRidge(t){this.lineArrayBuilding.roofRidge=t},setFloorLineArray(t,e){if(this.getLineArrayBuilding[t].floor.lineArray=e,e.length>=2){this.getLineArrayBuilding[t].floor.xWall||(this.getLineArrayBuilding[t].floor.xWall=[]);for(let n=0;n<e.length-1;n++)e.length>=2&&(this.getLineArrayBuilding[t].floor.xWall[n]||(this.getLineArrayBuilding[t].floor.xWall[n]={}))}},addWindowToFloorSection(t,e){this.getLineArrayBuilding[t].floor.xWall[e].windows||(this.getLineArrayBuilding[t].floor.xWall[e].windows=[]);const n=this.getLineArrayBuilding[t].floor.xWall[e].windows.length;this.getLineArrayBuilding[t].floor.xWall[e].windows[n]={centerPoint:$I(t,e),...sr().standardWindowValue}},setWindowCenterPoint(t,e,n,r){this.getLineArrayBuilding[t].floor.xWall[e].windows[n].centerPoint=r},addDoorToFloorSection(t,e){this.getLineArrayBuilding[t].floor.xWall[e].doors||(this.getLineArrayBuilding[t].floor.xWall[e].doors=[]);const n=this.getLineArrayBuilding[t].floor.xWall[e].doors.length;this.getLineArrayBuilding[t].floor.xWall[e].doors[n]={centerPoint:$I(t,e),...sr().standardDoorValue}},setDoorCenterPoint(t,e,n,r){this.getLineArrayBuilding[t].floor.xWall[e].doors[n].centerPoint=r},setTempLineArray(t){this.tempLineArray=t},setLineConfig(t){this.lineConfig=t},setLineArrayElement(t){this.lineArrayElement=t},setDrawing(t){this.drawing=t},setIsDrawing(t){this.isDrawing=t},setAddConstructionElement(t){this.addConstructionElement=t},setMouseLocked(t){this.mouseLocked=t},setDistanceTextConfig(t){this.distanceTextConfig=t},setTempLineConfig(t){this.tempLineConfig=t},setFakeLineConfig(t){this.fakeLineConfig=t},setConfigKonva(t){this.configKonva=t},setDistanceArray(t){this.distanceArray=t},setRealAngleArray(t){this.realAnglesArray=t},setDistanceTextArray(t){this.distanceTextArray=t},setDrawingForm(t){this.drawingForm=t},setTempCircle(t){this.tempCircle=t},setTempFreeForm(t){this.tempFreeForm=t},setTempRectangle(t){this.tempRectangle=t},setTempTriangle(t){this.tempTriangle=t},setTempTriangleSwitch(t){this.tempTriangleSwitch=t},setCursorStyle(t){this.cursorStyle=t,this.convaStage.container().style.cursor=t},setConvaStage(t){this.convaStage=t},setZoomFactor(t){this.zoomFactor=t},setMeasureUnit(t){this.measureUnit=t},setDraggableSidesConfig(t){this.draggableSidesConfig=t},setVisibleSidesConfig(t){this.visibleSidesConfig=t},setPointsTextArray(t){this.pointsTextArray=t},setOffsetX(t){this.offsetX=t},setOffsetY(t){this.offsetY=t},setCanvasWidth(t){this.canvasWidth=t},setCanvasHeight(t){this.canvasHeight=t},setDraggingEdgeGroup(t){this.draggingEdgeGroup=t},setDrawingDistancesGroup(t){this.drawingDistancesGroup=t},setDrawingPointsGroup(t){this.drawingPointsGroup=t},setResponseMessage(t){this.responseMessage=t},setResponseText(t){this.responseText=t},setResponseColor(t){this.responseColor=t},setPersistMessage(t){this.persistMessage=t},setPersistHeader(t){this.persistHeader=t},setPersistText(t){this.persistText=t},setPersistChoices(t){this.persistChoices=t},setPersistColor(t){this.persistColor=t},setActiveFloorplan(t){this.activeFloorplan=t},setActiveConstructionElement(t){this.activeConstructionElement=t},setActiveFacade(t){this.activeFacade=t},setActiveSubconstruction(t){this.activeSubconstruction=t}}});var Kae=Math.PI/180;function Zae(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Kh=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},ot={_global:Kh,version:"8.4.3",isBrowser:Zae(),isUnminified:/param/.test(function(t){}.toString()),dblClickWindow:400,getAngle(t){return ot.angleDeg?t*Kae:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return ot.DD.isDragging},isDragReady(){return!!ot.DD.node},releaseCanvasOnDestroy:!0,document:Kh.document,_injectGlobal(t){Kh.Konva=t}},er=t=>{ot[t.prototype.getClassName()]=t};ot._injectGlobal(ot);class As{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new As(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),r=Math.sin(e),i=this.m[0]*n+this.m[2]*r,s=this.m[1]*n+this.m[3]*r,o=this.m[0]*-r+this.m[2]*n,a=this.m[1]*-r+this.m[3]*n;return this.m[0]=i,this.m[1]=s,this.m[2]=o,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var r=this.m[0]+this.m[2]*n,i=this.m[1]+this.m[3]*n,s=this.m[2]+this.m[0]*e,o=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],o=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=o,this.m[5]=a,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,r=-this.m[1]*e,i=-this.m[2]*e,s=this.m[0]*e,o=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=o,this.m[5]=a,this}getMatrix(){return this.m}decompose(){var e=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],s=this.m[4],o=this.m[5],a=e*i-n*r;let l={x:s,y:o,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var u=Math.sqrt(e*e+n*n);l.rotation=n>0?Math.acos(e/u):-Math.acos(e/u),l.scaleX=u,l.scaleY=a/u,l.skewX=(e*r+n*i)/a,l.skewY=0}else if(r!=0||i!=0){var c=Math.sqrt(r*r+i*i);l.rotation=Math.PI/2-(i>0?Math.acos(-r/c):-Math.acos(r/c)),l.scaleX=a/c,l.scaleY=c,l.skewX=0,l.skewY=(e*r+n*i)/a}return l.rotation=xe._getRotation(l.rotation),l}}var Qae="[object Array]",ele="[object Number]",tle="[object String]",nle="[object Boolean]",rle=Math.PI/180,ile=180/Math.PI,wS="#",sle="",ole="0",ale="Konva warning: ",XI="Konva error: ",lle="rgb(",bS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},ule=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Q0=[];const cle=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},xe={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===Qae},_isNumber(t){return Object.prototype.toString.call(t)===ele&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===tle},_isBoolean(t){return Object.prototype.toString.call(t)===nle},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){Q0.push(t),Q0.length===1&&cle(function(){const e=Q0;Q0=[],e.forEach(function(n){n()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=xe.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(t){t=t.replace(wS,sle);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=ole+t;return wS+t},getRGB(t){var e;return t in bS?(e=bS[t],{r:e[0],g:e[1],b:e[2]}):t[0]===wS?this._hexToRgb(t.substring(1)):t.substr(0,4)===lle?(e=ule.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",xe._namedColorToRBA(t)||xe._hex3ColorToRGBA(t)||xe._hex4ColorToRGBA(t)||xe._hex6ColorToRGBA(t)||xe._hex8ColorToRGBA(t)||xe._rgbColorToRGBA(t)||xe._rgbaColorToRGBA(t)||xe._hslColorToRGBA(t)},_namedColorToRBA(t){var e=bS[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map((n,r)=>n.slice(-1)==="%"?r===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if(t[0]==="#"&&t.length===9)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if(t[0]==="#"&&t.length===5)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(n[0])/360,i=Number(n[1])/100,s=Number(n[2])/100;let o,a,l;if(i===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?o=s*(1+i):o=s+i-s*i;const u=2*s-o,c=[0,0,0];for(let f=0;f<3;f++)a=r+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?l=u+(o-u)*6*a:2*a<1?l=o:3*a<2?l=u+(o-u)*(2/3-a)*6:l=u,c[f]=l*255;return{r:Math.round(c[0]),g:Math.round(c[1]),b:Math.round(c[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*rle},radToDeg(t){return t*ile},_degToRad(t){return xe.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),xe.degToRad(t)},_radToDeg(t){return xe.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),xe.radToDeg(t)},_getRotation(t){return ot.angleDeg?xe.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(XI+t)},error(t){console.error(XI+t)},warn(t){!ot.showWarnings||console.warn(ale+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange(t,e,n){return e<=t&&t<n},_getProjectionToSegment(t,e,n,r,i,s){var o,a,l,u=(t-n)*(t-n)+(e-r)*(e-r);if(u==0)o=t,a=e,l=(i-n)*(i-n)+(s-r)*(s-r);else{var c=((i-t)*(n-t)+(s-e)*(r-e))/u;c<0?(o=t,a=e,l=(t-i)*(t-i)+(e-s)*(e-s)):c>1?(o=n,a=r,l=(n-i)*(n-i)+(r-s)*(r-s)):(o=t+c*(n-t),a=e+c*(r-e),l=(o-i)*(o-i)+(a-s)*(a-s))}return[o,a,l]},_getProjectionToLine(t,e,n){var r=xe.cloneObject(t),i=Number.MAX_VALUE;return e.forEach(function(s,o){if(!(!n&&o===e.length-1)){var a=e[(o+1)%e.length],l=xe._getProjectionToSegment(s.x,s.y,a.x,a.y,t.x,t.y),u=l[0],c=l[1],f=l[2];f<i&&(r.x=u,r.y=c,i=f)}}),r},_prepareArrayForTween(t,e,n){var r,i=[],s=[];if(t.length>e.length){var o=e;e=t,t=o}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)s.push({x:e[r],y:e[r+1]});var a=[];return s.forEach(function(l){var u=xe._getProjectionToLine(l,i,n);a.push(u.x),a.push(u.y)}),a},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var n in t)if(!!(t.hasOwnProperty(n)&&t[n]&&typeof t[n]=="object")){if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||xe._isElement(t[n]))if(e.configurable)delete t[n];else return null;else if(xe._prepareToStringify(t[n])===null)if(e.configurable)delete t[n];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){!ot.releaseCanvasOnDestroy||t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(t,e,n,r){let i=0,s=0,o=0,a=0;typeof r=="number"?i=s=o=a=Math.min(r,e/2,n/2):(i=Math.min(r[0]||0,e/2,n/2),s=Math.min(r[1]||0,e/2,n/2),a=Math.min(r[2]||0,e/2,n/2),o=Math.min(r[3]||0,e/2,n/2)),t.moveTo(i,0),t.lineTo(e-s,0),t.arc(e-s,s,s,Math.PI*3/2,0,!1),t.lineTo(e,n-a),t.arc(e-a,n-a,a,0,Math.PI/2,!1),t.lineTo(o,n),t.arc(o,n-o,o,Math.PI/2,Math.PI,!1),t.lineTo(0,i),t.arc(i,i,i,Math.PI,Math.PI*3/2,!1)}};function ec(t){return xe._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||xe._isBoolean(t)?t:Object.prototype.toString.call(t)}function PV(t){return t>255?255:t<0?0:Math.round(t)}function $e(){if(ot.isUnminified)return function(t,e){return xe._isNumber(t)||xe.warn(ec(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function C2(t){if(ot.isUnminified)return function(e,n){let r=xe._isNumber(e),i=xe._isArray(e)&&e.length==t;return!r&&!i&&xe.warn(ec(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function M2(){if(ot.isUnminified)return function(t,e){var n=xe._isNumber(t),r=t==="auto";return n||r||xe.warn(ec(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Gd(){if(ot.isUnminified)return function(t,e){return xe._isString(t)||xe.warn(ec(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function LV(){if(ot.isUnminified)return function(t,e){const n=xe._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||xe.warn(ec(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function fle(){if(ot.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(xe._isArray(t)?t.forEach(function(r){xe._isNumber(r)||xe.warn('"'+e+'" attribute has non numeric element '+r+". Make sure that all elements are numbers.")}):xe.warn(ec(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function Uo(){if(ot.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||xe.warn(ec(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function hle(t){if(ot.isUnminified)return function(e,n){return e==null||xe.isObject(e)||xe.warn(ec(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}var Np="get",Vp="set";const me={addGetterSetter(t,e,n,r,i){me.addGetter(t,e,n),me.addSetter(t,e,r,i),me.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var r=Np+xe._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var i=this.attrs[e];return i===void 0?n:i}},addSetter(t,e,n,r){var i=Vp+xe._capitalize(e);t.prototype[i]||me.overWriteSetter(t,e,n,r)},overWriteSetter(t,e,n,r){var i=Vp+xe._capitalize(e);t.prototype[i]=function(s){return n&&s!==void 0&&s!==null&&(s=n.call(this,s,e)),this._setAttr(e,s),r&&r.call(this),this}},addComponentsGetterSetter(t,e,n,r,i){var s=n.length,o=xe._capitalize,a=Np+o(e),l=Vp+o(e),u,c;t.prototype[a]=function(){var h={};for(u=0;u<s;u++)c=n[u],h[c]=this.getAttr(e+o(c));return h};var f=hle(n);t.prototype[l]=function(h){var d=this.attrs[e],p;r&&(h=r.call(this,h)),f&&f.call(this,h,e);for(p in h)!h.hasOwnProperty(p)||this._setAttr(e+o(p),h[p]);return h||n.forEach(g=>{this._setAttr(e+o(g),void 0)}),this._fireChangeEvent(e,d,h),i&&i.call(this),this},me.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=xe._capitalize(e),r=Vp+n,i=Np+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(t,e,n,r){xe.error("Adding deprecated "+e);var i=Np+xe._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){xe.error(s);var o=this.attrs[e];return o===void 0?n:o},me.addSetter(t,e,r,function(){xe.error(s)}),me.addOverloadedGetterSetter(t,e)},backCompat(t,e){xe.each(e,function(n,r){var i=t.prototype[r],s=Np+xe._capitalize(n),o=Vp+xe._capitalize(n);function a(){i.apply(this,arguments),xe.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[n]=a,t.prototype[s]=a,t.prototype[o]=a})},afterSetFilter(){this._filterUpToDate=!1}};function dle(t){var e=[],n=t.length,r=xe,i,s;for(i=0;i<n;i++)s=t[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s);return e}var YI=",",ple="(",gle=")",mle="([",vle="])",yle=";",_le="()",wle="=",jI=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],ble=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const xle=100;class Z_{constructor(e){this.canvas=e,ot.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,i=r.length,s="",o,a,l,u;for(o=0;o<i;o++)a=r[o],l=a.method,l?(u=a.args,s+=l,e?s+=_le:xe._isArray(u[0])?s+=mle+u.join(YI)+vle:(n&&(u=u.map(c=>typeof c=="number"?Math.floor(c):c)),s+=ple+u.join(YI)+gle)):(s+=a.property,e||(s+=wle+a.val)),s+=yle;return s}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=xle&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,s,o){this._context.arc(e,n,r,i,s,o)}arcTo(e,n,r,i,s){this._context.arcTo(e,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,s,o){this._context.bezierCurveTo(e,n,r,i,s,o)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,s,o){return this._context.createRadialGradient(e,n,r,i,s,o)}drawImage(e,n,r,i,s,o,a,l,u){var c=arguments,f=this._context;c.length===3?f.drawImage(e,n,r):c.length===5?f.drawImage(e,n,r,i,s):c.length===9&&f.drawImage(e,n,r,i,s,o,a,l,u)}ellipse(e,n,r,i,s,o,a,l){this._context.ellipse(e,n,r,i,s,o,a,l)}isPointInPath(e,n,r,i){return r?this._context.isPointInPath(r,e,n,i):this._context.isPointInPath(e,n,i)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,s,o){this._context.setTransform(e,n,r,i,s,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,s,o){this._context.transform(e,n,r,i,s,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=jI.length,r=this.setAttr,i,s,o=function(a){var l=e[a],u;e[a]=function(){return s=dle(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:a,args:s}),u}};for(i=0;i<n;i++)o(jI[i]);e.setAttr=function(){r.apply(e,arguments);var a=arguments[0],l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:a,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}}ble.forEach(function(t){Object.defineProperty(Z_.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Sle extends Z_{constructor(e){super(e),this._context=e._canvas.getContext("2d")}_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}const i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}const o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(var o=0;o<i.length;o+=2)s.addColorStop(i[o],i[o+1]);this.setAttr("strokeStyle",s)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=e.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i,s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),c=l.x*u,f=l.y*u;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(f))),this.setAttr("shadowOffsetX",a.x*c),this.setAttr("shadowOffsetY",a.y*f)}}class Ale extends Z_{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const s=e.getStrokeScaleEnabled();if(!s){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e);var r=e.hitStrokeWidth(),i=r==="auto"?e.strokeWidth():r;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),s||this.restore()}}}var ey;function Ele(){if(ey)return ey;var t=xe.createCanvasElement(),e=t.getContext("2d");return ey=function(){var n=ot._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),xe.releaseCanvas(t),ey}class Q_{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||ot.pixelRatio||Ele();this.pixelRatio=r,this._canvas=xe.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return xe.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}me.addGetterSetter(Q_,"pixelRatio",void 0,$e());class Zh extends Q_{constructor(e={width:0,height:0}){super(e),this.context=new Sle(this),this.setSize(e.width,e.height)}}class D2 extends Q_{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Ale(this),this.setSize(e.width,e.height)}}const tn={get isDragging(){var t=!1;return tn._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return tn._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];tn._dragElements.forEach((n,r)=>{const{node:i}=n,s=i.getStage();s.setPointersPositions(t),n.pointerId===void 0&&(n.pointerId=xe._getFirstPointerId(t));const o=s._changedPointerPositions.find(u=>u.id===n.pointerId);if(!!o){if(n.dragStatus!=="dragging"){var a=i.dragDistance(),l=Math.max(Math.abs(o.x-n.startPointerPos.x),Math.abs(o.y-n.startPointerPos.y));if(l<a||(i.startDrag({evt:t}),!i.isDragging()))return}i._setDragPosition(t,n),e.push(i)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)})},_endDragBefore(t){const e=[];tn._dragElements.forEach(n=>{const{node:r}=n,i=r.getStage();if(t&&i.setPointersPositions(t),!i._changedPointerPositions.find(a=>a.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(tn.justDragged=!0,ot._mouseListenClick=!1,ot._touchListenClick=!1,ot._pointerListenClick=!1,n.dragStatus="stopped");const o=n.node.getLayer()||n.node instanceof ot.Stage&&n.node;o&&e.indexOf(o)===-1&&e.push(o)}),e.forEach(n=>{n.draw()})},_endDragAfter(t){tn._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&tn._dragElements.delete(n)})}};ot.isBrowser&&(window.addEventListener("mouseup",tn._endDragBefore,!0),window.addEventListener("touchend",tn._endDragBefore,!0),window.addEventListener("mousemove",tn._drag),window.addEventListener("touchmove",tn._drag),window.addEventListener("mouseup",tn._endDragAfter,!1),window.addEventListener("touchend",tn._endDragAfter,!1));var Wy="absoluteOpacity",ty="allEventListeners",nl="absoluteTransform",qI="absoluteScale",Mc="canvas",Cle="Change",Mle="children",Dle="konva",wE="listening",JI="mouseenter",KI="mouseleave",ZI="set",QI="Shape",$y=" ",e3="stage",tu="transform",Tle="Stage",bE="visible",Ple=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join($y);let Lle=1;class We{constructor(e){this._id=Lle++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===tu||e===nl)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),i=e===tu||e===nl,s=r===void 0||i&&r.dirty===!0;return s&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const i=n.map(s=>s+"Change.konva").join($y);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(Mc)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===nl&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Mc)){const{scene:e,filter:n,hit:r}=this._cache.get(Mc);xe.releaseCanvas(e,n,r),this._cache.delete(Mc)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),o=n.pixelRatio,a=n.x===void 0?Math.floor(r.x):n.x,l=n.y===void 0?Math.floor(r.y):n.y,u=n.offset||0,c=n.drawBorder||!1,f=n.hitCanvasPixelRatio||1;if(!i||!s){xe.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}i+=u*2+1,s+=u*2+1,a-=u,l-=u;var h=new Zh({pixelRatio:o,width:i,height:s}),d=new Zh({pixelRatio:o,width:0,height:0}),p=new D2({pixelRatio:f,width:i,height:s}),g=h.getContext(),x=p.getContext();return p.isCache=!0,h.isCache=!0,this._cache.delete(Mc),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(h.getContext()._context.imageSmoothingEnabled=!1,d.getContext()._context.imageSmoothingEnabled=!1),g.save(),x.save(),g.translate(-a,-l),x.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Wy),this._clearSelfAndDescendantCache(qI),this.drawScene(h,this),this.drawHit(p,this),this._isUnderCache=!1,g.restore(),x.restore(),c&&(g.save(),g.beginPath(),g.rect(0,0,i,s),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set(Mc,{scene:h,filter:d,hit:p,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Mc)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i,s,o,a,l=this.getAbsoluteTransform(n);return r.forEach(function(u){var c=l.point(u);i===void 0&&(i=o=c.x,s=a=c.y),i=Math.min(i,c.x),s=Math.min(s,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),{x:i,y:s,width:o-i,height:a-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),o,a,l,u;if(e){if(!this._filterUpToDate){var c=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/c,r.getHeight()/c),a=s.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<o;l++){if(u=e[l],typeof u!="function"){xe.error("Filter should be type of function, but got "+typeof u+" instead. Please check correct filters");continue}u.call(this,a),s.putImageData(a,0,0)}}catch(f){xe.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(ty),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split($y),i=r.length,s,o,a,l,u;for(s=0;s<i;s++)o=r[s],a=o.split("."),l=a[0],u=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:u,handler:n});return this}off(e,n){var r=(e||"").split($y),i=r.length,s,o,a,l,u,c;if(this._cache&&this._cache.delete(ty),!e)for(o in this.eventListeners)this._off(o);for(s=0;s<i;s++)if(a=r[s],l=a.split("."),u=l[0],c=l[1],u)this.eventListeners[u]&&this._off(u,c,n);else for(o in this.eventListeners)this._off(o,c,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var i=this;this.on(e,function(s){for(var o=s.target.findAncestors(n,!0,i),a=0;a<o.length;a++)s=xe.cloneObject(s),s.currentTarget=o[a],r.call(o[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),tn._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(nl),this._clearSelfAndDescendantCache(Wy),this._clearSelfAndDescendantCache(qI),this._clearSelfAndDescendantCache(e3),this._clearSelfAndDescendantCache(bE),this._clearSelfAndDescendantCache(wE)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){var n="get"+xe._capitalize(e);return xe._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==Mle&&(r=ZI+xe._capitalize(n),xe._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(wE,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(bE,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;tn._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(i=!0)});var s=!n&&!ot.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,i,s,o,a;function l(u){for(i=[],s=u.length,o=0;o<s;o++)a=u[o],r++,a.nodeType!==QI&&(i=i.concat(a.getChildren().slice())),a._id===n._id&&(o=s);i.length>0&&i[0].getDepth()<=e&&l(i)}return n.nodeType!==Tle&&l(n.getStage().getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(tu),this._clearSelfAndDescendantCache(nl)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),s=new As,o=this.offset();return s.m=i.slice(),s.translate(o.x,o.y),s.getTranslation()}setAbsolutePosition(e){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(tu);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(tu),this._clearSelfAndDescendantCache(nl),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,n){var r=[],i=this.getParent(),s,o;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,o=0;o<s;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return xe.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return xe.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return xe.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return xe.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return xe.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&xe.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Wy,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},n=this.getAttrs(),r,i,s,o,a;e.attrs={};for(r in n)i=n[r],a=xe.isObject(i)&&!xe._isPlainObject(i)&&!xe._isArray(i),!a&&(s=typeof this[r]=="function"&&this[r],delete n[r],o=s?s.call(this):null,n[r]=i,o!==i&&(e.attrs[r]=i));return e.className=this.getClassName(),xe._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var i=[];n&&this._isMatch(e)&&i.push(this);for(var s=this.parent;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],xe.isValidSelector(s)||(xe.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),xe.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),xe.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(e3,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(nl,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new As,this._eachAncestorReverse(function(i){var s=i.transformsEnabled();s==="all"?n.multiply(i.getTransform()):s==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),n;n=this._cache.get(nl)||new As,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(i-o,s-a)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(tu,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(tu)||new As;r.reset();var i=this.x(),s=this.y(),o=ot.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,c=this.attrs.skewY||0,f=this.attrs.offsetX||0,h=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),o!==0&&r.rotate(o),(u!==0||c!==0)&&r.skew(u,c),(a!==1||l!==1)&&r.scale(a,l),(f!==0||h!==0)&&r.translate(-1*f,-1*h),r.dirty=!1,r}clone(e){var n=xe.cloneObject(this.attrs),r,i,s,o,a;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,o=0;o<s;o++)a=i[o],a.name.indexOf(Dle)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(a));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:Math.floor(n.x),s=e.y!==void 0?e.y:Math.floor(n.y),o=e.pixelRatio||1,a=new Zh({width:e.width||Math.ceil(n.width)||(r?r.width():0),height:e.height||Math.ceil(n.height)||(r?r.height():0),pixelRatio:o}),l=a.getContext();return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(i||s)&&l.translate(-1*i,-1*s),this.drawScene(a),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,xe._urlToImage(this.toDataURL(e),function(s){n(s),i==null||i(s)})}catch(i){r(i)}})}toBlob(e){return new Promise((n,r)=>{try{const i=e==null?void 0:e.callback;i&&delete e.callback,this.toCanvas(e).toBlob(s=>{n(s),i==null||i(s)})}catch(i){r(i)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():ot.dragDistance}_off(e,n,r){var i=this.eventListeners[e],s,o,a;for(s=0;s<i.length;s++)if(o=i[s].name,a=i[s].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===a)){if(i.splice(s,1),i.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,r){this._fire(e+Cle,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[ZI+xe._capitalize(e)];return xe._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(ot.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!xe.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){n&&this.nodeType===QI&&(n.target=this);var i=(e===JI||e===KI)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(e,n);var s=(e===JI||e===KI)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){let n=this._cache.get(ty);if(!n){n={};let i=Object.getPrototypeOf(this);for(;i;){if(!i.eventListeners){i=Object.getPrototypeOf(i);continue}for(var r in i.eventListeners){const s=i.eventListeners[r],o=n[r]||[];n[r]=s.concat(o)}i=Object.getPrototypeOf(i)}this._cache.set(ty,n)}return n[e]}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[e];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition(),s=r._getPointerById(n)||r._changedPointerPositions[0]||i;tn._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){tn._dragElements.has(this._id)||this._createDragElement(e);const r=tn._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(!!r){var i={x:r.x-n.offset.x,y:r.y-n.offset.y},s=this.dragBoundFunc();if(s!==void 0){const o=s.call(this,i,e);o?i=o:xe.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){const n=tn._dragElements.get(this._id);n&&(n.dragStatus="stopped"),tn._endDragBefore(e),tn._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=tn._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||ot.dragButtons.indexOf(e.evt.button)>=0;if(!!r&&!this.isDragging()){var i=!1;tn._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=tn._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&tn._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return xe.haveIntersection(r,this.getClientRect())}static create(e,n){return xe._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=We.prototype.getClassName.call(e),i=e.children,s,o,a;n&&(e.attrs.container=n),ot[r]||(xe.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=ot[r];if(s=new l(e.attrs),i)for(o=i.length,a=0;a<o;a++)s.add(We._createNode(i[a]));return s}}We.prototype.nodeType="Node";We.prototype._attrsAffectingSize=[];We.prototype.eventListeners={};We.prototype.on.call(We.prototype,Ple,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(tu),this._clearSelfAndDescendantCache(nl)});We.prototype.on.call(We.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(bE)});We.prototype.on.call(We.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(wE)});We.prototype.on.call(We.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Wy)});const Mn=me.addGetterSetter;Mn(We,"zIndex");Mn(We,"absolutePosition");Mn(We,"position");Mn(We,"x",0,$e());Mn(We,"y",0,$e());Mn(We,"globalCompositeOperation","source-over",Gd());Mn(We,"opacity",1,$e());Mn(We,"name","",Gd());Mn(We,"id","",Gd());Mn(We,"rotation",0,$e());me.addComponentsGetterSetter(We,"scale",["x","y"]);Mn(We,"scaleX",1,$e());Mn(We,"scaleY",1,$e());me.addComponentsGetterSetter(We,"skew",["x","y"]);Mn(We,"skewX",0,$e());Mn(We,"skewY",0,$e());me.addComponentsGetterSetter(We,"offset",["x","y"]);Mn(We,"offsetX",0,$e());Mn(We,"offsetY",0,$e());Mn(We,"dragDistance",null,$e());Mn(We,"width",0,$e());Mn(We,"height",0,$e());Mn(We,"listening",!0,Uo());Mn(We,"preventDefault",!0,Uo());Mn(We,"filters",null,function(t){return this._filterUpToDate=!1,t});Mn(We,"visible",!0,Uo());Mn(We,"transformsEnabled","all",Gd());Mn(We,"size");Mn(We,"dragBoundFunc");Mn(We,"draggable",!1,Uo());me.backCompat(We,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Ts extends We{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(var n=0;n<e.length;n++)this.add(e[n]);return this}const r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!!(s&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const i of r){if(n=e(i),n)return!0;if(!!i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){var e=We.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=We.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas(),s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.scene,l=i&&i.isCache;if(!this.isVisible()&&!l)return this;if(a){s.save();var u=this.getAbsoluteTransform(n).getMatrix();s.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",i,n);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.hit;if(a){s.save();var l=this.getAbsoluteTransform(n).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r){var i,s=n&&n.getContext(),o=this.clipWidth(),a=this.clipHeight(),l=this.clipFunc(),u=o&&a||l;const c=r===this;if(u){s.save();var f=this.getAbsoluteTransform(r),h=f.getMatrix();if(s.transform(h[0],h[1],h[2],h[3],h[4],h[5]),s.beginPath(),l)l.call(this,s,this);else{var d=this.clipX(),p=this.clipY();s.rect(d,p,o,a)}s.clip(),h=f.copy().invert().getMatrix(),s.transform(h[0],h[1],h[2],h[3],h[4],h[5])}var g=!c&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";g&&(s.save(),s._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(x){x[e](n,r)}),g&&s.restore(),u&&s.restore()}getClientRect(e){var n;e=e||{};var r=e.skipTransform,i=e.relativeTo,s,o,a,l,u={x:1/0,y:1/0,width:0,height:0},c=this;(n=this.children)===null||n===void 0||n.forEach(function(g){if(!!g.visible()){var x=g.getClientRect({relativeTo:c,skipShadow:e.skipShadow,skipStroke:e.skipStroke});x.width===0&&x.height===0||(s===void 0?(s=x.x,o=x.y,a=x.x+x.width,l=x.y+x.height):(s=Math.min(s,x.x),o=Math.min(o,x.y),a=Math.max(a,x.x+x.width),l=Math.max(l,x.y+x.height)))}});for(var f=this.find("Shape"),h=!1,d=0;d<f.length;d++){var p=f[d];if(p._isVisible(this)){h=!0;break}}return h&&s!==void 0?u={x:s,y:o,width:a-s,height:l-o}:u={x:0,y:0,width:0,height:0},r?u:this._transformedRect(u,i)}}me.addComponentsGetterSetter(Ts,"clip",["x","y","width","height"]);me.addGetterSetter(Ts,"clipX",void 0,$e());me.addGetterSetter(Ts,"clipY",void 0,$e());me.addGetterSetter(Ts,"clipWidth",void 0,$e());me.addGetterSetter(Ts,"clipHeight",void 0,$e());me.addGetterSetter(Ts,"clipFunc");const Sm=new Map,FV=ot._global.PointerEvent!==void 0;function xS(t){return Sm.get(t)}function T2(t){return{evt:t,pointerId:t.pointerId}}function IV(t,e){return Sm.get(t)===e}function kV(t,e){Dg(t),e.getStage()&&(Sm.set(t,e),FV&&e._fire("gotpointercapture",T2(new PointerEvent("gotpointercapture"))))}function Dg(t,e){const n=Sm.get(t);if(!n)return;const r=n.getStage();r&&r.content,Sm.delete(t),FV&&n._fire("lostpointercapture",T2(new PointerEvent("lostpointercapture")))}var Fle="Stage",Ile="string",t3="px",kle="mouseout",RV="mouseleave",OV="mouseover",BV="mouseenter",NV="mousemove",VV="mousedown",zV="mouseup",rg="pointermove",ig="pointerdown",Dh="pointerup",sg="pointercancel",Rle="lostpointercapture",ny="pointerout",ry="pointerleave",iy="pointerover",sy="pointerenter",xE="contextmenu",GV="touchstart",UV="touchend",HV="touchmove",WV="touchcancel",SE="wheel",Ole=5,Ble=[[BV,"_pointerenter"],[VV,"_pointerdown"],[NV,"_pointermove"],[zV,"_pointerup"],[RV,"_pointerleave"],[GV,"_pointerdown"],[HV,"_pointermove"],[UV,"_pointerup"],[WV,"_pointercancel"],[OV,"_pointerover"],[SE,"_wheel"],[xE,"_contextmenu"],[ig,"_pointerdown"],[rg,"_pointermove"],[Dh,"_pointerup"],[sg,"_pointercancel"],[Rle,"_lostpointercapture"]];const SS={mouse:{[ny]:kle,[ry]:RV,[iy]:OV,[sy]:BV,[rg]:NV,[ig]:VV,[Dh]:zV,[sg]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[ny]:"touchout",[ry]:"touchleave",[iy]:"touchover",[sy]:"touchenter",[rg]:HV,[ig]:GV,[Dh]:UV,[sg]:WV,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[ny]:ny,[ry]:ry,[iy]:iy,[sy]:sy,[rg]:rg,[ig]:ig,[Dh]:Dh,[sg]:sg,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},og=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",oh=t=>{const e=og(t);if(e==="pointer")return ot.pointerEventsEnabled&&SS.pointer;if(e==="touch")return SS.touch;if(e==="mouse")return SS.mouse};function n3(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&xe.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const Nle="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Xy=[];class ew extends Ts{constructor(e){super(n3(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Xy.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{n3(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",r=e.getType()==="FastLayer";n||r||xe.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===Ile){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var r;e.charAt(0)!=="#"?r=e:r=e.slice(1),e=document.getElementById(r)}if(!e)throw"Can not find container in document with id "+r}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,r;for(r=0;r<n;r++)e[r].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Ts.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&xe._isInDocument(e)&&this.container().removeChild(e);var n=Xy.indexOf(this);return n>-1&&Xy.splice(n,1),xe.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(xe.warn(Nle),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new Zh({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),r=n.getContext()._context,i=this.children;return(e.x||e.y)&&r.translate(-1*e.x,-1*e.y),i.forEach(function(s){if(!!s.isVisible()){var o=s._toKonvaCanvas(e);r.drawImage(o._canvas,e.x,e.y,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,r=n.length,i=r-1,s;for(s=i;s>=0;s--){const o=n[s].getIntersection(e);if(o)return o}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+t3,this.content.style.height=n+t3),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(r=>{r.setSize({width:e,height:n}),r.draw()})}add(e,...n){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var i=this.children.length;return i>Ole&&xe.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),ot.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return IV(e,this)}setPointerCapture(e){kV(e,this)}releaseCapture(e){Dg(e)}getLayers(){return this.children}_bindContentEvents(){!ot.isBrowser||Ble.forEach(([e,n])=>{this.content.addEventListener(e,r=>{this[n](r)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const n=oh(e.type);this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=oh(e.type);this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=oh(e.type),r=og(e.type);if(!!n){this.setPointersPositions(e);var i=this._getTargetShape(r),s=!tn.isDragging||ot.hitOnDragEnabled;i&&s?(i._fireAndBubble(n.pointerout,{evt:e}),i._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const n=oh(e.type),r=og(e.type);if(!!n){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach(s=>{var o=this.getIntersection(s);if(tn.justDragged=!1,ot["_"+r+"ListenClick"]=!0,!(o&&o.isListening()))return;ot.capturePointerEventsEnabled&&o.setPointerCapture(s.id),this[r+"ClickStartShape"]=o,o._fireAndBubble(n.pointerdown,{evt:e,pointerId:s.id}),i=!0;const l=e.type.indexOf("touch")>=0;o.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),i||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const n=oh(e.type),r=og(e.type);if(!n)return;tn.isDragging&&tn.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var i=!tn.isDragging||ot.hitOnDragEnabled;if(!i)return;var s={};let o=!1;var a=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const u=xS(l.id)||this.getIntersection(l),c=l.id,f={evt:e,pointerId:c};var h=a!==u;if(h&&a&&(a._fireAndBubble(n.pointerout,Object.assign({},f),u),a._fireAndBubble(n.pointerleave,Object.assign({},f),u)),u){if(s[u._id])return;s[u._id]=!0}u&&u.isListening()?(o=!0,h&&(u._fireAndBubble(n.pointerover,Object.assign({},f),a),u._fireAndBubble(n.pointerenter,Object.assign({},f),a),this[r+"targetShape"]=u),u._fireAndBubble(n.pointermove,Object.assign({},f))):a&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:c}),this[r+"targetShape"]=null)}),o||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=oh(e.type),r=og(e.type);if(!n)return;this.setPointersPositions(e);const i=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var o={};let a=!1;this._changedPointerPositions.forEach(l=>{const u=xS(l.id)||this.getIntersection(l);if(u){if(u.releaseCapture(l.id),o[u._id])return;o[u._id]=!0}const c=l.id,f={evt:e,pointerId:c};let h=!1;ot["_"+r+"InDblClickWindow"]?(h=!0,clearTimeout(this[r+"DblTimeout"])):tn.justDragged||(ot["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){ot["_"+r+"InDblClickWindow"]=!1},ot.dblClickWindow),u&&u.isListening()?(a=!0,this[r+"ClickEndShape"]=u,u._fireAndBubble(n.pointerup,Object.assign({},f)),ot["_"+r+"ListenClick"]&&i&&i===u&&(u._fireAndBubble(n.pointerclick,Object.assign({},f)),h&&s&&s===u&&u._fireAndBubble(n.pointerdblclick,Object.assign({},f)))):(this[r+"ClickEndShape"]=null,ot["_"+r+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:c}),h&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:c}))}),a||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),ot["_"+r+"ListenClick"]=!1,e.cancelable&&r!=="touch"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(xE,{evt:e}):this._fire(xE,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(SE,{evt:e}):this._fire(SE,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=xS(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Dh,T2(e)),Dg(e.pointerId)}_lostpointercapture(e){Dg(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),r=null,i=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})})):(r=(e.clientX-n.left)/n.scaleX,i=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:xe._getFirstPointerId(e)}],this._changedPointerPositions=[{x:r,y:i,id:xe._getFirstPointerId(e)}])}_setPointerPosition(e){xe.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Zh({width:this.width(),height:this.height()}),this.bufferHitCanvas=new D2({pixelRatio:1,width:this.width(),height:this.height()}),!!ot.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return xe.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}ew.prototype.nodeType=Fle;er(ew);me.addGetterSetter(ew,"container");var $V="hasShadow",XV="shadowRGBA",YV="patternImage",jV="linearGradient",qV="radialGradient";let oy;function AS(){return oy||(oy=xe.createCanvasElement().getContext("2d"),oy)}const Tg={};function Vle(t){t.fill()}function zle(t){t.stroke()}function Gle(t){t.fill()}function Ule(t){t.stroke()}function Hle(){this._clearCache($V)}function Wle(){this._clearCache(XV)}function $le(){this._clearCache(YV)}function Xle(){this._clearCache(jV)}function Yle(){this._clearCache(qV)}class Ge extends We{constructor(e){super(e);let n;for(;n=xe.getRandomColor(),!(n&&!(n in Tg)););this.colorKey=n,Tg[n]=this}getContext(){return xe.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return xe.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache($V,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(YV,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=AS();const n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const r=new As;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(ot.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=r.getMatrix(),s=typeof DOMMatrix>"u"?{a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]}:new DOMMatrix(i);n.setTransform(s)}return n}}_getLinearGradient(){return this._getCache(jV,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=AS(),r=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),s=n.createLinearGradient(r.x,r.y,i.x,i.y),o=0;o<e.length;o+=2)s.addColorStop(e[o],e[o+1]);return s}}_getRadialGradient(){return this._getCache(qV,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=AS(),r=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),s=n.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),o=0;o<e.length;o+=2)s.addColorStop(e[o],e[o+1]);return s}}getShadowRGBA(){return this._getCache(XV,this._getShadowRGBA)}_getShadowRGBA(){if(!!this.hasShadow()){var e=xe.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage(),r=n.bufferHitCanvas,i;return r.getContext().clear(),this.drawHit(r,null,!0),i=r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,i[3]>0}destroy(){return We.prototype.destroy.call(this),delete Tg[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const i=e||this.hasFill(),s=this.hasStroke(),o=this.getAbsoluteOpacity()!==1;if(i&&s&&o)return!0;const a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(i&&s&&a&&l)}setStrokeHitEnabled(e){xe.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const n=e.skipTransform,r=e.relativeTo,i=this.getSelfRect(),o=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,a=i.width+o,l=i.height+o,u=!e.skipShadow&&this.hasShadow(),c=u?this.shadowOffsetX():0,f=u?this.shadowOffsetY():0,h=a+Math.abs(c),d=l+Math.abs(f),p=u&&this.shadowBlur()||0,g=h+p*2,x=d+p*2,_={width:g,height:x,x:-(o/2+p)+Math.min(c,0)+i.x,y:-(o/2+p)+Math.min(f,0)+i.y};return n?_:this._transformedRect(_,r)}drawScene(e,n){var r=this.getLayer(),i=e||r.getCanvas(),s=i.getContext(),o=this._getCanvasCache(),a=this.getSceneFunc(),l=this.hasShadow(),u,c,f,h=i.isCache,d=n===this;if(!this.isVisible()&&!d)return this;if(o){s.save();var p=this.getAbsoluteTransform(n).getMatrix();return s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!a)return this;if(s.save(),this._useBufferCanvas()&&!h){u=this.getStage(),c=u.bufferCanvas,f=c.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var g=this.getAbsoluteTransform(n).getMatrix();f.transform(g[0],g[1],g[2],g[3],g[4],g[5]),a.call(this,f,this),f.restore();var x=c.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(c._canvas,0,0,c.width/x,c.height/x)}else{if(s._applyLineJoin(this),!d){var g=this.getAbsoluteTransform(n).getMatrix();s.transform(g[0],g[1],g[2],g[3],g[4],g[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),a.call(this,s,this)}return s.restore(),this}drawHit(e,n,r=!1){if(!this.shouldDrawHit(n,r))return this;var i=this.getLayer(),s=e||i.hitCanvas,o=s&&s.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),u=l&&l.hit;if(this.colorKey||xe.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),u){o.save();var c=this.getAbsoluteTransform(n).getMatrix();return o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),!(this===n)){var h=this.getAbsoluteTransform(n).getMatrix();o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return a.call(this,o,this),o.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),r=this._getCachedSceneCanvas(),i=n.hit,s=i.getContext(),o=i.getWidth(),a=i.getHeight(),l,u,c,f,h,d;s.clear(),s.drawImage(r._canvas,0,0,o,a);try{for(l=s.getImageData(0,0,o,a),u=l.data,c=u.length,f=xe._hexToRgb(this.colorKey),h=0;h<c;h+=4)d=u[h+3],d>e?(u[h]=f.r,u[h+1]=f.g,u[h+2]=f.b,u[h+3]=255):u[h+3]=0;s.putImageData(l,0,0)}catch(p){xe.error("Unable to draw hit graph from cached scene canvas. "+p.message)}return this}hasPointerCapture(e){return IV(e,this)}setPointerCapture(e){kV(e,this)}releaseCapture(e){Dg(e)}}Ge.prototype._fillFunc=Vle;Ge.prototype._strokeFunc=zle;Ge.prototype._fillFuncHit=Gle;Ge.prototype._strokeFuncHit=Ule;Ge.prototype._centroid=!1;Ge.prototype.nodeType="Shape";er(Ge);Ge.prototype.eventListeners={};Ge.prototype.on.call(Ge.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Hle);Ge.prototype.on.call(Ge.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",Wle);Ge.prototype.on.call(Ge.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",$le);Ge.prototype.on.call(Ge.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",Xle);Ge.prototype.on.call(Ge.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Yle);me.addGetterSetter(Ge,"stroke",void 0,LV());me.addGetterSetter(Ge,"strokeWidth",2,$e());me.addGetterSetter(Ge,"fillAfterStrokeEnabled",!1);me.addGetterSetter(Ge,"hitStrokeWidth","auto",M2());me.addGetterSetter(Ge,"strokeHitEnabled",!0,Uo());me.addGetterSetter(Ge,"perfectDrawEnabled",!0,Uo());me.addGetterSetter(Ge,"shadowForStrokeEnabled",!0,Uo());me.addGetterSetter(Ge,"lineJoin");me.addGetterSetter(Ge,"lineCap");me.addGetterSetter(Ge,"sceneFunc");me.addGetterSetter(Ge,"hitFunc");me.addGetterSetter(Ge,"dash");me.addGetterSetter(Ge,"dashOffset",0,$e());me.addGetterSetter(Ge,"shadowColor",void 0,Gd());me.addGetterSetter(Ge,"shadowBlur",0,$e());me.addGetterSetter(Ge,"shadowOpacity",1,$e());me.addComponentsGetterSetter(Ge,"shadowOffset",["x","y"]);me.addGetterSetter(Ge,"shadowOffsetX",0,$e());me.addGetterSetter(Ge,"shadowOffsetY",0,$e());me.addGetterSetter(Ge,"fillPatternImage");me.addGetterSetter(Ge,"fill",void 0,LV());me.addGetterSetter(Ge,"fillPatternX",0,$e());me.addGetterSetter(Ge,"fillPatternY",0,$e());me.addGetterSetter(Ge,"fillLinearGradientColorStops");me.addGetterSetter(Ge,"strokeLinearGradientColorStops");me.addGetterSetter(Ge,"fillRadialGradientStartRadius",0);me.addGetterSetter(Ge,"fillRadialGradientEndRadius",0);me.addGetterSetter(Ge,"fillRadialGradientColorStops");me.addGetterSetter(Ge,"fillPatternRepeat","repeat");me.addGetterSetter(Ge,"fillEnabled",!0);me.addGetterSetter(Ge,"strokeEnabled",!0);me.addGetterSetter(Ge,"shadowEnabled",!0);me.addGetterSetter(Ge,"dashEnabled",!0);me.addGetterSetter(Ge,"strokeScaleEnabled",!0);me.addGetterSetter(Ge,"fillPriority","color");me.addComponentsGetterSetter(Ge,"fillPatternOffset",["x","y"]);me.addGetterSetter(Ge,"fillPatternOffsetX",0,$e());me.addGetterSetter(Ge,"fillPatternOffsetY",0,$e());me.addComponentsGetterSetter(Ge,"fillPatternScale",["x","y"]);me.addGetterSetter(Ge,"fillPatternScaleX",1,$e());me.addGetterSetter(Ge,"fillPatternScaleY",1,$e());me.addComponentsGetterSetter(Ge,"fillLinearGradientStartPoint",["x","y"]);me.addComponentsGetterSetter(Ge,"strokeLinearGradientStartPoint",["x","y"]);me.addGetterSetter(Ge,"fillLinearGradientStartPointX",0);me.addGetterSetter(Ge,"strokeLinearGradientStartPointX",0);me.addGetterSetter(Ge,"fillLinearGradientStartPointY",0);me.addGetterSetter(Ge,"strokeLinearGradientStartPointY",0);me.addComponentsGetterSetter(Ge,"fillLinearGradientEndPoint",["x","y"]);me.addComponentsGetterSetter(Ge,"strokeLinearGradientEndPoint",["x","y"]);me.addGetterSetter(Ge,"fillLinearGradientEndPointX",0);me.addGetterSetter(Ge,"strokeLinearGradientEndPointX",0);me.addGetterSetter(Ge,"fillLinearGradientEndPointY",0);me.addGetterSetter(Ge,"strokeLinearGradientEndPointY",0);me.addComponentsGetterSetter(Ge,"fillRadialGradientStartPoint",["x","y"]);me.addGetterSetter(Ge,"fillRadialGradientStartPointX",0);me.addGetterSetter(Ge,"fillRadialGradientStartPointY",0);me.addComponentsGetterSetter(Ge,"fillRadialGradientEndPoint",["x","y"]);me.addGetterSetter(Ge,"fillRadialGradientEndPointX",0);me.addGetterSetter(Ge,"fillRadialGradientEndPointY",0);me.addGetterSetter(Ge,"fillPatternRotation",0);me.backCompat(Ge,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var jle="#",qle="beforeDraw",Jle="draw",JV=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Kle=JV.length;class df extends Ts{constructor(e){super(e),this.canvas=new Zh,this.hitCanvas=new D2({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){We.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=We.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(We.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(We.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return We.prototype.remove.call(this),e&&e.parentNode&&xe._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&xe.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),We.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){xe.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){xe.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,xe.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(let i=0;i<Kle;i++){const s=JV[i],o=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){const s=xe._rgbToHex(r[0],r[1],r[2]),o=Tg[jle+s];return o?{shape:o}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(qle,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Ts.prototype.drawScene.call(this,i,n),this._fire(Jle,{node:this}),this}drawHit(e,n){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Ts.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){xe.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return xe.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}destroy(){return xe.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}df.prototype.nodeType="Layer";er(df);me.addGetterSetter(df,"imageSmoothingEnabled",!0);me.addGetterSetter(df,"clearBeforeDraw",!0);me.addGetterSetter(df,"hitGraphEnabled",!0,Uo());class P2 extends df{constructor(e){super(e),this.listening(!1),xe.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}P2.prototype.nodeType="FastLayer";er(P2);class yd extends Ts{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&xe.throw("You may only add groups and shapes to groups.")}}yd.prototype.nodeType="Group";er(yd);var ES=function(){return Kh.performance&&Kh.performance.now?function(){return Kh.performance.now()}:function(){return new Date().getTime()}}();class Us{constructor(e,n){this.id=Us.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:ES(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){var n=[];return e?e.length>0?n=e:n=[e]:n=[],this.layers=n,this}getLayers(){return this.layers}addLayer(e){var n=this.layers,r=n.length,i;for(i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=Us,n=e.animations,r=n.length,i;for(i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=ES(),Us._addAnimation(this),this}stop(){return Us._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var n=e.id,r=this.animations,i=r.length,s;for(s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){var e={},n=this.animations,r,i,s,o,a,l,u,c,f;for(o=0;o<n.length;o++)if(r=n[o],i=r.layers,s=r.func,r._updateFrameObject(ES()),l=i.length,s?f=s.call(r,r.frame)!==!1:f=!0,!!f)for(a=0;a<l;a++)u=i[a],u._id!==void 0&&(e[u._id]=u);for(c in e)!e.hasOwnProperty(c)||e[c].batchDraw()}static _animationLoop(){var e=Us;e.animations.length?(e._runFrames(),xe.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,xe.requestAnimFrame(this._animationLoop))}}Us.animations=[];Us.animIdCounter=0;Us.animRunning=!1;var Zle={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Qle=1,r3=2,i3=3,eue=0,s3=["fill","stroke","shadowColor"];class tue{constructor(e,n,r,i,s,o,a){this.prop=e,this.propFunc=n,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=r3,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=i3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===r3?this.setTime(e):this.state===i3&&this.setTime(this.duration-e)}pause(){this.state=Qle,this.fire("onPause")}getTimer(){return new Date().getTime()}}class hr{constructor(e){var n=this,r=e.node,i=r._id,s,o=e.easing||Pg.Linear,a=!!e.yoyo,l;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=r,this._id=eue++;var u=r.getLayer()||(r instanceof ot.Stage?r.getLayers():null);u||xe.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Us(function(){n.tween.onEnterFrame()},u),this.tween=new tue(l,function(c){n._tweenFunc(c)},o,0,1,s*1e3,a),this._addListeners(),hr.attrs[i]||(hr.attrs[i]={}),hr.attrs[i][this._id]||(hr.attrs[i][this._id]={}),hr.tweens[i]||(hr.tweens[i]={});for(l in e)Zle[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var r=this.node,i=r._id,s,o,a,l,u,c,f,h;if(a=hr.tweens[i][e],a&&delete hr.attrs[i][a][e],s=r.getAttr(e),xe._isArray(n))if(o=[],u=Math.max(n.length,s.length),e==="points"&&n.length!==s.length&&(n.length>s.length?(f=s,s=xe._prepareArrayForTween(s,n,r.closed())):(c=n,n=xe._prepareArrayForTween(n,s,r.closed()))),e.indexOf("fill")===0)for(l=0;l<u;l++)if(l%2===0)o.push(n[l]-s[l]);else{var d=xe.colorToRGBA(s[l]);h=xe.colorToRGBA(n[l]),s[l]=d,o.push({r:h.r-d.r,g:h.g-d.g,b:h.b-d.b,a:h.a-d.a})}else for(l=0;l<u;l++)o.push(n[l]-s[l]);else s3.indexOf(e)!==-1?(s=xe.colorToRGBA(s),h=xe.colorToRGBA(n),o={r:h.r-s.r,g:h.g-s.g,b:h.b-s.b,a:h.a-s.a}):o=n-s;hr.attrs[i][this._id][e]={start:s,diff:o,end:n,trueEnd:c,trueStart:f},hr.tweens[i][e]=this._id}_tweenFunc(e){var n=this.node,r=hr.attrs[n._id][this._id],i,s,o,a,l,u,c,f;for(i in r){if(s=r[i],o=s.start,a=s.diff,f=s.end,xe._isArray(o))if(l=[],c=Math.max(o.length,f.length),i.indexOf("fill")===0)for(u=0;u<c;u++)u%2===0?l.push((o[u]||0)+a[u]*e):l.push("rgba("+Math.round(o[u].r+a[u].r*e)+","+Math.round(o[u].g+a[u].g*e)+","+Math.round(o[u].b+a[u].b*e)+","+(o[u].a+a[u].a*e)+")");else for(u=0;u<c;u++)l.push((o[u]||0)+a[u]*e);else s3.indexOf(i)!==-1?l="rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":l=o+a*e;n.setAttr(i,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=hr.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=hr.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,r=hr.tweens[e],i;this.pause();for(i in r)delete hr.tweens[e][i];delete hr.attrs[e][n]}}hr.attrs={};hr.tweens={};We.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var n=new hr(t);n.play()};const Pg={BackEaseIn(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},ElasticEaseIn(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r)===1?e+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r)===1?e+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/s)+n+e)},ElasticEaseInOut(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r/2)===2?e+n:(s||(s=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*.5+n+e)},BounceEaseOut(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,n,r){return n-Pg.BounceEaseOut(r-t,0,n,r)+e},BounceEaseInOut(t,e,n,r){return t<r/2?Pg.BounceEaseIn(t*2,0,n,r)*.5+e:Pg.BounceEaseOut(t*2-r,0,n,r)*.5+n*.5+e},EaseIn(t,e,n,r){return n*(t/=r)*t+e},EaseOut(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,n,r){return n*t/r+e}},o3=xe._assign(ot,{Util:xe,Transform:As,Node:We,Container:Ts,Stage:ew,stages:Xy,Layer:df,FastLayer:P2,Group:yd,DD:tn,Shape:Ge,shapes:Tg,Animation:Us,Tween:hr,Easings:Pg,Context:Z_,Canvas:Q_});class Sl extends Ge{_sceneFunc(e){var n=ot.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),r=this.clockwise(),i=ot.getAngle(r?360-this.angle():this.angle()),s=Math.cos(Math.min(i,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,i),3*Math.PI/2)),l=Math.sin(Math.min(i,Math.PI/2)),u=s*(s>0?e:n),c=o*n,f=a*(a>0?e:n),h=l*(l>0?n:e);return{x:u,y:r?-1*h:f,width:c-u,height:h-f}}}Sl.prototype._centroid=!0;Sl.prototype.className="Arc";Sl.prototype._attrsAffectingSize=["innerRadius","outerRadius"];er(Sl);me.addGetterSetter(Sl,"innerRadius",0,$e());me.addGetterSetter(Sl,"outerRadius",0,$e());me.addGetterSetter(Sl,"angle",0,$e());me.addGetterSetter(Sl,"clockwise",!1,Uo());function AE(t,e,n,r,i,s,o){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),u=o*a/(a+l),c=o*l/(a+l),f=n-u*(i-t),h=r-u*(s-e),d=n+c*(i-t),p=r+c*(s-e);return[f,h,d,p]}function a3(t,e){var n=t.length,r=[],i,s;for(i=2;i<n-2;i+=2)s=AE(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(t[i]),r.push(t[i+1]),r.push(s[2]),r.push(s[3]));return r}class Al extends Ge{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,i=this.tension(),s=this.closed(),o=this.bezier(),a,l,u;if(!!r){if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){for(a=this.getTensionPoints(),l=a.length,u=s?0:4,s||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);u<l-2;)e.bezierCurveTo(a[u++],a[u++],a[u++],a[u++],a[u++],a[u++]);s||e.quadraticCurveTo(a[l-2],a[l-1],n[r-2],n[r-1])}else if(o)for(u=2;u<r;)e.bezierCurveTo(n[u++],n[u++],n[u++],n[u++],n[u++],n[u++]);else for(u=2;u<r;u+=2)e.lineTo(n[u],n[u+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():a3(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),i=AE(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),s=AE(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=a3(e,r),a=[i[2],i[3]].concat(o).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],i[0],i[1],e[0],e[1]]);return a}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],i=e[1],s=e[1],o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);return{x:n,y:i,width:r-n,height:s-i}}}Al.prototype.className="Line";Al.prototype._attrsAffectingSize=["points","bezier","tension"];er(Al);me.addGetterSetter(Al,"closed",!1);me.addGetterSetter(Al,"bezier",!1);me.addGetterSetter(Al,"tension",0,$e());me.addGetterSetter(Al,"points",[],fle());class yn extends Ge{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=yn.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=yn.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,i=0;i<n.length;i++){var s=n[i].command,o=n[i].points;switch(s){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],l=o[1],u=o[2],c=o[3],f=o[4],h=o[5],d=o[6],p=o[7],g=u>c?u:c,x=u>c?1:u/c,_=u>c?c/u:1;e.translate(a,l),e.rotate(d),e.scale(x,_),e.arc(0,0,g,f,f+h,1-p),e.scale(1/x,1/_),e.rotate(-d),e.translate(-a,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(u){if(u.command==="A"){var c=u.points[4],f=u.points[5],h=u.points[4]+f,d=Math.PI/180;if(Math.abs(c-h)<d&&(d=Math.abs(c-h)),f<0)for(let p=c-d;p>h;p-=d){const g=yn.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],p,0);e.push(g.x,g.y)}else for(let p=c+d;p<h;p+=d){const g=yn.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],p,0);e.push(g.x,g.y)}}else if(u.command==="C")for(let p=0;p<=1;p+=.01){const g=yn.getPointOnCubicBezier(p,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);e.push(g.x,g.y)}else e=e.concat(u.points)});for(var n=e[0],r=e[0],i=e[1],s=e[1],o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(a)||(i=Math.min(i,a),s=Math.max(s,a));return{x:n,y:i,width:r-n,height:s-i}}getLength(){return this.pathLength}getPointAtLength(e){var n,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&e>this.dataArray[r].pathLength;)e-=this.dataArray[r].pathLength,++r;if(r===i)return n=this.dataArray[r-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=this.dataArray[r].points.slice(0,2),{x:n[0],y:n[1]};var s=this.dataArray[r],o=s.points;switch(s.command){case"L":return yn.getPointOnLine(e,s.start.x,s.start.y,o[0],o[1]);case"C":return yn.getPointOnCubicBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return yn.getPointOnQuadraticBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3]);case"A":var a=o[0],l=o[1],u=o[2],c=o[3],f=o[4],h=o[5],d=o[6];return f+=h*e/s.pathLength,yn.getPointOnEllipticalArc(a,l,u,c,f,d)}return null}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPointOnLine(e,n,r,i,s,o,a){o===void 0&&(o=n),a===void 0&&(a=r);var l=(s-r)/(i-n+1e-8),u=Math.sqrt(e*e/(1+l*l));i<n&&(u*=-1);var c=l*u,f;if(i===n)f={x:o,y:a+c};else if((a-r)/(o-n+1e-8)===l)f={x:o+u,y:a+c};else{var h,d,p=this.getLineLength(n,r,i,s),g=(o-n)*(i-n)+(a-r)*(s-r);g=g/(p*p),h=n+g*(i-n),d=r+g*(s-r);var x=this.getLineLength(o,a,h,d),_=Math.sqrt(e*e-x*x);u=Math.sqrt(_*_/(1+l*l)),i<n&&(u*=-1),c=l*u,f={x:h+u,y:d+c}}return f}static getPointOnCubicBezier(e,n,r,i,s,o,a,l,u){function c(x){return x*x*x}function f(x){return 3*x*x*(1-x)}function h(x){return 3*x*(1-x)*(1-x)}function d(x){return(1-x)*(1-x)*(1-x)}var p=l*c(e)+o*f(e)+i*h(e)+n*d(e),g=u*c(e)+a*f(e)+s*h(e)+r*d(e);return{x:p,y:g}}static getPointOnQuadraticBezier(e,n,r,i,s,o,a){function l(d){return d*d}function u(d){return 2*d*(1-d)}function c(d){return(1-d)*(1-d)}var f=o*l(e)+i*u(e)+n*c(e),h=a*l(e)+s*u(e)+r*c(e);return{x:f,y:h}}static getPointOnEllipticalArc(e,n,r,i,s,o){var a=Math.cos(o),l=Math.sin(o),u={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(u.x*a-u.y*l),y:n+(u.x*l+u.y*a)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);var s=n.split("|"),o=[],a=[],l=0,u=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(i=1;i<s.length;i++){var h=s[i],d=h.charAt(0);for(h=h.slice(1),a.length=0;f=c.exec(h);)a.push(f[0]);for(var p=[],g=0,x=a.length;g<x;g++){if(a[g]==="00"){p.push(0,0);continue}var _=parseFloat(a[g]);isNaN(_)?p.push(0):p.push(_)}for(;p.length>0&&!isNaN(p[0]);){var m=null,v=[],b=l,w=u,A,E,S,C,M,D,T,L,F,k;switch(d){case"l":l+=p.shift(),u+=p.shift(),m="L",v.push(l,u);break;case"L":l=p.shift(),u=p.shift(),v.push(l,u);break;case"m":var I=p.shift(),O=p.shift();if(l+=I,u+=O,m="M",o.length>2&&o[o.length-1].command==="z"){for(var $=o.length-2;$>=0;$--)if(o[$].command==="M"){l=o[$].points[0]+I,u=o[$].points[1]+O;break}}v.push(l,u),d="l";break;case"M":l=p.shift(),u=p.shift(),m="M",v.push(l,u),d="L";break;case"h":l+=p.shift(),m="L",v.push(l,u);break;case"H":l=p.shift(),m="L",v.push(l,u);break;case"v":u+=p.shift(),m="L",v.push(l,u);break;case"V":u=p.shift(),m="L",v.push(l,u);break;case"C":v.push(p.shift(),p.shift(),p.shift(),p.shift()),l=p.shift(),u=p.shift(),v.push(l,u);break;case"c":v.push(l+p.shift(),u+p.shift(),l+p.shift(),u+p.shift()),l+=p.shift(),u+=p.shift(),m="C",v.push(l,u);break;case"S":E=l,S=u,A=o[o.length-1],A.command==="C"&&(E=l+(l-A.points[2]),S=u+(u-A.points[3])),v.push(E,S,p.shift(),p.shift()),l=p.shift(),u=p.shift(),m="C",v.push(l,u);break;case"s":E=l,S=u,A=o[o.length-1],A.command==="C"&&(E=l+(l-A.points[2]),S=u+(u-A.points[3])),v.push(E,S,l+p.shift(),u+p.shift()),l+=p.shift(),u+=p.shift(),m="C",v.push(l,u);break;case"Q":v.push(p.shift(),p.shift()),l=p.shift(),u=p.shift(),v.push(l,u);break;case"q":v.push(l+p.shift(),u+p.shift()),l+=p.shift(),u+=p.shift(),m="Q",v.push(l,u);break;case"T":E=l,S=u,A=o[o.length-1],A.command==="Q"&&(E=l+(l-A.points[0]),S=u+(u-A.points[1])),l=p.shift(),u=p.shift(),m="Q",v.push(E,S,l,u);break;case"t":E=l,S=u,A=o[o.length-1],A.command==="Q"&&(E=l+(l-A.points[0]),S=u+(u-A.points[1])),l+=p.shift(),u+=p.shift(),m="Q",v.push(E,S,l,u);break;case"A":C=p.shift(),M=p.shift(),D=p.shift(),T=p.shift(),L=p.shift(),F=l,k=u,l=p.shift(),u=p.shift(),m="A",v=this.convertEndpointToCenterParameterization(F,k,l,u,T,L,C,M,D);break;case"a":C=p.shift(),M=p.shift(),D=p.shift(),T=p.shift(),L=p.shift(),F=l,k=u,l+=p.shift(),u+=p.shift(),m="A",v=this.convertEndpointToCenterParameterization(F,k,l,u,T,L,C,M,D);break}o.push({command:m||d,points:v,start:{x:b,y:w},pathLength:this.calcLength(b,w,m||d,v)})}(d==="z"||d==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,i){var s,o,a,l,u=yn;switch(r){case"L":return u.getLineLength(e,n,i[0],i[1]);case"C":for(s=0,o=u.getPointOnCubicBezier(0,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)a=u.getPointOnCubicBezier(l,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),s+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"Q":for(s=0,o=u.getPointOnQuadraticBezier(0,e,n,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)a=u.getPointOnQuadraticBezier(l,e,n,i[0],i[1],i[2],i[3]),s+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"A":s=0;var c=i[4],f=i[5],h=i[4]+f,d=Math.PI/180;if(Math.abs(c-h)<d&&(d=Math.abs(c-h)),o=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),f<0)for(l=c-d;l>h;l-=d)a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=c+d;l<h;l+=d)a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=u.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=u.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),s+=u.getLineLength(o.x,o.y,a.x,a.y),s}return 0}static convertEndpointToCenterParameterization(e,n,r,i,s,o,a,l,u){var c=u*(Math.PI/180),f=Math.cos(c)*(e-r)/2+Math.sin(c)*(n-i)/2,h=-1*Math.sin(c)*(e-r)/2+Math.cos(c)*(n-i)/2,d=f*f/(a*a)+h*h/(l*l);d>1&&(a*=Math.sqrt(d),l*=Math.sqrt(d));var p=Math.sqrt((a*a*(l*l)-a*a*(h*h)-l*l*(f*f))/(a*a*(h*h)+l*l*(f*f)));s===o&&(p*=-1),isNaN(p)&&(p=0);var g=p*a*h/l,x=p*-l*f/a,_=(e+r)/2+Math.cos(c)*g-Math.sin(c)*x,m=(n+i)/2+Math.sin(c)*g+Math.cos(c)*x,v=function(M){return Math.sqrt(M[0]*M[0]+M[1]*M[1])},b=function(M,D){return(M[0]*D[0]+M[1]*D[1])/(v(M)*v(D))},w=function(M,D){return(M[0]*D[1]<M[1]*D[0]?-1:1)*Math.acos(b(M,D))},A=w([1,0],[(f-g)/a,(h-x)/l]),E=[(f-g)/a,(h-x)/l],S=[(-1*f-g)/a,(-1*h-x)/l],C=w(E,S);return b(E,S)<=-1&&(C=Math.PI),b(E,S)>=1&&(C=0),o===0&&C>0&&(C=C-2*Math.PI),o===1&&C<0&&(C=C+2*Math.PI),[_,m,a,l,A,C,c,o]}}yn.prototype.className="Path";yn.prototype._attrsAffectingSize=["data"];er(yn);me.addGetterSetter(yn,"data");class pf extends Al{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),i=r,s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());var o=this.pointerLength(),a=r.length,l,u;if(s){const h=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[a-2],r[a-1]],d=yn.calcLength(i[i.length-4],i[i.length-3],"C",h),p=yn.getPointOnQuadraticBezier(Math.min(1,1-o/d),h[0],h[1],h[2],h[3],h[4],h[5]);l=r[a-2]-p.x,u=r[a-1]-p.y}else l=r[a-2]-r[a-4],u=r[a-1]-r[a-3];var c=(Math.atan2(u,l)+n)%n,f=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(c),e.moveTo(0,0),e.lineTo(-o,f/2),e.lineTo(-o,-f/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(r[0],r[1]),s?(l=(i[0]+i[2])/2-r[0],u=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],u=r[3]-r[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,f/2),e.lineTo(-o,-f/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}pf.prototype.className="Arrow";er(pf);me.addGetterSetter(pf,"pointerLength",10,$e());me.addGetterSetter(pf,"pointerWidth",10,$e());me.addGetterSetter(pf,"pointerAtBeginning",!1);me.addGetterSetter(pf,"pointerAtEnding",!0);class Ud extends Ge{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Ud.prototype._centroid=!0;Ud.prototype.className="Circle";Ud.prototype._attrsAffectingSize=["radius"];er(Ud);me.addGetterSetter(Ud,"radius",0,$e());class tc extends Ge{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}tc.prototype.className="Ellipse";tc.prototype._centroid=!0;tc.prototype._attrsAffectingSize=["radiusX","radiusY"];er(tc);me.addComponentsGetterSetter(tc,"radius",["x","y"]);me.addGetterSetter(tc,"radiusX",0,$e());me.addGetterSetter(tc,"radiusY",0,$e());class so extends Ge{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),i=this.cornerRadius(),s=this.attrs.image;let o;if(s){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[s,this.cropX(),this.cropY(),a,l,0,0,n,r]:o=[s,0,0,n,r]}(this.hasFill()||this.hasStroke()||i)&&(e.beginPath(),i?xe.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),s&&(i&&e.clip(),e.drawImage.apply(e,o))}_hitFunc(e){var n=this.width(),r=this.height(),i=this.cornerRadius();e.beginPath(),i?xe.drawRoundedRectPath(e,n,r,i):e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,r=null){var i=xe.createImageElement();i.onload=function(){var s=new so({image:i});n(s)},i.onerror=r,i.crossOrigin="Anonymous",i.src=e}}so.prototype.className="Image";er(so);me.addGetterSetter(so,"cornerRadius",0,C2(4));me.addGetterSetter(so,"image");me.addComponentsGetterSetter(so,"crop",["x","y","width","height"]);me.addGetterSetter(so,"cropX",0,$e());me.addGetterSetter(so,"cropY",0,$e());me.addGetterSetter(so,"cropWidth",0,$e());me.addGetterSetter(so,"cropHeight",0,$e());var KV=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],nue="Change.konva",rue="none",EE="up",CE="right",ME="down",DE="left",iue=KV.length;class L2 extends yd{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,i=function(){n._sync()};for(r=0;r<iue;r++)e.on(KV[r]+nue,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,i,s,o,a,l,u;if(e&&n){switch(r=e.width(),i=e.height(),s=n.pointerDirection(),o=n.pointerWidth(),u=n.pointerHeight(),a=0,l=0,s){case EE:a=r/2,l=-1*u;break;case CE:a=r+o,l=i/2;break;case ME:a=r/2,l=i+u;break;case DE:a=-1*o,l=i/2;break}n.setAttrs({x:-1*a,y:-1*l,width:r,height:i}),e.setAttrs({x:-1*a,y:-1*l})}}}L2.prototype.className="Label";er(L2);class gf extends Ge{_sceneFunc(e){var n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,u=0,c=0,f=0;typeof a=="number"?l=u=c=f=Math.min(a,n/2,r/2):(l=Math.min(a[0]||0,n/2,r/2),u=Math.min(a[1]||0,n/2,r/2),f=Math.min(a[2]||0,n/2,r/2),c=Math.min(a[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),i===EE&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+s)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),i===CE&&(e.lineTo(n,(r-o)/2),e.lineTo(n+s,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-f),e.arc(n-f,r-f,f,0,Math.PI/2,!1),i===ME&&(e.lineTo((n+s)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-s)/2,r)),e.lineTo(c,r),e.arc(c,r-c,c,Math.PI/2,Math.PI,!1),i===DE&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),o=this.width(),a=this.height();return s===EE?(n-=i,a+=i):s===ME?a+=i:s===DE?(e-=r*1.5,o+=r):s===CE&&(o+=r*1.5),{x:e,y:n,width:o,height:a}}}gf.prototype.className="Tag";er(gf);me.addGetterSetter(gf,"pointerDirection",rue);me.addGetterSetter(gf,"pointerWidth",0,$e());me.addGetterSetter(gf,"pointerHeight",0,$e());me.addGetterSetter(gf,"cornerRadius",0,C2(4));class sv extends Ge{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),i=this.height();e.beginPath(),n?xe.drawRoundedRectPath(e,r,i,n):e.rect(0,0,r,i),e.closePath(),e.fillStrokeShape(this)}}sv.prototype.className="Rect";er(sv);me.addGetterSetter(sv,"cornerRadius",0,C2(4));class mf extends Ge{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),i=Math.min(i,o.y),s=Math.max(s,o.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}mf.prototype.className="RegularPolygon";mf.prototype._centroid=!0;mf.prototype._attrsAffectingSize=["radius"];er(mf);me.addGetterSetter(mf,"radius",0,$e());me.addGetterSetter(mf,"sides",0,$e());var l3=Math.PI*2;class vf extends Ge{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,l3,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),l3,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}vf.prototype.className="Ring";vf.prototype._centroid=!0;vf.prototype._attrsAffectingSize=["innerRadius","outerRadius"];er(vf);me.addGetterSetter(vf,"innerRadius",0,$e());me.addGetterSetter(vf,"outerRadius",0,$e());class Oa extends Ge{constructor(e){super(e),this._updated=!0,this.anim=new Us(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],o=this.frameOffsets(),a=s[i+0],l=s[i+1],u=s[i+2],c=s[i+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,c),e.closePath(),e.fillStrokeShape(this)),f)if(o){var h=o[n],d=r*2;e.drawImage(f,a,l,u,c,h[d+0],h[d+1],u,c)}else e.drawImage(f,a,l,u,c,0,0,u,c)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],o=this.frameOffsets(),a=s[i+2],l=s[i+3];if(e.beginPath(),o){var u=o[n],c=r*2;e.rect(u[c+0],u[c+1],a,l)}else e.rect(0,0,a,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}Oa.prototype.className="Sprite";er(Oa);me.addGetterSetter(Oa,"animation");me.addGetterSetter(Oa,"animations");me.addGetterSetter(Oa,"frameOffsets");me.addGetterSetter(Oa,"image");me.addGetterSetter(Oa,"frameIndex",0,$e());me.addGetterSetter(Oa,"frameRate",17,$e());me.backCompat(Oa,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class nc extends Ge{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var s=1;s<i*2;s++){var o=s%2===0?r:n,a=o*Math.sin(s*Math.PI/i),l=-1*o*Math.cos(s*Math.PI/i);e.lineTo(a,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}nc.prototype.className="Star";nc.prototype._centroid=!0;nc.prototype._attrsAffectingSize=["innerRadius","outerRadius"];er(nc);me.addGetterSetter(nc,"numPoints",5,$e());me.addGetterSetter(nc,"innerRadius",0,$e());me.addGetterSetter(nc,"outerRadius",0,$e());function ZV(t){return Array.from(t)}var ah="auto",sue="center",zp="justify",oue="Change.konva",aue="2d",u3="-",QV="left",lue="text",uue="Text",cue="top",fue="bottom",c3="middle",ez="normal",hue="px ",ay=" ",due="right",pue="word",gue="char",f3="none",CS="\u2026",tz=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],mue=tz.length;function vue(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var ly;function MS(){return ly||(ly=xe.createCanvasElement().getContext(aue),ly)}function yue(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _ue(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function wue(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class Qn extends Ge{constructor(e){super(wue(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<mue;n++)this.on(tz[n]+oue,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(!!this.text()){var i=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,a=this.verticalAlign(),l=0,u=this.align(),c=this.getWidth(),f=this.letterSpacing(),h=this.fill(),d=this.textDecoration(),p=d.indexOf("underline")!==-1,g=d.indexOf("line-through")!==-1,x,_=0,_=o/2,m=0,v=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",c3),e.setAttr("textAlign",QV),a===c3?l=(this.getHeight()-r*o-i*2)/2:a===fue&&(l=this.getHeight()-r*o-i*2),e.translate(i,l+i),x=0;x<r;x++){var m=0,v=0,b=n[x],w=b.text,A=b.width,E=b.lastInParagraph,S,C,M;if(e.save(),u===due?m+=c-A-i*2:u===sue&&(m+=(c-A-i*2)/2),p){e.save(),e.beginPath(),e.moveTo(m,_+v+Math.round(s/2)),S=w.split(" ").length-1,C=S===0,M=u===zp&&!E?c-i*2:A,e.lineTo(m+Math.round(M),_+v+Math.round(s/2)),e.lineWidth=s/15;const I=this._getLinearGradient();e.strokeStyle=I||h,e.stroke(),e.restore()}if(g){e.save(),e.beginPath(),e.moveTo(m,_+v),S=w.split(" ").length-1,C=S===0,M=u===zp&&E&&!C?c-i*2:A,e.lineTo(m+Math.round(M),_+v),e.lineWidth=s/15;const I=this._getLinearGradient();e.strokeStyle=I||h,e.stroke(),e.restore()}if(f!==0||u===zp){S=w.split(" ").length-1;for(var D=ZV(w),T=0;T<D.length;T++){var L=D[T];L===" "&&!E&&u===zp&&(m+=(c-i*2-A)/S),this._partialTextX=m,this._partialTextY=_+v,this._partialText=L,e.fillStrokeShape(this),m+=this.measureSize(L).width+f}}else this._partialTextX=m,this._partialTextY=_+v,this._partialText=w,e.fillStrokeShape(this);e.restore(),r>1&&(_+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=xe._isString(e)?e:e==null?"":e+"";return this._setAttr(lue,n),this}getWidth(){var e=this.attrs.width===ah||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===ah||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return xe.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=MS(),r=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(e),n.restore(),{width:i.width,height:r}}_getContextFont(){return this.fontStyle()+ay+this.fontVariant()+ay+(this.fontSize()+hue)+vue(this.fontFamily())}_addTextLine(e){this.align()===zp&&(e=e.trim());var r=this._getTextWidth(e);return this.textArr.push({text:e,width:r,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return MS().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,o=this.attrs.height,a=s!==ah&&s!==void 0,l=o!==ah&&o!==void 0,u=this.padding(),c=s-u*2,f=o-u*2,h=0,d=this.wrap(),p=d!==f3,g=d!==gue&&p,x=this.ellipsis();this.textArr=[],MS().font=this._getContextFont();for(var _=x?this._getTextWidth(CS):0,m=0,v=e.length;m<v;++m){var b=e[m],w=this._getTextWidth(b);if(a&&w>c)for(;b.length>0;){for(var A=0,E=b.length,S="",C=0;A<E;){var M=A+E>>>1,D=b.slice(0,M+1),T=this._getTextWidth(D)+_;T<=c?(A=M+1,S=D,C=T):E=M}if(S){if(g){var L,F=b[S.length],k=F===ay||F===u3;k&&C<=c?L=S.length:L=Math.max(S.lastIndexOf(ay),S.lastIndexOf(u3))+1,L>0&&(A=L,S=S.slice(0,A),C=this._getTextWidth(S))}S=S.trimRight(),this._addTextLine(S),r=Math.max(r,C),h+=i;var I=this._shouldHandleEllipsis(h);if(I){this._tryToAddEllipsisToLastLine();break}if(b=b.slice(A),b=b.trimLeft(),b.length>0&&(w=this._getTextWidth(b),w<=c)){this._addTextLine(b),h+=i,r=Math.max(r,w);break}}else break}else this._addTextLine(b),h+=i,r=Math.max(r,w),this._shouldHandleEllipsis(h)&&m<v-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&h+i>f)break}this.textHeight=n,this.textWidth=r}_shouldHandleEllipsis(e){var n=+this.fontSize(),r=this.lineHeight()*n,i=this.attrs.height,s=i!==ah&&i!==void 0,o=this.padding(),a=i-o*2,l=this.wrap(),u=l!==f3;return!u||s&&e+r>a}_tryToAddEllipsisToLastLine(){var e=this.attrs.width,n=e!==ah&&e!==void 0,r=this.padding(),i=e-r*2,s=this.ellipsis(),o=this.textArr[this.textArr.length-1];if(!(!o||!s)){if(n){var a=this._getTextWidth(o.text+CS)<i;a||(o.text=o.text.slice(0,o.text.length-3))}this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+CS)}}getStrokeScaleEnabled(){return!0}}Qn.prototype._fillFunc=yue;Qn.prototype._strokeFunc=_ue;Qn.prototype.className=uue;Qn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];er(Qn);me.overWriteSetter(Qn,"width",M2());me.overWriteSetter(Qn,"height",M2());me.addGetterSetter(Qn,"fontFamily","Arial");me.addGetterSetter(Qn,"fontSize",12,$e());me.addGetterSetter(Qn,"fontStyle",ez);me.addGetterSetter(Qn,"fontVariant",ez);me.addGetterSetter(Qn,"padding",0,$e());me.addGetterSetter(Qn,"align",QV);me.addGetterSetter(Qn,"verticalAlign",cue);me.addGetterSetter(Qn,"lineHeight",1,$e());me.addGetterSetter(Qn,"wrap",pue);me.addGetterSetter(Qn,"ellipsis",!1,Uo());me.addGetterSetter(Qn,"letterSpacing",0,$e());me.addGetterSetter(Qn,"text","",Gd());me.addGetterSetter(Qn,"textDecoration","");var bue="",nz="normal";function rz(t){t.fillText(this.partialText,0,0)}function iz(t){t.strokeText(this.partialText,0,0)}class Nr extends Ge{constructor(e){super(e),this.dummyCanvas=xe.createCanvasElement(),this.dataArray=[],this.dataArray=yn.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=yn.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<s.length;o++){e.save();var a=s[o].p0;e.translate(a.x,a.y),e.rotate(s[o].rotation),this.partialText=s[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<n.length;i++){var s=n[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return xe.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Qn.prototype.setText.call(this,e)}_getContextFont(){return Qn.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,n=this._getTextSize(this.attrs.text),r=this.letterSpacing(),i=this.align(),s=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var a=0,l=0;l<e.dataArray.length;l++)e.dataArray[l].pathLength>0&&(a+=e.dataArray[l].pathLength);var u=0;i==="center"&&(u=Math.max(0,a/2-o/2)),i==="right"&&(u=Math.max(0,a-o));for(var c=ZV(this.text()),f=this.text().split(" ").length-1,h,d,p,g=-1,x=0,_=function(){x=0;for(var T=e.dataArray,L=g+1;L<T.length;L++){if(T[L].pathLength>0)return g=L,T[L];T[L].command==="M"&&(h={x:T[L].points[0],y:T[L].points[1]})}return{}},m=function(T){var L=e._getTextSize(T).width+r;T===" "&&i==="justify"&&(L+=(a-o)/f);var F=0,k=0;for(d=void 0;Math.abs(L-F)/L>.01&&k<20;){k++;for(var I=F;p===void 0;)p=_(),p&&I+p.pathLength<L&&(I+=p.pathLength,p=void 0);if(Object.keys(p).length===0||h===void 0)return;var O=!1;switch(p.command){case"L":yn.getLineLength(h.x,h.y,p.points[0],p.points[1])>L?d=yn.getPointOnLine(L,h.x,h.y,p.points[0],p.points[1],h.x,h.y):p=void 0;break;case"A":var $=p.points[4],N=p.points[5],W=p.points[4]+N;x===0?x=$+1e-8:L>F?x+=Math.PI/180*N/Math.abs(N):x-=Math.PI/360*N/Math.abs(N),(N<0&&x<W||N>=0&&x>W)&&(x=W,O=!0),d=yn.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],x,p.points[6]);break;case"C":x===0?L>p.pathLength?x=1e-8:x=L/p.pathLength:L>F?x+=(L-F)/p.pathLength/2:x=Math.max(x-(F-L)/p.pathLength/2,0),x>1&&(x=1,O=!0),d=yn.getPointOnCubicBezier(x,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);break;case"Q":x===0?x=L/p.pathLength:L>F?x+=(L-F)/p.pathLength:x-=(F-L)/p.pathLength,x>1&&(x=1,O=!0),d=yn.getPointOnQuadraticBezier(x,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3]);break}d!==void 0&&(F=yn.getLineLength(h.x,h.y,d.x,d.y)),O&&(O=!1,p=void 0)}},v="C",b=e._getTextSize(v).width+r,w=u/b-1,A=0;A<w&&(m(v),!(h===void 0||d===void 0));A++)h=d;for(var E=0;E<c.length&&(m(c[E]),!(h===void 0||d===void 0));E++){var S=yn.getLineLength(h.x,h.y,d.x,d.y),C=0;if(s)try{C=s(c[E-1],c[E])*this.fontSize()}catch{C=0}h.x+=C,d.x+=C,this.textWidth+=C;var M=yn.getPointOnLine(C+S/2,h.x,h.y,d.x,d.y),D=Math.atan2(d.y-h.y,d.x-h.x);this.glyphInfo.push({transposeX:M.x,transposeY:M.y,text:c[E],rotation:D,p0:h,p1:d}),h=d}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(c){e.push(c.p0.x),e.push(c.p0.y),e.push(c.p1.x),e.push(c.p1.y)});for(var n=e[0]||0,r=e[0]||0,i=e[1]||0,s=e[1]||0,o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);var u=this.fontSize();return{x:n-u/2,y:i-u/2,width:r-n+u,height:s-i+u}}destroy(){return xe.releaseCanvas(this.dummyCanvas),super.destroy()}}Nr.prototype._fillFunc=rz;Nr.prototype._strokeFunc=iz;Nr.prototype._fillFuncHit=rz;Nr.prototype._strokeFuncHit=iz;Nr.prototype.className="TextPath";Nr.prototype._attrsAffectingSize=["text","fontSize","data"];er(Nr);me.addGetterSetter(Nr,"data");me.addGetterSetter(Nr,"fontFamily","Arial");me.addGetterSetter(Nr,"fontSize",12,$e());me.addGetterSetter(Nr,"fontStyle",nz);me.addGetterSetter(Nr,"align","left");me.addGetterSetter(Nr,"letterSpacing",0,$e());me.addGetterSetter(Nr,"textBaseline","middle");me.addGetterSetter(Nr,"fontVariant",nz);me.addGetterSetter(Nr,"text",bue);me.addGetterSetter(Nr,"textDecoration",null);me.addGetterSetter(Nr,"kerningFunc",null);var sz="tr-konva",xue=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(t=>t+`.${sz}`).join(" "),h3="nodesRect",Sue=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Aue={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Eue="ontouchstart"in ot._global;function Cue(t,e){if(t==="rotater")return"crosshair";e+=xe.degToRad(Aue[t]||0);var n=(xe.radToDeg(e)%360+360)%360;return xe._inRange(n,315+22.5,360)||xe._inRange(n,0,22.5)?"ns-resize":xe._inRange(n,45-22.5,45+22.5)?"nesw-resize":xe._inRange(n,90-22.5,90+22.5)?"ew-resize":xe._inRange(n,135-22.5,135+22.5)?"nwse-resize":xe._inRange(n,180-22.5,180+22.5)?"ns-resize":xe._inRange(n,225-22.5,225+22.5)?"nesw-resize":xe._inRange(n,270-22.5,270+22.5)?"ew-resize":xe._inRange(n,315-22.5,315+22.5)?"nwse-resize":(xe.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var z1=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],d3=1e8;function Mue(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function oz(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:r,y:i})}function Due(t,e){const n=Mue(t);return oz(t,e,n)}function Tue(t,e,n){let r=e;for(let i=0;i<t.length;i++){const s=ot.getAngle(t[i]),o=Math.abs(s-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=s)}return r}class un extends yd{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(xue,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return xe.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return sz+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(i=>i.isAncestorOf(this)?(xe.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(i=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},o=i._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");i.on(o,s),i.on(Sue.map(a=>a+`.${this._getEventNamespace()}`).join(" "),s),i.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(i)}),this._resetTransformCache();var r=!!this.findOne(".top-left");return r&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,r=>{if(!n)return;const i=e.getAbsolutePosition(),s=i.x-n.x,o=i.y-n.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+s,y:l.y+o}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(h3),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(h3,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=i.x*s.x-e.offsetX()*s.x,l=i.y*s.y-e.offsetY()*s.y;const u=(ot.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:o.x+a*Math.cos(u)+l*Math.sin(-u),y:o.y+l*Math.cos(u)+a*Math.sin(u),width:i.width*s.x,height:i.height*s.y,rotation:u};return oz(c,-ot.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-d3,y:-d3,width:0,height:0,rotation:0};const n=[];this.nodes().map(u=>{const c=u.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],h=u.getAbsoluteTransform();f.forEach(function(d){var p=h.point(d);n.push(p)})});const r=new As;r.rotate(-ot.getAngle(this.rotation()));var i,s,o,a;n.forEach(function(u){var c=r.point(u);i===void 0&&(i=o=c.x,s=a=c.y),i=Math.min(i,c.x),s=Math.min(s,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),r.invert();const l=r.point({x:i,y:s});return{x:l.x,y:l.y,width:o-i,height:a-s,rotation:ot.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),z1.forEach(function(e){this._createAnchor(e)}.bind(this)),this._createAnchor("rotater")}_createAnchor(e){var n=new sv({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Eue?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{var i=ot.getAngle(this.rotation()),s=Cue(e,i);n.getStage().content&&(n.getStage().content.style.cursor=s),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new Ge({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var r=this.getParent(),i=r.padding();n.beginPath(),n.rect(-i,-i,this.width()+i*2,this.height()+i*2),n.moveTo(this.width()/2,-i),r.rotateEnabled()&&n.lineTo(this.width()/2,-r.rotateAnchorOffset()*xe._sign(this.height())-i),n.fillStrokeShape(this)},hitFunc:(n,r)=>{if(!!this.shouldOverdrawWholeArea()){var i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){var n,r,i,s=this.findOne("."+this._movingAnchorName),o=s.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const u=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(u,l,e)),s.setAbsolutePosition(l);const c=s.getAbsolutePosition();if(!(u.x===c.x&&u.y===c.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();n=s.x()-f.width/2,r=-s.y()+f.height/2;let T=Math.atan2(-r,n)+Math.PI/2;f.height<0&&(T-=Math.PI);var h=ot.getAngle(this.rotation());const L=h+T,F=ot.getAngle(this.rotationSnapTolerance()),I=Tue(this.rotationSnaps(),L,F)-f.rotation,O=Due(f,I);this._fitNodesInto(O,e);return}var d=this.keepRatio()||e.shiftKey,m=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(d){var p=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(p.x-s.x(),2)+Math.pow(p.y-s.y(),2));var g=this.findOne(".top-left").x()>p.x?-1:1,x=this.findOne(".top-left").y()>p.y?-1:1;n=i*this.cos*g,r=i*this.sin*x,this.findOne(".top-left").x(p.x-n),this.findOne(".top-left").y(p.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(d){var p=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-p.x,2)+Math.pow(p.y-s.y(),2));var g=this.findOne(".top-right").x()<p.x?-1:1,x=this.findOne(".top-right").y()>p.y?-1:1;n=i*this.cos*g,r=i*this.sin*x,this.findOne(".top-right").x(p.x+n),this.findOne(".top-right").y(p.y-r)}var _=s.position();this.findOne(".top-left").y(_.y),this.findOne(".bottom-right").x(_.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(d){var p=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(p.x-s.x(),2)+Math.pow(s.y()-p.y,2));var g=p.x<s.x()?-1:1,x=s.y()<p.y?-1:1;n=i*this.cos*g,r=i*this.sin*x,s.x(p.x-n),s.y(p.y+r)}_=s.position(),this.findOne(".top-left").x(_.x),this.findOne(".bottom-right").y(_.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(d){var p=m?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-p.x,2)+Math.pow(s.y()-p.y,2));var g=this.findOne(".bottom-right").x()<p.x?-1:1,x=this.findOne(".bottom-right").y()<p.y?-1:1;n=i*this.cos*g,r=i*this.sin*x,this.findOne(".bottom-right").x(p.x+n),this.findOne(".bottom-right").y(p.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var m=this.centeredScaling()||e.altKey;if(m){var v=this.findOne(".top-left"),b=this.findOne(".bottom-right"),w=v.x(),A=v.y(),E=this.getWidth()-b.x(),S=this.getHeight()-b.y();b.move({x:-w,y:-A}),v.move({x:E,y:S})}var C=this.findOne(".top-left").getAbsolutePosition();n=C.x,r=C.y;var M=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),D=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:M,height:D,rotation:ot.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(r=>{r._fire("transformend",{evt:e,target:r})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var r=this._getNodeRect();const i=1;if(xe._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(xe._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const s=this.flipEnabled();var o=new As;if(o.rotate(ot.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=o.point({x:-this.padding()*2,y:0});if(e.x+=f.x,e.y+=f.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,!s){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=o.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=o.point({x:0,y:-this.padding()*2});if(e.x+=f.x,e.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=o.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(r,e);f?e=f:xe.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,l=new As;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/a,r.height/a);const u=new As;u.translate(e.x,e.y),u.rotate(e.rotation),u.scale(e.width/a,e.height/a);const c=u.multiply(l.invert());this._nodes.forEach(f=>{var h;const d=f.getParent().getAbsoluteTransform(),p=f.getTransform().copy();p.translate(f.offsetX(),f.offsetY());const g=new As;g.multiply(d.copy().invert()).multiply(c).multiply(d).multiply(p);const x=g.decompose();f.setAttrs(x),this._fire("transform",{evt:n,target:f}),f._fire("transform",{evt:n,target:f}),(h=f.getLayer())===null||h===void 0||h.batchDraw()}),this.rotation(xe._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(xe._getRotation(n.rotation));var r=n.width,i=n.height,s=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(u=>{u.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+a,visible:o&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+a,visible:o&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-a,visible:o&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-a,visible:o&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*xe._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),yd.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return We.prototype.toObject.call(this)}clone(e){var n=We.prototype.clone.call(this,e);return n}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}function Pue(t){return t instanceof Array||xe.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){z1.indexOf(e)===-1&&xe.warn("Unknown anchor name: "+e+". Available names are: "+z1.join(", "))}),t||[]}un.prototype.className="Transformer";er(un);me.addGetterSetter(un,"enabledAnchors",z1,Pue);me.addGetterSetter(un,"flipEnabled",!0,Uo());me.addGetterSetter(un,"resizeEnabled",!0);me.addGetterSetter(un,"anchorSize",10,$e());me.addGetterSetter(un,"rotateEnabled",!0);me.addGetterSetter(un,"rotationSnaps",[]);me.addGetterSetter(un,"rotateAnchorOffset",50,$e());me.addGetterSetter(un,"rotationSnapTolerance",5,$e());me.addGetterSetter(un,"borderEnabled",!0);me.addGetterSetter(un,"anchorStroke","rgb(0, 161, 255)");me.addGetterSetter(un,"anchorStrokeWidth",1,$e());me.addGetterSetter(un,"anchorFill","white");me.addGetterSetter(un,"anchorCornerRadius",0,$e());me.addGetterSetter(un,"borderStroke","rgb(0, 161, 255)");me.addGetterSetter(un,"borderStrokeWidth",1,$e());me.addGetterSetter(un,"borderDash");me.addGetterSetter(un,"keepRatio",!0);me.addGetterSetter(un,"centeredScaling",!1);me.addGetterSetter(un,"ignoreStroke",!1);me.addGetterSetter(un,"padding",0,$e());me.addGetterSetter(un,"node");me.addGetterSetter(un,"nodes");me.addGetterSetter(un,"boundBoxFunc");me.addGetterSetter(un,"anchorDragBoundFunc");me.addGetterSetter(un,"shouldOverdrawWholeArea",!1);me.addGetterSetter(un,"useSingleNodeRotation",!0);me.backCompat(un,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class El extends Ge{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,ot.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}El.prototype.className="Wedge";El.prototype._centroid=!0;El.prototype._attrsAffectingSize=["radius"];er(El);me.addGetterSetter(El,"radius",0,$e());me.addGetterSetter(El,"angle",0,$e());me.addGetterSetter(El,"clockwise",!1);me.backCompat(El,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function p3(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var Lue=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Fue=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Iue(t,e){var n=t.data,r=t.width,i=t.height,s,o,a,l,u,c,f,h,d,p,g,x,_,m,v,b,w,A,E,S,C,M,D,T,L=e+e+1,F=r-1,k=i-1,I=e+1,O=I*(I+1)/2,$=new p3,N=null,W=$,H=null,K=null,ee=Lue[e],Z=Fue[e];for(a=1;a<L;a++)W=W.next=new p3,a===I&&(N=W);for(W.next=$,f=c=0,o=0;o<i;o++){for(b=w=A=E=h=d=p=g=0,x=I*(S=n[c]),_=I*(C=n[c+1]),m=I*(M=n[c+2]),v=I*(D=n[c+3]),h+=O*S,d+=O*C,p+=O*M,g+=O*D,W=$,a=0;a<I;a++)W.r=S,W.g=C,W.b=M,W.a=D,W=W.next;for(a=1;a<I;a++)l=c+((F<a?F:a)<<2),h+=(W.r=S=n[l])*(T=I-a),d+=(W.g=C=n[l+1])*T,p+=(W.b=M=n[l+2])*T,g+=(W.a=D=n[l+3])*T,b+=S,w+=C,A+=M,E+=D,W=W.next;for(H=$,K=N,s=0;s<r;s++)n[c+3]=D=g*ee>>Z,D!==0?(D=255/D,n[c]=(h*ee>>Z)*D,n[c+1]=(d*ee>>Z)*D,n[c+2]=(p*ee>>Z)*D):n[c]=n[c+1]=n[c+2]=0,h-=x,d-=_,p-=m,g-=v,x-=H.r,_-=H.g,m-=H.b,v-=H.a,l=f+((l=s+e+1)<F?l:F)<<2,b+=H.r=n[l],w+=H.g=n[l+1],A+=H.b=n[l+2],E+=H.a=n[l+3],h+=b,d+=w,p+=A,g+=E,H=H.next,x+=S=K.r,_+=C=K.g,m+=M=K.b,v+=D=K.a,b-=S,w-=C,A-=M,E-=D,K=K.next,c+=4;f+=r}for(s=0;s<r;s++){for(w=A=E=b=d=p=g=h=0,c=s<<2,x=I*(S=n[c]),_=I*(C=n[c+1]),m=I*(M=n[c+2]),v=I*(D=n[c+3]),h+=O*S,d+=O*C,p+=O*M,g+=O*D,W=$,a=0;a<I;a++)W.r=S,W.g=C,W.b=M,W.a=D,W=W.next;for(u=r,a=1;a<=e;a++)c=u+s<<2,h+=(W.r=S=n[c])*(T=I-a),d+=(W.g=C=n[c+1])*T,p+=(W.b=M=n[c+2])*T,g+=(W.a=D=n[c+3])*T,b+=S,w+=C,A+=M,E+=D,W=W.next,a<k&&(u+=r);for(c=s,H=$,K=N,o=0;o<i;o++)l=c<<2,n[l+3]=D=g*ee>>Z,D>0?(D=255/D,n[l]=(h*ee>>Z)*D,n[l+1]=(d*ee>>Z)*D,n[l+2]=(p*ee>>Z)*D):n[l]=n[l+1]=n[l+2]=0,h-=x,d-=_,p-=m,g-=v,x-=H.r,_-=H.g,m-=H.b,v-=H.a,l=s+((l=o+I)<k?l:k)*r<<2,h+=b+=H.r=n[l],d+=w+=H.g=n[l+1],p+=A+=H.b=n[l+2],g+=E+=H.a=n[l+3],H=H.next,x+=S=K.r,_+=C=K.g,m+=M=K.b,v+=D=K.a,b-=S,w-=C,A-=M,E-=D,K=K.next,c+=r}}const kue=function(e){var n=Math.round(this.blurRadius());n>0&&Iue(e,n)};me.addGetterSetter(We,"blurRadius",0,$e(),me.afterSetFilter);const Rue=function(t){var e=this.brightness()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};me.addGetterSetter(We,"brightness",0,$e(),me.afterSetFilter);const Oue=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,i=150,s=150,o=150,a;for(a=0;a<r;a+=4)i=n[a],s=n[a+1],o=n[a+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,n[a]=i,n[a+1]=s,n[a+2]=o};me.addGetterSetter(We,"contrast",0,$e(),me.afterSetFilter);const Bue=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,o=0,a=t.data,l=t.width,u=t.height,c=l*4,f=u;switch(r){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:xe.error("Unknown emboss direction: "+r)}do{var h=(f-1)*c,d=s;f+d<1&&(d=0),f+d>u&&(d=0);var p=(f-1+d)*l*4,g=l;do{var x=h+(g-1)*4,_=o;g+_<1&&(_=0),g+_>l&&(_=0);var m=p+(g-1+_)*4,v=a[x]-a[m],b=a[x+1]-a[m+1],w=a[x+2]-a[m+2],A=v,E=A>0?A:-A,S=b>0?b:-b,C=w>0?w:-w;if(S>E&&(A=b),C>E&&(A=w),A*=e,i){var M=a[x]+A,D=a[x+1]+A,T=a[x+2]+A;a[x]=M>255?255:M<0?0:M,a[x+1]=D>255?255:D<0?0:D,a[x+2]=T>255?255:T<0?0:T}else{var L=n-A;L<0?L=0:L>255&&(L=255),a[x]=a[x+1]=a[x+2]=L}}while(--g)}while(--f)};me.addGetterSetter(We,"embossStrength",.5,$e(),me.afterSetFilter);me.addGetterSetter(We,"embossWhiteLevel",.5,$e(),me.afterSetFilter);me.addGetterSetter(We,"embossDirection","top-left",null,me.afterSetFilter);me.addGetterSetter(We,"embossBlend",!1,null,me.afterSetFilter);function DS(t,e,n,r,i){var s=n-e,o=i-r,a;return s===0?r+o/2:o===0?r:(a=(t-e)/s,a=o*a+r,a)}const Nue=function(t){var e=t.data,n=e.length,r=e[0],i=r,s,o=e[1],a=o,l,u=e[2],c=u,f,h,d=this.enhance();if(d!==0){for(h=0;h<n;h+=4)s=e[h+0],s<r?r=s:s>i&&(i=s),l=e[h+1],l<o?o=l:l>a&&(a=l),f=e[h+2],f<u?u=f:f>c&&(c=f);i===r&&(i=255,r=0),a===o&&(a=255,o=0),c===u&&(c=255,u=0);var p,g,x,_,m,v,b,w,A;for(d>0?(g=i+d*(255-i),x=r-d*(r-0),m=a+d*(255-a),v=o-d*(o-0),w=c+d*(255-c),A=u-d*(u-0)):(p=(i+r)*.5,g=i+d*(i-p),x=r+d*(r-p),_=(a+o)*.5,m=a+d*(a-_),v=o+d*(o-_),b=(c+u)*.5,w=c+d*(c-b),A=u+d*(u-b)),h=0;h<n;h+=4)e[h+0]=DS(e[h+0],r,i,x,g),e[h+1]=DS(e[h+1],o,a,v,m),e[h+2]=DS(e[h+2],u,c,A,w)}};me.addGetterSetter(We,"enhance",0,$e(),me.afterSetFilter);const Vue=function(t){var e=t.data,n=e.length,r,i;for(r=0;r<n;r+=4)i=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=i,e[r+1]=i,e[r+2]=i};me.addGetterSetter(We,"hue",0,$e(),me.afterSetFilter);me.addGetterSetter(We,"saturation",0,$e(),me.afterSetFilter);me.addGetterSetter(We,"luminance",0,$e(),me.afterSetFilter);const zue=function(t){var e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a,l=r*i*Math.cos(s*Math.PI/180),u=r*i*Math.sin(s*Math.PI/180),c=.299*r+.701*l+.167*u,f=.587*r-.587*l+.33*u,h=.114*r-.114*l-.497*u,d=.299*r-.299*l-.328*u,p=.587*r+.413*l+.035*u,g=.114*r-.114*l+.293*u,x=.299*r-.3*l+1.25*u,_=.587*r-.586*l-1.05*u,m=.114*r+.886*l-.2*u,v,b,w,A;for(a=0;a<n;a+=4)v=e[a+0],b=e[a+1],w=e[a+2],A=e[a+3],e[a+0]=c*v+f*b+h*w+o,e[a+1]=d*v+p*b+g*w+o,e[a+2]=x*v+_*b+m*w+o,e[a+3]=A},Gue=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o,a=r*i*Math.cos(s*Math.PI/180),l=r*i*Math.sin(s*Math.PI/180),u=.299*r+.701*a+.167*l,c=.587*r-.587*a+.33*l,f=.114*r-.114*a-.497*l,h=.299*r-.299*a-.328*l,d=.587*r+.413*a+.035*l,p=.114*r-.114*a+.293*l,g=.299*r-.3*a+1.25*l,x=.587*r-.586*a-1.05*l,_=.114*r+.886*a-.2*l,m,v,b,w;for(o=0;o<n;o+=4)m=e[o+0],v=e[o+1],b=e[o+2],w=e[o+3],e[o+0]=u*m+c*v+f*b,e[o+1]=h*m+d*v+p*b,e[o+2]=g*m+x*v+_*b,e[o+3]=w};me.addGetterSetter(We,"hue",0,$e(),me.afterSetFilter);me.addGetterSetter(We,"saturation",0,$e(),me.afterSetFilter);me.addGetterSetter(We,"value",0,$e(),me.afterSetFilter);const Uue=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};var Hue=function(t,e,n){var r=t.data,i=e.data,s=t.width,o=t.height,a=n.polarCenterX||s/2,l=n.polarCenterY||o/2,u,c,f,h=0,d=0,p=0,g=0,x,_=Math.sqrt(a*a+l*l);c=s-a,f=o-l,x=Math.sqrt(c*c+f*f),_=x>_?x:_;var m=o,v=s,b,w,A=360/v*Math.PI/180,E,S;for(w=0;w<v;w+=1)for(E=Math.sin(w*A),S=Math.cos(w*A),b=0;b<m;b+=1)c=Math.floor(a+_*b/m*S),f=Math.floor(l+_*b/m*E),u=(f*s+c)*4,h=r[u+0],d=r[u+1],p=r[u+2],g=r[u+3],u=(w+b*s)*4,i[u+0]=h,i[u+1]=d,i[u+2]=p,i[u+3]=g},Wue=function(t,e,n){var r=t.data,i=e.data,s=t.width,o=t.height,a=n.polarCenterX||s/2,l=n.polarCenterY||o/2,u,c,f,h,d,p=0,g=0,x=0,_=0,m,v=Math.sqrt(a*a+l*l);c=s-a,f=o-l,m=Math.sqrt(c*c+f*f),v=m>v?m:v;var b=o,w=s,A,E,S=n.polarRotation||0,C,M;for(c=0;c<s;c+=1)for(f=0;f<o;f+=1)h=c-a,d=f-l,A=Math.sqrt(h*h+d*d)*b/v,E=(Math.atan2(d,h)*180/Math.PI+360+S)%360,E=E*w/360,C=Math.floor(E),M=Math.floor(A),u=(M*s+C)*4,p=r[u+0],g=r[u+1],x=r[u+2],_=r[u+3],u=(f*s+c)*4,i[u+0]=p,i[u+1]=g,i[u+2]=x,i[u+3]=_};const $ue=function(t){var e=t.width,n=t.height,r,i,s,o,a,l,u,c,f,h,d=Math.round(this.kaleidoscopePower()),p=Math.round(this.kaleidoscopeAngle()),g=Math.floor(e*(p%360)/360);if(!(d<1)){var x=xe.createCanvasElement();x.width=e,x.height=n;var _=x.getContext("2d").getImageData(0,0,e,n);xe.releaseCanvas(x),Hue(t,_,{polarCenterX:e/2,polarCenterY:n/2});for(var m=e/Math.pow(2,d);m<=8;)m=m*2,d-=1;m=Math.ceil(m);var v=m,b=0,w=v,A=1;for(g+m>e&&(b=v,w=0,A=-1),i=0;i<n;i+=1)for(r=b;r!==w;r+=A)s=Math.round(r+g)%e,f=(e*i+s)*4,a=_.data[f+0],l=_.data[f+1],u=_.data[f+2],c=_.data[f+3],h=(e*i+r)*4,_.data[h+0]=a,_.data[h+1]=l,_.data[h+2]=u,_.data[h+3]=c;for(i=0;i<n;i+=1)for(v=Math.floor(m),o=0;o<d;o+=1){for(r=0;r<v+1;r+=1)f=(e*i+r)*4,a=_.data[f+0],l=_.data[f+1],u=_.data[f+2],c=_.data[f+3],h=(e*i+v*2-r-1)*4,_.data[h+0]=a,_.data[h+1]=l,_.data[h+2]=u,_.data[h+3]=c;v*=2}Wue(_,t,{polarRotation:0})}};me.addGetterSetter(We,"kaleidoscopePower",2,$e(),me.afterSetFilter);me.addGetterSetter(We,"kaleidoscopeAngle",0,$e(),me.afterSetFilter);function uy(t,e,n){var r=(n*t.width+e)*4,i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function Gp(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function Xue(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function Yue(t,e){var n=uy(t,0,0),r=uy(t,t.width-1,0),i=uy(t,0,t.height-1),s=uy(t,t.width-1,t.height-1),o=e||10;if(Gp(n,r)<o&&Gp(r,s)<o&&Gp(s,i)<o&&Gp(i,n)<o){for(var a=Xue([r,n,s,i]),l=[],u=0;u<t.width*t.height;u++){var c=Gp(a,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=c<o?0:255}return l}}function jue(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function que(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var u=a*e+l,c=0,f=0;f<i;f++)for(var h=0;h<i;h++){var d=a+f-s,p=l+h-s;if(d>=0&&d<n&&p>=0&&p<e){var g=d*e+p,x=r[f*i+h];c+=t[g]*x}}o[u]=c===255*8?255:0}return o}function Jue(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var u=a*e+l,c=0,f=0;f<i;f++)for(var h=0;h<i;h++){var d=a+f-s,p=l+h-s;if(d>=0&&d<n&&p>=0&&p<e){var g=d*e+p,x=r[f*i+h];c+=t[g]*x}}o[u]=c>=255*4?255:0}return o}function Kue(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var u=a*e+l,c=0,f=0;f<i;f++)for(var h=0;h<i;h++){var d=a+f-s,p=l+h-s;if(d>=0&&d<n&&p>=0&&p<e){var g=d*e+p,x=r[f*i+h];c+=t[g]*x}}o[u]=c}return o}const Zue=function(t){var e=this.threshold(),n=Yue(t,e);return n&&(n=que(n,t.width,t.height),n=Jue(n,t.width,t.height),n=Kue(n,t.width,t.height),jue(t,n)),t};me.addGetterSetter(We,"threshold",0,$e(),me.afterSetFilter);const Que=function(t){var e=this.noise()*255,n=t.data,r=n.length,i=e/2,s;for(s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};me.addGetterSetter(We,"noise",.2,$e(),me.afterSetFilter);const ece=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i,s,o,a,l,u,c,f=Math.ceil(n/e),h=Math.ceil(r/e),d,p,g,x,_,m,v,b=t.data;if(e<=0){xe.error("pixelSize value can not be <= 0");return}for(_=0;_<f;_+=1)for(m=0;m<h;m+=1){for(a=0,l=0,u=0,c=0,d=_*e,p=d+e,g=m*e,x=g+e,v=0,i=d;i<p;i+=1)if(!(i>=n))for(s=g;s<x;s+=1)s>=r||(o=(n*s+i)*4,a+=b[o+0],l+=b[o+1],u+=b[o+2],c+=b[o+3],v+=1);for(a=a/v,l=l/v,u=u/v,c=c/v,i=d;i<p;i+=1)if(!(i>=n))for(s=g;s<x;s+=1)s>=r||(o=(n*s+i)*4,b[o+0]=a,b[o+1]=l,b[o+2]=u,b[o+3]=c)}};me.addGetterSetter(We,"pixelSize",8,$e(),me.afterSetFilter);const tce=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e,s;for(s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};me.addGetterSetter(We,"levels",.5,$e(),me.afterSetFilter);const nce=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),o,a;for(o=0;o<n;o+=4)a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=a*r,e[o+1]=a*i,e[o+2]=a*s,e[o+3]=e[o+3]};me.addGetterSetter(We,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});me.addGetterSetter(We,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});me.addGetterSetter(We,"blue",0,PV,me.afterSetFilter);const rce=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),o=this.alpha(),a,l;for(a=0;a<n;a+=4)l=1-o,e[a]=r*o+e[a]*l,e[a+1]=i*o+e[a+1]*l,e[a+2]=s*o+e[a+2]*l};me.addGetterSetter(We,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});me.addGetterSetter(We,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});me.addGetterSetter(We,"blue",0,PV,me.afterSetFilter);me.addGetterSetter(We,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});const ice=function(t){var e=t.data,n=e.length,r,i,s,o;for(r=0;r<n;r+=4)i=e[r+0],s=e[r+1],o=e[r+2],e[r+0]=Math.min(255,i*.393+s*.769+o*.189),e[r+1]=Math.min(255,i*.349+s*.686+o*.168),e[r+2]=Math.min(255,i*.272+s*.534+o*.131)},sce=function(t){var e=t.data,n=t.width,r=t.height,i=n*4,s=r;do{var o=(s-1)*i,a=n;do{var l=o+(a-1)*4,u=e[l],c=e[l+1],f=e[l+2];u>127&&(u=255-u),c>127&&(c=255-c),f>127&&(f=255-f),e[l]=u,e[l+1]=c,e[l+2]=f}while(--a)}while(--s)},oce=function(t){var e=this.threshold()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=1)n[i]=n[i]<e?0:255};me.addGetterSetter(We,"threshold",.5,$e(),me.afterSetFilter);const ke=o3.Util._assign(o3,{Arc:Sl,Arrow:pf,Circle:Ud,Ellipse:tc,Image:so,Label:L2,Tag:gf,Line:Al,Path:yn,Rect:sv,RegularPolygon:mf,Ring:vf,Sprite:Oa,Star:nc,Text:Qn,TextPath:Nr,Transformer:un,Wedge:El,Filters:{Blur:kue,Brighten:Rue,Contrast:Oue,Emboss:Bue,Enhance:Nue,Grayscale:Vue,HSL:zue,HSV:Gue,Invert:Uue,Kaleidoscope:$ue,Mask:Zue,Noise:Que,Pixelate:ece,Posterize:tce,RGB:nce,RGBA:rce,Sepia:ice,Solarize:sce,Threshold:oce}});function TE(){return TE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},TE.apply(this,arguments)}var az={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};function jn(t){return typeof t=="number"}function Ys(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function lz(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function uz(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function cz(t){return t&&t.constructor.prototype.isUnit===!0||!1}function la(t){return typeof t=="string"}var $n=Array.isArray;function Gi(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function G1(t){return Array.isArray(t)||Gi(t)}function ace(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function lce(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function uce(t){return t&&t.constructor.prototype.isRange===!0||!1}function F2(t){return t&&t.constructor.prototype.isIndex===!0||!1}function cce(t){return typeof t=="boolean"}function fce(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function hce(t){return t&&t.constructor.prototype.isHelp===!0||!1}function dce(t){return typeof t=="function"}function pce(t){return t instanceof Date}function gce(t){return t instanceof RegExp}function mce(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!lz(t)&&!uz(t))}function vce(t){return t===null}function yce(t){return t===void 0}function _ce(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function wce(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function bce(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function xce(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function Sce(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ace(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ece(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function Cce(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function Mce(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function Dce(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function Tce(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function Pce(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function Lce(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function Fce(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function Ice(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function kce(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function Rce(t){return t&&t.constructor.prototype.isChain===!0||!1}function Qh(t){var e=typeof t;return e==="object"?t===null?"null":Ys(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function $r(t){var e=typeof t;if(e==="number"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return $r(n)});if(t instanceof Date)return new Date(t.valueOf());if(Ys(t))return t;if(t instanceof RegExp)throw new TypeError("Cannot clone "+t);return Oce(t,$r)}function Oce(t,e){var n={};for(var r in t)Am(t,r)&&(n[r]=e(t[r]));return n}function Bce(t,e){for(var n in e)Am(e,n)&&(t[n]=e[n]);return t}function U1(t,e){var n,r,i;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,i=t.length;r<i;r++)if(!U1(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!U1(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function Am(t,e){return t&&Object.hasOwnProperty.call(t,e)}function Nce(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r],s=t[i];s!==void 0&&(n[i]=s)}return n}var Vce=["Matrix","Array"],zce=["number","BigNumber","Fraction"],Hd=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(az)};TE(Hd,az,{MATRIX_OPTIONS:Vce,NUMBER_OPTIONS:zce});function xo(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Gce(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return s=u.done,u},e:function(u){o=!0,a=u},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}function Gce(t,e){if(!!t){if(typeof t=="string")return g3(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g3(t,e)}}function g3(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Th(t){return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(t)}function m3(){return!0}function Bs(){return!1}function lh(){}var v3="Argument is not a typed-function.";function fz(){function t(U){return Th(U)==="object"&&U!==null&&U.constructor===Object}var e=[{name:"number",test:function(z){return typeof z=="number"}},{name:"string",test:function(z){return typeof z=="string"}},{name:"boolean",test:function(z){return typeof z=="boolean"}},{name:"Function",test:function(z){return typeof z=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(z){return z instanceof Date}},{name:"RegExp",test:function(z){return z instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(z){return z===null}},{name:"undefined",test:function(z){return z===void 0}}],n={name:"any",test:m3,isAny:!0},r,i,s=0,o={createCount:0};function a(U){var z=r.get(U);if(z)return z;var te='Unknown type "'+U+'"',fe=U.toLowerCase(),ne,de=xo(i),pe;try{for(de.s();!(pe=de.n()).done;)if(ne=pe.value,ne.toLowerCase()===fe){te+='. Did you mean "'+ne+'" ?';break}}catch(_e){de.e(_e)}finally{de.f()}throw new TypeError(te)}function l(U){for(var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any",te=z?a(z).index:i.length,fe=[],ne=0;ne<U.length;++ne){if(!U[ne]||typeof U[ne].name!="string"||typeof U[ne].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");var de=U[ne].name;if(r.has(de))throw new TypeError('Duplicate type name "'+de+'"');fe.push(de),r.set(de,{name:de,test:U[ne].test,isAny:U[ne].isAny,index:te+ne,conversionsTo:[]})}var pe=i.slice(te);i=i.slice(0,te).concat(fe).concat(pe);for(var _e=te+fe.length;_e<i.length;++_e)r.get(i[_e]).index=_e}function u(){r=new Map,i=[],s=0,l([n],!1)}u(),l(e);function c(){var U,z=xo(i),te;try{for(z.s();!(te=z.n()).done;)U=te.value,r.get(U).conversionsTo=[]}catch(fe){z.e(fe)}finally{z.f()}s=0}function f(U){var z=i.filter(function(te){var fe=r.get(te);return!fe.isAny&&fe.test(U)});return z.length?z:["any"]}function h(U){return U&&typeof U=="function"&&"_typedFunctionData"in U}function d(U,z,te){if(!h(U))throw new TypeError(v3);var fe=te&&te.exact,ne=Array.isArray(z)?z.join(","):z,de=b(ne),pe=x(de);if(!fe||pe in U.signatures){var _e=U._typedFunctionData.signatureMap.get(pe);if(_e)return _e}var be=de.length,Me;if(fe){Me=[];var Ve;for(Ve in U.signatures)Me.push(U._typedFunctionData.signatureMap.get(Ve))}else Me=U._typedFunctionData.signatures;for(var Pe=0;Pe<be;++Pe){var je=de[Pe],Ze=[],ft=void 0,gt=xo(Me),dt;try{for(gt.s();!(dt=gt.n()).done;){ft=dt.value;var At=S(ft.params,Pe);if(!(!At||je.restParam&&!At.restParam)){if(!At.hasAny){var nn=function(){var cn=v(At);if(je.types.some(function(Tn){return!cn.has(Tn.name)}))return"continue"}();if(nn==="continue")continue}Ze.push(ft)}}}catch(cn){gt.e(cn)}finally{gt.f()}if(Me=Ze,Me.length===0)break}var qt,Dn=xo(Me),Tr;try{for(Dn.s();!(Tr=Dn.n()).done;)if(qt=Tr.value,qt.params.length<=be)return qt}catch(cn){Dn.e(cn)}finally{Dn.f()}throw new TypeError("Signature not found (signature: "+(U.name||"unnamed")+"("+x(de,", ")+"))")}function p(U,z,te){return d(U,z,te).implementation}function g(U,z){var te=a(z);if(te.test(U))return U;var fe=te.conversionsTo;if(fe.length===0)throw new Error("There are no conversions to "+z+" defined.");for(var ne=0;ne<fe.length;ne++){var de=a(fe[ne].from);if(de.test(U))return fe[ne].convert(U)}throw new Error("Cannot convert "+U+" to "+z)}function x(U){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return U.map(function(te){return te.name}).join(z)}function _(U){var z=U.indexOf("...")===0,te=z?U.length>3?U.slice(3):"any":U,fe=te.split("|").map(function(_e){return a(_e.trim())}),ne=!1,de=z?"...":"",pe=fe.map(function(_e){return ne=_e.isAny||ne,de+=_e.name+"|",{name:_e.name,typeIndex:_e.index,test:_e.test,isAny:_e.isAny,conversion:null,conversionIndex:-1}});return{types:pe,name:de.slice(0,-1),hasAny:ne,hasConversion:!1,restParam:z}}function m(U){var z=U.types.map(function(pe){return pe.name}),te=O(z),fe=U.hasAny,ne=U.name,de=te.map(function(pe){var _e=a(pe.from);return fe=_e.isAny||fe,ne+="|"+pe.from,{name:pe.from,typeIndex:_e.index,test:_e.test,isAny:_e.isAny,conversion:pe,conversionIndex:pe.index}});return{types:U.types.concat(de),name:ne,hasAny:fe,hasConversion:de.length>0,restParam:U.restParam}}function v(U){return U.typeSet||(U.typeSet=new Set,U.types.forEach(function(z){return U.typeSet.add(z.name)})),U.typeSet}function b(U){var z=[];if(typeof U!="string")throw new TypeError("Signatures must be strings");var te=U.trim();if(te==="")return z;for(var fe=te.split(","),ne=0;ne<fe.length;++ne){var de=_(fe[ne].trim());if(de.restParam&&ne!==fe.length-1)throw new SyntaxError('Unexpected rest parameter "'+fe[ne]+'": only allowed for the last parameter');if(de.types.length===0)return null;z.push(de)}return z}function w(U){var z=he(U);return z?z.restParam:!1}function A(U){if(!U||U.types.length===0)return m3;if(U.types.length===1)return a(U.types[0].name).test;if(U.types.length===2){var z=a(U.types[0].name).test,te=a(U.types[1].name).test;return function(de){return z(de)||te(de)}}else{var fe=U.types.map(function(ne){return a(ne.name).test});return function(de){for(var pe=0;pe<fe.length;pe++)if(fe[pe](de))return!0;return!1}}}function E(U){var z,te,fe;if(w(U)){z=oe(U).map(A);var ne=z.length,de=A(he(U)),pe=function(be){for(var Me=ne;Me<be.length;Me++)if(!de(be[Me]))return!1;return!0};return function(be){for(var Me=0;Me<z.length;Me++)if(!z[Me](be[Me]))return!1;return pe(be)&&be.length>=ne+1}}else return U.length===0?function(be){return be.length===0}:U.length===1?(te=A(U[0]),function(be){return te(be[0])&&be.length===1}):U.length===2?(te=A(U[0]),fe=A(U[1]),function(be){return te(be[0])&&fe(be[1])&&be.length===2}):(z=U.map(A),function(be){for(var Me=0;Me<z.length;Me++)if(!z[Me](be[Me]))return!1;return be.length===z.length})}function S(U,z){return z<U.length?U[z]:w(U)?he(U):null}function C(U,z){var te=S(U,z);return te?v(te):new Set}function M(U){return U.conversion===null||U.conversion===void 0}function D(U,z){var te=new Set;return U.forEach(function(fe){var ne=C(fe.params,z),de,pe=xo(ne),_e;try{for(pe.s();!(_e=pe.n()).done;)de=_e.value,te.add(de)}catch(be){pe.e(be)}finally{pe.f()}}),te.has("any")?["any"]:Array.from(te)}function T(U,z,te){var fe,ne,de=U||"unnamed",pe=te,_e,be=function(){var gt=[];if(pe.forEach(function(At){var nn=S(At.params,_e),qt=A(nn);(_e<At.params.length||w(At.params))&&qt(z[_e])&&gt.push(At)}),gt.length===0){if(ne=D(pe,_e),ne.length>0){var dt=f(z[_e]);return fe=new TypeError("Unexpected type of argument in function "+de+" (expected: "+ne.join(" or ")+", actual: "+dt.join(" | ")+", index: "+_e+")"),fe.data={category:"wrongType",fn:de,index:_e,actual:dt,expected:ne},{v:fe}}}else pe=gt};for(_e=0;_e<z.length;_e++){var Me=be();if(Th(Me)==="object")return Me.v}var Ve=pe.map(function(ft){return w(ft.params)?1/0:ft.params.length});if(z.length<Math.min.apply(null,Ve))return ne=D(pe,_e),fe=new TypeError("Too few arguments in function "+de+" (expected: "+ne.join(" or ")+", index: "+z.length+")"),fe.data={category:"tooFewArgs",fn:de,index:z.length,expected:ne},fe;var Pe=Math.max.apply(null,Ve);if(z.length>Pe)return fe=new TypeError("Too many arguments in function "+de+" (expected: "+Pe+", actual: "+z.length+")"),fe.data={category:"tooManyArgs",fn:de,index:z.length,expectedLength:Pe},fe;for(var je=[],Ze=0;Ze<z.length;++Ze)je.push(f(z[Ze]).join("|"));return fe=new TypeError('Arguments of type "'+je.join(", ")+'" do not match any of the defined signatures of function '+de+"."),fe.data={category:"mismatch",actual:je},fe}function L(U){for(var z=i.length+1,te=0;te<U.types.length;te++)M(U.types[te])&&(z=Math.min(z,U.types[te].typeIndex));return z}function F(U){for(var z=s+1,te=0;te<U.types.length;te++)M(U.types[te])||(z=Math.min(z,U.types[te].conversionIndex));return z}function k(U,z){if(U.hasAny){if(!z.hasAny)return 1}else if(z.hasAny)return-1;if(U.restParam){if(!z.restParam)return 1}else if(z.restParam)return-1;if(U.hasConversion){if(!z.hasConversion)return 1}else if(z.hasConversion)return-1;var te=L(U)-L(z);if(te<0)return-1;if(te>0)return 1;var fe=F(U)-F(z);return fe<0?-1:fe>0?1:0}function I(U,z){var te=U.params,fe=z.params,ne=he(te),de=he(fe),pe=w(te),_e=w(fe);if(pe&&ne.hasAny){if(!_e||!de.hasAny)return 1}else if(_e&&de.hasAny)return-1;var be=0,Me=0,Ve,Pe=xo(te),je;try{for(Pe.s();!(je=Pe.n()).done;)Ve=je.value,Ve.hasAny&&++be,Ve.hasConversion&&++Me}catch(Ii){Pe.e(Ii)}finally{Pe.f()}var Ze=0,ft=0,gt=xo(fe),dt;try{for(gt.s();!(dt=gt.n()).done;)Ve=dt.value,Ve.hasAny&&++Ze,Ve.hasConversion&&++ft}catch(Ii){gt.e(Ii)}finally{gt.f()}if(be!==Ze)return be-Ze;if(pe&&ne.hasConversion){if(!_e||!de.hasConversion)return 1}else if(_e&&de.hasConversion)return-1;if(Me!==ft)return Me-ft;if(pe){if(!_e)return 1}else if(_e)return-1;var At=(te.length-fe.length)*(pe?-1:1);if(At!==0)return At;for(var nn=[],qt=0,Dn=0;Dn<te.length;++Dn){var Tr=k(te[Dn],fe[Dn]);nn.push(Tr),qt+=Tr}if(qt!==0)return qt;for(var cn,Tn=0,fn=nn;Tn<fn.length;Tn++)if(cn=fn[Tn],cn!==0)return cn;return 0}function O(U){if(U.length===0)return[];var z=U.map(a);U.length>1&&z.sort(function(be,Me){return be.index-Me.index});var te=z[0].conversionsTo;if(U.length===1)return te;te=te.concat([]);for(var fe=new Set(U),ne=1;ne<z.length;++ne){var de=void 0,pe=xo(z[ne].conversionsTo),_e;try{for(pe.s();!(_e=pe.n()).done;)de=_e.value,fe.has(de.from)||(te.push(de),fe.add(de.from))}catch(be){pe.e(be)}finally{pe.f()}}return te}function $(U,z){var te=z;if(U.some(function(_e){return _e.hasConversion})){var fe=w(U),ne=U.map(N);te=function(){for(var be=[],Me=fe?arguments.length-1:arguments.length,Ve=0;Ve<Me;Ve++)be[Ve]=ne[Ve](arguments[Ve]);return fe&&(be[Me]=arguments[Me].map(ne[Me])),z.apply(this,be)}}var de=te;if(w(U)){var pe=U.length-1;de=function(){return te.apply(this,ve(arguments,0,pe).concat([ve(arguments,pe)]))}}return de}function N(U){var z,te,fe,ne,de=[],pe=[];switch(U.types.forEach(function(_e){_e.conversion&&(de.push(a(_e.conversion.from).test),pe.push(_e.conversion.convert))}),pe.length){case 0:return function(be){return be};case 1:return z=de[0],fe=pe[0],function(be){return z(be)?fe(be):be};case 2:return z=de[0],te=de[1],fe=pe[0],ne=pe[1],function(be){return z(be)?fe(be):te(be)?ne(be):be};default:return function(be){for(var Me=0;Me<pe.length;Me++)if(de[Me](be))return pe[Me](be);return be}}}function W(U){function z(te,fe,ne){if(fe<te.length){var de=te[fe],pe=[];if(de.restParam){var _e=de.types.filter(M);_e.length<de.types.length&&pe.push({types:_e,name:"..."+_e.map(function(be){return be.name}).join("|"),hasAny:_e.some(function(be){return be.isAny}),hasConversion:!1,restParam:!0}),pe.push(de)}else pe=de.types.map(function(be){return{types:[be],name:be.name,hasAny:be.isAny,hasConversion:be.conversion,restParam:!1}});return V(pe,function(be){return z(te,fe+1,ne.concat([be]))})}else return[ne]}return z(U,0,[])}function H(U,z){for(var te=Math.max(U.length,z.length),fe=0;fe<te;fe++){var ne=C(U,fe),de=C(z,fe),pe=!1,_e=void 0,be=xo(de),Me;try{for(be.s();!(Me=be.n()).done;)if(_e=Me.value,ne.has(_e)){pe=!0;break}}catch(ft){be.e(ft)}finally{be.f()}if(!pe)return!1}var Ve=U.length,Pe=z.length,je=w(U),Ze=w(z);return je?Ze?Ve===Pe:Pe>=Ve:Ze?Ve>=Pe:Ve===Pe}function K(U){return U.map(function(z){return Y(z)?j(z.referToSelf.callback):se(z)?B(z.referTo.references,z.referTo.callback):z})}function ee(U,z,te){var fe=[],ne,de=xo(U),pe;try{for(de.s();!(pe=de.n()).done;){ne=pe.value;var _e=te[ne];if(typeof _e!="number")throw new TypeError('No definition for referenced signature "'+ne+'"');if(_e=z[_e],typeof _e!="function")return!1;fe.push(_e)}}catch(be){de.e(be)}finally{de.f()}return fe}function Z(U,z,te){for(var fe=K(U),ne=new Array(fe.length).fill(!1),de=!0;de;){de=!1;for(var pe=!0,_e=0;_e<fe.length;++_e)if(!ne[_e]){var be=fe[_e];if(Y(be))fe[_e]=be.referToSelf.callback(te),fe[_e].referToSelf=be.referToSelf,ne[_e]=!0,pe=!1;else if(se(be)){var Me=ee(be.referTo.references,fe,z);Me?(fe[_e]=be.referTo.callback.apply(this,Me),fe[_e].referTo=be.referTo,ne[_e]=!0,pe=!1):de=!0}}if(pe&&de)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return fe}function J(U){var z=/\bthis(\(|\.signatures\b)/;Object.keys(U).forEach(function(te){var fe=U[te];if(z.test(fe.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function X(U,z){if(o.createCount++,Object.keys(z).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&J(z);var te=[],fe=[],ne={},de=[],pe,_e=function(){if(!Object.prototype.hasOwnProperty.call(z,pe))return"continue";var nr=b(pe);if(!nr)return"continue";te.forEach(function(Xo){if(H(Xo,nr))throw new TypeError('Conflicting signatures "'+x(Xo)+'" and "'+x(nr)+'".')}),te.push(nr);var tp=fe.length;fe.push(z[pe]);var Cf=nr.map(m),pc=void 0,Fl=xo(W(Cf)),np;try{for(Fl.s();!(np=Fl.n()).done;){pc=np.value;var Il=x(pc);de.push({params:pc,name:Il,fn:tp}),pc.every(function(Xo){return!Xo.hasConversion})&&(ne[Il]=tp)}}catch(Xo){Fl.e(Xo)}finally{Fl.f()}};for(pe in z)var be=_e();de.sort(I);var Me=Z(fe,ne,ur),Ve;for(Ve in ne)Object.prototype.hasOwnProperty.call(ne,Ve)&&(ne[Ve]=Me[ne[Ve]]);for(var Pe=[],je=new Map,Ze=0,ft=de;Ze<ft.length;Ze++)Ve=ft[Ze],je.has(Ve.name)||(Ve.fn=Me[Ve.fn],Pe.push(Ve),je.set(Ve.name,Ve));for(var gt=Pe[0]&&Pe[0].params.length<=2&&!w(Pe[0].params),dt=Pe[1]&&Pe[1].params.length<=2&&!w(Pe[1].params),At=Pe[2]&&Pe[2].params.length<=2&&!w(Pe[2].params),nn=Pe[3]&&Pe[3].params.length<=2&&!w(Pe[3].params),qt=Pe[4]&&Pe[4].params.length<=2&&!w(Pe[4].params),Dn=Pe[5]&&Pe[5].params.length<=2&&!w(Pe[5].params),Tr=gt&&dt&&At&&nn&&qt&&Dn,cn=0;cn<Pe.length;++cn)Pe[cn].test=E(Pe[cn].params);for(var Tn=gt?A(Pe[0].params[0]):Bs,fn=dt?A(Pe[1].params[0]):Bs,Ii=At?A(Pe[2].params[0]):Bs,Pn=nn?A(Pe[3].params[0]):Bs,Ln=qt?A(Pe[4].params[0]):Bs,ki=Dn?A(Pe[5].params[0]):Bs,ni=gt?A(Pe[0].params[1]):Bs,ce=dt?A(Pe[1].params[1]):Bs,Ee=At?A(Pe[2].params[1]):Bs,Te=nn?A(Pe[3].params[1]):Bs,Ce=qt?A(Pe[4].params[1]):Bs,Le=Dn?A(Pe[5].params[1]):Bs,rt=0;rt<Pe.length;++rt)Pe[rt].implementation=$(Pe[rt].params,Pe[rt].fn);var ct=gt?Pe[0].implementation:lh,lt=dt?Pe[1].implementation:lh,wt=At?Pe[2].implementation:lh,Jt=nn?Pe[3].implementation:lh,It=qt?Pe[4].implementation:lh,Rt=Dn?Pe[5].implementation:lh,mn=gt?Pe[0].params.length:-1,go=dt?Pe[1].params.length:-1,Ut=At?Pe[2].params.length:-1,Is=nn?Pe[3].params.length:-1,rn=qt?Pe[4].params.length:-1,ms=Dn?Pe[5].params.length:-1,it=Tr?6:0,Ri=Pe.length,ks=Pe.map(function(Hr){return Hr.test}),hn=Pe.map(function(Hr){return Hr.implementation}),$o=function(){for(var nr=it;nr<Ri;nr++)if(ks[nr](arguments))return hn[nr].apply(this,arguments);return o.onMismatch(U,arguments,Pe)};function ur(Hr,nr){return arguments.length===mn&&Tn(Hr)&&ni(nr)?ct.apply(this,arguments):arguments.length===go&&fn(Hr)&&ce(nr)?lt.apply(this,arguments):arguments.length===Ut&&Ii(Hr)&&Ee(nr)?wt.apply(this,arguments):arguments.length===Is&&Pn(Hr)&&Te(nr)?Jt.apply(this,arguments):arguments.length===rn&&Ln(Hr)&&Ce(nr)?It.apply(this,arguments):arguments.length===ms&&ki(Hr)&&Le(nr)?Rt.apply(this,arguments):$o.apply(this,arguments)}try{Object.defineProperty(ur,"name",{value:U})}catch{}return ur.signatures=ne,ur._typedFunctionData={signatures:Pe,signatureMap:je},ur}function Q(U,z,te){throw T(U,z,te)}function oe(U){return ve(U,0,U.length-1)}function he(U){return U[U.length-1]}function ve(U,z,te){return Array.prototype.slice.call(U,z,te)}function ye(U,z){for(var te=0;te<U.length;te++)if(z(U[te]))return U[te]}function V(U,z){return Array.prototype.concat.apply([],U.map(z))}function R(){var U=oe(arguments).map(function(te){return x(b(te))}),z=he(arguments);if(typeof z!="function")throw new TypeError("Callback function expected as last argument");return B(U,z)}function B(U,z){return{referTo:{references:U,callback:z}}}function j(U){if(typeof U!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:U}}}function se(U){return U&&Th(U.referTo)==="object"&&Array.isArray(U.referTo.references)&&typeof U.referTo.callback=="function"}function Y(U){return U&&Th(U.referToSelf)==="object"&&typeof U.referToSelf.callback=="function"}function G(U,z){if(!U)return z;if(z&&z!==U){var te=new Error("Function names do not match (expected: "+U+", actual: "+z+")");throw te.data={actual:z,expected:U},te}return U}function le(U){var z;for(var te in U)Object.prototype.hasOwnProperty.call(U,te)&&(h(U[te])||typeof U[te].signature=="string")&&(z=G(z,U[te].name));return z}function ge(U,z){var te;for(te in z)if(Object.prototype.hasOwnProperty.call(z,te)){if(te in U&&z[te]!==U[te]){var fe=new Error('Signature "'+te+'" is defined twice');throw fe.data={signature:te,sourceFunction:z[te],destFunction:U[te]},fe}U[te]=z[te]}}var ae=o;o=function(z){for(var te=typeof z=="string",fe=te?1:0,ne=te?z:"",de={},pe=fe;pe<arguments.length;++pe){var _e=arguments[pe],be={},Me=void 0;if(typeof _e=="function"?(Me=_e.name,typeof _e.signature=="string"?be[_e.signature]=_e:h(_e)&&(be=_e.signatures)):t(_e)&&(be=_e,te||(Me=le(_e))),Object.keys(be).length===0){var Ve=new TypeError("Argument to 'typed' at index "+pe+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Ve.data={index:pe,argument:_e},Ve}te||(ne=G(ne,Me)),ge(de,be)}return X(ne||"",de)},o.create=fz,o.createCount=ae.createCount,o.onMismatch=Q,o.throwMismatchError=Q,o.createError=T,o.clear=u,o.clearConversions=c,o.addTypes=l,o._findType=a,o.referTo=R,o.referToSelf=j,o.convert=g,o.findSignature=d,o.find=p,o.isTypedFunction=h,o.warnAgainstDeprecatedThis=!0,o.addType=function(U,z){var te="any";z!==!1&&r.has("Object")&&(te="Object"),o.addTypes([U],te)};function ue(U){if(!U||typeof U.from!="string"||typeof U.to!="string"||typeof U.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(U.to===U.from)throw new SyntaxError('Illegal to define conversion from "'+U.from+'" to itself.')}return o.addConversion=function(U){ue(U);var z=a(U.to);if(z.conversionsTo.every(function(te){return te.from!==U.from}))z.conversionsTo.push({from:U.from,convert:U.convert,index:s++});else throw new Error('There is already a conversion from "'+U.from+'" to "'+z.name+'"')},o.addConversions=function(U){U.forEach(o.addConversion)},o.removeConversion=function(U){ue(U);var z=a(U.to),te=ye(z.conversionsTo,function(ne){return ne.from===U.from});if(!te)throw new Error("Attempt to remove nonexistent conversion from "+U.from+" to "+U.to);if(te.convert!==U.convert)throw new Error("Conversion to remove does not match existing conversion");var fe=z.conversionsTo.indexOf(te);z.conversionsTo.splice(fe,1)},o.resolve=function(U,z){if(!h(U))throw new TypeError(v3);for(var te=U._typedFunctionData.signatures,fe=0;fe<te.length;++fe)if(te[fe].test(z))return te[fe];return null},o}const y3=fz();function Xr(t){return typeof t=="boolean"?!0:isFinite(t)?t===Math.round(t):!1}function TS(t,e,n){var r={2:"0b",8:"0o",16:"0x"},i=r[e],s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Xr(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!Xr(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),s="i".concat(n)}var o="";return t<0&&(t=-t,o="-"),"".concat(o).concat(i).concat(t.toString(e)).concat(s)}function PE(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var n="auto",r,i;if(e&&(e.notation&&(n=e.notation),jn(e)?r=e:jn(e.precision)&&(r=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return Hce(t,r);case"exponential":return hz(t,r);case"engineering":return Uce(t,r);case"bin":return TS(t,2,i);case"oct":return TS(t,8,i);case"hex":return TS(t,16,i);case"auto":return Wce(t,r,e&&e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function tw(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],i=parseFloat(e[4]||"0"),s=r.indexOf(".");i+=s!==-1?s-1:r.length-1;var o=r.replace(".","").replace(/^0*/,function(a){return i-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),i++),{sign:n,coefficients:o,exponent:i}}function Uce(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=tw(t),r=nw(n,e),i=r.exponent,s=r.coefficients,o=i%3===0?i:i<0?i-3-i%3:i-i%3;if(jn(e))for(;e>s.length||i-o+1>s.length;)s.push(0);else for(var a=Math.abs(i-o)-(s.length-1),l=0;l<a;l++)s.push(0);for(var u=Math.abs(i-o),c=1;u>0;)c++,u--;var f=s.slice(c).join(""),h=jn(e)&&f.length||f.match(/[1-9]/)?"."+f:"",d=s.slice(0,c).join("")+h+"e"+(i>=0?"+":"")+o.toString();return r.sign+d}function Hce(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=tw(t),r=typeof e=="number"?nw(n,n.exponent+1+e):n,i=r.coefficients,s=r.exponent+1,o=s+(e||0);return i.length<o&&(i=i.concat(ed(o-i.length))),s<0&&(i=ed(-s+1).concat(i),s=1),s<i.length&&i.splice(s,0,s===0?"0.":"."),r.sign+i.join("")}function hz(t,e){if(isNaN(t)||!isFinite(t))return String(t);var n=tw(t),r=e?nw(n,e):n,i=r.coefficients,s=r.exponent;i.length<e&&(i=i.concat(ed(e-i.length)));var o=i.shift();return r.sign+o+(i.length>0?"."+i.join(""):"")+"e"+(s>=0?"+":"")+s}function Wce(t,e,n){if(isNaN(t)||!isFinite(t))return String(t);var r=n&&n.lowerExp!==void 0?n.lowerExp:-3,i=n&&n.upperExp!==void 0?n.upperExp:5,s=tw(t),o=e?nw(s,e):s;if(o.exponent<r||o.exponent>=i)return hz(t,e);var a=o.coefficients,l=o.exponent;a.length<e&&(a=a.concat(ed(e-a.length))),a=a.concat(ed(l-a.length+1+(a.length<e?e-a.length:0))),a=ed(-l).concat(a);var u=l>0?l:0;return u<a.length-1&&a.splice(u+1,0,"."),o.sign+a.join("")}function nw(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var i=r.splice(e,r.length-e);if(i[0]>=5){var s=e-1;for(r[s]++;r[s]===10;)r.pop(),s===0&&(r.unshift(0),n.exponent++,s++),s--,r[s]++}}return n}function ed(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function $ce(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}var Xce=Number.EPSILON||2220446049250313e-31;function Em(t,e,n){if(n==null)return t===e;if(t===e)return!0;if(isNaN(t)||isNaN(e))return!1;if(isFinite(t)&&isFinite(e)){var r=Math.abs(t-e);return r<Xce?!0:r<=Math.max(Math.abs(t),Math.abs(e))*n}return!1}function PS(t,e,n){var r=t.constructor,i=new r(2),s="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!Xr(n))throw new Error("size must be an integer");if(t.greaterThan(i.pow(n-1).sub(1))||t.lessThan(i.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(i.pow(n))),s="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(s);case 8:return"".concat(t.toOctal()).concat(s);case 16:return"".concat(t.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function Yce(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n="auto",r,i;if(e!==void 0&&(e.notation&&(n=e.notation),typeof e=="number"?r=e:e.precision&&(r=e.precision),e.wordSize&&(i=e.wordSize,typeof i!="number")))throw new Error('Option "wordSize" must be a number');switch(n){case"fixed":return qce(t,r);case"exponential":return _3(t,r);case"engineering":return jce(t,r);case"bin":return PS(t,2,i);case"oct":return PS(t,8,i);case"hex":return PS(t,16,i);case"auto":{var s=e&&e.lowerExp!==void 0?e.lowerExp:-3,o=e&&e.upperExp!==void 0?e.upperExp:5;if(t.isZero())return"0";var a,l=t.toSignificantDigits(r),u=l.e;return u>=s&&u<o?a=l.toFixed():a=_3(t,r),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function jce(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,i=t.mul(Math.pow(10,-r)),s=i.toPrecision(e);return s.indexOf("e")!==-1&&(s=i.toString()),s+"e"+(n>=0?"+":"")+r.toString()}function _3(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function qce(t,e){return t.toFixed(e)}function ns(t,e){var n=Jce(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function Jce(t,e){if(typeof t=="number")return PE(t,e);if(Ys(t))return Yce(t,e);if(Kce(t))return!e||e.fraction!=="decimal"?t.s*t.n+"/"+t.d:t.toString();if(Array.isArray(t))return dz(t,e);if(la(t))return'"'+t+'"';if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>'"'+r+'": '+ns(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function dz(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,i=0;i<r;i++)i!==0&&(n+=", "),n+=dz(t[i],e);return n+="]",n}else return ns(t,e)}function Kce(t){return t&&typeof t=="object"&&typeof t.s=="number"&&typeof t.n=="number"&&typeof t.d=="number"||!1}function an(t,e,n){if(!(this instanceof an))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}an.prototype=new RangeError;an.prototype.constructor=RangeError;an.prototype.name="DimensionError";an.prototype.isDimensionError=!0;function yf(t,e,n){if(!(this instanceof yf))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}yf.prototype=new RangeError;yf.prototype.constructor=RangeError;yf.prototype.name="IndexError";yf.prototype.isIndexError=!0;function Uu(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function pz(t,e,n){var r,i=t.length;if(i!==e[n])throw new an(i,e[n]);if(n<e.length-1){var s=n+1;for(r=0;r<i;r++){var o=t[r];if(!Array.isArray(o))throw new an(e.length-1,e.length,"<");pz(t[r],e,s)}}else for(r=0;r<i;r++)if(Array.isArray(t[r]))throw new an(e.length+1,e.length,">")}function w3(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new an(t.length,0)}else pz(t,e,0)}function Xn(t,e){if(!jn(t)||!Xr(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new yf(t,e)}function b3(t,e,n){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(i){if(!jn(i)||!Xr(i)||i<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ns(e)+")")});var r=n!==void 0?n:0;return LE(t,e,0,r),t}function LE(t,e,n,r){var i,s,o=t.length,a=e[n],l=Math.min(o,a);if(t.length=a,n<e.length-1){var u=n+1;for(i=0;i<l;i++)s=t[i],Array.isArray(s)||(s=[s],t[i]=s),LE(s,e,u,r);for(i=l;i<a;i++)s=[],t[i]=s,LE(s,e,u,r)}else{for(i=0;i<l;i++)for(;Array.isArray(t[i]);)t[i]=t[i][0];for(i=l;i<a;i++)t[i]=r}}function Zce(t,e){var n=FE(t),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new an(0,r,"!=");e=I2(e,r);var i=gz(e);if(r!==i)throw new an(i,r,"!=");try{return Qce(n,e)}catch(s){throw s instanceof an?new an(i,r,"!="):s}}function I2(t,e){var n=gz(t),r=t.slice(),i=-1,s=t.indexOf(i),o=t.indexOf(i,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,l=e%n===0;if(a)if(l)r[s]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function gz(t){return t.reduce((e,n)=>e*n,1)}function Qce(t,e){for(var n=t,r,i=e.length-1;i>0;i--){var s=e[i];r=[];for(var o=n.length/s,a=0;a<o;a++)r.push(n.slice(a*s,(a+1)*s));n=r}return n}function mz(t,e,n,r){var i=r||Uu(t);if(n)for(var s=0;s<n;s++)t=[t],i.unshift(1);for(t=vz(t,e,0);i.length<e;)i.push(1);return t}function vz(t,e,n){var r,i;if(Array.isArray(t)){var s=n+1;for(r=0,i=t.length;r<i;r++)t[r]=vz(t[r],e,s)}else for(var o=n;o<e;o++)t=[t];return t}function FE(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function n(r){Array.isArray(r)?r.forEach(n):e.push(r)}),e}function H1(t,e){for(var n,r=0,i=0;i<t.length;i++){var s=t[i],o=Array.isArray(s);if(i===0&&o&&(r=s.length),o&&s.length!==r)return;var a=o?H1(s,e):e(s);if(n===void 0)n=a;else if(n!==a)return"mixed"}return n}function St(t,e,n,r){function i(s){var o=Nce(s,e.map(nfe));return efe(t,e,s),n(o)}return i.isFactory=!0,i.fn=t,i.dependencies=e.slice().sort(),r&&(i.meta=r),i}function efe(t,e,n){var r=e.filter(s=>!tfe(s)).every(s=>n[s]!==void 0);if(!r){var i=e.filter(s=>n[s]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(i.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function tfe(t){return t&&t[0]==="?"}function nfe(t){return t&&t[0]==="?"?t.slice(1):t}function rfe(t,e){if(_z(t)&&yz(t,e))return t[e];throw typeof t[e]=="function"&&ofe(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function ife(t,e,n){if(_z(t)&&yz(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function sfe(t,e){return e in t}function yz(t,e){return!t||typeof t!="object"?!1:Am(afe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function ofe(t,e){return t==null||typeof t[e]!="function"||Am(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:Am(lfe,e)?!0:!(e in Object.prototype||e in Function.prototype)}function _z(t){return typeof t=="object"&&t&&t.constructor===Object}var afe={length:!0,name:!0},lfe={toString:!0,valueOf:!0,toLocaleString:!0};class ufe{constructor(e){this.wrappedObject=e}keys(){return Object.keys(this.wrappedObject)}get(e){return rfe(this.wrappedObject,e)}set(e,n){return ife(this.wrappedObject,e,n),this}has(e){return sfe(this.wrappedObject,e)}}function cfe(t){return t?t instanceof Map||t instanceof ufe||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}var wz=function(){return wz=y3.create,y3},ffe=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],hfe=St("typed",ffe,function(e){var{BigNumber:n,Complex:r,DenseMatrix:i,Fraction:s}=e,o=wz();return o.clear(),o.addTypes([{name:"number",test:jn},{name:"Complex",test:lz},{name:"BigNumber",test:Ys},{name:"Fraction",test:uz},{name:"Unit",test:cz},{name:"identifier",test:a=>la&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:la},{name:"Chain",test:Rce},{name:"Array",test:$n},{name:"Matrix",test:Gi},{name:"DenseMatrix",test:ace},{name:"SparseMatrix",test:lce},{name:"Range",test:uce},{name:"Index",test:F2},{name:"boolean",test:cce},{name:"ResultSet",test:fce},{name:"Help",test:hce},{name:"function",test:dce},{name:"Date",test:pce},{name:"RegExp",test:gce},{name:"null",test:vce},{name:"undefined",test:yce},{name:"AccessorNode",test:_ce},{name:"ArrayNode",test:wce},{name:"AssignmentNode",test:bce},{name:"BlockNode",test:xce},{name:"ConditionalNode",test:Sce},{name:"ConstantNode",test:Ace},{name:"FunctionNode",test:Cce},{name:"FunctionAssignmentNode",test:Ece},{name:"IndexNode",test:Mce},{name:"Node",test:Dce},{name:"ObjectNode",test:Tce},{name:"OperatorNode",test:Pce},{name:"ParenthesisNode",test:Lce},{name:"RangeNode",test:Fce},{name:"RelationalNode",test:Ice},{name:"SymbolNode",test:kce},{name:"Map",test:cfe},{name:"Object",test:mce}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(n||LS(l),$ce(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new n(l)}},{from:"number",to:"Complex",convert:function(l){return r||cy(l),new r(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return r||cy(l),new r(l.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||cy(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){s||FS(l);var u=new s(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){n||LS(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(l){s||FS(l);try{return new s(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||cy(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return n||LS(l),new n(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return s||FS(l),new s(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return i||dfe(),new i(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(a,l,u)=>{var c=o.createError(a,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&G1(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,l,u)=>{var c=o.createError(a,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&G1(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function LS(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function cy(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function dfe(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function FS(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Ph=9e15,rc=1e9,IE="0123456789abcdef",W1="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",$1="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",kE={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Ph,maxE:Ph,crypto:!1},bz,al,xt=!0,rw="[DecimalError] ",Hu=rw+"Invalid argument: ",xz=rw+"Precision limit exceeded",Sz=rw+"crypto unavailable",Az="[object Decimal]",Di=Math.floor,Fr=Math.pow,pfe=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,gfe=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,mfe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ez=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ko=1e7,vt=7,vfe=9007199254740991,yfe=W1.length-1,RE=$1.length-1,Be={toStringTag:Az};Be.absoluteValue=Be.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),ht(t)};Be.ceil=function(){return ht(new this.constructor(this),this.e+1,2)};Be.clampedTo=Be.clamp=function(t,e){var n,r=this,i=r.constructor;if(t=new i(t),e=new i(e),!t.s||!e.s)return new i(NaN);if(t.gt(e))throw Error(Hu+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new i(r)};Be.comparedTo=Be.cmp=function(t){var e,n,r,i,s=this,o=s.d,a=(t=new s.constructor(t)).d,l=s.s,u=t.s;if(!o||!a)return!l||!u?NaN:l!==u?l:o===a?0:!o^l<0?1:-1;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(s.e!==t.e)return s.e>t.e^l<0?1:-1;for(r=o.length,i=a.length,e=0,n=r<i?r:i;e<n;++e)if(o[e]!==a[e])return o[e]>a[e]^l<0?1:-1;return r===i?0:r>i^l<0?1:-1};Be.cosine=Be.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+vt,r.rounding=1,n=_fe(r,Pz(r,n)),r.precision=t,r.rounding=e,ht(al==2||al==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};Be.cubeRoot=Be.cbrt=function(){var t,e,n,r,i,s,o,a,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(xt=!1,s=c.s*Fr(c.s*c,1/3),!s||Math.abs(s)==1/0?(n=ui(c.d),t=c.e,(s=(t-n.length+1)%3)&&(n+=s==1||s==-2?"0":"00"),s=Fr(n,1/3),t=Di((t+1)/3)-(t%3==(t<0?-1:2)),s==1/0?n="5e"+t:(n=s.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new f(n),r.s=c.s):r=new f(s.toString()),o=(t=f.precision)+3;;)if(a=r,l=a.times(a).times(a),u=l.plus(c),r=An(u.plus(c).times(a),u.plus(l),o+2,1),ui(a.d).slice(0,o)===(n=ui(r.d)).slice(0,o))if(n=n.slice(o-3,o+1),n=="9999"||!i&&n=="4999"){if(!i&&(ht(a,t+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(ht(r,t+1,1),e=!r.times(r).times(r).eq(c));break}return xt=!0,ht(r,t,f.rounding,e)};Be.decimalPlaces=Be.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Di(this.e/vt))*vt,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};Be.dividedBy=Be.div=function(t){return An(this,new this.constructor(t))};Be.dividedToIntegerBy=Be.divToInt=function(t){var e=this,n=e.constructor;return ht(An(e,new n(t),0,1,1),n.precision,n.rounding)};Be.equals=Be.eq=function(t){return this.cmp(t)===0};Be.floor=function(){return ht(new this.constructor(this),this.e+1,3)};Be.greaterThan=Be.gt=function(t){return this.cmp(t)>0};Be.greaterThanOrEqualTo=Be.gte=function(t){var e=this.cmp(t);return e==1||e===0};Be.hyperbolicCosine=Be.cosh=function(){var t,e,n,r,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(t=Math.ceil(i/3),e=(1/sw(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),s=_d(o,1,s.times(e),new o(1),!0);for(var l,u=t,c=new o(8);u--;)l=s.times(s),s=a.minus(l.times(c.minus(l.times(c))));return ht(s,o.precision=n,o.rounding=r,!0)};Be.hyperbolicSine=Be.sinh=function(){var t,e,n,r,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,n=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,r=i.d.length,r<3)i=_d(s,2,i,i,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,i=i.times(1/sw(5,t)),i=_d(s,2,i,i,!0);for(var o,a=new s(5),l=new s(16),u=new s(20);t--;)o=i.times(i),i=i.times(a.plus(o.times(l.times(o).plus(u))))}return s.precision=e,s.rounding=n,ht(i,e,n,!0)};Be.hyperbolicTangent=Be.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,An(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};Be.inverseCosine=Be.acos=function(){var t,e=this,n=e.constructor,r=e.abs().cmp(1),i=n.precision,s=n.rounding;return r!==-1?r===0?e.isNeg()?Co(n,i,s):new n(0):new n(NaN):e.isZero()?Co(n,i+4,s).times(.5):(n.precision=i+6,n.rounding=1,e=e.asin(),t=Co(n,i+4,s).times(.5),n.precision=i,n.rounding=s,t.minus(e))};Be.inverseHyperbolicCosine=Be.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,xt=!1,n=n.times(n).minus(1).sqrt().plus(n),xt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};Be.inverseHyperbolicSine=Be.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,xt=!1,n=n.times(n).plus(1).sqrt().plus(n),xt=!0,r.precision=t,r.rounding=e,n.ln())};Be.inverseHyperbolicTangent=Be.atanh=function(){var t,e,n,r,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(t=s.precision,e=s.rounding,r=i.sd(),Math.max(r,t)<2*-i.e-1?ht(new s(i),t,e,!0):(s.precision=n=r-i.e,i=An(i.plus(1),new s(1).minus(i),n+t,1),s.precision=t+4,s.rounding=1,i=i.ln(),s.precision=t,s.rounding=e,i.times(.5))):new s(NaN)};Be.inverseSine=Be.asin=function(){var t,e,n,r,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),n=s.precision,r=s.rounding,e!==-1?e===0?(t=Co(s,n+4,r).times(.5),t.s=i.s,t):new s(NaN):(s.precision=n+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=n,s.rounding=r,i.times(2)))};Be.inverseTangent=Be.atan=function(){var t,e,n,r,i,s,o,a,l,u=this,c=u.constructor,f=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=RE)return o=Co(c,f+4,h).times(.25),o.s=u.s,o}else{if(!u.s)return new c(NaN);if(f+4<=RE)return o=Co(c,f+4,h).times(.5),o.s=u.s,o}for(c.precision=a=f+10,c.rounding=1,n=Math.min(28,a/vt+2|0),t=n;t;--t)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(xt=!1,e=Math.ceil(a/vt),r=1,l=u.times(u),o=new c(u),i=u;t!==-1;)if(i=i.times(l),s=o.minus(i.div(r+=2)),i=i.times(l),o=s.plus(i.div(r+=2)),o.d[e]!==void 0)for(t=e;o.d[t]===s.d[t]&&t--;);return n&&(o=o.times(2<<n-1)),xt=!0,ht(o,c.precision=f,c.rounding=h,!0)};Be.isFinite=function(){return!!this.d};Be.isInteger=Be.isInt=function(){return!!this.d&&Di(this.e/vt)>this.d.length-2};Be.isNaN=function(){return!this.s};Be.isNegative=Be.isNeg=function(){return this.s<0};Be.isPositive=Be.isPos=function(){return this.s>0};Be.isZero=function(){return!!this.d&&this.d[0]===0};Be.lessThan=Be.lt=function(t){return this.cmp(t)<0};Be.lessThanOrEqualTo=Be.lte=function(t){return this.cmp(t)<1};Be.logarithm=Be.log=function(t){var e,n,r,i,s,o,a,l,u=this,c=u.constructor,f=c.precision,h=c.rounding,d=5;if(t==null)t=new c(10),e=!0;else{if(t=new c(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new c(NaN);e=t.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:u.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)s=!0;else{for(i=n[0];i%10===0;)i/=10;s=i!==1}if(xt=!1,a=f+d,o=yu(u,a),r=e?X1(c,a+10):yu(t,a),l=An(o,r,a,1),Cm(l.d,i=f,h))do if(a+=10,o=yu(u,a),r=e?X1(c,a+10):yu(t,a),l=An(o,r,a,1),!s){+ui(l.d).slice(i+1,i+15)+1==1e14&&(l=ht(l,f+1,0));break}while(Cm(l.d,i+=10,h));return xt=!0,ht(l,f,h)};Be.minus=Be.sub=function(t){var e,n,r,i,s,o,a,l,u,c,f,h,d=this,p=d.constructor;if(t=new p(t),!d.d||!t.d)return!d.s||!t.s?t=new p(NaN):d.d?t.s=-t.s:t=new p(t.d||d.s!==t.s?d:NaN),t;if(d.s!=t.s)return t.s=-t.s,d.plus(t);if(u=d.d,h=t.d,a=p.precision,l=p.rounding,!u[0]||!h[0]){if(h[0])t.s=-t.s;else if(u[0])t=new p(d);else return new p(l===3?-0:0);return xt?ht(t,a,l):t}if(n=Di(t.e/vt),c=Di(d.e/vt),u=u.slice(),s=c-n,s){for(f=s<0,f?(e=u,s=-s,o=h.length):(e=h,n=c,o=u.length),r=Math.max(Math.ceil(a/vt),o)+2,s>r&&(s=r,e.length=1),e.reverse(),r=s;r--;)e.push(0);e.reverse()}else{for(r=u.length,o=h.length,f=r<o,f&&(o=r),r=0;r<o;r++)if(u[r]!=h[r]){f=u[r]<h[r];break}s=0}for(f&&(e=u,u=h,h=e,t.s=-t.s),o=u.length,r=h.length-o;r>0;--r)u[o++]=0;for(r=h.length;r>s;){if(u[--r]<h[r]){for(i=r;i&&u[--i]===0;)u[i]=ko-1;--u[i],u[r]+=ko}u[r]-=h[r]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--n;return u[0]?(t.d=u,t.e=iw(u,n),xt?ht(t,a,l):t):new p(l===3?-0:0)};Be.modulo=Be.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?ht(new r(n),r.precision,r.rounding):(xt=!1,r.modulo==9?(e=An(n,t.abs(),0,3,1),e.s*=t.s):e=An(n,t,0,r.modulo,1),e=e.times(t),xt=!0,n.minus(e))};Be.naturalExponential=Be.exp=function(){return OE(this)};Be.naturalLogarithm=Be.ln=function(){return yu(this)};Be.negated=Be.neg=function(){var t=new this.constructor(this);return t.s=-t.s,ht(t)};Be.plus=Be.add=function(t){var e,n,r,i,s,o,a,l,u,c,f=this,h=f.constructor;if(t=new h(t),!f.d||!t.d)return!f.s||!t.s?t=new h(NaN):f.d||(t=new h(t.d||f.s===t.s?f:NaN)),t;if(f.s!=t.s)return t.s=-t.s,f.minus(t);if(u=f.d,c=t.d,a=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(t=new h(f)),xt?ht(t,a,l):t;if(s=Di(f.e/vt),r=Di(t.e/vt),u=u.slice(),i=s-r,i){for(i<0?(n=u,i=-i,o=c.length):(n=c,r=s,o=u.length),s=Math.ceil(a/vt),o=s>o?s+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=u.length,i=c.length,o-i<0&&(i=o,n=c,c=u,u=n),e=0;i;)e=(u[--i]=u[i]+c[i]+e)/ko|0,u[i]%=ko;for(e&&(u.unshift(e),++r),o=u.length;u[--o]==0;)u.pop();return t.d=u,t.e=iw(u,r),xt?ht(t,a,l):t};Be.precision=Be.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Hu+t);return n.d?(e=Cz(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};Be.round=function(){var t=this,e=t.constructor;return ht(new e(t),t.e+1,e.rounding)};Be.sine=Be.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+vt,r.rounding=1,n=bfe(r,Pz(r,n)),r.precision=t,r.rounding=e,ht(al>2?n.neg():n,t,e,!0)):new r(NaN)};Be.squareRoot=Be.sqrt=function(){var t,e,n,r,i,s,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(u!==1||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(xt=!1,u=Math.sqrt(+o),u==0||u==1/0?(e=ui(a),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=Di((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new c(e)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(s=r,r=s.plus(An(o,s,n+2,1)).times(.5),ui(s.d).slice(0,n)===(e=ui(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!i&&e=="4999"){if(!i&&(ht(s,l+1,0),s.times(s).eq(o))){r=s;break}n+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(ht(r,l+1,1),t=!r.times(r).eq(o));break}return xt=!0,ht(r,l,c.rounding,t)};Be.tangent=Be.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=An(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,ht(al==2||al==4?n.neg():n,t,e,!0)):new r(NaN)};Be.times=Be.mul=function(t){var e,n,r,i,s,o,a,l,u,c=this,f=c.constructor,h=c.d,d=(t=new f(t)).d;if(t.s*=c.s,!h||!h[0]||!d||!d[0])return new f(!t.s||h&&!h[0]&&!d||d&&!d[0]&&!h?NaN:!h||!d?t.s/0:t.s*0);for(n=Di(c.e/vt)+Di(t.e/vt),l=h.length,u=d.length,l<u&&(s=h,h=d,d=s,o=l,l=u,u=o),s=[],o=l+u,r=o;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=l+r;i>r;)a=s[i]+d[r]*h[i-r-1]+e,s[i--]=a%ko|0,e=a/ko|0;s[i]=(s[i]+e)%ko|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=iw(s,n),xt?ht(t,f.precision,f.rounding):t};Be.toBinary=function(t,e){return k2(this,2,t,e)};Be.toDecimalPlaces=Be.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(ps(t,0,rc),e===void 0?e=r.rounding:ps(e,0,8),ht(n,t+n.e+1,e))};Be.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fa(r,!0):(ps(t,0,rc),e===void 0?e=i.rounding:ps(e,0,8),r=ht(new i(r),t+1,e),n=Fa(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};Be.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?n=Fa(i):(ps(t,0,rc),e===void 0?e=s.rounding:ps(e,0,8),r=ht(new s(i),t+i.e+1,e),n=Fa(r,!1,t+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n};Be.toFraction=function(t){var e,n,r,i,s,o,a,l,u,c,f,h,d=this,p=d.d,g=d.constructor;if(!p)return new g(d);if(u=n=new g(1),r=l=new g(0),e=new g(r),s=e.e=Cz(p)-d.e-1,o=s%vt,e.d[0]=Fr(10,o<0?vt+o:o),t==null)t=s>0?e:u;else{if(a=new g(t),!a.isInt()||a.lt(u))throw Error(Hu+a);t=a.gt(e)?s>0?e:u:a}for(xt=!1,a=new g(ui(p)),c=g.precision,g.precision=s=p.length*vt*2;f=An(a,e,0,1,1),i=n.plus(f.times(r)),i.cmp(t)!=1;)n=r,r=i,i=u,u=l.plus(f.times(i)),l=i,i=e,e=a.minus(f.times(i)),a=i;return i=An(t.minus(n),r,0,1,1),l=l.plus(i.times(u)),n=n.plus(i.times(r)),l.s=u.s=d.s,h=An(u,r,s,1).minus(d).abs().cmp(An(l,n,s,1).minus(d).abs())<1?[u,r]:[l,n],g.precision=c,xt=!0,h};Be.toHexadecimal=Be.toHex=function(t,e){return k2(this,16,t,e)};Be.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:ps(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(xt=!1,n=An(n,t,0,e,1).times(t),xt=!0,ht(n)):(t.s=n.s,n=t),n};Be.toNumber=function(){return+this};Be.toOctal=function(t,e){return k2(this,8,t,e)};Be.toPower=Be.pow=function(t){var e,n,r,i,s,o,a=this,l=a.constructor,u=+(t=new l(t));if(!a.d||!t.d||!a.d[0]||!t.d[0])return new l(Fr(+a,u));if(a=new l(a),a.eq(1))return a;if(r=l.precision,s=l.rounding,t.eq(1))return ht(a,r,s);if(e=Di(t.e/vt),e>=t.d.length-1&&(n=u<0?-u:u)<=vfe)return i=Mz(l,a,n,r),t.s<0?new l(1).div(i):ht(i,r,s);if(o=a.s,o<0){if(e<t.d.length-1)return new l(NaN);if((t.d[e]&1)==0&&(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return n=Fr(+a,u),e=n==0||!isFinite(n)?Di(u*(Math.log("0."+ui(a.d))/Math.LN10+a.e+1)):new l(n+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(xt=!1,l.rounding=a.s=1,n=Math.min(12,(e+"").length),i=OE(t.times(yu(a,r+n)),r),i.d&&(i=ht(i,r+5,1),Cm(i.d,r,s)&&(e=r+10,i=ht(OE(t.times(yu(a,e+n)),e),e+5,1),+ui(i.d).slice(r+1,r+15)+1==1e14&&(i=ht(i,r+1,0)))),i.s=o,xt=!0,l.rounding=s,ht(i,r,s))};Be.toPrecision=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fa(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(ps(t,1,rc),e===void 0?e=i.rounding:ps(e,0,8),r=ht(new i(r),t,e),n=Fa(r,t<=r.e||r.e<=i.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};Be.toSignificantDigits=Be.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(ps(t,1,rc),e===void 0?e=r.rounding:ps(e,0,8)),ht(new r(n),t,e)};Be.toString=function(){var t=this,e=t.constructor,n=Fa(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};Be.truncated=Be.trunc=function(){return ht(new this.constructor(this),this.e+1,1)};Be.valueOf=Be.toJSON=function(){var t=this,e=t.constructor,n=Fa(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function ui(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=vt-r.length,n&&(s+=iu(n)),s+=r;o=t[e],r=o+"",n=vt-r.length,n&&(s+=iu(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function ps(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Hu+t)}function Cm(t,e,n,r){var i,s,o,a;for(s=t[0];s>=10;s/=10)--e;return--e<0?(e+=vt,i=0):(i=Math.ceil((e+1)/vt),e%=vt),s=Fr(10,vt-e),a=t[i]%s|0,r==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=n<4&&a==99999||n>3&&a==49999||a==5e4||a==0):o=(n<4&&a+1==s||n>3&&a+1==s/2)&&(t[i+1]/s/100|0)==Fr(10,e-2)-1||(a==s/2||a==0)&&(t[i+1]/s/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(r||n<4)&&a==9999||!r&&n>3&&a==4999):o=((r||n<4)&&a+1==s||!r&&n>3&&a+1==s/2)&&(t[i+1]/s/1e3|0)==Fr(10,e-3)-1,o}function Yy(t,e,n){for(var r,i=[0],s,o=0,a=t.length;o<a;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=IE.indexOf(t.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(i[r+1]===void 0&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}function _fe(t,e){var n,r,i;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),i=(1/sw(4,n)).toString()):(n=16,i="2.3283064365386962890625e-10"),t.precision+=n,e=_d(t,1,e.times(i),new t(1));for(var s=n;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return t.precision-=n,e}var An=function(){function t(r,i,s){var o,a=0,l=r.length;for(r=r.slice();l--;)o=r[l]*i+a,r[l]=o%s|0,a=o/s|0;return a&&r.unshift(a),r}function e(r,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(r[a]!=i[a]){l=r[a]>i[a]?1:-1;break}return l}function n(r,i,s,o){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*o+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o,a,l){var u,c,f,h,d,p,g,x,_,m,v,b,w,A,E,S,C,M,D,T,L=r.constructor,F=r.s==i.s?1:-1,k=r.d,I=i.d;if(!k||!k[0]||!I||!I[0])return new L(!r.s||!i.s||(k?I&&k[0]==I[0]:!I)?NaN:k&&k[0]==0||!I?F*0:F/0);for(l?(d=1,c=r.e-i.e):(l=ko,d=vt,c=Di(r.e/d)-Di(i.e/d)),D=I.length,C=k.length,_=new L(F),m=_.d=[],f=0;I[f]==(k[f]||0);f++);if(I[f]>(k[f]||0)&&c--,s==null?(A=s=L.precision,o=L.rounding):a?A=s+(r.e-i.e)+1:A=s,A<0)m.push(1),p=!0;else{if(A=A/d+2|0,f=0,D==1){for(h=0,I=I[0],A++;(f<C||h)&&A--;f++)E=h*l+(k[f]||0),m[f]=E/I|0,h=E%I|0;p=h||f<C}else{for(h=l/(I[0]+1)|0,h>1&&(I=t(I,h,l),k=t(k,h,l),D=I.length,C=k.length),S=D,v=k.slice(0,D),b=v.length;b<D;)v[b++]=0;T=I.slice(),T.unshift(0),M=I[0],I[1]>=l/2&&++M;do h=0,u=e(I,v,D,b),u<0?(w=v[0],D!=b&&(w=w*l+(v[1]||0)),h=w/M|0,h>1?(h>=l&&(h=l-1),g=t(I,h,l),x=g.length,b=v.length,u=e(g,v,x,b),u==1&&(h--,n(g,D<x?T:I,x,l))):(h==0&&(u=h=1),g=I.slice()),x=g.length,x<b&&g.unshift(0),n(v,g,b,l),u==-1&&(b=v.length,u=e(I,v,D,b),u<1&&(h++,n(v,D<b?T:I,b,l))),b=v.length):u===0&&(h++,v=[0]),m[f++]=h,u&&v[0]?v[b++]=k[S]||0:(v=[k[S]],b=1);while((S++<C||v[0]!==void 0)&&A--);p=v[0]!==void 0}m[0]||m.shift()}if(d==1)_.e=c,bz=p;else{for(f=1,h=m[0];h>=10;h/=10)f++;_.e=f+c*d-1,ht(_,a?s+_.e+1:s,o,p)}return _}}();function ht(t,e,n,r){var i,s,o,a,l,u,c,f,h,d=t.constructor;e:if(e!=null){if(f=t.d,!f)return t;for(i=1,a=f[0];a>=10;a/=10)i++;if(s=e-i,s<0)s+=vt,o=e,c=f[h=0],l=c/Fr(10,i-o-1)%10|0;else if(h=Math.ceil((s+1)/vt),a=f.length,h>=a)if(r){for(;a++<=h;)f.push(0);c=l=0,i=1,s%=vt,o=s-vt+1}else break e;else{for(c=a=f[h],i=1;a>=10;a/=10)i++;s%=vt,o=s-vt+i,l=o<0?0:c/Fr(10,i-o-1)%10|0}if(r=r||e<0||f[h+1]!==void 0||(o<0?c:c%Fr(10,i-o-1)),u=n<4?(l||r)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||r||n==6&&(s>0?o>0?c/Fr(10,i-o):0:f[h-1])%10&1||n==(t.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=t.e+1,f[0]=Fr(10,(vt-e%vt)%vt),t.e=-e||0):f[0]=t.e=0,t;if(s==0?(f.length=h,a=1,h--):(f.length=h+1,a=Fr(10,vt-s),f[h]=o>0?(c/Fr(10,i-o)%Fr(10,o)|0)*a:0),u)for(;;)if(h==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(t.e++,f[0]==ko&&(f[0]=1));break}else{if(f[h]+=a,f[h]!=ko)break;f[h--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return xt&&(t.e>d.maxE?(t.d=null,t.e=NaN):t.e<d.minE&&(t.e=0,t.d=[0])),t}function Fa(t,e,n){if(!t.isFinite())return Tz(t);var r,i=t.e,s=ui(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+iu(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(t.e<0?"e":"e+")+t.e):i<0?(s="0."+iu(-i-1)+s,n&&(r=n-o)>0&&(s+=iu(r))):i>=o?(s+=iu(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+iu(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=iu(r))),s}function iw(t,e){var n=t[0];for(e*=vt;n>=10;n/=10)e++;return e}function X1(t,e,n){if(e>yfe)throw xt=!0,n&&(t.precision=n),Error(xz);return ht(new t(W1),e,1,!0)}function Co(t,e,n){if(e>RE)throw Error(xz);return ht(new t($1),e,n,!0)}function Cz(t){var e=t.length-1,n=e*vt+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function iu(t){for(var e="";t--;)e+="0";return e}function Mz(t,e,n,r){var i,s=new t(1),o=Math.ceil(r/vt+4);for(xt=!1;;){if(n%2&&(s=s.times(e),S3(s.d,o)&&(i=!0)),n=Di(n/2),n===0){n=s.d.length-1,i&&s.d[n]===0&&++s.d[n];break}e=e.times(e),S3(e.d,o)}return xt=!0,s}function x3(t){return t.d[t.d.length-1]&1}function Dz(t,e,n){for(var r,i=new t(e[0]),s=0;++s<e.length;)if(r=new t(e[s]),r.s)i[n](r)&&(i=r);else{i=r;break}return i}function OE(t,e){var n,r,i,s,o,a,l,u=0,c=0,f=0,h=t.constructor,d=h.rounding,p=h.precision;if(!t.d||!t.d[0]||t.e>17)return new h(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:0/0);for(e==null?(xt=!1,l=p):l=e,a=new h(.03125);t.e>-2;)t=t.times(a),f+=5;for(r=Math.log(Fr(2,f))/Math.LN10*2+5|0,l+=r,n=s=o=new h(1),h.precision=l;;){if(s=ht(s.times(t),l,1),n=n.times(++c),a=o.plus(An(s,n,l,1)),ui(a.d).slice(0,l)===ui(o.d).slice(0,l)){for(i=f;i--;)o=ht(o.times(o),l,1);if(e==null)if(u<3&&Cm(o.d,l-r,d,u))h.precision=l+=10,n=s=a=new h(1),c=0,u++;else return ht(o,h.precision=p,d,xt=!0);else return h.precision=p,o}o=a}}function yu(t,e){var n,r,i,s,o,a,l,u,c,f,h,d=1,p=10,g=t,x=g.d,_=g.constructor,m=_.rounding,v=_.precision;if(g.s<0||!x||!x[0]||!g.e&&x[0]==1&&x.length==1)return new _(x&&!x[0]?-1/0:g.s!=1?NaN:x?0:g);if(e==null?(xt=!1,c=v):c=e,_.precision=c+=p,n=ui(x),r=n.charAt(0),Math.abs(s=g.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=ui(g.d),r=n.charAt(0),d++;s=g.e,r>1?(g=new _("0."+n),s++):g=new _(r+"."+n.slice(1))}else return u=X1(_,c+2,v).times(s+""),g=yu(new _(r+"."+n.slice(1)),c-p).plus(u),_.precision=v,e==null?ht(g,v,m,xt=!0):g;for(f=g,l=o=g=An(g.minus(1),g.plus(1),c,1),h=ht(g.times(g),c,1),i=3;;){if(o=ht(o.times(h),c,1),u=l.plus(An(o,new _(i),c,1)),ui(u.d).slice(0,c)===ui(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(X1(_,c+2,v).times(s+""))),l=An(l,new _(d),c,1),e==null)if(Cm(l.d,c-p,m,a))_.precision=c+=p,u=o=g=An(f.minus(1),f.plus(1),c,1),h=ht(g.times(g),c,1),i=a=1;else return ht(l,_.precision=v,m,xt=!0);else return _.precision=v,l;l=u,i+=2}}function Tz(t){return String(t.s*t.s/0)}function BE(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(r,i),e){if(i-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%vt,n<0&&(r+=vt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=vt;r<i;)t.d.push(+e.slice(r,r+=vt));e=e.slice(r),r=vt-e.length}else r-=i;for(;r--;)e+="0";t.d.push(+e),xt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function wfe(t,e){var n,r,i,s,o,a,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Ez.test(e))return BE(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(gfe.test(e))n=16,e=e.toLowerCase();else if(pfe.test(e))n=2;else if(mfe.test(e))n=8;else throw Error(Hu+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,r=t.constructor,o&&(e=e.replace(".",""),a=e.length,s=a-s,i=Mz(r,new r(n),s,s*2)),u=Yy(e,n,ko),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new r(t.s*0):(t.e=iw(u,c),t.d=u,xt=!1,o&&(t=An(t,i,a*4)),l&&(t=t.times(Math.abs(l)<54?Fr(2,l):wd.pow(2,l))),xt=!0,t)}function bfe(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:_d(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/sw(5,n)),e=_d(t,2,e,e);for(var i,s=new t(5),o=new t(16),a=new t(20);n--;)i=e.times(e),e=e.times(s.plus(i.times(o.times(i).minus(a))));return e}function _d(t,e,n,r,i){var s,o,a,l,u=t.precision,c=Math.ceil(u/vt);for(xt=!1,l=n.times(n),a=new t(r);;){if(o=An(a.times(l),new t(e++*e++),u,1),a=i?r.plus(o):r.minus(o),r=An(o.times(l),new t(e++*e++),u,1),o=a.plus(r),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=r,r=o,o=s}return xt=!0,o.d.length=c+1,o}function sw(t,e){for(var n=t;--e;)n*=t;return n}function Pz(t,e){var n,r=e.s<0,i=Co(t,t.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return al=r?4:1,e;if(n=e.divToInt(i),n.isZero())al=r?3:2;else{if(e=e.minus(n.times(i)),e.lte(s))return al=x3(n)?r?2:3:r?4:1,e;al=x3(n)?r?1:4:r?3:2}return e.minus(i).abs()}function k2(t,e,n,r){var i,s,o,a,l,u,c,f,h,d=t.constructor,p=n!==void 0;if(p?(ps(n,1,rc),r===void 0?r=d.rounding:ps(r,0,8)):(n=d.precision,r=d.rounding),!t.isFinite())c=Tz(t);else{for(c=Fa(t),o=c.indexOf("."),p?(i=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):i=e,o>=0&&(c=c.replace(".",""),h=new d(1),h.e=c.length-o,h.d=Yy(Fa(h),10,i),h.e=h.d.length),f=Yy(c,10,i),s=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=p?"0p+0":"0";else{if(o<0?s--:(t=new d(t),t.d=f,t.e=s,t=An(t,h,n,r,0,i),f=t.d,s=t.e,u=bz),o=f[n],a=i/2,u=u||f[n+1]!==void 0,u=r<4?(o!==void 0||u)&&(r===0||r===(t.s<0?3:2)):o>a||o===a&&(r===4||u||r===6&&f[n-1]&1||r===(t.s<0?8:7)),f.length=n,u)for(;++f[--n]>i-1;)f[n]=0,n||(++s,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,c="";o<l;o++)c+=IE.charAt(f[o]);if(p){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(f=Yy(c,i,e),l=f.length;!f[l-1];--l);for(o=1,c="1.";o<l;o++)c+=IE.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return t.s<0?"-"+c:c}function S3(t,e){if(t.length>e)return t.length=e,!0}function xfe(t){return new this(t).abs()}function Sfe(t){return new this(t).acos()}function Afe(t){return new this(t).acosh()}function Efe(t,e){return new this(t).plus(e)}function Cfe(t){return new this(t).asin()}function Mfe(t){return new this(t).asinh()}function Dfe(t){return new this(t).atan()}function Tfe(t){return new this(t).atanh()}function Pfe(t,e){t=new this(t),e=new this(e);var n,r=this.precision,i=this.rounding,s=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=Co(this,s,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?Co(this,r,i):new this(0),n.s=t.s):!t.d||e.isZero()?(n=Co(this,s,1).times(.5),n.s=t.s):e.s<0?(this.precision=s,this.rounding=1,n=this.atan(An(t,e,s,1)),e=Co(this,s,1),this.precision=r,this.rounding=i,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(An(t,e,s,1)),n}function Lfe(t){return new this(t).cbrt()}function Ffe(t){return ht(t=new this(t),t.e+1,2)}function Ife(t,e,n){return new this(t).clamp(e,n)}function kfe(t){if(!t||typeof t!="object")throw Error(rw+"Object expected");var e,n,r,i=t.defaults===!0,s=["precision",1,rc,"rounding",0,8,"toExpNeg",-Ph,0,"toExpPos",0,Ph,"maxE",0,Ph,"minE",-Ph,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(n=s[e],i&&(this[n]=kE[n]),(r=t[n])!==void 0)if(Di(r)===r&&r>=s[e+1]&&r<=s[e+2])this[n]=r;else throw Error(Hu+n+": "+r);if(n="crypto",i&&(this[n]=kE[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Sz);else this[n]=!1;else throw Error(Hu+n+": "+r);return this}function Rfe(t){return new this(t).cos()}function Ofe(t){return new this(t).cosh()}function Lz(t){var e,n,r;function i(s){var o,a,l,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,A3(s)){u.s=s.s,xt?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;xt?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[s]):(u.e=o,u.d=[s]);return}else if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return BE(u,s.toString())}else if(l!=="string")throw Error(Hu+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(a===43&&(s=s.slice(1)),u.s=1),Ez.test(s)?BE(u,s):wfe(u,s)}if(i.prototype=Be,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=kfe,i.clone=Lz,i.isDecimal=A3,i.abs=xfe,i.acos=Sfe,i.acosh=Afe,i.add=Efe,i.asin=Cfe,i.asinh=Mfe,i.atan=Dfe,i.atanh=Tfe,i.atan2=Pfe,i.cbrt=Lfe,i.ceil=Ffe,i.clamp=Ife,i.cos=Rfe,i.cosh=Ofe,i.div=Bfe,i.exp=Nfe,i.floor=Vfe,i.hypot=zfe,i.ln=Gfe,i.log=Ufe,i.log10=Wfe,i.log2=Hfe,i.max=$fe,i.min=Xfe,i.mod=Yfe,i.mul=jfe,i.pow=qfe,i.random=Jfe,i.round=Kfe,i.sign=Zfe,i.sin=Qfe,i.sinh=ehe,i.sqrt=the,i.sub=nhe,i.sum=rhe,i.tan=ihe,i.tanh=she,i.trunc=ohe,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Bfe(t,e){return new this(t).div(e)}function Nfe(t){return new this(t).exp()}function Vfe(t){return ht(t=new this(t),t.e+1,3)}function zfe(){var t,e,n=new this(0);for(xt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return xt=!0,new this(1/0);n=e}return xt=!0,n.sqrt()}function A3(t){return t instanceof wd||t&&t.toStringTag===Az||!1}function Gfe(t){return new this(t).ln()}function Ufe(t,e){return new this(t).log(e)}function Hfe(t){return new this(t).log(2)}function Wfe(t){return new this(t).log(10)}function $fe(){return Dz(this,arguments,"lt")}function Xfe(){return Dz(this,arguments,"gt")}function Yfe(t,e){return new this(t).mod(e)}function jfe(t,e){return new this(t).mul(e)}function qfe(t,e){return new this(t).pow(e)}function Jfe(t){var e,n,r,i,s=0,o=new this(1),a=[];if(t===void 0?t=this.precision:ps(t,1,rc),r=Math.ceil(t/vt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));s<r;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);s<r;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(i%1e7),s+=4);s=r/4}else throw Error(Sz);else for(;s<r;)a[s++]=Math.random()*1e7|0;for(r=a[--s],t%=vt,r&&t&&(i=Fr(10,vt-t),a[s]=(r/i|0)*i);a[s]===0;s--)a.pop();if(s<0)n=0,a=[0];else{for(n=-1;a[0]===0;n-=vt)a.shift();for(r=1,i=a[0];i>=10;i/=10)r++;r<vt&&(n-=vt-r)}return o.e=n,o.d=a,o}function Kfe(t){return ht(t=new this(t),t.e+1,this.rounding)}function Zfe(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function Qfe(t){return new this(t).sin()}function ehe(t){return new this(t).sinh()}function the(t){return new this(t).sqrt()}function nhe(t,e){return new this(t).sub(e)}function rhe(){var t=0,e=arguments,n=new this(e[t]);for(xt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return xt=!0,ht(n,this.precision,this.rounding)}function ihe(t){return new this(t).tan()}function she(t){return new this(t).tanh()}function ohe(t){return ht(t=new this(t),t.e+1,1)}Be[Symbol.for("nodejs.util.inspect.custom")]=Be.toString;Be[Symbol.toStringTag]="Decimal";var wd=Be.constructor=Lz(kE);W1=new wd(W1);$1=new wd($1);var ahe="BigNumber",lhe=["?on","config"],uhe=St(ahe,lhe,t=>{var{on:e,config:n}=t,r=wd.clone({precision:n.precision,modulo:wd.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(i){return new r(i.value)},e&&e("config",function(i,s){i.precision!==s.precision&&r.config({precision:i.precision})}),r},{isClass:!0}),Fz={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},i=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},s=function(f){var h=Math.PI/4;if(-h>f||f>h)return Math.cos(f)-1;var d=f*f;return d*(d*(d*(d*(d*(d*(d*(d/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,h){var d=Math.abs(f),p=Math.abs(h);return d<3e3&&p<3e3?Math.sqrt(d*d+p*p):(d<p?(d=p,p=f/h):p=h/f,d*Math.sqrt(1+p*p))},a=function(){throw SyntaxError("Invalid Param")};function l(f,h){var d=Math.abs(f),p=Math.abs(h);return f===0?Math.log(p):h===0?Math.log(d):d<3e3&&p<3e3?Math.log(f*f+h*h)*.5:(f=f/2,h=h/2,.5*Math.log(f*f+h*h)+Math.LN2)}var u=function(f,h){var d={re:0,im:0};if(f==null)d.re=d.im=0;else if(h!==void 0)d.re=f,d.im=h;else switch(typeof f){case"object":if("im"in f&&"re"in f)d.re=f.re,d.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;d.re=f.abs*Math.cos(f.arg),d.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;d.re=f.r*Math.cos(f.phi),d.im=f.r*Math.sin(f.phi)}else f.length===2?(d.re=f[0],d.im=f[1]):a();break;case"string":d.im=d.re=0;var p=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),g=1,x=0;p===null&&a();for(var _=0;_<p.length;_++){var m=p[_];m===" "||m==="	"||m===`
`||(m==="+"?g++:m==="-"?x++:m==="i"||m==="I"?(g+x===0&&a(),p[_+1]!==" "&&!isNaN(p[_+1])?(d.im+=parseFloat((x%2?"-":"")+p[_+1]),_++):d.im+=parseFloat((x%2?"-":"")+"1"),g=x=0):((g+x===0||isNaN(m))&&a(),p[_+1]==="i"||p[_+1]==="I"?(d.im+=parseFloat((x%2?"-":"")+m),_++):d.re+=parseFloat((x%2?"-":"")+m),g=x=0))}g+x>0&&a();break;case"number":d.im=0,d.re=f;break;default:a()}return isNaN(d.re)||isNaN(d.im),d};function c(f,h){if(!(this instanceof c))return new c(f,h);var d=u(f,h);this.re=d.re,this.im=d.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:new c(this.re+d.re,this.im+d.im)},sub:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:new c(this.re-d.re,this.im-d.im)},mul:function(f,h){var d=new c(f,h);return this.isInfinite()&&d.isZero()||this.isZero()&&d.isInfinite()?c.NAN:this.isInfinite()||d.isInfinite()?c.INFINITY:d.im===0&&this.im===0?new c(this.re*d.re,0):new c(this.re*d.re-this.im*d.im,this.re*d.im+this.im*d.re)},div:function(f,h){var d=new c(f,h);if(this.isZero()&&d.isZero()||this.isInfinite()&&d.isInfinite())return c.NAN;if(this.isInfinite()||d.isZero())return c.INFINITY;if(this.isZero()||d.isInfinite())return c.ZERO;f=this.re,h=this.im;var p=d.re,g=d.im,x,_;return g===0?new c(f/p,h/p):Math.abs(p)<Math.abs(g)?(_=p/g,x=p*_+g,new c((f*_+h)/x,(h*_-f)/x)):(_=g/p,x=g*_+p,new c((f+h*_)/x,(h-f*_)/x))},pow:function(f,h){var d=new c(f,h);if(f=this.re,h=this.im,d.isZero())return c.ONE;if(d.im===0){if(h===0&&f>0)return new c(Math.pow(f,d.re),0);if(f===0)switch((d.re%4+4)%4){case 0:return new c(Math.pow(h,d.re),0);case 1:return new c(0,Math.pow(h,d.re));case 2:return new c(-Math.pow(h,d.re),0);case 3:return new c(0,-Math.pow(h,d.re))}}if(f===0&&h===0&&d.re>0&&d.im>=0)return c.ZERO;var p=Math.atan2(h,f),g=l(f,h);return f=Math.exp(d.re*g-d.im*p),h=d.im*g+d.re*p,new c(f*Math.cos(h),f*Math.sin(h))},sqrt:function(){var f=this.re,h=this.im,d=this.abs(),p,g;if(f>=0){if(h===0)return new c(Math.sqrt(f),0);p=.5*Math.sqrt(2*(d+f))}else p=Math.abs(h)/Math.sqrt(2*(d-f));return f<=0?g=.5*Math.sqrt(2*(d-f)):g=Math.abs(h)/Math.sqrt(2*(d+f)),new c(p,h<0?-g:g)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,h=this.im;return new c(Math.expm1(f)*Math.cos(h)+s(h),Math.exp(f)*Math.sin(h))},log:function(){var f=this.re,h=this.im;return new c(l(f,h),Math.atan2(h,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,h=this.im;return new c(Math.sin(f)*r(h),Math.cos(f)*i(h))},cos:function(){var f=this.re,h=this.im;return new c(Math.cos(f)*r(h),-Math.sin(f)*i(h))},tan:function(){var f=2*this.re,h=2*this.im,d=Math.cos(f)+r(h);return new c(Math.sin(f)/d,i(h)/d)},cot:function(){var f=2*this.re,h=2*this.im,d=Math.cos(f)-r(h);return new c(-Math.sin(f)/d,i(h)/d)},sec:function(){var f=this.re,h=this.im,d=.5*r(2*h)+.5*Math.cos(2*f);return new c(Math.cos(f)*r(h)/d,Math.sin(f)*i(h)/d)},csc:function(){var f=this.re,h=this.im,d=.5*r(2*h)-.5*Math.cos(2*f);return new c(Math.sin(f)*r(h)/d,-Math.cos(f)*i(h)/d)},asin:function(){var f=this.re,h=this.im,d=new c(h*h-f*f+1,-2*f*h).sqrt(),p=new c(d.re-h,d.im+f).log();return new c(p.im,-p.re)},acos:function(){var f=this.re,h=this.im,d=new c(h*h-f*f+1,-2*f*h).sqrt(),p=new c(d.re-h,d.im+f).log();return new c(Math.PI/2-p.im,p.re)},atan:function(){var f=this.re,h=this.im;if(f===0){if(h===1)return new c(0,1/0);if(h===-1)return new c(0,-1/0)}var d=f*f+(1-h)*(1-h),p=new c((1-h*h-f*f)/d,-2*f/d).log();return new c(-.5*p.im,.5*p.re)},acot:function(){var f=this.re,h=this.im;if(h===0)return new c(Math.atan2(1,f),0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).atan():new c(f!==0?f/0:0,h!==0?-h/0:0).atan()},asec:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,1/0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).acos():new c(f!==0?f/0:0,h!==0?-h/0:0).acos()},acsc:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(Math.PI/2,1/0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).asin():new c(f!==0?f/0:0,h!==0?-h/0:0).asin()},sinh:function(){var f=this.re,h=this.im;return new c(i(f)*Math.cos(h),r(f)*Math.sin(h))},cosh:function(){var f=this.re,h=this.im;return new c(r(f)*Math.cos(h),i(f)*Math.sin(h))},tanh:function(){var f=2*this.re,h=2*this.im,d=r(f)+Math.cos(h);return new c(i(f)/d,Math.sin(h)/d)},coth:function(){var f=2*this.re,h=2*this.im,d=r(f)-Math.cos(h);return new c(i(f)/d,-Math.sin(h)/d)},csch:function(){var f=this.re,h=this.im,d=Math.cos(2*h)-r(2*f);return new c(-2*i(f)*Math.cos(h)/d,2*r(f)*Math.sin(h)/d)},sech:function(){var f=this.re,h=this.im,d=Math.cos(2*h)+r(2*f);return new c(2*r(f)*Math.cos(h)/d,-2*i(f)*Math.sin(h)/d)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var h=this.asin();return this.re=-this.im,this.im=f,f=h.re,h.re=-h.im,h.im=f,h},acosh:function(){var f=this.acos();if(f.im<=0){var h=f.re;f.re=-f.im,f.im=h}else{var h=f.im;f.im=-f.re,f.re=h}return f},atanh:function(){var f=this.re,h=this.im,d=f>1&&h===0,p=1-f,g=1+f,x=p*p+h*h,_=x!==0?new c((g*p-h*h)/x,(h*p+g*h)/x):new c(f!==-1?f/0:0,h!==0?h/0:0),m=_.re;return _.re=l(_.re,_.im)/2,_.im=Math.atan2(_.im,m)/2,d&&(_.im=-_.im),_},acoth:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,Math.PI/2);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).atanh():new c(f!==0?f/0:0,h!==0?-h/0:0).atanh()},acsch:function(){var f=this.re,h=this.im;if(h===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var d=f*f+h*h;return d!==0?new c(f/d,-h/d).asinh():new c(f!==0?f/0:0,h!==0?-h/0:0).asinh()},asech:function(){var f=this.re,h=this.im;if(this.isZero())return c.INFINITY;var d=f*f+h*h;return d!==0?new c(f/d,-h/d).acosh():new c(f!==0?f/0:0,h!==0?-h/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,h=this.im,d=f*f+h*h;return new c(f/d,-h/d)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,h){var d=new c(f,h);return Math.abs(d.re-this.re)<=c.EPSILON&&Math.abs(d.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,h=this.im,d="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(h)<c.EPSILON&&(h=0),h===0?d+f:(f!==0?(d+=f,d+=" ",h<0?(h=-h,d+="-"):d+="+",d+=" "):h<0&&(h=-h,d+="-"),h!==1&&(d+=h),d+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,t.exports=c})()})(Fz);const ri=vN(Fz.exports);var che="Complex",fhe=[],hhe=St(che,fhe,()=>(Object.defineProperty(ri,"name",{value:"Complex"}),ri.prototype.constructor=ri,ri.prototype.type="Complex",ri.prototype.isComplex=!0,ri.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},ri.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},ri.prototype.format=function(t){var e="",n=this.im,r=this.re,i=PE(this.re,t),s=PE(this.im,t),o=jn(t)?t:t?t.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(r/n)<a&&(r=0),Math.abs(n/r)<a&&(n=0)}return n===0?e=i:r===0?n===1?e="i":n===-1?e="-i":e=s+"i":n<0?n===-1?e=i+" - i":e=i+" - "+s.substring(1)+"i":n===1?e=i+" + i":e=i+" + "+s+"i",e},ri.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return ri(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(jn(n)){if(cz(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),jn(r))return new ri({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},ri.prototype.valueOf=ri.prototype.toString,ri.fromJSON=function(t){return new ri(t)},ri.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},ri),{isClass:!0}),Iz={exports:{}};/**
 * @license Fraction.js v4.2.0 05/03/2022
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(t,e){(function(n){var r=2e3,i={s:1,n:0,d:1};function s(p,g){if(isNaN(p=parseInt(p,10)))throw d.InvalidParameter;return p*g}function o(p,g){if(g===0)throw d.DivisionByZero;var x=Object.create(d.prototype);x.s=p<0?-1:1,p=p<0?-p:p;var _=h(p,g);return x.n=p/_,x.d=g/_,x}function a(p){for(var g={},x=p,_=2,m=4;m<=x;){for(;x%_===0;)x/=_,g[_]=(g[_]||0)+1;m+=1+2*_++}return x!==p?x>1&&(g[x]=(g[x]||0)+1):g[p]=(g[p]||0)+1,g}var l=function(p,g){var x=0,_=1,m=1,v=0,b=0,w=0,A=1,E=1,S=0,C=1,M=1,D=1,T=1e7,L;if(p!=null)if(g!==void 0){if(x=p,_=g,m=x*_,x%1!==0||_%1!==0)throw d.NonIntegerParameter}else switch(typeof p){case"object":{if("d"in p&&"n"in p)x=p.n,_=p.d,"s"in p&&(x*=p.s);else if(0 in p)x=p[0],1 in p&&(_=p[1]);else throw d.InvalidParameter;m=x*_;break}case"number":{if(p<0&&(m=p,p=-p),p%1===0)x=p;else if(p>0){for(p>=1&&(E=Math.pow(10,Math.floor(1+Math.log(p)/Math.LN10)),p/=E);C<=T&&D<=T;)if(L=(S+M)/(C+D),p===L){C+D<=T?(x=S+M,_=C+D):D>C?(x=M,_=D):(x=S,_=C);break}else p>L?(S+=M,C+=D):(M+=S,D+=C),C>T?(x=M,_=D):(x=S,_=C);x*=E}else(isNaN(p)||isNaN(g))&&(_=x=NaN);break}case"string":{if(C=p.match(/\d+|./g),C===null)throw d.InvalidParameter;if(C[S]==="-"?(m=-1,S++):C[S]==="+"&&S++,C.length===S+1?b=s(C[S++],m):C[S+1]==="."||C[S]==="."?(C[S]!=="."&&(v=s(C[S++],m)),S++,(S+1===C.length||C[S+1]==="("&&C[S+3]===")"||C[S+1]==="'"&&C[S+3]==="'")&&(b=s(C[S],m),A=Math.pow(10,C[S].length),S++),(C[S]==="("&&C[S+2]===")"||C[S]==="'"&&C[S+2]==="'")&&(w=s(C[S+1],m),E=Math.pow(10,C[S+1].length)-1,S+=3)):C[S+1]==="/"||C[S+1]===":"?(b=s(C[S],m),A=s(C[S+2],1),S+=3):C[S+3]==="/"&&C[S+1]===" "&&(v=s(C[S],m),b=s(C[S+2],m),A=s(C[S+4],1),S+=5),C.length<=S){_=A*E,m=x=w+_*v+E*b;break}}default:throw d.InvalidParameter}if(_===0)throw d.DivisionByZero;i.s=m<0?-1:1,i.n=Math.abs(x),i.d=Math.abs(_)};function u(p,g,x){for(var _=1;g>0;p=p*p%x,g>>=1)g&1&&(_=_*p%x);return _}function c(p,g){for(;g%2===0;g/=2);for(;g%5===0;g/=5);if(g===1)return 0;for(var x=10%g,_=1;x!==1;_++)if(x=x*10%g,_>r)return 0;return _}function f(p,g,x){for(var _=1,m=u(10,x,g),v=0;v<300;v++){if(_===m)return v;_=_*10%g,m=m*10%g}return 0}function h(p,g){if(!p)return g;if(!g)return p;for(;;){if(p%=g,!p)return g;if(g%=p,!g)return p}}function d(p,g){if(l(p,g),this instanceof d)p=h(i.d,i.n),this.s=i.s,this.n=i.n/p,this.d=i.d/p;else return o(i.s*i.n,i.d)}d.DivisionByZero=new Error("Division by Zero"),d.InvalidParameter=new Error("Invalid argument"),d.NonIntegerParameter=new Error("Parameters must be integer"),d.prototype={s:1,n:0,d:1,abs:function(){return o(this.n,this.d)},neg:function(){return o(-this.s*this.n,this.d)},add:function(p,g){return l(p,g),o(this.s*this.n*i.d+i.s*this.d*i.n,this.d*i.d)},sub:function(p,g){return l(p,g),o(this.s*this.n*i.d-i.s*this.d*i.n,this.d*i.d)},mul:function(p,g){return l(p,g),o(this.s*i.s*this.n*i.n,this.d*i.d)},div:function(p,g){return l(p,g),o(this.s*i.s*this.n*i.d,this.d*i.n)},clone:function(){return o(this.s*this.n,this.d)},mod:function(p,g){if(isNaN(this.n)||isNaN(this.d))return new d(NaN);if(p===void 0)return o(this.s*this.n%this.d,1);if(l(p,g),i.n===0&&this.d===0)throw d.DivisionByZero;return o(this.s*(i.d*this.n)%(i.n*this.d),i.d*this.d)},gcd:function(p,g){return l(p,g),o(h(i.n,this.n)*h(i.d,this.d),i.d*this.d)},lcm:function(p,g){return l(p,g),i.n===0&&this.n===0?o(0,1):o(i.n*this.n,h(i.n,this.n)*h(i.d,this.d))},ceil:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.ceil(p*this.s*this.n/this.d),p)},floor:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.floor(p*this.s*this.n/this.d),p)},round:function(p){return p=Math.pow(10,p||0),isNaN(this.n)||isNaN(this.d)?new d(NaN):o(Math.round(p*this.s*this.n/this.d),p)},inverse:function(){return o(this.s*this.d,this.n)},pow:function(p,g){if(l(p,g),i.d===1)return i.s<0?o(Math.pow(this.s*this.d,i.n),Math.pow(this.n,i.n)):o(Math.pow(this.s*this.n,i.n),Math.pow(this.d,i.n));if(this.s<0)return null;var x=a(this.n),_=a(this.d),m=1,v=1;for(var b in x)if(b!=="1"){if(b==="0"){m=0;break}if(x[b]*=i.n,x[b]%i.d===0)x[b]/=i.d;else return null;m*=Math.pow(b,x[b])}for(var b in _)if(b!=="1"){if(_[b]*=i.n,_[b]%i.d===0)_[b]/=i.d;else return null;v*=Math.pow(b,_[b])}return i.s<0?o(v,m):o(m,v)},equals:function(p,g){return l(p,g),this.s*this.n*i.d===i.s*i.n*this.d},compare:function(p,g){l(p,g);var x=this.s*this.n*i.d-i.s*i.n*this.d;return(0<x)-(x<0)},simplify:function(p){if(isNaN(this.n)||isNaN(this.d))return this;p=p||.001;for(var g=this.abs(),x=g.toContinued(),_=1;_<x.length;_++){for(var m=o(x[_-1],1),v=_-2;v>=0;v--)m=m.inverse().add(x[v]);if(m.sub(g).abs().valueOf()<p)return m.mul(this.s)}return this},divisible:function(p,g){return l(p,g),!(!(i.n*this.d)||this.n*i.d%(i.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(p){var g,x="",_=this.n,m=this.d;return this.s<0&&(x+="-"),m===1?x+=_:(p&&(g=Math.floor(_/m))>0&&(x+=g,x+=" ",_%=m),x+=_,x+="/",x+=m),x},toLatex:function(p){var g,x="",_=this.n,m=this.d;return this.s<0&&(x+="-"),m===1?x+=_:(p&&(g=Math.floor(_/m))>0&&(x+=g,_%=m),x+="\\frac{",x+=_,x+="}{",x+=m,x+="}"),x},toContinued:function(){var p,g=this.n,x=this.d,_=[];if(isNaN(g)||isNaN(x))return _;do _.push(Math.floor(g/x)),p=g%x,g=x,x=p;while(g!==1);return _},toString:function(p){var g=this.n,x=this.d;if(isNaN(g)||isNaN(x))return"NaN";p=p||15;var _=c(g,x),m=f(g,x,_),v=this.s<0?"-":"";if(v+=g/x|0,g%=x,g*=10,g&&(v+="."),_){for(var b=m;b--;)v+=g/x|0,g%=x,g*=10;v+="(";for(var b=_;b--;)v+=g/x|0,g%=x,g*=10;v+=")"}else for(var b=p;g&&b--;)v+=g/x|0,g%=x,g*=10;return v}},Object.defineProperty(d,"__esModule",{value:!0}),d.default=d,d.Fraction=d,t.exports=d})()})(Iz);const qa=vN(Iz.exports);var dhe="Fraction",phe=[],ghe=St(dhe,phe,()=>(Object.defineProperty(qa,"name",{value:"Fraction"}),qa.prototype.constructor=qa,qa.prototype.type="Fraction",qa.prototype.isFraction=!0,qa.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},qa.fromJSON=function(t){return new qa(t)},qa),{isClass:!0}),mhe="Matrix",vhe=[],yhe=St(mhe,vhe,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function kz(t){return Object.keys(t.signatures||{}).reduce(function(e,n){var r=(n.match(/,/g)||[]).length+1;return Math.max(e,r)},-1)}var _he="DenseMatrix",whe=["Matrix"],bhe=St(_he,whe,t=>{var{Matrix:e}=t;function n(c,f){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!la(f))throw new Error("Invalid datatype: "+f);if(Gi(c))c.type==="DenseMatrix"?(this._data=$r(c._data),this._size=$r(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&$n(c.data)&&$n(c.size))this._data=c.data,this._size=c.size,w3(this._data,this._size),this._datatype=f||c.datatype;else if($n(c))this._data=u(c),this._size=Uu(this._data),w3(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Qh(c)+")");this._data=[],this._size=[0],this._datatype=f}}n.prototype=new e,n.prototype.createDenseMatrix=function(c,f){return new n(c,f)},Object.defineProperty(n,"name",{value:"DenseMatrix"}),n.prototype.constructor=n,n.prototype.type="DenseMatrix",n.prototype.isDenseMatrix=!0,n.prototype.getDataType=function(){return H1(this._data,Qh)},n.prototype.storage=function(){return"dense"},n.prototype.datatype=function(){return this._datatype},n.prototype.create=function(c,f){return new n(c,f)},n.prototype.subset=function(c,f,h){switch(arguments.length){case 1:return r(this,c);case 2:case 3:return s(this,c,f,h);default:throw new SyntaxError("Wrong number of arguments")}},n.prototype.get=function(c){if(!$n(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new an(c.length,this._size.length);for(var f=0;f<c.length;f++)Xn(c[f],this._size[f]);for(var h=this._data,d=0,p=c.length;d<p;d++){var g=c[d];Xn(g,h.length),h=h[g]}return h},n.prototype.set=function(c,f,h){if(!$n(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new an(c.length,this._size.length,"<");var d,p,g,x=c.map(function(m){return m+1});l(this,x,h);var _=this._data;for(d=0,p=c.length-1;d<p;d++)g=c[d],Xn(g,_.length),_=_[g];return g=c[c.length-1],Xn(g,_.length),_[g]=f,this};function r(c,f){if(!F2(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return c.get(f.min());var d=f.size();if(d.length!==c._size.length)throw new an(d.length,c._size.length);for(var p=f.min(),g=f.max(),x=0,_=c._size.length;x<_;x++)Xn(p[x],c._size[x]),Xn(g[x],c._size[x]);return new n(i(c._data,f,d.length,0),c._datatype)}function i(c,f,h,d){var p=d===h-1,g=f.dimension(d);return p?g.map(function(x){return Xn(x,c.length),c[x]}).valueOf():g.map(function(x){Xn(x,c.length);var _=c[x];return i(_,f,h,d+1)}).valueOf()}function s(c,f,h,d){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var p=f.size(),g=f.isScalar(),x;if(Gi(h)?(x=h.size(),h=h.valueOf()):x=Uu(h),g){if(x.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),h,d)}else{if(p.length<c._size.length)throw new an(p.length,c._size.length,"<");if(x.length<p.length){for(var _=0,m=0;p[_]===1&&x[_]===1;)_++;for(;p[_]===1;)m++,_++;h=mz(h,p.length,m,x)}if(!U1(p,x))throw new an(p,x,">");var v=f.max().map(function(A){return A+1});l(c,v,d);var b=p.length,w=0;o(c._data,f,h,b,w)}return c}function o(c,f,h,d,p){var g=p===d-1,x=f.dimension(p);g?x.forEach(function(_,m){Xn(_),c[_]=h[m[0]]}):x.forEach(function(_,m){Xn(_),o(c[_],f,h[m[0]],d,p+1)})}n.prototype.resize=function(c,f,h){if(!G1(c))throw new TypeError("Array or Matrix expected");var d=c.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g),p=h?this.clone():this;return a(p,d,f)};function a(c,f,h){if(f.length===0){for(var d=c._data;$n(d);)d=d[0];return d}return c._size=f.slice(0),c._data=b3(c._data,c._size,h),c}n.prototype.reshape=function(c,f){var h=f?this.clone():this;h._data=Zce(h._data,c);var d=h._size.reduce((p,g)=>p*g);return h._size=I2(c,d),h};function l(c,f,h){for(var d=c._size.slice(0),p=!1;d.length<f.length;)d.push(0),p=!0;for(var g=0,x=f.length;g<x;g++)f[g]>d[g]&&(d[g]=f[g],p=!0);p&&a(c,d,h)}n.prototype.clone=function(){var c=new n({data:$r(this._data),size:$r(this._size),datatype:this._datatype});return c},n.prototype.size=function(){return this._size.slice(0)},n.prototype.map=function(c){var f=this,h=kz(c),d=function x(_,m){return $n(_)?_.map(function(v,b){return x(v,m.concat(b))}):h===1?c(_):h===2?c(_,m):c(_,m,f)},p=d(this._data,[]),g=this._datatype!==void 0?H1(p,Qh):void 0;return new n(p,g)},n.prototype.forEach=function(c){var f=this,h=function d(p,g){$n(p)?p.forEach(function(x,_){d(x,g.concat(_))}):c(p,g,f)};h(this._data,[])},n.prototype[Symbol.iterator]=function*(){var c=function*f(h,d){if($n(h))for(var p=0;p<h.length;p++)yield*f(h[p],d.concat(p));else yield{value:h,index:d}};yield*c(this._data,[])},n.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var d of h)c.push(new n([d],this._datatype));return c},n.prototype.columns=function(){var c=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var d=this._data,p=function(_){var m=d.map(v=>[v[_]]);f.push(new n(m,c._datatype))},g=0;g<h[1];g++)p(g);return f},n.prototype.toArray=function(){return $r(this._data)},n.prototype.valueOf=function(){return this._data},n.prototype.format=function(c){return ns(this._data,c)},n.prototype.toString=function(){return ns(this._data)},n.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},n.prototype.diagonal=function(c){if(c){if(Ys(c)&&(c=c.toNumber()),!jn(c)||!Xr(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,h=c<0?-c:0,d=this._size[0],p=this._size[1],g=Math.min(d-h,p-f),x=[],_=0;_<g;_++)x[_]=this._data[_+h][_+f];return new n({data:x,size:[g],datatype:this._datatype})},n.diagonal=function(c,f,h,d){if(!$n(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(E){if(Ys(E)&&(E=E.toNumber()),!jn(E)||!Xr(E)||E<1)throw new Error("Size values must be positive integers");return E}),h){if(Ys(h)&&(h=h.toNumber()),!jn(h)||!Xr(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var p=h>0?h:0,g=h<0?-h:0,x=c[0],_=c[1],m=Math.min(x-g,_-p),v;if($n(f)){if(f.length!==m)throw new Error("Invalid value array length");v=function(S){return f[S]}}else if(Gi(f)){var b=f.size();if(b.length!==1||b[0]!==m)throw new Error("Invalid matrix length");v=function(S){return f.get([S])}}else v=function(){return f};d||(d=Ys(v(0))?v(0).mul(0):0);var w=[];if(c.length>0){w=b3(w,c,d);for(var A=0;A<m;A++)w[A+g][A+p]=v(A)}return new n({data:w,size:[x,_]})},n.fromJSON=function(c){return new n(c)},n.prototype.swapRows=function(c,f){if(!jn(c)||!Xr(c)||!jn(f)||!Xr(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Xn(c,this._size[0]),Xn(f,this._size[0]),n._swapRows(c,f,this._data),this},n._swapRows=function(c,f,h){var d=h[c];h[c]=h[f],h[f]=d};function u(c){for(var f=0,h=c.length;f<h;f++){var d=c[f];$n(d)?c[f]=u(d):d&&d.isMatrix===!0&&(c[f]=u(d.valueOf()))}return c}return n},{isClass:!0});function Ba(t,e,n){return t&&typeof t.map=="function"?t.map(function(r){return Ba(r,e)}):e(t)}var E3="isInteger",xhe=["typed"],She=St(E3,xhe,t=>{var{typed:e}=t;return e(E3,{number:Xr,BigNumber:function(r){return r.isInt()},Fraction:function(r){return r.d===1&&isFinite(r.n)},"Array | Matrix":e.referToSelf(n=>r=>Ba(r,n))})}),Rz="number",Oz="number, number";function Bz(t){return Math.abs(t)}Bz.signature=Rz;function Nz(t,e){return t+e}Nz.signature=Oz;function Vz(t,e){return t*e}Vz.signature=Oz;function zz(t){return-t}zz.signature=Rz;var Ahe="number";function Gz(t){return t===0}Gz.signature=Ahe;var C3="isNumeric",Ehe=["typed"],Che=St(C3,Ehe,t=>{var{typed:e}=t;return e(C3,{"number | BigNumber | Fraction | boolean":()=>!0,"Complex | Unit | string | null | undefined | Node":()=>!1,"Array | Matrix":e.referToSelf(n=>r=>Ba(r,n))})}),M3="isZero",Mhe=["typed"],Dhe=St(M3,Mhe,t=>{var{typed:e}=t;return e(M3,{number:Gz,BigNumber:function(r){return r.isZero()},Complex:function(r){return r.re===0&&r.im===0},Fraction:function(r){return r.d===1&&r.n===0},Unit:e.referToSelf(n=>r=>e.find(n,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(n=>r=>Ba(r,n))})});function Uz(t,e,n){if(n==null)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var r=t.minus(e).abs();if(r.isZero())return!0;var i=t.constructor.max(t.abs(),e.abs());return r.lte(i.times(n))}return!1}function The(t,e,n){return Em(t.re,e.re,n)&&Em(t.im,e.im,n)}var Hz=St("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(!r.equalBase(i))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),i.valueType()])(r.value,i.value)})}}),Y1="equalScalar",Phe=["typed","config"],Lhe=St(Y1,Phe,t=>{var{typed:e,config:n}=t,r=Hz({typed:e});return e(Y1,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return Em(s,o,n.epsilon)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||Uz(s,o,n.epsilon)},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return The(s,o,n.epsilon)}},r)});St(Y1,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Y1,{"number, number":function(i,s){return Em(i,s,n.epsilon)}})});var Fhe="SparseMatrix",Ihe=["typed","equalScalar","Matrix"],khe=St(Fhe,Ihe,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function i(g,x){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(x&&!la(x))throw new Error("Invalid datatype: "+x);if(Gi(g))s(this,g,x);else if(g&&$n(g.index)&&$n(g.ptr)&&$n(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=x||g.datatype;else if($n(g))o(this,g,x);else{if(g)throw new TypeError("Unsupported type of data ("+Qh(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=x}}function s(g,x,_){x.type==="SparseMatrix"?(g._values=x._values?$r(x._values):void 0,g._index=$r(x._index),g._ptr=$r(x._ptr),g._size=$r(x._size),g._datatype=_||x._datatype):o(g,x.valueOf(),_||x._datatype)}function o(g,x,_){g._values=[],g._index=[],g._ptr=[],g._datatype=_;var m=x.length,v=0,b=n,w=0;if(la(_)&&(b=e.find(n,[_,_])||n,w=e.convert(0,_)),m>0){var A=0;do{g._ptr.push(g._index.length);for(var E=0;E<m;E++){var S=x[E];if($n(S)){if(A===0&&v<S.length&&(v=S.length),A<S.length){var C=S[A];b(C,w)||(g._values.push(C),g._index.push(E))}}else A===0&&v<1&&(v=1),b(S,w)||(g._values.push(S),g._index.push(E))}A++}while(A<v)}g._ptr.push(g._index.length),g._size=[m,v]}i.prototype=new r,i.prototype.createSparseMatrix=function(g,x){return new i(g,x)},Object.defineProperty(i,"name",{value:"SparseMatrix"}),i.prototype.constructor=i,i.prototype.type="SparseMatrix",i.prototype.isSparseMatrix=!0,i.prototype.getDataType=function(){return H1(this._values,Qh)},i.prototype.storage=function(){return"sparse"},i.prototype.datatype=function(){return this._datatype},i.prototype.create=function(g,x){return new i(g,x)},i.prototype.density=function(){var g=this._size[0],x=this._size[1];return g!==0&&x!==0?this._index.length/(g*x):0},i.prototype.subset=function(g,x,_){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,g);case 2:case 3:return l(this,g,x,_);default:throw new SyntaxError("Wrong number of arguments")}};function a(g,x){if(!F2(x))throw new TypeError("Invalid index");var _=x.isScalar();if(_)return g.get(x.min());var m=x.size();if(m.length!==g._size.length)throw new an(m.length,g._size.length);var v,b,w,A,E=x.min(),S=x.max();for(v=0,b=g._size.length;v<b;v++)Xn(E[v],g._size[v]),Xn(S[v],g._size[v]);var C=g._values,M=g._index,D=g._ptr,T=x.dimension(0),L=x.dimension(1),F=[],k=[];T.forEach(function(N,W){k[N]=W[0],F[N]=!0});var I=C?[]:void 0,O=[],$=[];return L.forEach(function(N){for($.push(O.length),w=D[N],A=D[N+1];w<A;w++)v=M[w],F[v]===!0&&(O.push(k[v]),I&&I.push(C[w]))}),$.push(O.length),new i({values:I,index:O,ptr:$,size:m,datatype:g._datatype})}function l(g,x,_,m){if(!x||x.isIndex!==!0)throw new TypeError("Invalid index");var v=x.size(),b=x.isScalar(),w;if(Gi(_)?(w=_.size(),_=_.toArray()):w=Uu(_),b){if(w.length!==0)throw new TypeError("Scalar expected");g.set(x.min(),_,m)}else{if(v.length!==1&&v.length!==2)throw new an(v.length,g._size.length,"<");if(w.length<v.length){for(var A=0,E=0;v[A]===1&&w[A]===1;)A++;for(;v[A]===1;)E++,A++;_=mz(_,v.length,E,w)}if(!U1(v,w))throw new an(v,w,">");if(v.length===1){var S=x.dimension(0);S.forEach(function(D,T){Xn(D),g.set([D,0],_[T[0]],m)})}else{var C=x.dimension(0),M=x.dimension(1);C.forEach(function(D,T){Xn(D),M.forEach(function(L,F){Xn(L),g.set([D,L],_[T[0]][F[0]],m)})})}}return g}i.prototype.get=function(g){if(!$n(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new an(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var x=g[0],_=g[1];Xn(x,this._size[0]),Xn(_,this._size[1]);var m=u(x,this._ptr[_],this._ptr[_+1],this._index);return m<this._ptr[_+1]&&this._index[m]===x?this._values[m]:0},i.prototype.set=function(g,x,_){if(!$n(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new an(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var m=g[0],v=g[1],b=this._size[0],w=this._size[1],A=n,E=0;la(this._datatype)&&(A=e.find(n,[this._datatype,this._datatype])||n,E=e.convert(0,this._datatype)),(m>b-1||v>w-1)&&(h(this,Math.max(m+1,b),Math.max(v+1,w),_),b=this._size[0],w=this._size[1]),Xn(m,b),Xn(v,w);var S=u(m,this._ptr[v],this._ptr[v+1],this._index);return S<this._ptr[v+1]&&this._index[S]===m?A(x,E)?c(S,v,this._values,this._index,this._ptr):this._values[S]=x:A(x,E)||f(S,m,v,x,this._values,this._index,this._ptr),this};function u(g,x,_,m){if(_-x===0)return _;for(var v=x;v<_;v++)if(m[v]===g)return v;return x}function c(g,x,_,m,v){_.splice(g,1),m.splice(g,1);for(var b=x+1;b<v.length;b++)v[b]--}function f(g,x,_,m,v,b,w){v.splice(g,0,m),b.splice(g,0,x);for(var A=_+1;A<w.length;A++)w[A]++}i.prototype.resize=function(g,x,_){if(!G1(g))throw new TypeError("Array or Matrix expected");var m=g.valueOf().map(b=>Array.isArray(b)&&b.length===1?b[0]:b);if(m.length!==2)throw new Error("Only two dimensions matrix are supported");m.forEach(function(b){if(!jn(b)||!Xr(b)||b<0)throw new TypeError("Invalid size, must contain positive integers (size: "+ns(m)+")")});var v=_?this.clone():this;return h(v,m[0],m[1],x)};function h(g,x,_,m){var v=m||0,b=n,w=0;la(g._datatype)&&(b=e.find(n,[g._datatype,g._datatype])||n,w=e.convert(0,g._datatype),v=e.convert(v,g._datatype));var A=!b(v,w),E=g._size[0],S=g._size[1],C,M,D;if(_>S){for(M=S;M<_;M++)if(g._ptr[M]=g._values.length,A)for(C=0;C<E;C++)g._values.push(v),g._index.push(C);g._ptr[_]=g._values.length}else _<S&&(g._ptr.splice(_+1,S-_),g._values.splice(g._ptr[_],g._values.length),g._index.splice(g._ptr[_],g._index.length));if(S=_,x>E){if(A){var T=0;for(M=0;M<S;M++){g._ptr[M]=g._ptr[M]+T,D=g._ptr[M+1]+T;var L=0;for(C=E;C<x;C++,L++)g._values.splice(D+L,0,v),g._index.splice(D+L,0,C),T++}g._ptr[S]=g._values.length}}else if(x<E){var F=0;for(M=0;M<S;M++){g._ptr[M]=g._ptr[M]-F;var k=g._ptr[M],I=g._ptr[M+1]-F;for(D=k;D<I;D++)C=g._index[D],C>x-1&&(g._values.splice(D,1),g._index.splice(D,1),F++)}g._ptr[M]=g._values.length}return g._size[0]=x,g._size[1]=_,g}i.prototype.reshape=function(g,x){if(!$n(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(N){if(!jn(N)||!Xr(N)||N<=-2||N===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+ns(g)+")")});var _=this._size[0]*this._size[1];g=I2(g,_);var m=g[0]*g[1];if(_!==m)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var v=x?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return v;for(var b=[],w=0;w<v._ptr.length;w++)for(var A=0;A<v._ptr[w+1]-v._ptr[w];A++)b.push(w);for(var E=v._values.slice(),S=v._index.slice(),C=0;C<v._index.length;C++){var M=S[C],D=b[C],T=M*v._size[1]+D;b[C]=T%g[1],S[C]=Math.floor(T/g[1])}v._values.length=0,v._index.length=0,v._ptr.length=g[1]+1,v._size=g.slice();for(var L=0;L<v._ptr.length;L++)v._ptr[L]=0;for(var F=0;F<E.length;F++){var k=S[F],I=b[F],O=E[F],$=u(k,v._ptr[I],v._ptr[I+1],v._index);f($,k,I,O,v._values,v._index,v._ptr)}return v},i.prototype.clone=function(){var g=new i({values:this._values?$r(this._values):void 0,index:$r(this._index),ptr:$r(this._ptr),size:$r(this._size),datatype:this._datatype});return g},i.prototype.size=function(){return this._size.slice(0)},i.prototype.map=function(g,x){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var _=this,m=this._size[0],v=this._size[1],b=kz(g),w=function(E,S,C){return b===1?g(E):b===2?g(E,[S,C]):g(E,[S,C],_)};return d(this,0,m-1,0,v-1,w,x)};function d(g,x,_,m,v,b,w){var A=[],E=[],S=[],C=n,M=0;la(g._datatype)&&(C=e.find(n,[g._datatype,g._datatype])||n,M=e.convert(0,g._datatype));for(var D=function(ee,Z,J){ee=b(ee,Z,J),C(ee,M)||(A.push(ee),E.push(Z))},T=m;T<=v;T++){S.push(A.length);var L=g._ptr[T],F=g._ptr[T+1];if(w)for(var k=L;k<F;k++){var I=g._index[k];I>=x&&I<=_&&D(g._values[k],I-x,T-m)}else{for(var O={},$=L;$<F;$++){var N=g._index[$];O[N]=g._values[$]}for(var W=x;W<=_;W++){var H=W in O?O[W]:0;D(H,W-x,T-m)}}}return S.push(A.length),new i({values:A,index:E,ptr:S,size:[_-x+1,v-m+1]})}i.prototype.forEach=function(g,x){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var _=this,m=this._size[0],v=this._size[1],b=0;b<v;b++){var w=this._ptr[b],A=this._ptr[b+1];if(x)for(var E=w;E<A;E++){var S=this._index[E];g(this._values[E],[S,b],_)}else{for(var C={},M=w;M<A;M++){var D=this._index[M];C[D]=this._values[M]}for(var T=0;T<m;T++){var L=T in C?C[T]:0;g(L,[T,b],_)}}}},i.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],x=0;x<g;x++)for(var _=this._ptr[x],m=this._ptr[x+1],v=_;v<m;v++){var b=this._index[v];yield{value:this._values[v],index:[b,x]}}},i.prototype.toArray=function(){return p(this._values,this._index,this._ptr,this._size,!0)},i.prototype.valueOf=function(){return p(this._values,this._index,this._ptr,this._size,!1)};function p(g,x,_,m,v){var b=m[0],w=m[1],A=[],E,S;for(E=0;E<b;E++)for(A[E]=[],S=0;S<w;S++)A[E][S]=0;for(S=0;S<w;S++)for(var C=_[S],M=_[S+1],D=C;D<M;D++)E=x[D],A[E][S]=g?v?$r(g[D]):g[D]:1;return A}return i.prototype.format=function(g){for(var x=this._size[0],_=this._size[1],m=this.density(),v="Sparse Matrix ["+ns(x,g)+" x "+ns(_,g)+"] density: "+ns(m,g)+`
`,b=0;b<_;b++)for(var w=this._ptr[b],A=this._ptr[b+1],E=w;E<A;E++){var S=this._index[E];v+=`
    (`+ns(S,g)+", "+ns(b,g)+") ==> "+(this._values?ns(this._values[E],g):"X")}return v},i.prototype.toString=function(){return ns(this.toArray())},i.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},i.prototype.diagonal=function(g){if(g){if(Ys(g)&&(g=g.toNumber()),!jn(g)||!Xr(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var x=g>0?g:0,_=g<0?-g:0,m=this._size[0],v=this._size[1],b=Math.min(m-_,v-x),w=[],A=[],E=[];E[0]=0;for(var S=x;S<v&&w.length<b;S++)for(var C=this._ptr[S],M=this._ptr[S+1],D=C;D<M;D++){var T=this._index[D];if(T===S-x+_){w.push(this._values[D]),A[w.length-1]=T-_;break}}return E.push(w.length),new i({values:w,index:A,ptr:E,size:[b,1]})},i.fromJSON=function(g){return new i(g)},i.diagonal=function(g,x,_,m,v){if(!$n(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(N){if(Ys(N)&&(N=N.toNumber()),!jn(N)||!Xr(N)||N<1)throw new Error("Size values must be positive integers");return N}),_){if(Ys(_)&&(_=_.toNumber()),!jn(_)||!Xr(_))throw new TypeError("The parameter k must be an integer number")}else _=0;var b=n,w=0;la(v)&&(b=e.find(n,[v,v])||n,w=e.convert(0,v));var A=_>0?_:0,E=_<0?-_:0,S=g[0],C=g[1],M=Math.min(S-E,C-A),D;if($n(x)){if(x.length!==M)throw new Error("Invalid value array length");D=function(W){return x[W]}}else if(Gi(x)){var T=x.size();if(T.length!==1||T[0]!==M)throw new Error("Invalid matrix length");D=function(W){return x.get([W])}}else D=function(){return x};for(var L=[],F=[],k=[],I=0;I<C;I++){k.push(L.length);var O=I-A;if(O>=0&&O<M){var $=D(O);b($,w)||(F.push(O+E),L.push($))}}return k.push(L.length),new i({values:L,index:F,ptr:k,size:[S,C]})},i.prototype.swapRows=function(g,x){if(!jn(g)||!Xr(g)||!jn(x)||!Xr(x))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Xn(g,this._size[0]),Xn(x,this._size[0]),i._swapRows(g,x,this._size[1],this._values,this._index,this._ptr),this},i._forEachRow=function(g,x,_,m,v){for(var b=m[g],w=m[g+1],A=b;A<w;A++)v(_[A],x[A])},i._swapRows=function(g,x,_,m,v,b){for(var w=0;w<_;w++){var A=b[w],E=b[w+1],S=u(g,A,E,v),C=u(x,A,E,v);if(S<E&&C<E&&v[S]===g&&v[C]===x){if(m){var M=m[S];m[S]=m[C],m[C]=M}continue}if(S<E&&v[S]===g&&(C>=E||v[C]!==x)){var D=m?m[S]:void 0;v.splice(C,0,x),m&&m.splice(C,0,D),v.splice(C<=S?S+1:S,1),m&&m.splice(C<=S?S+1:S,1);continue}if(C<E&&v[C]===x&&(S>=E||v[S]!==g)){var T=m?m[C]:void 0;v.splice(S,0,g),m&&m.splice(S,0,T),v.splice(S<=C?C+1:C,1),m&&m.splice(S<=C?C+1:C,1)}}},i},{isClass:!0}),Rhe="number",Ohe=["typed"];function Bhe(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],i=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:i}}else return null}function Nhe(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var i=parseInt(t.fractionalPart[r],t.radix);n+=i/Math.pow(t.radix,r+1)}var s=e+n;if(isNaN(s))throw new SyntaxError('String "'+t.input+'" is no valid number');return s}var Vhe=St(Rhe,Ohe,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(i){return i},string:function(i){if(i==="NaN")return NaN;var s=Bhe(i);if(s)return Nhe(s);var o=0,a=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),i=a[1]);var l=Number(i);if(isNaN(l))throw new SyntaxError('String "'+i+'" is no valid number');if(a){if(l>2**o-1)throw new SyntaxError('String "'.concat(i,'" is out of range'));l>=2**(o-1)&&(l=l-2**o)}return l},BigNumber:function(i){return i.toNumber()},Fraction:function(i){return i.valueOf()},Unit:function(i){throw new Error("Second argument with valueless unit expected")},null:function(i){return 0},"Unit, string | Unit":function(i,s){return i.toNumber(s)},"Array | Matrix":e.referToSelf(r=>i=>Ba(i,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),zhe="bignumber",Ghe=["typed","BigNumber"],Uhe=St(zhe,Ghe,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(i){return new n(i+"")},string:function(i){var s=i.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=n(s[1]),l=new n(2).pow(Number(o));if(a.gt(l.sub(1)))throw new SyntaxError('String "'.concat(i,'" is out of range'));var u=new n(2).pow(Number(o)-1);return a.gte(u)?a.sub(l):a}return new n(i)},BigNumber:function(i){return i},Fraction:function(i){return new n(i.n).div(i.d).times(i.s)},null:function(i){return new n(0)},"Array | Matrix":e.referToSelf(r=>i=>Ba(i,r))})}),Hhe="fraction",Whe=["typed","Fraction"],$he=St(Hhe,Whe,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(i){if(!isFinite(i)||isNaN(i))throw new Error(i+" cannot be represented as a fraction");return new n(i)},string:function(i){return new n(i)},"number, number":function(i,s){return new n(i,s)},null:function(i){return new n(0)},BigNumber:function(i){return new n(i.toString())},Fraction:function(i){return i},Object:function(i){return new n(i)},"Array | Matrix":e.referToSelf(r=>i=>Ba(i,r))})}),D3="matrix",Xhe=["typed","Matrix","DenseMatrix","SparseMatrix"],Yhe=St(D3,Xhe,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:i}=t;return e(D3,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,l){return s([],a,l)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,l){if(a==="dense"||a==="default"||a===void 0)return new r(o,l);if(a==="sparse")return new i(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),T3="unaryMinus",jhe=["typed"],qhe=St(T3,jhe,t=>{var{typed:e}=t;return e(T3,{number:zz,"Complex | BigNumber | Fraction":n=>n.neg(),Unit:e.referToSelf(n=>r=>{var i=r.clone();return i.value=e.find(n,i.valueType())(r.value),i}),"Array | Matrix":e.referToSelf(n=>r=>Ba(r,n))})}),P3="abs",Jhe=["typed"],Khe=St(P3,Jhe,t=>{var{typed:e}=t;return e(P3,{number:Bz,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),"Array | Matrix":e.referToSelf(n=>r=>Ba(r,n))})}),L3="addScalar",Zhe=["typed"],Qhe=St(L3,Zhe,t=>{var{typed:e}=t;return e(L3,{"number, number":Nz,"Complex, Complex":function(r,i){return r.add(i)},"BigNumber, BigNumber":function(r,i){return r.plus(i)},"Fraction, Fraction":function(r,i){return r.add(i)},"Unit, Unit":e.referToSelf(n=>(r,i)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(i.value===null||i.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(i))throw new Error("Units do not match");var s=r.clone();return s.value=e.find(n,[s.valueType(),i.valueType()])(s.value,i.value),s.fixPrefix=!1,s})})}),ede="matAlgo11xS0s",tde=["typed","equalScalar"],nde=St(ede,tde,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,o,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],g,x=n,_=0,m=o;typeof h=="string"&&(g=h,x=e.find(n,[g,g]),_=e.convert(0,g),s=e.convert(s,g),m=e.find(o,[g,g]));for(var v=[],b=[],w=[],A=0;A<p;A++){w[A]=b.length;for(var E=c[A],S=c[A+1],C=E;C<S;C++){var M=u[C],D=a?m(s,l[C]):m(l[C],s);x(D,_)||(b.push(M),v.push(D))}}return w[p]=b.length,i.createSparseMatrix({values:v,index:b,ptr:w,size:[d,p],datatype:g})}}),rde="matAlgo12xSfs",ide=["typed","DenseMatrix"],Wz=St(rde,ide,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,s,o,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],g,x=o;typeof h=="string"&&(g=h,s=e.convert(s,g),x=e.find(o,[g,g]));for(var _=[],m=[],v=[],b=0;b<p;b++){for(var w=b+1,A=c[b],E=c[b+1],S=A;S<E;S++){var C=u[S];m[C]=l[S],v[C]=w}for(var M=0;M<d;M++)b===0&&(_[M]=[]),v[M]===w?_[M][b]=a?x(s,m[M]):x(m[M],s):_[M][b]=a?x(s,0):x(0,s)}return new n({data:_,size:[d,p],datatype:g})}}),sde="matAlgo14xDs",ode=["typed"],$z=St(sde,ode,t=>{var{typed:e}=t;return function(i,s,o,a){var l=i._data,u=i._size,c=i._datatype,f,h=o;typeof c=="string"&&(f=c,s=e.convert(s,f),h=e.find(o,[f,f]));var d=u.length>0?n(h,0,u,u[0],l,s,a):[];return i.createDenseMatrix({data:d,size:$r(u),datatype:f})};function n(r,i,s,o,a,l,u){var c=[];if(i===s.length-1)for(var f=0;f<o;f++)c[f]=u?r(l,a[f]):r(a[f],l);else for(var h=0;h<o;h++)c[h]=n(r,i+1,s,s[i+1],a[h],l,u);return c}}),ade="matAlgo01xDSid",lde=["typed"],Xz=St(ade,lde,t=>{var{typed:e}=t;return function(r,i,s,o){var a=r._data,l=r._size,u=r._datatype,c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype;if(l.length!==d.length)throw new an(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],x=l[1],_=typeof u=="string"&&u===p?u:void 0,m=_?e.find(s,[_,_]):s,v,b,w=[];for(v=0;v<g;v++)w[v]=[];var A=[],E=[];for(b=0;b<x;b++){for(var S=b+1,C=h[b],M=h[b+1],D=C;D<M;D++)v=f[D],A[v]=o?m(c[D],a[v][b]):m(a[v][b],c[D]),E[v]=S;for(v=0;v<g;v++)E[v]===S?w[v][b]=A[v]:w[v][b]=a[v][b]}return r.createDenseMatrix({data:w,size:[g,x],datatype:_})}}),ude="matAlgo04xSidSid",cde=["typed","equalScalar"],fde=St(ude,cde,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,o){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype,h=s._values,d=s._index,p=s._ptr,g=s._size,x=s._datatype;if(c.length!==g.length)throw new an(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var _=c[0],m=c[1],v,b=n,w=0,A=o;typeof f=="string"&&f===x&&(v=f,b=e.find(n,[v,v]),w=e.convert(0,v),A=e.find(o,[v,v]));var E=a&&h?[]:void 0,S=[],C=[],M=a&&h?[]:void 0,D=a&&h?[]:void 0,T=[],L=[],F,k,I,O,$;for(k=0;k<m;k++){C[k]=S.length;var N=k+1;for(O=u[k],$=u[k+1],I=O;I<$;I++)F=l[I],S.push(F),T[F]=N,M&&(M[F]=a[I]);for(O=p[k],$=p[k+1],I=O;I<$;I++)if(F=d[I],T[F]===N){if(M){var W=A(M[F],h[I]);b(W,w)?T[F]=null:M[F]=W}}else S.push(F),L[F]=N,D&&(D[F]=h[I]);if(M&&D)for(I=C[k];I<S.length;)F=S[I],T[F]===N?(E[I]=M[F],I++):L[F]===N?(E[I]=D[F],I++):S.splice(I,1)}return C[m]=S.length,i.createSparseMatrix({values:E,index:S,ptr:C,size:[_,m],datatype:v})}}),hde="matAlgo10xSids",dde=["typed","DenseMatrix"],Yz=St(hde,dde,t=>{var{typed:e,DenseMatrix:n}=t;return function(i,s,o,a){var l=i._values,u=i._index,c=i._ptr,f=i._size,h=i._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d=f[0],p=f[1],g,x=o;typeof h=="string"&&(g=h,s=e.convert(s,g),x=e.find(o,[g,g]));for(var _=[],m=[],v=[],b=0;b<p;b++){for(var w=b+1,A=c[b],E=c[b+1],S=A;S<E;S++){var C=u[S];m[C]=l[S],v[C]=w}for(var M=0;M<d;M++)b===0&&(_[M]=[]),v[M]===w?_[M][b]=a?x(s,m[M]):x(m[M],s):_[M][b]=s}return new n({data:_,size:[d,p],datatype:g})}}),pde="matAlgo13xDD",gde=["typed"],mde=St(pde,gde,t=>{var{typed:e}=t;return function(i,s,o){var a=i._data,l=i._size,u=i._datatype,c=s._data,f=s._size,h=s._datatype,d=[];if(l.length!==f.length)throw new an(l.length,f.length);for(var p=0;p<l.length;p++){if(l[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");d[p]=l[p]}var g,x=o;typeof u=="string"&&u===h&&(g=u,x=e.find(o,[g,g]));var _=d.length>0?n(x,0,d,d[0],a,c):[];return i.createDenseMatrix({data:_,size:d,datatype:g})};function n(r,i,s,o,a,l){var u=[];if(i===s.length-1)for(var c=0;c<o;c++)u[c]=r(a[c],l[c]);else for(var f=0;f<o;f++)u[f]=n(r,i+1,s,s[i+1],a[f],l[f]);return u}}),vde="broadcast",yde=["concat"],_de=St(vde,yde,t=>{var{concat:e}=t;return function(s,o){var a=Math.max(s._size.length,o._size.length);if(s._size.length===o._size.length&&s._size.every((x,_)=>x===o._size[_]))return[s,o];for(var l=n(s._size,a,0),u=n(o._size,a,0),c=[],f=0;f<a;f++)c[f]=Math.max(l[f],u[f]);for(var h=0;h<a;h++)i(l,c,h),i(u,c,h);var d=s.clone(),p=o.clone();d._size.length<a?d.reshape(n(d._size,a,1)):p._size.length<a&&p.reshape(n(p._size,a,1));for(var g=0;g<a;g++)d._size[g]<c[g]&&(d=r(d,c[g],g)),p._size[g]<c[g]&&(p=r(p,c[g],g));return[d,p]};function n(s,o,a){return[...Array(o-s.length).fill(a),...s]}function r(s,o,a){return e(...Array(o).fill(s),a)}function i(s,o,a){if(s[a]<o[a]&s[a]>1)throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(s,") not possible to broadcast dimension ").concat(a," with size ").concat(s[a]," to size ").concat(o[a]))}}),wde="matrixAlgorithmSuite",bde=["typed","matrix","concat"],R2=St(wde,bde,t=>{var{typed:e,matrix:n,concat:r}=t,i=mde({typed:e}),s=$z({typed:e}),o=_de({concat:r});return function(l){var u=l.elop,c=l.SD||l.DS,f;u?(f={"DenseMatrix, DenseMatrix":(g,x)=>i(...o(g,x),u),"Array, Array":(g,x)=>i(...o(n(g),n(x)),u).valueOf(),"Array, DenseMatrix":(g,x)=>i(...o(n(g),x),u),"DenseMatrix, Array":(g,x)=>i(...o(g,n(x)),u)},l.SS&&(f["SparseMatrix, SparseMatrix"]=(g,x)=>l.SS(...o(g,x),u,!1)),l.DS&&(f["DenseMatrix, SparseMatrix"]=(g,x)=>l.DS(...o(g,x),u,!1),f["Array, SparseMatrix"]=(g,x)=>l.DS(...o(n(g),x),u,!1)),c&&(f["SparseMatrix, DenseMatrix"]=(g,x)=>c(...o(x,g),u,!0),f["SparseMatrix, Array"]=(g,x)=>c(...o(n(x),g),u,!0))):(f={"DenseMatrix, DenseMatrix":e.referToSelf(g=>(x,_)=>i(...o(x,_),g)),"Array, Array":e.referToSelf(g=>(x,_)=>i(...o(n(x),n(_)),g).valueOf()),"Array, DenseMatrix":e.referToSelf(g=>(x,_)=>i(...o(n(x),_),g)),"DenseMatrix, Array":e.referToSelf(g=>(x,_)=>i(...o(x,n(_)),g))},l.SS&&(f["SparseMatrix, SparseMatrix"]=e.referToSelf(g=>(x,_)=>l.SS(...o(x,_),g,!1))),l.DS&&(f["DenseMatrix, SparseMatrix"]=e.referToSelf(g=>(x,_)=>l.DS(...o(x,_),g,!1)),f["Array, SparseMatrix"]=e.referToSelf(g=>(x,_)=>l.DS(...o(n(x),_),g,!1))),c&&(f["SparseMatrix, DenseMatrix"]=e.referToSelf(g=>(x,_)=>c(...o(_,x),g,!0)),f["SparseMatrix, Array"]=e.referToSelf(g=>(x,_)=>c(...o(n(_),x),g,!0))));var h=l.scalar||"any",d=l.Ds||l.Ss;d&&(u?(f["DenseMatrix,"+h]=(g,x)=>s(g,x,u,!1),f[h+", DenseMatrix"]=(g,x)=>s(x,g,u,!0),f["Array,"+h]=(g,x)=>s(n(g),x,u,!1).valueOf(),f[h+", Array"]=(g,x)=>s(n(x),g,u,!0).valueOf()):(f["DenseMatrix,"+h]=e.referToSelf(g=>(x,_)=>s(x,_,g,!1)),f[h+", DenseMatrix"]=e.referToSelf(g=>(x,_)=>s(_,x,g,!0)),f["Array,"+h]=e.referToSelf(g=>(x,_)=>s(n(x),_,g,!1).valueOf()),f[h+", Array"]=e.referToSelf(g=>(x,_)=>s(n(_),x,g,!0).valueOf())));var p=l.sS!==void 0?l.sS:l.Ss;return u?(l.Ss&&(f["SparseMatrix,"+h]=(g,x)=>l.Ss(g,x,u,!1)),p&&(f[h+", SparseMatrix"]=(g,x)=>p(x,g,u,!0))):(l.Ss&&(f["SparseMatrix,"+h]=e.referToSelf(g=>(x,_)=>l.Ss(x,_,g,!1))),p&&(f[h+", SparseMatrix"]=e.referToSelf(g=>(x,_)=>p(_,x,g,!0)))),u&&u.signatures&&Bce(f,u.signatures),f}}),xde="matAlgo03xDSf",Sde=["typed"],jz=St(xde,Sde,t=>{var{typed:e}=t;return function(r,i,s,o){var a=r._data,l=r._size,u=r._datatype,c=i._values,f=i._index,h=i._ptr,d=i._size,p=i._datatype;if(l.length!==d.length)throw new an(l.length,d.length);if(l[0]!==d[0]||l[1]!==d[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+d+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],x=l[1],_,m=0,v=s;typeof u=="string"&&u===p&&(_=u,m=e.convert(0,_),v=e.find(s,[_,_]));for(var b=[],w=0;w<g;w++)b[w]=[];for(var A=[],E=[],S=0;S<x;S++){for(var C=S+1,M=h[S],D=h[S+1],T=M;T<D;T++){var L=f[T];A[L]=o?v(c[T],a[L][S]):v(a[L][S],c[T]),E[L]=C}for(var F=0;F<g;F++)E[F]===C?b[F][S]=A[F]:b[F][S]=o?v(m,a[F][S]):v(a[F][S],m)}return r.createDenseMatrix({data:b,size:[g,x],datatype:_})}}),Ade="matAlgo05xSfSf",Ede=["typed","equalScalar"],Cde=St(Ade,Ede,t=>{var{typed:e,equalScalar:n}=t;return function(i,s,o){var a=i._values,l=i._index,u=i._ptr,c=i._size,f=i._datatype,h=s._values,d=s._index,p=s._ptr,g=s._size,x=s._datatype;if(c.length!==g.length)throw new an(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var _=c[0],m=c[1],v,b=n,w=0,A=o;typeof f=="string"&&f===x&&(v=f,b=e.find(n,[v,v]),w=e.convert(0,v),A=e.find(o,[v,v]));var E=a&&h?[]:void 0,S=[],C=[],M=E?[]:void 0,D=E?[]:void 0,T=[],L=[],F,k,I,O;for(k=0;k<m;k++){C[k]=S.length;var $=k+1;for(I=u[k],O=u[k+1];I<O;I++)F=l[I],S.push(F),T[F]=$,M&&(M[F]=a[I]);for(I=p[k],O=p[k+1];I<O;I++)F=d[I],T[F]!==$&&S.push(F),L[F]=$,D&&(D[F]=h[I]);if(E)for(I=C[k];I<S.length;){F=S[I];var N=T[F],W=L[F];if(N===$||W===$){var H=N===$?M[F]:w,K=W===$?D[F]:w,ee=A(H,K);b(ee,w)?S.splice(I,1):(E.push(ee),I++)}}}return C[m]=S.length,i.createSparseMatrix({values:E,index:S,ptr:C,size:[_,m],datatype:v})}}),Mde="multiplyScalar",Dde=["typed"],Tde=St(Mde,Dde,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":Vz,"Complex, Complex":function(r,i){return r.mul(i)},"BigNumber, BigNumber":function(r,i){return r.times(i)},"Fraction, Fraction":function(r,i){return r.mul(i)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),F3="multiply",Pde=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Lde=St(F3,Pde,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:i,equalScalar:s,dot:o}=t,a=nde({typed:e,equalScalar:s}),l=$z({typed:e});function u(w,A){switch(w.length){case 1:switch(A.length){case 1:if(w[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(w[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+w[0]+") must match Matrix rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;case 2:switch(A.length){case 1:if(w[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+w[1]+") must match Vector length ("+A[0]+")");break;case 2:if(w[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+w[1]+") must match Matrix B rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+w.length+" dimensions)")}}function c(w,A,E){if(E===0)throw new Error("Cannot multiply two empty vectors");return o(w,A)}function f(w,A){if(A.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(w,A)}function h(w,A){var E=w._data,S=w._size,C=w._datatype,M=A._data,D=A._size,T=A._datatype,L=S[0],F=D[1],k,I=r,O=i;C&&T&&C===T&&typeof C=="string"&&(k=C,I=e.find(r,[k,k]),O=e.find(i,[k,k]));for(var $=[],N=0;N<F;N++){for(var W=O(E[0],M[0][N]),H=1;H<L;H++)W=I(W,O(E[H],M[H][N]));$[N]=W}return w.createDenseMatrix({data:$,size:[F],datatype:k})}var d=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":m}),p=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":x,"DenseMatrix, SparseMatrix":_,"SparseMatrix, DenseMatrix":v,"SparseMatrix, SparseMatrix":b});function g(w,A){var E=w._data,S=w._size,C=w._datatype,M=A._data,D=A._datatype,T=S[0],L=S[1],F,k=r,I=i;C&&D&&C===D&&typeof C=="string"&&(F=C,k=e.find(r,[F,F]),I=e.find(i,[F,F]));for(var O=[],$=0;$<T;$++){for(var N=E[$],W=I(N[0],M[0]),H=1;H<L;H++)W=k(W,I(N[H],M[H]));O[$]=W}return w.createDenseMatrix({data:O,size:[T],datatype:F})}function x(w,A){var E=w._data,S=w._size,C=w._datatype,M=A._data,D=A._size,T=A._datatype,L=S[0],F=S[1],k=D[1],I,O=r,$=i;C&&T&&C===T&&typeof C=="string"&&(I=C,O=e.find(r,[I,I]),$=e.find(i,[I,I]));for(var N=[],W=0;W<L;W++){var H=E[W];N[W]=[];for(var K=0;K<k;K++){for(var ee=$(H[0],M[0][K]),Z=1;Z<F;Z++)ee=O(ee,$(H[Z],M[Z][K]));N[W][K]=ee}}return w.createDenseMatrix({data:N,size:[L,k],datatype:I})}function _(w,A){var E=w._data,S=w._size,C=w._datatype,M=A._values,D=A._index,T=A._ptr,L=A._size,F=A._datatype;if(!M)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var k=S[0],I=L[1],O,$=r,N=i,W=s,H=0;C&&F&&C===F&&typeof C=="string"&&(O=C,$=e.find(r,[O,O]),N=e.find(i,[O,O]),W=e.find(s,[O,O]),H=e.convert(0,O));for(var K=[],ee=[],Z=[],J=A.createSparseMatrix({values:K,index:ee,ptr:Z,size:[k,I],datatype:O}),X=0;X<I;X++){Z[X]=ee.length;var Q=T[X],oe=T[X+1];if(oe>Q)for(var he=0,ve=0;ve<k;ve++){for(var ye=ve+1,V=void 0,R=Q;R<oe;R++){var B=D[R];he!==ye?(V=N(E[ve][B],M[R]),he=ye):V=$(V,N(E[ve][B],M[R]))}he===ye&&!W(V,H)&&(ee.push(ve),K.push(V))}}return Z[I]=ee.length,J}function m(w,A){var E=w._values,S=w._index,C=w._ptr,M=w._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=A._data,T=A._datatype,L=w._size[0],F=A._size[0],k=[],I=[],O=[],$,N=r,W=i,H=s,K=0;M&&T&&M===T&&typeof M=="string"&&($=M,N=e.find(r,[$,$]),W=e.find(i,[$,$]),H=e.find(s,[$,$]),K=e.convert(0,$));var ee=[],Z=[];O[0]=0;for(var J=0;J<F;J++){var X=D[J];if(!H(X,K))for(var Q=C[J],oe=C[J+1],he=Q;he<oe;he++){var ve=S[he];Z[ve]?ee[ve]=N(ee[ve],W(X,E[he])):(Z[ve]=!0,I.push(ve),ee[ve]=W(X,E[he]))}}for(var ye=I.length,V=0;V<ye;V++){var R=I[V];k[V]=ee[R]}return O[1]=I.length,w.createSparseMatrix({values:k,index:I,ptr:O,size:[L,1],datatype:$})}function v(w,A){var E=w._values,S=w._index,C=w._ptr,M=w._datatype;if(!E)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var D=A._data,T=A._datatype,L=w._size[0],F=A._size[0],k=A._size[1],I,O=r,$=i,N=s,W=0;M&&T&&M===T&&typeof M=="string"&&(I=M,O=e.find(r,[I,I]),$=e.find(i,[I,I]),N=e.find(s,[I,I]),W=e.convert(0,I));for(var H=[],K=[],ee=[],Z=w.createSparseMatrix({values:H,index:K,ptr:ee,size:[L,k],datatype:I}),J=[],X=[],Q=0;Q<k;Q++){ee[Q]=K.length;for(var oe=Q+1,he=0;he<F;he++){var ve=D[he][Q];if(!N(ve,W))for(var ye=C[he],V=C[he+1],R=ye;R<V;R++){var B=S[R];X[B]!==oe?(X[B]=oe,K.push(B),J[B]=$(ve,E[R])):J[B]=O(J[B],$(ve,E[R]))}}for(var j=ee[Q],se=K.length,Y=j;Y<se;Y++){var G=K[Y];H[Y]=J[G]}}return ee[k]=K.length,Z}function b(w,A){var E=w._values,S=w._index,C=w._ptr,M=w._datatype,D=A._values,T=A._index,L=A._ptr,F=A._datatype,k=w._size[0],I=A._size[1],O=E&&D,$,N=r,W=i;M&&F&&M===F&&typeof M=="string"&&($=M,N=e.find(r,[$,$]),W=e.find(i,[$,$]));for(var H=O?[]:void 0,K=[],ee=[],Z=w.createSparseMatrix({values:H,index:K,ptr:ee,size:[k,I],datatype:$}),J=O?[]:void 0,X=[],Q,oe,he,ve,ye,V,R,B,j=0;j<I;j++){ee[j]=K.length;var se=j+1;for(ye=L[j],V=L[j+1],ve=ye;ve<V;ve++)if(B=T[ve],O)for(oe=C[B],he=C[B+1],Q=oe;Q<he;Q++)R=S[Q],X[R]!==se?(X[R]=se,K.push(R),J[R]=W(D[ve],E[Q])):J[R]=N(J[R],W(D[ve],E[Q]));else for(oe=C[B],he=C[B+1],Q=oe;Q<he;Q++)R=S[Q],X[R]!==se&&(X[R]=se,K.push(R));if(O)for(var Y=ee[j],G=K.length,le=Y;le<G;le++){var ge=K[le];H[le]=J[ge]}}return ee[I]=K.length,Z}return e(F3,i,{"Array, Array":e.referTo("Matrix, Matrix",w=>(A,E)=>{u(Uu(A),Uu(E));var S=w(n(A),n(E));return Gi(S)?S.valueOf():S}),"Matrix, Matrix":function(A,E){var S=A.size(),C=E.size();return u(S,C),S.length===1?C.length===1?c(A,E,S[0]):f(A,E):C.length===1?d(A,E):p(A,E)},"Matrix, Array":e.referTo("Matrix,Matrix",w=>(A,E)=>w(A,n(E))),"Array, Matrix":e.referToSelf(w=>(A,E)=>w(n(A,E.storage()),E)),"SparseMatrix, any":function(A,E){return a(A,E,i,!1)},"DenseMatrix, any":function(A,E){return l(A,E,i,!1)},"any, SparseMatrix":function(A,E){return a(E,A,i,!0)},"any, DenseMatrix":function(A,E){return l(E,A,i,!0)},"Array, any":function(A,E){return l(n(A),E,i,!1).valueOf()},"any, Array":function(A,E){return l(n(E),A,i,!0).valueOf()},"any, any":i,"any, any, ...any":e.referToSelf(w=>(A,E,S)=>{for(var C=w(A,E),M=0;M<S.length;M++)C=w(C,S[M]);return C})})}),I3="subtract",Fde=["typed","matrix","equalScalar","addScalar","unaryMinus","DenseMatrix","concat"],Ide=St(I3,Fde,t=>{var{typed:e,matrix:n,equalScalar:r,addScalar:i,unaryMinus:s,DenseMatrix:o,concat:a}=t,l=Xz({typed:e}),u=jz({typed:e}),c=Cde({typed:e,equalScalar:r}),f=Yz({typed:e,DenseMatrix:o}),h=Wz({typed:e,DenseMatrix:o}),d=R2({typed:e,matrix:n,concat:a});return e(I3,{"number, number":(p,g)=>p-g,"Complex, Complex":(p,g)=>p.sub(g),"BigNumber, BigNumber":(p,g)=>p.minus(g),"Fraction, Fraction":(p,g)=>p.sub(g),"Unit, Unit":e.referToSelf(p=>(g,x)=>{if(g.value===null)throw new Error("Parameter x contains a unit with undefined value");if(x.value===null)throw new Error("Parameter y contains a unit with undefined value");if(!g.equalBase(x))throw new Error("Units do not match");var _=g.clone();return _.value=e.find(p,[_.valueType(),x.valueType()])(_.value,x.value),_.fixPrefix=!1,_})},d({SS:c,DS:l,SD:u,Ss:h,sS:f}))}),kde="matAlgo07xSSf",Rde=["typed","DenseMatrix"],Ode=St(kde,Rde,t=>{var{typed:e,DenseMatrix:n}=t;return function(s,o,a){var l=s._size,u=s._datatype,c=o._size,f=o._datatype;if(l.length!==c.length)throw new an(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var h=l[0],d=l[1],p,g=0,x=a;typeof u=="string"&&u===f&&(p=u,g=e.convert(0,p),x=e.find(a,[p,p]));var _,m,v=[];for(_=0;_<h;_++)v[_]=[];var b=[],w=[],A=[],E=[];for(m=0;m<d;m++){var S=m+1;for(r(s,m,A,b,S),r(o,m,E,w,S),_=0;_<h;_++){var C=A[_]===S?b[_]:g,M=E[_]===S?w[_]:g;v[_][m]=x(C,M)}}return new n({data:v,size:[h,d],datatype:p})};function r(i,s,o,a,l){for(var u=i._values,c=i._index,f=i._ptr,h=f[s],d=f[s+1];h<d;h++){var p=c[h];o[p]=l,a[p]=u[h]}}}),k3="conj",Bde=["typed"],Nde=St(k3,Bde,t=>{var{typed:e}=t;return e(k3,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),"Array | Matrix":e.referToSelf(n=>r=>Ba(r,n))})}),R3="concat",Vde=["typed","matrix","isInteger"],zde=St(R3,Vde,t=>{var{typed:e,matrix:n,isInteger:r}=t;return e(R3,{"...Array | Matrix | number | BigNumber":function(s){var o,a=s.length,l=-1,u,c=!1,f=[];for(o=0;o<a;o++){var h=s[o];if(Gi(h)&&(c=!0),jn(h)||Ys(h)){if(o!==a-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=h.valueOf(),!r(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>u)throw new yf(l,u+1)}else{var d=$r(h).valueOf(),p=Uu(d);if(f[o]=d,u=l,l=p.length-1,o>0&&l!==u)throw new an(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var g=f.shift();f.length;)g=qz(g,f.shift(),l,0);return c?n(g):g},"...string":function(s){return s.join("")}})});function qz(t,e,n,r){if(r<n){if(t.length!==e.length)throw new an(t.length,e.length);for(var i=[],s=0;s<t.length;s++)i[s]=qz(t[s],e[s],n,r+1);return i}else return t.concat(e)}var O3="flatten",Gde=["typed","matrix"],Ude=St(O3,Gde,t=>{var{typed:e,matrix:n}=t;return e(O3,{Array:function(i){return FE(i)},Matrix:function(i){var s=FE(i.toArray());return n(s)}})});function Hde(){throw new Error('No "bignumber" implementation available')}function Wde(){throw new Error('No "fraction" implementation available')}function $de(){throw new Error('No "matrix" implementation available')}var B3="size",Xde=["typed","config","?matrix"],Yde=St(B3,Xde,t=>{var{typed:e,config:n,matrix:r}=t;return e(B3,{Matrix:function(s){return s.create(s.size())},Array:Uu,string:function(s){return n.matrix==="Array"?[s.length]:r([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return n.matrix==="Array"?[]:r?r([]):$de()}})}),jde="numeric",qde=["number","?bignumber","?fraction"],Jde=St(jde,qde,t=>{var{number:e,bignumber:n,fraction:r}=t,i={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>e(o),BigNumber:n?o=>n(o):Hde,Fraction:r?o=>r(o):Wde};return function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Qh(a);if(!(c in i))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(i).join(", "));if(!(l in s))throw new TypeError("Cannot convert "+a+' to type "'+l+'"; valid output types are '+Object.keys(s).join(", "));return l===c?a:s[l](a)}}),N3="divideScalar",Kde=["typed","numeric"],Zde=St(N3,Kde,t=>{var{typed:e,numeric:n}=t;return e(N3,{"number, number":function(i,s){return i/s},"Complex, Complex":function(i,s){return i.div(s)},"BigNumber, BigNumber":function(i,s){return i.div(s)},"Fraction, Fraction":function(i,s){return i.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,i)=>r.divide(i),"number | Fraction | Complex | BigNumber, Unit":(r,i)=>i.divideInto(r)})}),j1="smaller",Qde=["typed","config","matrix","DenseMatrix","concat"],epe=St(j1,Qde,t=>{var{typed:e,config:n,matrix:r,DenseMatrix:i,concat:s}=t,o=jz({typed:e}),a=Ode({typed:e,DenseMatrix:i}),l=Wz({typed:e,DenseMatrix:i}),u=R2({typed:e,matrix:r,concat:s}),c=Hz({typed:e});return e(j1,tpe({typed:e,config:n}),{"boolean, boolean":(f,h)=>f<h,"BigNumber, BigNumber":function(h,d){return h.lt(d)&&!Uz(h,d,n.epsilon)},"Fraction, Fraction":(f,h)=>f.compare(h)===-1,"Complex, Complex":function(h,d){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),tpe=St(j1,["typed","config"],t=>{var{typed:e,config:n}=t;return e(j1,{"number, number":function(i,s){return i<s&&!Em(i,s,n.epsilon)}})}),V3="add",npe=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],rpe=St(V3,npe,t=>{var{typed:e,matrix:n,addScalar:r,equalScalar:i,DenseMatrix:s,SparseMatrix:o,concat:a}=t,l=Xz({typed:e}),u=fde({typed:e,equalScalar:i}),c=Yz({typed:e,DenseMatrix:s}),f=R2({typed:e,matrix:n,concat:a});return e(V3,{"any, any":r,"any, any, ...any":e.referToSelf(h=>(d,p,g)=>{for(var x=h(d,p),_=0;_<g.length;_++)x=h(x,g[_]);return x})},f({elop:r,DS:l,SS:u,Ss:c}))}),z3="dot",ipe=["typed","addScalar","multiplyScalar","conj","size"],spe=St(z3,ipe,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:i,size:s}=t;return e(z3,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":l});function o(c,f){var h=u(c),d=u(f),p,g;if(h.length===1)p=h[0];else if(h.length===2&&h[1]===1)p=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(d.length===1)g=d[0];else if(d.length===2&&d[1]===1)g=d[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+d.join(", ")+")");if(p!==g)throw new RangeError("Vectors must have equal length ("+p+" != "+g+")");if(p===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return p}function a(c,f){var h=o(c,f),d=Gi(c)?c._data:c,p=Gi(c)?c._datatype:void 0,g=Gi(f)?f._data:f,x=Gi(f)?f._datatype:void 0,_=u(c).length===2,m=u(f).length===2,v=n,b=r;if(p&&x&&p===x&&typeof p=="string"){var w=p;v=e.find(n,[w,w]),b=e.find(r,[w,w])}if(!_&&!m){for(var A=b(i(d[0]),g[0]),E=1;E<h;E++)A=v(A,b(i(d[E]),g[E]));return A}if(!_&&m){for(var S=b(i(d[0]),g[0][0]),C=1;C<h;C++)S=v(S,b(i(d[C]),g[C][0]));return S}if(_&&!m){for(var M=b(i(d[0][0]),g[0]),D=1;D<h;D++)M=v(M,b(i(d[D][0]),g[D]));return M}if(_&&m){for(var T=b(i(d[0][0]),g[0][0]),L=1;L<h;L++)T=v(T,b(i(d[L][0]),g[L][0]));return T}}function l(c,f){o(c,f);for(var h=c._index,d=c._values,p=f._index,g=f._values,x=0,_=n,m=r,v=0,b=0;v<h.length&&b<p.length;){var w=h[v],A=p[b];if(w<A){v++;continue}if(w>A){b++;continue}w===A&&(x=_(x,m(d[v],g[b])),v++,b++)}return x}function u(c){return Gi(c)?c.size():s(c)}}),ope="intersect",ape=["typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric"],lpe=St(ope,ape,t=>{var{typed:e,config:n,abs:r,add:i,addScalar:s,matrix:o,multiply:a,multiplyScalar:l,divideScalar:u,subtract:c,smaller:f,equalScalar:h,flatten:d,isZero:p,isNumeric:g}=t;return e("intersect",{"Array, Array, Array":x,"Array, Array, Array, Array":_,"Matrix, Matrix, Matrix":function(D,T,L){var F=x(D.valueOf(),T.valueOf(),L.valueOf());return F===null?null:o(F)},"Matrix, Matrix, Matrix, Matrix":function(D,T,L,F){var k=_(D.valueOf(),T.valueOf(),L.valueOf(),F.valueOf());return k===null?null:o(k)}});function x(M,D,T){if(M=m(M),D=m(D),T=m(T),!b(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!w(T))throw new TypeError("Array with 4 numbers expected as third argument");return C(M[0],M[1],M[2],D[0],D[1],D[2],T[0],T[1],T[2],T[3])}function _(M,D,T,L){if(M=m(M),D=m(D),T=m(T),L=m(L),M.length===2){if(!v(M))throw new TypeError("Array with 2 numbers or BigNumbers expected for first argument");if(!v(D))throw new TypeError("Array with 2 numbers or BigNumbers expected for second argument");if(!v(T))throw new TypeError("Array with 2 numbers or BigNumbers expected for third argument");if(!v(L))throw new TypeError("Array with 2 numbers or BigNumbers expected for fourth argument");return A(M,D,T,L)}else if(M.length===3){if(!b(M))throw new TypeError("Array with 3 numbers or BigNumbers expected for first argument");if(!b(D))throw new TypeError("Array with 3 numbers or BigNumbers expected for second argument");if(!b(T))throw new TypeError("Array with 3 numbers or BigNumbers expected for third argument");if(!b(L))throw new TypeError("Array with 3 numbers or BigNumbers expected for fourth argument");return S(M[0],M[1],M[2],D[0],D[1],D[2],T[0],T[1],T[2],L[0],L[1],L[2])}else throw new TypeError("Arrays with two or thee dimensional points expected")}function m(M){return M.length===1?M[0]:M.length>1&&Array.isArray(M[0])&&M.every(D=>Array.isArray(D)&&D.length===1)?d(M):M}function v(M){return M.length===2&&g(M[0])&&g(M[1])}function b(M){return M.length===3&&g(M[0])&&g(M[1])&&g(M[2])}function w(M){return M.length===4&&g(M[0])&&g(M[1])&&g(M[2])&&g(M[3])}function A(M,D,T,L){var F=M,k=T,I=c(F,D),O=c(k,L),$=c(l(I[0],O[1]),l(O[0],I[1]));if(p($)||f(r($),n.epsilon))return null;var N=l(O[0],F[1]),W=l(O[1],F[0]),H=l(O[0],k[1]),K=l(O[1],k[0]),ee=u(s(c(c(N,W),H),K),$);return i(a(I,ee),F)}function E(M,D,T,L,F,k,I,O,$,N,W,H){var K=l(c(M,D),c(T,L)),ee=l(c(F,k),c(I,O)),Z=l(c($,N),c(W,H));return s(s(K,ee),Z)}function S(M,D,T,L,F,k,I,O,$,N,W,H){var K=E(M,I,N,I,D,O,W,O,T,$,H,$),ee=E(N,I,L,M,W,O,F,D,H,$,k,T),Z=E(M,I,L,M,D,O,F,D,T,$,k,T),J=E(N,I,N,I,W,O,W,O,H,$,H,$),X=E(L,M,L,M,F,D,F,D,k,T,k,T),Q=c(l(K,ee),l(Z,J)),oe=c(l(X,J),l(ee,ee));if(p(oe))return null;var he=u(Q,oe),ve=u(s(K,l(he,ee)),J),ye=s(M,l(he,c(L,M))),V=s(D,l(he,c(F,D))),R=s(T,l(he,c(k,T))),B=s(I,l(ve,c(N,I))),j=s(O,l(ve,c(W,O))),se=s($,l(ve,c(H,$)));return h(ye,B)&&h(V,j)&&h(R,se)?[ye,V,R]:null}function C(M,D,T,L,F,k,I,O,$,N){var W=l(M,I),H=l(L,I),K=l(D,O),ee=l(F,O),Z=l(T,$),J=l(k,$),X=c(c(c(N,W),K),Z),Q=c(c(c(s(s(H,ee),J),W),K),Z),oe=u(X,Q),he=s(M,l(oe,c(L,M))),ve=s(D,l(oe,c(F,D))),ye=s(T,l(oe,c(k,T)));return[he,ve,ye]}}),Jz=uhe({config:Hd}),upe=hhe({}),Kz=ghe({}),O2=yhe({}),ov=bhe({Matrix:O2}),Wn=hfe({BigNumber:Jz,Complex:upe,DenseMatrix:ov,Fraction:Kz}),cpe=Khe({typed:Wn}),av=Qhe({typed:Wn}),fpe=Uhe({BigNumber:Jz,typed:Wn}),hpe=Nde({typed:Wn}),lv=Lhe({config:Hd,typed:Wn}),dpe=She({typed:Wn}),ppe=Dhe({typed:Wn}),B2=Tde({typed:Wn}),gpe=Vhe({typed:Wn}),Zz=khe({Matrix:O2,equalScalar:lv,typed:Wn}),mpe=qhe({typed:Wn}),vpe=$he({Fraction:Kz,typed:Wn}),ype=Che({typed:Wn}),ic=Yhe({DenseMatrix:ov,Matrix:O2,SparseMatrix:Zz,typed:Wn}),_pe=Jde({bignumber:fpe,fraction:vpe,number:gpe}),wpe=Yde({matrix:ic,config:Hd,typed:Wn}),N2=zde({isInteger:dpe,matrix:ic,typed:Wn}),bpe=Zde({numeric:_pe,typed:Wn}),xpe=Ude({matrix:ic,typed:Wn}),Spe=epe({DenseMatrix:ov,concat:N2,config:Hd,matrix:ic,typed:Wn}),Ape=rpe({DenseMatrix:ov,SparseMatrix:Zz,addScalar:av,concat:N2,equalScalar:lv,matrix:ic,typed:Wn}),Epe=spe({addScalar:av,conj:hpe,multiplyScalar:B2,size:wpe,typed:Wn}),Cpe=Lde({addScalar:av,dot:Epe,equalScalar:lv,matrix:ic,multiplyScalar:B2,typed:Wn}),Mpe=Ide({DenseMatrix:ov,addScalar:av,concat:N2,equalScalar:lv,matrix:ic,typed:Wn,unaryMinus:mpe}),Gs=lpe({abs:cpe,add:Ape,addScalar:av,config:Hd,divideScalar:bpe,equalScalar:lv,flatten:xpe,isNumeric:ype,isZero:ppe,matrix:ic,multiply:Cpe,multiplyScalar:B2,smaller:Spe,subtract:Mpe,typed:Wn});const Vr={mixins:[],data(){return{store:we()}},methods:{feedback(t,e){this.store.setResponseText(this.$t(t)),this.store.setResponseColor(e),this.store.setResponseMessage(!0)},persist(t,e,n,r){this.store.setPersistHeader(this.$t(e)),this.store.setPersistText(this.$t(e)),this.store.setPersistChoices(n),this.store.setPersistMessage(!0)},getDistance(t,e,n,r){let i=t-n,s=e-r;return Math.round(Math.sqrt(i*i+s*s))},getRealDistance(t,e,n,r){let i=t-n,s=e-r;return Math.sqrt(i*i+s*s)},convertFlatToMultiDimArray(t){let e=[];for(var n=0;n<t.length;n+=2)e.push([t[n],t[1+n]]);return JSON.parse(JSON.stringify(e))},convertMultiDimArrayToFlat(t){let e=[];for(let n=0;n<t.length;n++)Array.isArray(t[n])?e=e.concat(this.convertMultiDimArrayToFlat(t[n])):e.push(t[n]);return JSON.parse(JSON.stringify(e))},getCorners(t){if(t==null)return;let e=Math.min.apply(Math,t.map(function(u){return u[0]})),n=Math.max.apply(Math,t.map(function(u){return u[0]})),r=Math.min.apply(Math,t.map(function(u){return u[1]})),i=Math.max.apply(Math,t.map(function(u){return u[1]}));return[[e,r],[n,r],[n,i],[e,i]]},calculatePolygons(t,e,n){let r=[],i,s,o,a,l,u=Number(t.points()[0]),c=Number(t.points()[1]),f=Number(e.width),h=Number(e.height);switch(n){case"rectangle":i=[u,c],s=[u,c+h],o=[u+f,c+h],a=[u+f,c],l=[u,c],r=[JSON.parse(JSON.stringify(i)),JSON.parse(JSON.stringify(s)),JSON.parse(JSON.stringify(o)),JSON.parse(JSON.stringify(a)),JSON.parse(JSON.stringify(l))].flat();break}t.points(r)},checkFloorView(t){this.store.floorView.includes(t)?this.store.floorView.splice(this.store.floorView.indexOf(t),1):this.store.floorView.push(t),this.changeFloor()},changeFloor(t){let e=this.store.convaStage.find(r=>r.id().includes("floor")&&(this.store.floorView.includes(parseInt(r.id().split("floor")[1]))||r.id().includes(this.store.selectedFloor.toString()))),n=this.store.convaStage.find(r=>r.id().includes("floor")&&!this.store.floorView.includes(parseInt(r.id().split("floor")[1]))&&!r.id().includes(this.store.selectedFloor.toString()));for(let r=0;r<e.length;r++){e[r].show();let i=e[r].getChildren();if(e[r].id().includes(this.store.selectedFloor.toString())){if(e[r].id().includes(this.store.selectedFloor.toString())){this.store.lineArray=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.lineArray,this.store.tempLineArray=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.lineArray;for(let s=0;s<i.length;s++)e[r].show(),this.store.showMeasurement&&i[s].show(),i[s].name().includes("permanentLine")&&i[s].dash([0,0])}}else for(let s=0;s<i.length;s++)i[s].name().includes("drawingDistancesGroup")||i[s].name().includes("drawingPointsGroup")?i[s].hide():i[s].dash([10,5])}for(let r=0;r<n.length;r++)n[r].hide();this.updateDragElements(),this.store.activeFloorplan||this.store.convaStage.findOne("#cubeViewLayer")&&(this.store.convaStage.findOne("#cubeViewLayer").destroy(),this.setCubeView())},getNextPointOnLine(t,e,n){const r=(e[1]-t[1])/(e[0]-t[0]),i=t[1]-r*t[0];let s,o;if(Math.abs(r)===1/0)s=t[0],o=n[1];else if(r===0)s=n[0],o=t[1];else{const a=-1/r;s=(n[1]-a*n[0]-i)/(r-a),o=r*s+i}return[s,o]},centerStageOnGroups(t){var e=t.find("#floor"+this.store.selectedFloor.toString())[0].getClientRect(),n=t.width()/2-(e.x+e.width/2),r=t.height()/2-(e.y+e.height/2);t.position({x:n,y:r}),t.draw()},setDimensionsLabelText(t){let e;return t<26?e=`${String.fromCharCode(t+65)} \u2014
            ${this.store.drawing?t===25?"AA":String.fromCharCode(t+66):t===this.store.distanceArray.length-1?"A":String.fromCharCode(t+66)}`:t>=26?e=`${String.fromCharCode(0+65)+String.fromCharCode(t-25-1+65)} \u2014
            ${this.store.drawing?String.fromCharCode(0+65)+String.fromCharCode(t-25+65):t===this.store.distanceArray.length-1?"A":String.fromCharCode(0+65)+String.fromCharCode(t-25+65)}`:e=String.fromCharCode(t+65),e},setToolbarArea(t){this.store.setActiveFloorplan(!1),this.store.setActiveConstructionElement(!1),this.store.setActiveFacade(!1),this.store.setActiveSubconstruction(!1),t=="Floorplan"?this.store.setActiveFloorplan(!0):t=="ConstructionElement"?this.store.setActiveConstructionElement(!0):t=="Facade"?this.store.setActiveFacade(!0):t=="Subconstruction"&&this.store.setActiveSubconstruction(!0)},getAllLineArrayPoints(){let t=0;const e=[];return this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(n){e.push([]),n.elements.forEach(r=>{if(!r.ignore){const i=[];for(let s=0;s<r.points.length;s++)i.push([r.points[s][0]+n.pointsArray[0][0],r.points[s][1]+n.pointsArray[0][1]]);e[t].push(i)}}),n.partialArea&&n.partialArea.forEach(r=>{if(!r.ignore){const i=[];for(let s=0;s<r.pointsArray.length;s++)i.push([r.pointsArray[s][0]+n.pointsArray[0][0],r.pointsArray[s][1]+n.pointsArray[0][1]]);e[t].push(i)}}),t++}),e},getAllLineArrayElementPoints(){let t=0;const e=[];return this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(n){e.push([]),n.elements.forEach(r=>{const i=[];for(let s=0;s<r.points.length;s++)i.push([r.points[s][0]+n.pointsArray[0][0],r.points[s][1]+n.pointsArray[0][1]]);e[t].push(i)}),t++}),e},getAllLineArrayPartialAreaPoints(){let t=0;const e=[];return this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(n){e.push([]),n.partialArea&&n.partialArea.forEach(r=>{const i=[];for(let s=0;s<r.pointsArray.length;s++)i.push([r.pointsArray[s][0]+n.pointsArray[0][0],r.pointsArray[s][1]+n.pointsArray[0][1]]);e[t].push(i)}),t++}),e},getAllLineArrayPointsForHelpline(t=!1){const e=[];return this.store.floorView,this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(n){e.push([]);for(let r=0;r<n.pointsArray.length;r++)r!==0&&t&&this.getCentroid([n.pointsArray[r],n.pointsArray[r-1]]);n.elements.forEach(r=>{for(let i=0;i<r.points.length;i++){if(i!==0&&t){const s=this.getCentroid([r.points[i],r.points[i-1]]);e.push([s[0]+n.pointsArray[0][0],s[1]+n.pointsArray[0][1]])}e.push([r.points[i][0]+n.pointsArray[0][0],r.points[i][1]+n.pointsArray[0][1]])}}),n.partialArea&&n.partialArea.forEach(r=>{for(let i=0;i<r.pointsArray.length;i++){if(i!==0&&t){const s=this.getCentroid([r.pointsArray[i],r.pointsArray[i-1]]);e.push([Math.round(s[0]+n.pointsArray[0][0]),Math.round(s[1]+n.pointsArray[0][1])])}e.push([r.pointsArray[i][0]+n.pointsArray[0][0],r.pointsArray[i][1]+n.pointsArray[0][1]])}})}.bind(this)),e},calcOffsetPolygon(t,e){var n=[];t.forEach(i=>{n.push({x:i[0],y:i[1]})}),n.pop(),n=AV(n,this.checkPolygonClockwise(t)?-e:e,0);var r=[];return n.forEach(i=>{r.push([i.x,i.y])}),r=Array.from(new Set(r.map(JSON.stringify)),JSON.parse),r.push(r[0]),r},offsetPolygonSides(t,e,n){n*=-1;let r=[];for(let s=0;s<t.length-1;s++)if(e.includes(s)){let o=t[s][0],a=t[s][1],l=t[s+1][0],u=t[s+1][1],c=this.getCentroid([[o,a],[l,u]]),f=Math.atan2(u-a,l-o)*180/Math.PI,h=Math.round(10*Math.cos(f*Math.PI/180)+c[0]),d=Math.round(10*Math.sin(f*Math.PI/180)+c[1]),p=this.rotatePoint(c,[h,d],90),g=[Math.round(n*Math.cos(f*Math.PI/180)+o),Math.round(n*Math.sin(f*Math.PI/180)+a)],x=[Math.round(n*Math.cos(f*Math.PI/180)+l),Math.round(n*Math.sin(f*Math.PI/180)+u)];this.checkPointInsidePolygon(t,p)?(g=this.rotatePoint(t[s],g,90),x=this.rotatePoint(t[s+1],x,90)):(g=this.rotatePoint(t[s],g,-90),x=this.rotatePoint(t[s+1],x,-90)),r.push([g,x])}else r.push([t[s],t[s+1]]);let i=[];for(let s=0;s<r.length-1;s++){let o,a;s==0?o=Gs(r[s][0],r[s][1],r[r.length-1][0],r[r.length-1][1]):o=Gs(r[s][0],r[s][1],r[s-1][0],r[s-1][1]),s==r.length-1?a=Gs(r[s][0],r[s][1],r[0][0],r[0][1]):a=Gs(r[s][0],r[s][1],r[s+1][0],r[s+1][1]),o=[Math.round(o[0]),Math.round(o[1])],a=[Math.round(a[0]),Math.round(a[1])],s==0&&i.push(o),i.push(a)}return i.push(i[0]),i},getFullLength(t){let e=0,n=0;for(let r=0;r<t.length-1;r+=2)n=Math.abs(t[r]-t[r+2]),e<n&&(e=n);return e},checkPointOnLine(t,e,n){return Math.round(this.calculateArea([t,e,n])*1e3)/1e3==0},calculateArea(t){let e=0;for(let n=0;n<t.length;n++){let r=t[n][0],i=t[n===t.length-1?0:n+1][1],s=t[n===t.length-1?0:n+1][0],o=t[n][1];e+=r*i*.5,e-=s*o*.5}return Math.abs(e)/1e4},addFuge(t){t!==void 0?this.facadeStore.displayCutOutArray[t].myCoveringWidth+=this.facadeStore.getFuge:this.facadeStore.setMyCoveringWidth(this.facadeStore.getMyCoveringWidth+this.facadeStore.getFuge)},removeFuge(t){t!==void 0?this.facadeStore.displayCutOutArray[t].myCoveringWidth-=this.facadeStore.getFuge:this.facadeStore.setMyCoveringWidth(this.facadeStore.getMyCoveringWidth-this.facadeStore.getFuge)},getCentroid(t){let e=[0,0];for(let n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1];return e[0]/=t.length,e[1]/=t.length,e},hexToRgba(t){t=t.replace("#","");const n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),i=parseInt(t.substring(4,6),16);let s=parseInt(t.substring(6,8),16)/255*.6;return s=isNaN(s)?.6:s,{r:n,g:r,b:i,a:s}},rgbaToHexa(t){const e=Math.round(t.r).toString(16).padStart(2,"0"),n=Math.round(t.g).toString(16).padStart(2,"0"),r=Math.round(t.b).toString(16).padStart(2,"0"),i=Math.round(t.a*255).toString(16).padStart(2,"0");return`#${e}${n}${r}${i}`},hslaToRgba(t,e,n,r){let i,s,o;if(e===0)i=s=o=n;else{const a=(c,f,h)=>(h<0&&(h+=1),h>1&&(h-=1),h<.16666666666666666?c+(f-c)*6*h:h<.5?f:h<.6666666666666666?c+(f-c)*(.6666666666666666-h)*6:c),l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=a(u,l,t+1/3),s=a(u,l,t),o=a(u,l,t-1/3)}return{r:Math.round(i*255),g:Math.round(s*255),b:Math.round(o*255),a:r}},checkHexColor(t){return!!/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)},checkRgbaColor(t){return!!/^rgba?\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(,\s*(0(\.\d+)?|1(\.0+)?))?\s*\)$/.test(t)},checkHslaColor(t){return!!/^hsla?\(\s*\d+(\.\d+)?\s*,\s*\d+(\.\d+)?%\s*,\s*\d+(\.\d+)?%\s*(,\s*(0(\.\d+)?|1(\.0+)?))?\s*\)$/.test(t)}}},zr={mixins:[Vr],data(){return{store:we()}},methods:{show(t,e){event.preventDefault(),this.store.vMenuHeadline=t,this.store.vMenuItems=e,this.store.vMenuPosition.left=event.clientX+"px",this.store.vMenuPosition.top=event.clientY+"px",this.$nextTick(()=>{this.store.showMenu=!0})},getMinXOfFlatArray(t){let e=[];for(let n=0;n<t.length;n++)n%2===0&&e.push(t[n]);return Math.min(...e)},getMinYOfFlatArray(t){let e=[];for(let n=0;n<t.length;n++)n%2!==0&&e.push(t[n]);return Math.min(...e)},getMaxXOfFlatArray(t){let e=[];for(let n=0;n<t.length;n++)n%2===0&&e.push(t[n]);return Math.max(...e)},getMaxYOfFlatArray(t){let e=[];for(let n=0;n<t.length;n++)n%2!==0&&e.push(t[n]);return Math.max(...e)},getAllXOfFlatArray(t){let e=[];for(let n=0;n<t.length;n++)n%2===0&&e.push(t[n]);return[...new Set(e)].sort(function(n,r){return n-r})},getAllYOfFlatArray(t){let e=[];for(let n=0;n<t.length;n++)n%2!==0&&e.push(t[n]);return[...new Set(e)].sort(function(n,r){return n-r})},getDrawingCursor(){let t,e;return event.button===0&&(this.store.mouseLocked?(t=Math.round(this.store.tempLineConfig.points()[2]),e=Math.round(this.store.tempLineConfig.points()[3])):(t=Math.round(this.store.posX),e=Math.round(this.store.posY))),[t,e]},getCenterCoordinatesFromPointsArray(t){const e=[];for(let n=0;n<t.length;n+=2)e.push(t[n]-t[0],t[n+1]-t[1]);return e},getLineArrayElementOnMouseHover(){const[t,e]=this.getDrawingCursor();let n=0;const r=[];this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(s){r.push([]),s.elements.forEach(o=>{const a=[];for(let l=0;l<o.points.length;l++)a.push(o.points[l][0]+s.pointsArray[0][0]),a.push(o.points[l][1]+s.pointsArray[0][1]);r[n].push(a)}),n++});let i={};for(const s in r)for(const o in r[s]){let a=this.convertFlatToMultiDimArray(r[s][o]),l=[t,e];if(this.checkPointInsidePolygon(a,l)){i={wallIndex:s,elementIndex:o};continue}}return i},getLineArrayPartialAreaOnMouseHover(){const[t,e]=this.getDrawingCursor();let n=0;const r=[];this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(s){r.push([]),s.partialArea&&s.partialArea.forEach(o=>{const a=[];for(let l=0;l<o.pointsArray.length;l++)a.push(o.pointsArray[l][0]+s.pointsArray[0][0]),a.push(o.pointsArray[l][1]+s.pointsArray[0][1]);r[n].push(a)}),n++});let i={};for(const s in r)for(const o in r[s]){let a=this.convertFlatToMultiDimArray(r[s][o]),l=[t,e];if(this.checkPointInsidePolygon(a,l)){i={wallIndex:s,partialAreaIndex:o};continue}}return i},getLineArrayWallOnMouseHover(){const[t,e]=this.getDrawingCursor(),n=[];this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(i){n.push(i.pointsArray)});let r={};for(const i in n){let s=n[i],o=[t,e];if(this.checkPointInsidePolygon(s,o)){r={},r={wallIndex:i};continue}}return r},checkPolygonClockwise(t){let e=!1,n=0;for(let r=0;r<t.length-1;r++){let i=t[r][0],s=t[r][1],o=t[r+1][0],a=t[r+1][1];n+=(o-i)*(a+s)}return n>0?e=!1:e=!0,e},calcAngles(){let t;for(let e=0;e<this.store.lineArray.length-1;e++){let n=this.store.lineArray[e].x,r=this.store.lineArray[e].y,i=this.store.lineArray[e+1].x,s=this.store.lineArray[e+1].y;t=Math.atan2(s-r,i-n)*180/Math.PI,this.store.angleArray.push(t)}},makeInputFieldForDistance(t){var e=document.createElement("textarea");document.body.appendChild(e);var n=this;e.value=t[t.length-1].distance.split(" ")[0],e.id=t.length-1,e.style.top=t[t.length-1].y+"px",e.style.left=t[t.length-1].x+"px",e.className="textareas-in-canvas",e.addEventListener("change",function(){n.changeDistance(e.value,e.id)})},changeDistance(t,e){var n=parseFloat(t.toString().replace(/,/g,"."));this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray[e]=n;let r=this.getNewCoordinates(this.store.lineArray[e],this.store.lineArray[parseInt(e)+1],n);this.store.lineArray[e+1]=r,e==this.store.lineArray.length-2&&(this.store.lineArray[0]=r);let i=this.store.lineArray.flat();this.store.convaStage.find("Line")[0].setAttr("points",i),this.parseAngles(),this.writeDistances(),this.writePoints()},getNewCoordinates(t,e,n){var r=Math.atan2(e[1]-t[1],e[0]-t[0])*180/Math.PI;return[Math.round(n*Math.cos(r*Math.PI/180)+t[0]),Math.round(n*Math.sin(r*Math.PI/180)+t[1])]},parseAngles(){let t=[],e=0;for(e;e<this.store.lineArray.length-1;e++){let n=this.store.lineArray[e][0],r=this.store.lineArray[e][1],i=this.store.lineArray[e+1][0],s=this.store.lineArray[e+1][1],o=Math.atan2(s-r,i-n)*180/Math.PI;this.drawing&&(o<185&&o>175?o=180:o=Math.round(o),o<95&&o>85?o=90:o=Math.round(o),o<50&&o>40?o=45:o=Math.round(o),o<5&&o>-5?o=0:o=Math.round(o),o<-40&&o>-50?o=-45:o=Math.round(o),o<-85&&o>-95?o=-90:o=Math.round(o),o<-175&&o>-185?o=-180:o=Math.round(o)),t.push(o),this.getDistance(n,r,i,s)}this.store.setRealAngleArray(t)},rotatePoint(t,e,n){let r=Math.PI/180*n,i=Math.cos(r),s=Math.sin(r),o=i*(e[0]-t[0])+s*(e[1]-t[1])+t[0],a=i*(e[1]-t[1])-s*(e[0]-t[0])+t[1];return[o,a]},checkPointInsidePolygon(t,e){let n=t,r=e[0],i=e[1],s=!1;for(let o=0,a=n.length-1;o<n.length;a=o++){let l=n[o][0],u=n[o][1],c=n[a][0],f=n[a][1];u>i!=f>i&&r<(c-l)*(i-u)/(f-u)+l&&(s=!s)}return s},setFloorWallsPointsArray(){let t=0;const e=this.store.lineArray[0][0],n=this.store.lineArray[0][1],r=this.store.getLineArrayBuilding[this.store.selectedFloor].floor,i=r.floorHeight;for(let s=0;s<r.distanceArray.length;s++){let o=[e+t,n,e+t+r.distanceArray[s],n,e+t+r.distanceArray[s],n+i,e+t,n+i,e+t,n];r.wall[s]||(r.wall[s]=JSON.parse(JSON.stringify(this.store.getLineArrayBuildingWallDummy))),r.wall[s].pointsArray=this.convertFlatToMultiDimArray(o),t+=r.distanceArray[s]}},createMiniMap(){this.store.convaStage.findOne("#miniMapGroup")&&this.store.convaStage.findOne("#miniMapGroup").destroy();const t=this.calcMiniMap(),e=new ke.Group({x:0,y:0,offsetX:0,offsetY:0,id:"miniMapGroup",visible:this.store.showMiniMap});this.store.convaStage.findOne("#tempLayer").add(e),e.zIndex(-1),this.setMiniMapPosition();const n=new ke.Group({id:"miniMapGroupScale",scaleX:.5,scaleY:.5});e.add(n);let r=12,i=this.getCorners(t);i.push(JSON.parse(JSON.stringify(i[0])));const s=this.calcTextPos(i,r*2),o=new ke.Line({id:"miniMapFrame",points:s.flat(),stroke:"black",fill:"white",strokeWidth:1,lineCap:"round",closed:!0});n.add(o);const a=[];for(let h=0;h<t.length-1;h++)a.push({id:"miniMap_"+h,points:[t[h],t[h+1]].flat(),stroke:"black",strokeWidth:2,lineCap:"round",opacity:.5,listening:!1});a.forEach(h=>{n.add(new ke.Line(h))});const l=this.calcTextPos(t,r),u=[];for(let h=0;h<t.length-1;h++){let d=String.fromCharCode(h+65);h>25&&(d=String.fromCharCode(0+65)+String.fromCharCode(h-25-1+65));const p=this.getCentroid([l[h],l[h+1]]);u.push({x:p[0],y:p[1],width:r,height:r,offsetX:r/2,offsetY:r/2,align:"center",verticalAlign:"center",text:d,fill:"black",fontSize:r,fontStyle:"normal",listening:!1})}u.forEach(h=>{n.add(new ke.Text(h))});const c=this.calcTextPos(t,-r);let f=0;for(let h=0;h<t.length-1;h++){this.getDistance(c[h][0],c[h][1],c[h+1][0],c[h+1][1]);const d=this.getCentroid([c[h],c[h+1]]);f=this.store.realAnglesArray[h],this.checkPolygonClockwise(c),f>=-180&&f<=-90?f+=180:f>=-90&&f<=0||f>=0&&f<=90||f>=90&&f<=180&&(f-=180);const p=new ke.Text({x:d[0],y:d[1],width:r*5,height:r,offsetX:r*2.5,offsetY:r/2,align:"center",verticalAlign:"center",text:(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray[h]*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit,fill:"black",fontSize:r,fontStyle:"normal",listening:!1,rotation:f});n.add(p)}},setMiniMapPosition(){if(this.store.convaStage.findOne("#miniMapGroup")){var t=JSON.parse(JSON.stringify(this.store.convaStage.position()));this.store.convaStage.findOne("#miniMapGroup").offsetX(JSON.parse(JSON.stringify(t.x))),this.store.convaStage.findOne("#miniMapGroup").offsetY(JSON.parse(JSON.stringify(t.y)));const e=this.calcMiniMap(),n=this.getMiniMapDimension(e)[0],r=this.getMiniMapDimension(e)[1];this.store.convaStage.findOne("#miniMapGroup").x((80+-n)/this.store.zoomFactor),this.store.convaStage.findOne("#miniMapGroup").y((this.store.canvasHeight*this.store.drawingHeight-r-40)/this.store.zoomFactor),this.store.convaStage.findOne("#miniMapGroup").scaleX(1/this.store.zoomFactor),this.store.convaStage.findOne("#miniMapGroup").scaleY(1/this.store.zoomFactor)}},writeDistances(){this.store.convaStage.find(".drawingDistancesGroup"+this.store.selectedFloor.toString())[0]&&this.store.convaStage.find(".drawingDistancesGroup"+this.store.selectedFloor.toString())[0].destroy();const t=new ke.Group({id:"drawingDistancesGroup"+this.store.selectedFloor.toString(),name:"drawingDistancesGroup"+this.store.selectedFloor.toString(),visible:this.store.showMeasurement});this.store.convaStage.find("#baseLayer")[0].add(t);const e=this.store.tempLineArray!==null?JSON.parse(JSON.stringify(this.store.tempLineArray)):JSON.parse(JSON.stringify(this.store.lineArray));let n=[];for(let a=0;a<e.length-1;a++)n.push(this.getDistance(e[a][0],e[a][1],e[a+1][0],e[a+1][1]));this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray=n;let r=[];for(let a=0;a<e.length-1;a++)if(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray[a]>=50){let l=(e[a][0]+e[a+1][0])/2,u=(e[a][1]+e[a+1][1])/2,c=0;if(!this.store.drawing){let h=15;c=this.store.realAnglesArray[a];let d=e[a][0],p=e[a][1],g=e[a+1][0],x=e[a+1][1],_=this.getDistance(d,p,g,x);var i=20,s=10;this.checkPolygonClockwise(e)?c>=-180&&c<=-90?(c+=180,h=i,_+=50):c>=-90&&c<=0||c>=0&&c<=90?(h=s,_-=50):c>=90&&c<=180&&(c-=180,h=i,_+=50):c>=-180&&c<=-90?(c+=180,h=s,_+=50):c>=-90&&c<=0||c>=0&&c<=90?(h=i,_-=50):c>=90&&c<=180&&(c-=180,h=s,_+=50),_/=2;let m=Math.atan2(x-p,g-d)*180/Math.PI,v=[Math.round(_*Math.cos(m*Math.PI/180)+d),Math.round(_*Math.sin(m*Math.PI/180)+p)],b=Math.round(h*Math.cos(m*Math.PI/180)+v[0]),w=Math.round(h*Math.sin(m*Math.PI/180)+v[1]),A=this.rotatePoint(v,[b,w],90),E=this.rotatePoint(v,[b,w],-90);this.checkPointInsidePolygon(e,A)?(l=A[0],u=A[1]):(l=E[0],u=E[1])}let f=new ke.Text({x:l,y:u,index:a,name:"distance"+a,text:(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray[a]*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit,fontSize:12,fontStyle:this.store.drawing?"normal":"bold",fill:this.store.drawing?"black":"#f9f9f9",shadowColor:"black",shadowBlur:this.store.drawing?0:3,shadowOpacity:1,rotation:c});t.add(f),r.push({x:l,y:u,text:(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray[a]*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit,fontSize:12,fontStyle:this.store.drawing?"normal":"bold",fill:this.store.drawing?"black":"#f9f9f9",shadowColor:"black",shadowBlur:this.store.drawing?0:3,shadowOpacity:1,rotation:c})}this.store.setDistanceTextArray(r);var o=this;this.store.convaStage.find("Text").forEach(a=>{a.on("dblclick dbltap",()=>{var l=a.getAbsolutePosition(),u=this.store.convaStage.container().getBoundingClientRect(),c={x:u.left+l.x,y:u.top+l.y},f=document.createElement("textarea");document.body.appendChild(f),f.value=a.text(),f.style.position="absolute",f.style.top=c.y+"px",f.style.left=c.x+"px",f.style.width=a.width(),f.focus(),f.addEventListener("keydown",function(h){h.keyCode===13&&(o.changeDistance(Number(f.value.split(" ")[0]),Number(a.name().split(":")[1])),a.text(f.value),document.body.removeChild(f))})})}),r.forEach(a=>{t.add(new ke.Text(a))})},writePoints(){this.store.convaStage.find(".drawingPointsGroup"+this.store.selectedFloor.toString())[0]&&this.store.convaStage.find(".drawingPointsGroup"+this.store.selectedFloor.toString())[0].destroy();const t=new ke.Group({id:"drawingPointsGroup"+this.store.selectedFloor.toString(),name:"drawingPointsGroup"+this.store.selectedFloor.toString(),visible:this.store.showMeasurement});this.store.convaStage.find("#baseLayer")[0].add(t);const e=this.store.tempLineArray!==null?JSON.parse(JSON.stringify(this.store.tempLineArray)):JSON.parse(JSON.stringify(this.store.lineArray));let n=[],r=this.store.zoomFactor<.5?Math.ceil(12/this.store.zoomFactor):Math.ceil(14/this.store.zoomFactor);if(e.length){if(this.store.drawing){for(let s=0;s<e.length;s++)if(e.length>1){let o,a;s==0?(o=e[s+1],a=e[s]):(o=e[s-1],a=e[s]);let l=Math.sqrt(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)),u=r,c=[];c[0]=a[0]+(a[0]-o[0])/l*u,c[1]=a[1]+(a[1]-o[1])/l*u;var i=String.fromCharCode(s+65);s>25&&(i=String.fromCharCode(0+65)+String.fromCharCode(s-25-1+65)),n.push({x:c[0],y:c[1],width:r*2,height:r,offsetX:r,offsetY:r/2,align:"center",text:i,fontSize:r,fontStyle:"normal",index:s})}}else{let s=r,o=this.calcOffsetPolygon(e,-s);for(let a=0;a<o.length-1;a++){let l=o[a],u=e[a],c=l,f=this.getDistance(l[0],l[1],e[a][0],e[a][1]),d=Math.round(Math.sqrt(Math.pow(s,2)+Math.pow(s,2)))/f;l=[(1-d)*u[0]+d*c[0],(1-d)*u[1]+d*c[1]];let p=String.fromCharCode(a+65);a>25&&(p=String.fromCharCode(0+65)+String.fromCharCode(a-25-1+65)),n.push({x:l[0],y:l[1],width:r*2,height:r,offsetX:r,offsetY:r/2,align:"center",text:p,fill:"black",fontSize:r,fontStyle:"normal",index:a})}}n.forEach(s=>{t.add(new ke.Text(s))})}if(!this.store.drawing){this.store.convaStage.find("#floor"+this.store.selectedFloor.toString())[0]&&this.store.convaStage.find("#floor"+this.store.selectedFloor.toString())[0].destroy();let s=this.store.convaStage.find(".drawingDistancesGroup"+this.store.selectedFloor.toString())[0].clone();this.store.convaStage.find(".drawingDistancesGroup"+this.store.selectedFloor.toString())[0]&&this.store.convaStage.find(".drawingDistancesGroup"+this.store.selectedFloor.toString())[0].destroy();let o=this.store.convaStage.find(".drawingPointsGroup"+this.store.selectedFloor.toString())[0].clone();this.store.convaStage.find(".drawingPointsGroup"+this.store.selectedFloor.toString())[0]&&this.store.convaStage.find(".drawingPointsGroup"+this.store.selectedFloor.toString())[0].destroy();const a=new ke.Group({id:"floor"+this.store.selectedFloor.toString()});let l=new ke.Line({name:"permanentLine"+this.store.selectedFloor.toString(),stroke:"black",strokeWidth:2,lineCap:"round",opacity:.3});this.store.convaStage.find("#baseLayer")[0].add(a),l.points(this.store.lineConfig.points()),this.store.lineConfig.points([]),a.add(l),a.add(s),a.add(o),!this.store.draggingCorner&&!this.store.draggingEdge&&this.changeFloor(this.store.selectedFloor)}this.store.setPointsTextArray([]),this.store.setPointsTextArray(n)},drawHelpLineEdges(t){this.store.convaStage.findOne("#tempHelplineGroup")&&this.store.convaStage.findOne("#tempHelplineGroup").destroy();const e=new ke.Group({id:"tempHelplineGroup",name:"tempHelplineGroup"});this.store.convaStage.find("#tempLayer")[0].add(e);let n=Array.from(new Set(t.map(u=>u[0]))),r=Array.from(new Set(t.map(u=>u[1]))),i;this.store.convaStage.find("#tempConstructionElement")[0]&&(i=this.store.convaStage.find("#tempConstructionElement")[0].getAttrs());let s=[],o=[];if(i){let u=this.getMaxXOfFlatArray(i.points),c=this.getMaxYOfFlatArray(i.points);for(let f=-15;f<16;f++)s.push(Math.round(i.x+f+u/2)),s.push(Math.round(i.x+f-u/2)),o.push(Math.round(i.y+f+c/2)),o.push(Math.round(i.y+f-c/2))}else{const u=this.store.posX,c=this.store.posY;for(let f=-15;f<16;f++)s.push(Math.round(u+f)),o.push(Math.round(c+f))}let a=[],l=[];n.some(u=>{if(s.indexOf(u)>=0){let c=[];c.push(u),c.push(-document.body.clientHeight),c.push(u),c.push(document.body.clientHeight*2),a=new ke.Line({name:"helpLineX",stroke:"grey",points:c,strokeWidth:3,lineCap:"round",dash:[10,5]}),e.add(a)}}),r.some(u=>{if(o.indexOf(u)>=0){let c=[];c.push(-document.body.clientWidth),c.push(u),c.push(document.body.clientWidth*2),c.push(u),l=new ke.Line({name:"helpLineY",stroke:"grey",points:c,strokeWidth:3,lineCap:"round",dash:[10,5]}),e.add(l)}}),e.moveToBottom()},resetAddFloorplanDrawing(){if(this.store.drawing){this.store.setMouseLocked(!1),this.store.tempLineArray=null;const t=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.floorHeight;this.store.getLineArrayBuilding[this.store.selectedFloor].floor=JSON.parse(JSON.stringify(this.store.getLineArrayBuildingFloorDummy)),this.store.getLineArrayBuilding[this.store.selectedFloor].floor.floorHeight=JSON.parse(JSON.stringify(t)),this.store.lineArray=[],this.store.realAnglesArray=[],this.store.lineConfig.points([]),this.store.convaStage.find(".drawingDistancesGroup"+this.store.selectedFloor.toString())[0]&&this.store.convaStage.find(".drawingDistancesGroup"+this.store.selectedFloor.toString())[0].destroy(),this.store.convaStage.find(".drawingPointsGroup"+this.store.selectedFloor.toString())[0]&&this.store.convaStage.find(".drawingPointsGroup"+this.store.selectedFloor.toString())[0].destroy(),this.store.convaStage.findOne("#distanceTextGroup")&&this.store.convaStage.findOne("#distanceTextGroup").destroy(),this.store.convaStage.findOne("#tempRectangle")&&this.store.convaStage.findOne("#tempRectangle").destroy(),this.store.tempDistanceTextConfig.length!==0&&this.store.tempDistanceTextConfig.hide(),this.store.distanceTextConfig.visible&&(this.store.distanceTextConfig=[]),this.store.tempLineConfig.visible&&this.store.tempLineConfig.points([]),this.store.setIsDrawing(!1)}},resetAddConstructionElement(){},resetAddPartialAreaDrawing(){this.facadeStore.tempPartialArea=[],this.facadeStore.setAddPartialArea(!1),this.store.setMouseLocked(!1),this.store.tempLineConfig.hide(),this.store.tempLineConfig.points([]),this.store.helpLineXConfig.points([]),this.store.helpLineYConfig.points([]),this.store.convaStage.getStage().container().style.cursor="default",this.store.tempCursorConfig.hide(),this.store.convaStage.findOne("#tempFreeFormPartialArea")&&this.store.convaStage.findOne("#tempFreeFormPartialArea").destroy(),this.store.convaStage.findOne("#tempRectangle")&&this.store.convaStage.findOne("#tempRectangle").destroy(),this.drawConstructionElementDistances()}}},sc={mixins:[zr,Vr],data(){return{store:we(),rect_size:12}},computed:{},methods:{updateDragElements(){if(!this.store.drawing){const t="#baseLayer";this.calcCornerpoints(this.store.lineArray,t),this.calcRectangles()}},updateDragPartialAreaElement(){let t=this.facadeStore.getEditSelectedElement;if(t&&t.floorIndex!==void 0&&t.wallIndex!==void 0&&t.elementIndex!==void 0&&!this.store.drawing){const e=this.store.getLineArrayBuilding[t.floorIndex].floor.wall[t.wallIndex],n=e.partialArea[t.elementIndex].pointsArray,r=[];for(const s of n)r.push([s[0]+e.pointsArray[0][0],s[1]+e.pointsArray[0][1]]);const i="#tempLayer";this.calcCornerpoints(r,i)}},calcCornerpoints(t,e){this.store.convaStage.find(".draggingCornerGroup")[0]&&this.store.convaStage.find(".draggingCornerGroup")[0].destroy();const n=new ke.Group({id:"draggingCornerGroup",name:"draggingCornerGroup"}),r=[];let i=this.rect_size/this.store.getZoomFactor,s=i/2;for(let o=0;o<t.length-1;o++)r.push({id:"cornerPoints_"+o.toString(),name:"cornerPoints",x:t[o][0],y:t[o][1],offsetX:s,offsetY:s,fill:"black",width:i,height:i,draggable:!0,visible:!0});r.forEach(o=>{n.add(new ke.Rect(o))}),this.store.convaStage.find(`${e}`)[0].add(n)},calcRectangles(){this.store.draggingEdgeGroup!==null&&this.store.draggingEdgeGroup.destroy(),this.store.setDraggingEdgeGroup(new ke.Group),this.store.convaStage.find("#baseLayer")[0].add(this.store.draggingEdgeGroup),this.store.setDraggableSidesConfig([]),this.store.setVisibleSidesConfig([]),this.lineArrayBackup=JSON.parse(JSON.stringify(this.store.lineArray));for(let h=0;h<this.store.lineArray.length-1;h++){var t=this.getCentroid([this.store.lineArray[h],this.store.lineArray[h+1]]),e=this.store.lineArray[h][0],n=this.store.lineArray[h+1][0],r=this.store.lineArray[h][1],i=this.store.lineArray[h+1][1],s=(i-r)/(n-e),o=this.getDistance(e,r,n,i)+2,a=6;this.store.visibleSidesConfig.push({id:"edgeLine_"+h.toString(),name:"edgeLine",lineIndex:[h,h+1],x:t[0],y:t[1],offsetX:o/2,offsetY:a/2,width:o,height:a,draggable:!1,opacity:0,visible:!0,slope:s,rotation:Math.atan(s)*180/Math.PI,listening:!1,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,stroke:"red"});var l=o-this.rect_size*2,u=40,c=h==0?[this.store.lineArray.length-2,h]:[h-1,h],f=h==this.store.lineArray.length-2?[0,1]:[h+1,h+2];this.store.draggableSidesConfig.push({id:"dragEdge_"+h.toString(),name:"dragEdge",lineIndex:[h,h+1],prevLine:c,nextLine:f,x:t[0],y:t[1],offsetX:l/2,offsetY:u/2,width:l,height:u,fill:"black",draggable:!0,opacity:0,visible:!0,slope:s,rotation:Math.atan(s)*180/Math.PI,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,stroke:"green"})}this.store.visibleSidesConfig.forEach(h=>{this.store.draggingEdgeGroup.add(new ke.Rect(h))}),this.store.draggableSidesConfig.forEach(h=>{this.store.draggingEdgeGroup.add(new ke.Rect(h))})},calcLineIntersection(t,e,n,r,i,s,o,a){var l=(a-s)*(n-t)-(o-i)*(r-e);if(l===0)return!1;var u=((o-i)*(e-s)-(a-s)*(t-i))/l,c=t+u*(n-t),f=e+u*(r-e);return[c,f]},updateCanvas(){var t=[],e=[],n=[];for(let i=0;i<this.store.tempLineArray.length-1;i++){t.push(this.getDistance(this.store.tempLineArray[i][0],this.store.tempLineArray[i][1],this.store.tempLineArray[i+1][0],this.store.tempLineArray[i+1][1]));let s=this.store.tempLineArray[i][0],o=this.store.tempLineArray[i][1],a=this.store.tempLineArray[i+1][0],l=this.store.tempLineArray[i+1][1],u=Math.atan2(l-o,a-s)*180/Math.PI;if(Math.ceil(u)-u<=.5?u=Math.ceil(u):u=Math.floor(u),e.push(u),t[i]>=0){let c=Math.round((this.store.tempLineArray[i][0]+this.store.tempLineArray[i+1][0])/2),f=Math.round((this.store.tempLineArray[i][1]+this.store.tempLineArray[i+1][1])/2),h=this.store.zoomFactor<.5?Math.round(12/this.store.zoomFactor):Math.round(14/this.store.zoomFactor),d=h,p=t.at(-1)+50,g=e[i],x=[c,f],_=Math.round(d*Math.cos(g*Math.PI/180)+x[0]),m=Math.round(d*Math.sin(g*Math.PI/180)+x[1]),v=this.rotatePoint(x,[_,m],90),b=this.rotatePoint(x,[_,m],-90);t[i]>=50?this.checkPointInsidePolygon(this.store.tempLineArray,v)?(c=Math.round(v[0]),f=Math.round(v[1])):(c=Math.round(b[0]),f=Math.round(b[1])):this.checkPointInsidePolygon(this.store.tempLineArray,v)?(c=Math.round(b[0]),f=Math.round(b[1])):(c=Math.round(v[0]),f=Math.round(v[1]));let w=g;this.checkPolygonClockwise(this.store.tempLineArray),w>=-180&&w<=-90?w+=180:w>90&&w<=180&&(w-=180),n.push({x:c,y:f,width:p,height:h,offsetX:p/2,offsetY:h/2,align:"center",text:t[i]+" cm",fontSize:h,fontStyle:"bold",fill:"black",rotation:w,opacity:1,listening:!1})}}this.store.setRealAngleArray(e),this.store.getLineArrayBuilding[this.store.selectedFloor].distaneArray=t,this.store.setDistanceTextArray(n);let r=this.store.tempLineArray.flat();this.store.lineConfig.setAttr("points",r)},updateBeforeDrag(){},updateAfterDrag(){this.triggerAutoZoom()},resetTemporaryNodes(){this.store.tempLineConfig.points([]),this.store.helpLineXConfig.points([]),this.store.helpLineYConfig.points([]),this.store.setDistanceTextConfig({x:0,y:0,text:"",fontSize:18/this.store.zoomFactor}),this.store.enableAngles&&this.store.mouseLocked&&(this.store.mouseLocked=!1,this.store.convaStage.container().style.cursor="crosshair")},triggerAutoZoom(){this.centerPolygon(),this.showCanvas=!1,setTimeout(()=>{this.autoZoom()},0)},autoZoom(){this.resetZoom();let t=this.getCorners(this.store.lineArray),e=this.getDistance(t[0][0],t[0][1],t[1][0],t[1][1])+200,n=this.getDistance(t[0][0],t[0][1],t[3][0],t[3][1])+200,r=this.store.configKonva.width,i=this.store.configKonva.height,s=r/e,o=i/n,a=this.store.zoomInMax,l=this.store.zoomOutMax;s>1&&o>1?(this.scaleBy=s<o?s:o,this.scaleBy>a&&(this.scaleBy=a),this.zoom(!0)):(this.scaleBy=s<o?s:o,this.scaleBy<l&&(this.scaleBy=l),this.zoom(!0)),this.showCanvas=!0},zoom(t){if(!(this.store.zoomFactor<this.store.zoomOutMax&&!t||this.store.zoomFactor>this.store.zoomInMax&&t)){{let e=this.store.configKonva.scale.x,n={x:this.store.configKonva.width/2,y:this.store.configKonva.height/2},r={x:(n.x-this.store.configKonva.position.x)/e,y:(n.y-this.store.configKonva.position.y)/e},i=t?e*this.scaleBy:e/this.scaleBy,s={x:n.x-r.x*i,y:n.y-r.y*i};this.store.configKonva.draggable,this.store.setConfigKonva({width:this.store.canvasWidth,height:this.store.canvasHeight,scale:{x:i,y:i},position:s}),this.store.drawing&&this.store.cursorConfig&&(this.store.cursorConfig.width=this.store.cursorConfig.image.naturalWidth/i,this.store.cursorConfig.height=this.store.cursorConfig.image.naturalHeight/i,this.store.cursorConfig.offsetX=this.store.cursorConfig.width/2,this.store.cursorConfig.offsetY=this.store.cursorConfig.height/2),this.store.setZoomFactor(i),this.writeDistances(),this.writePoints(),this.setBenchmarkSize()}this.scaleBy=1.15}},resetZoom(){let t=this.store.configKonva.scale.x,e={x:this.store.configKonva.width/2,y:this.store.configKonva.height/2},n={x:(e.x-this.store.configKonva.position.x)/t,y:(e.y-this.store.configKonva.position.y)/t},r=1,i={x:e.x-n.x*r,y:e.y-n.y*r};this.store.configKonva.draggable,this.store.setConfigKonva({width:this.store.canvasWidth,height:this.store.canvasHeight,scale:{x:r,y:r},position:i}),this.store.setZoomFactor(r),this.writeDistances(),this.writePoints(),this.zoomBenchmark=0,this.setBenchmarkSize()},centerPolygon(){this.store.configKonva.width/2,this.store.configKonva.height/2;let t,e=this.store.lineArray[0],n=this.store.lineArray;n!==void 0?t=n:t=e,this.store.setConfigKonva({width:this.store.canvasWidth,height:this.store.canvasHeight,scale:{x:1,y:1},position:{x:0,y:0}});for(let s=0;s<t.length;s++)t.length-1===s?(t[s][0]=t[0][0],t[s][1]=t[0][1]):(t[s][0]=t[s][0],t[s][1]=t[s][1]);let r=[];r=t,this.store.setLineArray([]),this.store.setLineArray(r),this.store.setFloorLineArray(this.store.selectedFloor,[]),this.store.setFloorLineArray(this.store.selectedFloor,r);let i=[];for(let s=0;s<t.length-1;s++)i.push([Math.round(t[s][0]-this.offsetX),Math.round(t[s][1]-this.offsetY)]);this.showCanvas=!0},setBenchmarkSize(){!!document.getElementById("div.benchmark")&&document.querySelector("div.benchmark").style.setProperty("--box-size",this.interval*this.zoomFactor)}}};var yi=63710088e-1,V2={centimeters:yi*100,centimetres:yi*100,degrees:yi/111325,feet:yi*3.28084,inches:yi*39.37,kilometers:yi/1e3,kilometres:yi/1e3,meters:yi,metres:yi,miles:yi/1609.344,millimeters:yi*1e3,millimetres:yi*1e3,nauticalmiles:yi/1852,radians:1,yards:yi*1.0936},Dpe={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/yi,yards:1.0936133},NE={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function to(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Tpe(t,e,n){switch(t){case"Point":return rs(e).geometry;case"LineString":return os(e).geometry;case"Polygon":return sn(e).geometry;case"MultiPoint":return Qz(e).geometry;case"MultiLineString":return z2(e).geometry;case"MultiPolygon":return uv(e).geometry;default:throw new Error(t+" is invalid")}}function rs(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!q1(t[0])||!q1(t[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:t};return to(r,e,n)}function Ppe(t,e,n){return n===void 0&&(n={}),Wu(t.map(function(r){return rs(r,e)}),n)}function sn(t,e,n){n===void 0&&(n={});for(var r=0,i=t;r<i.length;r++){var s=i[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<s[s.length-1].length;o++)if(s[s.length-1][o]!==s[0][o])throw new Error("First and last Position are not equivalent.")}var a={type:"Polygon",coordinates:t};return to(a,e,n)}function Lpe(t,e,n){return n===void 0&&(n={}),Wu(t.map(function(r){return sn(r,e)}),n)}function os(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:t};return to(r,e,n)}function Fpe(t,e,n){return n===void 0&&(n={}),Wu(t.map(function(r){return os(r,e)}),n)}function Wu(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function z2(t,e,n){n===void 0&&(n={});var r={type:"MultiLineString",coordinates:t};return to(r,e,n)}function Qz(t,e,n){n===void 0&&(n={});var r={type:"MultiPoint",coordinates:t};return to(r,e,n)}function uv(t,e,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:t};return to(r,e,n)}function Ipe(t,e,n){n===void 0&&(n={});var r={type:"GeometryCollection",geometries:t};return to(r,e,n)}function kpe(t,e){if(e===void 0&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function eG(t,e){e===void 0&&(e="kilometers");var n=V2[e];if(!n)throw new Error(e+" units is invalid");return t*n}function G2(t,e){e===void 0&&(e="kilometers");var n=V2[e];if(!n)throw new Error(e+" units is invalid");return t/n}function Rpe(t,e){return tG(G2(t,e))}function Ope(t){var e=t%360;return e<0&&(e+=360),e}function tG(t){var e=t%(2*Math.PI);return e*180/Math.PI}function Bpe(t){var e=t%360;return e*Math.PI/180}function Npe(t,e,n){if(e===void 0&&(e="kilometers"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return eG(G2(t,e),n)}function Vpe(t,e,n){if(e===void 0&&(e="meters"),n===void 0&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var r=NE[e];if(!r)throw new Error("invalid original units");var i=NE[n];if(!i)throw new Error("invalid final units");return t/r*i}function q1(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function U2(t){return!!t&&t.constructor===Object}function zpe(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(t.length!==4&&t.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(e){if(!q1(e))throw new Error("bbox must only contain numbers")})}function Gpe(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}const Upe=Object.freeze(Object.defineProperty({__proto__:null,earthRadius:yi,factors:V2,unitsFactors:Dpe,areaFactors:NE,feature:to,geometry:Tpe,point:rs,points:Ppe,polygon:sn,polygons:Lpe,lineString:os,lineStrings:Fpe,featureCollection:Wu,multiLineString:z2,multiPoint:Qz,multiPolygon:uv,geometryCollection:Ipe,round:kpe,radiansToLength:eG,lengthToRadians:G2,lengthToDegrees:Rpe,bearingToAzimuth:Ope,radiansToDegrees:tG,degreesToRadians:Bpe,convertLength:Npe,convertArea:Vpe,isNumber:q1,isObject:U2,validateBBox:zpe,validateId:Gpe},Symbol.toStringTag,{value:"Module"}));function Cl(t,e,n){if(t!==null)for(var r,i,s,o,a,l,u,c=0,f=0,h,d=t.type,p=d==="FeatureCollection",g=d==="Feature",x=p?t.features.length:1,_=0;_<x;_++){u=p?t.features[_].geometry:g?t.geometry:t,h=u?u.type==="GeometryCollection":!1,a=h?u.geometries.length:1;for(var m=0;m<a;m++){var v=0,b=0;if(o=h?u.geometries[m]:u,o!==null){l=o.coordinates;var w=o.type;switch(c=n&&(w==="Polygon"||w==="MultiPolygon")?1:0,w){case null:break;case"Point":if(e(l,f,_,v,b)===!1)return!1;f++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],f,_,v,b)===!1)return!1;f++,w==="MultiPoint"&&v++}w==="LineString"&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-c;i++){if(e(l[r][i],f,_,v,b)===!1)return!1;f++}w==="MultiLineString"&&v++,w==="Polygon"&&b++}w==="Polygon"&&v++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-c;s++){if(e(l[r][i][s],f,_,v,b)===!1)return!1;f++}b++}v++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(Cl(o.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Hpe(t,e,n,r){var i=n;return Cl(t,function(s,o,a,l,u){o===0&&n===void 0?i=s:i=e(i,s,o,a,l,u)},r),i}function nG(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&e(t.features[n].properties,n)!==!1;n++);break;case"Feature":e(t.properties,0);break}}function Wpe(t,e,n){var r=n;return nG(t,function(i,s){s===0&&n===void 0?r=i:r=e(r,i,s)}),r}function J1(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function $pe(t,e,n){var r=n;return J1(t,function(i,s){s===0&&n===void 0?r=i:r=e(r,i,s)}),r}function Xpe(t){var e=[];return Cl(t,function(n){e.push(n)}),e}function H2(t,e){var n,r,i,s,o,a,l,u,c,f,h=0,d=t.type==="FeatureCollection",p=t.type==="Feature",g=d?t.features.length:1;for(n=0;n<g;n++){for(a=d?t.features[n].geometry:p?t.geometry:t,u=d?t.features[n].properties:p?t.properties:{},c=d?t.features[n].bbox:p?t.bbox:void 0,f=d?t.features[n].id:p?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,h,u,c,f)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,h,u,c,f)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],h,u,c,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function Ype(t,e,n){var r=n;return H2(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function cv(t,e){H2(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(to(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var c=n.coordinates[u],f={type:l,coordinates:c};if(e(to(f,i),r,u)===!1)return!1}})}function jpe(t,e,n){var r=n;return cv(t,function(i,s,o){s===0&&o===0&&n===void 0?r=i:r=e(r,i,s,o)}),r}function rG(t,e){cv(t,function(n,r,i){var s=0;if(!!n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,u=0,c=0;if(Cl(n,function(f,h,d,p,g){if(a===void 0||r>l||p>u||g>c){a=f,l=r,u=p,c=g,s=0;return}var x=os([a,f],n.properties);if(e(x,r,i,g,s)===!1)return!1;s++,a=f})===!1)return!1}}})}function qpe(t,e,n){var r=n,i=!1;return rG(t,function(s,o,a,l,u){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,u),i=!0}),r}function iG(t,e){if(!t)throw new Error("geojson is required");cv(t,function(n,r,i){if(n.geometry!==null){var s=n.geometry.type,o=n.geometry.coordinates;switch(s){case"LineString":if(e(n,r,i,0,0)===!1)return!1;break;case"Polygon":for(var a=0;a<o.length;a++)if(e(os(o[a],n.properties),r,i,a)===!1)return!1;break}}})}function Jpe(t,e,n){var r=n;return iG(t,function(i,s,o,a){s===0&&n===void 0?r=i:r=e(r,i,s,o,a)}),r}function Kpe(t,e){if(e=e||{},!U2(e))throw new Error("options is invalid");var n=e.featureIndex||0,r=e.multiFeatureIndex||0,i=e.geometryIndex||0,s=e.segmentIndex||0,o=e.properties,a;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),o=o||t.features[n].properties,a=t.features[n].geometry;break;case"Feature":o=o||t.properties,a=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=t;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),os([l[s],l[s+1]],o,e);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s-1),os([l[i][s],l[i][s+1]],o,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s-1),os([l[r][s],l[r][s+1]],o,e);case"MultiPolygon":return r<0&&(r=l.length+r),i<0&&(i=l[r].length+i),s<0&&(s=l[r][i].length-s-1),os([l[r][i][s],l[r][i][s+1]],o,e)}throw new Error("geojson is invalid")}function Zpe(t,e){if(e=e||{},!U2(e))throw new Error("options is invalid");var n=e.featureIndex||0,r=e.multiFeatureIndex||0,i=e.geometryIndex||0,s=e.coordIndex||0,o=e.properties,a;switch(t.type){case"FeatureCollection":n<0&&(n=t.features.length+n),o=o||t.features[n].properties,a=t.features[n].geometry;break;case"Feature":o=o||t.properties,a=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":a=t;break;default:throw new Error("geojson is invalid")}if(a===null)return null;var l=a.coordinates;switch(a.type){case"Point":return rs(l,o,e);case"MultiPoint":return r<0&&(r=l.length+r),rs(l[r],o,e);case"LineString":return s<0&&(s=l.length+s),rs(l[s],o,e);case"Polygon":return i<0&&(i=l.length+i),s<0&&(s=l[i].length+s),rs(l[i][s],o,e);case"MultiLineString":return r<0&&(r=l.length+r),s<0&&(s=l[r].length+s),rs(l[r][s],o,e);case"MultiPolygon":return r<0&&(r=l.length+r),i<0&&(i=l[r].length+i),s<0&&(s=l[r][i].length-s),rs(l[r][i][s],o,e)}throw new Error("geojson is invalid")}const Qpe=Object.freeze(Object.defineProperty({__proto__:null,coordAll:Xpe,coordEach:Cl,coordReduce:Hpe,featureEach:J1,featureReduce:$pe,findPoint:Zpe,findSegment:Kpe,flattenEach:cv,flattenReduce:jpe,geomEach:H2,geomReduce:Ype,lineEach:iG,lineReduce:Jpe,propEach:nG,propReduce:Wpe,segmentEach:rG,segmentReduce:qpe},Symbol.toStringTag,{value:"Module"}));function VE(t){var e=[1/0,1/0,-1/0,-1/0];return Cl(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}VE.default=VE;const ege=Object.freeze(Object.defineProperty({__proto__:null,default:VE},Symbol.toStringTag,{value:"Module"}));function sG(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Mm(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ia(t){return t.type==="Feature"?t.geometry:t}function tge(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}var W2={exports:{}},oG={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Ku,function(){function n(m,v,b,w,A){(function E(S,C,M,D,T){for(;D>M;){if(D-M>600){var L=D-M+1,F=C-M+1,k=Math.log(L),I=.5*Math.exp(2*k/3),O=.5*Math.sqrt(k*I*(L-I)/L)*(F-L/2<0?-1:1),$=Math.max(M,Math.floor(C-F*I/L+O)),N=Math.min(D,Math.floor(C+(L-F)*I/L+O));E(S,C,$,N,T)}var W=S[C],H=M,K=D;for(r(S,M,C),T(S[D],W)>0&&r(S,M,D);H<K;){for(r(S,H,K),H++,K--;T(S[H],W)<0;)H++;for(;T(S[K],W)>0;)K--}T(S[M],W)===0?r(S,M,K):r(S,++K,D),K<=C&&(M=K+1),C<=K&&(D=K-1)}})(m,v,b||0,w||m.length-1,A||i)}function r(m,v,b){var w=m[v];m[v]=m[b],m[b]=w}function i(m,v){return m<v?-1:m>v?1:0}var s=function(m){m===void 0&&(m=9),this._maxEntries=Math.max(4,m),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(m,v,b){if(!b)return v.indexOf(m);for(var w=0;w<v.length;w++)if(b(m,v[w]))return w;return-1}function a(m,v){l(m,0,m.children.length,v,m)}function l(m,v,b,w,A){A||(A=x(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var E=v;E<b;E++){var S=m.children[E];u(A,m.leaf?w(S):S)}return A}function u(m,v){return m.minX=Math.min(m.minX,v.minX),m.minY=Math.min(m.minY,v.minY),m.maxX=Math.max(m.maxX,v.maxX),m.maxY=Math.max(m.maxY,v.maxY),m}function c(m,v){return m.minX-v.minX}function f(m,v){return m.minY-v.minY}function h(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function d(m){return m.maxX-m.minX+(m.maxY-m.minY)}function p(m,v){return m.minX<=v.minX&&m.minY<=v.minY&&v.maxX<=m.maxX&&v.maxY<=m.maxY}function g(m,v){return v.minX<=m.maxX&&v.minY<=m.maxY&&v.maxX>=m.minX&&v.maxY>=m.minY}function x(m){return{children:m,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(m,v,b,w,A){for(var E=[v,b];E.length;)if(!((b=E.pop())-(v=E.pop())<=w)){var S=v+Math.ceil((b-v)/w/2)*w;n(m,S,v,b,A),E.push(v,S,S,b)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(m){var v=this.data,b=[];if(!g(m,v))return b;for(var w=this.toBBox,A=[];v;){for(var E=0;E<v.children.length;E++){var S=v.children[E],C=v.leaf?w(S):S;g(m,C)&&(v.leaf?b.push(S):p(m,C)?this._all(S,b):A.push(S))}v=A.pop()}return b},s.prototype.collides=function(m){var v=this.data;if(!g(m,v))return!1;for(var b=[];v;){for(var w=0;w<v.children.length;w++){var A=v.children[w],E=v.leaf?this.toBBox(A):A;if(g(m,E)){if(v.leaf||p(m,E))return!0;b.push(A)}}v=b.pop()}return!1},s.prototype.load=function(m){if(!m||!m.length)return this;if(m.length<this._minEntries){for(var v=0;v<m.length;v++)this.insert(m[v]);return this}var b=this._build(m.slice(),0,m.length-1,0);if(this.data.children.length)if(this.data.height===b.height)this._splitRoot(this.data,b);else{if(this.data.height<b.height){var w=this.data;this.data=b,b=w}this._insert(b,this.data.height-b.height-1,!0)}else this.data=b;return this},s.prototype.insert=function(m){return m&&this._insert(m,this.data.height-1),this},s.prototype.clear=function(){return this.data=x([]),this},s.prototype.remove=function(m,v){if(!m)return this;for(var b,w,A,E=this.data,S=this.toBBox(m),C=[],M=[];E||C.length;){if(E||(E=C.pop(),w=C[C.length-1],b=M.pop(),A=!0),E.leaf){var D=o(m,E.children,v);if(D!==-1)return E.children.splice(D,1),C.push(E),this._condense(C),this}A||E.leaf||!p(E,S)?w?(b++,E=w.children[b],A=!1):E=null:(C.push(E),M.push(b),b=0,w=E,E=E.children[0])}return this},s.prototype.toBBox=function(m){return m},s.prototype.compareMinX=function(m,v){return m.minX-v.minX},s.prototype.compareMinY=function(m,v){return m.minY-v.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(m){return this.data=m,this},s.prototype._all=function(m,v){for(var b=[];m;)m.leaf?v.push.apply(v,m.children):b.push.apply(b,m.children),m=b.pop();return v},s.prototype._build=function(m,v,b,w){var A,E=b-v+1,S=this._maxEntries;if(E<=S)return a(A=x(m.slice(v,b+1)),this.toBBox),A;w||(w=Math.ceil(Math.log(E)/Math.log(S)),S=Math.ceil(E/Math.pow(S,w-1))),(A=x([])).leaf=!1,A.height=w;var C=Math.ceil(E/S),M=C*Math.ceil(Math.sqrt(S));_(m,v,b,M,this.compareMinX);for(var D=v;D<=b;D+=M){var T=Math.min(D+M-1,b);_(m,D,T,C,this.compareMinY);for(var L=D;L<=T;L+=C){var F=Math.min(L+C-1,T);A.children.push(this._build(m,L,F,w-1))}}return a(A,this.toBBox),A},s.prototype._chooseSubtree=function(m,v,b,w){for(;w.push(v),!v.leaf&&w.length-1!==b;){for(var A=1/0,E=1/0,S=void 0,C=0;C<v.children.length;C++){var M=v.children[C],D=h(M),T=(L=m,F=M,(Math.max(F.maxX,L.maxX)-Math.min(F.minX,L.minX))*(Math.max(F.maxY,L.maxY)-Math.min(F.minY,L.minY))-D);T<E?(E=T,A=D<A?D:A,S=M):T===E&&D<A&&(A=D,S=M)}v=S||v.children[0]}var L,F;return v},s.prototype._insert=function(m,v,b){var w=b?m:this.toBBox(m),A=[],E=this._chooseSubtree(w,this.data,v,A);for(E.children.push(m),u(E,w);v>=0&&A[v].children.length>this._maxEntries;)this._split(A,v),v--;this._adjustParentBBoxes(w,A,v)},s.prototype._split=function(m,v){var b=m[v],w=b.children.length,A=this._minEntries;this._chooseSplitAxis(b,A,w);var E=this._chooseSplitIndex(b,A,w),S=x(b.children.splice(E,b.children.length-E));S.height=b.height,S.leaf=b.leaf,a(b,this.toBBox),a(S,this.toBBox),v?m[v-1].children.push(S):this._splitRoot(b,S)},s.prototype._splitRoot=function(m,v){this.data=x([m,v]),this.data.height=m.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(m,v,b){for(var w,A,E,S,C,M,D,T=1/0,L=1/0,F=v;F<=b-v;F++){var k=l(m,0,F,this.toBBox),I=l(m,F,b,this.toBBox),O=(A=k,E=I,S=void 0,C=void 0,M=void 0,D=void 0,S=Math.max(A.minX,E.minX),C=Math.max(A.minY,E.minY),M=Math.min(A.maxX,E.maxX),D=Math.min(A.maxY,E.maxY),Math.max(0,M-S)*Math.max(0,D-C)),$=h(k)+h(I);O<T?(T=O,w=F,L=$<L?$:L):O===T&&$<L&&(L=$,w=F)}return w||b-v},s.prototype._chooseSplitAxis=function(m,v,b){var w=m.leaf?this.compareMinX:c,A=m.leaf?this.compareMinY:f;this._allDistMargin(m,v,b,w)<this._allDistMargin(m,v,b,A)&&m.children.sort(w)},s.prototype._allDistMargin=function(m,v,b,w){m.children.sort(w);for(var A=this.toBBox,E=l(m,0,v,A),S=l(m,b-v,b,A),C=d(E)+d(S),M=v;M<b-v;M++){var D=m.children[M];u(E,m.leaf?A(D):D),C+=d(E)}for(var T=b-v-1;T>=v;T--){var L=m.children[T];u(S,m.leaf?A(L):L),C+=d(S)}return C},s.prototype._adjustParentBBoxes=function(m,v,b){for(var w=b;w>=0;w--)u(v[w],m)},s.prototype._condense=function(m){for(var v=m.length-1,b=void 0;v>=0;v--)m[v].children.length===0?v>0?(b=m[v-1].children).splice(b.indexOf(m[v]),1):this.clear():a(m[v],this.toBBox)},s})})(oG);class nge{constructor(e=[],n=rge){if(this.data=e,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:n,compare:r}=this,i=n[e];for(;e>0;){const s=e-1>>1,o=n[s];if(r(i,o)>=0)break;n[e]=o,e=s}n[e]=i}_down(e){const{data:n,compare:r}=this,i=this.length>>1,s=n[e];for(;e<i;){let o=(e<<1)+1,a=n[o];const l=o+1;if(l<this.length&&r(n[l],a)<0&&(o=l,a=n[l]),r(a,s)>=0)break;n[e]=a,e=o}n[e]=s}}function rge(t,e){return t<e?-1:t>e?1:0}const ige=Object.freeze(Object.defineProperty({__proto__:null,default:nge},Symbol.toStringTag,{value:"Module"})),sge=Ym(ige);var ow={exports:{}},oge=function(e,n,r,i){var s=e[0],o=e[1],a=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var l=(i-r)/2,u=0,c=l-1;u<l;c=u++){var f=n[r+u*2+0],h=n[r+u*2+1],d=n[r+c*2+0],p=n[r+c*2+1],g=h>o!=p>o&&s<(d-f)*(o-h)/(p-h)+f;g&&(a=!a)}return a},age=function(e,n,r,i){var s=e[0],o=e[1],a=!1;r===void 0&&(r=0),i===void 0&&(i=n.length);for(var l=i-r,u=0,c=l-1;u<l;c=u++){var f=n[u+r][0],h=n[u+r][1],d=n[c+r][0],p=n[c+r][1],g=h>o!=p>o&&s<(d-f)*(o-h)/(p-h)+f;g&&(a=!a)}return a},aG=oge,lG=age;ow.exports=function(e,n,r,i){return n.length>0&&Array.isArray(n[0])?lG(e,n,r,i):aG(e,n,r,i)};ow.exports.nested=lG;ow.exports.flat=aG;var zE={exports:{}};(function(t,e){(function(n,r){r(e)})(Ku,function(n){const i=33306690738754706e-32;function s(g,x,_,m,v){let b,w,A,E,S=x[0],C=m[0],M=0,D=0;C>S==C>-S?(b=S,S=x[++M]):(b=C,C=m[++D]);let T=0;if(M<g&&D<_)for(C>S==C>-S?(A=b-((w=S+b)-S),S=x[++M]):(A=b-((w=C+b)-C),C=m[++D]),b=w,A!==0&&(v[T++]=A);M<g&&D<_;)C>S==C>-S?(A=b-((w=b+S)-(E=w-b))+(S-E),S=x[++M]):(A=b-((w=b+C)-(E=w-b))+(C-E),C=m[++D]),b=w,A!==0&&(v[T++]=A);for(;M<g;)A=b-((w=b+S)-(E=w-b))+(S-E),S=x[++M],b=w,A!==0&&(v[T++]=A);for(;D<_;)A=b-((w=b+C)-(E=w-b))+(C-E),C=m[++D],b=w,A!==0&&(v[T++]=A);return b===0&&T!==0||(v[T++]=b),T}function o(g){return new Float64Array(g)}const a=33306690738754716e-32,l=22204460492503146e-32,u=11093356479670487e-47,c=o(4),f=o(8),h=o(12),d=o(16),p=o(4);n.orient2d=function(g,x,_,m,v,b){const w=(x-b)*(_-v),A=(g-v)*(m-b),E=w-A;if(w===0||A===0||w>0!=A>0)return E;const S=Math.abs(w+A);return Math.abs(E)>=a*S?E:-function(C,M,D,T,L,F,k){let I,O,$,N,W,H,K,ee,Z,J,X,Q,oe,he,ve,ye,V,R;const B=C-L,j=D-L,se=M-F,Y=T-F;W=(ve=(ee=B-(K=(H=134217729*B)-(H-B)))*(J=Y-(Z=(H=134217729*Y)-(H-Y)))-((he=B*Y)-K*Z-ee*Z-K*J))-(X=ve-(V=(ee=se-(K=(H=134217729*se)-(H-se)))*(J=j-(Z=(H=134217729*j)-(H-j)))-((ye=se*j)-K*Z-ee*Z-K*J))),c[0]=ve-(X+W)+(W-V),W=(oe=he-((Q=he+X)-(W=Q-he))+(X-W))-(X=oe-ye),c[1]=oe-(X+W)+(W-ye),W=(R=Q+X)-Q,c[2]=Q-(R-W)+(X-W),c[3]=R;let G=function(U,z){let te=z[0];for(let fe=1;fe<U;fe++)te+=z[fe];return te}(4,c),le=l*k;if(G>=le||-G>=le||(I=C-(B+(W=C-B))+(W-L),$=D-(j+(W=D-j))+(W-L),O=M-(se+(W=M-se))+(W-F),N=T-(Y+(W=T-Y))+(W-F),I===0&&O===0&&$===0&&N===0)||(le=u*k+i*Math.abs(G),(G+=B*N+Y*I-(se*$+j*O))>=le||-G>=le))return G;W=(ve=(ee=I-(K=(H=134217729*I)-(H-I)))*(J=Y-(Z=(H=134217729*Y)-(H-Y)))-((he=I*Y)-K*Z-ee*Z-K*J))-(X=ve-(V=(ee=O-(K=(H=134217729*O)-(H-O)))*(J=j-(Z=(H=134217729*j)-(H-j)))-((ye=O*j)-K*Z-ee*Z-K*J))),p[0]=ve-(X+W)+(W-V),W=(oe=he-((Q=he+X)-(W=Q-he))+(X-W))-(X=oe-ye),p[1]=oe-(X+W)+(W-ye),W=(R=Q+X)-Q,p[2]=Q-(R-W)+(X-W),p[3]=R;const ge=s(4,c,4,p,f);W=(ve=(ee=B-(K=(H=134217729*B)-(H-B)))*(J=N-(Z=(H=134217729*N)-(H-N)))-((he=B*N)-K*Z-ee*Z-K*J))-(X=ve-(V=(ee=se-(K=(H=134217729*se)-(H-se)))*(J=$-(Z=(H=134217729*$)-(H-$)))-((ye=se*$)-K*Z-ee*Z-K*J))),p[0]=ve-(X+W)+(W-V),W=(oe=he-((Q=he+X)-(W=Q-he))+(X-W))-(X=oe-ye),p[1]=oe-(X+W)+(W-ye),W=(R=Q+X)-Q,p[2]=Q-(R-W)+(X-W),p[3]=R;const ae=s(ge,f,4,p,h);W=(ve=(ee=I-(K=(H=134217729*I)-(H-I)))*(J=N-(Z=(H=134217729*N)-(H-N)))-((he=I*N)-K*Z-ee*Z-K*J))-(X=ve-(V=(ee=O-(K=(H=134217729*O)-(H-O)))*(J=$-(Z=(H=134217729*$)-(H-$)))-((ye=O*$)-K*Z-ee*Z-K*J))),p[0]=ve-(X+W)+(W-V),W=(oe=he-((Q=he+X)-(W=Q-he))+(X-W))-(X=oe-ye),p[1]=oe-(X+W)+(W-ye),W=(R=Q+X)-Q,p[2]=Q-(R-W)+(X-W),p[3]=R;const ue=s(ae,h,4,p,d);return d[ue-1]}(g,x,_,m,v,b,S)},n.orient2dfast=function(g,x,_,m,v,b){return(x-b)*(_-v)-(g-v)*(m-b)},Object.defineProperty(n,"__esModule",{value:!0})})})(zE,zE.exports);var G3=oG.exports,jy=sge,lge=ow.exports,uge=zE.exports.orient2d;jy.default&&(jy=jy.default);W2.exports=uG;W2.exports.default=uG;function uG(t,e,n){e=Math.max(0,e===void 0?2:e),n=n||0;var r=pge(t),i=new G3(16);i.toBBox=function(m){return{minX:m[0],minY:m[1],maxX:m[0],maxY:m[1]}},i.compareMinX=function(m,v){return m[0]-v[0]},i.compareMinY=function(m,v){return m[1]-v[1]},i.load(t);for(var s=[],o=0,a;o<r.length;o++){var l=r[o];i.remove(l),a=W3(l,a),s.push(a)}var u=new G3(16);for(o=0;o<s.length;o++)u.insert(IS(s[o]));for(var c=e*e,f=n*n;s.length;){var h=s.shift(),d=h.p,p=h.next.p,g=kS(d,p);if(!(g<f)){var x=g/c;l=cge(i,h.prev.p,d,p,h.next.next.p,x,u),l&&Math.min(kS(l,d),kS(l,p))<=x&&(s.push(h),s.push(W3(l,h)),i.remove(l),u.remove(h),u.insert(IS(h)),u.insert(IS(h.next)))}}h=a;var _=[];do _.push(h.p),h=h.next;while(h!==a);return _.push(h.p),_}function cge(t,e,n,r,i,s,o){for(var a=new jy([],fge),l=t.data;l;){for(var u=0;u<l.children.length;u++){var c=l.children[u],f=l.leaf?RS(c,n,r):hge(n,r,c);f>s||a.push({node:c,dist:f})}for(;a.length&&!a.peek().node.children;){var h=a.pop(),d=h.node,p=RS(d,e,n),g=RS(d,r,i);if(h.dist<p&&h.dist<g&&H3(n,d,o)&&H3(r,d,o))return d}l=a.pop(),l&&(l=l.node)}return null}function fge(t,e){return t.dist-e.dist}function hge(t,e,n){if(U3(t,n)||U3(e,n))return 0;var r=fy(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(r===0)return 0;var i=fy(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(i===0)return 0;var s=fy(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(s===0)return 0;var o=fy(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return o===0?0:Math.min(r,i,s,o)}function U3(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function H3(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),s=Math.max(t[0],e[0]),o=Math.max(t[1],e[1]),a=n.search({minX:r,minY:i,maxX:s,maxY:o}),l=0;l<a.length;l++)if(dge(a[l].p,a[l].next.p,t,e))return!1;return!0}function Lh(t,e,n){return uge(t[0],t[1],e[0],e[1],n[0],n[1])}function dge(t,e,n,r){return t!==r&&e!==n&&Lh(t,e,n)>0!=Lh(t,e,r)>0&&Lh(n,r,t)>0!=Lh(n,r,e)>0}function IS(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function pge(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],s=0;s<t.length;s++){var o=t[s];o[0]<e[0]&&(e=o),o[0]>r[0]&&(r=o),o[1]<n[1]&&(n=o),o[1]>i[1]&&(i=o)}var a=[e,n,r,i],l=a.slice();for(s=0;s<t.length;s++)lge(t[s],a)||l.push(t[s]);return mge(l)}function W3(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function kS(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function RS(t,e,n){var r=e[0],i=e[1],s=n[0]-r,o=n[1]-i;if(s!==0||o!==0){var a=((t[0]-r)*s+(t[1]-i)*o)/(s*s+o*o);a>1?(r=n[0],i=n[1]):a>0&&(r+=s*a,i+=o*a)}return s=t[0]-r,o=t[1]-i,s*s+o*o}function fy(t,e,n,r,i,s,o,a){var l=n-t,u=r-e,c=o-i,f=a-s,h=t-i,d=e-s,p=l*l+u*u,g=l*c+u*f,x=c*c+f*f,_=l*h+u*d,m=c*h+f*d,v=p*x-g*g,b,w,A,E,S=v,C=v;v===0?(w=0,S=1,E=m,C=x):(w=g*m-x*_,E=p*m-g*_,w<0?(w=0,E=m,C=x):w>S&&(w=S,E=m+g,C=x)),E<0?(E=0,-_<0?w=0:-_>p?w=S:(w=-_,S=p)):E>C&&(E=C,-_+g<0?w=0:-_+g>p?w=S:(w=-_+g,S=p)),b=w===0?0:w/S,A=E===0?0:E/C;var M=(1-b)*t+b*n,D=(1-b)*e+b*r,T=(1-A)*i+A*o,L=(1-A)*s+A*a,F=T-M,k=L-D;return F*F+k*k}function gge(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function mge(t){t.sort(gge);for(var e=[],n=0;n<t.length;n++){for(;e.length>=2&&Lh(e[e.length-2],e[e.length-1],t[n])<=0;)e.pop();e.push(t[n])}for(var r=[],i=t.length-1;i>=0;i--){for(;r.length>=2&&Lh(r[r.length-2],r[r.length-1],t[i])<=0;)r.pop();r.push(t[i])}return r.pop(),e.pop(),e.concat(r)}function vge(t,e){e===void 0&&(e={}),e.concavity=e.concavity||1/0;var n=[];if(Cl(t,function(i){n.push([i[0],i[1]])}),!n.length)return null;var r=W2.exports(n,e.concavity);return r.length>3?sn([r]):null}function yge(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=sG(t),i=Ia(e),s=i.type,o=e.bbox,a=i.coordinates;if(o&&_ge(r,o)===!1)return!1;s==="Polygon"&&(a=[a]);for(var l=!1,u=0;u<a.length&&!l;u++)if($3(r,a[u][0],n.ignoreBoundary)){for(var c=!1,f=1;f<a[u].length&&!c;)$3(r,a[u][f],!n.ignoreBoundary)&&(c=!0),f++;c||(l=!0)}return l}function $3(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,s=e.length-1;i<e.length;s=i++){var o=e[i][0],a=e[i][1],l=e[s][0],u=e[s][1],c=t[1]*(o-l)+a*(l-t[0])+u*(t[0]-o)===0&&(o-t[0])*(l-t[0])<=0&&(a-t[1])*(u-t[1])<=0;if(c)return!n;var f=a>t[1]!=u>t[1]&&t[0]<(l-o)*(t[1]-a)/(u-a)+o;f&&(r=!r)}return r}function _ge(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function X3(t,e){e===void 0&&(e={});var n=0,r=0,i=0;return Cl(t,function(s){n+=s[0],r+=s[1],i++},!0),rs([n/i,r/i],e.properties)}function $2(t,e){switch(e===void 0&&(e={}),tge(t)){case"Point":return rs(sG(t),e.properties);case"Polygon":var n=[];Cl(t,function(b){n.push(b)});var r=X3(t,{properties:e.properties}),i=r.geometry.coordinates,s=0,o=0,a=0,l,u,c,f,h,d,p,g,x=n.map(function(b){return[b[0]-i[0],b[1]-i[1]]});for(l=0;l<n.length-1;l++)u=x[l],f=u[0],d=u[1],c=x[l+1],h=c[0],p=c[1],g=f*p-h*d,a+=g,s+=(f+h)*g,o+=(d+p)*g;if(a===0)return r;var _=a*.5,m=1/(6*_);return rs([i[0]+m*s,i[1]+m*o],e.properties);default:var v=vge(t);return v?$2(v,{properties:e.properties}):X3(t,{properties:e.properties})}}function Y3(t){if(!t)throw new Error("geojson is required");var e=[];return cv(t,function(n){wge(n,e)}),Wu(e)}function wge(t,e){var n=[],r=t.geometry;if(r!==null){switch(r.type){case"Polygon":n=Mm(r);break;case"LineString":n=[Mm(r)]}n.forEach(function(i){var s=bge(i,t.properties);s.forEach(function(o){o.id=e.length,e.push(o)})})}}function bge(t,e){var n=[];return t.reduce(function(r,i){var s=os([r,i],e);return s.bbox=xge(r,i),n.push(s),i}),n}function xge(t,e){var n=t[0],r=t[1],i=e[0],s=e[1],o=n<i?n:i,a=r<s?r:s,l=n>i?n:i,u=r>s?r:s;return[o,a,l,u]}var X2={exports:{}},cG={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(Ku,function(){function n(m,v,b,w,A){(function E(S,C,M,D,T){for(;D>M;){if(D-M>600){var L=D-M+1,F=C-M+1,k=Math.log(L),I=.5*Math.exp(2*k/3),O=.5*Math.sqrt(k*I*(L-I)/L)*(F-L/2<0?-1:1),$=Math.max(M,Math.floor(C-F*I/L+O)),N=Math.min(D,Math.floor(C+(L-F)*I/L+O));E(S,C,$,N,T)}var W=S[C],H=M,K=D;for(r(S,M,C),T(S[D],W)>0&&r(S,M,D);H<K;){for(r(S,H,K),H++,K--;T(S[H],W)<0;)H++;for(;T(S[K],W)>0;)K--}T(S[M],W)===0?r(S,M,K):r(S,++K,D),K<=C&&(M=K+1),C<=K&&(D=K-1)}})(m,v,b||0,w||m.length-1,A||i)}function r(m,v,b){var w=m[v];m[v]=m[b],m[b]=w}function i(m,v){return m<v?-1:m>v?1:0}var s=function(m){m===void 0&&(m=9),this._maxEntries=Math.max(4,m),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function o(m,v,b){if(!b)return v.indexOf(m);for(var w=0;w<v.length;w++)if(b(m,v[w]))return w;return-1}function a(m,v){l(m,0,m.children.length,v,m)}function l(m,v,b,w,A){A||(A=x(null)),A.minX=1/0,A.minY=1/0,A.maxX=-1/0,A.maxY=-1/0;for(var E=v;E<b;E++){var S=m.children[E];u(A,m.leaf?w(S):S)}return A}function u(m,v){return m.minX=Math.min(m.minX,v.minX),m.minY=Math.min(m.minY,v.minY),m.maxX=Math.max(m.maxX,v.maxX),m.maxY=Math.max(m.maxY,v.maxY),m}function c(m,v){return m.minX-v.minX}function f(m,v){return m.minY-v.minY}function h(m){return(m.maxX-m.minX)*(m.maxY-m.minY)}function d(m){return m.maxX-m.minX+(m.maxY-m.minY)}function p(m,v){return m.minX<=v.minX&&m.minY<=v.minY&&v.maxX<=m.maxX&&v.maxY<=m.maxY}function g(m,v){return v.minX<=m.maxX&&v.minY<=m.maxY&&v.maxX>=m.minX&&v.maxY>=m.minY}function x(m){return{children:m,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function _(m,v,b,w,A){for(var E=[v,b];E.length;)if(!((b=E.pop())-(v=E.pop())<=w)){var S=v+Math.ceil((b-v)/w/2)*w;n(m,S,v,b,A),E.push(v,S,S,b)}}return s.prototype.all=function(){return this._all(this.data,[])},s.prototype.search=function(m){var v=this.data,b=[];if(!g(m,v))return b;for(var w=this.toBBox,A=[];v;){for(var E=0;E<v.children.length;E++){var S=v.children[E],C=v.leaf?w(S):S;g(m,C)&&(v.leaf?b.push(S):p(m,C)?this._all(S,b):A.push(S))}v=A.pop()}return b},s.prototype.collides=function(m){var v=this.data;if(!g(m,v))return!1;for(var b=[];v;){for(var w=0;w<v.children.length;w++){var A=v.children[w],E=v.leaf?this.toBBox(A):A;if(g(m,E)){if(v.leaf||p(m,E))return!0;b.push(A)}}v=b.pop()}return!1},s.prototype.load=function(m){if(!m||!m.length)return this;if(m.length<this._minEntries){for(var v=0;v<m.length;v++)this.insert(m[v]);return this}var b=this._build(m.slice(),0,m.length-1,0);if(this.data.children.length)if(this.data.height===b.height)this._splitRoot(this.data,b);else{if(this.data.height<b.height){var w=this.data;this.data=b,b=w}this._insert(b,this.data.height-b.height-1,!0)}else this.data=b;return this},s.prototype.insert=function(m){return m&&this._insert(m,this.data.height-1),this},s.prototype.clear=function(){return this.data=x([]),this},s.prototype.remove=function(m,v){if(!m)return this;for(var b,w,A,E=this.data,S=this.toBBox(m),C=[],M=[];E||C.length;){if(E||(E=C.pop(),w=C[C.length-1],b=M.pop(),A=!0),E.leaf){var D=o(m,E.children,v);if(D!==-1)return E.children.splice(D,1),C.push(E),this._condense(C),this}A||E.leaf||!p(E,S)?w?(b++,E=w.children[b],A=!1):E=null:(C.push(E),M.push(b),b=0,w=E,E=E.children[0])}return this},s.prototype.toBBox=function(m){return m},s.prototype.compareMinX=function(m,v){return m.minX-v.minX},s.prototype.compareMinY=function(m,v){return m.minY-v.minY},s.prototype.toJSON=function(){return this.data},s.prototype.fromJSON=function(m){return this.data=m,this},s.prototype._all=function(m,v){for(var b=[];m;)m.leaf?v.push.apply(v,m.children):b.push.apply(b,m.children),m=b.pop();return v},s.prototype._build=function(m,v,b,w){var A,E=b-v+1,S=this._maxEntries;if(E<=S)return a(A=x(m.slice(v,b+1)),this.toBBox),A;w||(w=Math.ceil(Math.log(E)/Math.log(S)),S=Math.ceil(E/Math.pow(S,w-1))),(A=x([])).leaf=!1,A.height=w;var C=Math.ceil(E/S),M=C*Math.ceil(Math.sqrt(S));_(m,v,b,M,this.compareMinX);for(var D=v;D<=b;D+=M){var T=Math.min(D+M-1,b);_(m,D,T,C,this.compareMinY);for(var L=D;L<=T;L+=C){var F=Math.min(L+C-1,T);A.children.push(this._build(m,L,F,w-1))}}return a(A,this.toBBox),A},s.prototype._chooseSubtree=function(m,v,b,w){for(;w.push(v),!v.leaf&&w.length-1!==b;){for(var A=1/0,E=1/0,S=void 0,C=0;C<v.children.length;C++){var M=v.children[C],D=h(M),T=(L=m,F=M,(Math.max(F.maxX,L.maxX)-Math.min(F.minX,L.minX))*(Math.max(F.maxY,L.maxY)-Math.min(F.minY,L.minY))-D);T<E?(E=T,A=D<A?D:A,S=M):T===E&&D<A&&(A=D,S=M)}v=S||v.children[0]}var L,F;return v},s.prototype._insert=function(m,v,b){var w=b?m:this.toBBox(m),A=[],E=this._chooseSubtree(w,this.data,v,A);for(E.children.push(m),u(E,w);v>=0&&A[v].children.length>this._maxEntries;)this._split(A,v),v--;this._adjustParentBBoxes(w,A,v)},s.prototype._split=function(m,v){var b=m[v],w=b.children.length,A=this._minEntries;this._chooseSplitAxis(b,A,w);var E=this._chooseSplitIndex(b,A,w),S=x(b.children.splice(E,b.children.length-E));S.height=b.height,S.leaf=b.leaf,a(b,this.toBBox),a(S,this.toBBox),v?m[v-1].children.push(S):this._splitRoot(b,S)},s.prototype._splitRoot=function(m,v){this.data=x([m,v]),this.data.height=m.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},s.prototype._chooseSplitIndex=function(m,v,b){for(var w,A,E,S,C,M,D,T=1/0,L=1/0,F=v;F<=b-v;F++){var k=l(m,0,F,this.toBBox),I=l(m,F,b,this.toBBox),O=(A=k,E=I,S=void 0,C=void 0,M=void 0,D=void 0,S=Math.max(A.minX,E.minX),C=Math.max(A.minY,E.minY),M=Math.min(A.maxX,E.maxX),D=Math.min(A.maxY,E.maxY),Math.max(0,M-S)*Math.max(0,D-C)),$=h(k)+h(I);O<T?(T=O,w=F,L=$<L?$:L):O===T&&$<L&&(L=$,w=F)}return w||b-v},s.prototype._chooseSplitAxis=function(m,v,b){var w=m.leaf?this.compareMinX:c,A=m.leaf?this.compareMinY:f;this._allDistMargin(m,v,b,w)<this._allDistMargin(m,v,b,A)&&m.children.sort(w)},s.prototype._allDistMargin=function(m,v,b,w){m.children.sort(w);for(var A=this.toBBox,E=l(m,0,v,A),S=l(m,b-v,b,A),C=d(E)+d(S),M=v;M<b-v;M++){var D=m.children[M];u(E,m.leaf?A(D):D),C+=d(E)}for(var T=b-v-1;T>=v;T--){var L=m.children[T];u(S,m.leaf?A(L):L),C+=d(S)}return C},s.prototype._adjustParentBBoxes=function(m,v,b){for(var w=b;w>=0;w--)u(v[w],m)},s.prototype._condense=function(m){for(var v=m.length-1,b=void 0;v>=0;v--)m[v].children.length===0?v>0?(b=m[v-1].children).splice(b.indexOf(m[v]),1):this.clear():a(m[v],this.toBBox)},s})})(cG);const Sge=Ym(Upe),Age=Ym(Qpe),Ege=Ym(ege);var Ko=cG.exports,fG=Sge,hG=Age,uh=Ege.default,Cge=hG.featureEach;hG.coordEach;fG.polygon;var j3=fG.featureCollection;function dG(t){var e=new Ko(t);return e.insert=function(n){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:uh(n),Ko.prototype.insert.call(this,n)},e.load=function(n){var r=[];return Array.isArray(n)?n.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:uh(i),r.push(i)}):Cge(n,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:uh(i),r.push(i)}),Ko.prototype.load.call(this,r)},e.remove=function(n,r){if(n.type!=="Feature")throw new Error("invalid feature");return n.bbox=n.bbox?n.bbox:uh(n),Ko.prototype.remove.call(this,n,r)},e.clear=function(){return Ko.prototype.clear.call(this)},e.search=function(n){var r=Ko.prototype.search.call(this,this.toBBox(n));return j3(r)},e.collides=function(n){return Ko.prototype.collides.call(this,this.toBBox(n))},e.all=function(){var n=Ko.prototype.all.call(this);return j3(n)},e.toJSON=function(){return Ko.prototype.toJSON.call(this)},e.fromJSON=function(n){return Ko.prototype.fromJSON.call(this,n)},e.toBBox=function(n){var r;if(n.bbox)r=n.bbox;else if(Array.isArray(n)&&n.length===4)r=n;else if(Array.isArray(n)&&n.length===6)r=[n[0],n[1],n[3],n[4]];else if(n.type==="Feature")r=uh(n);else if(n.type==="FeatureCollection")r=uh(n);else throw new Error("invalid geojson");return{minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}},e}X2.exports=dG;X2.exports.default=dG;function K1(t,e){var n={},r=[];if(t.type==="LineString"&&(t=to(t)),e.type==="LineString"&&(e=to(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=q3(t,e);return i&&r.push(i),Wu(r)}var s=X2.exports();return s.load(Y3(e)),J1(Y3(t),function(o){J1(s.search(o),function(a){var l=q3(o,a);if(l){var u=Mm(l).join(",");n[u]||(n[u]=!0,r.push(l))}})}),Wu(r)}function q3(t,e){var n=Mm(t),r=Mm(e);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(r.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],s=n[0][1],o=n[1][0],a=n[1][1],l=r[0][0],u=r[0][1],c=r[1][0],f=r[1][1],h=(f-u)*(o-i)-(c-l)*(a-s),d=(c-l)*(s-u)-(f-u)*(i-l),p=(o-i)*(s-u)-(a-s)*(i-l);if(h===0)return d===0&&p===0,null;var g=d/h,x=p/h;if(g>=0&&g<=1&&x>=0&&x<=1){var _=i+g*(o-i),m=s+g*(a-s);return rs([_,m])}return null}function Mge(t,e){e===void 0&&(e={});var n=Ia(t),r=n.coordinates,i=e.properties?e.properties:t.type==="Feature"?t.properties:{};return Dge(r,i)}function Dge(t,e){return t.length>1?z2(t,e):os(t[0],e)}function Tge(t,e){var n=Ia(t),r=Ia(e),i=n.type,s=r.type;switch(i){case"MultiPoint":switch(s){case"LineString":return J3(n,r);case"Polygon":return Z3(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"LineString":switch(s){case"MultiPoint":return J3(r,n);case"LineString":return Pge(n,r);case"Polygon":return K3(n,r);default:throw new Error("feature2 "+s+" geometry not supported")}case"Polygon":switch(s){case"MultiPoint":return Z3(r,n);case"LineString":return K3(r,n);default:throw new Error("feature2 "+s+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function J3(t,e){for(var n=!1,r=!1,i=t.coordinates.length,s=0;s<i&&!n&&!r;){for(var o=0;o<e.coordinates.length-1;o++){var a=!0;(o===0||o===e.coordinates.length-2)&&(a=!1),pG(e.coordinates[o],e.coordinates[o+1],t.coordinates[s],a)?n=!0:r=!0}s++}return n&&r}function Pge(t,e){var n=K1(t,e);if(n.features.length>0)for(var r=0;r<t.coordinates.length-1;r++)for(var i=0;i<e.coordinates.length-1;i++){var s=!0;if((i===0||i===e.coordinates.length-2)&&(s=!1),pG(t.coordinates[r],t.coordinates[r+1],e.coordinates[i],s))return!0}return!1}function K3(t,e){var n=Mge(e),r=K1(t,n);return r.features.length>0}function Z3(t,e){for(var n=!1,r=!1,i=t.coordinates.length,s=0;s<i&&(!n||!r);s++)yge(rs(t.coordinates[s]),e)?n=!0:r=!0;return r&&n}function pG(t,e,n,r){var i=n[0]-t[0],s=n[1]-t[1],o=e[0]-t[0],a=e[1]-t[1],l=i*a-s*o;return l!==0?!1:r?Math.abs(o)>=Math.abs(a)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(o)>=Math.abs(a)?o>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1]}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Lge(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var $u=function(){function t(e,n){this.next=null,this.key=e,this.data=n,this.left=null,this.right=null}return t}();function Fge(t,e){return t>e?1:t<e?-1:0}function lu(t,e,n){for(var r=new $u(null,null),i=r,s=r;;){var o=n(t,e.key);if(o<0){if(e.left===null)break;if(n(t,e.left.key)<0){var a=e.left;if(e.left=a.right,a.right=e,e=a,e.left===null)break}s.left=e,s=e,e=e.left}else if(o>0){if(e.right===null)break;if(n(t,e.right.key)>0){var a=e.right;if(e.right=a.left,a.left=e,e=a,e.right===null)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function OS(t,e,n,r){var i=new $u(t,e);if(n===null)return i.left=i.right=null,i;n=lu(t,n,r);var s=r(t,n.key);return s<0?(i.left=n.left,i.right=n,n.left=null):s>=0&&(i.right=n.right,i.left=n,n.right=null),i}function Q3(t,e,n){var r=null,i=null;if(e){e=lu(t,e,n);var s=n(e.key,t);s===0?(r=e.left,i=e.right):s<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function Ige(t,e,n){return e===null?t:(t===null||(e=lu(t.key,e,n),e.left=t),e)}function GE(t,e,n,r,i){if(t){r(""+e+(n?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+i(t)+`
`);var s=e+(n?"    ":"\u2502   ");t.left&&GE(t.left,s,!1,r,i),t.right&&GE(t.right,s,!0,r,i)}}var Y2=function(){function t(e){e===void 0&&(e=Fge),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,n){return this._size++,this._root=OS(e,n,this._root,this._comparator)},t.prototype.add=function(e,n){var r=new $u(e,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,s=lu(e,this._root,i),o=i(e,s.key);return o===0?this._root=s:(o<0?(r.left=s.left,r.right=s,s.left=null):o>0&&(r.right=s.right,r.left=s,s.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,n,r){var i;if(n===null)return null;n=lu(e,n,r);var s=r(e,n.key);return s===0?(n.left===null?i=n.right:(i=lu(e,n.left,r),i.right=n.right),this._size--,i):n},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=lu(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},t.prototype.find=function(e){return this._root&&(this._root=lu(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},t.prototype.contains=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},t.prototype.forEach=function(e,n){for(var r=this._root,i=[],s=!1;!s;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),e.call(n,r),r=r.right):s=!0;return this},t.prototype.range=function(e,n,r,i){for(var s=[],o=this._comparator,a=this._root,l;s.length!==0||a;)if(a)s.push(a),a=a.left;else{if(a=s.pop(),l=o(a.key,n),l>0)break;if(o(a.key,e)>=0&&r.call(i,a))return this;a=a.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(n){var r=n.key;return e.push(r)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(n){var r=n.data;return e.push(r)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var n=this._root,r=!1,i=0,s=[];!r;)if(n)s.push(n),n=n.left;else if(s.length>0){if(n=s.pop(),i===e)return n;i++,n=n.right}else r=!0;return null},t.prototype.next=function(e){var n=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var s=i(e.key,n.key);if(s===0)break;s<0?(r=n,n=n.left):n=n.right}return r},t.prototype.prev=function(e){var n=this._root,r=null;if(e.left!==null){for(r=e.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var s=i(e.key,n.key);if(s===0)break;s<0?n=n.left:(r=n,n=n.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return Rge(this._root)},t.prototype.load=function(e,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=e.length,s=this._comparator;if(r&&WE(e,n,0,i-1,s),this._root===null)this._root=UE(e,n,0,i),this._size=i;else{var o=Oge(this.toList(),kge(e,n),s);i=this._size+i,this._root=HE({head:o},0,i)}return this},t.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){e===void 0&&(e=function(r){return String(r.key)});var n=[];return GE(this._root,"",!0,function(r){return n.push(r)},e),n.join("")},t.prototype.update=function(e,n,r){var i=this._comparator,s=Q3(e,this._root,i),o=s.left,a=s.right;i(e,n)<0?a=OS(n,r,a,i):o=OS(n,r,o,i),this._root=Ige(o,a,i)},t.prototype.split=function(e){return Q3(e,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var e,n,r;return Lge(this,function(i){switch(i.label){case 0:e=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:e===null?[3,2]:(n.push(e),e=e.left,[3,5]);case 2:return n.length===0?[3,4]:(e=n.pop(),[4,e]);case 3:return i.sent(),e=e.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},t}();function UE(t,e,n,r){var i=r-n;if(i>0){var s=n+Math.floor(i/2),o=t[s],a=e[s],l=new $u(o,a);return l.left=UE(t,e,n,s),l.right=UE(t,e,s+1,r),l}return null}function kge(t,e){for(var n=new $u(null,null),r=n,i=0;i<t.length;i++)r=r.next=new $u(t[i],e[i]);return r.next=null,n.next}function Rge(t){for(var e=t,n=[],r=!1,i=new $u(null,null),s=i;!r;)e?(n.push(e),e=e.left):n.length>0?(e=s=s.next=n.pop(),e=e.right):r=!0;return s.next=null,i.next}function HE(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),s=HE(t,e,i),o=t.head;return o.left=s,t.head=t.head.next,o.right=HE(t,i+1,n),o}return null}function Oge(t,e,n){for(var r=new $u(null,null),i=r,s=t,o=e;s!==null&&o!==null;)n(s.key,o.key)<0?(i.next=s,s=s.next):(i.next=o,o=o.next),i=i.next;return s!==null?i.next=s:o!==null&&(i.next=o),r.next}function WE(t,e,n,r,i){if(!(n>=r)){for(var s=t[n+r>>1],o=n-1,a=r+1;;){do o++;while(i(t[o],s)<0);do a--;while(i(t[a],s)>0);if(o>=a)break;var l=t[o];t[o]=t[a],t[a]=l,l=e[o],e[o]=e[a],e[a]=l}WE(t,e,n,a,i),WE(t,e,a+1,r,i)}}function oo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ek(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ji(t,e,n){return e&&ek(t.prototype,e),n&&ek(t,n),t}var Up=function(e,n){return e.ll.x<=n.x&&n.x<=e.ur.x&&e.ll.y<=n.y&&n.y<=e.ur.y},$E=function(e,n){if(n.ur.x<e.ll.x||e.ur.x<n.ll.x||n.ur.y<e.ll.y||e.ur.y<n.ll.y)return null;var r=e.ll.x<n.ll.x?n.ll.x:e.ll.x,i=e.ur.x<n.ur.x?e.ur.x:n.ur.x,s=e.ll.y<n.ll.y?n.ll.y:e.ll.y,o=e.ur.y<n.ur.y?e.ur.y:n.ur.y;return{ll:{x:r,y:s},ur:{x:i,y:o}}},_u=Number.EPSILON;_u===void 0&&(_u=Math.pow(2,-52));var Bge=_u*_u,XE=function(e,n){if(-_u<e&&e<_u&&-_u<n&&n<_u)return 0;var r=e-n;return r*r<Bge*e*n?0:e<n?-1:1},Nge=function(){function t(){oo(this,t),this.reset()}return ji(t,[{key:"reset",value:function(){this.xRounder=new tk,this.yRounder=new tk}},{key:"round",value:function(n,r){return{x:this.xRounder.round(n),y:this.yRounder.round(r)}}}]),t}(),tk=function(){function t(){oo(this,t),this.tree=new Y2,this.round(0)}return ji(t,[{key:"round",value:function(n){var r=this.tree.add(n),i=this.tree.prev(r);if(i!==null&&XE(r.key,i.key)===0)return this.tree.remove(n),i.key;var s=this.tree.next(r);return s!==null&&XE(r.key,s.key)===0?(this.tree.remove(n),s.key):n}}]),t}(),Dm=new Nge,Lg=function(e,n){return e.x*n.y-e.y*n.x},gG=function(e,n){return e.x*n.x+e.y*n.y},nk=function(e,n,r){var i={x:n.x-e.x,y:n.y-e.y},s={x:r.x-e.x,y:r.y-e.y},o=Lg(i,s);return XE(o,0)},Z1=function(e){return Math.sqrt(gG(e,e))},Vge=function(e,n,r){var i={x:n.x-e.x,y:n.y-e.y},s={x:r.x-e.x,y:r.y-e.y};return Lg(s,i)/Z1(s)/Z1(i)},zge=function(e,n,r){var i={x:n.x-e.x,y:n.y-e.y},s={x:r.x-e.x,y:r.y-e.y};return gG(s,i)/Z1(s)/Z1(i)},rk=function(e,n,r){return n.y===0?null:{x:e.x+n.x/n.y*(r-e.y),y:r}},ik=function(e,n,r){return n.x===0?null:{x:r,y:e.y+n.y/n.x*(r-e.x)}},Gge=function(e,n,r,i){if(n.x===0)return ik(r,i,e.x);if(i.x===0)return ik(e,n,r.x);if(n.y===0)return rk(r,i,e.y);if(i.y===0)return rk(e,n,r.y);var s=Lg(n,i);if(s==0)return null;var o={x:r.x-e.x,y:r.y-e.y},a=Lg(o,n)/s,l=Lg(o,i)/s,u=e.x+l*n.x,c=r.x+a*i.x,f=e.y+l*n.y,h=r.y+a*i.y,d=(u+c)/2,p=(f+h)/2;return{x:d,y:p}},ta=function(){ji(t,null,[{key:"compare",value:function(n,r){var i=t.comparePoints(n.point,r.point);return i!==0?i:(n.point!==r.point&&n.link(r),n.isLeft!==r.isLeft?n.isLeft?1:-1:Q1.compare(n.segment,r.segment))}},{key:"comparePoints",value:function(n,r){return n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0}}]);function t(e,n){oo(this,t),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}return ji(t,[{key:"link",value:function(n){if(n.point===this.point)throw new Error("Tried to link already linked events");for(var r=n.point.events,i=0,s=r.length;i<s;i++){var o=r[i];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var n=this.point.events.length,r=0;r<n;r++){var i=this.point.events[r];if(i.segment.consumedBy===void 0)for(var s=r+1;s<n;s++){var o=this.point.events[s];o.consumedBy===void 0&&i.otherSE.point.events===o.otherSE.point.events&&i.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var n=[],r=0,i=this.point.events.length;r<i;r++){var s=this.point.events[r];s!==this&&!s.segment.ringOut&&s.segment.isInResult()&&n.push(s)}return n}},{key:"getLeftmostComparator",value:function(n){var r=this,i=new Map,s=function(a){var l=a.otherSE;i.set(a,{sine:Vge(r.point,n.point,l.point),cosine:zge(r.point,n.point,l.point)})};return function(o,a){i.has(o)||s(o),i.has(a)||s(a);var l=i.get(o),u=l.sine,c=l.cosine,f=i.get(a),h=f.sine,d=f.cosine;return u>=0&&h>=0?c<d?1:c>d?-1:0:u<0&&h<0?c<d?-1:c>d?1:0:h<u?-1:h>u?1:0}}}]),t}(),Uge=0,Q1=function(){ji(t,null,[{key:"compare",value:function(n,r){var i=n.leftSE.point.x,s=r.leftSE.point.x,o=n.rightSE.point.x,a=r.rightSE.point.x;if(a<i)return 1;if(o<s)return-1;var l=n.leftSE.point.y,u=r.leftSE.point.y,c=n.rightSE.point.y,f=r.rightSE.point.y;if(i<s){if(u<l&&u<c)return 1;if(u>l&&u>c)return-1;var h=n.comparePoint(r.leftSE.point);if(h<0)return 1;if(h>0)return-1;var d=r.comparePoint(n.rightSE.point);return d!==0?d:-1}if(i>s){if(l<u&&l<f)return-1;if(l>u&&l>f)return 1;var p=r.comparePoint(n.leftSE.point);if(p!==0)return p;var g=n.comparePoint(r.rightSE.point);return g<0?1:g>0?-1:1}if(l<u)return-1;if(l>u)return 1;if(o<a){var x=r.comparePoint(n.rightSE.point);if(x!==0)return x}if(o>a){var _=n.comparePoint(r.rightSE.point);if(_<0)return 1;if(_>0)return-1}if(o!==a){var m=c-l,v=o-i,b=f-u,w=a-s;if(m>v&&b<w)return 1;if(m<v&&b>w)return-1}return o>a?1:o<a||c<f?-1:c>f?1:n.id<r.id?-1:n.id>r.id?1:0}}]);function t(e,n,r,i){oo(this,t),this.id=++Uge,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}return ji(t,[{key:"replaceRightSE",value:function(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var n=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n<r?n:r},ur:{x:this.rightSE.point.x,y:n>r?n:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(n){return n.x===this.leftSE.point.x&&n.y===this.leftSE.point.y||n.x===this.rightSE.point.x&&n.y===this.rightSE.point.y}},{key:"comparePoint",value:function(n){if(this.isAnEndpoint(n))return 0;var r=this.leftSE.point,i=this.rightSE.point,s=this.vector();if(r.x===i.x)return n.x===r.x?0:n.x<r.x?1:-1;var o=(n.y-r.y)/s.y,a=r.x+o*s.x;if(n.x===a)return 0;var l=(n.x-r.x)/s.x,u=r.y+l*s.y;return n.y===u?0:n.y<u?-1:1}},{key:"getIntersection",value:function(n){var r=this.bbox(),i=n.bbox(),s=$E(r,i);if(s===null)return null;var o=this.leftSE.point,a=this.rightSE.point,l=n.leftSE.point,u=n.rightSE.point,c=Up(r,l)&&this.comparePoint(l)===0,f=Up(i,o)&&n.comparePoint(o)===0,h=Up(r,u)&&this.comparePoint(u)===0,d=Up(i,a)&&n.comparePoint(a)===0;if(f&&c)return d&&!h?a:!d&&h?u:null;if(f)return h&&o.x===u.x&&o.y===u.y?null:o;if(c)return d&&a.x===l.x&&a.y===l.y?null:l;if(d&&h)return null;if(d)return a;if(h)return u;var p=Gge(o,this.vector(),l,n.vector());return p===null||!Up(s,p)?null:Dm.round(p.x,p.y)}},{key:"split",value:function(n){var r=[],i=n.events!==void 0,s=new ta(n,!0),o=new ta(n,!1),a=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(s);var l=new t(s,a,this.rings.slice(),this.windings.slice());return ta.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),ta.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(s.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,i=this.windings.length;r<i;r++)this.windings[r]*=-1}},{key:"consume",value:function(n){for(var r=this,i=n;r.consumedBy;)r=r.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var s=t.compare(r,i);if(s!==0){if(s>0){var o=r;r=i,i=o}if(r.prev===i){var a=r;r=i,i=a}for(var l=0,u=i.rings.length;l<u;l++){var c=i.rings[l],f=i.windings[l],h=r.rings.indexOf(c);h===-1?(r.rings.push(c),r.windings.push(f)):r.windings[h]+=f}i.rings=null,i.windings=null,i.consumedBy=r,i.leftSE.consumedBy=r.leftSE,i.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,i=this._afterState.windings,s=this._afterState.multiPolys,o=0,a=this.rings.length;o<a;o++){var l=this.rings[o],u=this.windings[o],c=r.indexOf(l);c===-1?(r.push(l),i.push(u)):i[c]+=u}for(var f=[],h=[],d=0,p=r.length;d<p;d++)if(i[d]!==0){var g=r[d],x=g.poly;if(h.indexOf(x)===-1)if(g.isExterior)f.push(x);else{h.indexOf(x)===-1&&h.push(x);var _=f.indexOf(g.poly);_!==-1&&f.splice(_,1)}}for(var m=0,v=f.length;m<v;m++){var b=f[m].multiPoly;s.indexOf(b)===-1&&s.push(b)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var n=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(Mo.type){case"union":{var i=n.length===0,s=r.length===0;this._isInResult=i!==s;break}case"intersection":{var o,a;n.length<r.length?(o=n.length,a=r.length):(o=r.length,a=n.length),this._isInResult=a===Mo.numMultiPolys&&o<a;break}case"xor":{var l=Math.abs(n.length-r.length);this._isInResult=l%2===1;break}case"difference":{var u=function(f){return f.length===1&&f[0].isSubject};this._isInResult=u(n)!==u(r);break}default:throw new Error("Unrecognized operation type found ".concat(Mo.type))}return this._isInResult}}],[{key:"fromRing",value:function(n,r,i){var s,o,a,l=ta.comparePoints(n,r);if(l<0)s=n,o=r,a=1;else if(l>0)s=r,o=n,a=-1;else throw new Error("Tried to create degenerate segment at [".concat(n.x,", ").concat(n.y,"]"));var u=new ta(s,!0),c=new ta(o,!1);return new t(u,c,[i],[a])}}]),t}(),sk=function(){function t(e,n,r){if(oo(this,t),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=Dm.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var s=i,o=1,a=e.length;o<a;o++){if(typeof e[o][0]!="number"||typeof e[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=Dm.round(e[o][0],e[o][1]);l.x===s.x&&l.y===s.y||(this.segments.push(Q1.fromRing(s,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),s=l)}(i.x!==s.x||i.y!==s.y)&&this.segments.push(Q1.fromRing(s,i,this))}return ji(t,[{key:"getSweepEvents",value:function(){for(var n=[],r=0,i=this.segments.length;r<i;r++){var s=this.segments[r];n.push(s.leftSE),n.push(s.rightSE)}return n}}]),t}(),Hge=function(){function t(e,n){if(oo(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new sk(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,i=e.length;r<i;r++){var s=new sk(e[r],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n}return ji(t,[{key:"getSweepEvents",value:function(){for(var n=this.exteriorRing.getSweepEvents(),r=0,i=this.interiorRings.length;r<i;r++)for(var s=this.interiorRings[r].getSweepEvents(),o=0,a=s.length;o<a;o++)n.push(s[o]);return n}}]),t}(),ok=function(){function t(e,n){if(oo(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,i=e.length;r<i;r++){var s=new Hge(e[r],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n}return ji(t,[{key:"getSweepEvents",value:function(){for(var n=[],r=0,i=this.polys.length;r<i;r++)for(var s=this.polys[r].getSweepEvents(),o=0,a=s.length;o<a;o++)n.push(s[o]);return n}}]),t}(),Wge=function(){ji(t,null,[{key:"factory",value:function(n){for(var r=[],i=0,s=n.length;i<s;i++){var o=n[i];if(!(!o.isInResult()||o.ringOut)){for(var a=null,l=o.leftSE,u=o.rightSE,c=[l],f=l.point,h=[];a=l,l=u,c.push(l),l.point!==f;)for(;;){var d=l.getAvailableLinkedEvents();if(d.length===0){var p=c[0].point,g=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(d.length===1){u=d[0].otherSE;break}for(var x=null,_=0,m=h.length;_<m;_++)if(h[_].point===l.point){x=_;break}if(x!==null){var v=h.splice(x)[0],b=c.splice(v.index);b.unshift(b[0].otherSE),r.push(new t(b.reverse()));continue}h.push({index:c.length,point:l.point});var w=l.getLeftmostComparator(a);u=d.sort(w)[0].otherSE;break}r.push(new t(c))}}return r}}]);function t(e){oo(this,t),this.events=e;for(var n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}return ji(t,[{key:"getGeom",value:function(){for(var n=this.events[0].point,r=[n],i=1,s=this.events.length-1;i<s;i++){var o=this.events[i].point,a=this.events[i+1].point;nk(o,n,a)!==0&&(r.push(o),n=o)}if(r.length===1)return null;var l=r[0],u=r[1];nk(l,n,u)===0&&r.shift(),r.push(r[0]);for(var c=this.isExteriorRing()?1:-1,f=this.isExteriorRing()?0:r.length-1,h=this.isExteriorRing()?r.length:-1,d=[],p=f;p!=h;p+=c)d.push([r[p].x,r[p].y]);return d}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var n=this.events[0],r=1,i=this.events.length;r<i;r++){var s=this.events[r];ta.compare(n,s)>0&&(n=s)}for(var o=n.segment.prevInResult(),a=o?o.prevInResult():null;;){if(!o)return null;if(!a)return o.ringOut;if(a.ringOut!==o.ringOut)return a.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=a.prevInResult(),a=o?o.prevInResult():null}}}]),t}(),ak=function(){function t(e){oo(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return ji(t,[{key:"addInterior",value:function(n){this.interiorRings.push(n),n.poly=this}},{key:"getGeom",value:function(){var n=[this.exteriorRing.getGeom()];if(n[0]===null)return null;for(var r=0,i=this.interiorRings.length;r<i;r++){var s=this.interiorRings[r].getGeom();s!==null&&n.push(s)}return n}}]),t}(),$ge=function(){function t(e){oo(this,t),this.rings=e,this.polys=this._composePolys(e)}return ji(t,[{key:"getGeom",value:function(){for(var n=[],r=0,i=this.polys.length;r<i;r++){var s=this.polys[r].getGeom();s!==null&&n.push(s)}return n}},{key:"_composePolys",value:function(n){for(var r=[],i=0,s=n.length;i<s;i++){var o=n[i];if(!o.poly)if(o.isExteriorRing())r.push(new ak(o));else{var a=o.enclosingRing();a.poly||r.push(new ak(a)),a.poly.addInterior(o)}}return r}}]),t}(),Xge=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q1.compare;oo(this,t),this.queue=e,this.tree=new Y2(n),this.segments=[]}return ji(t,[{key:"process",value:function(n){var r=n.segment,i=[];if(n.consumedBy)return n.isLeft?this.queue.remove(n.otherSE):this.tree.remove(r),i;var s=n.isLeft?this.tree.insert(r):this.tree.find(r);if(!s)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=s,a=s,l=void 0,u=void 0;l===void 0;)o=this.tree.prev(o),o===null?l=null:o.key.consumedBy===void 0&&(l=o.key);for(;u===void 0;)a=this.tree.next(a),a===null?u=null:a.key.consumedBy===void 0&&(u=a.key);if(n.isLeft){var c=null;if(l){var f=l.getIntersection(r);if(f!==null&&(r.isAnEndpoint(f)||(c=f),!l.isAnEndpoint(f)))for(var h=this._splitSafely(l,f),d=0,p=h.length;d<p;d++)i.push(h[d])}var g=null;if(u){var x=u.getIntersection(r);if(x!==null&&(r.isAnEndpoint(x)||(g=x),!u.isAnEndpoint(x)))for(var _=this._splitSafely(u,x),m=0,v=_.length;m<v;m++)i.push(_[m])}if(c!==null||g!==null){var b=null;if(c===null)b=g;else if(g===null)b=c;else{var w=ta.comparePoints(c,g);b=w<=0?c:g}this.queue.remove(r.rightSE),i.push(r.rightSE);for(var A=r.split(b),E=0,S=A.length;E<S;E++)i.push(A[E])}i.length>0?(this.tree.remove(r),i.push(n)):(this.segments.push(r),r.prev=l)}else{if(l&&u){var C=l.getIntersection(u);if(C!==null){if(!l.isAnEndpoint(C))for(var M=this._splitSafely(l,C),D=0,T=M.length;D<T;D++)i.push(M[D]);if(!u.isAnEndpoint(C))for(var L=this._splitSafely(u,C),F=0,k=L.length;F<k;F++)i.push(L[F])}}this.tree.remove(r)}return i}},{key:"_splitSafely",value:function(n,r){this.tree.remove(n);var i=n.rightSE;this.queue.remove(i);var s=n.split(r);return s.push(i),n.consumedBy===void 0&&this.tree.insert(n),s}}]),t}(),lk=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Yge=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,jge=function(){function t(){oo(this,t)}return ji(t,[{key:"run",value:function(n,r,i){Mo.type=n,Dm.reset();for(var s=[new ok(r,!0)],o=0,a=i.length;o<a;o++)s.push(new ok(i[o],!1));if(Mo.numMultiPolys=s.length,Mo.type==="difference")for(var l=s[0],u=1;u<s.length;)$E(s[u].bbox,l.bbox)!==null?u++:s.splice(u,1);if(Mo.type==="intersection"){for(var c=0,f=s.length;c<f;c++)for(var h=s[c],d=c+1,p=s.length;d<p;d++)if($E(h.bbox,s[d].bbox)===null)return[]}for(var g=new Y2(ta.compare),x=0,_=s.length;x<_;x++)for(var m=s[x].getSweepEvents(),v=0,b=m.length;v<b;v++)if(g.insert(m[v]),g.size>lk)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var w=new Xge(g),A=g.size,E=g.pop();E;){var S=E.key;if(g.size===A){var C=S.segment;throw new Error("Unable to pop() ".concat(S.isLeft?"left":"right"," SweepEvent ")+"[".concat(S.point.x,", ").concat(S.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>lk)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(w.segments.length>Yge)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var M=w.process(S),D=0,T=M.length;D<T;D++){var L=M[D];L.consumedBy===void 0&&g.insert(L)}A=g.size,E=g.pop()}Dm.reset();var F=Wge.factory(w.segments),k=new $ge(F);return k.getGeom()}}]),t}(),Mo=new jge,qge=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Mo.run("union",e,r)},Jge=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Mo.run("intersection",e,r)},Kge=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Mo.run("xor",e,r)},Zge=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Mo.run("difference",e,r)},j2={union:qge,intersection:Jge,xor:Kge,difference:Zge};function qy(t,e){var n=Ia(t),r=Ia(e),i=t.properties||{},s=j2.difference(n.coordinates,r.coordinates);return s.length===0?null:s.length===1?sn(s[0],i):uv(s,i)}function mG(t,e,n){n===void 0&&(n={});var r=Ia(t),i=Ia(e),s=j2.union(r.coordinates,i.coordinates);return s.length===0?null:s.length===1?sn(s[0],n.properties):uv(s,n.properties)}function ag(t,e,n){n===void 0&&(n={});var r=Ia(t),i=Ia(e),s=j2.intersection(r.coordinates,i.coordinates);return s.length===0?null:s.length===1?sn(s[0],n.properties):uv(s,n.properties)}const vG={data(){return{store:we()}},mixins:[zr,sc],computed:{},methods:{mergePolygon(t){var e=[];for(let u=0;u<t.length;u++){let c=JSON.parse(JSON.stringify(t[u].points()));e.push(sn([c]))}var n=mG(Wu(...e));n.geometry.coordinates[0].reverse();let r=JSON.parse(JSON.stringify(this.store.lineArray[0]));const i=n.geometry.coordinates[0].findIndex(s);function s(u){return u[0]===r[0]||u[1]===r[1]}let o=JSON.parse(JSON.stringify(n.geometry.coordinates[0]));o.shift();const a=o.splice(i-1),l=a.concat(o,[a[0]]);this.store.lineArray=l,this.store.convaStage.find("Line")[0].setAttr("points",this.store.lineArray.flat()),this.store.lineConfig.points(l.flat())}}},ao=Um({id:"facadeStore",state:()=>({selectedLayingType:"fugenschnitt",selectedLayingTypes:["fugenschnitt","verlegeart_1_2","verlegeart_1_3","verlegeart_wechsel","orthogonalDecking"],selectedLayingDirection:"horizontal",selectedLayingDirections:["horizontal","vertical"],layingDirectionAngle:0,individualLayingDirectionAngle:125,coveringDistance_x:0,coveringDistance_y:0,myCoveringLength:300,myCoveringWidth:15,myCoveringStrength:2,fuge:.6,displayCutOutArray:[],roundCorners:!1,roundingsAvailable:!1,enableFacadeProperties:!1,setStartingPoint:!1,entireHouseCovered:!1,horizontalIntersectionCirclesArray:[],horizontalIntersectionArray:[],verticalIntersectionCirclesArray:[],verticalIntersectionArray:[],selectElement:!0,selectedElement:!1,selectedElementHasFacade:!1,editSelectedElement:{floorIndex:void 0,wallIndex:void 0,elementIndex:void 0},allSelectedElement:[],changeSettingsGlobal:!1,tempPartialArea:[],addPartialArea:!1,addPartialAreaForm:"freeForm",cachedRenderings:[],selectedRendering:-1,deckingRotationArray:[],selectedColor:{r:255,g:255,b:255,a:0}}),getters:{getSelectElement(){return this.selectElement},getSelectedLayingType(){return this.selectedLayingType},getSelectedLayingTypes(){return this.selectedLayingTypes},getSelectedLayingDirection(){return this.selectedLayingDirection},getSelectedLayingDirections(){return this.selectedLayingDirections},getCoveringDistance_X(){return this.coveringDistance_x},getCoveringDistance_Y(){return this.coveringDistance_y},getMyCoveringLength(){return this.myCoveringLength},getMyCoveringWidth(){return this.myCoveringWidth},getMyCoveringStrength(){return this.myCoveringStrength},getFuge(){return this.fuge},getDisplayCutOutArray(){return this.displayCutOutArray},getEnableFacadeProperties(){return this.enableFacadeProperties},getHorizontalIntersectionCirclesArray(){return this.horizontalIntersectionCirclesArray},getHorizontalIntersectionArray(){return this.horizontalIntersectionArray},getVerticalIntersectionCirclesArray(){return this.verticalIntersectionCirclesArray},getVerticalIntersectionArray(){return this.verticalIntersectionArray},getEditSelectedElement(){return this.editSelectedElement},getAllSelectedElement(){return this.allSelectedElement},getTempPartialArea(){return this.tempPartialArea},getAddPartialArea(){return this.addPartialArea}},actions:{setSelectElement(t){this.selectElement=t},setAllSelectedElement(t){this.allSelectedElement=t},setSelectedLayingType(t){this.selectedLayingType=t},setSelectedLayingTypes(t){this.selectedLayingTypes=t},setSelectedLayingDirection(t){this.selectedLayingDirection=t},setSelectedLayingDirections(t){this.selectedLayingDirections=t},setCoveringDistance_X(t){this.coveringDistance_x=t},setCoveringDistance_Y(t){this.coveringDistance_y=t},setMyCoveringLength(t){this.myCoveringLength=t},setMyCoveringWidth(t){this.myCoveringWidth=t},setMyCoveringStrength(t){this.myCoveringStrength=t},setFuge(t){this.fuge=t},setDisplayCutOutArray(t){this.displayCutOutArray=t},setEnableFacadeProperties(t){this.enableFacadeProperties=t},setHorizontalIntersectionCirclesArray(t){this.horizontalIntersectionCirclesArray=t},setHorizontalIntersectionArray(t){this.horizontalIntersectionArray=t},setVerticalIntersectionCirclesArray(t){this.verticalIntersectionCirclesArray=t},setVerticalIntersectionArray(t){this.verticalIntersectionArray=t},setEditSelectedElement(t=void 0,e=void 0,n=void 0){this.editSelectedElement.floorIndex=t,this.editSelectedElement.wallIndex=e,this.editSelectedElement.elementIndex=n},removeEntryFromAllSelectedElement(t){for(var e=0;e<this.allSelectedElement.length;e++)JSON.stringify(this.allSelectedElement[e])===JSON.stringify(t)&&this.allSelectedElement.splice(e,1)},setTempPartialArea(t){this.tempPartialArea=t},setAddPartialArea(t){this.addPartialArea=t}}}),aw=Um({id:"subconstructionStore",state:()=>({sideDistanceSC:10,distanceBetweenSC:40,distanceToWall:0,distanceToGround:30,minSCDistance:50,myProfileLength:300,myProfileWidth:4.5,myProfileStrength:6.8}),getters:{getSideDistanceSC(){return this.sideDistanceSC},getDistanceBetweenSC(){return this.distanceBetweenSC},getDistanceToWall(){return this.distanceToWall},getDistanceToGround(){return this.distanceToGround}},actions:{setSideDistanceSC(t){this.sideDistanceSC=t},setDistanceBetweenSC(t){this.distanceBetweenSC=t},setDistanceToWall(t){this.distanceToWall=t},setDistanceToGround(t){this.distanceToGround=t}}}),fv={mixins:[Vr,zr],data(){return{store:we(),facadeStore:ao(),subconstructionStore:aw()}},methods:{changeFacadeLayingDirection(t){let e;this.setSelectedAreaForFacade();for(const n of this.store.getLineArrayBuilding)for(const r of n.floor.wall)if(r.facade&&r.facade.selectedArea.length!==0&&r.facade.layingDirection==="vertical"){let i=this.getCentroid(r.pointsArray);for(let s=0;s<r.facade.selectedArea.length;s++)r.facade.selectedArea[s]=this.rotatePoint(i,r.facade.selectedArea[s],-90);if(i[0]-=JSON.parse(JSON.stringify(r.pointsArray[0][0])),i[1]-=JSON.parse(JSON.stringify(r.pointsArray[0][1])),r.elements.length!==0)for(const s of r.elements)for(let o=0;o<s.points.length;o++)s.points[o]=this.rotatePoint(i,s.points[o],-90);if(r.partialArea)for(const s of r.partialArea)for(let o=0;o<s.pointsArray.length;o++)s.pointsArray[o]=this.rotatePoint(i,s.pointsArray[o],-90)}this.calculateFacade()&&(e=!0);for(const n of this.store.getLineArrayBuilding)for(const r of n.floor.wall)if(r.facade&&r.facade.selectedArea.length!==0&&r.facade.layingDirection==="vertical"){let i=this.getCentroid(r.pointsArray);for(let s=0;s<r.facade.facadePoints.length;s++){let o=r.facade.facadePoints[s][0],a=[];for(let l=0,u=0;l<o.length/2;l++,u+=2){let c=[o[u],o[u+1]];a.push(c)}for(let l=0;l<a.length;l++)a[l]=this.rotatePoint(i,a[l],90);r.facade.facadePoints[s]=[],r.facade.facadePoints[s].push(a.flat())}for(let s=0;s<r.facade.selectedArea.length;s++)r.facade.selectedArea[s]=this.rotatePoint(i,r.facade.selectedArea[s],90);if(i[0]-=r.pointsArray[0][0],i[1]-=r.pointsArray[0][1],r.elements.length!==0)for(const s of r.elements)for(let o=0;o<s.points.length;o++)s.points[o]=this.rotatePoint(i,s.points[o],90);if(r.partialArea)for(const s of r.partialArea)for(let o=0;o<s.pointsArray.length;o++)s.pointsArray[o]=this.rotatePoint(i,s.pointsArray[o],90)}for(const n in this.store.getLineArrayBuilding){this.floorAreaIndex=n;const r=this.store.getLineArrayBuilding[n];for(this.wallAreaIndex in r.floor.wall){const i=r.floor.wall[this.wallAreaIndex];let s=!1;if(i.partialArea){let o,a;o=this.getCentroid(i.pointsArray),a=[o[0]-i.pointsArray[0][0],o[1]-i.pointsArray[0][1]];for(const l of i.partialArea)if(l.layingDirection==="vertical"&&l.selectedArea.length!==0){s=!0;for(let u=0;u<l.selectedArea.length;u++)l.selectedArea[u]=this.rotatePoint(a,l.selectedArea[u],-90)}if(s&&i.elements.length!==0)for(const l of i.elements)for(let u=0;u<l.points.length;u++)l.points[u]=this.rotatePoint(a,l.points[u],-90);if(this.calculateFacade(i.partialArea)&&(e=!0),s&&i.elements.length!==0)for(const l of i.elements)for(let u=0;u<l.points.length;u++)l.points[u]=this.rotatePoint(a,l.points[u],90);for(const l of i.partialArea)if(l.layingDirection==="vertical"&&l.selectedArea.length!==0){for(let u=0;u<l.facadePoints.length;u++){let c=l.facadePoints[u][0],f=[];for(let h=0,d=0;h<c.length/2;h++,d+=2){let p=[c[d],c[d+1]];f.push(p)}for(let h=0;h<f.length;h++)f[h]=this.rotatePoint(o,f[h],90);l.facadePoints[u]=[],l.facadePoints[u].push(f.flat())}for(let u=0;u<l.selectedArea.length;u++)l.selectedArea[u]=this.rotatePoint(a,l.selectedArea[u],90)}}}}for(const n of this.store.getLineArrayBuilding)for(this.wallAreaIndex in n.floor.wall){const r=n.floor.wall[this.wallAreaIndex];if(r.elements.length!==0){let i;for(const s of r.elements)if(s.insertionDepth)for(const o of s.insertionDepth){if(o.layingDirection==="vertical"&&o.insertionDepthDimension.length!==0){i=this.getCentroid(o.insertionDepthDimension);for(let a=0;a<o.insertionDepthDimension.length;a++)o.insertionDepthDimension[a]=this.rotatePoint(i,o.insertionDepthDimension[a],-90)}if(this.calculateFacade(o),o.layingDirection==="vertical"&&o.insertionDepthDimension.length!==0){i=this.getCentroid(o.insertionDepthDimension);for(let a=0;a<o.insertionDepthDimension.length;a++)o.insertionDepthDimension[a]=this.rotatePoint(i,o.insertionDepthDimension[a],90)}}}}t||(this.store.convaStage.find("#draggingCornerGroup")[0]&&this.store.convaStage.find("#draggingCornerGroup")[0].destroy(),this.resetSelectedArea()),e&&this.drawFacade(),Ms()},calculateFacade(t){this.addFuge();let e=!1,n=!1;const r=this.store.getLineArrayBuilding;if(t){if(t.insertionDepthDimension)n=!0,e=!0;else for(const i of t)if(!i.ignore&&i.selectedArea.length!==0){e=!0;continue}}else for(const i in r)for(const s of r[i].floor.wall)if(s.facade.selectedArea.length!==0){e=!0;continue}if(e){const i=this.facadeStore.getMyCoveringLength,s=this.facadeStore.getMyCoveringWidth,o=[];if(!n)for(const l in this.store.getLineArrayBuilding){const u=[];o.push([]);let c=0;this.store.getLineArrayBuilding[l].floor.wall.filter(function(f){o[l].push([]),f.elements.length!==0&&f.elements.forEach(h=>{if(!h.ignore){const d=[];for(let p=0;p<h.points.length;p++)d.push([h.points[p][0]+JSON.parse(JSON.stringify(f.pointsArray[0][0])),h.points[p][1]+JSON.parse(JSON.stringify(f.pointsArray[0][1]))]);o[l][c].push(d)}}),f.partialArea&&f.partialArea.length!==0&&f.partialArea.forEach(h=>{if(!h.ignore){const d=[];for(let p=0;p<h.pointsArray.length;p++){let g=!1;h.selectedArea&&h.selectedArea[p]&&h.selectedArea[p].length!==0&&(g=!0),t&&g?d.push([h.selectedArea[p][0]+JSON.parse(JSON.stringify(f.pointsArray[0][0])),h.selectedArea[p][1]+JSON.parse(JSON.stringify(f.pointsArray[0][1]))]):d.push([h.pointsArray[p][0]+JSON.parse(JSON.stringify(f.pointsArray[0][0])),h.pointsArray[p][1]+JSON.parse(JSON.stringify(f.pointsArray[0][1]))])}d&&d.length!==0&&u.push(d)}}),c++});for(const f of o[l])for(const h of u)f.push(h)}const a=(l,u)=>{let c=[];if(u===void 0)return;const f=u.selectedArea,h=f.flat();let d=this.getCorners(f);u.layingDirection!=="horizontal"&&(d=[d[1],d[2],d[3],d[0]]),u.insertionDepthDimension||(d=this.changeStartingPoint(d,u));const p=Math.ceil((d[2][1]-d[0][1])/s);let g;switch(u.layingType){case"verlegeart_1_2":g=Math.ceil((d[1][0]-d[3][0]+i/2)/i);break;case"verlegeart_1_3":g=Math.ceil((d[1][0]-d[3][0]+i/3*2)/i);break;default:g=Math.ceil((d[1][0]-d[3][0])/i);break}this.getFullLength(d);var x=[];let _=[];f.forEach(v=>{_.push(v.map(b=>Math.round(b)))});let m=sn([_]);for(let v=0;v<p;v++)for(let b=0;b<g;b++){let w=[],A=[],E=[],S=[],C=[];switch(u.layingType){case"fugenschnitt":A=[d[0][0]+b*i,d[0][1]+v*s],E=[d[0][0]+(b+1)*i,d[0][1]+v*s],S=[d[0][0]+(b+1)*i,d[0][1]+(v+1)*s],C=[d[0][0]+b*i,d[0][1]+(v+1)*s];break;case"verlegeart_1_2":const T=v%2!==0?-i/2:0;A=[d[0][0]+b*i+T,d[0][1]+v*s],E=[d[0][0]+(b+1)*i+T,d[0][1]+v*s],S=[d[0][0]+(b+1)*i+T,d[0][1]+(v+1)*s],C=[d[0][0]+b*i+T,d[0][1]+(v+1)*s];break;case"verlegeart_1_3":A=[d[0][0]+b*i-v%3*i/3,d[0][1]+v*s],E=[d[0][0]+(b+1)*i-v%3*i/3,d[0][1]+v*s],S=[d[0][0]+(b+1)*i-v%3*i/3,d[0][1]+(v+1)*s],C=[d[0][0]+b*i-v%3*i/3,d[0][1]+(v+1)*s];break;case"verlegeart_wechsel":let L=this.getFullLength(d),F=Math.abs(L%i-i);A=[d[0][0]+b*i-(v%2!==0?F:0),d[0][1]+v*s],E=[d[0][0]+(b+1)*i-(v%2!==0?F:0),d[0][1]+v*s],S=[d[0][0]+(b+1)*i-(v%2!==0?F:0),d[0][1]+(v+1)*s],C=[d[0][0]+b*i-(v%2!==0?F:0),d[0][1]+(v+1)*s];break}w=[A,E,S,C,A];let M=sn([w]),D=ag(M,m);D&&D.geometry.coordinates.forEach(T=>{T=T.flat(3),c.push([T]),x.push([this.facadeStore.layingDirectionAngle,180+this.facadeStore.layingDirectionAngle][Math.floor(Math.random()*2)])})}if(o&&o[l]&&o[l].length!==0&&o[l][this.wallAreaIndex].length>0){let v=this.getCentroid(this.convertFlatToMultiDimArray(h)),b=[];for(let w=0;w<o[l][this.wallAreaIndex].length;w++)if(JSON.stringify(o[l][this.wallAreaIndex][w])!==JSON.stringify(f)){if(this.facadeStore.layingDirectionAngle!==0){b=[];for(let M=0;M<o[l][this.wallAreaIndex][w].length;M++)b.push(this.rotatePoint(v,o[l][this.wallAreaIndex][w][M],this.facadeStore.layingDirectionAngle).map(D=>Math.round(D)))}else b=[...o[l][this.wallAreaIndex][w]];let A=sn([b]),E=[],S=[],C=0;c.forEach(M=>{M=M.flat(3);let D=[];for(let F=0,k=0;F<M.length/2;F++,k+=2)D[F]=[],D[F].push(Math.round(M[k]*100)/100,Math.round(M[k+1]*100)/100);let T=sn([D]),L=qy(T,A);L&&L.geometry.coordinates.forEach(F=>{F=F.flat(3),E.push([F.flat()]),S.push([x[C]])}),C++}),c=[],c=[...E],x=[],x=[...S]}}console.log(c.length),u.facadePoints=c,this.facadeStore.deckingRotationArray.length!=c.length&&(this.facadeStore.deckingRotationArray=[],this.facadeStore.deckingRotationArray=[...x])};for(const l in this.store.getLineArrayBuilding){const u=this.store.getLineArrayBuilding[l].floor.wall;if(t){if(this.floorAreaIndex===l){if(t.insertionDepthDimension)t.selectedArea=JSON.parse(JSON.stringify(t.insertionDepthDimension)),a(l,t),delete t.selectedArea;else for(let c=0;c<t.length;c++)if(!t[c].ignore&&t[c].selectedArea.length!==0){for(let f=0;f<t[c].selectedArea.length;f++)t[c].selectedArea[f][0]=t[c].selectedArea[f][0]+u[this.wallAreaIndex].pointsArray[0][0],t[c].selectedArea[f][1]=t[c].selectedArea[f][1]+u[this.wallAreaIndex].pointsArray[0][1];a(l,t[c]);for(let f=0;f<t[c].selectedArea.length;f++)t[c].selectedArea[f][0]=t[c].selectedArea[f][0]-u[this.wallAreaIndex].pointsArray[0][0],t[c].selectedArea[f][1]=t[c].selectedArea[f][1]-u[this.wallAreaIndex].pointsArray[0][1]}}}else for(this.wallAreaIndex in u)u[this.wallAreaIndex].facade.selectedArea.length!==0&&a(l,u[this.wallAreaIndex].facade)}}return this.removeFuge(),e},drawFacade(){this.store.convaStage.findOne("#facadesGroup")&&this.store.convaStage.findOne("#facadesGroup").destroy();const t=new ke.Group({id:"facadesGroup",listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1}),e=this.facadeStore.getMyCoveringLength,n=this.facadeStore.getMyCoveringWidth;let r=new Image;const i=["default_wpc.png"];var s=this.facadeStore.cachedRenderings.find(a=>a.name===i[0]);const o=()=>{const a=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall;let l,u=0;for(const c in a){u=0,this.store.convaStage.findOne(`#facadesGroup_wl:${c}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${c}`).destroy();const f=new ke.Group({id:`facadesGroup_wl:${c}`,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1});this.store.convaStage.findOne("#cubeViewLayer").add(f);const h=r.naturalWidth,d=r.naturalHeight;if(a[c].facade&&a[c].facade.facadePoints&&a[c].facade.facadePoints.length!==0){a[c].facade.layingDirection==="vertical"&&(u=90);for(const p of a[c].facade.facadePoints){const g=new ke.Line({points:p[0],opacity:1,stroke:"black",strokeWidth:1,fillPatternImage:r,fillPatternRotation:u,fillPatternScaleX:e/h,fillPatternScaleY:n/d,closed:!0,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1});if(f.add(g),a[c].facade.colorHexa){const x=new ke.Line({points:p[0],opacity:1,closed:!0,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1,fill:a[c].facade.colorHexa});f.add(x)}}}if(a[c].partialArea)for(const p in a[c].partialArea){u=0;const g=a[c].partialArea[p];if(this.store.convaStage.findOne(`#facadesGroup_wl:${c}_el:${p}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${c}_el:${p}`).destroy(),g.facadePoints&&g.facadePoints.length!==0){l=new ke.Group({id:`facadesGroup_wl:${c}_el:${p}`,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1}),this.store.convaStage.findOne("#cubeViewLayer").add(l),g.layingDirection==="vertical"&&(u=90);for(const x of g.facadePoints){const _=new ke.Line({points:x[0],opacity:1,stroke:"black",strokeWidth:1,fillPatternImage:r,fillPatternRotation:u,fillPatternScaleX:e/h,fillPatternScaleY:n/d,closed:!0,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1});if(l.add(_),g.colorHexa){const m=new ke.Line({points:x[0],opacity:1,closed:!0,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1,fill:g.colorHexa});l.add(m)}}}}}if(this.store.convaStage.findOne("#cubeViewLayer").add(t),t||l){const c=Math.max(t?t.zIndex():-1/0,l?l.zIndex():-1/0);this.store.convaStage.findOne("#distanceCubeViewGroup").zIndex(c)}};if(s)r=s.src,this.facadeStore.selectedRendering=this.facadeStore.cachedRenderings.findIndex(a=>a.name===s.name),o();else{try{r.src="./own/media/ait/"+i}catch{r.src="./own/media/ait/default_wpc.png"}r.onload=()=>{this.facadeStore.cachedRenderings.push({name:i[0],src:r}),this.facadeStore.selectedRendering=this.facadeStore.cachedRenderings.findIndex(a=>a.name==i),o()}}},resetSelectedArea(t){if(this.store.convaStage.findOne("#selectedElementGroup"))if(!t)this.store.convaStage.findOne("#selectedElementGroup").destroy();else{let e;t.wallIndex!==void 0&&t.elementIndex!==void 0?e=`selectedElement_wl:${t.wallIndex}_el:${t.elementIndex}`:t.wallIndex!==void 0&&t.elementIndex===void 0&&(e=`selectedElement_wl:${t.wallIndex}`),this.store.convaStage.findOne("#selectedElementGroup").children.forEach(n=>{n.id()!==e&&n.destroy()})}for(const e of this.store.getLineArrayBuilding)for(const n of e.floor.wall)if(n.facade&&(n.facade.selectedArea=[]),n.partialArea)for(const r of n.partialArea)r.ignore||(r.selectedArea=[])},setSelectedAreaForFacade(){for(const t of this.store.getLineArrayBuilding)for(const e of t.floor.wall)if(e.facade&&e.facade.facadePoints&&e.facade.facadePoints.length!==0&&(e.facade.selectedArea=JSON.parse(JSON.stringify(e.pointsArray))),e.partialArea)for(const n of e.partialArea)n.facadePoints&&n.facadePoints.length!==0&&(n.selectedArea=JSON.parse(JSON.stringify(n.pointsArray)))},sortHorizontal(t,e){return t[0]===e[0]?0:t[0]<e[0]?-1:1},sortVertical(t,e){return t[1]===e[1]?0:t[1]<e[1]?-1:1},changeStartingPoint(t,e,n){let r,i,s,o=0,a=0,l,u,c,f,h=t;const[d,p]=t[e.startingPoint];if(r={x:d,y:p},this.facadeStore.setCoveringDistance_X(parseInt(this.facadeStore.coveringDistance_x)),this.facadeStore.setCoveringDistance_Y(parseInt(this.facadeStore.coveringDistance_y)),this.facadeStore.coveringDistance_x||this.facadeStore.setCoveringDistance_X(0),this.facadeStore.coveringDistance_y||this.facadeStore.setCoveringDistance_Y(0),i=this.facadeStore.coveringDistance_x,s=this.facadeStore.coveringDistance_y,l=e.layingDirection,u=this.facadeStore.myCoveringLength,c=this.facadeStore.myCoveringWidth,f=e.layingType,l=="vertical"&&(i*=-1),l==="vertical")if(f!=="orthogonalDecking")o=r.x-t[0][0],a=r.y-t[0][1],o=u-o%u-s+u,a=c-a%c-i+c;else{let x=u+c;if(r.x==Math.max(...h.map(_=>_[0])))var g=-c;else g=0;o=r.x-t[0][0],a=r.y-t[0][1],o=x-o%x-s+x+g,a=c-a%c-i+c}else if(f!=="orthogonalDecking")o=r.x-t[0][0],a=r.y-t[0][1],o=u-o%u-i+u,a=c-a%c-s+c;else{let x=u+c;r.x==Math.max(...h.map(_=>_[0]))?g=-c:g=0,o=r.x-t[0][0],a=r.y-t[0][1],o=x-o%x-i+x+g,a=c-a%c-s+c}return t[0][0]-=o,t[3][0]-=o,t[0][1]-=a,t[1][1]-=a,f==="verlegeart_1_2"&&(t[0][1]-r.y)/c%2!==0&&(t[0][1]-=c,t[1][1]-=c),f==="verlegeart_1_3"&&(((t[0][1]-r.y)/c+2)%3===0?(t[0][0]-=u/3,t[3][0]-=u/3):((t[0][1]-r.y)/c+1)%3===0&&(t[0][0]-=u/3*2,t[3][0]-=u/3*2)),t},calcIntersections(t){let e,n,r=this.facadeStore.getSelectedAreas,i,s,o=[],a=[],l=[],u=[];t!=null?(s=this.facadeStore.displayCutOutArray[t],e=s.myCoveringWidth,n=s.myCoveringLength,i=s.layingType):(e=this.facadeStore.myCoveringWidth,n=this.facadeStore.myCoveringLength,i=this.facadeStore.selectedLayingType),this.store.convaStage.findOne("#tempIntersectionGroup")&&this.store.convaStage.findOne("#tempIntersectionGroup").destroy();let c=new ke.Group({id:"tempIntersectionGroup"});this.store.convaStage.findOne("#cubeViewLayer").add(c);for(let d of r){let p=[],g=[],x=[],_=[];d=this.convertFlatToMultiDimArray(d);let m=this.getCorners(d),v,b,w,A,E=Math.ceil((m[2][1]-m[0][1])/e),S;switch(i){case"verlegeart_1_2":S=Math.ceil((m[1][0]-m[3][0]+n/2)/n);break;case"verlegeart_1_3":S=Math.ceil((m[1][0]-m[3][0]+n/3*2)/n);break;default:S=Math.ceil((m[1][0]-m[3][0])/n);break}for(let C=0;C<E;C++){p[C]=[];for(let M=0;M<d.length-1;M++)if(v=[m[0][0],m[0][1]+e*C],b=[m[1][0],m[1][1]+e*C],w=d[M],A=d[M+1],v[1]<=w[1]&&v[1]>=A[1]||v[1]<=A[1]&&v[1]>=w[1]){let D=Gs(v,b,w,A);D!=null&&D.length>0&&(g.push({x:D[0],y:D[1],fill:"orange",radius:5}),p[C].push(D))}}for(let C=0;C<S;C++){x[C]=[];for(let M=0;M<d.length-1;M++)switch(w=d[M],A=d[M+1],i){case"fugenschnitt":if(v=[m[0][0]+n*C,m[0][1]],b=[m[3][0]+n*C,m[3][1]],v[0]<=w[0]&&v[0]>=A[0]||v[0]<=A[0]&&v[0]>=w[0]){let D=Gs(v,b,w,A);D!=null&&D.length>0&&(_.push({x:D[0],y:D[1],fill:"green",radius:5}),x[C].push(D))}break;case"verlegeart_1_2":if(v=[m[0][0]+n*C,m[0][1]],b=[m[3][0]+n*C,m[3][1]],v[0]<=w[0]&&v[0]>=A[0]||v[0]<=A[0]&&v[0]>=w[0]){let D=Gs(v,b,w,A);D!=null&&D.length>0&&(_.push({x:D[0],y:D[1],fill:"green",radius:5}),x[C].push(D))}if(v=[m[0][0]+n*C-n/2,m[0][1]],b=[m[3][0]+n*C-n/2,m[3][1]],v[0]<=w[0]&&v[0]>=A[0]||v[0]<=A[0]&&v[0]>=w[0]){let D=Gs(v,b,w,A);D!=null&&D.length>0&&(_.push({x:D[0],y:D[1],fill:"red",radius:5}),x[C].push(D))}break;case"verlegeart_1_3":if(v=[m[0][0]+n*C,m[0][1]],b=[m[3][0]+n*C,m[3][1]],v[0]<=w[0]&&v[0]>=A[0]||v[0]<=A[0]&&v[0]>=w[0]){let D=Gs(v,b,w,A);D!=null&&D.length>0&&(_.push({x:D[0],y:D[1],fill:"green",radius:5}),x[C].push(D))}if(v=[m[0][0]+n*C-n/3,m[0][1]],b=[m[3][0]+n*C-n/3,m[3][1]],v[0]<=w[0]&&v[0]>=A[0]||v[0]<=A[0]&&v[0]>=w[0]){let D=Gs(v,b,w,A);D!=null&&D.length>0&&(_.push({x:D[0],y:D[1],fill:"blue",radius:5}),x[C].push(D))}if(v=[m[0][0]+n*C-n/3*2,m[0][1]],b=[m[3][0]+n*C-n/3*2,m[3][1]],v[0]<=w[0]&&v[0]>=A[0]||v[0]<=A[0]&&v[0]>=w[0]){let D=Gs(v,b,w,A);D!=null&&D.length>0&&(_.push({x:D[0],y:D[1],fill:"red",radius:5}),x[C].push(D))}break;case"verlegeart_wechsel":if(v=[m[0][0]+n*C,m[0][1]],b=[m[3][0]+n*C,m[3][1]],v[0]<=w[0]&&v[0]>=A[0]||v[0]<=A[0]&&v[0]>=w[0]){let D=Gs(v,b,w,A);D!=null&&D.length>0&&(_.push({x:D[0],y:D[1],fill:"green",radius:5}),x[C].push(D))}break;case"orthogonalDecking":this.facadeStore.versteifung;break}}for(const C of g){const M=new ke.Circle(C);c.add(M)}for(const C of _){const M=new ke.Circle(C);c.add(M)}if(i!=="orthogonalDecking"){for(let C=0;C<p.length;C++)p[C].sort(this.sortHorizontal);for(let C=0;C<x.length;C++)x[C].sort(this.sortVertical)}else{for(let C=0;C<p.length;C++)p[C].sort(this.sortHorizontal);for(let C=0;C<x.length;C++){var f=x[C].filter((M,D)=>D%2==0),h=x[C].filter((M,D)=>D%2!=0);f.sort(function(M,D){return M[1]-D[1]}),h.sort(function(M,D){return M[1]-D[1]}),x[C]=f.concat(h)}}t!=null?(s.horizontalIntersectionArray=p,s.verticalIntersectionArray=x):(o.push(g),a.push(p),l.push(_),u.push(x))}c.cache(),this.facadeStore.setHorizontalIntersectionCirclesArray([]),this.facadeStore.setHorizontalIntersectionArray([]),this.facadeStore.setVerticalIntersectionCirclesArray([]),this.facadeStore.setVerticalIntersectionArray([]),this.facadeStore.setHorizontalIntersectionCirclesArray(o),this.facadeStore.setHorizontalIntersectionArray(a),this.facadeStore.setVerticalIntersectionCirclesArray(l),this.facadeStore.setVerticalIntersectionArray(u)}}},yG={mixins:[Vr],data(){return{store:we(),facadeStore:ao(),subconstructionStore:aw()}},methods:{updatePartialAreas(){const t=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall;for(const e in t){const n=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[e];this.store.convaStage.findOne(`#partialAreaGroup_fl:${this.store.selectedFloor}_wl:${e}`)&&this.store.convaStage.findOne(`#partialAreaGroup_fl:${this.store.selectedFloor}_wl:${e}`).destroy();const r=new ke.Group({id:`partialAreaGroup_fl:${this.store.selectedFloor}_wl:${e}`,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1});this.store.convaStage.findOne("#cubeViewLayer").add(r),this.store.convaStage.findOne("#facadesGroup")&&r.zIndex(this.store.convaStage.findOne("#facadesGroup").zIndex());for(const i in n.partialArea){const s=n.partialArea[i];let o=[];for(const l of s.pointsArray)o.push(l[0]+n.pointsArray[0][0]),o.push(l[1]+n.pointsArray[0][1]);const a=new ke.Line({id:`partialArea_wl:${e}_el:${i}`,points:o,stroke:"black",fill:"white",dash:[6,4],strokeWidth:2,lineCap:"round",closed:!0});r.add(a)}}}}},lw={mixins:[fv,yG,zr],data(){return{store:we(),constructionStore:sr(),facadeStore:ao()}},methods:{activeViewHandler(){if(this.store.lineArray.length===0)return!1;switch(this.store.setAddConstructionElement(!1),this.store.convaStage.findOne("#subconstructionGroup")&&this.store.convaStage.findOne("#subconstructionGroup").destroy(),this.store.convaStage.findOne("#tempElementGroup")&&(this.store.convaStage.findOne("#tempElementGroup").children.forEach(t=>{t.destroy()}),this.constructionStore.twoLastSelectedElement=[],this.constructionStore.editConstructionElement=null),!0){case this.store.activeFloorplan:this.store.convaStage.findOne("#baseLayer").show(),this.store.convaStage.findOne("#cubeViewLayer")&&this.store.convaStage.findOne("#cubeViewLayer").destroy(),this.store.convaStage.findOne("#miniMapGroup")&&this.store.convaStage.findOne("#miniMapGroup").destroy();const t=this.facadeStore.getEditSelectedElement;let e,n;t&&t.floorIndex!==void 0&&t.wallIndex!==void 0&&(t.elementIndex!==void 0?(e=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[t.wallIndex].partialArea[t.elementIndex],n=`selectedElement_wl:${t.wallIndex}_el:${t.elementIndex}`):(e=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[t.wallIndex].facade,n=`selectedElement_wl:${t.wallIndex}`),this.store.convaStage.findOne(`#${n}`)&&this.store.convaStage.findOne(`#${n}`).destroy(),e.selectedArea=[]),this.facadeStore.setEnableFacadeProperties(!1),this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.resetSelectedArea(),this.facadeStore.setSelectElement(!1),this.updateDragElements();break;case this.store.activeConstructionElement:this.store.convaStage.findOne("#cubeViewLayer")||this.setCubeView(),this.store.convaStage.findOne("#facadesGroup")&&this.store.convaStage.findOne("#facadesGroup").destroy();break;case this.store.activeFacade:this.store.convaStage.findOne("#cubeViewLayer")||this.setCubeView();break;case this.store.activeSubconstruction:this.store.convaStage.findOne("#cubeViewLayer")||this.setCubeView();break}},calcMiniMap(){const t=this.store.lineArray,e=[];for(let f=0;f<t.length;f++)e.push([t[f][0]-t[0][0],t[f][1]-t[0][1]]);const n=this.getCorners(e),r=300,i=n[1][0]-n[0][0],s=150,o=n[3][1]-n[0][1],a=r/i,l=s/o,u=Math.min(a,l);let c=[];return e.forEach(f=>{let h=f[0]*u,d=f[1]*u;c.push([h,d])}),c},getMiniMapDimension(t){let e=[],n=[];for(let s=0;s<t.length;s++)e.push([t[s][0]]),n.push([t[s][1]]);const r=Math.min.apply(null,e),i=Math.max.apply(null,n);return[r,i]},calcTextPos(t,e){return this.calcOffsetPolygon(t,-e)},setCubeView(){this.store.convaStage.findOne("#baseLayer").hide(),this.store.convaStage.find("#draggingCornerGroup")[0]&&this.store.convaStage.find("#draggingCornerGroup")[0].destroy(),this.store.convaStage.add(new ke.Layer({id:"cubeViewLayer",name:"cubeViewLayer",listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1})),this.store.convaStage.findOne("#tempLayer").zIndex(this.store.convaStage.findOne("#cubeViewLayer").zIndex());const t=new ke.Group({id:"cubeViewGroup"}),e=new ke.Group({id:"distanceCubeViewGroup",visible:this.store.showCornerAndEdges}),n=new ke.Group({id:"roofGroup",visible:this.store.showRoof});this.store.convaStage.findOne("#cubeViewLayer").add(t,n),this.parseAngles(),this.createMiniMap(),this.setFloorWallsPointsArray();let r=0;const i=this.store.lineArray[0][0],s=this.store.lineArray[0][1];let o,a,l;const u=this.store.getLineArrayBuilding[this.store.selectedFloor].floor,c=u.floorHeight;let f=this.store.zoomFactor<.5?Math.ceil(12/this.store.zoomFactor):Math.ceil(14/this.store.zoomFactor);const h=this.constructionStore.measureLineDistance,d=10,p=1,g=1;for(let x=0;x<u.distanceArray.length;x++){if(x<u.distanceArray.length-1){let A=[i+r+u.distanceArray[x]-p,s-d,i+r+u.distanceArray[x]+p,s-d,i+r+u.distanceArray[x]+p,s+c+d,i+r+u.distanceArray[x]-p,s+c+d,i+r+u.distanceArray[x]-p,s-d];o=new ke.Line({id:`distanceCubeView_wl:${x}`,name:"distanceCubeView",points:A,stroke:"black",fill:"black",strokeWidth:g,closed:!0});let E=[i+r+u.distanceArray[x],s+c+d+h],S=[E[0]-10,E[1]-15,E[0]+10,E[1]-15,E[0]+10,E[1]-30,E[0]+5,E[1]-30,E[0]+5,E[1]-20,E[0]-10,E[1]-20,E[0]-10,E[1]-15];a=new ke.Line({points:S,fill:"black",stroke:"black",strokeWidth:2,listening:!1}),l=new ke.Text({x:E[0]-13,y:E[E.length-1],align:"center",text:"Ecke",fontStyle:"bold",fill:"black",fontsize:12,shadowColor:"black",shadowOpacity:1,opacity:1})}if(u.wall[x]===void 0)continue;const _=new ke.Line({id:`cubeView_wl:${x}`,name:"cubeView",points:u.wall[x].pointsArray.flat(),stroke:"black",fill:"white",strokeWidth:2,closed:!0});let m=String.fromCharCode(x+65);x>25&&(m=String.fromCharCode(0+65)+String.fromCharCode(x-25-1+65));const v=this.calcOffsetPolygon(u.wall[x].pointsArray,-(h*1.5+d)),b=this.getCentroid([v[2],v[3]]),w=new ke.Text({x:b[0],y:b[1],width:100,height:100,offsetX:50,offsetY:50,align:"center",verticalAlign:"center",text:`Seite ${m}`,fill:"black",fontSize:f,fontStyle:"normal",listening:!1});r+=u.distanceArray[x],t.add(_),e.add(o,a,l,w)}this.store.convaStage.findOne("#cubeViewLayer").add(e);for(let x=0;x<this.store.getLineArrayBuildingRoofRidge.length;x++)for(let _=0;_<this.store.getLineArrayBuildingRoofRidge[x].length;_++){const m=this.store.getLineArrayBuildingRoofRidge[x][_];let v=[u.wall[m.lineIndex[0]].pointsArray[0][0],u.wall[m.lineIndex[0]].pointsArray[0][1],u.wall[m.lineIndex[0]].pointsArray[1][0],u.wall[m.lineIndex[0]].pointsArray[1][1],this.getDistance(this.store.lineArray[m.lineIndex[0]][0],this.store.lineArray[m.lineIndex[0]][1],m.nearestPointOnLine[0],m.nearestPointOnLine[1])+u.wall[m.lineIndex[0]].pointsArray[0][0],u.wall[m.lineIndex[0]].pointsArray[0][1]-m.height,u.wall[m.lineIndex[0]].pointsArray[0][0],u.wall[m.lineIndex[0]].pointsArray[0][1]];if(this.store.selectedFloor===this.store.getLineArrayBuilding.length-1){const b=new ke.Line({name:"roof"+x.toString(),points:v,stroke:"black"});n.add(b)}}this.updatePartialAreas(),this.writeCubeViewDistances(),this.updateCubeView(),this.drawInsertionDepth(),this.drawFacing(),this.changeFacadeLayingDirection()}}},oc={mixins:[Vr,lw],data(){return{store:we(),constructionStore:sr(),posX:null,posY:null,measureBaseLineDistance:null}},computed:{},methods:{updateCubeView(){this.store.convaStage.find("#tempHelplineGroup")[0]&&this.store.convaStage.find("#tempHelplineGroup")[0].destroy(),this.store.convaStage.find("#tempMeasureLineXGroup")[0]&&this.store.convaStage.find("#tempMeasureLineXGroup")[0].destroy(),this.store.convaStage.find("#tempMeasureLineYGroup")[0]&&this.store.convaStage.find("#tempMeasureLineYGroup")[0].destroy(),this.drawConstructionElementDistances(),this.store.convaStage.find("#tempConstructionElement")[0]&&(this.store.convaStage.find("#tempConstructionElement")[0].destroy(),this.store.constructionHelpLineXConfig.points([]),this.store.constructionHelpLineYConfig.points([]));let t=0;const e=[];if(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(r){e.push([]),r.elements.forEach(i=>{e[t].push(i.points.flat())}),t++}),e.length!==0){this.store.convaStage.findOne("#constructionElementGroup")&&this.store.convaStage.findOne("#constructionElementGroup").destroy();const r=new ke.Group({id:"constructionElementGroup"});this.store.convaStage.find("#cubeViewLayer")[0].add(r);for(const i in e){const s=e[i],[o,a]=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[i].pointsArray[0];if(s.length!==0){for(const l in s){const u=s[l],c=[];for(let h=0;h<u.length;h++)h%2===0?c.push(u[h]+o):c.push(u[h]+a);const f=new ke.Line({id:`constructionElement_wl:${i}_el:${l}`,points:c,closed:!0,stroke:"black",fill:"white"});r.add(f)}document.getElementById("constructionElements")&&(document.getElementById("constructionElements").style.cursor="default"),this.store.convaStage.container().style.cursor="default"}}}const n=[];this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(r){r.elements.forEach(i=>{for(let s=0;s<i.points.length;s++)n.push(i.points[s][0]+r.pointsArray[0][0]),n.push(i.points[s][1]+r.pointsArray[0][1])})}),this.store.lineArrayPoints=n},getSideView(){this.activeViewHandler()},writeCubeViewDistances(){this.store.convaStage.find("#measureLineXGroup")[0]&&this.store.convaStage.find("#measureLineXGroup")[0].destroy(),this.store.convaStage.find("#measureLineYGroup")[0]&&this.store.convaStage.find("#measureLineYGroup")[0].destroy();const t=this.constructionStore.measureLineDistanceArray.length-1,e=new ke.Group({id:"measureLineXGroup",offsetY:this.constructionStore.measureLineDistanceArray[t],visible:this.store.showMeasurement}),n=new ke.Group({id:"measureLineYGroup",offsetX:this.constructionStore.measureLineDistanceArray[t],visible:this.store.showMeasurement});this.posX=this.store.lineArray[0][0];var r=JSON.parse(JSON.stringify(this.posX)),i=0;this.posY=this.store.lineArray[0][1];var s=JSON.parse(JSON.stringify(this.posY)),o=0;const a=JSON.parse(JSON.stringify(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray)),l=[JSON.parse(JSON.stringify(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.floorHeight))];for(let u=0;u<a.length;u++)u!==0?r+=a[u-1]:this.drawMeasurePoint([r,this.posY],e),i=r+a[u],this.drawMeasureLine([r,this.posY,i,this.posY],e),this.drawMeasurePoint([i,this.posY],e);for(let u=0;u<l.length;u++)u!==0?s+=l[u-1]:this.drawMeasurePoint([this.posX,s],n,!1),o=s+l[u],this.drawMeasureLine([this.posX,s,this.posX,o],n,!1),this.drawMeasurePoint([this.posX,o],n,!1);this.store.convaStage.find("#cubeViewLayer")[0].add(e,n)},drawConstructionElementDistances(){this.constructionStore.measureLineDistanceArray=[40],this.store.convaStage.find("#elementMeasureLineXGroup")[0]&&this.store.convaStage.find("#elementMeasureLineXGroup")[0].destroy();const t=new ke.Group({id:"elementMeasureLineXGroup",visible:this.store.showMeasurement});this.store.convaStage.find("#elementMeasureLineYGroup")[0]&&this.store.convaStage.find("#elementMeasureLineYGroup")[0].destroy();const e=new ke.Group({id:"elementMeasureLineYGroup",visible:this.store.showMeasurement});this.store.convaStage.find("#cubeViewLayer")[0].add(t,e),this.store.convaStage.findOne("#constructionElementGroup")&&this.store.convaStage.findOne("#constructionElementGroup").zIndex(e.zIndex());let n=0;const r=[];this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall.filter(function(c){r.push([]),c.elements.forEach(f=>{const h=[];for(let d=0;d<f.points.length;d++)h.push(f.points[d][0]+c.pointsArray[0][0]),h.push(f.points[d][1]+c.pointsArray[0][1]);r[n].push(h)}),c.partialArea&&c.partialArea.forEach(f=>{const h=[];for(let d=0;d<f.pointsArray.length;d++)h.push(f.pointsArray[d][0]+c.pointsArray[0][0]),h.push(f.pointsArray[d][1]+c.pointsArray[0][1]);r[n].push(h)}),n++}),this.posX=this.store.lineArray[0][0];var i=JSON.parse(JSON.stringify(this.posX));this.posY=this.store.lineArray[0][1];const s=JSON.parse(JSON.stringify(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray));let o=this.constructionStore.measureLineDistance,a=[];for(const c in s)a[c]=[],r[c]&&r[c].length!==0&&(a[c].push(i,this.posY),a[c].push(r[c]),a[c]=this.convertMultiDimArrayToFlat(a[c])),i+=s[c];this.constructionStore.setMeasureLineDistanceArray([40]);let l;for(const c in a){let f=0;for(const d of this.store.getLineArrayBuildingRoofRidge)for(const p of d)p.lineIndex[0]==c&&(f=p.height);if(this.store.convaStage.find(`#elementMeasureLineXGroup_wl:${c}`)[0]&&this.store.convaStage.find(`#elementMeasureLineXGroup_wl:${c}`)[0].destroy(),a[c].length===0)continue;l=this.getAllXOfFlatArray(a[c]);const h=new ke.Group({id:`elementMeasureLineXGroup_wl:${c}`});t.add(h);for(let d=0;d<l.length;d++)d===0?this.drawMeasurePoint([l[d],this.posY-(o+f)],h):(this.drawMeasureLine([l[d-1],this.posY-(o+f),l[d],this.posY-(o+f)],h),this.drawMeasurePoint([l[d],this.posY-(o+f)],h))}for(const c in a){const f=a[c];let h=0;for(const d of this.store.getLineArrayBuildingRoofRidge)for(const p of d)p.lineIndex[0]==c&&(h=p.height);if(f&&f.length!==0){const d=this.constructionStore.measureLineDistance*2+h;this.store.convaStage.find("#measureLineXGroup")[0].offsetY(d);continue}}let u=0;for(let c=0;c<a.length;c++)if(this.store.convaStage.find(`#elementMeasureLineYGroup_wl:${c}`)[0]&&this.store.convaStage.find(`#elementMeasureLineYGroup_wl:${c}`)[0].destroy(),a[c]){if(a[c].length===0)continue;l=this.getAllYOfFlatArray(a[c]);let f;if(c!==0){for(let h=0;h<c;h++)if(l.toString()===this.getAllYOfFlatArray(a[h]).toString()){f=!0;continue}}if(!f){const h=new ke.Group({id:`elementMeasureLineYGroup_wl:${c}`});e.add(h);for(let d=0;d<l.length;d++)d===0?this.drawMeasurePoint([this.posX-this.constructionStore.measureLineDistanceArray[u],l[d]],h,!1):(this.drawMeasureLine([this.posX-this.constructionStore.measureLineDistanceArray[u],l[d-1],this.posX-this.constructionStore.measureLineDistanceArray[u],l[d]],h,!1),this.drawMeasurePoint([this.posX-this.constructionStore.measureLineDistanceArray[u],l[d]],h,!1));u++,this.constructionStore.measureLineDistanceArray.includes(this.constructionStore.measureLineDistance*(u+1))||this.constructionStore.measureLineDistanceArray.push(this.constructionStore.measureLineDistance*(u+1))}}for(const c of a)if(c&&c.length!==0){const f=this.constructionStore.measureLineDistanceArray[this.constructionStore.measureLineDistanceArray.length-1];this.store.convaStage.find("#measureLineYGroup")[0].offsetX(f);continue}},drawMeasureLine(t,e,n=!0){let r=this.getDistance(t[0],t[1],t[2],t[3]);const i=r>40,s=r<65?24:17;let o=0;if(n===!1&&(o=-90),i){const l=this.getCentroid(this.convertFlatToMultiDimArray(t)),u=new ke.Text({listening:!1,x:l[0],y:l[1],width:60,height:20,offsetX:30,offsetY:s,text:(r*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit,fontSize:14,fontStyle:"bold",fill:"#333333",verticalAlign:"middle",align:"center",rotation:o});e.add(u),n===!1?(t[1]+=2,t[3]-=2):(t[0]+=2,t[2]-=2)}const a=new ke.Arrow({points:t,stroke:"#333333",fill:"#333333",strokeWidth:2,pointerLength:10,pointerWidth:8,pointerAtBeginning:i,pointerAtEnding:i});e.add(a)},drawMeasurePoint(t,e,n=!0){let r=1,i=5,s=2,o=10;n===!1&&([r,i]=[i,r],[s,o]=[o,s]);const a=new ke.Rect({x:t[0],y:t[1],offsetX:r,offsetY:i,width:s,height:o,fill:"#333333"});e.add(a)}}},Qge="/assets/freiform.3b23452e.svg",eme="/assets/rechteck.c082e53f.svg",Dr=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},tme={data(){return{store:we(),inline:"freeForm",lastFloorHeight:0}},mixins:[zr,vG,oc,lw],mounted(){this.lastFloorHeight=this.store.floorHeight},computed:{distanceArray(){return this.store.distanceArray},drawingForm(){return this.store.drawingForm},lineArray(){return this.store.lineArray}},methods:{resetLineArray(){this.store.setLineArray([])},update3dCanvas(){Ms()},changeDrawingForm(t){this.resetAddFloorplanDrawing(),this.store.setDrawingForm(t)},changeDoors(){for(const t of this.store.getLineArrayBuilding)for(const e of t.floor.wall)for(const n of e.elements){const r=this.store.floorHeight-this.lastFloorHeight;for(const i of n.points)i[1]+=r}this.lastFloorHeight=this.store.floorHeight}}},nme={class:"input-masse-outer-wrap"},rme={class:"input-beschreibung"},ime={class:"input-border"},sme=["onUpdate:modelValue","onChange"],ome=Ae("span",{class:"text-color input-beschreibung pl-1"},"cm",-1),ame={class:"input-masse-outer-wrap"},lme={class:"input-border"},ume=Ae("span",{class:"text-color input-beschreibung pl-1"},"cm",-1);function cme(t,e,n,r,i,s){const o=Re("v-row"),a=Re("v-col"),l=Re("v-divider"),u=Re("v-tooltip"),c=Re("v-container");return Xe(),Et(c,{class:"toolbar_rows"},{default:ie(()=>[P(o,null,{default:ie(()=>[P(a,{cols:"2",class:"pt-0"},{default:ie(()=>[P(o,{class:"mb-2"},{default:ie(()=>[Ue(" Grundriss")]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.posX),1)]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.posY),1)]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.zoomFactor),1)]),_:1}),P(o)]),_:1}),P(l,{vertical:""}),P(a,{cols:"4",class:"pt-0"},{default:ie(()=>[Ae("h3",null,qe(t.$t("Grundriss zeichnen")),1),P(o,{class:"icon-wrap"},{default:ie(()=>[P(a,{class:"py-0",cols:"2"},{default:ie(()=>[P(u,{location:"bottom"},{activator:ie(({props:f})=>[Ae("label",null,[Ae("input",{class:"input-images",type:"radio",onClick:e[0]||(e[0]=h=>s.changeDrawingForm("freeForm")),value:"freeForm"}),Ae("img",Je(f,{src:Qge}),null,16)])]),default:ie(()=>[Ae("span",null,qe(t.$t("Freiform")),1)]),_:1})]),_:1}),P(a,{class:"py-0",cols:"2"},{default:ie(()=>[P(u,{location:"bottom"},{activator:ie(({props:f})=>[Ae("label",null,[Ae("input",{class:"input-images",type:"radio",onClick:e[1]||(e[1]=h=>s.changeDrawingForm("rectangle")),value:"freeForm"}),Ae("img",Je(f,{src:eme}),null,16)])]),default:ie(()=>[Ae("span",null,qe(t.$t("Rechteck")),1)]),_:1})]),_:1})]),_:1})]),_:1}),P(l,{vertical:""}),P(a,{cols:"4",class:"pt-0"},{default:ie(()=>[Ae("h3",null,qe(t.$t("Seiten bearbeiten")),1),Ae("div",nme,[P(o,{class:"input-masse-wrap"},{default:ie(()=>[(Xe(!0),Pt(mt,null,cu(i.store.getLineArrayBuilding[i.store.selectedFloor].floor.distanceArray.length,(f,h)=>(Xe(),Et(a,{class:"input-masse-inner-wrap",cols:"4",key:"distances"+h},{default:ie(()=>[Ae("span",rme,qe(t.setDimensionsLabelText(h)),1),Ae("div",ime,[Nt(Ae("input",{type:"number",class:"input-masse",step:"1","onUpdate:modelValue":d=>i.store.getLineArrayBuilding[i.store.selectedFloor].floor.distanceArray[h]=d,onChange:d=>(t.changeDistance(i.store.getLineArrayBuilding[i.store.selectedFloor].floor.distanceArray[h],h),i.store.showSideView&&t.getSideView(),t.updateDragElements())},null,40,sme),[[Su,i.store.getLineArrayBuilding[i.store.selectedFloor].floor.distanceArray[h]]]),ome])]),_:2},1024))),128))]),_:1})])]),_:1}),P(l,{vertical:""}),P(a,{cols:"2",class:"pt-0"},{default:ie(()=>[Ae("h3",null,qe(t.$t("Stockwerkh\xF6he")),1),Ae("div",ame,[P(o,{class:"input-masse-wrap"},{default:ie(()=>[P(a,{class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("div",lme,[Nt(Ae("input",{class:"input-masse",type:"number",step:"1","onUpdate:modelValue":e[2]||(e[2]=f=>i.store.getLineArrayBuilding[this.store.selectedFloor].floor.floorHeight=f),onChange:e[3]||(e[3]=f=>(i.store.showSideView&&t.getSideView(),s.changeDoors(),s.update3dCanvas()))},null,544),[[Su,i.store.getLineArrayBuilding[this.store.selectedFloor].floor.floorHeight]]),ume])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})}const fme=Dr(tme,[["render",cme]]),hme={methods:{editElement(){ke.Node.create(this.$refs.stageContainer.innerHTML)}}},dme={ref:"editElement"};function pme(t,e,n,r,i,s){const o=Re("v-card-title"),a=Re("v-btn"),l=Re("v-card-text"),u=Re("v-card");return Xe(),Pt("div",dme,[P(u,null,{default:ie(()=>[P(o,null,{default:ie(()=>[Ue("My Vuetify Element")]),_:1}),P(l,null,{default:ie(()=>[P(a,{color:"primary"},{default:ie(()=>[Ue("Click me!")]),_:1})]),_:1})]),_:1})],512)}const gme=Dr(hme,[["render",pme]]),ac={mixins:[oc,zr,Vr],data(){return{store:we(),constructionStore:sr(),cubeView:"",cubeViewX:"",cubeViewY:"",constructionElement:"",insidePolygon:"",index:0,currentFloor:0,lineArrayPoints:[],constructionElementPoints:[]}},methods:{constructionElementHandler(t){if(this.store.convaStage.find("#cubeViewGroup")[0]){this.constructionElement=this.store.convaStage.find("#tempConstructionElement")[0];const e=this.store.convaStage.find("#cubeViewGroup")[0].getChildren();this.cubeViewX=e[this.index].getAttr("points")[0],this.cubeViewY=e[this.index].getAttr("points")[1];const n=e[this.index].getAttr("points")[4]-this.cubeViewX,r=e[this.index].getAttr("points")[5]-this.cubeViewY,i=this.getCorners(this.convertFlatToMultiDimArray(this.constructionElement.points())),s=i[2][0],o=i[2][1],a=this.cubeViewX+this.constructionStore.distanceToEdge+s/2,l=this.cubeViewX+n-this.constructionStore.distanceToEdge-s/2;let u="";this.store.posX<=a?u=this.cubeViewX+this.constructionStore.distanceToEdge+s/2:this.store.posX>=l?u=this.cubeViewX+n-this.constructionStore.distanceToEdge-s/2:u=this.store.posX;const c=this.cubeViewY+this.constructionStore.distanceToEdge+o/2,f=this.cubeViewY+r-this.constructionStore.distanceToEdge-o/2;let h="";switch(this.store.posY<=c?h=this.cubeViewY+this.constructionStore.distanceToEdge+o/2:this.store.posY>=f?h=this.cubeViewY+r-this.constructionStore.distanceToEdge-o/2:h=this.store.posY,this.constructionElement.name()){case"door":this.constructionElement.setAttr("y",this.cubeViewY+r-o/2);break;default:this.constructionElement.setAttr("y",h);break}this.constructionElement.setAttr("x",u);const d=[this.cubeViewX+this.constructionStore.distanceToEdge+s/2,this.cubeViewX+n-this.constructionStore.distanceToEdge-s/2],p=[this.cubeViewY+this.constructionStore.distanceToEdge+o/2,this.cubeViewY+r-this.constructionStore.distanceToEdge-o/2];this.helpLineHandling(s,o,d,p),this.drawConstructionMeasureLine(this.index,s,o),this.constructionStore.setIsConstructionPlaceable(!0);const g=o+this.constructionStore.distanceToEdge*2,x=s+this.constructionStore.distanceToEdge*2;(g>r||x>n)&&(this.constructionStore.setIsConstructionPlaceable(!1),this.constructionElement.setAttr("stroke","red"))}},addConstructionElementToLineArray(){if(!this.constructionStore.isConstructionPlaceable)return this.constructionStore.setIsConstructionPlaceable(!0),!0;const t=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[this.index].pointsArray[0][0],e=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[this.index].pointsArray[0][1],n=this.constructionElement.getAttr("x")-this.constructionElement.getAttr("offsetX")-t,r=this.constructionElement.getAttr("y")-this.constructionElement.getAttr("offsetY")-e;let i=[];for(let l=0;l<this.constructionElement.points().length;l++)l%2===0?i.push(this.constructionElement.points()[l]+n):i.push(this.constructionElement.points()[l]+r);const s=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[this.index].elements;i=this.convertFlatToMultiDimArray(i);let o=this.constructionStore.getEditSelectedConstructionElement;for(let l=0;l<s.length;l++)if(!(o.floorIndex!==void 0&&o.wallIndex!==void 0&&o.elementIndex!==void 0&&o.floorIndex===this.store.selectedFloor&&o.wallIndex===this.index&&o.elementIndex===l)){var a=mG(sn([i]),sn([s[l].points]));if(a.geometry.coordinates.length===1)return this.feedback("Bauelement \xFCberschneidet sich mit einem anderen","error"),this.constructionStore.setIsConstructionPlaceable(!0),this.updateCubeView(),this.drawInsertionDepth(),this.drawFacing(),!0}if(o.floorIndex!==void 0&&o.wallIndex!==void 0&&o.elementIndex!==void 0){this.store.getLineArrayBuilding[o.floorIndex].floor.wall[o.wallIndex].elements[o.elementIndex].points=i;const l=this.getLineArrayWallOnMouseHover();if(l.wallIndex!==void 0&&o.wallIndex!==void 0&&l.wallIndex!=o.wallIndex){const u=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[o.wallIndex],c=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[l.wallIndex],f=this.store.getLineArrayBuilding[o.floorIndex].floor.wall[o.wallIndex].elements,h=f.length;c.elements.push(JSON.parse(JSON.stringify(f[o.elementIndex]))),u.elements.splice(o.elementIndex,1),this.facadeStore.setEditSelectedElement(o.floorIndex,l.wallIndex,h)}}else{const l=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[this.index].elements;l.push({id:this.constructionElement.name(),points:i});const u=l.length-1;if(this.constructionStore.lastInsertionDepth){l[u].insertionDepth=[];for(let c=0;c<l[u].points.length-1;c++){if(l[u].id==="door"&&c===1)continue;let f,h,d,p,g;const x=this.getDistance(l[u].points[c][0],l[u].points[c][1],l[u].points[c+1][0],l[u].points[c+1][1]);f=[0,0],h=[x,0],d=[x,this.constructionStore.insertionDepth],p=[0,this.constructionStore.insertionDepth],g=[0,0],l[u].insertionDepth.push({insertionDepthDimension:[f,h,d,p,g],startingPoint:0,layingDirection:"horizontal",layingType:"fugenschnitt"})}}if(this.constructionStore.lastFacingDepth){let c;l[u].id==="door"?c=[0,2,3]:c=[0,1,2,3],l[u].facing={facingDepth:this.constructionStore.facingDepth,facingSides:c}}}this.updateCubeView(),this.drawInsertionDepth(),this.drawFacing(),this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("opacity",.5),this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("stroke","black"),this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("strokeWidth",2),this.store.setAddConstructionElement(!1),Ms()},helpLineHandling(t=0,e=0,n=0,r=0){let i=this.getAllLineArrayPointsForHelpline();if(i.length!==0){this.drawHelpLineEdges(i);let s=[];const o=this.store.convaStage.find(".helpLineX"),a=this.store.convaStage.find(".helpLineY");(o.length!==0||a.length!==0)&&(o[0]!==void 0&&o[1]!==void 0&&t===o[1].getAttr("points")[0]-o[0].getAttr("points")[0]?s[0]=Math.round(o[0].getAttr("points")[0]+(o[1].getAttr("points")[0]-o[0].getAttr("points")[0])/2):o[0]&&(o[0].getAttr("points")[0]<this.store.posX?s[0]=Math.round(o[0].getAttr("points")[0]+t/2):s[0]=Math.round(o[0].getAttr("points")[0]-t/2)),a[0]!==void 0&&a[1]!==void 0&&e===a[1].getAttr("points")[0]-a[0].getAttr("points")[0]?s[1]=Math.round(a[0].getAttr("points")[1]+(a[1].getAttr("points")[1]-a[0].getAttr("points")[1])/2):a[0]&&(a[0].getAttr("points")[1]<this.store.posY?s[1]=Math.round(a[0].getAttr("points")[1]+e/2):s[1]=Math.round(a[0].getAttr("points")[1]-e/2)),s[0]&&n[0]<=s[0]&&s[0]<=n[1]&&this.constructionElement.setAttr("x",s[0]),s[1]&&r[0]<=s[1]&&s[1]<=r[1]&&this.constructionElement.setAttr("y",s[1]))}},drawConstructionMeasureLine(t,e,n){this.store.convaStage.find(`#elementMeasureLineXGroup_wl:${t}`)[0]&&this.store.convaStage.find(`#elementMeasureLineXGroup_wl:${t}`)[0].hide(),this.store.convaStage.find(`#elementMeasureLineYGroup_wl:${t}`)[0]&&this.store.convaStage.find(`#elementMeasureLineYGroup_wl:${t}`)[0].hide();const r=this.store.convaStage.find("#cubeViewGroup")[0].getChildren(),i=this.getAllLineArrayPoints();let s=this.getAllXOfFlatArray(this.convertMultiDimArrayToFlat(i[t]));s.push(this.constructionElement.getAttr("x")-e/2,this.constructionElement.getAttr("x")+e/2,r[t].getAttr("points")[0]),s=[...new Set(s)].sort(function(a,l){return a-l});let o=this.getAllYOfFlatArray(this.convertMultiDimArrayToFlat(i[t]));o.push(this.constructionElement.getAttr("y")-n/2,this.constructionElement.getAttr("y")+n/2,r[t].getAttr("points")[1]),o=[...new Set(o)].sort(function(a,l){return a-l}),this.drawXAxisElementMeasureLine(t,s),this.drawYAxisElementMeasureLine(t,o)},drawXAxisElementMeasureLine(t,e){const n=this.store.convaStage.find("#cubeViewGroup")[0].getChildren(),r=n[t].getAttr("points")[1]-this.constructionStore.measureLineDistance;var i=JSON.parse(JSON.stringify(n[t].getAttr("points")[0])),s=0;this.store.convaStage.find("#tempMeasureLineXGroup")[0]&&this.store.convaStage.find("#tempMeasureLineXGroup")[0].destroy();const o=new ke.Group({id:"tempMeasureLineXGroup",name:"measureConstructionElementGroup"});this.store.convaStage.find("#tempLayer")[0].add(o);const a=this.store.convaStage.find("#elementMeasureLineXGroup")[0].getChildren();for(const u in a){const c=new RegExp("elementMeasureLineXGroup_wl:(.*)","gm"),f=a[u].id();parseInt(f.replace(c,"$1"))==t?a[u].hide():a[u].show()}const l=this.constructionStore.measureLineDistance*2;this.store.convaStage.find("#measureLineXGroup")[0].offsetY(l);for(let u=0;u<e.length;u++)u!==0?i=e[u-1]:this.drawMeasurePoint([i,r],o),s=e[u],this.drawMeasureLine([i,r,s,r],o),this.drawMeasurePoint([s,r],o)},drawYAxisElementMeasureLine(t,e){const n=this.store.convaStage.find("#cubeViewGroup")[0].getChildren();var r=JSON.parse(JSON.stringify(n[t].getAttr("points")[1])),i=0;this.store.convaStage.find("#tempMeasureLineYGroup")[0]&&this.store.convaStage.find("#tempMeasureLineYGroup")[0].destroy();const s=new ke.Group({id:"tempMeasureLineYGroup",name:"measureConstructionElementGroup"});this.store.convaStage.find("#tempLayer")[0].add(s);let o=[];const a=this.store.convaStage.find("#elementMeasureLineYGroup")[0].getChildren();for(const f in a){const h=new RegExp("elementMeasureLineYGroup_wl:(.*)","gm"),d=a[f].id(),p=parseInt(d.replace(h,"$1"));o.push(p),p==t?a[f].hide():a[f].show()}for(const f in o){const h=o[f];t<h&&o.indexOf(t)===-1?this.store.convaStage.find(`#elementMeasureLineYGroup_el:${h}`)[0]&&this.store.convaStage.find(`#elementMeasureLineYGroup_el:${h}`)[0].offsetX(this.constructionStore.measureLineDistance):this.store.convaStage.find(`#elementMeasureLineYGroup_el:${h}`)[0]&&this.store.convaStage.find(`#elementMeasureLineYGroup_el:${h}`)[0].offsetX(0)}o.push(t),o=[...new Set(o)].sort(function(f,h){return f-h});const l=o.indexOf(t),u=[];for(let f=0;f<=o.length;f)u.push(this.constructionStore.measureLineDistance*++f);const c=this.store.lineArray[0][0]-u[l];this.store.convaStage.find("#measureLineYGroup")[0].offsetX(u[u.length-1]);for(let f=0;f<e.length;f++)f!==0?r=e[f-1]:this.drawMeasurePoint([c,r],s,!1),i=e[f],this.drawMeasureLine([c,r,c,i],s,!1),this.drawMeasurePoint([c,i],s,!1)},changeConstructionElementDimension(){if(this.store.showSideView&&this.store.addConstructionElement===!1){const t=this.store.convaStage.findOne("#constructionElementGroup"),e=this.getLineArrayElementOnMouseHover();if(this.constructionStore.editConstructionElement){this.constructionStore.editConstructionElement=null;const n=this.store.convaStage.findOne(`#constructionElement_wl:${this.lastSelectedConstructionElement.wallIndex}_el:${this.lastSelectedConstructionElement.elementIndex}`);n&&n.getParent().getAttr("id")==="tempElementGroup"&&(n.dash([]),n.stroke("black"),n.fill("rgba(200, 200, 200, 0)"),n.moveTo(this.store.convaStage.findOne("#constructionElementGroup")),this.constructionStore.selectedElement=null,t.opacity(1))}if(Object.values(e).length!==0){const n=this.store.convaStage.findOne(`#constructionElement_wl:${e.wallIndex}_el:${e.elementIndex}`);this.constructionStore.editConstructionElement=n,this.constructionStore.setEditSelectedConstructionElement(this.store.selectedFloor,this.lastSelectedConstructionElement.wallIndex,this.lastSelectedConstructionElement.elementIndex),n&&(n.dash([6,4]),n.stroke("green"),n.fill("rgba(150, 150, 150, 0.5)"),this.constructionStore.selectedElement=n,t.opacity(.4))}}},drawInsertionDepth(){this.store.convaStage.findOne("#insertionDepthGroup")&&this.store.convaStage.findOne("#insertionDepthGroup").destroy();const t=new ke.Group({id:"insertionDepthGroup"});this.store.convaStage.findOne("#constructionElementGroup").add(t);for(const e of this.store.getLineArrayBuilding)for(const n of e.floor.wall)if(n.elements.length!==0){for(const r of n.elements)if(r.insertionDepth){const i=r.points,s=Object.values(i).map(u=>[...u]),o=this.calcOffsetPolygon(s,10),a=[r.points[3][0]+n.pointsArray[0][0],o[3][1]+n.pointsArray[0][1],o[0][0]+n.pointsArray[0][0],o[0][1]+n.pointsArray[0][1],o[1][0]+n.pointsArray[0][0],r.points[1][1]+n.pointsArray[0][1]],l=new ke.Line({name:"insertionDepthLine",stroke:"black",points:a,strokeWidth:1,lineCap:"round",opacity:.8,dash:[6,6],draggable:!1});t.add(l)}}},drawFacing(){this.store.convaStage.findOne("#facingGroup")&&this.store.convaStage.findOne("#facingGroup").destroy();const t=new ke.Group({id:"facingGroup"});this.store.convaStage.findOne("#constructionElementGroup").add(t),t.zIndex(-1);for(const e of this.store.getLineArrayBuilding)for(const n of e.floor.wall)if(n.elements.length!==0){for(const r of n.elements)if(r.facing){const i=r.points,s=Object.values(i).map(l=>[...l]),o=this.calcOffsetPolygon(s,-2.5);let a=[];for(const l of r.facing.facingSides){if(r.id==="door"&&l===1)continue;let u,c,f,h,d,p=r.points[l+1],g=o[l+1];l===r.points.length-1&&(p=r.points[0],g=o[0]),u=[r.points[l][0]+n.pointsArray[0][0],r.points[l][1]+n.pointsArray[0][1]],c=[p[0]+n.pointsArray[0][0],p[1]+n.pointsArray[0][1]],l%2===0?(f=[g[0]+n.pointsArray[0][0],p[1]+n.pointsArray[0][1]],h=[o[l][0]+n.pointsArray[0][0],r.points[l][1]+n.pointsArray[0][1]]):(f=[p[0]+n.pointsArray[0][0],g[1]+n.pointsArray[0][1]],h=[r.points[l][0]+n.pointsArray[0][0],o[l][1]+n.pointsArray[0][1]]),d=[r.points[l][0]+n.pointsArray[0][0],r.points[l][1]+n.pointsArray[0][1]],a=[u,c,f,h,d];const x=new ke.Line({name:"insertionDepthLine",stroke:"gray",fill:"yellow",points:a.flat(),strokeWidth:1,lineCap:"round",opacity:.8,closed:!0,draggable:!1});t.add(x)}}}},changeWidth(t){const e=new RegExp("constructionElement_wl:(.*)_el:(.*)","gm"),n=this.constructionStore.editConstructionElement.id()||this.constructionStore.selectedElement.id(),r=n.replace(e,"$1"),i=n.replace(e,"$2"),[s,o]=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[r].pointsArray[0];if(this.constructionStore.editConstructionElement){this.calculatePolygons(this.constructionStore.editConstructionElement,this.constructionStore.constructionElementValue,"rectangle");const a=this.constructionStore.editConstructionElement.points();this.store.lineArrayPoints=JSON.parse(JSON.stringify(a));const l=[];for(let u=0;u<a.length;u++)u%2===0?l.push(a[u]-s):l.push(a[u]-o);this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[r].elements[i].points=this.convertFlatToMultiDimArray(l)}else this.tempConstructionElement.setAttr("width",this.getConstructionElementValue.width),this.tempConstructionElement.setAttr("offsetX",this.getConstructionElementValue.width/2);this.drawInsertionDepth(),this.drawFacing(),this.drawConstructionElementDistances(),this.store.showMenu=!1,this.deselectConstructionElement()},changeHeight(t){this.constructionStore.editConstructionElement?this.calculatePolygons(this.constructionStore.editConstructionElement,this.constructionStore.constructionElementValue,"rectangle"):(this.tempConstructionElement.setAttr("height",this.constructionStore.constructionElementValue.height),this.tempConstructionElement.setAttr("offsetY",this.constructionStore.constructionElementValue.height/2)),this.drawInsertionDepth(),this.drawFacing(),this.drawConstructionElementDistances(),this.store.showMenu=!1,this.deselectConstructionElement()},changeVModelHeightAndWidth(t,e){this.constructionStore.constructionElementValue[e]=t},changeHeightAndWidth(){this.changeWidth(),this.changeHeight(),this.deselectConstructionElement()},deselectConstructionElement(){if(this.store.convaStage.findOne("#tempElementGroup")){const t=this.store.convaStage.findOne("#tempElementGroup").getChildren(),e=this.store.convaStage.findOne("#constructionElementGroup");for(const n of t)n.dash([]),n.stroke("black"),n.fill("white"),n.moveTo(e),n.zIndex(-1),e.opacity(1)}this.changeConstructionElementDimension()},closeDeleteConstructionElement(){this.store.showMenu=!1},deleteConstructionElement(){this.store.convaStage.findOne(`#constructionElement_wl:${this.wallIndex}_el:${this.elementIndex}`)&&this.store.convaStage.findOne(`#constructionElement_wl:${this.wallIndex}_el:${this.elementIndex}`).destroy(),this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup")&&this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup").destroy(),this.store.convaStage.findOne("#tempSelectedElement")&&this.store.convaStage.findOne("#tempSelectedElement").destroy();for(let t=this.elementIndex;t<this.wallElements.length;t++)this.elementIndex!=JSON.stringify(t)&&this.store.convaStage.findOne(`#constructionElement_wl:${this.wallIndex}_el:${t}`)&&this.store.convaStage.findOne(`#constructionElement_wl:${this.wallIndex}_el:${t}`).id(`constructionElement_wl:${this.wallIndex}_el:${t-1}`);this.constructionStore.twoLastSelectedElement=[],this.wallElements.splice(this.elementIndex,1),this.store.showMenu=!1,this.store.setCursorStyle("default"),this.changeFacadeLayingDirection()},addConstructionElementFunctionButtons(t){const e=new RegExp("constructionElement_wl:(.*)_el:(.*)","gm"),n=this.constructionStore.selectedElement.id();if(this.wallIndex=n.replace(e,"$1"),this.elementIndex=n.replace(e,"$2"),this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[this.wallIndex]!==void 0){this.wallElements=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[this.wallIndex].elements;const r=this.store.convaStage.findOne("#tempLayer");if(r){this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup")&&this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup").destroy(),this.constructionElementFunctionButtonsGroup=new ke.Group({id:"constructionElementFunctionButtonsGroup"}),r.add(this.constructionElementFunctionButtonsGroup),this.multiDimPoints=this.convertFlatToMultiDimArray(t.points());const i=sn([this.multiDimPoints]),s=$2(i).geometry.coordinates,o=this.getCorners(this.multiDimPoints),a=o[1][0]-o[0][0],l=o[3][1]-o[0][1];let u;a>l?u=[[s[0]-55,s[1]],s,[s[0]+55,s[1]]]:u=[[s[0],s[1]-55],s,[s[0],s[1]+55]];let c=15/this.store.zoomFactor;const f=["delete","edit"];for(const h in f){const d=f[h],p=u[h];this.addConstructionElementDeleteButton(p,c,d)}}}},addConstructionElementDeleteButton(t,e,n){let r;switch(n){case"copy":r="Element kopieren";break;case"delete":r="Element entfernen";break;case"edit":r="Element bearbeiten";break}const i=50;var s=new ke.Label({id:`constructionElementButton_${n}`,x:t[0],y:t[1],width:i,height:i,offsetX:i/2,offsetY:i/2,opacity:.75});this.constructionElementFunctionButtonsGroup.add(s),s.add(new ke.Tag({id:`constructionElementButtonTag_${n}`,fill:"white",lineJoin:"round",strokeWidth:.5,shadowColor:"darkgray",shadowBlur:10,shadowOffsetX:5,shadowOffsetY:5,shadowOpacity:.5})),s.add(new ke.Text({id:"constructionElementButtonText",text:r,width:i,height:i,fontFamily:"Calibri",fontSize:e*.6,fill:"black",padding:4,align:"center",verticalAlign:"middle"})),s.on("click",o=>{let a,l;switch(n){case"copy":if(this.store.convaStage.findOne("#tempElementGroup")){const c=this.store.convaStage.findOne("#tempElementGroup").getChildren();for(const f of c){const h=this.store.convaStage.findOne("#constructionElementGroup");f.dash([]),f.stroke("black"),f.fill("rgba(200, 200, 200, 0)"),h!==void 0&&(f.moveTo(h),h.opacity(1))}this.store.convaStage.findOne("#tempElementGroup").destroy()}const u=new ke.Group({id:"tempElementGroup"});if(this.store.convaStage.findOne("#tempLayer").add(u),this.selectedConstructionElement&&this.store.addConstructionElement){this.store.convaStage.find("#tempConstructionElement")[0]&&(this.store.convaStage.find("#tempConstructionElement")[0].destroy(),this.store.constructionHelpLineXConfig.points([]),this.store.constructionHelpLineYConfig.points([])),this.selectedConstructionElement=null,this.constructionStore.setIsDraggingConstructionElement(!1);const c=this.constructionStore.twoLastSelectedElement.length-1;this.constructionStore.setEditSelectedConstructionElement(this.constructionStore.twoLastSelectedElement[c]),this.store.setAddConstructionElement(!1),document.getElementById("constructionElements").style.cursor="default",this.store.convaStage.container().style.cursor="default"}else{if(this.store.convaStage.find(".measureConstructionElementGroup").length!==0){const d=this.store.convaStage.find(".measureConstructionElementGroup");for(let p=0;p<d.length;p++)d[p].hide()}this.selectedConstructionElement=this.wallElements[this.elementIndex].id;let c=this.getCenterCoordinatesFromPointsArray(JSON.parse(JSON.stringify(this.multiDimPoints.flat()))),f={width:this.getMaxXOfFlatArray(c),height:this.getMaxYOfFlatArray(c)};const h=new ke.Line({id:"tempConstructionElement",name:this.selectedConstructionElement,points:c,offsetX:f.width/2,offsetY:f.height/2,stroke:"black",fill:"white"});u.add(h),this.constructionStore.setIsDraggingConstructionElement(!0),this.constructionStore.setEditSelectedConstructionElement(),this.store.setAddConstructionElement(!0),document.getElementById("constructionElements").style.cursor="move",this.store.convaStage.container().style.cursor="move"}break;case"delete":a="l\xF6schen",l=[{item:"text",text:"Wollen sie das Element wirklich l\xF6schen"},{item:"cancel",text1:"Ja",text2:"Nein",function1:this.deleteConstructionElement,function2:this.closeDeleteConstructionElement}],this.show(a,l);break;case"edit":this.constructionStore.editConstructionElement=this.constructionStore.selectedElement,a="bearbeiten",l=[{item:"input",text:"Breite",vModel:this.constructionStore.constructionElementValue.width,function:this.changeWidth,onChange:this.changeVModelHeightAndWidth,onChangeValue:"width"},{item:"input",text:"H\xF6he",vModel:this.constructionStore.constructionElementValue.height,function:this.changeHeight,onChange:this.changeVModelHeightAndWidth,onChangeValue:"height"},{item:"submit",text:"OK",function:this.changeHeightAndWidth}],this.show(a,l);break}this.drawConstructionElementDistances()}),s.on("mouseover",o=>{this.store.convaStage.findOne(`#constructionElementButtonTag_${n}`)&&(this.store.convaStage.findOne(`#constructionElementButtonTag_${n}`).fill("lightgray"),this.store.convaStage.findOne(`#constructionElementButtonTag_${n}`).stroke("black"))}),s.on("mouseout",o=>{this.store.convaStage.findOne(`#constructionElementButtonTag_${n}`)&&(this.store.convaStage.findOne(`#constructionElementButtonTag_${n}`).fill("white"),this.store.convaStage.findOne(`#constructionElementButtonTag_${n}`).stroke())})}}},hy=new I_,_G=({constructionElementObject:t,width:e,height:n,dragCallback:r=s=>{},dragEndCallback:i=(s,o)=>{}})=>{t.visible=!1;const s=new q(at(e),at(n),1);t.geometry.computeBoundingBox();const o=new q(1,1,1);t.geometry.boundingBox.getSize(o);const a=s.clone().divide(o);a.z=1,t.scale.copy(a),Ct.add(t);const l=Rr.addObject(t,10);Rr.setSelected(t),Wt.enabled=!1;const u=nt[we().selectedFloor];u.visible=!1,u.userData.roof.visible=!1;const c=u.userData.sections;for(let f=0;f<c.length;f++){const h=c[f];h.material=h.userData.visibleMaterial}l.addEventListener("drag",function(f){t.visible=!0,hy.setFromCamera(f.mouse,f.camera);const h=hy.intersectObjects(c,!0);if(h.length>0){const d=h[0].object;t.position.copy(h[0].point),t.position.z+=jr,t.rotation.copy(d.rotation),t.rotation.y-=Math.PI/2,d.material=d.userData.visibleMaterial;for(let p=0;p<c.length;p++){const g=c[p];g.uuid!==d.uuid&&(g.material=g.userData.bearlyVisibleMaterial)}r(f)}else{for(let d=0;d<c.length;d++){const p=c[d];p.material=p.userData.visibleMaterial}t.lookAt(f.camera.position)}}),l.addEventListener("dragend",function(f){var d;Wt.enabled=!0,hy.setFromCamera(f.mouse,f.camera);const h=hy.intersectObjects(c,!0);for(let p=0;p<c.length;p++){const g=c[p];g.material=g.userData.invisibleMaterial}if(u.visible=De().componentsVisible,u.userData.roof.visible=we().showRoof,Rr.removeObject(t),h.length>0){const p=h[0].object;i(f,p)}i(f,void 0),t.geometry.dispose(),t.material.dispose(),(d=t.parent)==null||d.remove(t)})},mme=function(){const t=g5();t.renderOrder=100;const{width:e,height:n}=sr().currentWindowValue;_G({constructionElementObject:t,width:e,height:n,dragCallback:s=>{},dragEndCallback:(s,o)=>{o&&De().addConstructionElementToLineArray(o,null,s.object.position.toArray(),"window",e,n)}})},vme=()=>{const t=a5();t.renderOrder=100;const{width:e,height:n}=sr().currentDoorValue,r=o=>{o.position.y=vr(we().selectedFloor)+at(n)/2};_G({constructionElementObject:t,width:e,height:n,dragCallback:o=>{r(o.object)},dragEndCallback:(o,a)=>{a&&De().addConstructionElementToLineArray(a,null,o.object.position.toArray(),"door",e,n)}})},yme="/assets/tur.e3a0b246.png",_me="/assets/windows.e65441eb.png",wme={mixins:[zr,oc,Vr,gme,ac],data(){return{store:we(),constructionStore:sr(),_3dstore:De(),selectedConstructionElement:"",tempConstructionElement:[],menuItems:[{title:"Item 1"},{title:"Item 2"},{title:"Item 3"}]}},computed:{getConstructionElementValue(){if(this.constructionStore.editConstructionElement){const t=this.getCorners(this.convertFlatToMultiDimArray(this.getCenterCoordinatesFromPointsArray(this.constructionStore.editConstructionElement.points())));this.constructionStore.constructionElementValue={width:t[2][0],height:t[2][1]}}else switch(this.selectedConstructionElement){case"door":this.constructionStore.constructionElementValue=this.constructionStore.getCurrentDoorValue;break;case"window":this.constructionStore.constructionElementValue=this.constructionStore.getCurrentWindowValue;break}return this.constructionStore.constructionElementValue}},methods:{test(){console.log("Test")},componentsMouseDown(t){if(this.store.convaStage.findOne("#tempElementGroup")){const n=this.store.convaStage.findOne("#tempElementGroup").getChildren();for(const r of n){const i=this.store.convaStage.findOne("#constructionElementGroup");r.dash([]),r.stroke("black"),r.fill("rgba(200, 200, 200, 0)"),i!==void 0&&(r.moveTo(i),i.opacity(1))}this.store.convaStage.findOne("#tempElementGroup").destroy()}const e=new ke.Group({id:"tempElementGroup"});if(this.store.convaStage.findOne("#tempLayer").add(e),this.selectedConstructionElement&&this.store.addConstructionElement){this.store.convaStage.find("#tempConstructionElement")[0]&&(this.store.convaStage.find("#tempConstructionElement")[0].destroy(),this.store.constructionHelpLineXConfig.points([]),this.store.constructionHelpLineYConfig.points([])),this.selectedConstructionElement=null,this.constructionStore.setIsDraggingConstructionElement(!1);const n=this.constructionStore.twoLastSelectedElement.length-1;this.constructionStore.setEditSelectedConstructionElement(this.constructionStore.twoLastSelectedElement[n]),this.store.setAddConstructionElement(!1),document.getElementById("constructionElements").style.cursor="default",this.store.convaStage.container().style.cursor="default"}else{if(this.store.convaStage.find(".measureConstructionElementGroup").length!==0){const s=this.store.convaStage.find(".measureConstructionElementGroup");for(let o=0;o<s.length;o++)s[o].hide()}const n=t.currentTarget.id;this.selectedConstructionElement=n;let r=null;switch(n){case"door":r=this.constructionStore.currentDoorValue;break;case"window":r=this.constructionStore.currentWindowValue;break;default:r=null}let i=[0,0,0,r.height,r.width,r.height,r.width,0,0,0];this.tempConstructionElement=new ke.Line({id:"tempConstructionElement",name:t.currentTarget.id,points:i,offsetX:r.width/2,offsetY:r.height/2,stroke:"black",fill:"white",opacity:0}),e.add(this.tempConstructionElement),this.constructionStore.setIsDraggingConstructionElement(!0),this.constructionStore.setEditSelectedConstructionElement(),this.store.setAddConstructionElement(!0),document.getElementById("constructionElements").style.cursor="move",this.store.convaStage.container().style.cursor="move"}if(this.store.activeCanvas==="3D")switch(this.selectedConstructionElement){case"door":vme();break;case"window":mme();break}},componentsMouseUp(t){},componentsDragStart(t){t.currentTarget.id,document.getElementById("constructionElements").style.cursor="pointer"},componentsDragEnd(t){t.currentTarget.id,document.getElementById("constructionElements").style.cursor="default"},swapConstructionDimensions(){switch(this.selectedConstructionElement){case"door":this.constructionStore.setCurrentDoorValue({width:this.constructionStore.constructionElementValue.width,height:this.constructionStore.constructionElementValue.height});break;case"window":this.constructionStore.setCurrentWindowValue({width:this.constructionStore.constructionElementValue.width,height:this.constructionStore.constructionElementValue.height});break}this.tempConstructionElement.setAttr("width",this.constructionStore.constructionElementValue.width),this.tempConstructionElement.setAttr("offsetX",this.constructionStore.constructionElementValue.width/2),this.tempConstructionElement.setAttr("height",this.constructionStore.constructionElementValue.height),this.tempConstructionElement.setAttr("offsetY",this.constructionStore.constructionElementValue.height/2),this.updateConstructionPoints()},updateConstructionPoints(){let t=[0,0,0,this.constructionStore.constructionElementValue.height,this.constructionStore.constructionElementValue.width,this.constructionStore.constructionElementValue.height,this.constructionStore.constructionElementValue.width,0,0,0];this.store.convaStage.findOne("#tempConstructionElement").setAttr("points",t)},addInsertionDepth(){if(this.constructionStore.changeSettingsGlobal){for(const t of this.store.getLineArrayBuilding)for(const e of t.floor.wall)if(e.elements.length!==0)for(const n of e.elements)if(this.constructionStore.insertionDepthSetGlobal){if(!n.insertionDepth){n.insertionDepth=[];for(let r=0;r<n.points.length-1;r++){if(n.id==="door"&&r===1)continue;let i,s,o,a,l;const u=this.getDistance(n.points[r][0],n.points[r][1],n.points[r+1][0],n.points[r+1][1]);i=[0,0],s=[u,0],o=[u,this.constructionStore.insertionDepth],a=[0,this.constructionStore.insertionDepth],l=[0,0],n.insertionDepth.push({insertionDepthDimension:[i,s,o,a,l],startingPoint:0,layingDirection:"horizontal",layingType:"fugenschnitt"})}this.constructionStore.lastInsertionDepth=!0}}else n.insertionDepth&&(delete n.insertionDepth,this.constructionStore.lastInsertionDepth=!1);this.constructionStore.insertionDepthSetGlobal=!this.constructionStore.insertionDepthSetGlobal}else{let t=this.constructionStore.editSelectedConstructionElement,e;if(t.floorIndex!==void 0&&(e=this.store.getLineArrayBuilding[t.floorIndex].floor,t.wallIndex!==void 0&&(e=e.wall[t.wallIndex],t.elementIndex!==void 0)))if(e=e.elements[t.elementIndex],e.insertionDepth)delete e.insertionDepth,this.constructionStore.lastInsertionDepth=!1;else{e.insertionDepth=[];for(let n=0;n<e.points.length-1;n++){if(e.id==="door"&&n===1)continue;let r,i,s,o,a;const l=this.getDistance(e.points[n][0],e.points[n][1],e.points[n+1][0],e.points[n+1][1]);r=[0,0],i=[l,0],s=[l,this.constructionStore.insertionDepth],o=[0,this.constructionStore.insertionDepth],a=[0,0],e.insertionDepth.push({insertionDepthDimension:[r,i,s,o,a],startingPoint:0,layingDirection:"horizontal",layingType:"fugenschnitt"})}this.constructionStore.lastInsertionDepth=!0}}this.drawInsertionDepth()},addFacing(){if(this.constructionStore.changeSettingsGlobal){for(const t of this.store.getLineArrayBuilding)for(const e of t.floor.wall)if(e.elements.length!==0)for(const n of e.elements)if(this.constructionStore.facingDepthSetGlobal){if(!n.facing){let r;n.id==="door"?r=[0,2,3]:r=[0,1,2,3],n.facing={facingDepth:this.constructionStore.facingDepth,facingSides:r},this.constructionStore.lastFacingDepth=!0}}else n.facing&&(delete n.facing,this.constructionStore.lastFacingDepth=!1);this.constructionStore.facingDepthSetGlobal=!this.constructionStore.facingDepthSetGlobal}else{let t=this.constructionStore.editSelectedConstructionElement,e;if(t.floorIndex!==void 0&&(e=this.store.getLineArrayBuilding[t.floorIndex].floor,t.wallIndex!==void 0&&(e=e.wall[t.wallIndex],t.elementIndex!==void 0)))if(e=e.elements[t.elementIndex],e.facing)delete e.facing,this.constructionStore.lastFacingDepth=!1;else{let n;e.id==="door"?n=[0,2,3]:n=[0,1,2,3],e.facing={facingDepth:this.constructionStore.facingDepth,facingSides:n},this.constructionStore.lastFacingDepth=!0}}this.drawFacing()},addPersist(){this.persist("Alle \xE4ndern","Wollen sie alle ausgew\xE4hlten Elemente \xE4ndern.",["Nein","Ja"],"error")}}},bme={class:"w-100"},xme={class:"input-beschreibung"},Sme={class:"input-border",style:{display:"inline"}},Ame=["onUpdate:modelValue","onChange","onKeyup"],Eme={class:"input-beschreibung"},Cme=["onClick","innerHTML"],Mme=["onClick","innerHTML"],Dme=["onClick","innerHTML"],Tme={class:"d-flex align-center"},Pme={class:"input-beschreibung"},Lme={class:"input-border"},Fme=Ae("span",{class:"text-color input-beschreibung pl-1"},"cm",-1),Ime={class:"input-beschreibung"},kme={class:"input-border"},Rme=Ae("span",{class:"text-color input-beschreibung pl-1"},"cm",-1),Ome={key:0},Bme={key:1},Nme={key:0},Vme={key:1};function zme(t,e,n,r,i,s){const o=Re("v-list-item-title"),a=Re("v-list-item"),l=Re("v-col"),u=Re("v-row"),c=Re("v-list-item-action"),f=Re("v-list"),h=Re("v-card"),d=Re("v-menu"),p=Re("v-divider"),g=Re("v-tooltip"),x=Re("v-switch"),_=Re("v-btn"),m=Re("v-container");return Xe(),Pt(mt,null,[Ae("template",null,[P(d,{modelValue:i.store.showMenu,"onUpdate:modelValue":e[0]||(e[0]=v=>i.store.showMenu=v),style:Nm(i.store.vMenuPosition),absolute:"","offset-y":"","close-on-click":!1,"close-on-content-click":!1},{default:ie(()=>[P(h,{style:{"background-color":"white !important"}},{default:ie(()=>[P(f,{style:{"background-color":"transparent !important"}},{default:ie(()=>[P(a,null,{default:ie(()=>[P(o,{style:{"font-weight":"bold"}},{default:ie(()=>[Ue(qe(t.$t(`Element ${i.store.vMenuHeadline}`)),1)]),_:1})]),_:1}),P(a,null,{default:ie(()=>[P(c,{class:"mr-0 w-100"},{default:ie(()=>[Ae("div",bme,[(Xe(!0),Pt(mt,null,cu(i.store.vMenuItems,v=>(Xe(),Pt("div",null,[v.item==="input"?(Xe(),Et(u,{key:0,class:"input-masse-wrap"},{default:ie(()=>[P(l,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",xme,qe(t.$t(`${v.text}`)),1)]),_:2},1024),P(l,{cols:"6",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("div",Sme,[Nt(Ae("input",{class:"input_mit_bild_menu",style:{display:"inline"},type:"number",step:"1","onUpdate:modelValue":b=>v.vModel=b,onChange:b=>v.onChange(v.vModel,v.onChangeValue),onKeyup:s9(v.function,["enter"]),onclick:"select()"},null,40,Ame),[[Su,v.vModel]])])]),_:2},1024)]),_:2},1024)):_t("",!0),v.item==="text"?(Xe(),Et(u,{key:1,class:"input-masse-wrap"},{default:ie(()=>[P(l,{class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Eme,qe(t.$t(`${v.text}`)),1)]),_:2},1024)]),_:2},1024)):_t("",!0),v.item==="submit"?(Xe(),Et(u,{key:2,class:"input-masse-wrap"},{default:ie(()=>[P(l,{cols:"2",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("button",{class:"button_apply pb-1",onClick:v.function,innerHTML:t.$t(`${v.text}`),style:{display:"inline-block"}},null,8,Cme)]),_:2},1024)]),_:2},1024)):_t("",!0),v.item==="cancel"?(Xe(),Et(u,{key:3,class:"input-masse-wrap"},{default:ie(()=>[P(l,{cols:"2",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("button",{class:"button_apply pb-1",onClick:v.function1,innerHTML:t.$t(`${v.text1}`),style:{display:"inline-block"}},null,8,Mme)]),_:2},1024),P(l,{cols:"2",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("button",{class:"button_apply pb-1",onClick:v.function2,innerHTML:t.$t(`${v.text2}`),style:{display:"inline-block"}},null,8,Dme)]),_:2},1024)]),_:2},1024)):_t("",!0)]))),256))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","style"])]),P(m,{fluid:"","max-height":"400",class:"toolbar_rows",id:"constructionElements",onMouseup:s.componentsMouseUp,onDragstart:s.componentsDragStart,onDragend:s.componentsDragEnd},{default:ie(()=>[P(u,null,{default:ie(()=>[P(l,{cols:"2",class:"pt-0"},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue(" T\xFCren und Fenster")]),_:1}),P(u,null,{default:ie(()=>[Ue(qe(i.store.posX),1)]),_:1}),P(u,null,{default:ie(()=>[Ue(qe(i.store.posY),1)]),_:1}),P(u,null,{default:ie(()=>[Ue(qe(i.store.zoomFactor),1)]),_:1})]),_:1}),P(p,{vertical:""}),P(l,{cols:"4",class:"pt-0"},{default:ie(()=>[Ae("h3",null,qe(t.$t("T\xFCren und Fenster")),1),P(u,null,{default:ie(()=>[P(l,{cols:"4",class:"pa-0"},{default:ie(()=>[Ae("h4",null,qe(t.$t("Eingangst\xFCren")),1),P(u,null,{default:ie(()=>[Ae("img",{id:"door",src:yme,style:{"max-height":"5rem"},draggable:"false",onMousedown:e[1]||(e[1]=(...v)=>s.componentsMouseDown&&s.componentsMouseDown(...v)),ondragstart:"test",onDragend:e[2]||(e[2]=(...v)=>s.componentsDragEnd&&s.componentsDragEnd(...v))},null,32)]),_:1})]),_:1}),P(l,{cols:"4",class:"pa-0"},{default:ie(()=>[Ae("h4",null,qe(t.$t("Fenster")),1),P(u,null,{default:ie(()=>[Ae("img",{id:"window",src:_me,style:{"max-height":"5rem"},draggable:"false",onMousedown:e[3]||(e[3]=(...v)=>s.componentsMouseDown&&s.componentsMouseDown(...v)),onDragstart:e[4]||(e[4]=(...v)=>s.componentsDragStart&&s.componentsDragStart(...v)),onDragend:e[5]||(e[5]=(...v)=>s.componentsDragEnd&&s.componentsDragEnd(...v))},null,32)]),_:1})]),_:1})]),_:1})]),_:1}),P(p,{vertical:""}),P(l,{cols:"6",class:"pt-0"},{default:ie(()=>[Ae("div",Tme,[Ae("h3",null,qe(t.$t("Eigenschaften")),1),P(g,{location:"top",text:"Die Einstellungen werden f\xFCr alle Elemente \xFCbernommen"},{activator:ie(({props:v})=>[Ae("label",Je(v,{class:"ml-4"}),qe(t.$t("F\xFCr alle \xFCbernehmen")),17)]),_:1}),P(x,{modelValue:i.constructionStore.changeSettingsGlobal,"onUpdate:modelValue":e[6]||(e[6]=v=>i.constructionStore.changeSettingsGlobal=v),color:"blue",class:"ml-2","hide-details":"",label:""},null,8,["modelValue"])]),P(u,{"no-gutters":""},{default:ie(()=>[P(l,{cols:"3",class:"input-masse-outer-wrap"},{default:ie(()=>[P(u,{class:"input-masse-wrap"},{default:ie(()=>[P(l,{cols:"12",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Pme,qe(t.$t("Breite")),1),Ae("div",Lme,[Nt(Ae("input",{class:"input-masse",type:"number",step:"1","onUpdate:modelValue":e[7]||(e[7]=v=>s.getConstructionElementValue.width=v),onChange:e[8]||(e[8]=(...v)=>this.changeWidth&&this.changeWidth(...v))},null,544),[[Su,s.getConstructionElementValue.width]]),Fme])]),_:1}),P(l,{cols:"12",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Ime,qe(t.$t("H\xF6he")),1),Ae("div",kme,[Nt(Ae("input",{class:"input-masse",type:"number",step:"1","onUpdate:modelValue":e[9]||(e[9]=v=>s.getConstructionElementValue.height=v),onChange:e[10]||(e[10]=(...v)=>this.changeHeight&&this.changeHeight(...v))},null,544),[[Su,s.getConstructionElementValue.height]]),Rme])]),_:1})]),_:1})]),_:1}),P(p,{vertical:""}),P(l,{cols:"9",class:"pa-0"},{default:ie(()=>[P(u,null,{default:ie(()=>[P(l,{cols:"12",class:"pt-5 ml-14"},{default:ie(()=>[P(_,{style:{width:"270px"},class:"button_primary",onClick:s.addInsertionDepth},{default:ie(()=>[this.constructionStore.lastInsertionDepth===!1?(Xe(),Pt("span",Ome,qe(t.$t("Einschubtiefe hinzuf\xFCgen")),1)):_t("",!0),this.constructionStore.lastInsertionDepth===!0?(Xe(),Pt("span",Bme,qe(t.$t("Einschubtiefe entfernen")),1)):_t("",!0)]),_:1},8,["onClick"])]),_:1}),P(l,{cols:"12",class:"ml-14"},{default:ie(()=>[P(_,{style:{width:"270px"},class:"button_primary",onClick:s.addFacing},{default:ie(()=>[this.constructionStore.lastFacingDepth===!1?(Xe(),Pt("span",Nme,qe(t.$t("Verblendung hinzuf\xFCgen")),1)):_t("",!0),this.constructionStore.lastFacingDepth===!0?(Xe(),Pt("span",Vme,qe(t.$t("Verblendung entfernen")),1)):_t("",!0)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["onMouseup","onDragstart","onDragend"])],64)}const Gme=Dr(wme,[["render",zme]]),Ume={props:{textures:{type:Array,required:!0},onSelectTexture:{type:Function,required:!0}},methods:{selectTexture(t){this.onSelectTexture(this.textures[t])}}},Hme=["src"];function Wme(t,e,n,r,i,s){const o=Re("v-col"),a=Re("v-row");return Xe(),Et(a,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[(Xe(!0),Pt(mt,null,cu(n.textures,(l,u)=>(Xe(),Et(o,{cols:"4",key:u,class:"",onClick:c=>{c.stopPropagation(),s.selectTexture(u)}},{default:ie(()=>[Ae("img",{src:l.thumbnail,class:"w-full h-auto"},null,8,Hme)]),_:2},1032,["onClick"]))),128))]),_:1})}const $me=Dr(Ume,[["render",Wme]]),Xme={data(){return{textures:[{thumbnail:"./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_Color.jpg",texture:new as().load("./own/media/textures/Bricks053_1K-JPG/Bricks053_1K_Color.jpg")},{thumbnail:"./own/media/textures/bricks.jpg",texture:new as().load("./own/media/textures/bricks.jpg")},{thumbnail:"./own/media/textures/bricks2.png",texture:new as().load("./own/media/textures/bricks2.png")}],currentTextureIndex:null}},methods:{selectTexture(t){this.currentTextureIndex=t,ky.map=t.texture,Ms()}},components:{TextureSelector:$me}};function Yme(t,e,n,r,i,s){const o=Re("TextureSelector"),a=Re("v-carousel-item");return Xe(),Et(a,null,{default:ie(()=>[P(o,{textures:i.textures,onSelectTexture:s.selectTexture},null,8,["textures","onSelectTexture"])]),_:1})}const jme=Dr(Xme,[["render",Yme]]),qme={mixins:[fv],data(){return{store:we(),facadeStore:ao()}},computed:{activeFloorplan(){return this.store.activeFloorplan},activeConstructionElement(){return this.store.activeConstructionElement},activeFacade(){return this.store.activeFacade},activeSubconstruction(){return this.store.activeSubconstruction},showSummary(){return this.store.showSummary}},methods:{resetFacade(){this.store.convaStage.find("#draggingCornerGroup")[0]&&this.store.convaStage.find("#draggingCornerGroup")[0].destroy();const t=this.store.getLineArrayBuilding;for(const e in t){const n=t[e];for(const r in n.floor.wall){const i=n.floor.wall[r];if(i.facade.facadePoints=[],i.facade.selectedArea=[],this.store.convaStage.findOne(`#facadesGroup_wl:${r}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${r}`).destroy(),i.partialArea)for(const s in i.partialArea){const o=i.partialArea[s];this.store.convaStage.findOne(`#facadesGroup_wl:${r}_el:${s}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${r}_el:${s}`).destroy(),o.facadePoints=[],o.selectedArea=[]}}}this.facadeStore.entireHouseCovered&&(this.facadeStore.entireHouseCovered=!1),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea(),Ms()},deleteSingleFacade(){this.store.convaStage.find("#draggingCornerGroup")[0]&&this.store.convaStage.find("#draggingCornerGroup")[0].destroy();let t=this.facadeStore.getAllSelectedElement;for(const e of t){let n;e.floorIndex!==void 0&&(n=this.store.getLineArrayBuilding[e.floorIndex].floor,e.wallIndex!==void 0&&(n=n.wall[e.wallIndex],e.elementIndex!==void 0?(this.store.convaStage.findOne(`#facadesGroup_wl:${e.wallIndex}_el:${e.elementIndex}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${e.wallIndex}_el:${e.elementIndex}`).destroy(),delete n.partialArea[e.elementIndex].facadePoints,n.partialArea[e.elementIndex].selectedArea=[]):(this.store.convaStage.findOne(`#facadesGroup_wl:${e.wallIndex}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${e.wallIndex}`).destroy(),delete n.facade.facadePoints,n.facade.selectedArea=[]))),this.facadeStore.removeEntryFromAllSelectedElement(e)}this.facadeStore.entireHouseCovered&&(this.facadeStore.entireHouseCovered=!1),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.setEditSelectedElement(),this.resetSelectedArea()},drawingFacade(){this.changeFacadeLayingDirection(),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea()},nextToolbarComponent(){this.store.activeFloorplan?(this.store.activeFloorplan=!1,this.store.activeConstructionElement=!0):this.store.activeConstructionElement?(this.store.activeConstructionElement=!1,this.store.activeFacade=!0):this.store.activeFacade?(this.store.activeFacade=!1,this.store.activeSubconstruction=!0):this.store.activeSubconstruction&&(this.store.showSummary=!0,this.store.activeSubconstruction=!1)},previousToolbarComponent(){this.store.showSummary?(this.store.showSummary=!1,this.store.activeSubconstruction=!0):this.store.activeSubconstruction?(this.store.activeFacade=!0,this.store.activeSubconstruction=!1):this.store.activeFacade?(this.store.activeFacade=!1,this.store.activeConstructionElement=!0):this.store.activeConstructionElement&&(this.store.activeConstructionElement=!1,this.store.activeFloorplan=!0)}}},Jme={style:{display:"flex","flex-direction":"column","align-items":"flex-end"}},Kme={class:"pr-0",id:"button_weiter"},Zme={class:"pr-0",id:"button_weiter"},Qme={class:"pr-0",id:"button_weiter"},eve={id:"button_zurueck"},tve={id:"button_weiter"};function nve(t,e,n,r,i,s){const o=Re("v-icon"),a=Re("v-btn");return Xe(),Pt("div",Jme,[this.activeFacade&&this.facadeStore.selectedElement&&!this.facadeStore.selectedElementHasFacade?(Xe(),Et(a,{key:0,class:"button_primary mb-2",style:{"min-width":"260px"},onClick:s.drawingFacade},{default:ie(()=>[P(o,null,{default:ie(()=>[Ue(" mdi-pen")]),_:1}),Ae("p",Kme,qe(t.$t("Fassade zeichnen")),1)]),_:1},8,["onClick"])):_t("",!0),this.activeFacade&&this.facadeStore.selectedElement&&this.facadeStore.selectedElementHasFacade?(Xe(),Et(a,{key:1,class:"button_primary mb-2",style:{"min-width":"260px"},onClick:s.deleteSingleFacade},{default:ie(()=>[P(o,null,{default:ie(()=>[Ue(" mdi-trash-can")]),_:1}),Ae("p",Zme,qe(t.$t("Fassade l\xF6schen")),1)]),_:1},8,["onClick"])):_t("",!0),this.activeFacade?(Xe(),Et(a,{key:2,class:"button_primary mb-2",style:{"min-width":"260px"},onClick:s.resetFacade},{default:ie(()=>[P(o,null,{default:ie(()=>[Ue(" mdi-backup-restore")]),_:1}),Ae("p",Qme,qe(t.$t("Fassade zur\xFCcksetzen")),1)]),_:1},8,["onClick"])):_t("",!0),this.activeFloorplan?_t("",!0):(Xe(),Et(a,{key:3,class:"button_primary mb-2",style:{"min-width":"140px"},onClick:e[0]||(e[0]=l=>s.previousToolbarComponent())},{default:ie(()=>[P(o,null,{default:ie(()=>[Ue(" mdi-arrow-left")]),_:1}),Ae("p",eve,qe(t.$t("Zur\xFCck")),1)]),_:1})),this.showSummary?_t("",!0):(Xe(),Et(a,{key:4,class:"button_primary",style:{"min-width":"140px"},onClick:e[1]||(e[1]=l=>s.nextToolbarComponent())},{default:ie(()=>[Ae("p",tve,qe(t.$t("Weiter")),1),P(o,null,{default:ie(()=>[Ue(" mdi-arrow-right")]),_:1})]),_:1}))])}const wG=Dr(qme,[["render",nve]]),bG="/assets/Wood_1.821eb9b2.jpg",xG="/assets/Wood_2.b60b0b9b.jpg",SG="/assets/Wood_3.a5eaaeb3.jpg",e_="/assets/verlegemuster_fuge.cb5313af.svg",uk="/assets/verlegemuster_halb.3fa51785.svg",ck="/assets/verlegemuster_drei.5d0ff40f.svg",AG="/assets/diagonal_individuel.0f724641.svg",fk="/assets/waagrecht.ce70c774.svg",hk="/assets/senkrecht.a6e6472d.svg",rve={mixins:[fv,Vr,oc,sc,wG,ac],data(){return{store:we(),facadeStore:ao(),selectedConstructionElement:"",tempConstructionElement:[],floorArray:[],values:"",addPartialAreaFormSwitch:!0,chooselayingpattern:!1,chooselayingdirection:!1,chooselayingpatterncutout:!1,chooselayingdirectioncutout:!1,showColorPicker:!1,selectedColor:"",mode:"rgba",modes:["hsla","rgba","hexa"]}},watch:{addPartialAreaFormSwitch(t){t?this.facadeStore.addPartialAreaForm="freeForm":this.facadeStore.addPartialAreaForm="rectangle"}},mounted(){this.addPartialAreaFormSwitch=this.facadeStore.addPartialAreaForm==="freeForm"},computed:{getFloors(){let t;for(let e in this.store.getLineArrayBuilding)this.store.getLineArrayBuilding[e].floor.lineArray.length!==0&&(e==0?t="EG":t=e+" OG",this.floorArray.push(t));return this.floorArray},getSelectedElementLayingType(){let t=this.facadeStore.getEditSelectedElement;t.floorIndex===void 0&&t.wallIndex===void 0&&t.elementIndex===void 0&&(t=this.facadeStore.getAllSelectedElement[this.facadeStore.getAllSelectedElement.length-1]);let e;return t&&t.floorIndex!==void 0&&(e=this.store.getLineArrayBuilding[t.floorIndex].floor,t.wallIndex!==void 0&&(e=e.wall[t.wallIndex],t.elementIndex!==void 0?e=e.partialArea[t.elementIndex]:e=e.facade)),e?e.layingType:""},getSelectedElementLayingDirection(){let t=this.facadeStore.getEditSelectedElement;t.floorIndex===void 0&&t.wallIndex===void 0&&t.elementIndex===void 0&&(t=this.facadeStore.getAllSelectedElement[this.facadeStore.getAllSelectedElement.length-1]);let e;return t&&t.floorIndex!==void 0&&(e=this.store.getLineArrayBuilding[t.floorIndex].floor,t.wallIndex!==void 0&&(e=e.wall[t.wallIndex],t.elementIndex!==void 0?e=e.partialArea[t.elementIndex]:e=e.facade)),e?e.layingDirection:""}},methods:{saveColor(){this.showColorPicker=!1;const t=this.hexToRgba(this.selectedColor),e=this.rgbaToHexa(t);let n=[],r=!1;if(this.facadeStore.getAllSelectedElement.length!==0)n.push(...this.facadeStore.getAllSelectedElement);else if(this.facadeStore.changeSettingsGlobal)for(const i in this.store.getLineArrayBuilding){const s=this.store.getLineArrayBuilding[i];for(const o in s.floor.wall){const a=s.floor.wall[o];if(a.facade.facadePoints.length!==0&&n.push({floorIndex:i,wallIndex:o}),a.partialArea)for(const l in a.partialArea)a.partialArea[l].facade.facadePoints.length!==0&&n.push({floorIndex:i,wallIndex:o,elementIndex:l})}}else for(const i in this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall){const s=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[i];if(s.facade.facadePoints.length!==0&&n.push({floorIndex:this.store.selectedFloor,wallIndex:i}),s.partialArea)for(const o in s.partialArea)s.partialArea[o].facade.facadePoints.length!==0&&n.push({floorIndex:this.store.selectedFloor,wallIndex:i,elementIndex:o})}for(let i=0;i<n.length;i++){let s;n[i].floorIndex!==void 0&&(s=this.store.getLineArrayBuilding[n[i].floorIndex].floor,n[i].wallIndex!==void 0&&(s=s.wall[n[i].wallIndex],n[i].elementIndex!==void 0?(s=s.partialArea[n[i].elementIndex],JSON.parse(JSON.stringify(s.pointsArray))):(JSON.parse(JSON.stringify(s.pointsArray)),s=s.facade))),s&&s.colorHexa!==e&&(s.colorHexa=e,s.colorRgba=t,r=!0)}this.facadeStore.setSelectElement(!1),r&&this.changeFacadeLayingDirection(),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea(),this.facadeStore.enableFacadeProperties=!1,this.facadeStore.setAllSelectedElement([]),this.changeFacadeLayingDirection()},setHouseSelectiontoggle(){this.facadeStore.entireHouseCovered=!this.facadeStore.entireHouseCovered},setHouseSelection(t){if(t){this.store.convaStage.findOne("#selectedCubeViewGroup")&&this.store.convaStage.findOne("#selectedCubeViewGroup").destroy();for(const e of this.store.getLineArrayBuilding)for(const n of e.floor.wall)if(n.facade.selectedArea.length===0&&(n.facade.selectedArea=JSON.parse(JSON.stringify(n.pointsArray))),n.partialArea)for(const r of n.partialArea)r.selectedArea=JSON.parse(JSON.stringify(r.pointsArray));this.facadeStore.setSelectElement(!1),this.changeFacadeLayingDirection(),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea()}else this.resetFacade(),this.facadeStore.setSelectElement(!0)},changeLayingType(t){this.facadeStore.setSelectedLayingType(t);let e=!1;for(const n of this.store.getLineArrayBuilding)for(const r of n.floor.wall)if(r.facade&&r.facade.layingType!==t&&(r.facade.layingType=t,r.facade.selectedArea=JSON.parse(JSON.stringify(r.pointsArray)),e=!0),r.partialArea)for(const i of r.partialArea)i.layingType!==t&&(i.layingType=t,i.selectedArea=JSON.parse(JSON.stringify(i.pointsArray)),e=!0);this.facadeStore.setSelectElement(!1),e&&this.changeFacadeLayingDirection(),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea(),this.facadeStore.enableFacadeProperties=!1},changeSelectedElementLayingType(t){this.facadeStore.setSelectedLayingType(t);let e=[],n=!1;this.facadeStore.changeSettingsGlobal?e.push(...this.facadeStore.getAllSelectedElement):e.push(this.facadeStore.getEditSelectedElement);for(let r=0;r<e.length;r++){let i,s;e[r].floorIndex!==void 0&&(i=this.store.getLineArrayBuilding[e[r].floorIndex].floor,e[r].wallIndex!==void 0&&(i=i.wall[e[r].wallIndex],e[r].elementIndex!==void 0?(i=i.partialArea[e[r].elementIndex],s=JSON.parse(JSON.stringify(i.pointsArray))):(s=JSON.parse(JSON.stringify(i.pointsArray)),i=i.facade))),i&&i.layingType!==t&&(i.layingType=t,i.selectedArea=s,n=!0)}this.facadeStore.setSelectElement(!1),n&&this.changeFacadeLayingDirection(),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea(),this.facadeStore.enableFacadeProperties=!1},changeLayingDirection(t){this.facadeStore.setSelectedLayingDirection(t);for(const e of this.store.getLineArrayBuilding)for(const n of e.floor.wall)if(n.facade&&(n.facade.layingDirection=t,n.facade.selectedArea=JSON.parse(JSON.stringify(n.pointsArray))),n.partialArea)for(const r of n.partialArea)r.layingDirection=t,r.selectedArea=JSON.parse(JSON.stringify(r.pointsArray));this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea(),this.facadeStore.setSelectElement(!1),this.facadeStore.enableFacadeProperties=!1,this.changeFacadeLayingDirection()},changeSelectedElementLayingDirection(t){this.facadeStore.setSelectedLayingDirection(t);let e=[];this.facadeStore.changeSettingsGlobal?e.push(...this.facadeStore.getAllSelectedElement):e.push(this.facadeStore.getEditSelectedElement);for(let n=0;n<e.length;n++){let r,i;e[n].floorIndex!==void 0&&(r=this.store.getLineArrayBuilding[e[n].floorIndex].floor,e[n].wallIndex!==void 0&&(r=r.wall[e[n].wallIndex],e[n].elementIndex!==void 0?(r=r.partialArea[e[n].elementIndex],i=r.pointsArray):(i=r.pointsArray,r=r.facade),r.layingDirection=t,r.selectedArea=JSON.parse(JSON.stringify(i))))}this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea(),this.facadeStore.setSelectElement(!1),this.facadeStore.enableFacadeProperties=!1,this.changeFacadeLayingDirection()},redrawFacade(){this.facadeStore.setSelectElement(!1),this.changeFacadeLayingDirection()},setFloorFacade(t){let e=!1;t===null&&(t="EG",e=!0);const n=this.floorArray.indexOf(t),r=this.store.getLineArrayBuilding;for(const i in r){const s=r[i];for(const o of s.floor.wall)if(!e&&i==n){if(o.facade.selectedArea=[...o.pointsArray],o.partialArea)for(const a of o.partialArea)a.selectedArea=[...a.pointsArray]}else if(o.facade.facadePoints=[],o.facade.selectedArea=[],o.partialArea)for(const a of o.partialArea)a.facadePoints=[],a.selectedArea=[]}this.facadeStore.setSelectElement(!1),this.selectedFloor=t,this.store.selectedFloor=n,this.changeFloor(),this.activeViewHandler(),e||this.changeFacadeLayingDirection()},editElement(){const t=this.facadeStore.getEditSelectedElement;let e;t.floorIndex!==void 0&&(e=this.store.getLineArrayBuilding[t.floorIndex].floor,t.wallIndex!==void 0&&(e=e.wall[t.wallIndex],t.elementIndex!==void 0&&(e=e.partialArea[t.elementIndex])))},setStartingPoint(){if(this.facadeStore.setStartingPoint)this.facadeStore.selectElement=!0,this.facadeStore.setStartingPoint=!1,this.store.convaStage.findOne("#startingPointButtonGroup")&&this.store.convaStage.findOne("#startingPointButtonGroup").destroy();else{const e=this.store.convaStage.findOne("#tempLayer");if(e){this.store.convaStage.findOne("#startingPointButtonGroup")&&this.store.convaStage.findOne("#startingPointButtonGroup").destroy();const n=new ke.Group({id:"startingPointButtonGroup"});e.add(n);const r=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall;for(const i in r){if(r[i].facade===void 0||r[i].facade.facadePoints.length===0)return;this.facadeStore.selectElement=!1,this.facadeStore.setStartingPoint=!0;const s=r[i].pointsArray,o=Object.values(s).map(u=>[...u]),a=this.calcOffsetPolygon(o,20);let l=39;for(let u=0;u<a.length-1;u++){const c=a[u];var t=new ke.Label({id:`startingPointButton_wl:${i}_bt:${u}`,x:c[0],y:c[1],width:l,height:l,offsetX:l/2,offsetY:l/2,opacity:.75});n.add(t),t.add(new ke.Tag({id:`startingPointButton_wl:${i}_bt:${u}_tag`,fill:"darkgray",lineJoin:"round",shadowColor:"black",shadowBlur:10,shadowOffsetX:5,shadowOffsetY:5,shadowOpacity:.5})),t.add(new ke.Text({text:u,width:l,height:l,fontFamily:"Calibri",fontSize:l*.6,fill:"white",padding:4,align:"center",verticalAlign:"middle"})),t.on("click",f=>{this.store.convaStage.findOne("#startingPointButtonGroup")&&this.store.convaStage.findOne("#startingPointButtonGroup").destroy(),this.facadeStore.setStartingPoint=!1;const h=new RegExp("startingPointButton_wl:(.*)_bt:(.*)","gm"),d=f.currentTarget.id(),p=d.replace(h,"$1"),g=d.replace(h,"$2");this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[p].facade.startingPoint=g,this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[p],this.changeFacadeLayingDirection()}),t.on("mouseover",f=>{this.store.convaStage.findOne(`#startingPointButton_wl:${f.currentTarget.index}_tag`)&&this.store.convaStage.findOne(`#startingPointButton_wl:${f.currentTarget.index}_tag`).fill("gray")}),t.on("mouseout",f=>{this.store.convaStage.findOne(`#startingPointButton_wl:${f.currentTarget.index}_tag`)&&this.store.convaStage.findOne(`#startingPointButton_wl:${f.currentTarget.index}_tag`).fill("darkgray")})}}}}},addPartialArea(){this.facadeStore.addPartialArea?(this.store.convaStage.getStage().container().style.cursor="none",this.facadeStore.addPartialArea=!1):(this.store.convaStage.getStage().container().style.cursor="crosshair",this.facadeStore.addPartialArea=!0),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea(),this.facadeStore.setSelectElement(!1),this.facadeStore.enableFacadeProperties=!1},deletePartialArea(){this.store.convaStage.find("#draggingCornerGroup")[0]&&this.store.convaStage.find("#draggingCornerGroup")[0].destroy(),this.resetSelectedArea();let t=this.facadeStore.getEditSelectedElement,e=!1,n;t.floorIndex!==void 0&&(n=this.store.getLineArrayBuilding[t.floorIndex].floor,t.wallIndex!==void 0&&(n=n.wall[t.wallIndex],t.elementIndex!==void 0&&(n.facade.facadePoints.length!==0&&(e=!0),n.facade.selectedArea=JSON.parse(JSON.stringify(n.pointsArray)),n.partialArea.splice(t.elementIndex,1),this.store.convaStage.findOne(`#facadesGroup_wl:${t.wallIndex}_el:${t.elementIndex}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${t.wallIndex}_el:${t.elementIndex}`).destroy(),this.store.convaStage.findOne(`#partialArea_wl:${t.wallIndex}_el:${t.elementIndex}`)&&this.store.convaStage.findOne(`#partialArea_wl:${t.wallIndex}_el:${t.elementIndex}`).destroy()))),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,this.facadeStore.enableFacadeProperties=!1,this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),e&&(this.updateCubeView(),this.changeFacadeLayingDirection(),this.resetSelectedArea())}},components:{WallTextureSelector:jme}},ive=Ae("br",null,null,-1),sve=Ae("img",{src:bG,style:{"max-height":"5rem"}},null,-1),ove=Ae("img",{src:xG,style:{"max-height":"5rem"}},null,-1),ave=Ae("img",{src:SG,style:{"max-height":"5rem"}},null,-1),lve=Ae("img",{src:bG,style:{"max-height":"5rem"}},null,-1),uve=Ae("img",{src:xG,style:{"max-height":"5rem"}},null,-1),cve=Ae("img",{src:SG,style:{"max-height":"5rem"}},null,-1),fve={class:"d-flex align-center"},hve={key:0,class:"mt-2 d-flex align-center"},dve={class:"text-center"},pve=Ae("span",{class:"headline"},"Pick a color",-1),gve={class:"d-flex flex-column"},mve={class:"d-flex align-center"},vve={key:0},yve={style:{display:"flex","flex-direction":"column"}},_ve=Ae("img",{src:e_,class:"my-3",style:{height:"50px"}},null,-1),wve=Ae("br",null,null,-1),bve={style:{display:"flex","flex-direction":"column"}},xve=Ae("img",{src:AG,class:"my-3",style:{height:"50px"}},null,-1),Sve={key:1},Ave={style:{display:"flex","flex-direction":"column"}},Eve=Ae("img",{src:e_,class:"my-3",style:{height:"50px"}},null,-1),Cve=Ae("br",null,null,-1),Mve={style:{display:"flex","flex-direction":"column"}},Dve=Ae("img",{src:AG,class:"my-3",style:{height:"50px"}},null,-1);function Tve(t,e,n,r,i,s){const o=Re("v-row"),a=Re("v-col"),l=Re("v-divider"),u=Re("v-icon"),c=Re("v-btn"),f=Re("WallTextureSelector"),h=Re("v-carousel-item"),d=Re("v-carousel"),p=Re("v-switch"),g=Re("v-select"),x=Re("v-tooltip"),_=Re("v-spacer"),m=Re("v-card-title"),v=Re("v-color-picker"),b=Re("v-card-text"),w=Re("v-card-actions"),A=Re("v-card"),E=Re("v-dialog"),S=Re("v-container");return Xe(),Et(S,{fluid:"",class:"toolbar_rows"},{default:ie(()=>[P(o,null,{default:ie(()=>[P(a,{cols:"2",class:"pt-0 pr-1"},{default:ie(()=>[P(o,{class:"mb-2"},{default:ie(()=>[Ue(" Verschalung")]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.posX),1)]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.posY),1)]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.zoomFactor),1)]),_:1}),ive]),_:1}),P(l,{vertical:""}),P(a,{cols:"6",class:"pt-0 pr-0"},{default:ie(()=>[Ae("h3",null,qe(t.$t("Verschalung")),1),P(o,{"no-gutters":""},{default:ie(()=>[P(a,{cols:"6",class:"pr-2"},{default:ie(()=>[Ae("h4",null,qe(t.$t("W\xE4hlen Sie die Verschalung ihres Hauses")),1),P(d,{"hide-delimiters":"",height:"100px"},{prev:ie(({props:C})=>[P(c,{width:"fit-content",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-left")]),_:1})]),_:2},1032,["onClick"])]),next:ie(({props:C})=>[P(c,{plain:"",flat:"",tile:"",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-right")]),_:1})]),_:2},1032,["onClick"])]),default:ie(()=>[P(f),P(h,null,{default:ie(()=>[P(o,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[P(a,{cols:"4"},{default:ie(()=>[sve]),_:1}),P(a,{cols:"4"},{default:ie(()=>[ove]),_:1}),P(a,{cols:"4"},{default:ie(()=>[ave]),_:1})]),_:1})]),_:1}),P(h,null,{default:ie(()=>[P(o,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[P(a,{cols:"4"},{default:ie(()=>[lve]),_:1}),P(a,{cols:"4"},{default:ie(()=>[uve]),_:1}),P(a,{cols:"4"},{default:ie(()=>[cve]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),P(l,{vertical:""}),P(a,{cols:"6",class:"pl-4"},{default:ie(()=>[P(o,null,{default:ie(()=>[Ae("div",fve,[Ae("label",{onClick:e[0]||(e[0]=(...C)=>s.setHouseSelectiontoggle&&s.setHouseSelectiontoggle(...C))},qe(t.$t("Soll das gesamte Haus verschalt werden?")),1),P(p,{modelValue:i.facadeStore.entireHouseCovered,"onUpdate:modelValue":[e[1]||(e[1]=C=>i.facadeStore.entireHouseCovered=C),s.setHouseSelection],"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),P(o,null,{default:ie(()=>[this.facadeStore.entireHouseCovered?_t("",!0):(Xe(),Pt("div",hve,[Ae("label",null,qe(t.$t("W\xE4hlen Sie ein Stockwerk")),1),P(g,{clearable:"",class:"ml-2",modelValue:i.values,"onUpdate:modelValue":[e[2]||(e[2]=C=>i.values=C),s.setFloorFacade],items:s.getFloors,variant:"outlined","hide-details":"",label:""},null,8,["modelValue","items","onUpdate:modelValue"])])),P(x,{location:"top",text:"Farbe ausw\xE4hlen"},{activator:ie(({props:C})=>[P(c,Je(C,{height:"36",onClick:e[3]||(e[3]=M=>i.showColorPicker=!0),class:"ml-1 mt-2 button_primary",icon:""}),{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-eyedropper")]),_:1})]),_:2},1040)]),_:1}),Ae("template",null,[Ae("div",dve,[P(E,{modelValue:i.showColorPicker,"onUpdate:modelValue":e[8]||(e[8]=C=>i.showColorPicker=C),width:"auto",class:"v-dialog-wrap"},{default:ie(()=>[P(A,{class:"text-center"},{default:ie(()=>[P(m,{class:"d-flex align-center"},{default:ie(()=>[pve,P(_),P(c,{class:"ml-2 close-button",flat:"",small:"",icon:"",onClick:e[4]||(e[4]=C=>i.showColorPicker=!1)},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-close")]),_:1})]),_:1})]),_:1}),P(b,null,{default:ie(()=>[Ae("div",gve,[P(v,{"hide-alpha":"",modelValue:i.selectedColor,"onUpdate:modelValue":e[5]||(e[5]=C=>i.selectedColor=C),mode:i.mode,"onUpdate:mode":e[6]||(e[6]=C=>i.mode=C)},null,8,["modelValue","mode"]),P(g,{modelValue:i.mode,"onUpdate:modelValue":e[7]||(e[7]=C=>i.mode=C),items:i.modes,style:{"max-width":"300px"},class:"mt-2"},null,8,["modelValue","items"])])]),_:1}),P(w,null,{default:ie(()=>[P(o,{class:"ma-0"},{default:ie(()=>[P(a,{cols:"6"}),P(a,{cols:"6"},{default:ie(()=>[P(c,{class:"primary-button",onClick:s.saveColor},{default:ie(()=>[Ue("Save")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),P(o,{class:"mt-4"},{default:ie(()=>[P(c,{class:"button_primary",onClick:s.addPartialArea},{default:ie(()=>[Ue(qe(t.$t("Ausschnitt hinzuf\xFCgen")),1)]),_:1},8,["onClick"]),P(x,{location:"top",text:"Ausschnitt entfernen"},{activator:ie(({props:C})=>[P(c,Je(C,{height:"36",onClick:s.deletePartialArea,class:"ml-1 button_primary",icon:""}),{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-close-box")]),_:1})]),_:2},1040,["onClick"])]),_:1}),P(x,{location:"top",text:`${i.addPartialAreaFormSwitch?"Freiform aktiv":"Rechteck aktiv"}`},{activator:ie(({props:C})=>[P(c,Je(C,{height:"36","hide-details":"",onClick:e[9]||(e[9]=M=>i.addPartialAreaFormSwitch=!i.addPartialAreaFormSwitch),value:i.addPartialAreaFormSwitch,class:"ml-1 button_primary",icon:""}),{default:ie(()=>[i.addPartialAreaFormSwitch===!0?(Xe(),Et(u,{key:0},{default:ie(()=>[Ue("mdi-vector-polyline-edit")]),_:1})):_t("",!0),i.addPartialAreaFormSwitch===!1?(Xe(),Et(u,{key:1},{default:ie(()=>[Ue("mdi-vector-square")]),_:1})):_t("",!0)]),_:2},1040,["value"])]),_:1},8,["text"])]),_:1})]),_:1})]),_:1})]),_:1}),P(l,{vertical:""}),P(a,{cols:"4",class:"pt-0"},{default:ie(()=>[Ae("div",mve,[Ae("h3",null,qe(t.$t("Eigenschaften")),1),P(x,{location:"top",text:"Die Einstellungen werden f\xFCr alle Elemente \xFCbernommen"},{activator:ie(({props:C})=>[Ae("label",Je(C,{class:"ml-4"}),qe(t.$t("F\xFCr alle \xFCbernehmen")),17)]),_:1}),P(p,{modelValue:i.facadeStore.changeSettingsGlobal,"onUpdate:modelValue":e[10]||(e[10]=C=>i.facadeStore.changeSettingsGlobal=C),color:"blue",class:"ml-2","hide-details":"",label:""},null,8,["modelValue"])]),i.facadeStore.enableFacadeProperties?_t("",!0):(Xe(),Pt("div",vve,[!i.chooselayingpattern&!i.chooselayingdirection?(Xe(),Et(c,{key:0,onClick:e[11]||(e[11]=C=>i.chooselayingpattern=!0),style:{width:"170px"},class:"button_primary_img"},{default:ie(()=>[Ae("div",yve,[_ve,Ae("span",null,qe(t.$t("Verlegeart")),1)])]),_:1})):_t("",!0),i.chooselayingpattern?(Xe(),Et(A,{key:1,class:"py-2 px-4 mr-2","no-gutters":""},{default:ie(()=>[Ae("h4",null,qe(t.$t("Verlegeart w\xE4hlen")),1),P(o,null,{default:ie(()=>[P(a,{cols:"8",class:"py-0"},{default:ie(()=>[P(d,{"hide-delimiters":"",height:"100px"},{prev:ie(({props:C})=>[P(c,{width:"fit-content",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-left")]),_:1})]),_:2},1032,["onClick"])]),next:ie(({props:C})=>[P(c,{plain:"",flat:"",tile:"",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-right")]),_:1})]),_:2},1032,["onClick"])]),default:ie(()=>[P(h,null,{default:ie(()=>[P(o,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[12]||(e[12]=C=>s.changeLayingType("fugenschnitt")),src:e_,style:{"max-height":"5rem"}})]),_:1}),P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[13]||(e[13]=C=>s.changeLayingType("verlegeart_1_2")),src:uk,style:{"max-height":"5rem"}})]),_:1})]),_:1})]),_:1}),P(h,null,{default:ie(()=>[P(o,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[P(a,{cols:"4",class:"py-0"},{default:ie(()=>[Ae("img",{onClick:e[14]||(e[14]=C=>s.changeLayingType("verlegeart_1_3")),src:ck,style:{"max-height":"5rem"}})]),_:1}),P(a,{cols:"4"})]),_:1})]),_:1})]),_:1}),P(c,{icon:"",onClick:e[15]||(e[15]=C=>{i.chooselayingpattern=!1,i.chooselayingdirection=!1}),style:{position:"absolute",top:"0",right:"0"}},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-close-box")]),_:1})]),_:1})]),_:1}),P(a,{cols:"4"},{default:ie(()=>[P(c,{class:"button_primary",style:{height:"fit-content"},onClick:s.setStartingPoint},{default:ie(()=>[Ue(qe(t.$t(" Startpunkt")),1),wve,Ue(" "+qe("setzen"))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):_t("",!0),!i.chooselayingdirection&!i.chooselayingpattern?(Xe(),Et(c,{key:2,onClick:e[16]||(e[16]=C=>i.chooselayingdirection=!0),style:{width:"170px"},class:"ml-2 button_primary_img"},{default:ie(()=>[Ae("div",bve,[xve,Ae("span",null,qe(t.$t("Verlegerichtung")),1)])]),_:1})):_t("",!0),i.chooselayingdirection?(Xe(),Et(A,{key:3,class:"py-2 px-4 mr-2","no-gutters":""},{default:ie(()=>[Ae("h4",null,qe(t.$t("Verlegerichtung w\xE4hlen")),1),P(d,{"hide-delimiters":"",height:"100px"},{prev:ie(({props:C})=>[P(c,{width:"fit-content",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-left")]),_:1})]),_:2},1032,["onClick"])]),next:ie(({props:C})=>[P(c,{plain:"",flat:"",tile:"",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-right")]),_:1})]),_:2},1032,["onClick"])]),default:ie(()=>[P(h,null,{default:ie(()=>[P(o,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[17]||(e[17]=C=>s.changeLayingDirection("horizontal")),src:fk,style:{"max-height":"5rem"}})]),_:1}),P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[18]||(e[18]=C=>s.changeLayingDirection("vertical")),src:hk,style:{"max-height":"5rem"}})]),_:1}),P(a,{cols:"4"})]),_:1})]),_:1})]),_:1}),P(c,{icon:"",onClick:e[19]||(e[19]=C=>(i.chooselayingpattern=!1,i.chooselayingdirection=!1)),style:{position:"absolute",top:"0",right:"0"}},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-close-box")]),_:1})]),_:1})]),_:1})):_t("",!0)])),i.facadeStore.enableFacadeProperties?(Xe(),Pt("div",Sve,[!i.chooselayingpatterncutout&!i.chooselayingdirectioncutout?(Xe(),Et(c,{key:0,onClick:e[20]||(e[20]=C=>i.chooselayingpatterncutout=!0),style:{width:"170px"},class:"button_primary_img"},{default:ie(()=>[Ae("div",Ave,[Eve,Ae("span",null,qe(t.$t("Verlegeart")),1)])]),_:1})):_t("",!0),i.chooselayingpatterncutout?(Xe(),Et(A,{key:1,class:"py-2 px-4 mr-2","no-gutters":""},{default:ie(()=>[Ae("h4",null,qe(t.$t("Verlegeart w\xE4hlen")),1),P(o,null,{default:ie(()=>[P(a,{cols:"8",class:"py-0"},{default:ie(()=>[P(d,{"hide-delimiters":"",height:"100px"},{prev:ie(({props:C})=>[P(c,{width:"fit-content",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-left")]),_:1})]),_:2},1032,["onClick"])]),next:ie(({props:C})=>[P(c,{plain:"",flat:"",tile:"",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-right")]),_:1})]),_:2},1032,["onClick"])]),default:ie(()=>[P(h,null,{default:ie(()=>[P(o,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[21]||(e[21]=C=>s.changeSelectedElementLayingType("fugenschnitt")),src:e_,style:{"max-height":"5rem"}})]),_:1}),P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[22]||(e[22]=C=>s.changeSelectedElementLayingType("verlegeart_1_2")),src:uk,style:{"max-height":"5rem"}})]),_:1})]),_:1})]),_:1}),P(h,null,{default:ie(()=>[P(o,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[23]||(e[23]=C=>s.changeSelectedElementLayingType("verlegeart_1_3")),src:ck,style:{"max-height":"5rem"}})]),_:1}),P(a,{cols:"4"})]),_:1})]),_:1})]),_:1}),P(c,{icon:"",onClick:e[24]||(e[24]=C=>(i.chooselayingpatterncutout=!1,i.chooselayingdirectioncutout=!1)),style:{position:"absolute",top:"0",right:"0"}},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-close-box")]),_:1})]),_:1})]),_:1}),P(a,{cols:"4",class:"py-0"},{default:ie(()=>[P(c,{class:"button_primary",style:{height:"fit-content"},onClick:s.setStartingPoint},{default:ie(()=>[Ue(qe(t.$t(" Startpunkt")),1),Cve,Ue(" "+qe("setzen"))]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})):_t("",!0),!i.chooselayingdirectioncutout&!i.chooselayingpatterncutout?(Xe(),Et(c,{key:2,onClick:e[25]||(e[25]=C=>i.chooselayingdirectioncutout=!0),style:{width:"170px"},class:"ml-2 button_primary_img"},{default:ie(()=>[Ae("div",Mve,[Dve,Ae("span",null,qe(t.$t("Verlegerichtung")),1)])]),_:1})):_t("",!0),i.chooselayingdirectioncutout?(Xe(),Et(A,{key:3,class:"py-2 px-4 mr-2","no-gutters":""},{default:ie(()=>[Ae("h4",null,qe(t.$t("Verlegerichtung w\xE4hlen")),1),P(d,{"hide-delimiters":"",height:"100px"},{prev:ie(({props:C})=>[P(c,{width:"fit-content",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-left")]),_:1})]),_:2},1032,["onClick"])]),next:ie(({props:C})=>[P(c,{plain:"",flat:"",tile:"",onClick:C.onClick},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-chevron-right")]),_:1})]),_:2},1032,["onClick"])]),default:ie(()=>[P(h,null,{default:ie(()=>[P(o,{"no-gutters":"",class:"v-carousel-wrap"},{default:ie(()=>[P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[26]||(e[26]=C=>s.changeSelectedElementLayingDirection("horizontal")),src:fk,style:{"max-height":"5rem"}})]),_:1}),P(a,{cols:"4"},{default:ie(()=>[Ae("img",{onClick:e[27]||(e[27]=C=>s.changeSelectedElementLayingDirection("vertical")),src:hk,style:{"max-height":"5rem"}})]),_:1}),P(a,{cols:"4"})]),_:1})]),_:1})]),_:1}),P(c,{icon:"",onClick:e[28]||(e[28]=C=>(i.chooselayingpatterncutout=!1,i.chooselayingdirectioncutout=!1)),style:{position:"absolute",top:"0",right:"0"}},{default:ie(()=>[P(u,null,{default:ie(()=>[Ue("mdi-close-box")]),_:1})]),_:1})]),_:1})):_t("",!0)])):_t("",!0)]),_:1})]),_:1})]),_:1})}const Pve=Dr(rve,[["render",Tve]]),Lve={mixins:[Vr,zr,fv],data(){return{store:we(),facadeStore:ao(),subconstructionStore:aw(),maxColLength:[],minColLength:[],maxRowLength:[],minRowLength:[]}},methods:{calcSubConstruction(){this.setSelectedAreaForFacade(),this.resetSubconstruction();for(const n of this.store.getLineArrayBuilding)for(const r in n.floor.wall){const i=n.floor.wall[r];if(i.facade.layingDirection==="vertical"&&(this.rotateWallLineArray(90,["subConstructionPoints"]),this.calcIntersectionsSC(i,r),this.rotateWallLineArray(-90,["subConstructionPoints"])),this.calcIntersectionsSC(i,r),i.partialArea&&i.partialArea.length!==0)for(const s of i.partialArea){const o=[];for(let a=0;a<s.pointsArray.length;a++)o.push([s.pointsArray[a][0]+i.pointsArray[0][0],s.pointsArray[a][1]+i.pointsArray[0][1]]);s.selectedArea=JSON.parse(JSON.stringify(o)),this.calcIntersectionsSC(s,r),s.selectedArea=JSON.parse(JSON.stringify(s.pointsArray))}}const t=[];for(const n in this.store.getLineArrayBuilding)if(n==this.store.selectedFloor){const r=this.store.getLineArrayBuilding[n];for(const i in r.floor.wall){const s=r.floor.wall[i];for(const o of s.facade.subConstructionLayer)for(const a of o.subConstructionPoints){let l;l="black";let u="#BBBBBB";t.push({points:a.flat().flat(),fill:u,stroke:l,strokeWidth:1,closed:!0,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1})}if(s.partialArea)for(const o of s.partialArea)for(const a of o.subConstructionLayer)for(const l of a.subConstructionPoints){let u;u="black";let c="#BBBBBB";t.push({points:l.flat().flat(),fill:c,stroke:u,strokeWidth:1,closed:!0,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1})}}}let e;this.store.convaStage.findOne("#subconstructionGroup")?e=this.store.convaStage.findOne("#subconstructionGroup"):(e=new ke.Group({id:"subconstructionGroup"}),this.store.convaStage.findOne("#cubeViewLayer").add(e));for(const n of t){const r=new ke.Line(n);e.add(r)}e.cache(),Ms()},calcIntersectionsSC(t,e){const n=this.store.getLineArrayBuilding;if(t)t.insertionDepthDimension||t.ignore||t.facadePoints&&t.facadePoints.length;else for(const h in n)for(const d of n[h].floor.wall)d.facade.selectedArea.length;const r=[];for(const h in this.store.getLineArrayBuilding){const d=[];r.push([]);let p=0;this.store.getLineArrayBuilding[h].floor.wall.filter(function(g){r[h].push([]),g.elements.length!==0&&g.elements.forEach(x=>{if(!x.ignore){const _=[];for(let m=0;m<x.points.length;m++)_.push([x.points[m][0]+JSON.parse(JSON.stringify(g.pointsArray[0][0])),x.points[m][1]+JSON.parse(JSON.stringify(g.pointsArray[0][1]))]);r[h][p].push(_)}}),g.partialArea&&g.partialArea.length!==0&&g.partialArea.forEach(x=>{if(!x.ignore){const _=[];for(let m=0;m<x.pointsArray.length;m++){let v=!1;x.selectedArea&&x.selectedArea[m]&&x.selectedArea[m].length!==0&&(v=!0),t&&v?_.push([x.selectedArea[m][0]+JSON.parse(JSON.stringify(g.pointsArray[0][0])),x.selectedArea[m][1]+JSON.parse(JSON.stringify(g.pointsArray[0][1]))]):_.push([x.pointsArray[m][0]+JSON.parse(JSON.stringify(g.pointsArray[0][0])),x.pointsArray[m][1]+JSON.parse(JSON.stringify(g.pointsArray[0][1]))])}_&&_.length!==0&&d.push(_)}}),p++});for(const g of r[h])for(const x of d)g.push(x)}this.addFuge(),this.store.convaStage.findOne("#subconstructionGroup")&&this.store.convaStage.findOne("#subconstructionGroup").destroy();let i=this.facadeStore.getMyCoveringLength,s=this.facadeStore.getMyCoveringWidth,o=this.subconstructionStore.getSideDistanceSC,a=this.subconstructionStore.getDistanceBetweenSC,l,u,c=null,f=null;if(t.facadePoints&&(t.subConstructionLayer.push(JSON.parse(JSON.stringify(this.store.lineArrayBuildingSubConstructionLayerDummy))),c=JSON.parse(JSON.stringify(t)),f=t.subConstructionLayer[t.subConstructionLayer.length-1]),t.facade&&(t.facade.subConstructionLayer.push(JSON.parse(JSON.stringify(this.store.lineArrayBuildingSubConstructionLayerDummy))),c=JSON.parse(JSON.stringify(t.facade)),f=t.facade.subConstructionLayer[t.facade.subConstructionLayer.length-1]),c&&c.facadePoints.length!==0){this.maxColLength[e]=[],this.minColLength[e]=[],this.maxRowLength[e]=[],this.minRowLength[e]=[];let h=[],d;c.selectedArea?d=c.selectedArea:c.pointsArray?d=c.pointsArray:t.pointsArray&&(d=t.pointsArray);let p=Object.values(d).map(N=>[...N]),g=JSON.parse(JSON.stringify(p)),x=JSON.parse(JSON.stringify(g));if(t.partialArea)for(const N of t.partialArea){const W=[];let H;N.selectedArea.length!==0?H=N.selectedArea:H=N.pointsArray;for(let K=0;K<H.length;K++)W.push([H[K][0]+d[0][0],H[K][1]+d[0][1]]);g=qy(sn([g]),sn([W])).geometry.coordinates[0],x=qy(sn([x]),sn([this.calcOffsetPolygon(W,-o)])).geometry.coordinates[0]}let _;this.store.convaStage.findOne("#subconstructionGroup")?_=this.store.convaStage.findOne("#subconstructionGroup"):(_=new ke.Group({id:"subconstructionGroup"}),this.store.convaStage.findOne("#cubeViewLayer").add(_));for(const N of h)new ke.Line(N);let m=this.getCorners(g);Math.ceil(m[0][0]),Math.floor(m[1][0]),Math.ceil(m[0][1]),Math.floor(m[3][1]);const v=g[0],b=m[0][0]-(i-((v[0]-m[0][0])%i||i)),w=m[0][1]-(s-((v[1]-m[0][1])%s||s)),A=[b,w],E=[A,[m[1][0],A[1]],m[2],[A[0],m[3][1]],A];new ke.Rect({x:v[0],y:v[1],width:4,offsetX:2,height:4,offsetY:2,fill:"red",stroke:"black",strokeWidth:1}),new ke.Rect({x:E[0][0],y:E[0][1],width:4,offsetX:2,height:4,offsetY:2,fill:"yellow",stroke:"black",strokeWidth:1}),Math.ceil(this.getDistance(E[0][0],E[0][1],E[1][0],E[1][1])/i);const S=Math.ceil(this.getDistance(E[0][0],E[0][1],E[3][0],E[3][1])/s),C=[];let M,D,T,L,F,k;switch(c.layingType){case"fugenschnitt":D=this.getDistance(E[0][0],E[0][1],E[1][0],E[1][1]),L=D/300,k=Math.floor(D/300),F=D-k*300,T=D/L;for(let N=0;N<=k;N++)N<k&&(M=[[E[0][0]+T*N,E[0][1]],[E[0][0]+T*(N+1),E[0][1]],[E[0][0]+T*(N+1),E[2][1]],[E[0][0]+T*N,E[2][1]],[E[0][0]+T*N,E[0][1]]],C.push(M)),N===k&&F!==0&&(M=[[E[0][0]+T*N,E[0][1]],[E[0][0]+T*N+F,E[0][1]],[E[0][0]+T*N+F,E[2][1]],[E[0][0]+T*N,E[2][1]],[E[0][0]+T*N,E[0][1]]],C.push(M));break;case"verlegeart_1_2":D=this.getDistance(E[0][0],E[0][1],E[1][0],E[1][1]),L=D/(300/2),k=Math.floor(D/(300/2)),F=D-k*(300/2),T=D/L;for(let N=0;N<=k;N++)N<k&&(M=[[E[0][0]+T*N,E[0][1]],[E[0][0]+T*(N+1),E[0][1]],[E[0][0]+T*(N+1),E[2][1]],[E[0][0]+T*N,E[2][1]],[E[0][0]+T*N,E[0][1]]],C.push(M)),N===k&&F!==0&&(M=[[E[0][0]+T*N,E[0][1]],[E[0][0]+T*N+F,E[0][1]],[E[0][0]+T*N+F,E[2][1]],[E[0][0]+T*N,E[2][1]],[E[0][0]+T*N,E[0][1]]],C.push(M));break;case"verlegeart_1_3":D=this.getDistance(E[0][0],E[0][1],E[1][0],E[1][1]),L=D/(300/3),k=Math.floor(D/(300/3)),F=D-k*(300/3),T=D/L;for(let N=0;N<=k;N++)N<k&&(M=[[E[0][0]+T*N,E[0][1]],[E[0][0]+T*(N+1),E[0][1]],[E[0][0]+T*(N+1),E[2][1]],[E[0][0]+T*N,E[2][1]],[E[0][0]+T*N,E[0][1]]],C.push(M)),N===k&&F!==0&&(M=[[E[0][0]+T*N,E[0][1]],[E[0][0]+T*N+F,E[0][1]],[E[0][0]+T*N+F,E[2][1]],[E[0][0]+T*N,E[2][1]],[E[0][0]+T*N,E[0][1]]],C.push(M));break;case"verlegeart_wechsel":C.push();break;case"orthogonalDecking":C.push();break;case"endlessbandage":C.push();break}const I=sn([g]),O=sn([x]);let $;for(let N=0;N<C.length;N++){this.maxColLength[e][N]=0,this.minColLength[e][N]=i;const W=sn([C[N]]),H=ag(I,W);let K=[];H&&(K=H.geometry.coordinates);const ee=ag(O,W);let Z;ee&&(Z=ee.geometry.coordinates[0]);for(let J of K){J.length===1&&(J=J[0]);for(let oe=0;oe<S;oe++){this.maxRowLength[e][oe]||(this.maxRowLength[e][oe]=0),this.minRowLength[e][oe]||(this.minRowLength[e][oe]=s);let he,ve,ye,V;he=[C[N][0][0],C[N][0][1]],ve=[C[N][1][0],C[N][0][1]],ye=[C[N][1][0],C[N][0][1]+s],V=[C[N][0][0],C[N][0][1]+s];const R=sn([[he,ve,ye,V,he]]),B=ag(I,R);if(B){$=B.geometry.coordinates[0],new ke.Line({points:$.flat(),stroke:"purple",strokeWidth:1});const j=this.getRealDistance($[0][0],$[0][1],$[1][0],$[1][1]),se=parseFloat(this.getRealDistance($[0][0],$[0][1],$[3][0],$[3][1]).toFixed(1));this.maxColLength[e][N]=Math.max(j,this.maxColLength[e][N]),this.minColLength[e][N]=Math.min(j,this.minColLength[e][N]),this.maxRowLength[e][oe]=Math.max(se,this.maxRowLength[e][oe]),this.minRowLength[e][oe]=Math.min(se,this.minRowLength[e][oe])}}let X;this.maxColLength[e][N]===i&&this.minColLength[e][N]===i?X=i:this.maxColLength[e][N]===this.minColLength[e][N]?X=this.maxColLength[e][N]:X=this.maxColLength[e][N];let Q=this.offsetPolygonSides(J,Array.from({length:J.length-1},(oe,he)=>he),-o);if(X-o>this.subconstructionStore.minSCDistance){switch(this.getFullLength(m),c.layingType){case"fugenschnitt":l=X-o*2;break;case"verlegeart_1_2":l=X-o*2;break;case"verlegeart_1_3":l=X-o*2;break;case"verlegeart_wechsel":break;case"orthogonalDecking":l=X+s-o*2;break;case"endlessbandage":l=X+s-o*2;break}l>o&&(u=l/Math.ceil(l/a));const oe=this.getCorners(Q);oe.push(JSON.parse(JSON.stringify(oe[0])));const he=this.getRealDistance(oe[0][0],oe[0][1],oe[1][0],oe[1][1])/u;for(let ve=0;ve<=he;ve++){let ye=oe[0][0]+ve*u,V=[[ye,oe[0][1]],[ye,oe[3][1]]];ve===he&&(ye=oe[1][0],V=[[ye,oe[0][1]],[ye,oe[3][1]]]);const R=K1(os(V),sn([Q])),B=[],j=[];R.features.forEach(G=>{let le=G.geometry.coordinates;j.push(le)}),j.length===2&&j.splice(1,j.length-2);const se=[j[0][0]-2,j[0][1],j[0][0]+2,j[0][1],j[0][0]+2,j[1][1],j[0][0]-2,j[1][1],j[0][0]-2,j[0][1]];B.push(se);let Y=!1;if((ve===0&&N===0||ve===he&&N===C.length-1)&&(Y=!0),!Y&&r[0][e].length!==0)for(const G of r[0][e]){const le=this.offsetPolygonSides(G,Array.from({length:G.length-1},(ae,ue)=>ue),o);let ge;if(Tge(os(j),sn([le]))){const ae=sn([this.convertFlatToMultiDimArray(B[0])]),ue=sn([le]);ge=qy(ae,ue),ge=ge.geometry.coordinates,B.splice(B.length-1,1);for(const U of ge)f.subConstructionPoints.push([this.convertMultiDimArrayToFlat(U)])}}B.length!==0&&f.subConstructionPoints.push([this.convertMultiDimArrayToFlat(B)])}}else if(X>o){const oe=this.getCorners(J);let he=[];for(let ye in oe){const V=oe[ye];he[ye]=[],ye<2?he[ye].push(V[0],V[1]+o):he[ye].push(V[0],V[1]-o),ye===JSON.stringify(oe.length-1)&&(he[oe.length]=[...he[0]])}const ve=ag(sn([he]),sn([Z]));if(ve!==null){const ye=ve.geometry.coordinates[0];let V=oe[0][0]+o,R=oe[1][0]-o;const B=[];B.push([[V,oe[0][1]],[V,oe[3][1]]]),B.push([[R,oe[0][1]],[R,oe[3][1]]]);for(const j of B){const se=K1(os(j),sn([ye])),Y=[],G=[];se.features.forEach(ge=>{const ae=ge.geometry.coordinates;G.push(ae)});const le=[G[0][0]-2,G[0][1],G[0][0]+2,G[0][1],G[0][0]+2,G[1][1],G[0][0]-2,G[1][1],G[0][0]-2,G[0][1]];Y.push(le),f.subConstructionPoints.push([this.convertMultiDimArrayToFlat(Y)])}}}}}}this.removeFuge()},resetSubconstruction(){this.store.convaStage.findOne("#subconstructionGroup")&&this.store.convaStage.findOne("#subconstructionGroup").destroy();for(const t of this.store.getLineArrayBuilding)for(const e of t.floor.wall){if(e.facade&&e.facade.subConstructionLayer&&e.facade.subConstructionLayer.length!==0)for(const n of e.facade.subConstructionLayer)e.facade.subConstructionLayer=[],n.subConstructionPoints&&n.subConstructionPoints.length!==0&&(e.facade.subConstructionLayer=[]);if(e.partialArea){for(const n of e.partialArea)if(n.subConstructionLayer&&n.subConstructionLayer.length!==0)for(const r of n.subConstructionLayer)n.subConstructionLayer=[],r.subConstructionPoints&&r.subConstructionPoints.length!==0&&(n.subConstructionLayer=[])}}},rotateWallLineArray(t,e){for(const n of this.store.getLineArrayBuilding)for(const r of n.floor.wall)if(r.facade&&r.facade.selectedArea.length!==0&&r.facade.layingDirection==="vertical"){let i=this.getCentroid(r.pointsArray);for(const s of e)for(const o of r.facade.subConstructionLayer)if(o.subConstructionPoints&&o.subConstructionPoints.length!==0){const a=o.subConstructionPoints;for(let l=0;l<o.subConstructionPoints.length;l++){let u=a[l][0],c=[];for(let f=0,h=0;f<u.length/2;f++,h+=2){let d=[u[h],u[h+1]];c.push(d)}for(let f=0;f<c.length;f++)c[f]=this.rotatePoint(i,c[f],t);o.subConstructionPoints[l]=[],o.subConstructionPoints[l].push(c.flat())}}for(let s=0;s<r.facade.selectedArea.length;s++)r.facade.selectedArea[s]=this.rotatePoint(i,r.facade.selectedArea[s],t);if(i[0]-=r.pointsArray[0][0],i[1]-=r.pointsArray[0][1],r.elements.length!==0)for(const s of r.elements)for(let o=0;o<s.points.length;o++)s.points[o]=this.rotatePoint(i,s.points[o],t);if(r.partialArea)for(const s of r.partialArea)for(let o=0;o<s.pointsArray.length;o++)s.pointsArray[o]=this.rotatePoint(i,s.pointsArray[o],t)}},rotatePartialAreaLineArray(t,e){for(const n of this.store.getLineArrayBuilding)for(const r of n.floor.wall)if(r.facade&&r.facade.selectedArea.length!==0&&r.facade.layingDirection==="vertical"&&r.partialArea){let i,s;s=this.getCentroid(r.pointsArray),i=[s[0]-r.pointsArray[0][0],s[1]-r.pointsArray[0][1]];for(const o of r.partialArea)if(o.layingDirection==="vertical"&&o.selectedArea.length!==0){if(o[e]&&o[e].length!==0)for(let a=0;a<o[e].length;a++){let l=o[e][a][0],u=[];for(let c=0,f=0;c<l.length/2;c++,f+=2){let h=[l[f],l[f+1]];u.push(h)}for(let c=0;c<u.length;c++)u[c]=this.rotatePoint(s,u[c],90);o[e][a]=[],o[e][a].push(u.flat())}for(let a=0;a<o.selectedArea.length;a++)o.selectedArea[a]=this.rotatePoint(i,o.selectedArea[a],90)}}},replaceSCLineArray(){let t=[],e=[],n=[],r=[],i="#BBBBBB";this.UKLineArray.forEach(a=>{a.doubleUK?e.push(a):a.border?t.push(a):a.stroke=="green"||a.stroke=="orange"?r.push(a):n.push(a)});let s=e.concat(r);s=s.concat(n),s=s.concat(t);let o=[...s];for(let a=0;a<o.length;a++){let l=o[a],u=(l.points[0]+l.points[2])/2,c=(l.points[1]+l.points[3])/2,f=(l.points[3]-l.points[1])/(l.points[2]-l.points[0]),h=this.getRealDistance(l.points[0],l.points[1],l.points[2],l.points[3]);l.x=u,l.y=c,l.offsetX=h/2,l.offsetY=2,l.width=h,l.height=4,l.color=l.stroke,l.fill=i,l.stroke="black",l.strokeWidth=1,l.rotation=Math.atan(f)*180/Math.PI,l.listening=!1,l.perfectDrawEnabled=!1,l.hitStrokeWidth=0,l.shadowForStrokeEnabled=!1}this.subconstructionStore.setUKLineArray(o)}}},Fve={mixins:[Vr,Lve],data(){return{store:we(),subconstructionStore:aw()}},methods:{calcIntersetions(t){this.calcSubConstruction()}}},Ive=Ae("label",null," Verschalungsabschnitt ",-1),kve=Ae("input",{style:{width:"20%"},type:"number",step:"1"},null,-1);function Rve(t,e,n,r,i,s){const o=Re("v-row"),a=Re("v-col"),l=Re("v-divider"),u=Re("v-btn"),c=Re("v-container");return Xe(),Et(c,{class:"toolbar_rows"},{default:ie(()=>[P(o,null,{default:ie(()=>[P(a,{cols:"2",class:"pt-0"},{default:ie(()=>[P(o,{class:"mb-2"},{default:ie(()=>[Ue(" Unterkonstruktion")]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.posX),1)]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.posY),1)]),_:1}),P(o,null,{default:ie(()=>[Ue(qe(i.store.zoomFactor),1)]),_:1})]),_:1}),P(l,{vertical:""}),P(a,{cols:"5",class:"pt-0"},{default:ie(()=>[P(o,{class:"mb-2"},{default:ie(()=>[Ue(" Unterkonstruktion")]),_:1}),P(o)]),_:1}),P(l,{vertical:""}),P(a,{cols:"5",class:"pt-0"},{default:ie(()=>[P(o,null,{default:ie(()=>[Ue(" Eigenschaften")]),_:1}),P(o,null,{default:ie(()=>[Ive,kve]),_:1}),P(o,{class:"pt-2"},{default:ie(()=>[P(u,{rounded:"pill",onClick:s.calcIntersetions},{default:ie(()=>[Ue(" Berechne UK Schnittpunkte")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1})}const Ove=Dr(Fve,[["render",Rve]]),Bve={},Nve={class:"div-100"};function Vve(t,e){return Xe(),Pt("div",Nve,"Summary")}const zve=Dr(Bve,[["render",Vve]]),EG={mixins:[zr,sc,Vr],data(){return{store:we(),rect_size:12}},computed:{},methods:{handleDragCorner(t){var e=this.store.convaStage.getAbsoluteTransform().copy();e.invert();var n=this.store.convaStage.getPointerPosition();this.store.posX=e.point(n).x,this.store.posY=e.point(n).y;var r=this.store.tempLineArray;let i=t.target.x(),s=t.target.y(),o=null;const a=this.store.convaStage.find(".draggingCornerGroup")[0].getChildren();for(const l in a)if(a[l].id()===t.target.getAttrs().id){o=l;break}if(this.drawHelpLinePoints(this.lockOnPoints),!this.store.helpLineXConfig.points().length&&!this.store.helpLineYConfig.points().length)r[o][0]=Math.round(i),r[o][1]=Math.round(s),o==0&&(r[r.length-1][0]=Math.round(i),r[r.length-1][1]=Math.round(s)),this.store.tempLineArray=r;else{if(this.store.helpLineXConfig.points().length&&this.store.helpLineYConfig.points().length){let l=[this.store.helpLineXConfig.points()[0],this.store.helpLineYConfig.points()[1]];if(!this.lineArrayBackup.some(u=>l.every((c,f)=>c===u[f]))||t.target.getAttr("x")-this.store.draggingToleranz<this.cornerPoint[0]&&this.cornerPoint[0]<t.target.getAttr("x")+this.store.draggingToleranz&&t.target.getAttr("y")-this.store.draggingToleranz<this.cornerPoint[1]&&this.cornerPoint[1]<t.target.getAttr("y")+this.store.draggingToleranz)r[o][0]=Math.round(this.store.helpLineXConfig.points()[0]),r[o][1]=Math.round(this.store.helpLineYConfig.points()[1]);else{let u=Math.abs(this.store.helpLineXConfig.points()[0]-i),c=Math.abs(this.store.helpLineYConfig.points()[1]-s);u<c?this.store.helpLineYConfig.points().length&&c>=this.store.draggingToleranz&&(r[o][0]=Math.round(this.store.helpLineXConfig.points()[0]),r[o][1]=Math.round(s)):this.store.helpLineYConfig.points().length&&u>=this.store.draggingToleranz&&(r[o][0]=Math.round(i),r[o][1]=Math.round(this.store.helpLineYConfig.points()[1]))}}else this.store.helpLineXConfig.points().length?(r[o][0]=Math.round(this.store.helpLineXConfig.points()[0]),r[o][1]=Math.round(s)):(r[o][0]=Math.round(i),r[o][1]=Math.round(this.store.helpLineYConfig.points()[1]));o==0&&(r[r.length-1][0]=r[0][0],r[r.length-1][1]=r[0][1]),t.target.x(r[o][0]),t.target.y(r[o][1]),this.store.tempLineArray=r}this.updateCanvas(),this.writeDistances(),this.writePoints()},handleDragStartCorner(t){this.cornerPoint=[t.target.getAttr("x"),t.target.getAttr("y")],this.store.tempLineArray=JSON.parse(JSON.stringify(this.store.lineArray)),this.draggableSidesConfig=[],this.visibleSidesConfig=[],this.lineArrayBackup=JSON.parse(JSON.stringify(this.store.lineArray));let e=t.target.getAttrs().id;this.lockOnPoints=[];var n;this.store.selectedFloor>0?n=this.store.lineArray.concat(this.store.getLineArrayBuilding[this.store.selectedFloor-1].floor.lineArray):n=this.store.lineArray;for(let r=0;r<n.length-1;r++)r!=e&&(this.lockOnPoints.push(n[r]),r+1!=e&&this.lockOnPoints.push(this.getCentroid([n[r],n[r+1]]).map(i=>Math.round(i))));this.updateBeforeDrag()},handleDragEndCorner(){this.store.setLineArray(this.store.tempLineArray),this.store.setFloorLineArray(this.store.selectedFloor,this.store.tempLineArray),this.dragging_corner=!1,this.cornerPointsConfig=[],this.lockOnPoints=[],this.resetTemporaryNodes()},handleDragPartialAreaCorner(t){var e=this.store.convaStage.getAbsoluteTransform().copy();e.invert();var n=this.store.convaStage.getPointerPosition();this.store.posX=e.point(n).x,this.store.posY=e.point(n).y;var r=this.store.tempPartialAreaPoints;let i=t.target.x(),s=t.target.y(),o=null;const a=this.store.convaStage.find(".draggingCornerGroup")[0].getChildren();for(const u in a)if(a[u].id()===t.target.getAttrs().id){o=u;break}if(this.drawHelpLinePoints(this.lockOnPoints),!this.store.helpLineXConfig.points().length&&!this.store.helpLineYConfig.points().length)r[o][0]=Math.round(i),r[o][1]=Math.round(s),o==0&&(r[r.length-1][0]=Math.round(i),r[r.length-1][1]=Math.round(s)),this.store.tempPartialAreaPoints=r;else{if(this.store.helpLineXConfig.points().length&&this.store.helpLineYConfig.points().length){let u=[this.store.helpLineXConfig.points()[0],this.store.helpLineYConfig.points()[1]];if(!this.lineArrayBackup.some(c=>u.every((f,h)=>f===c[h]))||t.target.getAttr("x")-this.store.draggingToleranz<this.cornerPoint[0]&&this.cornerPoint[0]<t.target.getAttr("x")+this.store.draggingToleranz&&t.target.getAttr("y")-this.store.draggingToleranz<this.cornerPoint[1]&&this.cornerPoint[1]<t.target.getAttr("y")+this.store.draggingToleranz)r[o][0]=Math.round(this.store.helpLineXConfig.points()[0]),r[o][1]=Math.round(this.store.helpLineYConfig.points()[1]);else{let c=Math.abs(this.store.helpLineXConfig.points()[0]-i),f=Math.abs(this.store.helpLineYConfig.points()[1]-s);c<f?this.store.helpLineYConfig.points().length&&f>=this.store.draggingToleranz&&(r[o][0]=Math.round(this.store.helpLineXConfig.points()[0]),r[o][1]=Math.round(s)):this.store.helpLineYConfig.points().length&&c>=this.store.draggingToleranz&&(r[o][0]=Math.round(i),r[o][1]=Math.round(this.store.helpLineYConfig.points()[1]))}}else this.store.helpLineXConfig.points().length?(r[o][0]=Math.round(this.store.helpLineXConfig.points()[0]),r[o][1]=Math.round(s)):(r[o][0]=Math.round(i),r[o][1]=Math.round(this.store.helpLineYConfig.points()[1]));o==0&&(r[r.length-1][0]=r[0][0],r[r.length-1][1]=r[0][1]),t.target.x(r[o][0]),t.target.y(r[o][1]),this.store.tempPartialAreaPoints=r}let l=this.facadeStore.getEditSelectedElement;if(l&&l.floorIndex!==void 0&&l.wallIndex!==void 0&&l.elementIndex!==void 0&&!this.store.drawing){const u=this.store.getLineArrayBuilding[l.floorIndex].floor.wall[l.wallIndex],c=[];for(const _ of this.store.tempPartialAreaPoints)c.push([_[0]-u.pointsArray[0][0],_[1]-u.pointsArray[0][1]]);const f=u.partialArea[l.elementIndex];f.pointsArray=c;const h=[];for(const _ of this.store.tempPartialAreaPoints)h.push([_[0]-this.store.tempPartialAreaPoints[0][0],_[1]-this.store.tempPartialAreaPoints[0][1]]);const d=this.store.tempPartialAreaPoints[0][0],p=this.store.tempPartialAreaPoints[0][1],g=this.store.convaStage.findOne(`#partialArea_wl:${l.wallIndex}_el:${l.elementIndex}`);g.points(h.flat()),g.x(d),g.y(p);let x=this.store.convaStage.findOne(`#selectedElement_wl:${l.wallIndex}_el:${l.elementIndex}`);x.points(h.flat()),x.x(d),x.y(p)}},handleDragStartPartialAreaCorner(t){let e=this.facadeStore.getEditSelectedElement;if(e&&e.floorIndex!==void 0&&e.wallIndex!==void 0&&e.elementIndex!==void 0&&!this.store.drawing){const n=this.store.getLineArrayBuilding[e.floorIndex].floor.wall[e.wallIndex],r=n.partialArea[e.elementIndex].pointsArray,i=[];for(const s of r)i.push([s[0]+n.pointsArray[0][0],s[1]+n.pointsArray[0][1]]);this.cornerPoint=[t.target.getAttr("x"),t.target.getAttr("y")],this.store.tempPartialAreaPoints=JSON.parse(JSON.stringify(i)),this.draggableSidesConfig=[],this.visibleSidesConfig=[],this.lineArrayBackup=JSON.parse(JSON.stringify(i)),t.target.getAttrs().id,this.lockOnPoints=[],this.lockOnPoints=this.getAllLineArrayPointsForHelpline(),this.updateBeforeDrag()}},handleDragEndPartialAreaCorner(){this.dragging_corner=!1,this.cornerPointsConfig=[],this.lockOnPoints=[],this.resetTemporaryNodes()}}},CG={mixins:[zr,Vr,EG],data(){return{x:0,y:0,mouseLocked:!1,cursorConfig:[],store:we(),facadeStore:ao(),tempLineConfig:[],lineConfig:[],helpLineXConfig:[],helpLineYConfig:[],tempCursorConfig:[],tempDistanceTextConfig:[]}},computed:{},methods:{freeFormFloorPlanMouseDownHandler(){let t,e;this.store.drawing&&([t,e]=this.freeFormMouseDownHandler(),this.addPointsToLineArray(t,e,this.store.lineArray),this.store.setFloorLineArray(this.store.selectedFloor,this.store.lineArray),this.drawPermanentLine(this.store.lineArray),this.writePoints())},freeFormFacadeMouseDownHandler(){this.store.tempLineConfig.show();const[t,e]=this.freeFormMouseDownHandler();this.addPointsToLineArray(t,e,this.facadeStore.tempPartialArea);let n=this.store.convaStage.findOne("#tempFreeFormPartialArea");n?n.points(this.facadeStore.tempPartialArea.flat()):(n=new ke.Line({id:"tempFreeFormPartialArea",stroke:"black",fill:"white",dash:[6,4],strokeWidth:2,lineCap:"round"}),this.store.convaStage.findOne("#tempLayer").add(n)),this.drawPermanentLine(this.facadeStore.tempPartialArea)},freeFormMouseDownHandler(){let t,e;return event.button===0&&(this.store.mouseLocked?(t=Math.round(this.store.tempLineConfig.points()[2]),e=Math.round(this.store.tempLineConfig.points()[3])):(t=Math.round(this.store.posX),e=Math.round(this.store.posY))),[t,e]},addPointsToLineArray(t,e,n){if(n.length===0||t!==n[n.length-1][0]||e!==n[n.length-1][1]){let r=n.length,i=n;r==0&&(this.offsetX=t,this.offsetY=e),i[r]=[],i[r].push(t,e),n=i}},drawPermanentLine(t){(this.store.drawing||this.facadeStore.addPartialArea)&&(this.parseAngles(),this.connectTheDots(t));let e=t.flat();this.store.activeFloorplan===!0&&(this.store.lineConfig.points(e),t.length>1&&this.writeDistances()),this.store.drawing||(this.store.tempCursorConfig.hide(),this.store.tempDistanceTextConfig.length!==0&&this.store.tempDistanceTextConfig.hide())},connectTheDots(t){let e=t.length-1;t.length>1&&t[e][0]>t[0][0]-10&&t[e][0]<t[0][0]+10&&t[e][1]>t[0][1]-10&&t[e][1]<t[0][1]+10&&(t.length==3?(t.pop(),this.store.activeFloorplan===!0&&this.store.setDrawing(!0)):(this.store.activeFloorplan===!0&&(this.store.setDrawing(!1),this.writeDistances(),this.updateDragElements()),this.facadeStore.setAddPartialArea(!1),this.store.setMouseLocked(!1),this.store.tempLineArray=t,this.store.tempLineConfig.hide(),this.store.tempLineConfig.points([]),this.store.helpLineXConfig.points([]),this.store.helpLineYConfig.points([]),this.store.convaStage.getStage().container().style.cursor="auto",this.store.setConfigKonva({width:window.innerWidth,height:window.innerHeight-2,scale:{x:1,y:1},position:{x:window.innerWidth/2,y:window.innerHeight/2-1}}),this.drawPermanentLine(t),this.checkFloorView(this.store.selectedFloor-1),this.checkFloorView(this.store.selectedFloor)))},freeFormFloorPlanMouseMoveHandler(){let t=this.store.lineArray;(t.length>0&&this.store.drawing||this.store.selectedFloor>0&&this.store.drawing)&&(this.store.selectedFloor>0&&t.length<1&&(t=this.store.getLineArrayBuilding[this.store.selectedFloor-1].floor.lineArray),this.drawTemporaryLine(t),this.store.selectedFloor>0&&(t=this.store.lineArray.concat(this.store.getLineArrayBuilding[this.store.selectedFloor-1].floor.lineArray)),this.drawHelpLinePoints(t))},freeFormFacadeMouseMoveHandler(t){this.drawTemporaryLine(t);let e=JSON.parse(JSON.stringify(this.getAllLineArrayPoints())),n=[];for(let r of e)for(let i of r)n.push([...i]);for(const r of this.store.getLineArrayBuilding)for(const i of r.floor.wall)n.push([...i.pointsArray]);n.push(t),this.drawHelpLinePoints(n.flat())},drawTemporaryLine(t){var e=[],n=this.store.posX,r=this.store.posY;if(t.length>0){var i=t[t.length-1][0],s=t[t.length-1][1];e.push(i),e.push(s),e.push(n),e.push(r)}else e.push(n),e.push(r),e.push(n),e.push(r);if(this.store.enableAngles?!this.store.helpLineXConfig.points().length&&!this.store.helpLineYConfig.points().length?(this.store.tempCursorConfig.hide(),this.store.setMouseLocked(!1),this.store.convaStage.getStage().container().style.cursor="crosshair",this.store.tempCursorConfig.x(void 0),this.store.tempCursorConfig.y(void 0)):(this.store.setMouseLocked(!0),this.store.convaStage.getStage().container().style.cursor="none",this.store.helpLineXConfig.points().length&&this.store.helpLineYConfig.points().length?e=[e[0],e[1],this.store.helpLineXConfig.points()[0],this.store.helpLineYConfig.points()[1]]:this.store.helpLineXConfig.points().length?e=[e[0],e[1],this.store.helpLineXConfig.points()[0],e[3]]:e=[e[0],e[1],e[2],this.store.helpLineYConfig.points()[1]],this.store.tempCursorConfig.show(),this.store.tempCursorConfig.x(Math.round(e[2])),this.store.tempCursorConfig.y(Math.round(e[3])),this.store.cursorConfig[0].x=Math.round(e[2]),this.store.cursorConfig[0].y=Math.round(e[3])):(this.store.setMouseLocked(!1),this.store.convaStage.getStage().container().style.cursor="crosshair",this.store.tempCursorConfig.x(void 0),this.store.tempCursorConfig.y(void 0)),this.store.tempLineConfig.points(e),this.store.activeFloorplan===!0){let o=this.getDistance(e[0],e[1],e[2],e[3]);this.store.distanceTextConfig={x:e[2]+15,y:e[3],text:(o*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit,fontSize:18,fill:"#0D6EA7"},this.store.tempDistanceTextConfig.length==0?(this.store.tempDistanceTextConfig=new ke.Text(this.store.distanceTextConfig),this.store.convaStage.findOne("#baseLayer").add(this.store.tempDistanceTextConfig)):(this.store.tempDistanceTextConfig.setAttr("text",(o*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit),this.store.tempDistanceTextConfig.setAttr("x",e[2]+15),this.store.tempDistanceTextConfig.setAttr("y",e[3])),this.store.lineArray.length>0?(this.store.tempLineConfig.show(),this.store.tempDistanceTextConfig.show()):(this.store.tempDistanceTextConfig.hide(),this.store.tempLineConfig.hide())}},drawHelpLinePoints(t){let e=Array.from(new Set(t.map(a=>a[0]))).sort(function(a,l){return a-l}),n=Array.from(new Set(t.map(a=>a[1]))).sort(function(a,l){return a-l}),r,i;this.store.enableSnapIn?(r=-15,i=16):(r=-2,i=3);let s=[],o=[];for(let a=r;a<i;a++)s.push(Math.round(this.store.posX+a)),o.push(Math.round(this.store.posY+a));this.store.convaStage.findOne("#helpLineXConfig")&&this.store.convaStage.findOne("#helpLineXConfig"),e.some(a=>{if(s.indexOf(a)>=0){let l=[];return l.push(a),l.push(-9999),l.push(a),l.push(9999),this.store.helpLineXConfig.points(l),!0}else this.store.helpLineXConfig.points([])}),this.store.convaStage.findOne("#helpLineYConfig")&&this.store.convaStage.findOne("#helpLineYConfig"),n.some(a=>{if(o.indexOf(a)>=0){let l=[];return l.push(-9999),l.push(a),l.push(9999),l.push(a),this.store.helpLineYConfig.points(l),!0}else this.store.helpLineYConfig.points([])})}}},Gve={data(){return{store:we()}},mixins:[zr,Vr],computed:{},methods:{rectangleMouseDownHandler(){if(this.store.isDrawing)this.store.setIsDrawing(!1),this.checkFloorView(this.store.selectedFloor-1),this.checkFloorView(this.store.selectedFloor);else{this.store.setIsDrawing(!0);const t=new ke.Line({id:"tempRectangle",x:this.store.tempCursorConfig.x()===0?this.store.posX:this.store.tempCursorConfig.x(),y:this.store.tempCursorConfig.y()===0?this.store.posY:this.store.tempCursorConfig.y(),stroke:"black",fill:"white",dash:[6,4],strokeWidth:2,lineCap:"round",closed:!0});this.store.activeFloorplan&&(t.fill(null),t.stroke("#0D6EA7"),t.dash([10,10])),this.store.convaStage.findOne("#tempLayer").add(t)}},rectangleMouseMoveHandler(){if(!this.store.isDrawing)return!1;const t=this.store.tempCursorConfig.x()===0?this.store.posX:this.store.tempCursorConfig.x(),e=this.store.tempCursorConfig.y()===0?this.store.posY:this.store.tempCursorConfig.y(),n=this.store.convaStage.findOne("#tempRectangle"),r=this.store.convaStage.findOne("#tempRectangle").x(),i=this.store.convaStage.findOne("#tempRectangle").y(),s=[0,0],o=[Math.round(t-r),0],a=[Math.round(t-r),Math.round(e-i)],l=[0,Math.round(e-i)],u=[s,o,a,l,s].flat();n.points(u)},drawRectangleTemporaryLine(t){if(this.store.enableAngles||(this.store.setMouseLocked(!1),this.store.convaStage.getStage().container().style.cursor="crosshair",this.store.tempCursorConfig.x(void 0),this.store.tempCursorConfig.y(void 0)),this.store.activeFloorplan===!0){this.store.convaStage.findOne("#distanceTextGroup")&&this.store.convaStage.findOne("#distanceTextGroup").destroy();const e=new ke.Group({id:"distanceTextGroup",listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1});this.store.convaStage.findOne("#baseLayer").add(e);const n=this.calcOffsetPolygon(t,-20);if(n.length>=5)for(let r=0;r<t.length-1;r++){const i=[t[r][0],t[r][1],t[r+1][0],t[r+1][1]],s=[n[r][0],n[r][1],n[r+1][0],n[r+1][1]],o=this.getCentroid(this.convertFlatToMultiDimArray(s));let a=this.getDistance(i[0],i[1],i[2],i[3]);const l={x:o[0],y:o[1],width:80,height:20,offsetX:40,offsetY:10,align:"center",verticalAlign:"middle",text:(a*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit,fontSize:18,fill:"#0D6EA7",rotation:r%2===0?0:90};e.add(new ke.Text(l))}}}}},Uve={data(){return{store:we()}},mixins:[zr],computed:{},methods:{twoPointTriangleMouseDownHandler(){if(!this.store.isDrawing)this.store.setIsDrawing(!0),this.store.setTempTriangle(new ke.Line({x:this.store.posX,y:this.store.posY,stroke:"black",strokeWidth:2,lineCap:"round",opacity:.3,closed:!0,name:"form"})),this.store.firstLayer.add(this.store.tempTriangle);else if(this.store.setIsDrawing(!1),this.store.setDrawing(!1),this.store.lineArray.length==0){let t=JSON.parse(JSON.stringify(this.store.tempTriangle.points())),e=[];for(let n=0;n<t.length;n+=2)e.push([t[n]+this.store.tempTriangle.x(),t[n+1]+this.store.tempTriangle.y()]);e.push([t[0]+this.store.tempTriangle.x(),t[0]+this.store.tempTriangle.y()]),this.store.lineArray=e,this.store.lineConfig=new ke.Line({stroke:"black",strokeWidth:2,lineCap:"round",opacity:.3}),this.store.firstLayer.find("Line")[0].setAttr("points",this.store.lineArray.flat()),this.store.lineConfig.points(e),this.store.firstLayer.add(this.store.lineConfig),this.store.firstLayer.find(".form")[0].destroy(),this.parseAngles(),this.writeDistances(),this.store.firstLayer.draw()}},twoPointTriangleMouseWheelDownHandler(){if(!this.store.isDrawing)return!1;this.store.tempTriangleSwitch=!this.store.tempTriangleSwitch,this.store.tempTriangle.points(),this.twoPointTriangleMouseMoveHandler()},twoPointTriangleMouseMoveHandler(){if(!this.store.isDrawing)return!1;let t=[],e=[];this.store.tempTriangleSwitch?(t=[this.store.posX-this.store.tempTriangle.x(),0],e=[(this.store.posX-this.store.tempTriangle.x())/2,this.store.posY-this.store.tempTriangle.y()]):(t=[0,this.store.posY-this.store.tempTriangle.y()],e=[this.store.posX-this.store.tempTriangle.x(),(this.store.posY-this.store.tempTriangle.y())/2]);const r=[[0,0],t,e].flat();this.store.tempTriangle.points(r)}}},Hve={data(){return{store:we()}},computed:{},methods:{circleMouseDownHandler(){this.store.isDrawing?this.store.setIsDrawing(!1):(this.store.setIsDrawing(!0),this.store.setTempCircle(new ke.Circle({x:this.store.posX,y:this.store.posY,stroke:"black",strokeWidth:2,lineCap:"round",opacity:.3})),this.store.firstLayer.add(this.store.tempCircle))},circleMouseMoveHandler(){if(!this.store.isDrawing)return!1;const t=this.store.tempCircle.x(),e=this.store.tempCircle.y(),n=this.store.posX,r=this.store.posY,i=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2));this.store.tempCircle.radius(i)}}},Wve={data(){return{store:we()}},mixins:[zr],computed:{},methods:{threePointTriangle2MouseDownHandler(){if(!this.store.isDrawing)this.store.setIsDrawing(!0),this.store.setTempTriangle(new ke.Line({x:this.store.posX,y:this.store.posY,points:[0,0,0,0],stroke:"black",strokeWidth:2,lineCap:"round",opacity:.3,closed:!0,name:"form"})),this.store.firstLayer.add(this.store.tempTriangle);else if(this.store.tempTriangle.points().length<=4)this.store.tempTriangle.points().push(0,0);else if(this.store.setIsDrawing(!1),this.store.setDrawing(!1),this.store.lineArray.length==0){let t=JSON.parse(JSON.stringify(this.store.tempTriangle.points())),e=[];for(let n=0;n<t.length;n+=2)e.push([t[n]+this.store.tempTriangle.x(),t[n+1]+this.store.tempTriangle.y()]);e.push([t[0]+this.store.tempTriangle.x(),t[0]+this.store.tempTriangle.y()]),this.store.lineArray=e,this.store.lineConfig=new ke.Line({stroke:"black",strokeWidth:2,lineCap:"round",opacity:.3}),this.store.firstLayer.find("Line")[0].setAttr("points",this.store.lineArray.flat()),this.store.lineConfig.points(e),this.store.firstLayer.add(this.store.lineConfig),this.store.firstLayer.find(".form")[0].destroy(),this.parseAngles(),this.writeDistances(),this.store.firstLayer.draw()}},threePointTriangle2MouseMoveHandler(){if(!this.store.isDrawing)return!1;const t=this.store.tempTriangle.points().length-2,e=this.store.tempTriangle.points().length-1,n=this.store.tempTriangle.points();n[t]=this.store.posX-this.store.tempTriangle.x(),n[e]=this.store.posY-this.store.tempTriangle.y(),this.store.tempTriangle.points(n)}}},q2={mixins:[CG,Gve,Uve,Wve,Hve],methods:{mouseDownDrawingHandler(){switch(this.store.drawingForm){case"freeForm":this.freeFormFloorPlanMouseDownHandler();break;case"rectangle":if(this.store.drawing&&(this.rectangleMouseDownHandler(),this.store.convaStage.findOne("#tempRectangle").points().length!==0)){const t=this.store.convaStage.findOne("#tempRectangle").x(),e=this.store.convaStage.findOne("#tempRectangle").y(),n=this.convertFlatToMultiDimArray(this.store.convaStage.findOne("#tempRectangle").points());this.store.convaStage.findOne("#tempRectangle")&&this.store.convaStage.findOne("#tempRectangle").destroy(),this.store.convaStage.findOne("#distanceTextGroup")&&this.store.convaStage.findOne("#distanceTextGroup").destroy();for(const r of n)r[0]+=t,r[1]+=e;this.store.lineArray=n,this.store.setFloorLineArray(this.store.selectedFloor,n),this.drawPermanentLine(this.store.lineArray),this.checkFloorView(this.store.selectedFloor-1),this.writePoints()}break;case"twoPointTriangle":this.twoPointTriangleMouseDownHandler();break;case"threePointTriangle":this.threePointTriangle2MouseDownHandler();break;case"circle":this.circleMouseDownHandler();break}},mouseWheelDownDrawingHandler(){switch(this.store.drawingForm){case"twoPointTriangle":this.twoPointTriangleMouseWheelDownHandler();break}},mouseMoveDrawingHandler(){switch(this.store.drawingForm){case"freeForm":this.freeFormFloorPlanMouseMoveHandler();break;case"rectangle":if(this.store.drawing){this.rectangleMouseMoveHandler();let t=[];if(this.store.convaStage.findOne("#tempRectangle")){const n=this.store.convaStage.findOne("#tempRectangle").x(),r=this.store.convaStage.findOne("#tempRectangle").y();t=this.convertFlatToMultiDimArray(this.store.convaStage.findOne("#tempRectangle").points());for(const i of t)i[0]+=n,i[1]+=r;this.drawRectangleTemporaryLine(t)}this.helpLineLockOnPoints(t);let e=[];for(let n in this.store.getLineArrayBuilding){const r={floor:n};if(this.store.floorView.findIndex(s=>s.id===r.id)>-1)for(const s of this.store.getLineArrayBuilding[n].floor.lineArray)e.push(JSON.parse(JSON.stringify(s)))}this.drawHelpLinePoints(e)}break;case"twoPointTriangle":this.twoPointTriangleMouseMoveHandler();break;case"threePointTriangle":this.threePointTriangle2MouseMoveHandler();break;case"circle":this.circleMouseMoveHandler();break}},helpLineLockOnPoints(t){var e=[],n=this.store.posX,r=this.store.posY;if(t)if(t.length>0){var i=t[t.length-1][0],s=t[t.length-1][1];e.push(i),e.push(s),e.push(n),e.push(r)}else e.push(n),e.push(r),e.push(n),e.push(r);!this.store.helpLineXConfig.points().length&&!this.store.helpLineYConfig.points().length?(this.store.tempCursorConfig.hide(),this.store.setMouseLocked(!1),this.store.convaStage.getStage().container().style.cursor="crosshair",this.store.tempCursorConfig.x(void 0),this.store.tempCursorConfig.y(void 0)):(this.store.setMouseLocked(!0),this.store.convaStage.getStage().container().style.cursor="none",this.store.helpLineXConfig.points().length&&this.store.helpLineYConfig.points().length?e=[e[0],e[1],this.store.helpLineXConfig.points()[0],this.store.helpLineYConfig.points()[1]]:this.store.helpLineXConfig.points().length?e=[e[0],e[1],this.store.helpLineXConfig.points()[0],e[3]]:e=[e[0],e[1],e[2],this.store.helpLineYConfig.points()[1]],this.store.tempCursorConfig.show(),this.store.tempCursorConfig.x(Math.round(e[2])),this.store.tempCursorConfig.y(Math.round(e[3])),this.store.cursorConfig[0].x=Math.round(e[2]),this.store.cursorConfig[0].y=Math.round(e[3]))}}},$ve={data(){return{store:we()}},mixins:[zr,vG,oc,q2,ac,lw],components:{toolbarFloorplan:fme,toolbarComponents:Gme,toolbarFacade:Pve,toolbarSubconstruction:Ove,toolbarFunctions:wG,toolbarSummary:zve},computed:{activeFloorplan(){return this.store.activeFloorplan},activeConstructionElement(){return this.store.activeConstructionElement},activeFacade(){return this.store.activeFacade},activeSubconstruction(){return this.store.activeSubconstruction},showSummary(){return this.store.showSummary}},methods:{getSideView(){this.activeViewHandler()}}},Xve={key:0,class:"button_list"},Yve={key:1,class:"toolbar_div"},jve={key:0,class:"div-100"},qve={key:1,class:"div-100"},Jve={key:2,class:"div-100"},Kve={key:3,class:"div-100"},Zve={key:2,class:"div-100"},Qve={class:"toolbar_functions"};function e0e(t,e,n,r,i,s){const o=Re("v-icon"),a=Re("toolbarFloorplan"),l=Re("toolbarComponents"),u=Re("toolbarFacade"),c=Re("toolbarSubconstruction"),f=Re("toolbarSummary"),h=Re("toolbarFunctions"),d=Re("v-btn"),p=Re("v-snackbar"),g=Re("v-card-title"),x=Re("v-card-text"),_=Re("v-spacer"),m=Re("v-card-actions"),v=Re("v-card"),b=Re("v-dialog"),w=Re("v-row"),A=Re("v-toolbar");return Xe(),Et(A,{class:"toolbar",extended:"","extension-height":"100"},{default:ie(()=>[this.showSummary?_t("",!0):(Xe(),Pt("div",Xve,[Ae("button",{class:uu(this.activeFloorplan?"button_list_button_active":"button_list_button"),onClick:e[0]||(e[0]=E=>{t.setToolbarArea("Floorplan"),i.store.showSideView=!1,s.getSideView()})},[P(o,null,{default:ie(()=>[Ue(" mdi-floor-plan")]),_:1})],2),Ae("button",{class:uu(this.activeConstructionElement?"button_list_button_active":"button_list_button"),onClick:e[1]||(e[1]=E=>{t.setToolbarArea("ConstructionElement"),i.store.showSideView=!0,s.getSideView()})},[P(o,null,{default:ie(()=>[Ue(" mdi-door-closed")]),_:1})],2),Ae("button",{class:uu(this.activeFacade?"button_list_button_active":"button_list_button"),onClick:e[2]||(e[2]=E=>{t.setToolbarArea("Facade"),i.store.showSideView=!0,s.getSideView()})},[P(o,null,{default:ie(()=>[Ue(" mdi-wall")]),_:1})],2),Ae("button",{class:uu(this.activeSubconstruction?"button_list_button_active":"button_list_button"),onClick:e[3]||(e[3]=E=>{t.setToolbarArea("Subconstruction"),i.store.showSideView=!0,s.getSideView()})},[P(o,null,{default:ie(()=>[Ue(" mdi-view-week-outline")]),_:1})],2)])),this.showSummary?_t("",!0):(Xe(),Pt("div",Yve,[this.activeFloorplan?(Xe(),Pt("div",jve,[P(a)])):_t("",!0),this.activeConstructionElement?(Xe(),Pt("div",qve,[P(l)])):_t("",!0),this.activeFacade?(Xe(),Pt("div",Jve,[P(u)])):_t("",!0),this.activeSubconstruction?(Xe(),Pt("div",Kve,[P(c)])):_t("",!0)])),this.showSummary?(Xe(),Pt("div",Zve,[P(f)])):_t("",!0),Ae("div",Qve,[P(h)]),P(p,{modelValue:i.store.responseMessage,"onUpdate:modelValue":e[5]||(e[5]=E=>i.store.responseMessage=E),"multi-line":!0,timeout:-1,color:i.store.responseColor,onClick:e[6]||(e[6]=E=>i.store.responseMessage=!1)},{default:ie(()=>[Ue(qe(i.store.responseText)+" ",1),P(d,{plain:"",color:"red",text:"",onClick:e[4]||(e[4]=E=>i.store.responseMessage=!1)},{default:ie(()=>[Ue(" Close")]),_:1})]),_:1},8,["modelValue","color"]),P(w,{justify:"center"},{default:ie(()=>[P(b,{modelValue:i.store.persistMessage,"onUpdate:modelValue":e[9]||(e[9]=E=>i.store.persistMessage=E),persistent:"",width:"auto"},{default:ie(()=>[P(v,null,{default:ie(()=>[P(g,{class:"text-h5"},{default:ie(()=>[Ue(qe(i.store.persistHeader),1)]),_:1}),P(x,null,{default:ie(()=>[Ue(qe(i.store.persistText),1)]),_:1}),P(m,null,{default:ie(()=>[P(_),P(d,{color:"red-darken-1",variant:"text",onClick:e[7]||(e[7]=E=>{i.store.persistMessage=!1,i.store.persistChoice=!1})},{default:ie(()=>[Ue(qe(i.store.persistChoices[0]),1)]),_:1}),P(d,{color:"green-darken-1",variant:"text",onClick:e[8]||(e[8]=E=>{i.store.persistMessage=!1,i.store.persistChoice=!0})},{default:ie(()=>[Ue(qe(i.store.persistChoices[1]),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})}const t0e=Dr($ve,[["render",e0e]]),n0e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsSAAALEgHS3X78AAAANUlEQVRIiWMgEfyHYqIBE6k2kApGLRi1YNQCOljASGrWJxXQ3AekgtHCbtSCUQtGngUMDAwAVycFJ3U57bUAAAAASUVORK5CYII=",MG={mixins:[fv,yG],data(){return{store:we(),facadeStore:ao(),constructionStore:sr()}},methods:{dragEnd(t){if(this.store.drawing)return!1;const e=t.target;if(e.getAttr("id")!=="convaStage")switch(!0){case this.store.activeFloorplan:e.getAttr("name")==="cornerPoints"?(this.store.draggingCorner=!1,this.handleDragEndCorner(t)):e.getAttr("name")==="dragEdge"&&(this.store.draggingEdge=!1,this.handleDragEndEdge(t)),this.store.getLineArrayBuilding[this.store.selectedFloor].floor.lineArray=JSON.parse(JSON.stringify(this.store.tempLineArray)),this.updateDragElements(),this.store.convaStage.container().style.cursor="default";break;case this.store.activeConstructionElement:if(this.constructionStore.selectedElement&&this.isDragging){this.store.convaStage.container().style.cursor="default",this.isDragging=!1;let n=this.constructionStore.getEditSelectedConstructionElement;n.floorIndex!==void 0&&n.wallIndex!==void 0&&n.elementIndex!==void 0&&delete this.store.getLineArrayBuilding[n.floorIndex].floor.wall[n.wallIndex].elements[parseInt(n.elementIndex)].ignore,this.addConstructionElementToLineArray(),this.drawConstructionElementDistances(),this.constructionStore.setEditSelectedConstructionElement();let r=!1;for(const i of this.store.getLineArrayBuilding)for(const s of i.floor.wall)if(s.facade&&s.facade.facadePoints.length!==0&&(s.facade.selectedArea=JSON.parse(JSON.stringify(s.pointsArray)),r=!0),s.partialArea)for(const o of s.partialArea)o.facadePoints.length!==0&&(o.selectedArea=JSON.parse(JSON.stringify(o.pointsArray)),r=!0);r&&this.changeFacadeLayingDirection()}this.drawInsertionDepth(),this.drawFacing(),this.resetSelectedArea();break;case this.store.activeFacade:if(e.getAttr("name")==="cornerPoints"){let n=this.facadeStore.getEditSelectedElement;if(n.floorIndex!==void 0&&n.wallIndex!==void 0&&n.elementIndex!==void 0){const r=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[n.wallIndex].partialArea[n.elementIndex];r.ignore=!1,r.redraw!==void 0&&r.redraw&&(r.redraw=!1,r.selectedArea=r.pointsArray)}this.store.draggingCorner=!1,this.handleDragEndPartialAreaCorner(t),this.changeFacadeLayingDirection(),this.resetSelectedArea(),this.drawConstructionElementDistances()}else if(this.isDragging){this.isDragging=!1,this.store.convaStage.container().style.cursor="default";let n,r=this.facadeStore.getEditSelectedElement;r.floorIndex!==void 0&&r.wallIndex!==void 0&&r.elementIndex!==void 0&&(n=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[r.wallIndex].partialArea[r.elementIndex],n.ignore=!1);const i=this.getLineArrayWallOnMouseHover();if(i.wallIndex!==void 0&&r.wallIndex!==void 0&&i.wallIndex!=r.wallIndex){const o=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[r.wallIndex],a=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[i.wallIndex];a.partialArea||(a.partialArea=[]);const l=a.pointsArray[0][0]-o.pointsArray[0][0];n.pointsArray.forEach(f=>{f[0]-=l});const u=a.partialArea.length;a.partialArea.push(JSON.parse(JSON.stringify(n))),n=a.partialArea[u],o.partialArea.length!==0?o.partialArea.splice(r.elementIndex,1):delete o.partialArea;const c=this.store.convaStage.findOne(`#partialArea_wl:${r.wallIndex}_el:${r.elementIndex}`);c.id(`partialArea_wl:${i.wallIndex}_el:${u}`),c.moveTo(this.store.convaStage.findOne(`#partialAreaGroup_fl:${r.floorIndex}_wl:${i.wallIndex}`)),this.facadeStore.setEditSelectedElement(r.floorIndex,parseInt(i.wallIndex),u)}const s=`#partialArea_wl:${r.wallIndex}_el:${r.elementIndex}`;this.store.convaStage.findOne(`${s}`).moveTo(this.store.convaStage.findOne(`#partialAreaGroup_fl:${this.store.selectedFloor}_wl:${r.wallIndex}`)),this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.resetSelectedArea(),n.redraw!==void 0&&n.redraw&&(n.redraw=!1,n.selectedArea=n.pointsArray),this.updatePartialAreas(),this.selectedCanvasFacadeElement&&(this.selectedCanvasFacadeElement=this.store.convaStage.findOne(`${s}`)),this.drawConstructionElementDistances()}this.changeFacadeLayingDirection();break}}}},r0e={mixins:[Vr,zr],data(){return{store:we(),constructionStore:sr(),facadeStore:ao()}},methods:{mouseMove(t){this.store.drawing&&(this.store.convaStage.getStage().container().style.cursor="crosshair");var e=this.store.convaStage.getAbsoluteTransform().copy();e.invert();let n=this.store.convaStage.getPointerPosition();switch(this.store.posX=e.point(n).x,this.store.posY=e.point(n).y,!0){case this.store.activeFloorplan:this.mouseMoveDrawingHandler();break;case this.store.activeConstructionElement:this.colorizeMiniMapSite(),this.store.drawing||(this.store.convaStage.findOne("#tempConstructionElement")&&this.store.addConstructionElement&&this.constructionElementHandler(t),this.mouseMoveConstructionElement());break;case this.store.activeFacade:if(this.colorizeMiniMapSite(),!this.store.drawing)if(this.facadeStore.addPartialArea){let r=JSON.parse(JSON.stringify(this.getAllLineArrayPoints()));switch(this.facadeStore.addPartialAreaForm){case"freeForm":this.freeFormFacadeMouseMoveHandler(this.facadeStore.tempPartialArea);break;case"rectangle":this.rectangleMouseMoveHandler();let s=[];for(let a of r)for(let l of a)s.push([...l]);for(const a of this.store.getLineArrayBuilding)for(const l of a.floor.wall)s.push([...l.pointsArray]);const o=[this.store.posX,this.store.posY];o.length>0,this.drawTemporaryLine(o),this.drawHelpLinePoints(s.flat());break}const i=this.getLineArrayWallOnMouseHover();if(Object.keys(i).length!==0){const s=this.store.convaStage.find("#cubeViewGroup")[0].getChildren(),[o,a]=this.freeFormMouseDownHandler();let l=[];Object.keys(this.facadeStore.tempPartialArea).length!==0&&(l=this.getAllXOfFlatArray(this.facadeStore.tempPartialArea.flat())),r[i.wallIndex].length!==0&&l.push(...this.getAllXOfFlatArray(this.convertMultiDimArrayToFlat(r[i.wallIndex]))),l.push(o,s[i.wallIndex].getAttr("points")[0]),l=[...new Set(l)].sort(function(c,f){return c-f});let u=[];Object.keys(this.facadeStore.tempPartialArea).length!==0&&(u=this.getAllYOfFlatArray(this.facadeStore.tempPartialArea.flat())),r[i.wallIndex].length!==0&&u.push(...this.getAllYOfFlatArray(this.convertMultiDimArrayToFlat(r[i.wallIndex]))),u.push(a,s[i.wallIndex].getAttr("points")[1]),u=[...new Set(u)].sort(function(c,f){return c-f}),this.drawXAxisElementMeasureLine(parseInt(i.wallIndex),l),this.drawYAxisElementMeasureLine(parseInt(i.wallIndex),u)}}else this.mouseMoveFacade(t);break;case this.store.activeSubconstruction:this.store.drawing;break}},colorizeMiniMapSite(){this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("opacity",.5),this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("stroke","black"),this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("strokeWidth",2),this.constructionElement=this.store.convaStage.find("#tempConstructionElement")[0],this.index=0;const t=this.getLineArrayWallOnMouseHover().wallIndex;t!==void 0?(this.index=parseInt(t),this.insidePolygon=!0):this.insidePolygon=!1,this.insidePolygon&&(this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("opacity",1),this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("stroke","#0D6EA7"),this.store.convaStage.find("#miniMap_"+this.index)[0].setAttr("strokeWidth",3))},mouseMoveConstructionElement(){if(this.isDragging===!1&&this.store.showSideView&&this.store.addConstructionElement===!1){const t=this.store.convaStage.findOne("#tempElementGroup"),e=this.store.convaStage.findOne("#constructionElementGroup");let n;this.getAllLineArrayElementPoints();const r=this.getLineArrayElementOnMouseHover(),i=this.constructionStore.getTwoLastSelectedElement;JSON.stringify(r)!==JSON.stringify(i[i.length-1])&&Object.values(r).length===0?i.length!==0&&(n=this.store.convaStage.findOne(`#constructionElement_wl:${i[i.length-1].wallIndex}_el:${i[i.length-1].elementIndex}`),this.constructionStore.editConstructionElement!==n&&(n.moveTo(e),n.zIndex(-1),this.getSelectedElement(n,[],"black","white",!0),e.opacity(1),this.store.convaStage.container().style.cursor="default",this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup")&&this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup").destroy())):(this.lastSelectedConstructionElement=r,n=this.store.convaStage.findOne(`#constructionElement_wl:${this.lastSelectedConstructionElement.wallIndex}_el:${this.lastSelectedConstructionElement.elementIndex}`),n.moveTo(t),this.getSelectedElement(n,[6,4],"green","rgba(150, 150, 150, 0.5)",!0),this.store.convaStage.container().style.cursor="move",JSON.stringify(r)!==JSON.stringify(i[i.length-1])&&i.push(r),i.length===3&&i.splice(0,1))}},mouseMoveFacade(t){const e=t.target;e.getAttr("name");let n,r,i={},s=!0;const o=this.getLineArrayPartialAreaOnMouseHover();this.getLineArrayElementOnMouseHover();let a=[];if(Object.keys(o).length!==0?(r=this.store.convaStage.findOne(`#partialAreaGroup_fl:${this.store.selectedFloor}_wl:${o.wallIndex}`),n=r.getChildren()[o.partialAreaIndex]):(r=this.store.convaStage.findOne("#cubeViewGroup"),i=this.getLineArrayWallOnMouseHover(),n=r.getChildren()[i.wallIndex]),(this.selectedCanvasFacadeElement&&this.selectedCanvasFacadeElement!==n||e.getAttr("name")==="cornerPoints")&&(this.selectedCanvasFacadeElement.name()!=="cubeView"&&(a=[6,4]),this.getSelectedElement(this.selectedCanvasFacadeElement,a,"black","white",s),this.store.convaStage.findOne("#tempSelectedElement")&&this.store.convaStage.findOne("#tempSelectedElement").destroy(),e.getAttr("name")!=="cornerPoints"&&(this.store.convaStage.container().style.cursor="default"),this.selectedCanvasFacadeElement=n),e.getAttr("name")!=="cornerPoints"&&n){if(this.getSelectedElement(n,[6,4],"green","rgba(150, 150, 150, 0.5)",s),Object.keys(i).length===0&&!this.store.convaStage.findOne("#tempSelectedElement")){const l=n.clone({id:"tempSelectedElement"});l.draggable(!0),l.opacity(1),l.moveTo(this.store.convaStage.findOne("#tempLayer"))}this.store.convaStage.container().style.cursor="move",this.selectedCanvasFacadeElement=n}},getSelectedElement(t,e,n,r,i){if(t)if(t.dash(e),t.stroke(n),t.fill(r),t.draggable(i),t.getParent().getAttr("id")==="tempElementGroup"){if(!this.store.convaStage.findOne("#tempSelectedElement")){const s=t.clone({id:"tempSelectedElement"});s.draggable(!0),s.opacity(0),s.moveTo(this.store.convaStage.findOne("#tempLayer"))}this.constructionStore.selectedElement=t}else t.getParent().getAttr("id")==="constructionElementGroup"&&(this.store.convaStage.findOne("#tempSelectedElement")&&this.store.convaStage.findOne("#tempSelectedElement").destroy(),this.constructionStore.selectedElement=null)}}},i0e={data(){return{store:we()}},methods:{mouseOver(t){const e=t.target;if(e.getAttr("id")==="miniMapFrame"){var n=new ke.Tween({node:this.store.convaStage.findOne("#miniMapGroupScale"),duration:.2,scaleX:1,scaleY:1});n.play()}switch(!0){case this.store.activeFloorplan:if(this.store.drawing)return!1;if(this.store.convaStage.findOne("#hoverLineGroup")&&this.store.convaStage.findOne("#hoverLineGroup").destroy(),e.getAttr("name")==="cornerPoints")e.setAttr("fill","#0D6EA7"),e.scaleX(1.2),e.scaleY(1.2),this.store.convaStage.container().style.cursor="grab";else if(e.getAttr("name")==="dragEdge"){this.store.convaStage.container().style.cursor="grab";const r=new ke.Group({id:"hoverLineGroup"});this.store.convaStage.findOne("#baseLayer").add(r);const i=this.store.getLineArrayBuilding[this.store.selectedFloor].floor,s=e.getAttr("lineIndex"),o=[i.lineArray[s[0]],i.lineArray[s[1]]].flat(),a=new ke.Line({id:"hoverLine",points:o,stroke:"#0D6EA7",strokeWidth:3});r.add(a),this.store.convaStage.findOne("#draggingCornerGroup")&&r.zIndex(this.store.convaStage.findOne("#draggingCornerGroup").zIndex())}break;case this.store.activeConstructionElement:e.getAttr("id")!=="tempSelectedElement"&&e.getAttr("id")!=="constructionElementButtonText"&&this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup")&&this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup").destroy(),e.getAttr("id")==="tempSelectedElement"&&this.addConstructionElementFunctionButtons(e),this.store.convaStage.findOne("#tempConstructionElement")&&this.store.convaStage.findOne("#tempConstructionElement").setAttr("opacity",1);break;case this.store.activeFacade:e.getAttr("name")==="cornerPoints"?(e.setAttr("fill","#0D6EA7"),e.scaleX(1.2),e.scaleY(1.2),this.store.convaStage.container().style.cursor="grab"):e.getAttr("name")==="dragEdge"&&(this.store.convaStage.container().style.cursor="pointer");break;case this.store.activeSubconstruction:break}}}},s0e={data(){return{store:we()}},methods:{mouseOut(t){if(this.store.convaStage.findOne("#tempMeasureLineXGroup")&&this.store.convaStage.findOne("#tempMeasureLineXGroup").destroy(),this.store.convaStage.findOne("#tempMeasureLineYGroup")&&this.store.convaStage.findOne("#tempMeasureLineYGroup").destroy(),this.store.convaStage.findOne("#tempConstructionElement")&&(this.store.convaStage.findOne("#tempHelplineGroup")&&this.store.convaStage.findOne("#tempHelplineGroup").destroy(),this.store.convaStage.findOne("#tempConstructionElement").setAttr("opacity",0)),this.store.drawing)return!1;const e=t.target;var n=t.target.index;if(e.getAttr("id")==="miniMapFrame"){var r=new ke.Tween({node:this.store.convaStage.findOne("#miniMapGroupScale"),duration:.2,scaleX:.5,scaleY:.5});r.play()}switch(e.getAttr("name")==="cornerPoints"?(e.setAttr("fill","black"),e.scaleX(1),e.scaleY(1),this.store.convaStage.container().style.cursor="default"):e.getAttr("name")==="dragEdge"?(this.store.convaStage.container().style.cursor="default",this.store.convaStage.findOne("#hoverLineGroup")&&this.store.convaStage.findOne("#hoverLineGroup").destroy()):e.getAttr("name")==="cubeView"&&(this.store.convaStage.find("#miniMap_"+n)[0].setAttr("opacity",.5),this.store.convaStage.find("#miniMap_"+n)[0].setAttr("stroke","black"),this.store.convaStage.find("#miniMap_"+n)[0].setAttr("strokeWidth",2)),!0){case this.store.activeFloorplan:break;case this.store.activeConstructionElement:break}}}},o0e={data(){return{store:we(),facadeStore:ao(),globalHelper:Vr}},methods:{mouseDown(t){switch(!0){case this.store.activeFloorplan:this.dragging=!1;break;case this.store.activeConstructionElement:this.store.getAddConstructionElement&&this.addConstructionElementToLineArray(),this.changeFacadeLayingDirection();break;case this.store.activeFacade:if(t.target.getAttr("name")!=="cornerPoints"){if(this.facadeStore.setStartingPoint)return;if(this.facadeStore.addPartialArea){let n=this.getLineArrayWallOnMouseHover();if(!this.store.helpLineXConfig.points().length&&!this.store.helpLineYConfig.points().length||Object.keys(n).length!==0?this.lastConstructionWallsIndex=n:n=this.lastConstructionWallsIndex,n.wallIndex){const r=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[n.wallIndex];r.partialArea||(r.partialArea=[]);let i=[];if(!this.store.convaStage.findOne(`#partialAreaGroup_fl:${this.store.selectedFloor}_wl:${n.wallIndex}`)){const s=new ke.Group({id:`partialAreaGroup_fl:${this.store.selectedFloor}_wl:${n.wallIndex}`,listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1});this.store.convaStage.findOne("#cubeViewLayer").add(s),this.store.convaStage.findOne("#facadesGroup")&&s.zIndex(this.store.convaStage.findOne("#facadesGroup").zIndex())}switch(this.facadeStore.addPartialAreaForm){case"freeForm":if(this.freeFormFacadeMouseDownHandler(),i=JSON.parse(JSON.stringify(this.facadeStore.tempPartialArea)),i.length!==0&&!this.facadeStore.addPartialArea){i.forEach(a=>{a[0]-=r.pointsArray[0][0],a[1]-=r.pointsArray[0][1]});let o=this.store.convaStage.findOne("#tempFreeFormPartialArea");o.moveTo(this.store.convaStage.findOne(`#partialAreaGroup_fl:${this.store.selectedFloor}_wl:${n.wallIndex}`)),o.id(`partialArea_wl:${n.wallIndex}_el:${r.partialArea.length}`),o.fill("white"),o.dash([6,4]),o.closed(!0)}break;case"rectangle":this.rectangleMouseDownHandler();const s=this.store.convaStage.findOne("#tempRectangle");s.points().length!==0&&(i=this.convertFlatToMultiDimArray(s.points()),i.forEach(o=>{o[0]+=s.x()-r.pointsArray[0][0],o[1]+=s.y()-r.pointsArray[0][1]}),s.moveTo(this.store.convaStage.findOne(`#partialAreaGroup_fl:${this.store.selectedFloor}_wl:${n.wallIndex}`)),s.id(`partialArea_wl:${n.wallIndex}_el:${r.partialArea.length}`),s.dash([6,4]),this.facadeStore.setAddPartialArea(!1),this.store.setMouseLocked(!1),this.store.tempLineConfig.hide(),this.store.tempLineConfig.points([]),this.store.helpLineXConfig.points([]),this.store.helpLineYConfig.points([]),this.store.convaStage.getStage().container().style.cursor="none",this.store.tempCursorConfig.hide());break}if(i.length!==0&&!this.facadeStore.addPartialArea){const s=JSON.parse(JSON.stringify(this.store.getLineArrayBuildingPartialAreaDummy));s.layingDirection=this.facadeStore.selectedLayingDirection,s.layingType=this.facadeStore.selectedLayingType,s.pointsArray=[...i],r.partialArea.push(s),this.facadeStore.tempPartialArea=[];const o=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[n.wallIndex];o.facade&&o.facade.facadePoints&&o.facade.facadePoints.length!==0&&(o.facade.selectedArea=JSON.parse(JSON.stringify(o.pointsArray))),this.changeFacadeLayingDirection()}this.drawConstructionElementDistances()}else this.feedback("Ausschnitt kann nicht au\xDFerhalb der W\xE4nde platziert werden.","error")}}break;case this.store.activeSubconstruction:break}}}},a0e={data(){return{store:we(),constructionStore:sr(),facadeStore:ao()}},methods:{dragStart(t){if(this.store.drawing)return!1;const e=t.target;if(e.getAttr("id")!=="convaStage"){if(this.store.activeFloorplan&&(e.getAttr("name")==="cornerPoints"?(this.store.draggingCorner=!0,this.handleDragStartCorner(t)):e.getAttr("name")==="dragEdge"&&(this.store.draggingCorner=!0,this.handleDragStartEdge(t))),this.store.activeConstructionElement&&this.constructionStore.selectedElement){this.store.convaStage.findOne("#insertionDepthGroup")&&this.store.convaStage.findOne("#insertionDepthGroup").destroy(),this.store.convaStage.findOne("#facingGroup")&&this.store.convaStage.findOne("#facingGroup").destroy(),this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup")&&this.store.convaStage.findOne("#constructionElementFunctionButtonsGroup").destroy(),this.isDragging=!0;const n=this.getCenterCoordinatesFromPointsArray(this.constructionStore.selectedElement.getAttr("points")),r=this.getMaxXOfFlatArray(n),i=this.getMaxYOfFlatArray(n),s=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[this.lastSelectedConstructionElement.wallIndex].elements[parseInt(this.lastSelectedConstructionElement.elementIndex)];this.constructionStore.selectedElement.id("tempConstructionElement"),this.constructionStore.selectedElement.name(s.id),this.constructionStore.selectedElement.x(this.constructionStore.selectedElement.getAttr("points")[0]+r/2),this.constructionStore.selectedElement.y(this.constructionStore.selectedElement.getAttr("points")[1]+i/2),this.constructionStore.selectedElement.setAttr("points",n),this.constructionStore.selectedElement.setAttr("offsetX",r/2),this.constructionStore.selectedElement.setAttr("offsetY",i/2),this.constructionStore.setEditSelectedConstructionElement(this.store.selectedFloor,parseInt(this.lastSelectedConstructionElement.wallIndex),parseInt(this.lastSelectedConstructionElement.elementIndex)),this.drawConstructionElementDistances(),s.ignore=!0;let o=!1;for(const a of this.store.getLineArrayBuilding)for(const l of a.floor.wall)if(l.facade&&l.facade.facadePoints.length!==0&&(l.facade.selectedArea=JSON.parse(JSON.stringify(l.pointsArray)),o=!0),l.partialArea)for(const u of l.partialArea)u.facadePoints.length!==0&&(u.selectedArea=JSON.parse(JSON.stringify(u.pointsArray)),o=!0);o&&this.changeFacadeLayingDirection()}if(this.store.activeFacade)if(t.target.getAttr("name")==="cornerPoints"){this.store.draggingCorner=!0,this.handleDragStartPartialAreaCorner(t);let r=this.facadeStore.getEditSelectedElement;if(r.floorIndex!==void 0&&r.wallIndex!==void 0&&r.elementIndex!==void 0){const i=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[r.wallIndex].partialArea[r.elementIndex];i.ignore=!0,i.selectedArea=[],i.facadePoints&&i.facadePoints.length!==0&&(i.redraw=!0)}this.resetSelectedArea(r),this.store.convaStage.findOne(`#facadesGroup_wl:${r.wallIndex}_el:${r.elementIndex}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${r.wallIndex}_el:${r.elementIndex}`).destroy(),this.changeFacadeLayingDirection(!0)}else{const r=this.getLineArrayPartialAreaOnMouseHover();Object.keys(r).length!==0&&(this.isDragging=!0,this.facadeStore.setEditSelectedElement(this.store.selectedFloor,parseInt(r.wallIndex),parseInt(r.partialAreaIndex))),this.store.convaStage.findOne("#tempSelectedElement").opacity(0);const i=`#partialArea_wl:${r.wallIndex}_el:${r.partialAreaIndex}`;this.store.convaStage.findOne(`${i}`).moveTo(this.store.convaStage.findOne("#tempLayer")),this.store.convaStage.find("#draggingCornerGroup")[0]&&this.store.convaStage.find("#draggingCornerGroup")[0].destroy();let s=this.facadeStore.getEditSelectedElement;if(s.floorIndex!==void 0&&s.wallIndex!==void 0&&s.elementIndex!==void 0){const o=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[s.wallIndex].partialArea[s.elementIndex];o.ignore=!0,o.facadePoints&&o.facadePoints.length!==0&&(o.redraw=!0),this.store.convaStage.findOne(`#facadesGroup_wl:${s.wallIndex}_el:${s.elementIndex}`)&&this.store.convaStage.findOne(`#facadesGroup_wl:${s.wallIndex}_el:${s.elementIndex}`).destroy();const a=`selectedElement_wl:${s.wallIndex}_el:${s.elementIndex}`;this.store.convaStage.findOne(`#${a}`)&&this.store.convaStage.findOne(`#${a}`).destroy(),this.store.convaStage.findOne("#tempSelectedElement").opacity(0);const l=`#partialArea_wl:${s.wallIndex}_el:${s.elementIndex}`;this.store.convaStage.findOne(`${l}`).moveTo(this.store.convaStage.findOne("#tempLayer")),this.facadeStore.setEnableFacadeProperties(!1),this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.changeFacadeLayingDirection()}}}}}},l0e={mixins:[Vr],data(){return{store:we(),facadeStore:ao()}},methods:{dragMove(t){const e=t.target;if(e.getAttr("id")!=="convaStage"){if(this.store.activeFloorplan&&!this.store.showSideView){const r=t.target;r.getAttr("name")==="cornerPoints"?this.handleDragCorner(t):r.getAttr("name")==="dragEdge"&&this.handleDragEdges(t)}if(this.store.activeConstructionElement){var n=this.store.convaStage.getAbsoluteTransform().copy();n.invert();let r=this.store.convaStage.getPointerPosition();this.store.posX=n.point(r).x,this.store.posY=n.point(r).y,this.constructionStore.selectedElement&&this.isDragging&&this.constructionElementHandler(t)}if(this.store.activeFacade)if(t.target.getAttr("name")==="cornerPoints")this.handleDragPartialAreaCorner(t);else{var n=this.store.convaStage.getAbsoluteTransform().copy();n.invert();let s=this.store.convaStage.getPointerPosition();this.store.posX=n.point(s).x,this.store.posY=n.point(s).y;let o=this.facadeStore.getEditSelectedElement;if(o&&o.floorIndex!==void 0&&o.wallIndex!==void 0&&o.elementIndex!==void 0&&this.isDragging){const a=this.store.getLineArrayBuilding[o.floorIndex].floor.wall[o.wallIndex];let l=$2(sn([this.convertFlatToMultiDimArray(this.selectedCanvasFacadeElement.points())])).geometry.coordinates;l=l.map(h=>Math.round(h)),this.selectedCanvasFacadeElement.x(this.store.posX-l[0]),this.selectedCanvasFacadeElement.y(this.store.posY-l[1]);const u=JSON.parse(JSON.stringify(this.convertFlatToMultiDimArray(this.selectedCanvasFacadeElement.points())));for(const h of u)h[0]+=this.selectedCanvasFacadeElement.x()-a.pointsArray[0][0],h[1]+=this.selectedCanvasFacadeElement.y()-a.pointsArray[0][1];a.partialArea[o.elementIndex].pointsArray=u,a.partialArea[o.elementIndex].selectedArea=u;let c=JSON.parse(JSON.stringify(this.getAllLineArrayPoints()));const f=this.getLineArrayWallOnMouseHover();if(Object.keys(f).length!==0){const h=this.store.convaStage.find("#cubeViewGroup")[0].getChildren();let d=[];Object.keys(this.facadeStore.tempPartialArea).length!==0&&(d=this.getAllXOfFlatArray(this.facadeStore.tempPartialArea.flat())),c[f.wallIndex].length!==0&&d.push(...this.getAllXOfFlatArray(this.convertMultiDimArrayToFlat(c[f.wallIndex]))),d.push(h[f.wallIndex].getAttr("points")[0]),d=[...new Set(d)].sort(function(g,x){return g-x});let p=[];Object.keys(this.facadeStore.tempPartialArea).length!==0&&(p=this.getAllYOfFlatArray(this.facadeStore.tempPartialArea.flat())),c[f.wallIndex].length!==0&&p.push(...this.getAllYOfFlatArray(this.convertMultiDimArrayToFlat(c[f.wallIndex]))),p.push(h[f.wallIndex].getAttr("points")[1]),p=[...new Set(p)].sort(function(g,x){return g-x}),this.drawXAxisElementMeasureLine(parseInt(f.wallIndex),d),this.drawYAxisElementMeasureLine(parseInt(f.wallIndex),p)}}}}e.id()==="convaStage"&&this.setMiniMapPosition()}}},u0e={data(){return{store:we()}},methods:{mouseUp(t){}}},c0e={data(){return{store:we()}},methods:{touchEnd(t){t.evt.button===2?(document.oncontextmenu=function(e){e.preventDefault!==void 0&&e.preventDefault(),e.stopPropagation!==void 0&&e.stopPropagation()},this.mouseWheelDownDrawingHandler()):this.mouseDownDrawingHandler()}}},f0e={data(){return{store:we()}},methods:{touchMove(t){this.mouseMoveDrawingHandler()}}},h0e={data(){return{store:we()}},methods:{touchStart(t){t.evt.button===2?(document.oncontextmenu=function(e){e.preventDefault!==void 0&&e.preventDefault(),e.stopPropagation!==void 0&&e.stopPropagation()},this.mouseWheelDownDrawingHandler()):this.mouseDownDrawingHandler()}}},d0e={mixins:[MG,l0e,a0e,o0e,r0e,s0e,i0e,u0e,c0e,f0e,h0e,sc,ac,zr],data(){return{store:we(),constructionStore:sr(),isDragging:!1,editElement:!1,lastSelectedConstructionElement:[]}},methods:{mouseHandling(){this.store.showSideView||(this.store.convaStage.on("click",t=>{if(t.evt.button===0)switch(!0){case this.store.activeFloorplan:break;case this.store.activeConstructionElement:if(t.target.getAttr("id")==="constructionElementButtonText")return;this.constructionStore.selectedElement&&!this.isDragging&&(this.editElement=!(this.constructionStore.selectedElement&&this.editElement),this.deselectConstructionElement());break;case this.store.activeFacade:if(this.facadeStore.setStartingPoint)return;if(this.selectedCanvasFacadeElement){const e=this.selectedCanvasFacadeElement.id();let n,r,i,s,o;const a=new RegExp("partialArea_wl:(.*)_el:(.*)|cubeView_wl:(.*)","gm"),l=e.replace(a,"$1"),u=e.replace(a,"$2"),c=e.replace(a,"$3");if(u?(s=parseInt(l),n=parseInt(u),r=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[s].partialArea[n],o=r.pointsArray,i=`selectedElement_wl:${s}_el:${n}`):c&&(s=parseInt(this.selectedCanvasFacadeElement.index),r=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[s].facade,o=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[s].pointsArray,i=`selectedElement_wl:${s}`),this.store.convaStage.find("#draggingCornerGroup")[0]&&this.store.convaStage.find("#draggingCornerGroup")[0].destroy(),r.selectedArea!==void 0&&r.selectedArea.length!==0)this.store.convaStage.findOne(`#${i}`)&&this.store.convaStage.findOne(`#${i}`).destroy(),this.facadeStore.setEnableFacadeProperties(!1),this.facadeStore.removeEntryFromAllSelectedElement(this.facadeStore.getEditSelectedElement),this.facadeStore.setEditSelectedElement(),this.facadeStore.selectedElement=!1,this.facadeStore.selectedElementHasFacade=!1,r.selectedArea=[];else{if(!this.store.convaStage.findOne("#selectedElementGroup")){const h=new ke.Group({id:"selectedElementGroup"});this.store.convaStage.findOne("#tempLayer").add(h)}const f=new ke.Line({id:i,closed:!0,draggable:!1,x:this.selectedCanvasFacadeElement.x(),y:this.selectedCanvasFacadeElement.y(),points:this.selectedCanvasFacadeElement.points(),fill:"rgba(0, 100, 0, 0.3)"});this.store.convaStage.findOne("#selectedElementGroup").add(f),this.store.convaStage.findOne("#tempSelectedElement")&&this.store.convaStage.findOne("#tempSelectedElement").zIndex(this.store.convaStage.findOne("#selectedElementGroup").zIndex()),r.selectedArea=JSON.parse(JSON.stringify(o)),this.facadeStore.setEnableFacadeProperties(!0),this.facadeStore.setEditSelectedElement(this.store.selectedFloor,s,n),this.facadeStore.allSelectedElement.push(JSON.parse(JSON.stringify(this.facadeStore.getEditSelectedElement))),this.facadeStore.selectedElement=!0,u?this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[s].partialArea[n].facadePoints&&this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[s].partialArea[n].facadePoints.length!==0&&(this.facadeStore.selectedElementHasFacade=!0):c&&(r=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.wall[s].facade,r&&r.facadePoints&&r.facadePoints.length!==0&&(this.facadeStore.selectedElementHasFacade=!0)),this.updateDragPartialAreaElement()}}break}}),this.store.convaStage.on("dragend",t=>{t.evt.button===0&&this.dragEnd(t)}),this.store.convaStage.on("dragmove",t=>{this.dragMove(t)}),this.store.convaStage.on("dragstart",t=>{t.evt.button===0&&(this.store.drawing?this.dragging=!0:this.dragStart(t))}),this.store.convaStage.on("mousedown",t=>{this.stageDragging=!1,t.evt.button===0?this.mouseDown(t):t.evt.button===2&&(this.stageDragging=!0,this.startPos=this.store.convaStage.getPointerPosition(),this.stagePos={x:this.store.convaStage.x(),y:this.store.convaStage.y()})}),this.store.convaStage.on("mousemove",t=>{if(this.stageDragging){const e={x:t.evt.clientX-this.startPos.x,y:t.evt.clientY-this.startPos.y};this.store.convaStage.position({x:this.stagePos.x+e.x,y:this.stagePos.y+e.y}),t.target.id()==="convaStage"&&this.setMiniMapPosition()}else this.mouseMove(t)}),this.store.convaStage.on("mouseup",()=>{this.stageDragging||this.mouseDownDrawingHandler(),this.stageDragging=!1}),this.store.convaStage.on("mouseout",t=>{this.mouseOut(t)}),this.store.convaStage.on("mouseover",t=>{this.mouseOver(t)}),this.store.convaStage.on("touchend",t=>{this.touchEnd(t)}),this.store.convaStage.on("touchmove",()=>{this.touchMove()}),this.store.convaStage.on("touchstart",t=>{this.touchStart(t)})),this.store.convaStage.on("wheel",()=>{this.zoomOnWheel(),this.setMiniMapPosition()}),window.addEventListener("keydown",t=>{if(t.keyCode===27)switch(!0){case this.store.activeFloorplan:this.resetAddFloorplanDrawing();break;case this.store.activeConstructionElement:break;case this.store.activeFacade:this.resetAddPartialAreaDrawing();break;case this.store.activeSubconstruction:break}})}}},p0e={data(){return{store:we()}},computed:{},methods:{drawGrid(){const t=new ke.Layer({id:"gridLayer",listening:!1,perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1});let e=[],n=100,r=-(document.body.clientWidth*2),i=document.body.clientWidth*2,s=r%n,o=-(document.body.clientHeight*2),a=document.body.clientHeight*2,l=o%n;t.offset({x:s,y:l});let u=Math.floor(window.innerHeight/n)*4+2,c=Math.floor(window.innerWidth/n)*4+1;for(let f=0;f<u;f++){let h=[r,o+n*f,i,o+n*f];e.push({points:h,stroke:"gray",strokeWidth:1,lineCap:"round",opacity:.4,dash:[5,10]})}for(let f=0;f<c;f++){let h=[r+n*f,o,r+n*f,a];e.push({points:h,stroke:"gray",strokeWidth:1,lineCap:"round",opacity:.4,dash:[5,10]})}return e.forEach(f=>{t.add(new ke.Line(f))}),t}}},g0e={mixins:[zr,sc],data(){return{store:we(),rect_size:12}},computed:{},methods:{handleDragEdges(t){var e=t.target.getAttrs(),n=this.store.lineArray;if(e.lineBetween){r=e.lineIndex[0],i=e.lineIndex[1],n.splice(r+1,0,[...n[r]]),n.splice(i+1,0,[...n[i+1]]),e.lineBetween=!1,e.lineIndex=[r+1,r+2],e.prevLine=[r,i],e.nextLine=[r+2,r+3],this.lineArrayBackup=[...n];let b=Math.atan2(this.lineArrayBackup[i+1][1]-this.lineArrayBackup[r+1][1],this.lineArrayBackup[i+1][0]-this.lineArrayBackup[r+1][0])*180/Math.PI,w=Math.round(10*Math.cos(b*Math.PI/180)+this.lineArrayBackup[r][0]),A=Math.round(10*Math.sin(b*Math.PI/180)+this.lineArrayBackup[r][1]),E=this.rotatePoint(this.lineArrayBackup[r],[w,A],90);this.lineArrayBackup[r+1]=[...E],w=Math.round(10*Math.cos(b*Math.PI/180)+this.lineArrayBackup[i+2][0]),A=Math.round(10*Math.sin(b*Math.PI/180)+this.lineArrayBackup[i+2][1]);let S=this.rotatePoint(this.lineArrayBackup[i+2],[w,A],90);this.lineArrayBackup[i+1]=[...S]}else{var r=e.lineIndex[0],i=e.lineIndex[1],s=e.slope,o=e.x,a=e.y,l=this.lineArrayBackup[e.prevLine[0]][0],u=this.lineArrayBackup[e.prevLine[0]][1],c=this.lineArrayBackup[e.prevLine[1]][0],f=this.lineArrayBackup[e.prevLine[1]][1],h=this.lineArrayBackup[e.nextLine[0]][0],d=this.lineArrayBackup[e.nextLine[0]][1],p=this.lineArrayBackup[e.nextLine[1]][0],g=this.lineArrayBackup[e.nextLine[1]][1];if(Number.isFinite(s))var x=a-s*o,_=10,m=s*_+x;else _=o,m=a*2;let b=this.calcLineIntersection(o,a,_,m,l,u,c,f);n[r][0]=Math.round(b[0]),n[r][1]=Math.round(b[1]),r==0&&(n.at(-1)[0]=n[0][0],n.at(-1)[1]=n[0][1]);let w=this.calcLineIntersection(o,a,_,m,h,d,p,g);n[i][0]=Math.round(w[0]),n[i][1]=Math.round(w[1]),i==n.length-1&&(n[0][0]=n.at(-1)[0],n[0][1]=n.at(-1)[1])}this.store.setTempLineArray(n);const v="#baseLayer";if(this.calcCornerpoints(this.store.lineArray,v),this.store.convaStage.findOne("#hoverLine")){const b=[n[e.lineIndex[0]],n[e.lineIndex[1]]].flat();this.store.convaStage.findOne("#hoverLine").points(b)}this.updateCanvas(),this.writeDistances(),this.writePoints()},handleDragStartEdge(t){let e=this.store.getLineArrayBuilding[this.store.selectedFloor].floor.lineArray;this.dragging_edge=!0,this.lineArrayBackup=JSON.parse(JSON.stringify(e)),this.visibleSidesConfig=[],this.updateBeforeDrag()},handleDragEndEdge(){this.dragging_edge=!1,this.draggableSidesConfig=[],this.visibleSidesConfig=[],this.cornerPointsConfig=[],this.lineArrayBackup=[]}}},m0e={mixins:[zr,Vr,q2,ac,p0e,g0e,EG,d0e],mounted(){let t=new Image;t.src=n0e,this.store.cursorConfig=[],t.onload=()=>{this.store.cursorConfig.push({image:t,x:0,y:0,offsetX:12,offsetY:12,listening:!1}),this.initStage(),this.mouseHandling(),this.store.convaStage.add(this.drawGrid()),this.store.getLineArrayBuilding[this.store.selectedFloor].floor.floorHeight=JSON.parse(JSON.stringify(this.store.floorHeight))}},data(){return{gridArray:[],gridInterval:50,x:0,y:0,numberCornerPoints:0,configHelperLine:[],mouseLocked:!1,cursorConfig:[],scaleBy:1.1,store:we(),constructionStore:sr(),tempLineConfig:[],lineConfig:[],helpLineXConfig:[],helpLineYConfig:[],tempCursorConfig:[],tempConfigTempLineWhileDrawing:[],tempDistanceTextConfig:[],isDragging:!1,editElement:!1,lastSelectedConstructionElement:[]}},methods:{initStage(){if(this.store.configKonva.container="containerCanvas",!this.store.convaStage.length){this.store.convaStage=new ke.Stage(this.store.configKonva),this.store.convaStage.id("convaStage");const t=new ke.Layer({id:"baseLayer",name:"baseLayer",perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1,draggable:!1}),e=new ke.Layer({id:"tempLayer",name:"tempLayer",perfectDrawEnabled:!1,hitStrokeWidth:0,shadowForStrokeEnabled:!1});this.store.lineConfig=new ke.Line({name:"permanentLine",stroke:"black",strokeWidth:2,lineCap:"round",opacity:.3}),this.store.helpLineXConfig=new ke.Line({id:"helpLineXConfig",stroke:"grey",strokeWidth:3,lineCap:"round",dash:[10,5]}),this.store.helpLineYConfig=new ke.Line({id:"helpLineYConfig",stroke:"grey",strokeWidth:3,lineCap:"round",dash:[10,5]}),this.store.constructionHelpLineXConfig=new ke.Line({stroke:"grey",strokeWidth:3,lineCap:"round",dash:[10,5]}),this.store.constructionHelpLineYConfig=new ke.Line({stroke:"grey",strokeWidth:3,lineCap:"round",dash:[10,5]}),this.store.tempLineConfig=new ke.Line({stroke:"#0D6EA7",strokeWidth:3,lineCap:"round",dash:[10,10],visible:!1}),this.store.tempCursorConfig=new ke.Image(this.store.cursorConfig[0]),this.store.tempCursorConfig.hide(),t.add(this.store.lineConfig),e.add(this.store.helpLineXConfig,this.store.helpLineYConfig,this.store.tempCursorConfig,this.store.tempLineConfig),this.store.configHelperLine.forEach(function(n){t.add(new ke.Line(n))}),this.store.tempConfigTempLineWhileDrawing=new ke.Line(this.store.configTempLineWhileDrawing),t.add(this.store.tempConfigTempLineWhileDrawing),this.store.convaStage.add(t,e)}},zoomOnWheel(){if(!(event.deltaX>0||event.deltaX<0||this.store.zoomFactor<this.store.zoomOutMax&&event.deltaY>0||this.store.zoomFactor>this.store.zoomInMax&&event.deltaY<0)){{let e=this.store.convaStage.scaleX(),n={x:this.store.convaStage.width()/2,y:this.store.convaStage.height()/2},r={x:(n.x-this.store.convaStage.position().x)/e,y:(n.y-this.store.convaStage.position().y)/e};var t=0;event.deltaY<0?t=e*this.scaleBy:t=e/this.scaleBy;let i={x:n.x-r.x*t,y:n.y-r.y*t};this.store.zoomFactor=t,this.store.convaStage.scale({x:t,y:t}),this.store.convaStage.position(i)}this.scaleBy=1.1}},getCursorPosition(){var t=this.store.$refs.convaStage.getNode().getAbsoluteTransform().copy(),e=this.$refs.stage.getNode().getPointerPosition();this.x=t.point(e).x,this.y=t.point(e).y},addPointToLineArray(){if(this.getCursorPosition(),this.numberCornerPoints=this.store.lineArray.length,this.numberCornerPoints>=2&&this.store.lineArray[0].x>this.x-15&&this.store.lineArray[0].x<this.x+15&&this.store.lineArray[0].y>this.y-15&&this.store.lineArray[0].y<this.y+15&&(this.x=this.store.lineArray[0].x,this.y=this.store.lineArray[0].y,this.store.setDrawing(!1),this.store.floorHeight.push({level:this.store.floorLevel,floorHeight:this.store.defaultFloorHeight})),this.numberCornerPoints==0||this.store.lineArray[this.numberCornerPoints-1].x!=this.x&&this.store.lineArray[this.numberCornerPoints-1].y!=this.y){var t=String.fromCharCode(this.numberCornerPoints+65);this.numberCornerPoints>25&&(t=String.fromCharCode(0+65)+String.fromCharCode(this.numberCornerPoints-25-1+65)),this.store.lineArray.push({level:this.store.floorLevel,x:this.x,y:this.y,text:t})}},drawCornerPoint(){this.store.configCornerPoints=[];for(let t=0;t<=this.numberCornerPoints;t++)this.store.configCornerPoints.push({id:"cornerpoint"+t+1,x:this.store.lineArray[t].x-5,y:this.store.lineArray[t].y-5,width:10,height:10,fill:"#0D6EA7",draggable:!0,visible:!0})},drawCronerPointText(){this.store.pointsTextArray=[],this.store.lineArray.forEach(t=>{this.store.pointsTextArray.push({x:t.x+10,y:t.y+10,level:t.level,text:t.text})})},drawTempDistance(){if(this.numberCornerPoints>=0){let t=this.getDistance(this.store.lineArray[this.numberCornerPoints].x,this.store.lineArray[this.numberCornerPoints].y,this.x,this.y);this.distanceTextConfig={x:this.x+5,y:this.y+5,text:(t*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit,fontSize:14,fill:"red"}}},drawTempLine(){this.getCursorPosition(),this.store.configTempLineWhileDrawing=[];let t=[this.store.lineArray[this.store.lineArray.length-1].x,this.store.lineArray[this.store.lineArray.length-1].y,this.x,this.y];this.store.configTempLineWhileDrawing.push({points:t,stroke:"black",strokeWidth:1,lineCap:"square"})},drawPermanentLines(){this.store.configLineArray=[];for(let t=1;t<this.store.lineArray.length;t++){let e=[this.store.lineArray[this.store.lineArray.length-t].x,this.store.lineArray[this.store.lineArray.length-t].y,this.store.lineArray[this.store.lineArray.length-(t+1)].x,this.store.lineArray[this.store.lineArray.length-(t+1)].y];this.store.configLineArray.push({points:e,stroke:"black",strokeWidth:1,lineCap:"square"})}this.drawPermanentDistance()},drawHelperLine(){this.getCursorPosition(),this.configHelperLine=[];let t=[0,this.y,document.body.clientWidth,this.y];this.configHelperLine.push({points:t,stroke:"red",strokeWidth:1,lineCap:"square",dash:[1,6]});let e=[this.x,0,this.x,document.body.clientHeight];this.configHelperLine.push({points:e,stroke:"red",strokeWidth:1,lineCap:"square",dash:[1,6]})},getCenterPointOfALine(t){let e=t.length,n=t[e-2].x,r=t[e-2].y,i=t[e-1].x,s=t[e-1].y,o=(n+i)/2,a=(r+s)/2;this.store.distanceArray[e-2]={x:o,y:a,distance:this.store.distanceArray[e-2].distance,text:(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray[e-2].distance*this.store.measureUnit.preFactor).toLocaleString()+this.store.measureUnit.unit,fontSize:12,fill:"#0D6EA7",shadowColor:"black",shadowBlur:20,shadowOpacity:0,opacity:0,fontStyle:"bold"},this.makeInputFieldForDistance(this.store.getLineArrayBuilding[this.store.selectedFloor].floor.distanceArray)},drawRectangle(t,e){if(!this.store.drawing)return!1}}},v0e={class:"canvas-2D"},y0e=Ae("div",{id:"containerCanvas"},null,-1),_0e=[y0e];function w0e(t,e,n,r,i,s){return Xe(),Pt("div",v0e,[Ae("div",{"no-gutters":"",class:uu(["canvas-div",this.store.drawing?"canvas-div-drawing":""])},_0e,2)])}const YE=Dr(m0e,[["render",w0e]]),DG="/assets/logo_prodigital.45a7362a.png",b0e={components:{canvas2D:YE},mixins:[sc,Vr,oc,zr,ac],data(){return{store:we(),_3dStore:De(),dialog:!1,showRoofSelection:!0,showCanvas:!1,scaleBy:1.15,posX:0,posY:0,showCopyFloorCard:!1}},methods:{deleteFloor(){switch(!0){case this.store.activeFloorplan:this.resetAddFloorplanDrawing();break;case this.store.activeConstructionElement:break;case this.store.activeFacade:this.resetAddPartialAreaDrawing();break;case this.store.activeSubconstruction:break}this.store.drawing=!1;let t=this.store.selectedFloor;const e=this.store.convaStage.findOne(`#floor${t}`);e&&e.destroy();let n=this.store.getLineArrayBuilding.length-1;if(t!==n)for(let r=t;r<n;r++){const i=this.store.convaStage.findOne(`#floor${r+1}`);for(const s of i.getChildren())switch(s.name()){case`permanentLine${r+1}`:s.name(`permanentLine${r}`);break;case`drawingDistancesGroup${r+1}`:s.id(`drawingDistancesGroup${r}`),s.name(`drawingDistancesGroup${r}`),s.visible(this.store.showMeasurement);break;case`drawingPointsGroup${r+1}`:s.id(`drawingPointsGroup${r}`),s.name(`drawingPointsGroup${r}`),s.visible(this.store.showMeasurement);break}i.id(`floor${r}`)}this.store.getLineArrayBuilding.splice(t,1),n--,t>n&&(t=n),this.store.selectedFloor=t,this.changeFloor(),this.getSideView(),Ms()},redrawCopyCanvas(){setTimeout(()=>{this.store.canvasCopy.container("containerCanvasRoof")},150),this.store.canvasCopy.batchDraw()},autoZoom(t){var e=t.find("#floor"+this.store.selectedFloor.toString())[0].getClientRect();let n=500,r=500,i=n/e.width,s=r/e.height;this.store.zoomInMax,this.store.zoomOutMax,i>1&&s>1?this.scaleBy=i<s?i:s:this.scaleBy=i<s?i:s;let a=this.store.convaStage.scaleX()*this.scaleBy;this.store.canvasCopy.scale({x:a,y:a})},copyCanvas(){this.store.selectedFloor=this.store.getLineArrayBuilding.length.toString()-1,this.changeFloor(),this.getSideView(),this.store.setLineArrayBuildingRoofRidge([]),this.store.configKonva.container="containerCanvasRoof",setTimeout(()=>{this.store.canvasCopy=new ke.Stage(this.store.configKonva),this.store.canvasCopy.container("containerCanvasRoof"),this.store.canvasCopy.width(1e3),this.store.canvasCopy.height(500),this.store.canvasCopy.offsetX(window.innerWidth/2),this.store.canvasCopy.offsetY(window.innerHeight/2);let t=new ke.Layer,e=new ke.Image(this.store.cursorConfig[0]);e.hide(),t.add(this.store.convaStage.find("#floor"+this.store.selectedFloor.toString())[0].clone(),e),this.store.draggingEdgeGroup.find(l=>l.id().includes("dragEdge")).forEach(l=>{t.add(l.clone({name:"test",draggable:!1}))}),this.store.canvasCopy.add(t),this.store.canvasCopy.draggable(!0);var r=[];let i=[];this.autoZoom(this.store.canvasCopy);let s=[];this.centerStageOnGroups(this.store.canvasCopy);var o;let a=0;this.store.canvasCopy.on("mousedown",l=>{if(this.checkPointInsidePolygon(this.store.lineArray,[this.posX,this.posY])||e.visible()){a<1?(this.store.getLineArrayBuildingRoofRidge.push([]),a++):a=0;const f=this.store.getLineArrayBuildingRoofRidge.length-1;if(s.length==0&&(o=new ke.Line({name:"temp",stroke:"black",strokeWidth:1,draggable:!1}),t.add(o)),e.visible()?(s.push(i.flat()),this.store.getLineArrayBuildingRoofRidge[f].push({lineIndex:r,nearestPointOnLine:i,height:300})):(s.push([this.posX,this.posY]),this.store.getLineArrayBuildingRoofRidge[f].push({lineIndex:[],nearestPointOnLine:[this.posX,this.posY],height:300})),o.points(s.flat()),s.length==2){var u=t.findOne(".temp");u.destroy();var c=new ke.Line({points:s.flat(),name:"poly",stroke:"black",strokeWidth:1});t.add(c),t.draw(),s=[]}}}),this.store.canvasCopy.on("mousemove",l=>{if(s.length>0){var u=o.points()[0],c=o.points()[1];if(e.visible()){this.store.canvasCopy.container().style.cursor="none";var f=i[0],h=i[1]}else f=this.posX,h=this.posY;let g=[];g.push(u),g.push(c),g.push(f),g.push(h),o.points(g)}var d=this.store.canvasCopy.getAbsoluteTransform().copy();d.invert();let p=this.store.canvasCopy.getPointerPosition();this.posX=d.point(p).x,this.posY=d.point(p).y,l.target.getAttr("name")==="test"?(r=l.target.getAttr("lineIndex"),i=this.getNextPointOnLine(this.store.lineArray[r[0]],this.store.lineArray[r[1]],[this.posX,this.posY]),e.x(i[0]),e.y(i[1]),e.show(),this.store.canvasCopy.container().style.cursor="none"):(r=[],this.store.canvasCopy.container().style.cursor="default",e.hide())})},50)},getImg(t){return new URL("../assets/roofs/"+t,import.meta.url).href},addRoof(){alert("new roof")},back(){},reset(){},checkStoreys(){this.store.getLineArrayBuilding[this.store.selectedFloor].floor.lineArray.length!==0?this.showCopyFloorCard=!0:(this.feedback("Es ist kein Grundriss vorhanden. Bitte f\xFCgen Sie einen hinzu","error"),this.showCopyFloorCard=!1)},addStoreys(){this.store.setLineArray([]),this.updateDragElements(),this.store.drawing=!0,this.store.mouseLocked=!1,this.store.tempLineArray=null,this.store.getLineArrayBuilding.push({floor:{distanceArray:[],floorHeight:this.store.floorHeight,lineArray:[],wall:[]}}),this.store.selectedFloor=this.store.getLineArrayBuilding.length-1,this.checkFloorView(this.store.selectedFloor),this.store.floorView.length>2&&this.checkFloorView(this.store.floorView[0]),this.changeFloor(this.store.selectedFloor);var t="#floor"+(this.store.selectedFloor-1).toString(),e=this.store.convaStage.find(t);e.length>0&&e[0].show()},copyStoreys(){this.updateDragElements(),this.store.mouseLocked=!1,this.store.drawing=!1;const t=JSON.parse(JSON.stringify(this.store.getLineArrayBuilding[this.store.selectedFloor])),e=this.store.convaStage.findOne(`#floor${this.store.selectedFloor}`);this.store.getLineArrayBuilding.push({floor:{distanceArray:t.floor.distanceArray,floorHeight:t.floor.floorHeight,lineArray:t.floor.lineArray,wall:[]}}),this.store.selectedFloor=this.store.getLineArrayBuilding.length-1,Ms();const n=e.clone({id:`floor${this.store.selectedFloor}`});this.store.convaStage.findOne("#baseLayer").add(n),this.checkFloorView(this.store.selectedFloor-1),this.checkFloorView(this.store.selectedFloor),this.store.floorView.length>2&&this.checkFloorView(this.store.floorView[0]),this.changeFloor(this.store.selectedFloor);var r="#floor"+(this.store.selectedFloor-1).toString(),i=this.store.convaStage.find(r);i.length>0&&i[0].show()}}},x0e={class:"draw-function"},S0e=Ae("img",{src:DG,alt:"logo_png",class:"logo_png",onclick:"window.location.reload()"},null,-1),A0e={class:"text-bold"},E0e=["innerHTML"],C0e=Ae("img",{src:DG,alt:"logo_png",class:"logo_png"},null,-1),M0e=["innerHTML"],D0e=["onClick","for"],T0e=["id","value"],P0e=["src"],L0e=["for","innerHTML"],F0e=["innerHTML"],I0e={key:0},k0e={class:"text-color input-beschreibung"},R0e={class:"length-input"},O0e=["onUpdate:modelValue"],B0e={class:"text-color pl-1 input-beschreibung"},N0e={class:"text-center"},V0e=Ae("span",{class:"headline"},"Stockwerk \xFCbernehmen",-1),z0e=Ae("span",null,"M\xF6chten Sie den Grundriss des vorherigen Stockwerkes \xFCbernehmen",-1),G0e={class:"w-100"},U0e=["innerHTML"],H0e={class:"mt-auto"};function W0e(t,e,n,r,i,s){const o=Re("v-card-title"),a=Re("v-col"),l=Re("v-row"),u=Re("v-btn"),c=Re("v-card-actions"),f=Re("v-card"),h=Re("v-dialog"),d=Re("v-icon"),p=Re("v-tooltip"),g=Re("v-spacer"),x=Re("v-card-text");return Xe(),Pt("div",x0e,[S0e,Ae("p",A0e,qe(t.$t("Stockwerk")),1),Ae("template",null,[P(h,{modelValue:i.dialog,"onUpdate:modelValue":e[3]||(e[3]=_=>i.dialog=_),class:"v-dialog-wrap"},{default:ie(()=>[P(f,null,{default:ie(()=>[P(o,null,{default:ie(()=>[Ae("h2",{innerHTML:t.$t("Dach Planen")},null,8,E0e),C0e]),_:1}),i.showRoofSelection?(Xe(),Et(l,{key:0,class:"v-dialog-inner-wrap"},{default:ie(()=>[Ae("p",{class:"v-dialog-headline",innerHTML:t.$t("W\xE4hlen Sie zun\xE4chst Ihre Dachform aus")},null,8,M0e),P(l,{class:"v-dialog-option-wrap"},{default:ie(()=>[(Xe(!0),Pt(mt,null,cu(i.store.roofOptions,(_,m)=>(Xe(),Et(a,{cols:"4",key:m},{default:ie(()=>[Ae("label",{onClick:v=>{i.showRoofSelection=!1,i.showCanvas=!0,this.store.activeCanvas==="2D"&&s.copyCanvas(),this.store.activeCanvas==="3D"&&(i.store.selectedRoof=_.value)},class:"d-flex align-center flex-column",for:_.value},[Nt(Ae("input",{class:"input-images",id:_.value,type:"radio",value:_.value,"onUpdate:modelValue":e[0]||(e[0]=v=>i.store.selectedRoof=v)},null,8,T0e),[[e9,i.store.selectedRoof]]),Ae("img",{class:"roof-images",src:s.getImg(_.image)},null,8,P0e),Ae("span",{for:_.value,innerHTML:t.$t(_.option)},null,8,L0e)],8,D0e)]),_:2},1024))),128))]),_:1})]),_:1})):_t("",!0),Nt(P(l,{class:"row-position function-wrap"},{default:ie(()=>[P(a,{style:{height:"400px"},cols:"12",id:"containerCanvasRoof"})]),_:1},512),[[$i,i.showCanvas]]),Nt(P(l,{style:{overflow:"auto"},class:"function-wrap"},{default:ie(()=>[i.store.getLineArrayBuildingRoofRidge.length>0?(Xe(),Et(a,{key:0,cols:"12"},{default:ie(()=>[Ae("p",{innerHTML:t.$t("H\xF6he bis zum First")},null,8,F0e)]),_:1})):_t("",!0),(Xe(!0),Pt(mt,null,cu(i.store.getLineArrayBuildingRoofRidge.length,(_,m)=>(Xe(),Et(a,{key:_},{default:ie(()=>[(Xe(!0),Pt(mt,null,cu(i.store.getLineArrayBuildingRoofRidge[m].length,(v,b)=>(Xe(),Et(a,{cols:"6",key:v},{default:ie(()=>[i.store.getLineArrayBuildingRoofRidge[m][b].lineIndex.length!==0?(Xe(),Pt("div",I0e,[Ae("span",k0e,qe(t.setDimensionsLabelText(i.store.getLineArrayBuildingRoofRidge[m][b].lineIndex[0])),1),Ae("div",R0e,[Nt(Ae("input",{type:"number",class:"input-border text-color",step:"1","onUpdate:modelValue":w=>i.store.getLineArrayBuildingRoofRidge[m][b].height=w},null,8,O0e),[[Su,i.store.getLineArrayBuildingRoofRidge[m][b].height]]),Ae("span",B0e,qe(t.$t("cm")),1)])])):_t("",!0)]),_:2},1024))),128))]),_:2},1024))),128))]),_:1},512),[[$i,i.showCanvas]]),P(c,null,{default:ie(()=>[Nt(P(a,{cols:"6"},{default:ie(()=>[P(u,{class:"primary-button",onClick:e[1]||(e[1]=_=>i.showRoofSelection=!0),innerHTML:t.$t("Zur\xFCck zur Auswahl")},null,8,["innerHTML"])]),_:1},512),[[$i,!i.showRoofSelection]]),P(a,null,{default:ie(()=>[P(u,{cols:"6",class:"primary-button",block:"",onClick:e[2]||(e[2]=_=>i.dialog=!1),innerHTML:t.$t("Zur\xFCck zum Konfigurator")},null,8,["innerHTML"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),P(u,{class:"add_button_roof my-1",onClick:e[4]||(e[4]=_=>{i.dialog=!0,i.store.canvasCopy.length&&s.redrawCopyCanvas()})},{default:ie(()=>[P(d,{size:"40"},{default:ie(()=>[Ue(" mdi-home-roof")]),_:1}),P(d,null,{default:ie(()=>[Ue(" mdi-plus")]),_:1})]),_:1}),P(p,{location:"top",text:"Stockwerk Hinzuf\xFCgen"},{activator:ie(({props:_})=>[P(u,Je(_,{class:"add_button_storey my-1",onClick:s.checkStoreys}),{default:ie(()=>[P(d,null,{default:ie(()=>[Ue("mdi-plus")]),_:1})]),_:2},1040,["onClick"])]),_:1}),Ae("template",null,[Ae("div",N0e,[P(h,{modelValue:i.showCopyFloorCard,"onUpdate:modelValue":e[8]||(e[8]=_=>i.showCopyFloorCard=_),width:"auto",class:"v-dialog-wrap"},{default:ie(()=>[P(f,{class:"text-center"},{default:ie(()=>[P(o,{class:"d-flex align-center"},{default:ie(()=>[V0e,P(g),P(u,{class:"ml-2 close-button",flat:"",small:"",icon:"",onClick:e[5]||(e[5]=_=>i.showCopyFloorCard=!1)},{default:ie(()=>[P(d,null,{default:ie(()=>[Ue("mdi-close")]),_:1})]),_:1})]),_:1}),P(x,null,{default:ie(()=>[z0e]),_:1}),P(c,null,{default:ie(()=>[P(l,{class:"ma-0"},{default:ie(()=>[P(a,{cols:"6"},{default:ie(()=>[P(u,{id:"add_storeys",class:"primary-button",onClick:e[6]||(e[6]=_=>{t.setToolbarArea("Floorplan"),i.store.showSideView=!1,i.showCopyFloorCard=!1,t.getSideView(),s.copyStoreys()})},{default:ie(()=>[Ue("Ja")]),_:1})]),_:1}),P(a,{cols:"6"},{default:ie(()=>[P(u,{id:"add_storeys",class:"primary-button",onClick:e[7]||(e[7]=_=>{t.setToolbarArea("Floorplan"),i.store.showSideView=!1,i.showCopyFloorCard=!1,t.getSideView(),s.addStoreys()})},{default:ie(()=>[Ue("Nein")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),(Xe(!0),Pt(mt,null,cu(i.store.getLineArrayBuilding,(_,m)=>(Xe(),Pt("div",G0e,[(Xe(),Et(u,{modelValue:i.store.selectedFloor,"onUpdate:modelValue":e[9]||(e[9]=v=>i.store.selectedFloor=v),onClick:v=>{i.store.selectedFloor=m,t.changeFloor(),t.getSideView(),t.changeFacadeLayingDirection()},key:_+500,value:m,disabled:m==i.store.selectedFloor,class:"edit_button_storey main-btn my-1"},{default:ie(()=>[P(u,{onClick:sM(v=>t.checkFloorView(m),["stop"]),class:"edit_button_icon overlay-btn",plain:"",tile:"",flat:""},{default:ie(()=>[i.store.floorView.includes(m)||i.store.selectedFloor===m?(Xe(),Et(d,{key:0},{default:ie(()=>[Ue("mdi-eye-outline")]),_:1})):(Xe(),Et(d,{key:1},{default:ie(()=>[Ue("mdi-eye-off-outline")]),_:1}))]),_:2},1032,["onClick"]),Ae("span",{class:"btn-text",innerHTML:m==0?"EG":m+". OG"},null,8,U0e)]),_:2},1032,["modelValue","onClick","value","disabled"]))]))),256)),Ae("div",H0e,[P(u,{class:"reset_button"},{default:ie(()=>[P(d,null,{default:ie(()=>[Ue("mdi-undo")]),_:1}),Ae("span",null,qe(t.$t("Zur\xFCck")),1)]),_:1}),P(u,{class:"reset_button"},{default:ie(()=>[P(d,null,{default:ie(()=>[Ue("mdi-restore")]),_:1}),Ae("span",null,qe(t.$t("Reset")),1)]),_:1}),i.store.selectedFloor>0?(Xe(),Et(u,{key:0,class:"reset_button",onClick:e[10]||(e[10]=_=>s.deleteFloor())},{default:ie(()=>[P(d,null,{default:ie(()=>[Ue("mdi-trash-can-outline")]),_:1}),Ae("span",null,qe(t.$t("L\xF6schen")),1)]),_:1})):_t("",!0)])])}const $0e=Dr(b0e,[["render",W0e]]),X0e={methods:{rotateObject(t){alert(t)}}},Y0e={class:"rotate-object"},j0e=Ae("p",{class:"text-bold",style:{"margin-bottom":"8px"}},"Objekt drehen",-1);function q0e(t,e,n,r,i,s){const o=Re("v-icon");return Xe(),Pt("div",Y0e,[Ae("button",{onClick:e[0]||(e[0]=a=>s.rotateObject("left"))},[P(o,{class:"primary-color-onHover"},{default:ie(()=>[Ue(" mdi-arrow-left-thick ")]),_:1})]),j0e,Ae("button",{onClick:e[1]||(e[1]=a=>s.rotateObject("right"))},[P(o,{class:"primary-color-onHover"},{default:ie(()=>[Ue(" mdi-arrow-right-thick ")]),_:1})])])}const J0e=Dr(X0e,[["render",q0e]]);const K0e={data(){return{store:we(),_3dstore:De()}},methods:{onCloseEditHandler(){this._3dstore.wallConfigDialogVisible=!1,mu.resetCameraToBeforeAnyViewClicked()},onDeleteWallHandler(){this._3dstore.wallConfigDialogVisible=!1;const t=nt[this.store.selectedFloor].userData.sections[this._3dstore.currentWallIndex];console.log(t,this.store.selectedFloor,this._3dstore.currentWallIndex,nt),DV(t),mu.resetCameraToBeforeAnyViewClicked(),mu.hide()}},components:{}},Z0e=t=>(PH("data-v-4d0a0bc2"),t=t(),LH(),t),Q0e={key:0,style:{position:"relative"}},eye={class:"fixed top-0 pt-24 left-0 w-full h-full pointer-events-auto"},tye={class:"flex justify-center items-center gap-5 p-2 w-full h-full"},nye={class:"flex flex-col justify-between gap-2 items-center text-gray-100 h-1/2"},rye={class:"relative text-left bg-white shadow-lg p-5 flex flex-col gap-3"},iye=Z0e(()=>Ae("p",{class:"font-bold text-center"},"Wand",-1));function sye(t,e,n,r,i,s){const o=Re("v-icon");return i._3dstore.wallConfigDialogVisible?(Xe(),Pt("div",Q0e,[Ae("div",eye,[Ae("div",tye,[Ae("div",nye,[Ae("button",{class:"flex gap-2 items-center px-7 py-2",onClick:e[0]||(e[0]=(...a)=>s.onCloseEditHandler&&s.onCloseEditHandler(...a))},[P(o,null,{default:ie(()=>[Ue("mdi-close")]),_:1}),Ue(" Bearbeiten verlassen")]),Ae("div",rye,[iye,Ae("p",null,qe(Math.round(i._3dstore.currentWallLength))+" \xA0 "+qe(Math.round(i._3dstore.currentWallThickness))+" \xA0 "+qe(Math.round(i._3dstore.currentWallHeight)),1),i._3dstore.wallConfigDialogCanDelete?(Xe(),Pt("button",{key:0,class:"red flex gap-2 items-center px-7 py-2 bg-red-400",onClick:e[1]||(e[1]=(...a)=>s.onDeleteWallHandler&&s.onDeleteWallHandler(...a))},[P(o,null,{default:ie(()=>[Ue("mdi-delete")]),_:1}),Ue(" Wand l\xF6schen ")])):_t("",!0)])])])])])):_t("",!0)}const oye=Dr(K0e,[["render",sye],["__scopeId","data-v-4d0a0bc2"]]),aye={data(){return{store:we(),_3dStore:De()}},methods:{lengthSubmit(){UQ(at(this._3dStore.measurementDialogDistanceValue))},angleSubmit(){HQ(this._3dStore.measurementDialogAngleValue)}}};function lye(t,e,n,r,i,s){const o=Re("v-btn"),a=Re("v-text-field"),l=Re("v-row"),u=Re("v-form"),c=Re("v-container"),f=Re("v-card-text"),h=Re("v-card");return i._3dStore.measurementDialogVisible?(Xe(),Pt("div",{key:0,ref:"dialog",class:"absolute top-10 right-10 w-72 pointer bg-blue-50",style:Nm({position:"absolute",top:i._3dStore.measurementDialogTop+"px",left:Math.min(i._3dStore.measurementDialogLeft)+"px"}),onMouseenter:e[3]||(e[3]=()=>i._3dStore.measurementDialogHover=!0),onMouseleave:e[4]||(e[4]=()=>i._3dStore.measurementDialogHover=!1)},[P(h,null,{default:ie(()=>[P(o,{onClick:e[0]||(e[0]=d=>i._3dStore.measurementDialogVisible=!1)},{default:ie(()=>[Ue("Close")]),_:1}),P(f,null,{default:ie(()=>[P(c,null,{default:ie(()=>[P(l,null,{default:ie(()=>[P(u,{onSubmit:sM(s.lengthSubmit,["prevent"])},{default:ie(()=>[P(l,null,{default:ie(()=>[P(a,{type:"number",modelValue:i._3dStore.measurementDialogDistanceValue,"onUpdate:modelValue":e[1]||(e[1]=d=>i._3dStore.measurementDialogDistanceValue=d),label:"Correct Length","onClick:append":s.lengthSubmit,"append-icon":"mdi-check"},null,8,["modelValue","onClick:append"])]),_:1})]),_:1},8,["onSubmit"])]),_:1}),_t("",!0)]),_:1})]),_:1})]),_:1})],36)):_t("",!0)}const uye=Dr(aye,[["render",lye]]),cye={mixins:[sc,q2,Vr,ac,MG],data(){return{store:we()}},computed:{lineArrayBuilding(){return this.store.lineArrayBuilding}},setup(){const t=we(),e=De();return He(()=>t.floorHeight,n=>{Ms()}),He(()=>t.selectedRoof,()=>{Ms()}),He(()=>t.selectedFloor,n=>{Wt&&nt[n]&&nt[n].userData.centroid&&aa.to(Wt.target,{...nt[we().selectedFloor].userData.centroid,duration:.5})}),He(()=>e.lightingProgress,(n,r)=>{Mae(n)}),He(()=>e.componentsVisible,(n,r)=>{ute(n)}),He(()=>e.facadeVisible,(n,r)=>{fte(n)}),He(()=>e.subConstructionVisible,(n,r)=>{hte(n)}),He(()=>t.showRoof,(n,r)=>{Ct.getObjectByName("roof"),Ms()}),He(()=>t.distanceTextArray,(n,r)=>{Ms()}),He(()=>t.showMeasurement,(n,r)=>{cte(n)}),He(()=>t.drawing,(n,r)=>{const i=Ct.getObjectByName("roof");i&&(i.visible=e.showRoof),n&&(t.mouseDownCount=0)}),He(()=>t.drawingForm,n=>{el.text=WN[n]}),{}},components:{WallFocusView:oye,CurrentMeasurementDialog:uye},mounted(){Tae(),this.$refs.container.appendChild(vn.domElement),vu.on("update2dCanvas",t=>{this.update2dCanvas()}),vu.on("drawPermanentLine",t=>{this.drawPermanentLine(this.store.lineArray),this.changeFloor()}),vu.on("2dCanvasRenderThingsRightHack",t=>{setTimeout(()=>{this.writeDistances(),this.writePoints(),this.drawPermanentLine(this.store.lineArray),this.parseAngles(),this.changeFloor(),this.getSideView()},100)}),vu.on("onElementAdd",t=>{this.updateCubeView(),this.drawInsertionDepth(),this.drawFacing()})},methods:{update2dCanvas(){this.updateCanvas()}}},fye={class:"relative"},hye={ref:"container"};function dye(t,e,n,r,i,s){const o=Re("CurrentMeasurementDialog"),a=Re("WallFocusView");return Xe(),Pt("div",fye,[Ae("div",hye,null,512),P(o),P(a)])}const pye=Dr(cye,[["render",dye]]),gye={mixins:[CG,oc,ac],data(){return{store:we()}},methods:{onClickHandler(){}}},mye={class:"view-Component"},vye=Ae("a",{class:"copyright mt-1",href:"https://www.pro-digital.de/de/"},"\xA9 ProDigital Consulting GmbH",-1);function yye(t,e,n,r,i,s){const o=Re("v-btn"),a=Re("v-btn-toggle"),l=Re("v-row");return Xe(),Pt("div",mye,[P(a,{mandatory:"",modelValue:i.store.activeCanvas,"onUpdate:modelValue":e[0]||(e[0]=u=>i.store.activeCanvas=u),color:"white"},{default:ie(()=>[P(o,{value:"2D",onClick:s.onClickHandler},{default:ie(()=>[Ue(" 2D")]),_:1},8,["onClick"]),P(o,{value:"3D"},{default:ie(()=>[Ue(" 3D")]),_:1})]),_:1},8,["modelValue"]),P(l,{"no-gutters":""},{default:ie(()=>[vye]),_:1})])}const _ye=Dr(gye,[["render",yye]]),wye={data(){return{showText:!1}},methods:{}},bye={id:"mdi",class:"animate_fadeout_text"},xye={id:"mdi",class:"animate_fadeout_text"};function Sye(t,e,n,r,i,s){const o=Re("v-icon"),a=Re("v-btn");return Xe(),Pt(mt,null,[P(a,{id:"btn_getplaning","aria-label":"btn_getplaning",class:"animate_fadeout animate_fadeout_context mass_Btn_Position pa-2 left"},{default:ie(()=>[Ae("span",bye,qe(this.$t("Speichern / Laden")),1),P(o,{id:"mdi",class:"pl-3",size:"28"},{default:ie(()=>[Ue("mdi-floppy")]),_:1})]),_:1}),P(a,{id:"btn_getplaning","aria-label":"btn_getplaning",class:"animate_fadeout animate_fadeout_context mt-15 pa-2 left"},{default:ie(()=>[Ae("span",xye,qe(this.$t("PDF anfordern")),1),P(o,{id:"mdi",class:"pl-3",size:"28"},{default:ie(()=>[Ue("mdi-file-pdf-box")]),_:1})]),_:1})],64)}const Aye=Dr(wye,[["render",Sye]]),Eye={mixins:[sc,lw,oc],data(){return{displayHelpingText:!1,addingCorner:!1,removeCorner:!1,possibleCornerConfig:{},store:we(),_3dstore:De(),displayIcon:"mdi-eye",displayMenuPosition:{left:"0px",top:"0px"},activateDisplayMenu:!1,oldScale:1}},computed:{getColor(){return this.store.activeCanvas==="2D"?"black":"white"},helpingText(){return this.store.helpingText}},methods:{zoomDrag(){if(!(event.deltaX>0||event.deltaX<0||this.store.zoomFactor<this.store.zoomOutMax&&event.deltaY>0||this.store.zoomFactor>this.store.zoomInMax&&event.deltaY<0)){{let e=this.oldScale,n={x:this.store.convaStage.width()/2,y:this.store.convaStage.height()/2},r={x:(n.x-this.store.convaStage.position().x)/e,y:(n.y-this.store.convaStage.position().y)/e};var t=this.store.zoomFactor;let i={x:n.x-r.x*t,y:n.y-r.y*t};this.oldScale=t,this.store.convaStage.scale({x:t,y:t}),this.store.convaStage.position(i)}this.scaleBy=1.1,this.setMiniMapPosition()}},showDisplayMenu(){if(this.activateDisplayMenu)this.displayIcon="mdi-eye",this.activateDisplayMenu=!1;else{event.preventDefault();const t=this.store.convaStage.width(),e=event.clientX-(t-event.clientX);this.displayMenuPosition.left=e+"px",this.displayMenuPosition.top=event.clientY+"px",this.displayIcon="mdi-eye-off",this.activateDisplayMenu=!0}},enableMeasurement(){if(this.store.convaStage.findOne("#measureLineXGroup")&&this.store.convaStage.findOne("#measureLineXGroup").visible(this.store.showMeasurement),this.store.convaStage.findOne("#measureLineYGroup")&&this.store.convaStage.findOne("#measureLineYGroup").visible(this.store.showMeasurement),this.store.convaStage.findOne("#elementMeasureLineXGroup")&&this.store.convaStage.findOne("#elementMeasureLineXGroup").visible(this.store.showMeasurement),this.store.convaStage.findOne("#elementMeasureLineYGroup")&&this.store.convaStage.findOne("#elementMeasureLineYGroup").visible(this.store.showMeasurement),this.store.showMeasurement)this.store.convaStage.findOne("#drawingDistancesGroup"+this.store.selectedFloor)&&this.store.convaStage.findOne("#drawingDistancesGroup"+this.store.selectedFloor).visible(this.store.showMeasurement),this.store.convaStage.findOne("#drawingPointsGroup"+this.store.selectedFloor)&&this.store.convaStage.findOne("#drawingPointsGroup"+this.store.selectedFloor).visible(this.store.showMeasurement);else for(const t in this.store.getLineArrayBuilding)this.store.convaStage.findOne("#drawingDistancesGroup"+t)&&this.store.convaStage.findOne("#drawingDistancesGroup"+t).visible(this.store.showMeasurement),this.store.convaStage.findOne("#drawingPointsGroup"+t)&&this.store.convaStage.findOne("#drawingPointsGroup"+t).visible(this.store.showMeasurement)},enableRoof(){this.store.convaStage.findOne("#roofGroup")&&this.store.convaStage.findOne("#roofGroup").visible(this.store.showRoof),this.store.activeFloorplan||this.drawConstructionElementDistances()},enableDescriptions(){},enableCornerAndEdges(){this.store.convaStage.findOne("#distanceCubeViewGroup")&&this.store.convaStage.findOne("#distanceCubeViewGroup").visible(this.store.showCornerAndEdges)},enableMiniMap(){this.store.convaStage.findOne("#miniMapGroup")&&this.store.convaStage.findOne("#miniMapGroup").visible(this.store.showMiniMap)},showHelpingText(){this.displayHelpingText?this.displayHelpingText=!1:this.displayHelpingText=!0},modifyCorners(t){},updateEditableCornerConfig(){let t=12/this.store.zoomFactor;this.store.convaStage.findOne("#editableCornerGroup")&&this.store.convaStage.findOne("#editableCornerGroup").destroy();const e=new ke.Group({id:"editableCornerGroup"});this.store.convaStage.findOne("#baseLayer").add(e);for(let n=0;n<this.store.getLineArrayBuilding[this.store.selectedFloor].floor.lineArray.length-1;n++){const r=new ke.Rect({index:`editableCornerPoints_${n.toString()}`,x:this.store.getLineArrayBuilding[this.store.selectedFloor].floor.lineArray[n][0],y:this.store.getLineArrayBuilding[this.store.selectedFloor].floor.lineArray[n][1],offsetX:t/2,offsetY:t/2,fill:"grey",width:t,height:t,draggable:!1,visible:!0,perfectDrawEnabled:!1,hitStrokeWidth:this.removeCorner?t*4:t,shadowForStrokeEnabled:!1});e.add(r)}Object.keys(this.possibleCornerConfig).length!==0&&(this.possibleCornerConfig.width=t,this.possibleCornerConfig.height=t,this.possibleCornerConfig.offsetX=t/2,this.possibleCornerConfig.offsetY=t/2)}}},Cye={class:"helpingText-Box",style:{width:"10%"}},Mye={class:"w-100"},Dye={class:"input-beschreibung"},Tye={class:"input-beschreibung"},Pye={class:"input-beschreibung"},Lye={class:"input-beschreibung"},Fye={class:"input-beschreibung"},Iye={class:"input-beschreibung"},kye={class:"input-beschreibung"},Rye={class:"input-beschreibung"},Oye={class:"input-beschreibung"},Bye=["min","max","step"],Nye={key:1},Vye={id:"button-helping-text-box"},zye=["for"];function Gye(t,e,n,r,i,s){const o=Re("v-slider"),a=Re("v-icon"),l=Re("v-btn"),u=Re("v-list-item-title"),c=Re("v-list-item"),f=Re("v-switch"),h=Re("v-col"),d=Re("v-row"),p=Re("v-list-item-action"),g=Re("v-list"),x=Re("v-card"),_=Re("v-menu");return Xe(),Pt("div",Cye,[P(o,{modelValue:i.store.zoomFactor,"onUpdate:modelValue":[e[0]||(e[0]=m=>i.store.zoomFactor=m),s.zoomDrag],min:.3,max:1.5,step:.1,"append-icon":"mdi-magnify-plus-outline","prepend-icon":"mdi-magnify-minus-outline"},null,8,["modelValue","min","max","step","onUpdate:modelValue"]),P(_,{location:"bottom end",absolute:"","offset-y":"","close-on-click":!1,"close-on-content-click":!1},{activator:ie(({props:m})=>[P(l,Je({variant:"text",id:"button-helping-text-box-questionmark"},m),{default:ie(()=>[P(a,{color:s.getColor,class:"primary-color-onHover",size:"35"},{default:ie(()=>[Ue(qe(i.displayIcon),1)]),_:1},8,["color"])]),_:2},1040)]),default:ie(()=>[P(x,{style:{"background-color":"white !important"}},{default:ie(()=>[P(g,{style:{"background-color":"transparent !important"}},{default:ie(()=>[P(c,null,{default:ie(()=>[P(u,{style:{"font-weight":"bold"}},{default:ie(()=>[Ue(qe(t.$t("Elemente anzeigen")),1)]),_:1})]),_:1}),P(c,null,{default:ie(()=>[P(p,{class:"mr-0 w-100"},{default:ie(()=>[Ae("div",Mye,[P(d,{class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{modelValue:i.store.showMeasurement,"onUpdate:modelValue":[e[1]||(e[1]=m=>i.store.showMeasurement=m),s.enableMeasurement],"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Dye,qe(t.$t("Bema\xDFungen anzeigen")),1)]),_:1})]),_:1}),i.store.activeCanvas==="3D"?(Xe(),Et(d,{key:0,class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{modelValue:i._3dstore.componentsVisible,"onUpdate:modelValue":e[2]||(e[2]=m=>i._3dstore.componentsVisible=m),"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Tye,qe(t.$t("Wand")),1)]),_:1})]),_:1})):_t("",!0),i.store.activeCanvas==="3D"?(Xe(),Et(d,{key:1,class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{modelValue:i._3dstore.facadeVisible,"onUpdate:modelValue":e[3]||(e[3]=m=>i._3dstore.facadeVisible=m),"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Pye,qe(t.$t("Verschalung")),1)]),_:1})]),_:1})):_t("",!0),i.store.activeCanvas==="3D"?(Xe(),Et(d,{key:2,class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{modelValue:i._3dstore.subConstructionVisible,"onUpdate:modelValue":e[4]||(e[4]=m=>i._3dstore.subConstructionVisible=m),"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Lye,qe(t.$t("Unterkonstruktion")),1)]),_:1})]),_:1})):_t("",!0),i.store.activeCanvas==="3D"?(Xe(),Et(d,{key:3,class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{modelValue:i.store.showRoof,"onUpdate:modelValue":[e[5]||(e[5]=m=>i.store.showRoof=m),s.enableRoof],"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Fye,qe(t.$t("Dach anzeigen")),1)]),_:1})]),_:1})):_t("",!0),P(d,{class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{disabled:"",modelValue:i.store.showDescriptions,"onUpdate:modelValue":[e[6]||(e[6]=m=>i.store.showDescriptions=m),s.enableDescriptions],"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Iye,qe(t.$t("Beschreibungen anzeigen")),1)]),_:1})]),_:1}),i.store.activeCanvas==="2D"?(Xe(),Et(d,{key:4,class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{modelValue:i.store.showCornerAndEdges,"onUpdate:modelValue":[e[7]||(e[7]=m=>i.store.showCornerAndEdges=m),s.enableCornerAndEdges],"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",kye,qe(t.$t("Seiten und Ecken anzeigen")),1)]),_:1})]),_:1})):_t("",!0),i.store.activeCanvas==="2D"?(Xe(),Et(d,{key:5,class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{modelValue:i.store.showMiniMap,"onUpdate:modelValue":[e[8]||(e[8]=m=>i.store.showMiniMap=m),s.enableMiniMap],"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Rye,qe(t.$t("Minimap anzeigen")),1)]),_:1})]),_:1})):_t("",!0),P(d,{class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap"},{default:ie(()=>[P(f,{modelValue:i.store.enableSnapIn,"onUpdate:modelValue":e[9]||(e[9]=m=>i.store.enableSnapIn=m),"hide-details":"",label:"",class:"ml-2",color:"blue"},null,8,["modelValue"])]),_:1}),P(h,{cols:"9",class:"input-masse-inner-wrap"},{default:ie(()=>[Ae("span",Oye,qe(i.store.enableSnapIn?"Einrastfunktion aktiv":"Einrastfunktion inaktiv"),1)]),_:1})]),_:1}),i.store.activeCanvas==="3D"?(Xe(),Et(d,{key:6,class:"input-masse-wrap"},{default:ie(()=>[P(h,{cols:"3",class:"input-masse-inner-wrap flex justify-center items-center"},{default:ie(()=>[P(a,null,{default:ie(()=>[Ue("mdi-white-balance-sunny")]),_:1})]),_:1}),P(h,{cols:"6",class:"input-masse-inner-wrap"},{default:ie(()=>[Nt(Ae("input",{class:"pointer-events-auto w-full",type:"range",id:"lighting-control",name:"lighting",min:.05,max:1,step:.01,"onUpdate:modelValue":e[10]||(e[10]=m=>i._3dstore.lightingProgress=m),style:{"background-color":"white"}},null,8,Bye),[[Su,i._3dstore.lightingProgress]])]),_:1}),P(h,{cols:"3",class:"input-masse-inner-wrap flex justify-center items-center"},{default:ie(()=>[P(a,null,{default:ie(()=>[Ue("mdi-weather-sunset")]),_:1})]),_:1})]),_:1})):_t("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),this.displayHelpingText?(Xe(),Pt("div",Nye,[Ae("div",Vye,[Ae("button",{onClick:e[12]||(e[12]=m=>s.showHelpingText()),id:"button-close-helpingText"},[P(a,null,{default:ie(()=>[Ue(" mdi-arrow-up-drop-circle-outline")]),_:1})]),(Xe(!0),Pt(mt,null,cu(this.helpingText,(m,v)=>(Xe(),Pt("div",{key:v},[Ae("label",{for:v},[Ae("p",null,qe(m.id)+". "+qe(m.value),1)],8,zye)]))),128))])])):(Xe(),Pt("button",{key:0,id:"button-helping-text-box-questionmark",onClick:e[11]||(e[11]=m=>s.showHelpingText())},[P(a,{color:s.getColor,class:"primary-color-onHover",size:"35"},{default:ie(()=>[Ue(" mdi-comment-question")]),_:1},8,["color"])]))])}const Uye=Dr(Eye,[["render",Gye]]),Hye={dragDistanceThreshold:10,name:"App",mixins:[YE],components:{ownToolbar:t0e,drawFunctions:$0e,rotateObject:J0e,canvas2D:YE,canvas3D:pye,viewComponent:_ye,sideButton:Aye,helpingTextComponent:Uye},data(){return{store:we()}},mounted(){this.store.setMeasureUnit(this.store.measureUnits.find(t=>t.preFactor===this.store.preFactor)),this.drawGrid()},methods:{onResize(){const t=Math.round(window.innerWidth/2),e=Math.round(window.innerHeight/2-1);this.store.setConfigKonva({width:this.store.canvasWidth,height:this.store.canvasHeight,scale:{x:1,y:1},position:{x:t,y:e},draggable:!0,pixelRatio:.01})}}},Wye={class:"div-100"},$ye={class:"div-100"};function Xye(t,e,n,r,i,s){const o=Re("canvas2D"),a=Re("canvas3D"),l=Re("drawFunctions"),u=Re("helpingTextComponent"),c=Re("sideButton"),f=Re("viewComponent"),h=Re("ownToolbar"),d=Re("v-app"),p=Xi("resize");return Nt((Xe(),Et(d,{onContextmenu:e[0]||(e[0]=sM(()=>{},["prevent"]))},{default:ie(()=>[Nt(Ae("div",Wye,[P(o)],512),[[$i,i.store.activeCanvas==="2D"]]),Nt(Ae("div",$ye,[P(a)],512),[[$i,i.store.activeCanvas==="3D"]]),P(l),P(u),P(c),P(f),Ae("footer",null,[P(h)])]),_:1})),[[p,s.onResize]])}const J2=Dr(Hye,[["render",Xye]]),Yye=Object.freeze(Object.defineProperty({__proto__:null,default:J2},Symbol.toStringTag,{value:"Module"})),jye="modulepreload",qye=function(t){return"/"+t},dk={},Jye=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=qye(s),s in dk)return;dk[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":jye,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,f)=>{u.addEventListener("load",c),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const yh=typeof window<"u";function Kye(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const dn=Object.assign;function BS(t,e){const n={};for(const r in e){const i=e[r];n[r]=Oo(i)?i.map(t):t(i)}return n}const Fg=()=>{},Oo=Array.isArray,Zye=/\/$/,Qye=t=>t.replace(Zye,"");function NS(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=r1e(r!=null?r:e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:o}}function e1e(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function pk(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function t1e(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&bd(e.matched[r],n.matched[i])&&TG(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function bd(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function TG(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!n1e(t[n],e[n]))return!1;return!0}function n1e(t,e){return Oo(t)?gk(t,e):Oo(e)?gk(e,t):t===e}function gk(t,e){return Oo(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function r1e(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i=n.length-1,s,o;for(s=0;s<r.length;s++)if(o=r[s],o!==".")if(o==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(s-(s===r.length?1:0)).join("/")}var Tm;(function(t){t.pop="pop",t.push="push"})(Tm||(Tm={}));var Ig;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ig||(Ig={}));function i1e(t){if(!t)if(yh){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Qye(t)}const s1e=/^[^#]+#/;function o1e(t,e){return t.replace(s1e,"#")+e}function a1e(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const uw=()=>({left:window.pageXOffset,top:window.pageYOffset});function l1e(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=a1e(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function mk(t,e){return(history.state?history.state.position-e:-1)+t}const jE=new Map;function u1e(t,e){jE.set(t,e)}function c1e(t){const e=jE.get(t);return jE.delete(t),e}let f1e=()=>location.protocol+"//"+location.host;function PG(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),pk(l,"")}return pk(n,t)+r+i}function h1e(t,e,n,r){let i=[],s=[],o=null;const a=({state:h})=>{const d=PG(t,location),p=n.value,g=e.value;let x=0;if(h){if(n.value=d,e.value=h,o&&o===p){o=null;return}x=g?h.position-g.position:0}else r(d);i.forEach(_=>{_(n.value,p,{delta:x,type:Tm.pop,direction:x?x>0?Ig.forward:Ig.back:Ig.unknown})})};function l(){o=n.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return s.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(dn({},h.state,{scroll:uw()}),"")}function f(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function vk(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?uw():null}}function d1e(t){const{history:e,location:n}=window,r={value:PG(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,u,c){const f=t.indexOf("#"),h=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:f1e()+t+l;try{e[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),n[c?"replace":"assign"](h)}}function o(l,u){const c=dn({},e.state,vk(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});s(l,c,!0),r.value=l}function a(l,u){const c=dn({},i.value,e.state,{forward:l,scroll:uw()});s(c.current,c,!0);const f=dn({},vk(r.value,l,null),{position:c.position+1},u);s(l,f,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function p1e(t){t=i1e(t);const e=d1e(t),n=h1e(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=dn({location:"",base:t,go:r,createHref:o1e.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function g1e(t){return typeof t=="string"||t&&typeof t=="object"}function LG(t){return typeof t=="string"||typeof t=="symbol"}const Kl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},FG=Symbol("");var yk;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(yk||(yk={}));function xd(t,e){return dn(new Error,{type:t,[FG]:!0},e)}function Ja(t,e){return t instanceof Error&&FG in t&&(e==null||!!(t.type&e))}const _k="[^/]+?",m1e={sensitive:!1,strict:!1,start:!0,end:!0},v1e=/[.+*?^${}()[\]/\\]/g;function y1e(t,e){const n=dn({},m1e,e),r=[];let i=n.start?"^":"";const s=[];for(const u of t){const c=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(n.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(v1e,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:g,optional:x,regexp:_}=h;s.push({name:p,repeatable:g,optional:x});const m=_||_k;if(m!==_k){d+=10;try{new RegExp(`(${m})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${p}" (${m}): `+b.message)}}let v=g?`((?:${m})(?:/(?:${m}))*)`:`(${m})`;f||(v=x&&u.length<2?`(?:/${v})`:"/"+v),x&&(v+="?"),i+=v,d+=20,x&&(d+=-8),g&&(d+=-20),m===".*"&&(d+=-50)}c.push(d)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(u){const c=u.match(o),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=s[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of t){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:g,optional:x}=d,_=p in u?u[p]:"";if(Oo(_)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const m=Oo(_)?_.join("/"):_;if(!m)if(x)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=m}}return c||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function _1e(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function w1e(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=_1e(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(wk(r))return 1;if(wk(i))return-1}return i.length-r.length}function wk(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const b1e={type:0,value:""},x1e=/[a-zA-Z0-9_]/;function S1e(t){if(!t)return[[]];if(t==="/")return[[b1e]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(d){throw new Error(`ERR (${n})/"${u}": ${d}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,u="",c="";function f(){!u||(n===0?s.push({type:0,value:u}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(u&&f(),o()):l===":"?(f(),n=1):h();break;case 4:h(),n=r;break;case 1:l==="("?n=2:x1e.test(l)?h():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),o(),i}function A1e(t,e,n){const r=y1e(S1e(t.path),n),i=dn(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function E1e(t,e){const n=[],r=new Map;e=Sk({strict:!1,end:!0,sensitive:!1},e);function i(c){return r.get(c)}function s(c,f,h){const d=!h,p=C1e(c);p.aliasOf=h&&h.record;const g=Sk(e,c),x=[p];if("alias"in c){const v=typeof c.alias=="string"?[c.alias]:c.alias;for(const b of v)x.push(dn({},p,{components:h?h.record.components:p.components,path:b,aliasOf:h?h.record:p}))}let _,m;for(const v of x){const{path:b}=v;if(f&&b[0]!=="/"){const w=f.record.path,A=w[w.length-1]==="/"?"":"/";v.path=f.record.path+(b&&A+b)}if(_=A1e(v,f,g),h?h.alias.push(_):(m=m||_,m!==_&&m.alias.push(_),d&&c.name&&!xk(_)&&o(c.name)),p.children){const w=p.children;for(let A=0;A<w.length;A++)s(w[A],_,h&&h.children[A])}h=h||_,(_.record.components&&Object.keys(_.record.components).length||_.record.name||_.record.redirect)&&l(_)}return m?()=>{o(m)}:Fg}function o(c){if(LG(c)){const f=r.get(c);f&&(r.delete(c),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(c);f>-1&&(n.splice(f,1),c.record.name&&r.delete(c.record.name),c.children.forEach(o),c.alias.forEach(o))}}function a(){return n}function l(c){let f=0;for(;f<n.length&&w1e(c,n[f])>=0&&(c.record.path!==n[f].record.path||!IG(c,n[f]));)f++;n.splice(f,0,c),c.record.name&&!xk(c)&&r.set(c.record.name,c)}function u(c,f){let h,d={},p,g;if("name"in c&&c.name){if(h=r.get(c.name),!h)throw xd(1,{location:c});g=h.record.name,d=dn(bk(f.params,h.keys.filter(m=>!m.optional).map(m=>m.name)),c.params&&bk(c.params,h.keys.map(m=>m.name))),p=h.stringify(d)}else if("path"in c)p=c.path,h=n.find(m=>m.re.test(p)),h&&(d=h.parse(p),g=h.record.name);else{if(h=f.name?r.get(f.name):n.find(m=>m.re.test(f.path)),!h)throw xd(1,{location:c,currentLocation:f});g=h.record.name,d=dn({},f.params,c.params),p=h.stringify(d)}const x=[];let _=h;for(;_;)x.unshift(_.record),_=_.parent;return{name:g,path:p,params:d,matched:x,meta:D1e(x)}}return t.forEach(c=>s(c)),{addRoute:s,resolve:u,removeRoute:o,getRoutes:a,getRecordMatcher:i}}function bk(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function C1e(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:M1e(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function M1e(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="boolean"?n:n[r];return e}function xk(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function D1e(t){return t.reduce((e,n)=>dn(e,n.meta),{})}function Sk(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function IG(t,e){return e.children.some(n=>n===t||IG(t,n))}const kG=/#/g,T1e=/&/g,P1e=/\//g,L1e=/=/g,F1e=/\?/g,RG=/\+/g,I1e=/%5B/g,k1e=/%5D/g,OG=/%5E/g,R1e=/%60/g,BG=/%7B/g,O1e=/%7C/g,NG=/%7D/g,B1e=/%20/g;function K2(t){return encodeURI(""+t).replace(O1e,"|").replace(I1e,"[").replace(k1e,"]")}function N1e(t){return K2(t).replace(BG,"{").replace(NG,"}").replace(OG,"^")}function qE(t){return K2(t).replace(RG,"%2B").replace(B1e,"+").replace(kG,"%23").replace(T1e,"%26").replace(R1e,"`").replace(BG,"{").replace(NG,"}").replace(OG,"^")}function V1e(t){return qE(t).replace(L1e,"%3D")}function z1e(t){return K2(t).replace(kG,"%23").replace(F1e,"%3F")}function G1e(t){return t==null?"":z1e(t).replace(P1e,"%2F")}function t_(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function U1e(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(RG," "),o=s.indexOf("="),a=t_(o<0?s:s.slice(0,o)),l=o<0?null:t_(s.slice(o+1));if(a in e){let u=e[a];Oo(u)||(u=e[a]=[u]),u.push(l)}else e[a]=l}return e}function Ak(t){let e="";for(let n in t){const r=t[n];if(n=V1e(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Oo(r)?r.map(s=>s&&qE(s)):[r&&qE(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function H1e(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Oo(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const W1e=Symbol(""),Ek=Symbol(""),Z2=Symbol(""),VG=Symbol(""),JE=Symbol("");function Hp(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function su(t,e,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((o,a)=>{const l=f=>{f===!1?a(xd(4,{from:n,to:e})):f instanceof Error?a(f):g1e(f)?a(xd(2,{from:e,to:f})):(s&&r.enterCallbacks[i]===s&&typeof f=="function"&&s.push(f),o())},u=t.call(r&&r.instances[i],e,n,l);let c=Promise.resolve(u);t.length<3&&(c=c.then(l)),c.catch(f=>a(f))})}function VS(t,e,n,r){const i=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if($1e(a)){const u=(a.__vccOpts||a)[e];u&&i.push(su(u,n,r,s,o))}else{let l=a();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const c=Kye(u)?u.default:u;s.components[o]=c;const h=(c.__vccOpts||c)[e];return h&&su(h,n,r,s,o)()}))}}return i}function $1e(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ck(t){const e=zt(Z2),n=zt(VG),r=re(()=>e.resolve(Hi(t.to))),i=re(()=>{const{matched:l}=r.value,{length:u}=l,c=l[u-1],f=n.matched;if(!c||!f.length)return-1;const h=f.findIndex(bd.bind(null,c));if(h>-1)return h;const d=Mk(l[u-2]);return u>1&&Mk(c)===d&&f[f.length-1].path!==d?f.findIndex(bd.bind(null,l[u-2])):h}),s=re(()=>i.value>-1&&q1e(n.params,r.value.params)),o=re(()=>i.value>-1&&i.value===n.matched.length-1&&TG(n.params,r.value.params));function a(l={}){return j1e(l)?e[Hi(t.replace)?"replace":"push"](Hi(t.to)).catch(Fg):Promise.resolve()}return{route:r,href:re(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}const X1e=JC({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ck,setup(t,{slots:e}){const n=Yr(Ck(t)),{options:r}=zt(Z2),i=re(()=>({[Dk(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Dk(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:no("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Y1e=X1e;function j1e(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function q1e(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Oo(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function Mk(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Dk=(t,e,n)=>t!=null?t:e!=null?e:n,J1e=JC({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=zt(JE),i=re(()=>t.route||r.value),s=zt(Ek,0),o=re(()=>{let u=Hi(s);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),a=re(()=>i.value.matched[o.value]);ar(Ek,re(()=>o.value+1)),ar(W1e,a),ar(JE,i);const l=Se();return He(()=>[l.value,a.value,t.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!bd(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(g=>g(u))},{flush:"post"}),()=>{const u=i.value,c=t.name,f=a.value,h=f&&f.components[c];if(!h)return Tk(n.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,x=no(h,dn({},p,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return Tk(n.default,{Component:x,route:u})||x}}});function Tk(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const K1e=J1e;function Z1e(t){const e=E1e(t.routes,t),n=t.parseQuery||U1e,r=t.stringifyQuery||Ak,i=t.history,s=Hp(),o=Hp(),a=Hp(),l=f_(Kl);let u=Kl;yh&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=BS.bind(null,J=>""+J),f=BS.bind(null,G1e),h=BS.bind(null,t_);function d(J,X){let Q,oe;return LG(J)?(Q=e.getRecordMatcher(J),oe=X):oe=J,e.addRoute(oe,Q)}function p(J){const X=e.getRecordMatcher(J);X&&e.removeRoute(X)}function g(){return e.getRoutes().map(J=>J.record)}function x(J){return!!e.getRecordMatcher(J)}function _(J,X){if(X=dn({},X||l.value),typeof J=="string"){const V=NS(n,J,X.path),R=e.resolve({path:V.path},X),B=i.createHref(V.fullPath);return dn(V,R,{params:h(R.params),hash:t_(V.hash),redirectedFrom:void 0,href:B})}let Q;if("path"in J)Q=dn({},J,{path:NS(n,J.path,X.path).path});else{const V=dn({},J.params);for(const R in V)V[R]==null&&delete V[R];Q=dn({},J,{params:f(J.params)}),X.params=f(X.params)}const oe=e.resolve(Q,X),he=J.hash||"";oe.params=c(h(oe.params));const ve=e1e(r,dn({},J,{hash:N1e(he),path:oe.path})),ye=i.createHref(ve);return dn({fullPath:ve,hash:he,query:r===Ak?H1e(J.query):J.query||{}},oe,{redirectedFrom:void 0,href:ye})}function m(J){return typeof J=="string"?NS(n,J,l.value.path):dn({},J)}function v(J,X){if(u!==J)return xd(8,{from:X,to:J})}function b(J){return E(J)}function w(J){return b(dn(m(J),{replace:!0}))}function A(J){const X=J.matched[J.matched.length-1];if(X&&X.redirect){const{redirect:Q}=X;let oe=typeof Q=="function"?Q(J):Q;return typeof oe=="string"&&(oe=oe.includes("?")||oe.includes("#")?oe=m(oe):{path:oe},oe.params={}),dn({query:J.query,hash:J.hash,params:"path"in oe?{}:J.params},oe)}}function E(J,X){const Q=u=_(J),oe=l.value,he=J.state,ve=J.force,ye=J.replace===!0,V=A(Q);if(V)return E(dn(m(V),{state:typeof V=="object"?dn({},he,V.state):he,force:ve,replace:ye}),X||Q);const R=Q;R.redirectedFrom=X;let B;return!ve&&t1e(r,oe,Q)&&(B=xd(16,{to:R,from:oe}),W(oe,oe,!0,!1)),(B?Promise.resolve(B):C(R,oe)).catch(j=>Ja(j)?Ja(j,2)?j:N(j):O(j,R,oe)).then(j=>{if(j){if(Ja(j,2))return E(dn({replace:ye},m(j.to),{state:typeof j.to=="object"?dn({},he,j.to.state):he,force:ve}),X||R)}else j=D(R,oe,!0,ye,he);return M(R,oe,j),j})}function S(J,X){const Q=v(J,X);return Q?Promise.reject(Q):Promise.resolve()}function C(J,X){let Q;const[oe,he,ve]=Q1e(J,X);Q=VS(oe.reverse(),"beforeRouteLeave",J,X);for(const V of oe)V.leaveGuards.forEach(R=>{Q.push(su(R,J,X))});const ye=S.bind(null,J,X);return Q.push(ye),ch(Q).then(()=>{Q=[];for(const V of s.list())Q.push(su(V,J,X));return Q.push(ye),ch(Q)}).then(()=>{Q=VS(he,"beforeRouteUpdate",J,X);for(const V of he)V.updateGuards.forEach(R=>{Q.push(su(R,J,X))});return Q.push(ye),ch(Q)}).then(()=>{Q=[];for(const V of J.matched)if(V.beforeEnter&&!X.matched.includes(V))if(Oo(V.beforeEnter))for(const R of V.beforeEnter)Q.push(su(R,J,X));else Q.push(su(V.beforeEnter,J,X));return Q.push(ye),ch(Q)}).then(()=>(J.matched.forEach(V=>V.enterCallbacks={}),Q=VS(ve,"beforeRouteEnter",J,X),Q.push(ye),ch(Q))).then(()=>{Q=[];for(const V of o.list())Q.push(su(V,J,X));return Q.push(ye),ch(Q)}).catch(V=>Ja(V,8)?V:Promise.reject(V))}function M(J,X,Q){for(const oe of a.list())oe(J,X,Q)}function D(J,X,Q,oe,he){const ve=v(J,X);if(ve)return ve;const ye=X===Kl,V=yh?history.state:{};Q&&(oe||ye?i.replace(J.fullPath,dn({scroll:ye&&V&&V.scroll},he)):i.push(J.fullPath,he)),l.value=J,W(J,X,Q,ye),N()}let T;function L(){T||(T=i.listen((J,X,Q)=>{if(!Z.listening)return;const oe=_(J),he=A(oe);if(he){E(dn(he,{replace:!0}),oe).catch(Fg);return}u=oe;const ve=l.value;yh&&u1e(mk(ve.fullPath,Q.delta),uw()),C(oe,ve).catch(ye=>Ja(ye,12)?ye:Ja(ye,2)?(E(ye.to,oe).then(V=>{Ja(V,20)&&!Q.delta&&Q.type===Tm.pop&&i.go(-1,!1)}).catch(Fg),Promise.reject()):(Q.delta&&i.go(-Q.delta,!1),O(ye,oe,ve))).then(ye=>{ye=ye||D(oe,ve,!1),ye&&(Q.delta&&!Ja(ye,8)?i.go(-Q.delta,!1):Q.type===Tm.pop&&Ja(ye,20)&&i.go(-1,!1)),M(oe,ve,ye)}).catch(Fg)}))}let F=Hp(),k=Hp(),I;function O(J,X,Q){N(J);const oe=k.list();return oe.length?oe.forEach(he=>he(J,X,Q)):console.error(J),Promise.reject(J)}function $(){return I&&l.value!==Kl?Promise.resolve():new Promise((J,X)=>{F.add([J,X])})}function N(J){return I||(I=!J,L(),F.list().forEach(([X,Q])=>J?Q(J):X()),F.reset()),J}function W(J,X,Q,oe){const{scrollBehavior:he}=t;if(!yh||!he)return Promise.resolve();const ve=!Q&&c1e(mk(J.fullPath,0))||(oe||!Q)&&history.state&&history.state.scroll||null;return En().then(()=>he(J,X,ve)).then(ye=>ye&&l1e(ye)).catch(ye=>O(ye,J,X))}const H=J=>i.go(J);let K;const ee=new Set,Z={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:x,getRoutes:g,resolve:_,options:t,push:b,replace:w,go:H,back:()=>H(-1),forward:()=>H(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:k.add,isReady:$,install(J){const X=this;J.component("RouterLink",Y1e),J.component("RouterView",K1e),J.config.globalProperties.$router=X,Object.defineProperty(J.config.globalProperties,"$route",{enumerable:!0,get:()=>Hi(l)}),yh&&!K&&l.value===Kl&&(K=!0,b(i.location).catch(he=>{}));const Q={};for(const he in Kl)Q[he]=re(()=>l.value[he]);J.provide(Z2,X),J.provide(VG,Yr(Q)),J.provide(JE,l);const oe=J.unmount;ee.add(J),J.unmount=function(){ee.delete(J),ee.size<1&&(u=Kl,T&&T(),T=null,l.value=Kl,K=!1,I=!1),oe()}}};return Z}function ch(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function Q1e(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(u=>bd(u,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(u=>bd(u,l))||i.push(l))}return[n,r,i]}const e_e=Z1e({history:p1e("/"),routes:[{path:"/",name:"app",component:J2},{path:"/about",name:"about",component:()=>Jye(()=>Promise.resolve().then(()=>Yye),void 0)}]});/*!
  * shared v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const KE=typeof window<"u",t_e=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",lc=t=>t_e?Symbol(t):t,n_e=(t,e,n)=>r_e({l:t,k:e,s:n}),r_e=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Ir=t=>typeof t=="number"&&isFinite(t),i_e=t=>eD(t)==="[object Date]",Xu=t=>eD(t)==="[object RegExp]",cw=t=>Mt(t)&&Object.keys(t).length===0;function s_e(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const Jr=Object.assign;let Pk;const kg=()=>Pk||(Pk=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Lk(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const o_e=Object.prototype.hasOwnProperty;function Q2(t,e){return o_e.call(t,e)}const On=Array.isArray,pr=t=>typeof t=="function",tt=t=>typeof t=="string",Xt=t=>typeof t=="boolean",Bn=t=>t!==null&&typeof t=="object",zG=Object.prototype.toString,eD=t=>zG.call(t),Mt=t=>eD(t)==="[object Object]",a_e=t=>t==null?"":On(t)||Mt(t)&&t.toString===zG?JSON.stringify(t,null,2):String(t);/*!
  * message-compiler v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const en={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function fw(t,e,n={}){const{domain:r,messages:i,args:s}=n,o=t,a=new SyntaxError(String(o));return a.code=t,e&&(a.location=e),a.domain=r,a}function l_e(t){throw t}function u_e(t,e,n){return{line:t,column:e,offset:n}}function ZE(t,e,n){const r={start:t,end:e};return n!=null&&(r.source=n),r}const Ka=" ",c_e="\r",Vi=`
`,f_e=String.fromCharCode(8232),h_e=String.fromCharCode(8233);function d_e(t){const e=t;let n=0,r=1,i=1,s=0;const o=E=>e[E]===c_e&&e[E+1]===Vi,a=E=>e[E]===Vi,l=E=>e[E]===h_e,u=E=>e[E]===f_e,c=E=>o(E)||a(E)||l(E)||u(E),f=()=>n,h=()=>r,d=()=>i,p=()=>s,g=E=>o(E)||l(E)||u(E)?Vi:e[E],x=()=>g(n),_=()=>g(n+s);function m(){return s=0,c(n)&&(r++,i=0),o(n)&&n++,n++,i++,e[n]}function v(){return o(n+s)&&s++,s++,e[n+s]}function b(){n=0,r=1,i=1,s=0}function w(E=0){s=E}function A(){const E=n+s;for(;E!==n;)m();s=0}return{index:f,line:h,column:d,peekOffset:p,charAt:g,currentChar:x,currentPeek:_,next:m,peek:v,reset:b,resetPeek:w,skipToPeek:A}}const Zl=void 0,Fk="'",p_e="tokenizer";function g_e(t,e={}){const n=e.location!==!1,r=d_e(t),i=()=>r.index(),s=()=>u_e(r.line(),r.column(),r.index()),o=s(),a=i(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=e;function f(R,B,j,...se){const Y=u();if(B.column+=j,B.offset+=j,c){const G=ZE(Y.startLoc,B),le=fw(R,G,{domain:p_e,args:se});c(le)}}function h(R,B,j){R.endLoc=s(),R.currentType=B;const se={type:B};return n&&(se.loc=ZE(R.startLoc,R.endLoc)),j!=null&&(se.value=j),se}const d=R=>h(R,14);function p(R,B){return R.currentChar()===B?(R.next(),B):(f(en.EXPECTED_TOKEN,s(),0,B),"")}function g(R){let B="";for(;R.currentPeek()===Ka||R.currentPeek()===Vi;)B+=R.currentPeek(),R.peek();return B}function x(R){const B=g(R);return R.skipToPeek(),B}function _(R){if(R===Zl)return!1;const B=R.charCodeAt(0);return B>=97&&B<=122||B>=65&&B<=90||B===95}function m(R){if(R===Zl)return!1;const B=R.charCodeAt(0);return B>=48&&B<=57}function v(R,B){const{currentType:j}=B;if(j!==2)return!1;g(R);const se=_(R.currentPeek());return R.resetPeek(),se}function b(R,B){const{currentType:j}=B;if(j!==2)return!1;g(R);const se=R.currentPeek()==="-"?R.peek():R.currentPeek(),Y=m(se);return R.resetPeek(),Y}function w(R,B){const{currentType:j}=B;if(j!==2)return!1;g(R);const se=R.currentPeek()===Fk;return R.resetPeek(),se}function A(R,B){const{currentType:j}=B;if(j!==8)return!1;g(R);const se=R.currentPeek()===".";return R.resetPeek(),se}function E(R,B){const{currentType:j}=B;if(j!==9)return!1;g(R);const se=_(R.currentPeek());return R.resetPeek(),se}function S(R,B){const{currentType:j}=B;if(!(j===8||j===12))return!1;g(R);const se=R.currentPeek()===":";return R.resetPeek(),se}function C(R,B){const{currentType:j}=B;if(j!==10)return!1;const se=()=>{const G=R.currentPeek();return G==="{"?_(R.peek()):G==="@"||G==="%"||G==="|"||G===":"||G==="."||G===Ka||!G?!1:G===Vi?(R.peek(),se()):_(G)},Y=se();return R.resetPeek(),Y}function M(R){g(R);const B=R.currentPeek()==="|";return R.resetPeek(),B}function D(R){const B=g(R),j=R.currentPeek()==="%"&&R.peek()==="{";return R.resetPeek(),{isModulo:j,hasSpace:B.length>0}}function T(R,B=!0){const j=(Y=!1,G="",le=!1)=>{const ge=R.currentPeek();return ge==="{"?G==="%"?!1:Y:ge==="@"||!ge?G==="%"?!0:Y:ge==="%"?(R.peek(),j(Y,"%",!0)):ge==="|"?G==="%"||le?!0:!(G===Ka||G===Vi):ge===Ka?(R.peek(),j(!0,Ka,le)):ge===Vi?(R.peek(),j(!0,Vi,le)):!0},se=j();return B&&R.resetPeek(),se}function L(R,B){const j=R.currentChar();return j===Zl?Zl:B(j)?(R.next(),j):null}function F(R){return L(R,j=>{const se=j.charCodeAt(0);return se>=97&&se<=122||se>=65&&se<=90||se>=48&&se<=57||se===95||se===36})}function k(R){return L(R,j=>{const se=j.charCodeAt(0);return se>=48&&se<=57})}function I(R){return L(R,j=>{const se=j.charCodeAt(0);return se>=48&&se<=57||se>=65&&se<=70||se>=97&&se<=102})}function O(R){let B="",j="";for(;B=k(R);)j+=B;return j}function $(R){x(R);const B=R.currentChar();return B!=="%"&&f(en.EXPECTED_TOKEN,s(),0,B),R.next(),"%"}function N(R){let B="";for(;;){const j=R.currentChar();if(j==="{"||j==="}"||j==="@"||j==="|"||!j)break;if(j==="%")if(T(R))B+=j,R.next();else break;else if(j===Ka||j===Vi)if(T(R))B+=j,R.next();else{if(M(R))break;B+=j,R.next()}else B+=j,R.next()}return B}function W(R){x(R);let B="",j="";for(;B=F(R);)j+=B;return R.currentChar()===Zl&&f(en.UNTERMINATED_CLOSING_BRACE,s(),0),j}function H(R){x(R);let B="";return R.currentChar()==="-"?(R.next(),B+=`-${O(R)}`):B+=O(R),R.currentChar()===Zl&&f(en.UNTERMINATED_CLOSING_BRACE,s(),0),B}function K(R){x(R),p(R,"'");let B="",j="";const se=G=>G!==Fk&&G!==Vi;for(;B=L(R,se);)B==="\\"?j+=ee(R):j+=B;const Y=R.currentChar();return Y===Vi||Y===Zl?(f(en.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,s(),0),Y===Vi&&(R.next(),p(R,"'")),j):(p(R,"'"),j)}function ee(R){const B=R.currentChar();switch(B){case"\\":case"'":return R.next(),`\\${B}`;case"u":return Z(R,B,4);case"U":return Z(R,B,6);default:return f(en.UNKNOWN_ESCAPE_SEQUENCE,s(),0,B),""}}function Z(R,B,j){p(R,B);let se="";for(let Y=0;Y<j;Y++){const G=I(R);if(!G){f(en.INVALID_UNICODE_ESCAPE_SEQUENCE,s(),0,`\\${B}${se}${R.currentChar()}`);break}se+=G}return`\\${B}${se}`}function J(R){x(R);let B="",j="";const se=Y=>Y!=="{"&&Y!=="}"&&Y!==Ka&&Y!==Vi;for(;B=L(R,se);)j+=B;return j}function X(R){let B="",j="";for(;B=F(R);)j+=B;return j}function Q(R){const B=(j=!1,se)=>{const Y=R.currentChar();return Y==="{"||Y==="%"||Y==="@"||Y==="|"||!Y||Y===Ka?se:Y===Vi?(se+=Y,R.next(),B(j,se)):(se+=Y,R.next(),B(!0,se))};return B(!1,"")}function oe(R){x(R);const B=p(R,"|");return x(R),B}function he(R,B){let j=null;switch(R.currentChar()){case"{":return B.braceNest>=1&&f(en.NOT_ALLOW_NEST_PLACEHOLDER,s(),0),R.next(),j=h(B,2,"{"),x(R),B.braceNest++,j;case"}":return B.braceNest>0&&B.currentType===2&&f(en.EMPTY_PLACEHOLDER,s(),0),R.next(),j=h(B,3,"}"),B.braceNest--,B.braceNest>0&&x(R),B.inLinked&&B.braceNest===0&&(B.inLinked=!1),j;case"@":return B.braceNest>0&&f(en.UNTERMINATED_CLOSING_BRACE,s(),0),j=ve(R,B)||d(B),B.braceNest=0,j;default:let Y=!0,G=!0,le=!0;if(M(R))return B.braceNest>0&&f(en.UNTERMINATED_CLOSING_BRACE,s(),0),j=h(B,1,oe(R)),B.braceNest=0,B.inLinked=!1,j;if(B.braceNest>0&&(B.currentType===5||B.currentType===6||B.currentType===7))return f(en.UNTERMINATED_CLOSING_BRACE,s(),0),B.braceNest=0,ye(R,B);if(Y=v(R,B))return j=h(B,5,W(R)),x(R),j;if(G=b(R,B))return j=h(B,6,H(R)),x(R),j;if(le=w(R,B))return j=h(B,7,K(R)),x(R),j;if(!Y&&!G&&!le)return j=h(B,13,J(R)),f(en.INVALID_TOKEN_IN_PLACEHOLDER,s(),0,j.value),x(R),j;break}return j}function ve(R,B){const{currentType:j}=B;let se=null;const Y=R.currentChar();switch((j===8||j===9||j===12||j===10)&&(Y===Vi||Y===Ka)&&f(en.INVALID_LINKED_FORMAT,s(),0),Y){case"@":return R.next(),se=h(B,8,"@"),B.inLinked=!0,se;case".":return x(R),R.next(),h(B,9,".");case":":return x(R),R.next(),h(B,10,":");default:return M(R)?(se=h(B,1,oe(R)),B.braceNest=0,B.inLinked=!1,se):A(R,B)||S(R,B)?(x(R),ve(R,B)):E(R,B)?(x(R),h(B,12,X(R))):C(R,B)?(x(R),Y==="{"?he(R,B)||se:h(B,11,Q(R))):(j===8&&f(en.INVALID_LINKED_FORMAT,s(),0),B.braceNest=0,B.inLinked=!1,ye(R,B))}}function ye(R,B){let j={type:14};if(B.braceNest>0)return he(R,B)||d(B);if(B.inLinked)return ve(R,B)||d(B);switch(R.currentChar()){case"{":return he(R,B)||d(B);case"}":return f(en.UNBALANCED_CLOSING_BRACE,s(),0),R.next(),h(B,3,"}");case"@":return ve(R,B)||d(B);default:if(M(R))return j=h(B,1,oe(R)),B.braceNest=0,B.inLinked=!1,j;const{isModulo:Y,hasSpace:G}=D(R);if(Y)return G?h(B,0,N(R)):h(B,4,$(R));if(T(R))return h(B,0,N(R));break}return j}function V(){const{currentType:R,offset:B,startLoc:j,endLoc:se}=l;return l.lastType=R,l.lastOffset=B,l.lastStartLoc=j,l.lastEndLoc=se,l.offset=i(),l.startLoc=s(),r.currentChar()===Zl?h(l,14):ye(r,l)}return{nextToken:V,currentOffset:i,currentPosition:s,context:u}}const m_e="parser",v_e=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function y_e(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"\uFFFD"}}}function __e(t={}){const e=t.location!==!1,{onError:n}=t;function r(_,m,v,b,...w){const A=_.currentPosition();if(A.offset+=b,A.column+=b,n){const E=ZE(v,A),S=fw(m,E,{domain:m_e,args:w});n(S)}}function i(_,m,v){const b={type:_,start:m,end:m};return e&&(b.loc={start:v,end:v}),b}function s(_,m,v,b){_.end=m,b&&(_.type=b),e&&_.loc&&(_.loc.end=v)}function o(_,m){const v=_.context(),b=i(3,v.offset,v.startLoc);return b.value=m,s(b,_.currentOffset(),_.currentPosition()),b}function a(_,m){const v=_.context(),{lastOffset:b,lastStartLoc:w}=v,A=i(5,b,w);return A.index=parseInt(m,10),_.nextToken(),s(A,_.currentOffset(),_.currentPosition()),A}function l(_,m){const v=_.context(),{lastOffset:b,lastStartLoc:w}=v,A=i(4,b,w);return A.key=m,_.nextToken(),s(A,_.currentOffset(),_.currentPosition()),A}function u(_,m){const v=_.context(),{lastOffset:b,lastStartLoc:w}=v,A=i(9,b,w);return A.value=m.replace(v_e,y_e),_.nextToken(),s(A,_.currentOffset(),_.currentPosition()),A}function c(_){const m=_.nextToken(),v=_.context(),{lastOffset:b,lastStartLoc:w}=v,A=i(8,b,w);return m.type!==12?(r(_,en.UNEXPECTED_EMPTY_LINKED_MODIFIER,v.lastStartLoc,0),A.value="",s(A,b,w),{nextConsumeToken:m,node:A}):(m.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,Zo(m)),A.value=m.value||"",s(A,_.currentOffset(),_.currentPosition()),{node:A})}function f(_,m){const v=_.context(),b=i(7,v.offset,v.startLoc);return b.value=m,s(b,_.currentOffset(),_.currentPosition()),b}function h(_){const m=_.context(),v=i(6,m.offset,m.startLoc);let b=_.nextToken();if(b.type===9){const w=c(_);v.modifier=w.node,b=w.nextConsumeToken||_.nextToken()}switch(b.type!==10&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(b)),b=_.nextToken(),b.type===2&&(b=_.nextToken()),b.type){case 11:b.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(b)),v.key=f(_,b.value||"");break;case 5:b.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(b)),v.key=l(_,b.value||"");break;case 6:b.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(b)),v.key=a(_,b.value||"");break;case 7:b.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(b)),v.key=u(_,b.value||"");break;default:r(_,en.UNEXPECTED_EMPTY_LINKED_KEY,m.lastStartLoc,0);const w=_.context(),A=i(7,w.offset,w.startLoc);return A.value="",s(A,w.offset,w.startLoc),v.key=A,s(v,w.offset,w.startLoc),{nextConsumeToken:b,node:v}}return s(v,_.currentOffset(),_.currentPosition()),{node:v}}function d(_){const m=_.context(),v=m.currentType===1?_.currentOffset():m.offset,b=m.currentType===1?m.endLoc:m.startLoc,w=i(2,v,b);w.items=[];let A=null;do{const C=A||_.nextToken();switch(A=null,C.type){case 0:C.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(C)),w.items.push(o(_,C.value||""));break;case 6:C.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(C)),w.items.push(a(_,C.value||""));break;case 5:C.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(C)),w.items.push(l(_,C.value||""));break;case 7:C.value==null&&r(_,en.UNEXPECTED_LEXICAL_ANALYSIS,m.lastStartLoc,0,Zo(C)),w.items.push(u(_,C.value||""));break;case 8:const M=h(_);w.items.push(M.node),A=M.nextConsumeToken||null;break}}while(m.currentType!==14&&m.currentType!==1);const E=m.currentType===1?m.lastOffset:_.currentOffset(),S=m.currentType===1?m.lastEndLoc:_.currentPosition();return s(w,E,S),w}function p(_,m,v,b){const w=_.context();let A=b.items.length===0;const E=i(1,m,v);E.cases=[],E.cases.push(b);do{const S=d(_);A||(A=S.items.length===0),E.cases.push(S)}while(w.currentType!==14);return A&&r(_,en.MUST_HAVE_MESSAGES_IN_PLURAL,v,0),s(E,_.currentOffset(),_.currentPosition()),E}function g(_){const m=_.context(),{offset:v,startLoc:b}=m,w=d(_);return m.currentType===14?w:p(_,v,b,w)}function x(_){const m=g_e(_,Jr({},t)),v=m.context(),b=i(0,v.offset,v.startLoc);return e&&b.loc&&(b.loc.source=_),b.body=g(m),v.currentType!==14&&r(m,en.UNEXPECTED_LEXICAL_ANALYSIS,v.lastStartLoc,0,_[v.offset]||""),s(b,m.currentOffset(),m.currentPosition()),b}return{parse:x}}function Zo(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"\u2026":e}function w_e(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:s=>(n.helpers.add(s),s)}}function Ik(t,e){for(let n=0;n<t.length;n++)tD(t[n],e)}function tD(t,e){switch(t.type){case 1:Ik(t.cases,e),e.helper("plural");break;case 2:Ik(t.items,e);break;case 6:tD(t.key,e),e.helper("linked"),e.helper("type");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function b_e(t,e={}){const n=w_e(t);n.helper("normalize"),t.body&&tD(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function x_e(t,e){const{sourceMap:n,filename:r,breakLineCode:i,needIndent:s}=e,o={source:t.loc.source,filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:s,indentLevel:0},a=()=>o;function l(g,x){o.code+=g}function u(g,x=!0){const _=x?i:"";l(s?_+"  ".repeat(g):_)}function c(g=!0){const x=++o.indentLevel;g&&u(x)}function f(g=!0){const x=--o.indentLevel;g&&u(x)}function h(){u(o.indentLevel)}return{context:a,push:l,indent:c,deindent:f,newline:h,helper:g=>`_${g}`,needIndent:()=>o.needIndent}}function S_e(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),Sd(t,e.key),e.modifier?(t.push(", "),Sd(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function A_e(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const i=e.items.length;for(let s=0;s<i&&(Sd(t,e.items[s]),s!==i-1);s++)t.push(", ");t.deindent(r()),t.push("])")}function E_e(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const i=e.cases.length;for(let s=0;s<i&&(Sd(t,e.cases[s]),s!==i-1);s++)t.push(", ");t.deindent(r()),t.push("])")}}function C_e(t,e){e.body?Sd(t,e.body):t.push("null")}function Sd(t,e){const{helper:n}=t;switch(e.type){case 0:C_e(t,e);break;case 1:E_e(t,e);break;case 2:A_e(t,e);break;case 6:S_e(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const M_e=(t,e={})=>{const n=tt(e.mode)?e.mode:"normal",r=tt(e.filename)?e.filename:"message.intl",i=!!e.sourceMap,s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",a=t.helpers||[],l=x_e(t,{mode:n,filename:r,sourceMap:i,breakLineCode:s,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${a.map(f=>`${f}: _${f}`).join(", ")} } = ctx`),l.newline()),l.push("return "),Sd(l,t),l.deindent(o),l.push("}");const{code:u,map:c}=l.context();return{ast:t,code:u,map:c?c.toJSON():void 0}};function D_e(t,e={}){const n=Jr({},e),i=__e(n).parse(t);return b_e(i,n),M_e(i,n)}/*!
  * devtools-if v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const GG={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const uc=[];uc[0]={w:[0],i:[3,0],["["]:[4],o:[7]};uc[1]={w:[1],["."]:[2],["["]:[4],o:[7]};uc[2]={w:[2],i:[3,0],[0]:[3,0]};uc[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};uc[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};uc[5]={["'"]:[4,0],o:8,l:[5,0]};uc[6]={['"']:[4,0],o:8,l:[6,0]};const T_e=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function P_e(t){return T_e.test(t)}function L_e(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function F_e(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function I_e(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:P_e(e)?L_e(e):"*"+e}function k_e(t){const e=[];let n=-1,r=0,i=0,s,o,a,l,u,c,f;const h=[];h[0]=()=>{o===void 0?o=a:o+=a},h[1]=()=>{o!==void 0&&(e.push(o),o=void 0)},h[2]=()=>{h[0](),i++},h[3]=()=>{if(i>0)i--,r=4,h[0]();else{if(i=0,o===void 0||(o=I_e(o),o===!1))return!1;h[1]()}};function d(){const p=t[n+1];if(r===5&&p==="'"||r===6&&p==='"')return n++,a="\\"+p,h[0](),!0}for(;r!==null;)if(n++,s=t[n],!(s==="\\"&&d())){if(l=F_e(s),f=uc[r],u=f[l]||f.l||8,u===8||(r=u[0],u[1]!==void 0&&(c=h[u[1]],c&&(a=s,c()===!1))))return;if(r===7)return e}}const kk=new Map;function R_e(t,e){return Bn(t)?t[e]:null}function O_e(t,e){if(!Bn(t))return null;let n=kk.get(e);if(n||(n=k_e(e),n&&kk.set(e,n)),!n)return null;const r=n.length;let i=t,s=0;for(;s<r;){const o=i[n[s]];if(o===void 0)return null;i=o,s++}return i}const B_e=t=>t,N_e=t=>"",V_e="text",z_e=t=>t.length===0?"":t.join(""),G_e=a_e;function Rk(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function U_e(t){const e=Ir(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Ir(t.named.count)||Ir(t.named.n))?Ir(t.named.count)?t.named.count:Ir(t.named.n)?t.named.n:e:e}function H_e(t,e){e.count||(e.count=t),e.n||(e.n=t)}function W_e(t={}){const e=t.locale,n=U_e(t),r=Bn(t.pluralRules)&&tt(e)&&pr(t.pluralRules[e])?t.pluralRules[e]:Rk,i=Bn(t.pluralRules)&&tt(e)&&pr(t.pluralRules[e])?Rk:void 0,s=_=>_[r(n,_.length,i)],o=t.list||[],a=_=>o[_],l=t.named||{};Ir(t.pluralIndex)&&H_e(n,l);const u=_=>l[_];function c(_){const m=pr(t.messages)?t.messages(_):Bn(t.messages)?t.messages[_]:!1;return m||(t.parent?t.parent.message(_):N_e)}const f=_=>t.modifiers?t.modifiers[_]:B_e,h=Mt(t.processor)&&pr(t.processor.normalize)?t.processor.normalize:z_e,d=Mt(t.processor)&&pr(t.processor.interpolate)?t.processor.interpolate:G_e,p=Mt(t.processor)&&tt(t.processor.type)?t.processor.type:V_e,x={list:a,named:u,plural:s,linked:(_,...m)=>{const[v,b]=m;let w="text",A="";m.length===1?Bn(v)?(A=v.modifier||A,w=v.type||w):tt(v)&&(A=v||A):m.length===2&&(tt(v)&&(A=v||A),tt(b)&&(w=b||w));let E=c(_)(x);return w==="vnode"&&On(E)&&A&&(E=E[0]),A?f(A)(E,w):E},message:c,type:p,interpolate:d,normalize:h};return x}let Pm=null;function $_e(t){Pm=t}function X_e(t,e,n){Pm&&Pm.emit(GG.I18nInit,{timestamp:Date.now(),i18n:t,version:e,meta:n})}const Y_e=j_e(GG.FunctionTranslate);function j_e(t){return e=>Pm&&Pm.emit(t,e)}const q_e={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,__EXTEND_POINT__:7};function J_e(t,e,n){return[...new Set([n,...On(e)?e:Bn(e)?Object.keys(e):tt(e)?[e]:[n]])]}function UG(t,e,n){const r=tt(n)?n:hv,i=t;i.__localeChainCache||(i.__localeChainCache=new Map);let s=i.__localeChainCache.get(r);if(!s){s=[];let o=[n];for(;On(o);)o=Ok(s,o,e);const a=On(e)||!Mt(e)?e:e.default?e.default:null;o=tt(a)?[a]:a,On(o)&&Ok(s,o,!1),i.__localeChainCache.set(r,s)}return s}function Ok(t,e,n){let r=!0;for(let i=0;i<e.length&&Xt(r);i++){const s=e[i];tt(s)&&(r=K_e(t,e[i],n))}return r}function K_e(t,e,n){let r;const i=e.split("-");do{const s=i.join("-");r=Z_e(t,s,n),i.splice(-1,1)}while(i.length&&r===!0);return r}function Z_e(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const i=e.replace(/!/g,"");t.push(i),(On(n)||Mt(n))&&n[i]&&(r=n[i])}return r}const Q_e="9.2.2",hw=-1,hv="en-US",Bk="",Nk=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function ewe(){return{upper:(t,e)=>e==="text"&&tt(t)?t.toUpperCase():e==="vnode"&&Bn(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&tt(t)?t.toLowerCase():e==="vnode"&&Bn(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&tt(t)?Nk(t):e==="vnode"&&Bn(t)&&"__v_isVNode"in t?Nk(t.children):t}}let HG;function twe(t){HG=t}let WG;function nwe(t){WG=t}let $G;function rwe(t){$G=t}let XG=null;const Vk=t=>{XG=t},iwe=()=>XG;let YG=null;const zk=t=>{YG=t},swe=()=>YG;let Gk=0;function owe(t={}){const e=tt(t.version)?t.version:Q_e,n=tt(t.locale)?t.locale:hv,r=On(t.fallbackLocale)||Mt(t.fallbackLocale)||tt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,i=Mt(t.messages)?t.messages:{[n]:{}},s=Mt(t.datetimeFormats)?t.datetimeFormats:{[n]:{}},o=Mt(t.numberFormats)?t.numberFormats:{[n]:{}},a=Jr({},t.modifiers||{},ewe()),l=t.pluralRules||{},u=pr(t.missing)?t.missing:null,c=Xt(t.missingWarn)||Xu(t.missingWarn)?t.missingWarn:!0,f=Xt(t.fallbackWarn)||Xu(t.fallbackWarn)?t.fallbackWarn:!0,h=!!t.fallbackFormat,d=!!t.unresolving,p=pr(t.postTranslation)?t.postTranslation:null,g=Mt(t.processor)?t.processor:null,x=Xt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,_=!!t.escapeParameter,m=pr(t.messageCompiler)?t.messageCompiler:HG,v=pr(t.messageResolver)?t.messageResolver:WG||R_e,b=pr(t.localeFallbacker)?t.localeFallbacker:$G||J_e,w=Bn(t.fallbackContext)?t.fallbackContext:void 0,A=pr(t.onWarn)?t.onWarn:s_e,E=t,S=Bn(E.__datetimeFormatters)?E.__datetimeFormatters:new Map,C=Bn(E.__numberFormatters)?E.__numberFormatters:new Map,M=Bn(E.__meta)?E.__meta:{};Gk++;const D={version:e,cid:Gk,locale:n,fallbackLocale:r,messages:i,modifiers:a,pluralRules:l,missing:u,missingWarn:c,fallbackWarn:f,fallbackFormat:h,unresolving:d,postTranslation:p,processor:g,warnHtmlMessage:x,escapeParameter:_,messageCompiler:m,messageResolver:v,localeFallbacker:b,fallbackContext:w,onWarn:A,__meta:M};return D.datetimeFormats=s,D.numberFormats=o,D.__datetimeFormatters=S,D.__numberFormatters=C,__INTLIFY_PROD_DEVTOOLS__&&X_e(D,e,M),D}function nD(t,e,n,r,i){const{missing:s,onWarn:o}=t;if(s!==null){const a=s(t,n,e,i);return tt(a)?a:e}else return e}function Wp(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}const awe=t=>t;let Uk=Object.create(null);function lwe(t,e={}){{const r=(e.onCacheKey||awe)(t),i=Uk[r];if(i)return i;let s=!1;const o=e.onError||l_e;e.onError=u=>{s=!0,o(u)};const{code:a}=D_e(t,e),l=new Function(`return ${a}`)();return s?l:Uk[r]=l}}let jG=en.__EXTEND_POINT__;const zS=()=>++jG,Fh={INVALID_ARGUMENT:jG,INVALID_DATE_ARGUMENT:zS(),INVALID_ISO_DATE_ARGUMENT:zS(),__EXTEND_POINT__:zS()};function Ih(t){return fw(t,null,void 0)}const Hk=()=>"",ua=t=>pr(t);function Wk(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:i,messageCompiler:s,fallbackLocale:o,messages:a}=t,[l,u]=QE(...e),c=Xt(u.missingWarn)?u.missingWarn:t.missingWarn,f=Xt(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,h=Xt(u.escapeParameter)?u.escapeParameter:t.escapeParameter,d=!!u.resolvedMessage,p=tt(u.default)||Xt(u.default)?Xt(u.default)?s?l:()=>l:u.default:n?s?l:()=>l:"",g=n||p!=="",x=tt(u.locale)?u.locale:t.locale;h&&uwe(u);let[_,m,v]=d?[l,x,a[x]||{}]:qG(t,l,x,o,f,c),b=_,w=l;if(!d&&!(tt(b)||ua(b))&&g&&(b=p,w=b),!d&&(!(tt(b)||ua(b))||!tt(m)))return i?hw:l;let A=!1;const E=()=>{A=!0},S=ua(b)?b:JG(t,l,m,b,w,E);if(A)return b;const C=hwe(t,m,v,u),M=W_e(C),D=cwe(t,S,M),T=r?r(D,l):D;if(__INTLIFY_PROD_DEVTOOLS__){const L={timestamp:Date.now(),key:tt(l)?l:ua(b)?b.key:"",locale:m||(ua(b)?b.locale:""),format:tt(b)?b:ua(b)?b.source:"",message:T};L.meta=Jr({},t.__meta,iwe()||{}),Y_e(L)}return T}function uwe(t){On(t.list)?t.list=t.list.map(e=>tt(e)?Lk(e):e):Bn(t.named)&&Object.keys(t.named).forEach(e=>{tt(t.named[e])&&(t.named[e]=Lk(t.named[e]))})}function qG(t,e,n,r,i,s){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=t,c=u(t,r,n);let f={},h,d=null;const p="translate";for(let g=0;g<c.length&&(h=c[g],f=o[h]||{},(d=l(f,e))===null&&(d=f[e]),!(tt(d)||pr(d)));g++){const x=nD(t,e,h,s,p);x!==e&&(d=x)}return[d,h,f]}function JG(t,e,n,r,i,s){const{messageCompiler:o,warnHtmlMessage:a}=t;if(ua(r)){const u=r;return u.locale=u.locale||n,u.key=u.key||e,u}if(o==null){const u=()=>r;return u.locale=n,u.key=e,u}const l=o(r,fwe(t,n,i,r,a,s));return l.locale=n,l.key=e,l.source=r,l}function cwe(t,e,n){return e(n)}function QE(...t){const[e,n,r]=t,i={};if(!tt(e)&&!Ir(e)&&!ua(e))throw Ih(Fh.INVALID_ARGUMENT);const s=Ir(e)?String(e):(ua(e),e);return Ir(n)?i.plural=n:tt(n)?i.default=n:Mt(n)&&!cw(n)?i.named=n:On(n)&&(i.list=n),Ir(r)?i.plural=r:tt(r)?i.default=r:Mt(r)&&Jr(i,r),[s,i]}function fwe(t,e,n,r,i,s){return{warnHtmlMessage:i,onError:o=>{throw s&&s(o),o},onCacheKey:o=>n_e(e,n,o)}}function hwe(t,e,n,r){const{modifiers:i,pluralRules:s,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:c}=t,h={locale:e,modifiers:i,pluralRules:s,messages:d=>{let p=o(n,d);if(p==null&&c){const[,,g]=qG(c,d,e,a,l,u);p=o(g,d)}if(tt(p)){let g=!1;const _=JG(t,d,e,p,d,()=>{g=!0});return g?Hk:_}else return ua(p)?p:Hk}};return t.processor&&(h.processor=t.processor),r.list&&(h.list=r.list),r.named&&(h.named=r.named),Ir(r.plural)&&(h.pluralIndex=r.plural),h}function $k(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:i,onWarn:s,localeFallbacker:o}=t,{__datetimeFormatters:a}=t,[l,u,c,f]=eC(...e),h=Xt(c.missingWarn)?c.missingWarn:t.missingWarn;Xt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const d=!!c.part,p=tt(c.locale)?c.locale:t.locale,g=o(t,i,p);if(!tt(l)||l==="")return new Intl.DateTimeFormat(p,f).format(u);let x={},_,m=null;const v="datetime format";for(let A=0;A<g.length&&(_=g[A],x=n[_]||{},m=x[l],!Mt(m));A++)nD(t,l,_,h,v);if(!Mt(m)||!tt(_))return r?hw:l;let b=`${_}__${l}`;cw(f)||(b=`${b}__${JSON.stringify(f)}`);let w=a.get(b);return w||(w=new Intl.DateTimeFormat(_,Jr({},m,f)),a.set(b,w)),d?w.formatToParts(u):w.format(u)}const KG=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function eC(...t){const[e,n,r,i]=t,s={};let o={},a;if(tt(e)){const l=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Ih(Fh.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw Ih(Fh.INVALID_ISO_DATE_ARGUMENT)}}else if(i_e(e)){if(isNaN(e.getTime()))throw Ih(Fh.INVALID_DATE_ARGUMENT);a=e}else if(Ir(e))a=e;else throw Ih(Fh.INVALID_ARGUMENT);return tt(n)?s.key=n:Mt(n)&&Object.keys(n).forEach(l=>{KG.includes(l)?o[l]=n[l]:s[l]=n[l]}),tt(r)?s.locale=r:Mt(r)&&(o=r),Mt(i)&&(o=i),[s.key||"",a,s,o]}function Xk(t,e,n){const r=t;for(const i in n){const s=`${e}__${i}`;!r.__datetimeFormatters.has(s)||r.__datetimeFormatters.delete(s)}}function Yk(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:i,onWarn:s,localeFallbacker:o}=t,{__numberFormatters:a}=t,[l,u,c,f]=tC(...e),h=Xt(c.missingWarn)?c.missingWarn:t.missingWarn;Xt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const d=!!c.part,p=tt(c.locale)?c.locale:t.locale,g=o(t,i,p);if(!tt(l)||l==="")return new Intl.NumberFormat(p,f).format(u);let x={},_,m=null;const v="number format";for(let A=0;A<g.length&&(_=g[A],x=n[_]||{},m=x[l],!Mt(m));A++)nD(t,l,_,h,v);if(!Mt(m)||!tt(_))return r?hw:l;let b=`${_}__${l}`;cw(f)||(b=`${b}__${JSON.stringify(f)}`);let w=a.get(b);return w||(w=new Intl.NumberFormat(_,Jr({},m,f)),a.set(b,w)),d?w.formatToParts(u):w.format(u)}const ZG=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function tC(...t){const[e,n,r,i]=t,s={};let o={};if(!Ir(e))throw Ih(Fh.INVALID_ARGUMENT);const a=e;return tt(n)?s.key=n:Mt(n)&&Object.keys(n).forEach(l=>{ZG.includes(l)?o[l]=n[l]:s[l]=n[l]}),tt(r)?s.locale=r:Mt(r)&&(o=r),Mt(i)&&(o=i),[s.key||"",a,s,o]}function jk(t,e,n){const r=t;for(const i in n){const s=`${e}__${i}`;!r.__numberFormatters.has(s)||r.__numberFormatters.delete(s)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(kg().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const dwe="9.2.2";function pwe(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(kg().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(kg().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(kg().__INTLIFY_PROD_DEVTOOLS__=!1)}q_e.__EXTEND_POINT__;let QG=en.__EXTEND_POINT__;const Qi=()=>++QG,Ar={UNEXPECTED_RETURN_TYPE:QG,INVALID_ARGUMENT:Qi(),MUST_BE_CALL_SETUP_TOP:Qi(),NOT_INSLALLED:Qi(),NOT_AVAILABLE_IN_LEGACY_MODE:Qi(),REQUIRED_VALUE:Qi(),INVALID_VALUE:Qi(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Qi(),NOT_INSLALLED_WITH_PROVIDE:Qi(),UNEXPECTED_ERROR:Qi(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Qi(),BRIDGE_SUPPORT_VUE_2_ONLY:Qi(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Qi(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Qi(),__EXTEND_POINT__:Qi()};function Or(t,...e){return fw(t,null,void 0)}const nC=lc("__transrateVNode"),rC=lc("__datetimeParts"),iC=lc("__numberParts"),eU=lc("__setPluralRules");lc("__intlifyMeta");const tU=lc("__injectWithOption");function sC(t){if(!Bn(t))return t;for(const e in t)if(!!Q2(t,e))if(!e.includes("."))Bn(t[e])&&sC(t[e]);else{const n=e.split("."),r=n.length-1;let i=t;for(let s=0;s<r;s++)n[s]in i||(i[n[s]]={}),i=i[n[s]];i[n[r]]=t[e],delete t[e],Bn(i[n[r]])&&sC(i[n[r]])}return t}function dw(t,e){const{messages:n,__i18n:r,messageResolver:i,flatJson:s}=e,o=Mt(n)?n:On(r)?{}:{[t]:{}};if(On(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||{},Rg(u,o[l])):Rg(u,o)}else tt(a)&&Rg(JSON.parse(a),o)}),i==null&&s)for(const a in o)Q2(o,a)&&sC(o[a]);return o}const dy=t=>!Bn(t)||On(t);function Rg(t,e){if(dy(t)||dy(e))throw Or(Ar.INVALID_VALUE);for(const n in t)Q2(t,n)&&(dy(t[n])||dy(e[n])?e[n]=t[n]:Rg(t[n],e[n]))}function nU(t){return t.type}function rU(t,e,n){let r=Bn(e.messages)?e.messages:{};"__i18nGlobal"in n&&(r=dw(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const i=Object.keys(r);i.length&&i.forEach(s=>{t.mergeLocaleMessage(s,r[s])});{if(Bn(e.datetimeFormats)){const s=Object.keys(e.datetimeFormats);s.length&&s.forEach(o=>{t.mergeDateTimeFormat(o,e.datetimeFormats[o])})}if(Bn(e.numberFormats)){const s=Object.keys(e.numberFormats);s.length&&s.forEach(o=>{t.mergeNumberFormat(o,e.numberFormats[o])})}}}function qk(t){return P(Pd,null,t,0)}const Jk="__INTLIFY_META__";let Kk=0;function Zk(t){return(e,n,r,i)=>t(n,r,Aa()||void 0,i)}const gwe=()=>{const t=Aa();let e=null;return t&&(e=nU(t)[Jk])?{[Jk]:e}:null};function rD(t={},e){const{__root:n}=t,r=n===void 0;let i=Xt(t.inheritLocale)?t.inheritLocale:!0;const s=Se(n&&i?n.locale.value:tt(t.locale)?t.locale:hv),o=Se(n&&i?n.fallbackLocale.value:tt(t.fallbackLocale)||On(t.fallbackLocale)||Mt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s.value),a=Se(dw(s.value,t)),l=Se(Mt(t.datetimeFormats)?t.datetimeFormats:{[s.value]:{}}),u=Se(Mt(t.numberFormats)?t.numberFormats:{[s.value]:{}});let c=n?n.missingWarn:Xt(t.missingWarn)||Xu(t.missingWarn)?t.missingWarn:!0,f=n?n.fallbackWarn:Xt(t.fallbackWarn)||Xu(t.fallbackWarn)?t.fallbackWarn:!0,h=n?n.fallbackRoot:Xt(t.fallbackRoot)?t.fallbackRoot:!0,d=!!t.fallbackFormat,p=pr(t.missing)?t.missing:null,g=pr(t.missing)?Zk(t.missing):null,x=pr(t.postTranslation)?t.postTranslation:null,_=n?n.warnHtmlMessage:Xt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,m=!!t.escapeParameter;const v=n?n.modifiers:Mt(t.modifiers)?t.modifiers:{};let b=t.pluralRules||n&&n.pluralRules,w;w=(()=>{r&&zk(null);const ue={version:dwe,locale:s.value,fallbackLocale:o.value,messages:a.value,modifiers:v,pluralRules:b,missing:g===null?void 0:g,missingWarn:c,fallbackWarn:f,fallbackFormat:d,unresolving:!0,postTranslation:x===null?void 0:x,warnHtmlMessage:_,escapeParameter:m,messageResolver:t.messageResolver,__meta:{framework:"vue"}};ue.datetimeFormats=l.value,ue.numberFormats=u.value,ue.__datetimeFormatters=Mt(w)?w.__datetimeFormatters:void 0,ue.__numberFormatters=Mt(w)?w.__numberFormatters:void 0;const U=owe(ue);return r&&zk(U),U})(),Wp(w,s.value,o.value);function E(){return[s.value,o.value,a.value,l.value,u.value]}const S=re({get:()=>s.value,set:ue=>{s.value=ue,w.locale=s.value}}),C=re({get:()=>o.value,set:ue=>{o.value=ue,w.fallbackLocale=o.value,Wp(w,s.value,ue)}}),M=re(()=>a.value),D=re(()=>l.value),T=re(()=>u.value);function L(){return pr(x)?x:null}function F(ue){x=ue,w.postTranslation=ue}function k(){return p}function I(ue){ue!==null&&(g=Zk(ue)),p=ue,w.missing=g}const O=(ue,U,z,te,fe,ne)=>{E();let de;if(__INTLIFY_PROD_DEVTOOLS__)try{Vk(gwe()),r||(w.fallbackContext=n?swe():void 0),de=ue(w)}finally{Vk(null),r||(w.fallbackContext=void 0)}else de=ue(w);if(Ir(de)&&de===hw){const[pe,_e]=U();return n&&h?te(n):fe(pe)}else{if(ne(de))return de;throw Or(Ar.UNEXPECTED_RETURN_TYPE)}};function $(...ue){return O(U=>Reflect.apply(Wk,null,[U,...ue]),()=>QE(...ue),"translate",U=>Reflect.apply(U.t,U,[...ue]),U=>U,U=>tt(U))}function N(...ue){const[U,z,te]=ue;if(te&&!Bn(te))throw Or(Ar.INVALID_ARGUMENT);return $(U,z,Jr({resolvedMessage:!0},te||{}))}function W(...ue){return O(U=>Reflect.apply($k,null,[U,...ue]),()=>eC(...ue),"datetime format",U=>Reflect.apply(U.d,U,[...ue]),()=>Bk,U=>tt(U))}function H(...ue){return O(U=>Reflect.apply(Yk,null,[U,...ue]),()=>tC(...ue),"number format",U=>Reflect.apply(U.n,U,[...ue]),()=>Bk,U=>tt(U))}function K(ue){return ue.map(U=>tt(U)||Ir(U)||Xt(U)?qk(String(U)):U)}const Z={normalize:K,interpolate:ue=>ue,type:"vnode"};function J(...ue){return O(U=>{let z;const te=U;try{te.processor=Z,z=Reflect.apply(Wk,null,[te,...ue])}finally{te.processor=null}return z},()=>QE(...ue),"translate",U=>U[nC](...ue),U=>[qk(U)],U=>On(U))}function X(...ue){return O(U=>Reflect.apply(Yk,null,[U,...ue]),()=>tC(...ue),"number format",U=>U[iC](...ue),()=>[],U=>tt(U)||On(U))}function Q(...ue){return O(U=>Reflect.apply($k,null,[U,...ue]),()=>eC(...ue),"datetime format",U=>U[rC](...ue),()=>[],U=>tt(U)||On(U))}function oe(ue){b=ue,w.pluralRules=b}function he(ue,U){const z=tt(U)?U:s.value,te=V(z);return w.messageResolver(te,ue)!==null}function ve(ue){let U=null;const z=UG(w,o.value,s.value);for(let te=0;te<z.length;te++){const fe=a.value[z[te]]||{},ne=w.messageResolver(fe,ue);if(ne!=null){U=ne;break}}return U}function ye(ue){const U=ve(ue);return U!=null?U:n?n.tm(ue)||{}:{}}function V(ue){return a.value[ue]||{}}function R(ue,U){a.value[ue]=U,w.messages=a.value}function B(ue,U){a.value[ue]=a.value[ue]||{},Rg(U,a.value[ue]),w.messages=a.value}function j(ue){return l.value[ue]||{}}function se(ue,U){l.value[ue]=U,w.datetimeFormats=l.value,Xk(w,ue,U)}function Y(ue,U){l.value[ue]=Jr(l.value[ue]||{},U),w.datetimeFormats=l.value,Xk(w,ue,U)}function G(ue){return u.value[ue]||{}}function le(ue,U){u.value[ue]=U,w.numberFormats=u.value,jk(w,ue,U)}function ge(ue,U){u.value[ue]=Jr(u.value[ue]||{},U),w.numberFormats=u.value,jk(w,ue,U)}Kk++,n&&KE&&(He(n.locale,ue=>{i&&(s.value=ue,w.locale=ue,Wp(w,s.value,o.value))}),He(n.fallbackLocale,ue=>{i&&(o.value=ue,w.fallbackLocale=ue,Wp(w,s.value,o.value))}));const ae={id:Kk,locale:S,fallbackLocale:C,get inheritLocale(){return i},set inheritLocale(ue){i=ue,ue&&n&&(s.value=n.locale.value,o.value=n.fallbackLocale.value,Wp(w,s.value,o.value))},get availableLocales(){return Object.keys(a.value).sort()},messages:M,get modifiers(){return v},get pluralRules(){return b||{}},get isGlobal(){return r},get missingWarn(){return c},set missingWarn(ue){c=ue,w.missingWarn=c},get fallbackWarn(){return f},set fallbackWarn(ue){f=ue,w.fallbackWarn=f},get fallbackRoot(){return h},set fallbackRoot(ue){h=ue},get fallbackFormat(){return d},set fallbackFormat(ue){d=ue,w.fallbackFormat=d},get warnHtmlMessage(){return _},set warnHtmlMessage(ue){_=ue,w.warnHtmlMessage=ue},get escapeParameter(){return m},set escapeParameter(ue){m=ue,w.escapeParameter=ue},t:$,getLocaleMessage:V,setLocaleMessage:R,mergeLocaleMessage:B,getPostTranslationHandler:L,setPostTranslationHandler:F,getMissingHandler:k,setMissingHandler:I,[eU]:oe};return ae.datetimeFormats=D,ae.numberFormats=T,ae.rt=N,ae.te=he,ae.tm=ye,ae.d=W,ae.n=H,ae.getDateTimeFormat=j,ae.setDateTimeFormat=se,ae.mergeDateTimeFormat=Y,ae.getNumberFormat=G,ae.setNumberFormat=le,ae.mergeNumberFormat=ge,ae[tU]=t.__injectWithOption,ae[nC]=J,ae[rC]=Q,ae[iC]=X,ae}function mwe(t){const e=tt(t.locale)?t.locale:hv,n=tt(t.fallbackLocale)||On(t.fallbackLocale)||Mt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=pr(t.missing)?t.missing:void 0,i=Xt(t.silentTranslationWarn)||Xu(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,s=Xt(t.silentFallbackWarn)||Xu(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,o=Xt(t.fallbackRoot)?t.fallbackRoot:!0,a=!!t.formatFallbackMessages,l=Mt(t.modifiers)?t.modifiers:{},u=t.pluralizationRules,c=pr(t.postTranslation)?t.postTranslation:void 0,f=tt(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,h=!!t.escapeParameterHtml,d=Xt(t.sync)?t.sync:!0;let p=t.messages;if(Mt(t.sharedMessages)){const w=t.sharedMessages;p=Object.keys(w).reduce((E,S)=>{const C=E[S]||(E[S]={});return Jr(C,w[S]),E},p||{})}const{__i18n:g,__root:x,__injectWithOption:_}=t,m=t.datetimeFormats,v=t.numberFormats,b=t.flatJson;return{locale:e,fallbackLocale:n,messages:p,flatJson:b,datetimeFormats:m,numberFormats:v,missing:r,missingWarn:i,fallbackWarn:s,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:c,warnHtmlMessage:f,escapeParameter:h,messageResolver:t.messageResolver,inheritLocale:d,__i18n:g,__root:x,__injectWithOption:_}}function oC(t={},e){{const n=rD(mwe(t)),r={id:n.id,get locale(){return n.locale.value},set locale(i){n.locale.value=i},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(i){n.fallbackLocale.value=i},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(i){},get missing(){return n.getMissingHandler()},set missing(i){n.setMissingHandler(i)},get silentTranslationWarn(){return Xt(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(i){n.missingWarn=Xt(i)?!i:i},get silentFallbackWarn(){return Xt(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(i){n.fallbackWarn=Xt(i)?!i:i},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(i){n.fallbackFormat=i},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(i){n.setPostTranslationHandler(i)},get sync(){return n.inheritLocale},set sync(i){n.inheritLocale=i},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){n.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(i){n.escapeParameter=i},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(i){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...i){const[s,o,a]=i,l={};let u=null,c=null;if(!tt(s))throw Or(Ar.INVALID_ARGUMENT);const f=s;return tt(o)?l.locale=o:On(o)?u=o:Mt(o)&&(c=o),On(a)?u=a:Mt(a)&&(c=a),Reflect.apply(n.t,n,[f,u||c||{},l])},rt(...i){return Reflect.apply(n.rt,n,[...i])},tc(...i){const[s,o,a]=i,l={plural:1};let u=null,c=null;if(!tt(s))throw Or(Ar.INVALID_ARGUMENT);const f=s;return tt(o)?l.locale=o:Ir(o)?l.plural=o:On(o)?u=o:Mt(o)&&(c=o),tt(a)?l.locale=a:On(a)?u=a:Mt(a)&&(c=a),Reflect.apply(n.t,n,[f,u||c||{},l])},te(i,s){return n.te(i,s)},tm(i){return n.tm(i)},getLocaleMessage(i){return n.getLocaleMessage(i)},setLocaleMessage(i,s){n.setLocaleMessage(i,s)},mergeLocaleMessage(i,s){n.mergeLocaleMessage(i,s)},d(...i){return Reflect.apply(n.d,n,[...i])},getDateTimeFormat(i){return n.getDateTimeFormat(i)},setDateTimeFormat(i,s){n.setDateTimeFormat(i,s)},mergeDateTimeFormat(i,s){n.mergeDateTimeFormat(i,s)},n(...i){return Reflect.apply(n.n,n,[...i])},getNumberFormat(i){return n.getNumberFormat(i)},setNumberFormat(i,s){n.setNumberFormat(i,s)},mergeNumberFormat(i,s){n.mergeNumberFormat(i,s)},getChoiceIndex(i,s){return-1},__onComponentInstanceCreated(i){const{componentInstanceCreatedListener:s}=t;s&&s(i,r)}};return r}}const iD={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function vwe({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,i)=>r=[...r,...On(i.children)?i.children:[i]],[]):e.reduce((n,r)=>{const i=t[r];return i&&(n[r]=i()),n},{})}function iU(t){return mt}const Qk={name:"i18n-t",props:Jr({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>Ir(t)||!isNaN(t)}},iD),setup(t,e){const{slots:n,attrs:r}=e,i=t.i18n||sD({useScope:t.scope,__useComponent:!0});return()=>{const s=Object.keys(n).filter(f=>f!=="_"),o={};t.locale&&(o.locale=t.locale),t.plural!==void 0&&(o.plural=tt(t.plural)?+t.plural:t.plural);const a=vwe(e,s),l=i[nC](t.keypath,a,o),u=Jr({},r),c=tt(t.tag)||Bn(t.tag)?t.tag:iU();return no(c,u,l)}}};function ywe(t){return On(t)&&!tt(t[0])}function sU(t,e,n,r){const{slots:i,attrs:s}=e;return()=>{const o={part:!0};let a={};t.locale&&(o.locale=t.locale),tt(t.format)?o.key=t.format:Bn(t.format)&&(tt(t.format.key)&&(o.key=t.format.key),a=Object.keys(t.format).reduce((h,d)=>n.includes(d)?Jr({},h,{[d]:t.format[d]}):h,{}));const l=r(t.value,o,a);let u=[o.key];On(l)?u=l.map((h,d)=>{const p=i[h.type],g=p?p({[h.type]:h.value,index:d,parts:l}):[h.value];return ywe(g)&&(g[0].key=`${h.type}-${d}`),g}):tt(l)&&(u=[l]);const c=Jr({},s),f=tt(t.tag)||Bn(t.tag)?t.tag:iU();return no(f,c,u)}}const eR={name:"i18n-n",props:Jr({value:{type:Number,required:!0},format:{type:[String,Object]}},iD),setup(t,e){const n=t.i18n||sD({useScope:"parent",__useComponent:!0});return sU(t,e,ZG,(...r)=>n[iC](...r))}},tR={name:"i18n-d",props:Jr({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},iD),setup(t,e){const n=t.i18n||sD({useScope:"parent",__useComponent:!0});return sU(t,e,KG,(...r)=>n[rC](...r))}};function _we(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function wwe(t){const e=o=>{const{instance:a,modifiers:l,value:u}=o;if(!a||!a.$)throw Or(Ar.UNEXPECTED_ERROR);const c=_we(t,a.$),f=nR(u);return[Reflect.apply(c.t,c,[...rR(f)]),c]};return{created:(o,a)=>{const[l,u]=e(a);KE&&t.global===u&&(o.__i18nWatcher=He(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{KE&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=nR(a);o.textContent=Reflect.apply(l.t,l,[...rR(u)])}},getSSRProps:o=>{const[a]=e(o);return{textContent:a}}}}function nR(t){if(tt(t))return{path:t};if(Mt(t)){if(!("path"in t))throw Or(Ar.REQUIRED_VALUE,"path");return t}else throw Or(Ar.INVALID_VALUE)}function rR(t){const{path:e,locale:n,args:r,choice:i,plural:s}=t,o={},a=r||{};return tt(n)&&(o.locale=n),Ir(i)&&(o.plural=i),Ir(s)&&(o.plural=s),[e,a,o]}function bwe(t,e,...n){const r=Mt(n[0])?n[0]:{},i=!!r.useI18nComponentName;(Xt(r.globalInstall)?r.globalInstall:!0)&&(t.component(i?"i18n":Qk.name,Qk),t.component(eR.name,eR),t.component(tR.name,tR)),t.directive("t",wwe(e))}function xwe(t,e,n){return{beforeCreate(){const r=Aa();if(!r)throw Or(Ar.UNEXPECTED_ERROR);const i=this.$options;if(i.i18n){const s=i.i18n;i.__i18n&&(s.__i18n=i.__i18n),s.__root=e,this===this.$root?this.$i18n=iR(t,s):(s.__injectWithOption=!0,this.$i18n=oC(s))}else i.__i18n?this===this.$root?this.$i18n=iR(t,i):this.$i18n=oC({__i18n:i.__i18n,__injectWithOption:!0,__root:e}):this.$i18n=t;i.__i18nGlobal&&rU(e,i,i),t.__onComponentInstanceCreated(this.$i18n),n.__setInstance(r,this.$i18n),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,o)=>this.$i18n.te(s,o),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s)},mounted(){},unmounted(){const r=Aa();if(!r)throw Or(Ar.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__deleteInstance(r),delete this.$i18n}}}function iR(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[eU](e.pluralizationRules||t.pluralizationRules);const n=dw(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const Swe=lc("global-vue-i18n");function Awe(t={},e){const n=__VUE_I18N_LEGACY_API__&&Xt(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=Xt(t.globalInjection)?t.globalInjection:!0,i=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,s=new Map,[o,a]=Ewe(t,n),l=lc("");function u(h){return s.get(h)||null}function c(h,d){s.set(h,d)}function f(h){s.delete(h)}{const h={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return i},async install(d,...p){d.__VUE_I18N_SYMBOL__=l,d.provide(d.__VUE_I18N_SYMBOL__,h),!n&&r&&kwe(d,h.global),__VUE_I18N_FULL_INSTALL__&&bwe(d,h,...p),__VUE_I18N_LEGACY_API__&&n&&d.mixin(xwe(a,a.__composer,h));const g=d.unmount;d.unmount=()=>{h.dispose(),g()}},get global(){return a},dispose(){o.stop()},__instances:s,__getInstance:u,__setInstance:c,__deleteInstance:f};return h}}function sD(t={}){const e=Aa();if(e==null)throw Or(Ar.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Or(Ar.NOT_INSLALLED);const n=Cwe(e),r=Dwe(n),i=nU(e),s=Mwe(t,i);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw Or(Ar.NOT_AVAILABLE_IN_LEGACY_MODE);return Lwe(e,s,r,t)}if(s==="global")return rU(r,t,i),r;if(s==="parent"){let l=Twe(n,e,t.__useComponent);return l==null&&(l=r),l}const o=n;let a=o.__getInstance(e);if(a==null){const l=Jr({},t);"__i18n"in i&&(l.__i18n=i.__i18n),r&&(l.__root=r),a=rD(l),Pwe(o,e),o.__setInstance(e,a)}return a}function Ewe(t,e,n){const r=Md();{const i=__VUE_I18N_LEGACY_API__&&e?r.run(()=>oC(t)):r.run(()=>rD(t));if(i==null)throw Or(Ar.UNEXPECTED_ERROR);return[r,i]}}function Cwe(t){{const e=zt(t.isCE?Swe:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Or(t.isCE?Ar.NOT_INSLALLED_WITH_PROVIDE:Ar.UNEXPECTED_ERROR);return e}}function Mwe(t,e){return cw(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Dwe(t){return t.mode==="composition"?t.global:t.global.__composer}function Twe(t,e,n=!1){let r=null;const i=e.root;let s=e.parent;for(;s!=null;){const o=t;if(t.mode==="composition")r=o.__getInstance(s);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(s);a!=null&&(r=a.__composer,n&&r&&!r[tU]&&(r=null))}if(r!=null||i===s)break;s=s.parent}return r}function Pwe(t,e,n){hi(()=>{},e),ZC(()=>{t.__deleteInstance(e)},e)}function Lwe(t,e,n,r={}){const i=e==="local",s=f_(null);if(i&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw Or(Ar.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Xt(r.inheritLocale)?r.inheritLocale:!0,a=Se(i&&o?n.locale.value:tt(r.locale)?r.locale:hv),l=Se(i&&o?n.fallbackLocale.value:tt(r.fallbackLocale)||On(r.fallbackLocale)||Mt(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:a.value),u=Se(dw(a.value,r)),c=Se(Mt(r.datetimeFormats)?r.datetimeFormats:{[a.value]:{}}),f=Se(Mt(r.numberFormats)?r.numberFormats:{[a.value]:{}}),h=i?n.missingWarn:Xt(r.missingWarn)||Xu(r.missingWarn)?r.missingWarn:!0,d=i?n.fallbackWarn:Xt(r.fallbackWarn)||Xu(r.fallbackWarn)?r.fallbackWarn:!0,p=i?n.fallbackRoot:Xt(r.fallbackRoot)?r.fallbackRoot:!0,g=!!r.fallbackFormat,x=pr(r.missing)?r.missing:null,_=pr(r.postTranslation)?r.postTranslation:null,m=i?n.warnHtmlMessage:Xt(r.warnHtmlMessage)?r.warnHtmlMessage:!0,v=!!r.escapeParameter,b=i?n.modifiers:Mt(r.modifiers)?r.modifiers:{},w=r.pluralRules||i&&n.pluralRules;function A(){return[a.value,l.value,u.value,c.value,f.value]}const E=re({get:()=>s.value?s.value.locale.value:a.value,set:B=>{s.value&&(s.value.locale.value=B),a.value=B}}),S=re({get:()=>s.value?s.value.fallbackLocale.value:l.value,set:B=>{s.value&&(s.value.fallbackLocale.value=B),l.value=B}}),C=re(()=>s.value?s.value.messages.value:u.value),M=re(()=>c.value),D=re(()=>f.value);function T(){return s.value?s.value.getPostTranslationHandler():_}function L(B){s.value&&s.value.setPostTranslationHandler(B)}function F(){return s.value?s.value.getMissingHandler():x}function k(B){s.value&&s.value.setMissingHandler(B)}function I(B){return A(),B()}function O(...B){return s.value?I(()=>Reflect.apply(s.value.t,null,[...B])):I(()=>"")}function $(...B){return s.value?Reflect.apply(s.value.rt,null,[...B]):""}function N(...B){return s.value?I(()=>Reflect.apply(s.value.d,null,[...B])):I(()=>"")}function W(...B){return s.value?I(()=>Reflect.apply(s.value.n,null,[...B])):I(()=>"")}function H(B){return s.value?s.value.tm(B):{}}function K(B,j){return s.value?s.value.te(B,j):!1}function ee(B){return s.value?s.value.getLocaleMessage(B):{}}function Z(B,j){s.value&&(s.value.setLocaleMessage(B,j),u.value[B]=j)}function J(B,j){s.value&&s.value.mergeLocaleMessage(B,j)}function X(B){return s.value?s.value.getDateTimeFormat(B):{}}function Q(B,j){s.value&&(s.value.setDateTimeFormat(B,j),c.value[B]=j)}function oe(B,j){s.value&&s.value.mergeDateTimeFormat(B,j)}function he(B){return s.value?s.value.getNumberFormat(B):{}}function ve(B,j){s.value&&(s.value.setNumberFormat(B,j),f.value[B]=j)}function ye(B,j){s.value&&s.value.mergeNumberFormat(B,j)}const V={get id(){return s.value?s.value.id:-1},locale:E,fallbackLocale:S,messages:C,datetimeFormats:M,numberFormats:D,get inheritLocale(){return s.value?s.value.inheritLocale:o},set inheritLocale(B){s.value&&(s.value.inheritLocale=B)},get availableLocales(){return s.value?s.value.availableLocales:Object.keys(u.value)},get modifiers(){return s.value?s.value.modifiers:b},get pluralRules(){return s.value?s.value.pluralRules:w},get isGlobal(){return s.value?s.value.isGlobal:!1},get missingWarn(){return s.value?s.value.missingWarn:h},set missingWarn(B){s.value&&(s.value.missingWarn=B)},get fallbackWarn(){return s.value?s.value.fallbackWarn:d},set fallbackWarn(B){s.value&&(s.value.missingWarn=B)},get fallbackRoot(){return s.value?s.value.fallbackRoot:p},set fallbackRoot(B){s.value&&(s.value.fallbackRoot=B)},get fallbackFormat(){return s.value?s.value.fallbackFormat:g},set fallbackFormat(B){s.value&&(s.value.fallbackFormat=B)},get warnHtmlMessage(){return s.value?s.value.warnHtmlMessage:m},set warnHtmlMessage(B){s.value&&(s.value.warnHtmlMessage=B)},get escapeParameter(){return s.value?s.value.escapeParameter:v},set escapeParameter(B){s.value&&(s.value.escapeParameter=B)},t:O,getPostTranslationHandler:T,setPostTranslationHandler:L,getMissingHandler:F,setMissingHandler:k,rt:$,d:N,n:W,tm:H,te:K,getLocaleMessage:ee,setLocaleMessage:Z,mergeLocaleMessage:J,getDateTimeFormat:X,setDateTimeFormat:Q,mergeDateTimeFormat:oe,getNumberFormat:he,setNumberFormat:ve,mergeNumberFormat:ye};function R(B){B.locale.value=a.value,B.fallbackLocale.value=l.value,Object.keys(u.value).forEach(j=>{B.mergeLocaleMessage(j,u.value[j])}),Object.keys(c.value).forEach(j=>{B.mergeDateTimeFormat(j,c.value[j])}),Object.keys(f.value).forEach(j=>{B.mergeNumberFormat(j,f.value[j])}),B.escapeParameter=v,B.fallbackFormat=g,B.fallbackRoot=p,B.fallbackWarn=d,B.missingWarn=h,B.warnHtmlMessage=m}return Gm(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw Or(Ar.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const B=s.value=t.proxy.$i18n.__composer;e==="global"?(a.value=B.locale.value,l.value=B.fallbackLocale.value,u.value=B.messages.value,c.value=B.datetimeFormats.value,f.value=B.numberFormats.value):i&&R(B)}),V}const Fwe=["locale","fallbackLocale","availableLocales"],Iwe=["t","rt","d","n","tm"];function kwe(t,e){const n=Object.create(null);Fwe.forEach(r=>{const i=Object.getOwnPropertyDescriptor(e,r);if(!i)throw Or(Ar.UNEXPECTED_ERROR);const s=_n(i.value)?{get(){return i.value.value},set(o){i.value.value=o}}:{get(){return i.get&&i.get()}};Object.defineProperty(n,r,s)}),t.config.globalProperties.$i18n=n,Iwe.forEach(r=>{const i=Object.getOwnPropertyDescriptor(e,r);if(!i||!i.value)throw Or(Ar.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${r}`,i)})}twe(lwe);nwe(O_e);rwe(UG);pwe();if(__INTLIFY_PROD_DEVTOOLS__){const t=kg();t.__INTLIFY__=!0,$_e(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const Rwe={"Seiten bearbeiten":"Seiten bearbeiten"},Owe={"Seiten bearbeiten":"change sides"},Bwe={de:Rwe,en:Owe};function sR(t,e,n){Nwe(t,e),e.set(t,n)}function Nwe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Vwe(t,e,n){var r=oU(t,e,"set");return zwe(t,r,n),n}function zwe(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function Dc(t,e){var n=oU(t,e,"get");return Gwe(t,n)}function oU(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function Gwe(t,e){return e.get?e.get.call(t):e.value}function aU(t,e,n){const r=e.length-1;if(r<0)return t===void 0?n:t;for(let i=0;i<r;i++){if(t==null)return n;t=t[e[i]]}return t==null||t[e[r]]===void 0?n:t[e[r]]}function _f(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(r=>_f(t[r],e[r]))}function aC(t,e,n){return t==null||!e||typeof e!="string"?n:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),aU(t,e.split("."),n))}function ga(t,e,n){if(e==null)return t===void 0?n:t;if(t!==Object(t)){if(typeof e!="function")return n;const i=e(t,n);return typeof i>"u"?n:i}if(typeof e=="string")return aC(t,e,n);if(Array.isArray(e))return aU(t,e,n);if(typeof e!="function")return n;const r=e(t,n);return typeof r>"u"?n:r}function ya(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(n,r)=>e+r)}function et(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${e}`:void 0}function lC(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function Uwe(t){return t==null?void 0:t.$el}const oR=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),uC=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function lU(t){return Object.keys(t)}function Wd(t,e,n){const r=Object.create(null),i=Object.create(null);for(const s in t)e.some(o=>o instanceof RegExp?o.test(s):o===s)&&!(n!=null&&n.some(o=>o===s))?r[s]=t[s]:i[s]=t[s];return[r,i]}function Na(t,e){const n={...t};return e.forEach(r=>delete n[r]),n}function wf(t){return Wd(t,["class","style","id",/^data-/])}function qs(t){return t==null?[]:Array.isArray(t)?t:[t]}function Wi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(n,t))}function aR(t){const e=t.toString().trim();return e.includes(".")?e.length-e.indexOf(".")-1:0}function lR(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return t+n.repeat(Math.max(0,e-t.length))}function Hwe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let r=0;for(;r<t.length;)n.push(t.substr(r,e)),r+=e;return n}function uR(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(t<e)return`${t} B`;const n=e===1024?["Ki","Mi","Gi"]:["k","M","G"];let r=-1;for(;Math.abs(t)>=e&&r<n.length-1;)t/=e,++r;return`${t.toFixed(1)} ${n[r]}B`}function ml(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const r={};for(const i in t)r[i]=t[i];for(const i in e){const s=t[i],o=e[i];if(lC(s)&&lC(o)){r[i]=ml(s,o,n);continue}if(Array.isArray(s)&&Array.isArray(o)&&n){r[i]=n(s,o);continue}r[i]=o}return r}function Iu(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(Iu.cache.has(t))return Iu.cache.get(t);const e=t.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return Iu.cache.set(t,e),e}Iu.cache=new Map;function Og(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(n=>Og(t,n)).flat(1);if(Array.isArray(e.children))return e.children.map(n=>Og(t,n)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return Og(t,e.component.subTree).flat(1)}return[]}var py=new WeakMap,fh=new WeakMap;class Wwe{constructor(e){sR(this,py,{writable:!0,value:[]}),sR(this,fh,{writable:!0,value:0}),this.size=e}push(e){Dc(this,py)[Dc(this,fh)]=e,Vwe(this,fh,(Dc(this,fh)+1)%this.size)}values(){return Dc(this,py).slice(Dc(this,fh)).concat(Dc(this,py).slice(0,Dc(this,fh)))}}function $we(t){return"touches"in t?{clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}:{clientX:t.clientX,clientY:t.clientY}}function oD(t){const e=Yr({}),n=re(t);return Bo(()=>{for(const r in n.value)e[r]=n.value[r]},{flush:"sync"}),h_(e)}function n_(t,e){return t.includes(e)}const Xwe=/^on[^a-z]/,Ywe=t=>Xwe.test(t),Sa=()=>[Function,Array];function cR(t,e){return e="on"+_l(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function aD(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(Array.isArray(t))for(const i of t)i(...n);else typeof t=="function"&&t(...n)}function lD(t){const e=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(n=>`${n}:not([tabindex="-1"]):not([disabled])`).join(", ");return[...t.querySelectorAll(e)]}function uU(t,e){var i,s,o;const n=lD(t),r=n.indexOf(document.activeElement);if(!e)t.contains(document.activeElement)||(i=n[0])==null||i.focus();else if(e==="first")(s=n[0])==null||s.focus();else if(e==="last")(o=n.at(-1))==null||o.focus();else{let a,l=r;const u=e==="next"?1:-1;do l+=u,a=n[l];while((!a||a.offsetParent==null)&&l<n.length&&l>=0);a?a.focus():uU(t,e==="next"?"first":"last")}}const cU=["top","bottom"],jwe=["start","end","left","right"];function cC(t,e){let[n,r]=t.split(" ");return r||(r=n_(cU,n)?"start":n_(jwe,n)?"top":"center"),{side:fC(n,e),align:fC(r,e)}}function fC(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function GS(t){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.side],align:t.align}}function US(t){return{side:t.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[t.align]}}function fR(t){return{side:t.align,align:t.side}}function hR(t){return n_(cU,t.side)?"y":"x"}class td{constructor(e){let{x:n,y:r,width:i,height:s}=e;this.x=n,this.y=r,this.width=i,this.height=s}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function dR(t,e){return{x:{before:Math.max(0,e.left-t.left),after:Math.max(0,t.right-e.right)},y:{before:Math.max(0,e.top-t.top),after:Math.max(0,t.bottom-e.bottom)}}}function uD(t){const e=t.getBoundingClientRect(),n=getComputedStyle(t),r=n.transform;if(r){let i,s,o,a,l;if(r.startsWith("matrix3d("))i=r.slice(9,-1).split(/, /),s=+i[0],o=+i[5],a=+i[12],l=+i[13];else if(r.startsWith("matrix("))i=r.slice(7,-1).split(/, /),s=+i[0],o=+i[3],a=+i[4],l=+i[5];else return new td(e);const u=n.transformOrigin,c=e.x-a-(1-s)*parseFloat(u),f=e.y-l-(1-o)*parseFloat(u.slice(u.indexOf(" ")+1)),h=s?e.width/s:t.offsetWidth+1,d=o?e.height/o:t.offsetHeight+1;return new td({x:c,y:f,width:h,height:d})}else return new td(e)}function Hc(t,e,n){if(typeof t.animate>"u")return{finished:Promise.resolve()};let r;try{r=t.animate(e,n)}catch{return{finished:Promise.resolve()}}return typeof r.finished>"u"&&(r.finished=new Promise(i=>{r.onfinish=()=>{i(r)}})),r}function fU(t,e,n){if(n&&(e={__isVue:!0,$parent:n,$options:e}),e){if(e.$_alreadyWarned=e.$_alreadyWarned||[],e.$_alreadyWarned.includes(t))return;e.$_alreadyWarned.push(t)}return`[Vuetify] ${t}`+(e?Kwe(e):"")}function ku(t,e,n){const r=fU(t,e,n);r!=null&&console.warn(r)}function hC(t,e,n){const r=fU(t,e,n);r!=null&&console.error(r)}const qwe=/(?:^|[-_])(\w)/g,Jwe=t=>t.replace(qwe,e=>e.toUpperCase()).replace(/[-_]/g,"");function HS(t,e){if(t.$root===t)return"<Root>";const n=typeof t=="function"&&t.cid!=null?t.options:t.__isVue?t.$options||t.constructor.options:t||{};let r=n.name||n._componentTag;const i=n.__file;if(!r&&i){const s=i.match(/([^/\\]+)\.vue$/);r=s==null?void 0:s[1]}return(r?`<${Jwe(r)}>`:"<Anonymous>")+(i&&e!==!1?` at ${i}`:"")}function Kwe(t){if(t.__isVue&&t.$parent){const e=[];let n=0;for(;t;){if(e.length>0){const r=e[e.length-1];if(r.constructor===t.constructor){n++,t=t.$parent;continue}else n>0&&(e[e.length-1]=[r,n],n=0)}e.push(t),t=t.$parent}return`

found in

`+e.map((r,i)=>`${i===0?"---> ":" ".repeat(5+i*2)}${Array.isArray(r)?`${HS(r[0])}... (${r[1]} recursive calls)`:HS(r)}`).join(`
`)}else return`

(found in ${HS(t)})`}const Zwe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],Qwe=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,ebe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],tbe=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function hU(t){const e=Array(3),n=Qwe,r=Zwe;for(let i=0;i<3;++i)e[i]=Math.round(Wi(n(r[i][0]*t[0]+r[i][1]*t[1]+r[i][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function cD(t){let{r:e,g:n,b:r}=t;const i=[0,0,0],s=tbe,o=ebe;e=s(e/255),n=s(n/255),r=s(r/255);for(let a=0;a<3;++a)i[a]=o[a][0]*e+o[a][1]*n+o[a][2]*r;return i}const r_=.20689655172413793,nbe=t=>t>r_**3?Math.cbrt(t):t/(3*r_**2)+4/29,rbe=t=>t>r_?t**3:3*r_**2*(t-4/29);function dU(t){const e=nbe,n=e(t[1]);return[116*n-16,500*(e(t[0]/.95047)-n),200*(n-e(t[2]/1.08883))]}function pU(t){const e=rbe,n=(t[0]+16)/116;return[e(n+t[1]/500)*.95047,e(n),e(n-t[2]/200)*1.08883]}function pR(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function Wc(t){if(typeof t=="number")return(isNaN(t)||t<0||t>16777215)&&ku(`'${t}' is not a valid hex color`),{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;[3,4].includes(e.length)?e=e.split("").map(r=>r+r).join(""):[6,8].includes(e.length)||ku(`'${t}' is not a valid hex(a) color`);const n=parseInt(e,16);return(isNaN(n)||n<0||n>4294967295)&&ku(`'${t}' is not a valid hex(a) color`),_U(e)}else throw new TypeError(`Colors can only be numbers or strings, recieved ${t==null?t:t.constructor.name} instead`)}function pw(t){const{h:e,s:n,v:r,a:i}=t,s=a=>{const l=(a+e/60)%6;return r-r*n*Math.max(Math.min(l,4-l,1),0)},o=[s(5),s(3),s(1)].map(a=>Math.round(a*255));return{r:o[0],g:o[1],b:o[2],a:i}}function fD(t){if(!t)return{h:0,s:1,v:1,a:1};const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),s=Math.min(e,n,r);let o=0;i!==s&&(i===e?o=60*(0+(n-r)/(i-s)):i===n?o=60*(2+(r-e)/(i-s)):i===r&&(o=60*(4+(e-n)/(i-s)))),o<0&&(o=o+360);const a=i===0?0:(i-s)/i,l=[o,a,i];return{h:l[0],s:l[1],v:l[2],a:t.a}}function gU(t){const{h:e,s:n,v:r,a:i}=t,s=r-r*n/2,o=s===1||s===0?0:(r-s)/Math.min(s,1-s);return{h:e,s:o,l:s,a:i}}function mU(t){const{h:e,s:n,l:r,a:i}=t,s=r+n*Math.min(r,1-r),o=s===0?0:2-2*r/s;return{h:e,s:o,v:s,a:i}}function ibe(t){let{r:e,g:n,b:r,a:i}=t;return i===void 0?`rgb(${e}, ${n}, ${r})`:`rgba(${e}, ${n}, ${r}, ${i})`}function vU(t){return ibe(pw(t))}function gy(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function yU(t){let{r:e,g:n,b:r,a:i}=t;return`#${[gy(e),gy(n),gy(r),i!==void 0?gy(Math.round(i*255)):""].join("")}`}function _U(t){t=xU(t);let[e,n,r,i]=Hwe(t,2).map(s=>parseInt(s,16));return i=i===void 0?i:i/255,{r:e,g:n,b:r,a:i}}function wU(t){const e=_U(t);return fD(e)}function bU(t){return yU(pw(t))}function xU(t){return t.startsWith("#")&&(t=t.slice(1)),t=t.replace(/([^0-9a-f])/gi,"F"),(t.length===3||t.length===4)&&(t=t.split("").map(e=>e+e).join("")),t.length!==6&&(t=lR(lR(t,6),8,"F")),t}function sbe(t,e){const n=dU(cD(t));return n[0]=n[0]+e*10,hU(pU(n))}function obe(t,e){const n=dU(cD(t));return n[0]=n[0]-e*10,hU(pU(n))}function dC(t){const e=Wc(t);return cD(e)[1]}function abe(t,e){const n=dC(t),r=dC(e),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function pt(t,e){return n=>Object.keys(t).reduce((r,i)=>{const o=typeof t[i]=="object"&&t[i]!=null&&!Array.isArray(t[i])?t[i]:{type:t[i]};return n&&i in n?r[i]={...o,default:n[i]}:r[i]=o,e&&!r[i].source&&(r[i].source=e),r},{})}const Ke=pt({class:[String,Array],style:{type:[String,Array,Object],default:null}},"component");function Yu(t,e){let n;function r(){n=Md(),n.run(()=>e.length?e(()=>{n==null||n.stop(),r()}):e())}He(t,i=>{i&&!n?r():i||(n==null||n.stop(),n=void 0)},{immediate:!0}),fs(()=>{n==null||n.stop()})}const Lm=Symbol.for("vuetify:defaults");function lbe(t){return Se(t)}function hD(){const t=zt(Lm);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function Cr(t,e){const n=hD(),r=Se(t),i=re(()=>{if(Hi(e==null?void 0:e.disabled))return n.value;const o=Hi(e==null?void 0:e.scoped),a=Hi(e==null?void 0:e.reset),l=Hi(e==null?void 0:e.root);let u=ml(r.value,{prev:n.value});if(o)return u;if(a||l){const c=Number(a||1/0);for(let f=0;f<=c&&!(!u||!("prev"in u));f++)u=u.prev;return u}return u.prev?ml(u.prev,u):u});return ar(Lm,i),i}function ube(t,e){var n,r;return typeof((n=t.props)==null?void 0:n[e])<"u"||typeof((r=t.props)==null?void 0:r[Iu(e)])<"u"}function cbe(){var l;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:hD();const r=di("useDefaults");if(e=(l=e!=null?e:r.type.name)!=null?l:r.type.__name,!e)throw new Error("[Vuetify] Could not determine component name");const i=re(()=>{var u,c;return(c=n.value)==null?void 0:c[(u=t._as)!=null?u:e]}),s=new Proxy(t,{get(u,c){var h,d,p,g,x,_;const f=Reflect.get(u,c);return c==="class"||c==="style"?[(h=i.value)==null?void 0:h[c],f].filter(m=>m!=null):typeof c=="string"&&!ube(r.vnode,c)&&(_=(x=(d=i.value)==null?void 0:d[c])!=null?x:(g=(p=n.value)==null?void 0:p.global)==null?void 0:g[c])!=null?_:f}}),o=f_();Bo(()=>{if(i.value){const u=Object.entries(i.value).filter(c=>{let[f]=c;return f.startsWith(f[0].toUpperCase())});u.length&&(o.value=Object.fromEntries(u))}});function a(){Yu(o,()=>{var u,c;Cr(ml((c=(u=pbe(Lm))==null?void 0:u.value)!=null?c:{},o.value))})}return{props:s,provideSubDefaults:a}}function lo(t){var e,n;if(t._setup=(e=t._setup)!=null?e:t.setup,!t.name)return ku("The component is missing an explicit name, unable to generate default prop value"),t;if(t._setup){t.props=pt((n=t.props)!=null?n:{},Iu(t.name))();const r=Object.keys(t.props);t.filterProps=function(s){return Wd(s,r,["class","style"])},t.props._as=String,t.setup=function(s,o){var f;const a=hD();if(!a.value)return t._setup(s,o);const{props:l,provideSubDefaults:u}=cbe(s,(f=s._as)!=null?f:t.name,a),c=t._setup(l,o);return u(),c}}return t}function Oe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?lo:JC)(e)}function Ho(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return Oe()({name:n!=null?n:_l(Js(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e},...Ke()},setup(r,i){let{slots:s}=i;return()=>{var o;return no(r.tag,{class:[t,r.class],style:r.style},(o=s.default)==null?void 0:o.call(s))}}})}function SU(t){if(typeof t.getRootNode!="function"){for(;t.parentNode;)t=t.parentNode;return t!==document?null:document}const e=t.getRootNode();return e!==document&&e.getRootNode({composed:!0})!==document?null:e}const Fm="cubic-bezier(0.4, 0, 0.2, 1)",fbe="cubic-bezier(0.0, 0, 0.2, 1)",hbe="cubic-bezier(0.4, 0, 1, 1)";function di(t,e){const n=Aa();if(!n)throw new Error(`[Vuetify] ${t} ${e||"must be called from inside a setup function"}`);return n}function Ml(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=di(t).type;return Iu((e==null?void 0:e.aliasName)||(e==null?void 0:e.name))}let AU=0,Jy=new WeakMap;function Li(){const t=di("getUid");if(Jy.has(t))return Jy.get(t);{const e=AU++;return Jy.set(t,e),e}}Li.reset=()=>{AU=0,Jy=new WeakMap};function EU(t){for(;t;){if(dD(t))return t;t=t.parentElement}return document.scrollingElement}function i_(t,e){const n=[];if(e&&t&&!e.contains(t))return n;for(;t&&(dD(t)&&n.push(t),t!==e);)t=t.parentElement;return n}function dD(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return e.overflowY==="scroll"||e.overflowY==="auto"&&t.scrollHeight>t.clientHeight}const wr=typeof window<"u",pD=wr&&"IntersectionObserver"in window,dbe=wr&&("ontouchstart"in window||window.navigator.maxTouchPoints>0),pC=wr&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports("selector(:focus-visible)");function pbe(t){const{provides:e}=di("injectSelf");if(e&&t in e)return e[t]}function gbe(t){for(;t;){if(window.getComputedStyle(t).position==="fixed")return!0;t=t.offsetParent}return!1}function ze(t){const e=di("useRender");e.render=t}function Dt(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:f=>f,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:f=>f;const s=di("useProxiedModel"),o=Se(t[e]!==void 0?t[e]:n),a=Iu(e),u=re(a!==e?()=>{var f,h,d,p;return t[e],!!((((f=s.vnode.props)==null?void 0:f.hasOwnProperty(e))||((h=s.vnode.props)==null?void 0:h.hasOwnProperty(a)))&&(((d=s.vnode.props)==null?void 0:d.hasOwnProperty(`onUpdate:${e}`))||((p=s.vnode.props)==null?void 0:p.hasOwnProperty(`onUpdate:${a}`))))}:()=>{var f,h;return t[e],!!(((f=s.vnode.props)==null?void 0:f.hasOwnProperty(e))&&((h=s.vnode.props)==null?void 0:h.hasOwnProperty(`onUpdate:${e}`)))});Yu(()=>!u.value,()=>{He(()=>t[e],f=>{o.value=f})});const c=re({get(){const f=t[e];return r(u.value?f:o.value)},set(f){const h=i(f),d=Ye(u.value?t[e]:o.value);d===h||r(d)===f||(o.value=h,s==null||s.emit(`update:${e}`,h))}});return Object.defineProperty(c,"externalValue",{get:()=>u.value?t[e]:o.value}),c}const mbe={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},gR="$vuetify.",mR=(t,e)=>t.replace(/\{(\d+)\}/g,(n,r)=>String(e[+r])),CU=(t,e,n)=>function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(!r.startsWith(gR))return mR(r,s);const a=r.replace(gR,""),l=t.value&&n.value[t.value],u=e.value&&n.value[e.value];let c=aC(l,a,null);return c||(ku(`Translation key "${r}" not found in "${t.value}", trying fallback locale`),c=aC(u,a,null)),c||(hC(`Translation key "${r}" not found in fallback`),c=r),typeof c!="string"&&(hC(`Translation key "${r}" has a non-string value`),c=r),mR(c,s)};function MU(t,e){return(n,r)=>new Intl.NumberFormat([t.value,e.value],r).format(n)}function WS(t,e,n){var i,s;const r=Dt(t,e,(i=t[e])!=null?i:n.value);return r.value=(s=t[e])!=null?s:n.value,He(n,o=>{t[e]==null&&(r.value=n.value)}),r}function DU(t){return e=>{const n=WS(e,"locale",t.current),r=WS(e,"fallback",t.fallback),i=WS(e,"messages",t.messages);return{name:"vuetify",current:n,fallback:r,messages:i,t:CU(n,r,i),n:MU(n,r),provide:DU({current:n,fallback:r,messages:i})}}}function vbe(t){var i,s;const e=Se((i=t==null?void 0:t.locale)!=null?i:"en"),n=Se((s=t==null?void 0:t.fallback)!=null?s:"en"),r=Se({en:mbe,...t==null?void 0:t.messages});return{name:"vuetify",current:e,fallback:n,messages:r,t:CU(e,n,r),n:MU(e,n),provide:DU({current:e,fallback:n,messages:r})}}const ybe={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},Ad=Symbol.for("vuetify:locale");function _be(t){return t.name!=null}function wbe(t){const e=(t==null?void 0:t.adapter)&&_be(t==null?void 0:t.adapter)?t==null?void 0:t.adapter:vbe(t),n=xbe(e,t);return{...e,...n}}function uo(){const t=zt(Ad);if(!t)throw new Error("[Vuetify] Could not find injected locale instance");return t}function bbe(t){const e=zt(Ad);if(!e)throw new Error("[Vuetify] Could not find injected locale instance");const n=e.provide(t),r=Sbe(n,e.rtl,t),i={...n,...r};return ar(Ad,i),i}function xbe(t,e){var i;const n=Se((i=e==null?void 0:e.rtl)!=null?i:ybe),r=re(()=>{var s;return(s=n.value[t.current.value])!=null?s:!1});return{isRtl:r,rtl:n,rtlClasses:re(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function Sbe(t,e,n){const r=re(()=>{var i,s;return(s=(i=n.rtl)!=null?i:e.value[t.current.value])!=null?s:!1});return{isRtl:r,rtl:e,rtlClasses:re(()=>`v-locale--is-${r.value?"rtl":"ltr"}`)}}function Dl(){const t=zt(Ad);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}function Abe(t){let e=[];const n=[],r=TU(t),i=PU(t);for(let s=0;s<r.getDay();s++)e.push(null);for(let s=1;s<=i.getDate();s++){const o=new Date(t.getFullYear(),t.getMonth(),s);e.push(o),e.length===7&&(n.push(e),e=[])}for(let s=e.length;s<7;s++)e.push(null);return n.push(e),n}function TU(t){return new Date(t.getFullYear(),t.getMonth(),1)}function PU(t){return new Date(t.getFullYear(),t.getMonth()+1,0)}function Ebe(t){if(t==null)return null;if(t instanceof Date)return t;if(typeof t=="string"){const e=Date.parse(t);if(!isNaN(e))return new Date(e)}return null}const Cbe={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:0,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:0,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0},vR=new Date(2e3,0,2);function Mbe(t){const e=Cbe[t.slice(-2).toUpperCase()];return ya(7).map(n=>{const r=new Date(vR);return r.setDate(vR.getDate()+e+n),new Intl.DateTimeFormat(t,{weekday:"long"}).format(r)})}function Dbe(t,e,n){const r=new Date(t);let i={};switch(e){case"fullDateWithWeekday":i={weekday:"long",day:"numeric",month:"long",year:"numeric"};break;case"normalDateWithWeekday":i={weekday:"short",day:"numeric",month:"short",year:"numeric"};break;case"keyboardDate":i={};break;case"monthAndDate":i={month:"long",day:"numeric"};break;case"monthAndYear":i={month:"long",year:"numeric"};break;default:i={timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(n,i).format(r)}function Tbe(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function Pbe(t,e){const n=new Date(t);return n.setMonth(n.getMonth()+e),n}function Lbe(t){return t.getFullYear()}function Fbe(t){return t.getMonth()}function Ibe(t){return new Date(t.getFullYear(),0,1)}function kbe(t){return new Date(t.getFullYear(),11,31)}function $S(t){return new Date(t,0,1)}function Rbe(t){let e=t.getFullYear(),n=$S(e);if(t<n)e=e-1,n=$S(e);else{const s=$S(e+1);t>=s&&(e=e+1,n=s)}const r=Math.abs(t.getTime()-n.getTime()),i=Math.ceil(r/(1e3*60*60*24));return Math.floor(i/7)+1}function Obe(t,e){return LU(t,e[0])&&Nbe(t,e[1])}function Bbe(t){const e=new Date(t);return e instanceof Date&&!isNaN(e.getTime())}function LU(t,e){return t.getTime()>e.getTime()}function Nbe(t,e){return t.getTime()<e.getTime()}function Vbe(t,e){return t.getTime()===e.getTime()}function zbe(t,e){return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function Gbe(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function Ube(t,e,n){const r=new Date(t),i=new Date(e);return n==="month"?r.getMonth()-i.getMonth()+(r.getFullYear()-i.getFullYear())*12:Math.floor((r.getTime()-i.getTime())/(1e3*60*60*24))}function Hbe(t,e){const n=new Date(t);return n.setFullYear(e),n}class Wbe{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en";this.locale=e}date(e){return Ebe(e)}addDays(e,n){return Tbe(e,n)}addMonths(e,n){return Pbe(e,n)}getWeekArray(e){return Abe(e)}startOfMonth(e){return TU(e)}endOfMonth(e){return PU(e)}format(e,n){return Dbe(e,n,this.locale)}isEqual(e,n){return Vbe(e,n)}isValid(e){return Bbe(e)}isWithinRange(e,n){return Obe(e,n)}isAfter(e,n){return LU(e,n)}isSameDay(e,n){return zbe(e,n)}isSameMonth(e,n){return Gbe(e,n)}setYear(e,n){return Hbe(e,n)}getDiff(e,n,r){return Ube(e,n,r)}getWeek(e){return Rbe(e)}getWeekdays(){return Mbe(this.locale)}getYear(e){return Lbe(e)}getMonth(e){return Fbe(e)}startOfYear(e){return Ibe(e)}endOfYear(e){return kbe(e)}}const yR=Symbol.for("vuetify:date-adapter");function $be(t){return t!=null?t:{adapter:Wbe}}const gw=["sm","md","lg","xl","xxl"],gC=Symbol.for("vuetify:display"),_R={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},Xbe=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_R;return ml(_R,t)};function wR(t){return wr&&!t?window.innerWidth:0}function bR(t){return wr&&!t?window.innerHeight:0}function xR(t){const e=wr&&!t?window.navigator.userAgent:"ssr";function n(p){return Boolean(e.match(p))}const r=n(/android/i),i=n(/iphone|ipad|ipod/i),s=n(/cordova/i),o=n(/electron/i),a=n(/chrome/i),l=n(/edge/i),u=n(/firefox/i),c=n(/opera/i),f=n(/win/i),h=n(/mac/i),d=n(/linux/i);return{android:r,ios:i,cordova:s,electron:o,chrome:a,edge:l,firefox:u,opera:c,win:f,mac:h,linux:d,touch:dbe,ssr:e==="ssr"}}function Ybe(t,e){const{thresholds:n,mobileBreakpoint:r}=Xbe(t),i=Se(bR(e)),s=f_(xR(e)),o=Yr({}),a=Se(wR(e));function l(){i.value=bR(),a.value=wR()}function u(){l(),s.value=xR()}return Bo(()=>{const c=a.value<n.sm,f=a.value<n.md&&!c,h=a.value<n.lg&&!(f||c),d=a.value<n.xl&&!(h||f||c),p=a.value<n.xxl&&!(d||h||f||c),g=a.value>=n.xxl,x=c?"xs":f?"sm":h?"md":d?"lg":p?"xl":"xxl",_=typeof r=="number"?r:n[r],m=a.value<_;o.xs=c,o.sm=f,o.md=h,o.lg=d,o.xl=p,o.xxl=g,o.smAndUp=!c,o.mdAndUp=!(c||f),o.lgAndUp=!(c||f||h),o.xlAndUp=!(c||f||h||d),o.smAndDown=!(h||d||p||g),o.mdAndDown=!(d||p||g),o.lgAndDown=!(p||g),o.xlAndDown=!g,o.name=x,o.height=i.value,o.width=a.value,o.mobile=m,o.mobileBreakpoint=r,o.platform=s.value,o.thresholds=n}),wr&&window.addEventListener("resize",l,{passive:!0}),{...h_(o),update:u,ssr:!!e}}function bf(){const t=zt(gC);if(!t)throw new Error("Could not find Vuetify display injection");return t}const jbe={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},qbe={component:t=>no(mD,{...t,class:"mdi"})},bt=[String,Function,Object,Array],mC=Symbol.for("vuetify:icons"),mw=pt({icon:{type:bt},tag:{type:String,required:!0}},"icon"),vC=Oe()({name:"VComponentIcon",props:mw(),setup(t,e){let{slots:n}=e;return()=>{const r=t.icon;return P(t.tag,null,{default:()=>{var i;return[t.icon?P(r,null,null):(i=n.default)==null?void 0:i.call(n)]}})}}}),gD=lo({name:"VSvgIcon",inheritAttrs:!1,props:mw(),setup(t,e){let{attrs:n}=e;return()=>P(t.tag,Je(n,{style:null}),{default:()=>[P("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(t.icon)?t.icon.map(r=>Array.isArray(r)?P("path",{d:r[0],"fill-opacity":r[1]},null):P("path",{d:r},null)):P("path",{d:t.icon},null)])]})}}),Jbe=lo({name:"VLigatureIcon",props:mw(),setup(t){return()=>P(t.tag,null,{default:()=>[t.icon]})}}),mD=lo({name:"VClassIcon",props:mw(),setup(t){return()=>P(t.tag,{class:t.icon},null)}}),Kbe={svg:{component:gD},class:{component:mD}};function Zbe(t){return ml({defaultSet:"mdi",sets:{...Kbe,mdi:qbe},aliases:jbe},t)}const Qbe=t=>{const e=zt(mC);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:re(()=>{var l;const r=_n(t)?t.value:t.icon;if(!r)return{component:vC};let i=r;if(typeof i=="string"&&(i=i.trim(),i.startsWith("$")&&(i=(l=e.aliases)==null?void 0:l[i.slice(1)])),!i)throw new Error(`Could not find aliased icon "${r}"`);if(Array.isArray(i))return{component:gD,icon:i};if(typeof i!="string")return{component:vC,icon:i};const s=Object.keys(e.sets).find(u=>typeof i=="string"&&i.startsWith(`${u}:`)),o=s?i.slice(s.length+1):i;return{component:e.sets[s!=null?s:e.defaultSet].component,icon:o}})}},hh=2.4,SR=.2126729,AR=.7151522,ER=.072175,exe=.55,txe=.58,nxe=.57,rxe=.62,my=.03,CR=1.45,ixe=5e-4,sxe=1.25,oxe=1.25,MR=.078,DR=12.82051282051282,vy=.06,TR=.001;function PR(t,e){const n=(t.r/255)**hh,r=(t.g/255)**hh,i=(t.b/255)**hh,s=(e.r/255)**hh,o=(e.g/255)**hh,a=(e.b/255)**hh;let l=n*SR+r*AR+i*ER,u=s*SR+o*AR+a*ER;if(l<=my&&(l+=(my-l)**CR),u<=my&&(u+=(my-u)**CR),Math.abs(u-l)<ixe)return 0;let c;if(u>l){const f=(u**exe-l**txe)*sxe;c=f<TR?0:f<MR?f-f*DR*vy:f-vy}else{const f=(u**rxe-l**nxe)*oxe;c=f>-TR?0:f>-MR?f-f*DR*vy:f+vy}return c*100}const Im=Symbol.for("vuetify:theme"),jt=pt({theme:String},"theme"),$p={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function axe(){var n,r,i;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$p;if(!t)return{...$p,isDisabled:!0};const e={};for(const[s,o]of Object.entries((n=t.themes)!=null?n:{})){const a=o.dark||s==="dark"?(r=$p.themes)==null?void 0:r.dark:(i=$p.themes)==null?void 0:i.light;e[s]=ml(a,o)}return ml($p,{...t,themes:e})}function lxe(t){const e=Yr(axe(t)),n=Se(e.defaultTheme),r=Se(e.themes),i=re(()=>{const c={};for(const[f,h]of Object.entries(r.value)){const d=c[f]={...h,colors:{...h.colors}};if(e.variations)for(const p of e.variations.colors){const g=d.colors[p];if(!!g)for(const x of["lighten","darken"]){const _=x==="lighten"?sbe:obe;for(const m of ya(e.variations[x],1))d.colors[`${p}-${x}-${m}`]=yU(_(Wc(g),m))}}for(const p of Object.keys(d.colors)){if(/^on-[a-z]/.test(p)||d.colors[`on-${p}`])continue;const g=`on-${p}`,x=Wc(d.colors[p]),_=Math.abs(PR(Wc(0),x)),m=Math.abs(PR(Wc(16777215),x));d.colors[g]=m>Math.min(_,50)?"#fff":"#000"}}return c}),s=re(()=>i.value[n.value]),o=re(()=>{const c=[];s.value.dark&&Tc(c,":root",["color-scheme: dark"]),Tc(c,":root",LR(s.value));for(const[p,g]of Object.entries(i.value))Tc(c,`.v-theme--${p}`,[`color-scheme: ${g.dark?"dark":"normal"}`,...LR(g)]);const f=[],h=[],d=new Set(Object.values(i.value).flatMap(p=>Object.keys(p.colors)));for(const p of d)/^on-[a-z]/.test(p)?Tc(h,`.${p}`,[`color: rgb(var(--v-theme-${p})) !important`]):(Tc(f,`.bg-${p}`,[`--v-theme-overlay-multiplier: var(--v-theme-${p}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${p})) !important`,`color: rgb(var(--v-theme-on-${p})) !important`]),Tc(h,`.text-${p}`,[`color: rgb(var(--v-theme-${p})) !important`]),Tc(h,`.border-${p}`,[`--v-border-color: var(--v-theme-${p})`]));return c.push(...f,...h),c.map((p,g)=>g===0?p:`    ${p}`).join("")});function a(){return{style:[{children:o.value,id:"vuetify-theme-stylesheet",nonce:e.cspNonce||!1}]}}function l(c){const f=c._context.provides.usehead;if(f)if(f.push){const h=f.push(a);He(o,()=>{h.patch(a)})}else wr?(f.addHeadObjs(re(a)),Bo(()=>f.updateDOM())):f.addHeadObjs(a());else{let d=function(){if(!e.isDisabled){if(typeof document<"u"&&!h){const p=document.createElement("style");p.type="text/css",p.id="vuetify-theme-stylesheet",e.cspNonce&&p.setAttribute("nonce",e.cspNonce),h=p,document.head.appendChild(h)}h&&(h.innerHTML=o.value)}},h=wr?document.getElementById("vuetify-theme-stylesheet"):null;He(o,d,{immediate:!0})}}const u=re(()=>e.isDisabled?void 0:`v-theme--${n.value}`);return{install:l,isDisabled:e.isDisabled,name:n,themes:r,current:s,computedThemes:i,themeClasses:u,styles:o,global:{name:n,current:s}}}function ln(t){di("provideTheme");const e=zt(Im,null);if(!e)throw new Error("Could not find Vuetify theme injection");const n=re(()=>{var s;return(s=t.theme)!=null?s:e==null?void 0:e.name.value}),r=re(()=>e.isDisabled?void 0:`v-theme--${n.value}`),i={...e,name:n,themeClasses:r};return ar(Im,i),i}function FU(){di("useTheme");const t=zt(Im,null);if(!t)throw new Error("Could not find Vuetify theme injection");return t}function Tc(t,e,n){t.push(`${e} {
`,...n.map(r=>`  ${r};
`),`}
`)}function LR(t){const e=t.dark?2:1,n=t.dark?1:2,r=[];for(const[i,s]of Object.entries(t.colors)){const o=Wc(s);r.push(`--v-theme-${i}: ${o.r},${o.g},${o.b}`),i.startsWith("on-")||r.push(`--v-theme-${i}-overlay-multiplier: ${dC(s)>.18?e:n}`)}for(const[i,s]of Object.entries(t.variables)){const o=typeof s=="string"&&s.startsWith("#")?Wc(s):void 0,a=o?`${o.r}, ${o.g}, ${o.b}`:void 0;r.push(`--v-${i}: ${a!=null?a:s}`)}return r}function ka(t){const e=Se(),n=Se();if(wr){const r=new ResizeObserver(i=>{t==null||t(i,r),i.length&&(n.value=i[0].contentRect)});qi(()=>{r.disconnect()}),He(e,(i,s)=>{s&&(r.unobserve(s),n.value=void 0),i&&r.observe(i)},{flush:"post"})}return{resizeRef:e,contentRect:zm(n)}}const s_=Symbol.for("vuetify:layout"),IU=Symbol.for("vuetify:layout-item"),FR=1e3,kU=pt({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),$d=pt({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function uxe(){const t=zt(s_);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function Xd(t){var a;const e=zt(s_);if(!e)throw new Error("[Vuetify] Could not find injected layout");const n=(a=t.id)!=null?a:`layout-item-${Li()}`,r=di("useLayoutItem");ar(IU,{id:n});const i=Se(!1);FO(()=>i.value=!0),LO(()=>i.value=!1);const{layoutItemStyles:s,layoutItemScrimStyles:o}=e.register(r,{...t,active:re(()=>i.value?!1:t.active.value),id:n});return qi(()=>e.unregister(n)),{layoutItemStyles:s,layoutRect:e.layoutRect,layoutItemScrimStyles:o}}const cxe=(t,e,n,r)=>{let i={top:0,left:0,right:0,bottom:0};const s=[{id:"",layer:{...i}}];for(const o of t){const a=e.get(o),l=n.get(o),u=r.get(o);if(!a||!l||!u)continue;const c={...i,[a.value]:parseInt(i[a.value],10)+(u.value?parseInt(l.value,10):0)};s.push({id:o,layer:c}),i=c}return s};function RU(t){const e=zt(s_,null),n=re(()=>e?e.rootZIndex.value-100:FR),r=Se([]),i=Yr(new Map),s=Yr(new Map),o=Yr(new Map),a=Yr(new Map),l=Yr(new Map),{resizeRef:u,contentRect:c}=ka(),f=re(()=>{var S;const A=new Map,E=(S=t.overlaps)!=null?S:[];for(const C of E.filter(M=>M.includes(":"))){const[M,D]=C.split(":");if(!r.value.includes(M)||!r.value.includes(D))continue;const T=i.get(M),L=i.get(D),F=s.get(M),k=s.get(D);!T||!L||!F||!k||(A.set(D,{position:T.value,amount:parseInt(F.value,10)}),A.set(M,{position:L.value,amount:-parseInt(k.value,10)}))}return A}),h=re(()=>{const A=[...new Set([...o.values()].map(S=>S.value))].sort((S,C)=>S-C),E=[];for(const S of A){const C=r.value.filter(M=>{var D;return((D=o.get(M))==null?void 0:D.value)===S});E.push(...C)}return cxe(E,i,s,a)}),d=re(()=>!Array.from(l.values()).some(A=>A.value)),p=re(()=>h.value[h.value.length-1].layer),g=re(()=>({"--v-layout-left":et(p.value.left),"--v-layout-right":et(p.value.right),"--v-layout-top":et(p.value.top),"--v-layout-bottom":et(p.value.bottom),...d.value?void 0:{transition:"none"}})),x=re(()=>h.value.slice(1).map((A,E)=>{let{id:S}=A;const{layer:C}=h.value[E],M=s.get(S),D=i.get(S);return{id:S,...C,size:Number(M.value),position:D.value}})),_=A=>x.value.find(E=>E.id===A),m=di("createLayout"),v=Se(!1);hi(()=>{v.value=!0}),ar(s_,{register:(A,E)=>{let{id:S,order:C,position:M,layoutSize:D,elementSize:T,active:L,disableTransitions:F,absolute:k}=E;o.set(S,C),i.set(S,M),s.set(S,D),a.set(S,L),F&&l.set(S,F);const O=Og(IU,m==null?void 0:m.vnode).indexOf(A);O>-1?r.value.splice(O,0,S):r.value.push(S);const $=re(()=>x.value.findIndex(K=>K.id===S)),N=re(()=>n.value+h.value.length*2-$.value*2),W=re(()=>{const K=M.value==="left"||M.value==="right",ee=M.value==="right",Z=M.value==="bottom",J={[M.value]:0,zIndex:N.value,transform:`translate${K?"X":"Y"}(${(L.value?0:-110)*(ee||Z?-1:1)}%)`,position:k.value||n.value!==FR?"absolute":"fixed",...d.value?void 0:{transition:"none"}};if(!v.value)return J;const X=x.value[$.value];if(!X)throw new Error(`[Vuetify] Could not find layout item "${S}"`);const Q=f.value.get(S);return Q&&(X[Q.position]+=Q.amount),{...J,height:K?`calc(100% - ${X.top}px - ${X.bottom}px)`:T.value?`${T.value}px`:void 0,left:ee?void 0:`${X.left}px`,right:ee?`${X.right}px`:void 0,top:M.value!=="bottom"?`${X.top}px`:void 0,bottom:M.value!=="top"?`${X.bottom}px`:void 0,width:K?T.value?`${T.value}px`:void 0:`calc(100% - ${X.left}px - ${X.right}px)`}}),H=re(()=>({zIndex:N.value-1}));return{layoutItemStyles:W,layoutItemScrimStyles:H,zIndex:N}},unregister:A=>{o.delete(A),i.delete(A),s.delete(A),a.delete(A),l.delete(A),r.value=r.value.filter(E=>E!==A)},mainRect:p,mainStyles:g,getLayoutItem:_,items:x,layoutRect:c,rootZIndex:n});const b=re(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),w=re(()=>({zIndex:n.value,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:b,layoutStyles:w,getLayoutItem:_,items:x,layoutRect:c,layoutRef:u}}function OU(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...n}=t,r=ml(e,n),{aliases:i={},components:s={},directives:o={}}=r,a=lbe(r.defaults),l=Ybe(r.display,r.ssr),u=lxe(r.theme),c=Zbe(r.icons),f=wbe(r.locale),h=$be(r.date);return{install:p=>{for(const g in o)p.directive(g,o[g]);for(const g in s)p.component(g,s[g]);for(const g in i)p.component(g,lo({...i[g],name:g,aliasName:i[g].name}));if(u.install(p),p.provide(Lm,a),p.provide(gC,l),p.provide(Im,u),p.provide(mC,c),p.provide(Ad,f),p.provide(yR,h),wr&&r.ssr)if(p.$nuxt)p.$nuxt.hook("app:suspense:resolve",()=>{l.update()});else{const{mount:g}=p;p.mount=function(){const x=g(...arguments);return En(()=>l.update()),p.mount=g,x}}Li.reset(),p.mixin({computed:{$vuetify(){return Yr({defaults:dh.call(this,Lm),display:dh.call(this,gC),theme:dh.call(this,Im),icons:dh.call(this,mC),locale:dh.call(this,Ad),date:dh.call(this,yR)})}}})},defaults:a,display:l,theme:u,icons:c,locale:f,date:h}}const fxe="3.2.1";OU.version=fxe;function dh(t){var r,i,s;const e=this.$,n=(s=(r=e.parent)==null?void 0:r.provides)!=null?s:(i=e.vnode.appContext)==null?void 0:i.provides;if(n&&t in n)return n[t]}const hxe=Oe()({name:"VApp",props:{...Ke(),...kU({fullHeight:!0}),...jt()},setup(t,e){let{slots:n}=e;const r=ln(t),{layoutClasses:i,layoutStyles:s,getLayoutItem:o,items:a,layoutRef:l}=RU(t),{rtlClasses:u}=Dl();return ze(()=>{var c;return P("div",{ref:l,class:["v-application",r.themeClasses.value,i.value,u.value,t.class],style:[s.value,t.style]},[P("div",{class:"v-application__wrap"},[(c=n.default)==null?void 0:c.call(n)])])}),{getLayoutItem:o,items:a,theme:r}}});const pn=Oe(!1)({name:"VDefaultsProvider",props:{defaults:Object,disabled:Boolean,reset:[Number,String],root:Boolean,scoped:Boolean},setup(t,e){let{slots:n}=e;const{defaults:r,disabled:i,reset:s,root:o,scoped:a}=h_(t);return Cr(r,{reset:s,root:o,scoped:a,disabled:i}),()=>{var l;return(l=n.default)==null?void 0:l.call(n)}}});function Ls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"center center",n=arguments.length>2?arguments[2]:void 0;return Oe()({name:t,props:{disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:{type:String,default:n},origin:{type:String,default:e}},setup(r,i){let{slots:s}=i;const o={onBeforeEnter(a){a.style.transformOrigin=r.origin},onLeave(a){if(r.leaveAbsolute){const{offsetTop:l,offsetLeft:u,offsetWidth:c,offsetHeight:f}=a;a._transitionInitialStyles={position:a.style.position,top:a.style.top,left:a.style.left,width:a.style.width,height:a.style.height},a.style.position="absolute",a.style.top=`${l}px`,a.style.left=`${u}px`,a.style.width=`${c}px`,a.style.height=`${f}px`}r.hideOnLeave&&a.style.setProperty("display","none","important")},onAfterLeave(a){if(r.leaveAbsolute&&(a==null?void 0:a._transitionInitialStyles)){const{position:l,top:u,left:c,width:f,height:h}=a._transitionInitialStyles;delete a._transitionInitialStyles,a.style.position=l||"",a.style.top=u||"",a.style.left=c||"",a.style.width=f||"",a.style.height=h||""}}};return()=>{const a=r.group?jW:Ea;return no(a,{name:r.disabled?"":t,css:!r.disabled,...r.group?void 0:{mode:r.mode},...r.disabled?{}:o},s.default)}}})}function BU(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return Oe()({name:t,props:{mode:{type:String,default:n},disabled:Boolean},setup(r,i){let{slots:s}=i;return()=>no(Ea,{name:r.disabled?"":t,css:!r.disabled,...r.disabled?{}:e},s.default)}})}function NU(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",r=Js(`offset-${n}`);return{onBeforeEnter(o){o._parent=o.parentNode,o._initialStyle={transition:o.style.transition,overflow:o.style.overflow,[n]:o.style[n]}},onEnter(o){const a=o._initialStyle;o.style.setProperty("transition","none","important"),o.style.overflow="hidden";const l=`${o[r]}px`;o.style[n]="0",o.offsetHeight,o.style.transition=a.transition,t&&o._parent&&o._parent.classList.add(t),requestAnimationFrame(()=>{o.style[n]=l})},onAfterEnter:s,onEnterCancelled:s,onLeave(o){o._initialStyle={transition:"",overflow:o.style.overflow,[n]:o.style[n]},o.style.overflow="hidden",o.style[n]=`${o[r]}px`,o.offsetHeight,requestAnimationFrame(()=>o.style[n]="0")},onAfterLeave:i,onLeaveCancelled:i};function i(o){t&&o._parent&&o._parent.classList.remove(t),s(o)}function s(o){const a=o._initialStyle[n];o.style.overflow=o._initialStyle.overflow,a!=null&&(o.style[n]=a),delete o._initialStyle}}const vw=Oe()({name:"VDialogTransition",props:{target:Object},setup(t,e){let{slots:n}=e;const r={onBeforeEnter(i){i.style.pointerEvents="none",i.style.visibility="hidden"},async onEnter(i,s){var h;await new Promise(d=>requestAnimationFrame(d)),await new Promise(d=>requestAnimationFrame(d)),i.style.visibility="";const{x:o,y:a,sx:l,sy:u,speed:c}=kR(t.target,i),f=Hc(i,[{transform:`translate(${o}px, ${a}px) scale(${l}, ${u})`,opacity:0},{}],{duration:225*c,easing:fbe});(h=IR(i))==null||h.forEach(d=>{Hc(d,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*c,easing:Fm})}),f.finished.then(()=>s())},onAfterEnter(i){i.style.removeProperty("pointer-events")},onBeforeLeave(i){i.style.pointerEvents="none"},async onLeave(i,s){var h;await new Promise(d=>requestAnimationFrame(d));const{x:o,y:a,sx:l,sy:u,speed:c}=kR(t.target,i);Hc(i,[{},{transform:`translate(${o}px, ${a}px) scale(${l}, ${u})`,opacity:0}],{duration:125*c,easing:hbe}).finished.then(()=>s()),(h=IR(i))==null||h.forEach(d=>{Hc(d,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*c,easing:Fm})})},onAfterLeave(i){i.style.removeProperty("pointer-events")}};return()=>t.target?P(Ea,Je({name:"dialog-transition"},r,{css:!1}),n):P(Ea,{name:"dialog-transition"},n)}});function IR(t){var n;const e=(n=t.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list"))==null?void 0:n.children;return e&&[...e]}function kR(t,e){const n=t.getBoundingClientRect(),r=uD(e),[i,s]=getComputedStyle(e).transformOrigin.split(" ").map(_=>parseFloat(_)),[o,a]=getComputedStyle(e).getPropertyValue("--v-overlay-anchor-origin").split(" ");let l=n.left+n.width/2;o==="left"||a==="left"?l-=n.width/2:(o==="right"||a==="right")&&(l+=n.width/2);let u=n.top+n.height/2;o==="top"||a==="top"?u-=n.height/2:(o==="bottom"||a==="bottom")&&(u+=n.height/2);const c=n.width/r.width,f=n.height/r.height,h=Math.max(1,c,f),d=c/h||0,p=f/h||0,g=r.width*r.height/(window.innerWidth*window.innerHeight),x=g>.12?Math.min(1.5,(g-.12)*10+1):1;return{x:l-(i+r.left),y:u-(s+r.top),sx:d,sy:p,speed:x}}const dxe=Ls("fab-transition","center center","out-in"),pxe=Ls("dialog-bottom-transition"),gxe=Ls("dialog-top-transition"),yC=Ls("fade-transition"),VU=Ls("scale-transition"),mxe=Ls("scroll-x-transition"),vxe=Ls("scroll-x-reverse-transition"),yxe=Ls("scroll-y-transition"),_xe=Ls("scroll-y-reverse-transition"),wxe=Ls("slide-x-transition"),bxe=Ls("slide-x-reverse-transition"),vD=Ls("slide-y-transition"),xxe=Ls("slide-y-reverse-transition"),yw=BU("expand-transition",NU()),yD=BU("expand-x-transition",NU("",!0));const co=pt({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function fo(t){return{dimensionStyles:re(()=>({height:et(t.height),maxHeight:et(t.maxHeight),maxWidth:et(t.maxWidth),minHeight:et(t.minHeight),minWidth:et(t.minWidth),width:et(t.width)}))}}function Sxe(t){return{aspectStyles:re(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const zU=Oe()({name:"VResponsive",props:{aspectRatio:[String,Number],contentClass:String,...Ke(),...co()},setup(t,e){let{slots:n}=e;const{aspectStyles:r}=Sxe(t),{dimensionStyles:i}=fo(t);return ze(()=>{var s;return P("div",{class:["v-responsive",t.class],style:[i.value,t.style]},[P("div",{class:"v-responsive__sizer",style:r.value},null),(s=n.additional)==null?void 0:s.call(n),n.default&&P("div",{class:["v-responsive__content",t.contentClass]},[n.default()])])}),{}}});function Axe(t,e){if(!pD)return;const n=e.modifiers||{},r=e.value,{handler:i,options:s}=typeof r=="object"?r:{handler:r,options:{}},o=new IntersectionObserver(function(){var f;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;const u=(f=t._observe)==null?void 0:f[e.instance.$.uid];if(!u)return;const c=a.some(h=>h.isIntersecting);i&&(!n.quiet||u.init)&&(!n.once||c||u.init)&&i(c,a,l),c&&n.once?GU(t,e):u.init=!0},s);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:o},o.observe(t)}function GU(t,e){var r;const n=(r=t._observe)==null?void 0:r[e.instance.$.uid];!n||(n.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const dv={mounted:Axe,unmounted:GU},Tl=pt({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),Do=(t,e)=>{let{slots:n}=e;const{transition:r,...i}=t,{component:s=Ea,...o}=typeof r=="object"?r:{};return no(s,Je(typeof r=="string"?{name:r}:o,i),n)},Yd=Oe()({name:"VImg",directives:{intersect:dv},props:{aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...Ke(),...Tl()},emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=Se(""),s=Se(),o=Se(t.eager?"loading":"idle"),a=Se(),l=Se(),u=re(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),c=re(()=>u.value.aspect||a.value/l.value||0);He(()=>t.src,()=>{f(o.value!=="idle")}),He(c,(S,C)=>{!S&&C&&s.value&&x(s.value)}),Gm(()=>f());function f(S){if(!(t.eager&&S)&&!(pD&&!S&&!t.eager)){if(o.value="loading",u.value.lazySrc){const C=new Image;C.src=u.value.lazySrc,x(C,null)}!u.value.src||En(()=>{var C,M;if(n("loadstart",((C=s.value)==null?void 0:C.currentSrc)||u.value.src),(M=s.value)!=null&&M.complete){if(s.value.naturalWidth||d(),o.value==="error")return;c.value||x(s.value,null),h()}else c.value||x(s.value),p()})}}function h(){var S;p(),o.value="loaded",n("load",((S=s.value)==null?void 0:S.currentSrc)||u.value.src)}function d(){var S;o.value="error",n("error",((S=s.value)==null?void 0:S.currentSrc)||u.value.src)}function p(){const S=s.value;S&&(i.value=S.currentSrc||S.src)}let g=-1;function x(S){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const M=()=>{clearTimeout(g);const{naturalHeight:D,naturalWidth:T}=S;D||T?(a.value=T,l.value=D):!S.complete&&o.value==="loading"&&C!=null?g=window.setTimeout(M,C):(S.currentSrc.endsWith(".svg")||S.currentSrc.startsWith("data:image/svg+xml"))&&(a.value=1,l.value=1)};M()}const _=re(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),m=()=>{var M;if(!u.value.src||o.value==="idle")return null;const S=P("img",{class:["v-img__img",_.value],src:u.value.src,srcset:u.value.srcset,alt:t.alt,sizes:t.sizes,ref:s,onLoad:h,onError:d},null),C=(M=r.sources)==null?void 0:M.call(r);return P(Do,{transition:t.transition,appear:!0},{default:()=>[Nt(C?P("picture",{class:"v-img__picture"},[C,S]):S,[[$i,o.value==="loaded"]])]})},v=()=>P(Do,{transition:t.transition},{default:()=>[u.value.lazySrc&&o.value!=="loaded"&&P("img",{class:["v-img__img","v-img__img--preload",_.value],src:u.value.lazySrc,alt:t.alt},null)]}),b=()=>r.placeholder?P(Do,{transition:t.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!r.error)&&P("div",{class:"v-img__placeholder"},[r.placeholder()])]}):null,w=()=>r.error?P(Do,{transition:t.transition,appear:!0},{default:()=>[o.value==="error"&&P("div",{class:"v-img__error"},[r.error()])]}):null,A=()=>t.gradient?P("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,E=Se(!1);{const S=He(c,C=>{C&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{E.value=!0})}),S())})}return ze(()=>Nt(P(zU,{class:["v-img",{"v-img--booting":!E.value},t.class],style:[{width:et(t.width==="auto"?a.value:t.width)},t.style],aspectRatio:c.value,"aria-label":t.alt,role:t.alt?"img":void 0},{additional:()=>P(mt,null,[P(m,null,null),P(v,null,null),P(A,null,null),P(b,null,null),P(w,null,null)]),default:r.default}),[[Xi("intersect"),{handler:f,options:t.options},null,{once:!0}]])),{currentSrc:i,image:s,state:o,naturalWidth:a,naturalHeight:l}}}),Tt=pt({tag:{type:String,default:"div"}},"tag"),UU=pt({text:String,...Ke(),...Tt()},"v-toolbar-title"),_D=Oe()({name:"VToolbarTitle",props:UU(),setup(t,e){let{slots:n}=e;return ze(()=>{const r=!!(n.default||n.text||t.text);return P(t.tag,{class:["v-toolbar-title",t.class],style:t.style},{default:()=>{var i;return[r&&P("div",{class:"v-toolbar-title__placeholder"},[n.text?n.text():t.text,(i=n.default)==null?void 0:i.call(n)])]}})}),{}}}),Fs=pt({border:[Boolean,Number,String]},"border");function ho(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml();return{borderClasses:re(()=>{const r=_n(t)?t.value:t.border,i=[];if(r===!0||r==="")i.push(`${e}--border`);else if(typeof r=="string"||r===0)for(const s of String(r).split(" "))i.push(`border-${s}`);return i})}}const Gr=pt({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function pi(t){return{elevationClasses:re(()=>{const n=_n(t)?t.value:t.elevation,r=[];return n==null||r.push(`elevation-${n}`),r})}}const Gn=pt({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function tr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml();return{roundedClasses:re(()=>{const r=_n(t)?t.value:t.rounded,i=[];if(r===!0||r==="")i.push(`${e}--rounded`);else if(typeof r=="string"||r===0)for(const s of String(r).split(" "))i.push(`rounded-${s}`);return i})}}function wD(t){return oD(()=>{const e=[],n={};return t.value.background&&(pR(t.value.background)?n.backgroundColor=t.value.background:e.push(`bg-${t.value.background}`)),t.value.text&&(pR(t.value.text)?(n.color=t.value.text,n.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:n}})}function Ti(t,e){const n=re(()=>({text:_n(t)?t.value:e?t[e]:null})),{colorClasses:r,colorStyles:i}=wD(n);return{textColorClasses:r,textColorStyles:i}}function br(t,e){const n=re(()=>({background:_n(t)?t.value:e?t[e]:null})),{colorClasses:r,colorStyles:i}=wD(n);return{backgroundColorClasses:r,backgroundColorStyles:i}}const Exe=[null,"prominent","default","comfortable","compact"],HU=pt({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:t=>Exe.includes(t)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...Fs(),...Ke(),...Gr(),...Gn(),...Tt({tag:"header"}),...jt()},"v-toolbar"),_C=Oe()({name:"VToolbar",props:HU(),setup(t,e){var h;let{slots:n}=e;const{backgroundColorClasses:r,backgroundColorStyles:i}=br(Ne(t,"color")),{borderClasses:s}=ho(t),{elevationClasses:o}=pi(t),{roundedClasses:a}=tr(t),{themeClasses:l}=ln(t),u=Se(!!(t.extended||((h=n.extension)==null?void 0:h.call(n)))),c=re(()=>parseInt(Number(t.height)+(t.density==="prominent"?Number(t.height):0)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0),10)),f=re(()=>u.value?parseInt(Number(t.extensionHeight)+(t.density==="prominent"?Number(t.extensionHeight):0)-(t.density==="comfortable"?4:0)-(t.density==="compact"?8:0),10):0);return Cr({VBtn:{variant:"text"}}),ze(()=>{var x;const d=!!(t.title||n.title),p=!!(n.image||t.image),g=(x=n.extension)==null?void 0:x.call(n);return u.value=!!(t.extended||g),P(t.tag,{class:["v-toolbar",{"v-toolbar--absolute":t.absolute,"v-toolbar--collapse":t.collapse,"v-toolbar--flat":t.flat,"v-toolbar--floating":t.floating,[`v-toolbar--density-${t.density}`]:!0},r.value,s.value,o.value,a.value,l.value,t.class],style:[i.value,t.style]},{default:()=>[p&&P("div",{key:"image",class:"v-toolbar__image"},[n.image?P(pn,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},n.image):P(Yd,{key:"image-img",cover:!0,src:t.image},null)]),P(pn,{defaults:{VTabs:{height:et(c.value)}}},{default:()=>{var _,m,v;return[P("div",{class:"v-toolbar__content",style:{height:et(c.value)}},[n.prepend&&P("div",{class:"v-toolbar__prepend"},[(_=n.prepend)==null?void 0:_.call(n)]),d&&P(_D,{key:"title",text:t.title},{text:n.title}),(m=n.default)==null?void 0:m.call(n),n.append&&P("div",{class:"v-toolbar__append"},[(v=n.append)==null?void 0:v.call(n)])])]}}),P(pn,{defaults:{VTabs:{height:et(f.value)}}},{default:()=>[P(yw,null,{default:()=>[u.value&&P("div",{class:"v-toolbar__extension",style:{height:et(f.value)}},[g])]})]})]})}),{contentHeight:c,extensionHeight:f}}}),Cxe=pt({scrollTarget:{type:String},scrollThreshold:{type:[String,Number]}},"scroll");function Mxe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{thresholdMetCallback:n,scrollThreshold:r,canScroll:i}=e;let s=0;const o=Se(null),a=Se(0),l=Se(0),u=Se(0),c=Se(!1),f=Se(!1),h=re(()=>{var p,g;return Number((g=(p=t.scrollThreshold)!=null?p:r)!=null?g:300)}),d=()=>{const p=o.value;!p||i&&!i.value||(s=a.value,a.value="window"in p?p.pageYOffset:p.scrollTop,f.value=a.value<s,u.value=Math.abs(a.value-h.value))};return He(f,()=>{l.value=l.value||a.value}),He(c,()=>{l.value=0}),hi(()=>{He(()=>t.scrollTarget,p=>{var x;const g=p?document.querySelector(p):window;if(!g){ku(`Unable to locate element with identifier ${p}`,Aa());return}g!==o.value&&((x=o.value)==null||x.removeEventListener("scroll",d),o.value=g,o.value.addEventListener("scroll",d,{passive:!0}))},{immediate:!0})}),qi(()=>{var p;(p=o.value)==null||p.removeEventListener("scroll",d)}),n&&He(()=>Math.abs(a.value-l.value)>h.value,p=>{p&&n({currentThreshold:u.value,isScrollingUp:f.value,savedScroll:l})},{immediate:!0}),i&&He(i,d,{immediate:!0}),{computedScrollThreshold:h,currentScroll:a,currentThreshold:u,isScrollActive:c,isScrollingUp:f,savedScroll:l}}function xf(){const t=Se(!1);return hi(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:re(()=>t.value?void 0:{transition:"none !important"}),isBooted:zm(t)}}const Dxe=Oe()({name:"VAppBar",props:{scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},...HU(),...$d(),...Cxe(),height:{type:[Number,String],default:64}},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Se(),i=Dt(t,"modelValue"),s=re(()=>{var b,w;const v=new Set((w=(b=t.scrollBehavior)==null?void 0:b.split(" "))!=null?w:[]);return{hide:v.has("hide"),inverted:v.has("inverted"),collapse:v.has("collapse"),elevate:v.has("elevate"),fadeImage:v.has("fade-image")}}),o=re(()=>{const v=s.value;return v.hide||v.inverted||v.collapse||v.elevate||v.fadeImage||!i.value}),{currentScroll:a,currentThreshold:l,computedScrollThreshold:u,isScrollingUp:c}=Mxe(t,{canScroll:o}),f=re(()=>t.collapse||s.value.collapse&&(s.value.inverted?a.value<1:a.value>0)),h=re(()=>t.flat||s.value.elevate&&a.value===(s.value.inverted?1:0)),d=re(()=>Math.min((l.value-a.value)/l.value||1,1)),p=re(()=>s.value.fadeImage?s.value.inverted?1-d.value:d.value:void 0),g=re(()=>{var w,A,E,S;if(s.value.hide&&s.value.inverted)return 0;const v=(A=(w=r.value)==null?void 0:w.contentHeight)!=null?A:0,b=(S=(E=r.value)==null?void 0:E.extensionHeight)!=null?S:0;return v+b});function x(){const v=a.value;s.value.hide?s.value.inverted?i.value=v>u.value:i.value=c.value||v<u.value:s.value.inverted?i.value=a.value===0:i.value=!0}He(a,x,{immediate:!0}),He(s,x);const{ssrBootStyles:_}=xf(),{layoutItemStyles:m}=Xd({id:t.name,order:re(()=>parseInt(t.order,10)),position:Ne(t,"location"),layoutSize:g,elementSize:Se(void 0),active:i,absolute:Ne(t,"absolute")});return ze(()=>{const[v]=_C.filterProps(t);return P(_C,Je({ref:r,class:["v-app-bar",{"v-app-bar--bottom":t.location==="bottom"},t.class],style:[{...m.value,"--v-toolbar-image-opacity":p.value,height:void 0,..._.value},t.style]},v,{collapse:f.value,flat:h.value}),n)}),{}}});const Txe=[null,"default","comfortable","compact"],Ur=pt({density:{type:String,default:"default",validator:t=>Txe.includes(t)}},"density");function Fi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml();return{densityClasses:re(()=>`${e}--density-${t.density}`)}}const Pxe=["elevated","flat","tonal","outlined","text","plain"];function Sf(t,e){return P(mt,null,[t&&P("span",{key:"overlay",class:`${e}__overlay`},null),P("span",{key:"underlay",class:`${e}__underlay`},null)])}const po=pt({color:String,variant:{type:String,default:"elevated",validator:t=>Pxe.includes(t)}},"variant");function Af(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml();const n=re(()=>{const{variant:s}=Hi(t);return`${e}--variant-${s}`}),{colorClasses:r,colorStyles:i}=wD(re(()=>{const{variant:s,color:o}=Hi(t);return{[["elevated","flat"].includes(s)?"background":"text"]:o}}));return{colorClasses:r,colorStyles:i,variantClasses:n}}const WU=pt({divided:Boolean,...Fs(),...Ke(),...Ur(),...Gr(),...Gn(),...Tt(),...jt(),...po()},"v-btn-group"),wC=Oe()({name:"VBtnGroup",props:WU(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{densityClasses:i}=Fi(t),{borderClasses:s}=ho(t),{elevationClasses:o}=pi(t),{roundedClasses:a}=tr(t);Cr({VBtn:{height:"auto",color:Ne(t,"color"),density:Ne(t,"density"),flat:!0,variant:Ne(t,"variant")}}),ze(()=>P(t.tag,{class:["v-btn-group",{"v-btn-group--divided":t.divided},r.value,s.value,i.value,o.value,a.value,t.class],style:t.style},n))}}),jd=pt({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),qd=pt({value:null,disabled:Boolean,selectedClass:String},"group-item");function Jd(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=di("useGroupItem");if(!r)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const i=Li();ar(Symbol.for(`${e.description}:id`),i);const s=zt(e,null);if(!s){if(!n)return s;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const o=Ne(t,"value"),a=re(()=>s.disabled.value||t.disabled);s.register({id:i,value:o,disabled:a},r),qi(()=>{s.unregister(i)});const l=re(()=>s.isSelected(i)),u=re(()=>l.value&&[s.selectedClass.value,t.selectedClass]);return He(l,c=>{r.emit("group:selected",{value:c})}),{id:i,isSelected:l,toggle:()=>s.select(i,!l.value),select:c=>s.select(i,c),selectedClass:u,value:o,disabled:a,group:s}}function Ef(t,e){let n=!1;const r=Yr([]),i=Dt(t,"modelValue",[],h=>h==null?[]:$U(r,qs(h)),h=>{const d=Fxe(r,h);return t.multiple?d:d[0]}),s=di("useGroup");function o(h,d){const p=h,g=Symbol.for(`${e.description}:id`),_=Og(g,s==null?void 0:s.vnode).indexOf(d);_>-1?r.splice(_,0,p):r.push(p)}function a(h){if(n)return;l();const d=r.findIndex(p=>p.id===h);r.splice(d,1)}function l(){const h=r.find(d=>!d.disabled);h&&t.mandatory==="force"&&!i.value.length&&(i.value=[h.id])}hi(()=>{l()}),qi(()=>{n=!0});function u(h,d){const p=r.find(g=>g.id===h);if(!(d&&(p==null?void 0:p.disabled)))if(t.multiple){const g=i.value.slice(),x=g.findIndex(m=>m===h),_=~x;if(d=d!=null?d:!_,_&&t.mandatory&&g.length<=1||!_&&t.max!=null&&g.length+1>t.max)return;x<0&&d?g.push(h):x>=0&&!d&&g.splice(x,1),i.value=g}else{const g=i.value.includes(h);if(t.mandatory&&g)return;i.value=(d!=null?d:!g)?[h]:[]}}function c(h){if(t.multiple&&ku('This method is not supported when using "multiple" prop'),i.value.length){const d=i.value[0],p=r.findIndex(_=>_.id===d);let g=(p+h)%r.length,x=r[g];for(;x.disabled&&g!==p;)g=(g+h)%r.length,x=r[g];if(x.disabled)return;i.value=[r[g].id]}else{const d=r.find(p=>!p.disabled);d&&(i.value=[d.id])}}const f={register:o,unregister:a,selected:i,select:u,disabled:Ne(t,"disabled"),prev:()=>c(r.length-1),next:()=>c(1),isSelected:h=>i.value.includes(h),selectedClass:re(()=>t.selectedClass),items:re(()=>r),getItemIndex:h=>Lxe(r,h)};return ar(e,f),f}function Lxe(t,e){const n=$U(t,[e]);return n.length?t.findIndex(r=>r.id===n[0]):-1}function $U(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r];i.value!=null?e.find(s=>_f(s,i.value))!=null&&n.push(i.id):e.includes(r)&&n.push(i.id)}return n}function Fxe(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r];e.includes(i.id)&&n.push(i.value!=null?i.value:r)}return n}const bD=Symbol.for("vuetify:v-btn-toggle"),Ixe=Oe()({name:"VBtnToggle",props:{...WU(),...jd()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isSelected:r,next:i,prev:s,select:o,selected:a}=Ef(t,bD);return ze(()=>{const[l]=wC.filterProps(t);return P(wC,Je({class:["v-btn-toggle",t.class]},l,{style:t.style}),{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:r,next:i,prev:s,select:o,selected:a})]}})}),{next:i,prev:s,select:o}}});const kxe=["x-small","small","default","large","x-large"],Pl=pt({size:{type:[String,Number],default:"default"}},"size");function Kd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml();return oD(()=>{let n,r;return n_(kxe,t.size)?n=`${e}--size-${t.size}`:t.size&&(r={width:et(t.size),height:et(t.size)}),{sizeClasses:n,sizeStyles:r}})}const Rxe=pt({color:String,start:Boolean,end:Boolean,icon:bt,...Ke(),...Pl(),...Tt({tag:"i"}),...jt()},"v-icon"),yr=Oe()({name:"VIcon",props:Rxe(),setup(t,e){let{attrs:n,slots:r}=e,i;r.default&&(i=re(()=>{var f,h;const c=(f=r.default)==null?void 0:f.call(r);if(!!c)return(h=c.filter(d=>d.type===Pd&&d.children&&typeof d.children=="string")[0])==null?void 0:h.children}));const{themeClasses:s}=ln(t),{iconData:o}=Qbe(i||t),{sizeClasses:a}=Kd(t),{textColorClasses:l,textColorStyles:u}=Ti(Ne(t,"color"));return ze(()=>P(o.value.component,{tag:t.tag,icon:o.value.icon,class:["v-icon","notranslate",s.value,a.value,l.value,{"v-icon--clickable":!!n.onClick,"v-icon--start":t.start,"v-icon--end":t.end},t.class],style:[a.value?void 0:{fontSize:et(t.size),height:et(t.size),width:et(t.size)},u.value,t.style],role:n.onClick?"button":void 0,"aria-hidden":!n.onClick},{default:()=>{var c;return[(c=r.default)==null?void 0:c.call(r)]}})),{}}});function xD(t,e){const n=Se(),r=Se(!1);if(pD){const i=new IntersectionObserver(s=>{t==null||t(s,i),r.value=!!s.find(o=>o.isIntersecting)},e);qi(()=>{i.disconnect()}),He(n,(s,o)=>{o&&(i.unobserve(o),r.value=!1),s&&i.observe(s)},{flush:"post"})}return{intersectionRef:n,isIntersecting:r}}const SD=Oe()({name:"VProgressCircular",props:{bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...Ke(),...Pl(),...Tt({tag:"div"}),...jt()},setup(t,e){let{slots:n}=e;const r=20,i=2*Math.PI*r,s=Se(),{themeClasses:o}=ln(t),{sizeClasses:a,sizeStyles:l}=Kd(t),{textColorClasses:u,textColorStyles:c}=Ti(Ne(t,"color")),{textColorClasses:f,textColorStyles:h}=Ti(Ne(t,"bgColor")),{intersectionRef:d,isIntersecting:p}=xD(),{resizeRef:g,contentRect:x}=ka(),_=re(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),m=re(()=>Number(t.width)),v=re(()=>l.value?Number(t.size):x.value?x.value.width:Math.max(m.value,32)),b=re(()=>r/(1-m.value/v.value)*2),w=re(()=>m.value/v.value*b.value),A=re(()=>et((100-_.value)/100*i));return Bo(()=>{d.value=s.value,g.value=s.value}),ze(()=>P(t.tag,{ref:s,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":p.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},o.value,a.value,u.value,t.class],style:[l.value,c.value,t.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:_.value},{default:()=>[P("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${b.value} ${b.value}`},[P("circle",{class:["v-progress-circular__underlay",f.value],style:h.value,fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":w.value,"stroke-dasharray":i,"stroke-dashoffset":0},null),P("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r,"stroke-width":w.value,"stroke-dasharray":i,"stroke-dashoffset":A.value},null)]),n.default&&P("div",{class:"v-progress-circular__content"},[n.default({value:_.value})])]})),{}}});const bC=Symbol("rippleStop"),Oxe=80;function RR(t,e){t.style.transform=e,t.style.webkitTransform=e}function xC(t){return t.constructor.name==="TouchEvent"}function XU(t){return t.constructor.name==="KeyboardEvent"}const Bxe=function(t,e){var f;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=0,i=0;if(!XU(t)){const h=e.getBoundingClientRect(),d=xC(t)?t.touches[t.touches.length-1]:t;r=d.clientX-h.left,i=d.clientY-h.top}let s=0,o=.3;(f=e._ripple)!=null&&f.circle?(o=.15,s=e.clientWidth/2,s=n.center?s:s+Math.sqrt((r-s)**2+(i-s)**2)/4):s=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const a=`${(e.clientWidth-s*2)/2}px`,l=`${(e.clientHeight-s*2)/2}px`,u=n.center?a:`${r-s}px`,c=n.center?l:`${i-s}px`;return{radius:s,scale:o,x:u,y:c,centerX:a,centerY:l}},o_={show(t,e){var d;let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!((d=e==null?void 0:e._ripple)!=null&&d.enabled))return;const r=document.createElement("span"),i=document.createElement("span");r.appendChild(i),r.className="v-ripple__container",n.class&&(r.className+=` ${n.class}`);const{radius:s,scale:o,x:a,y:l,centerX:u,centerY:c}=Bxe(t,e,n),f=`${s*2}px`;i.className="v-ripple__animation",i.style.width=f,i.style.height=f,e.appendChild(r);const h=window.getComputedStyle(e);h&&h.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),i.classList.add("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--visible"),RR(i,`translate(${a}, ${l}) scale3d(${o},${o},${o})`),i.dataset.activated=String(performance.now()),setTimeout(()=>{i.classList.remove("v-ripple__animation--enter"),i.classList.add("v-ripple__animation--in"),RR(i,`translate(${u}, ${c}) scale3d(1,1,1)`)},0)},hide(t){var s;if(!((s=t==null?void 0:t._ripple)!=null&&s.enabled))return;const e=t.getElementsByClassName("v-ripple__animation");if(e.length===0)return;const n=e[e.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const r=performance.now()-Number(n.dataset.activated),i=Math.max(250-r,0);setTimeout(()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout(()=>{var a;t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),((a=n.parentNode)==null?void 0:a.parentNode)===t&&t.removeChild(n.parentNode)},300)},i)}};function YU(t){return typeof t>"u"||!!t}function km(t){const e={},n=t.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||t[bC])){if(t[bC]=!0,xC(t))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(e.center=n._ripple.centered||XU(t),n._ripple.class&&(e.class=n._ripple.class),xC(t)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{o_.show(t,n,e)},n._ripple.showTimer=window.setTimeout(()=>{var r;(r=n==null?void 0:n._ripple)!=null&&r.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},Oxe)}else o_.show(t,n,e)}}function OR(t){t[bC]=!0}function Es(t){const e=t.currentTarget;if(!!(e!=null&&e._ripple)){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{Es(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),o_.hide(e)}}function jU(t){const e=t.currentTarget;!(e!=null&&e._ripple)||(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let Rm=!1;function qU(t){!Rm&&(t.keyCode===oR.enter||t.keyCode===oR.space)&&(Rm=!0,km(t))}function JU(t){Rm=!1,Es(t)}function KU(t){Rm&&(Rm=!1,Es(t))}function ZU(t,e,n){var o;const{value:r,modifiers:i}=e,s=YU(r);if(s||o_.hide(t),t._ripple=(o=t._ripple)!=null?o:{},t._ripple.enabled=s,t._ripple.centered=i.center,t._ripple.circle=i.circle,lC(r)&&r.class&&(t._ripple.class=r.class),s&&!n){if(i.stop){t.addEventListener("touchstart",OR,{passive:!0}),t.addEventListener("mousedown",OR);return}t.addEventListener("touchstart",km,{passive:!0}),t.addEventListener("touchend",Es,{passive:!0}),t.addEventListener("touchmove",jU,{passive:!0}),t.addEventListener("touchcancel",Es),t.addEventListener("mousedown",km),t.addEventListener("mouseup",Es),t.addEventListener("mouseleave",Es),t.addEventListener("keydown",qU),t.addEventListener("keyup",JU),t.addEventListener("blur",KU),t.addEventListener("dragstart",Es,{passive:!0})}else!s&&n&&QU(t)}function QU(t){t.removeEventListener("mousedown",km),t.removeEventListener("touchstart",km),t.removeEventListener("touchend",Es),t.removeEventListener("touchmove",jU),t.removeEventListener("touchcancel",Es),t.removeEventListener("mouseup",Es),t.removeEventListener("mouseleave",Es),t.removeEventListener("keydown",qU),t.removeEventListener("keyup",JU),t.removeEventListener("dragstart",Es),t.removeEventListener("blur",KU)}function Nxe(t,e){ZU(t,e,!1)}function Vxe(t){delete t._ripple,QU(t)}function zxe(t,e){if(e.value===e.oldValue)return;const n=YU(e.oldValue);ZU(t,e,n)}const cc={mounted:Nxe,unmounted:Vxe,updated:zxe};const BR={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},fc=pt({location:String},"location");function hc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:r}=Dl();return{locationStyles:re(()=>{if(!t.location)return{};const{side:s,align:o}=cC(t.location.split(" ").length>1?t.location:`${t.location} center`,r.value);function a(u){return n?n(u):0}const l={};return s!=="center"&&(e?l[BR[s]]=`calc(100% - ${a(s)}px)`:l[s]=0),o!=="center"?e?l[BR[o]]=`calc(100% - ${a(o)}px)`:l[o]=0:(s==="center"?l.top=l.left="50%":l[{top:"left",bottom:"left",left:"top",right:"top"}[s]]="50%",l.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[s]),l})}}const AD=Oe()({name:"VProgressLinear",props:{absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...Ke(),...fc({location:"top"}),...Gn(),...Tt(),...jt()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),{isRtl:i}=Dl(),{themeClasses:s}=ln(t),{locationStyles:o}=hc(t),{textColorClasses:a,textColorStyles:l}=Ti(t,"color"),{backgroundColorClasses:u,backgroundColorStyles:c}=br(re(()=>t.bgColor||t.color)),{backgroundColorClasses:f,backgroundColorStyles:h}=br(t,"color"),{roundedClasses:d}=tr(t),{intersectionRef:p,isIntersecting:g}=xD(),x=re(()=>parseInt(t.max,10)),_=re(()=>parseInt(t.height,10)),m=re(()=>parseFloat(t.bufferValue)/x.value*100),v=re(()=>parseFloat(r.value)/x.value*100),b=re(()=>i.value!==t.reverse),w=re(()=>t.indeterminate?"fade-transition":"slide-x-transition"),A=re(()=>t.bgOpacity==null?t.bgOpacity:parseFloat(t.bgOpacity));function E(S){if(!p.value)return;const{left:C,right:M,width:D}=p.value.getBoundingClientRect(),T=b.value?D-S.clientX+(M-D):S.clientX-C;r.value=Math.round(T/D*x.value)}return ze(()=>P(t.tag,{ref:p,class:["v-progress-linear",{"v-progress-linear--absolute":t.absolute,"v-progress-linear--active":t.active&&g.value,"v-progress-linear--reverse":b.value,"v-progress-linear--rounded":t.rounded,"v-progress-linear--rounded-bar":t.roundedBar,"v-progress-linear--striped":t.striped},d.value,s.value,t.class],style:[{bottom:t.location==="bottom"?0:void 0,top:t.location==="top"?0:void 0,height:t.active?et(_.value):0,"--v-progress-linear-height":et(_.value),...o.value},t.style],role:"progressbar","aria-hidden":t.active?"false":"true","aria-valuemin":"0","aria-valuemax":t.max,"aria-valuenow":t.indeterminate?void 0:v.value,onClick:t.clickable&&E},{default:()=>[t.stream&&P("div",{key:"stream",class:["v-progress-linear__stream",a.value],style:{...l.value,[b.value?"left":"right"]:et(-_.value),borderTop:`${et(_.value/2)} dotted`,opacity:A.value,top:`calc(50% - ${et(_.value/4)})`,width:et(100-m.value,"%"),"--v-progress-linear-stream-to":et(_.value*(b.value?1:-1))}},null),P("div",{class:["v-progress-linear__background",u.value],style:[c.value,{opacity:A.value,width:et(t.stream?m.value:100,"%")}]},null),P(Ea,{name:w.value},{default:()=>[t.indeterminate?P("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(S=>P("div",{key:S,class:["v-progress-linear__indeterminate",S,f.value],style:h.value},null))]):P("div",{class:["v-progress-linear__determinate",f.value],style:[h.value,{width:et(v.value,"%")}]},null)]}),n.default&&P("div",{class:"v-progress-linear__content"},[n.default({value:v.value,buffer:m.value})])]})),{}}}),ED=pt({loading:[Boolean,String]},"loader");function _w(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml();return{loaderClasses:re(()=>({[`${e}--loading`]:t.loading}))}}function CD(t,e){var r;let{slots:n}=e;return P("div",{class:`${t.name}__loader`},[((r=n.default)==null?void 0:r.call(n,{color:t.color,isActive:t.active}))||P(AD,{active:t.active,color:t.color,height:"2",indeterminate:!0},null)])}const Gxe=["static","relative","fixed","absolute","sticky"],Zd=pt({position:{type:String,validator:t=>Gxe.includes(t)}},"position");function Qd(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml();return{positionClasses:re(()=>t.position?`${e}--${t.position}`:void 0)}}function e8(){var t,e;return(e=(t=di("useRouter"))==null?void 0:t.proxy)==null?void 0:e.$router}function pv(t,e){const n=XH("RouterLink"),r=re(()=>!!(t.href||t.to)),i=re(()=>(r==null?void 0:r.value)||cR(e,"click")||cR(t,"click"));if(typeof n=="string")return{isLink:r,isClickable:i,href:Ne(t,"href")};const s=t.to?n.useLink(t):void 0;return{isLink:r,isClickable:i,route:s==null?void 0:s.route,navigate:s==null?void 0:s.navigate,isActive:s&&re(()=>{var o,a;return t.exact?(o=s.isExactActive)==null?void 0:o.value:(a=s.isActive)==null?void 0:a.value}),href:re(()=>t.to?s==null?void 0:s.route.value.href:t.href)}}const gv=pt({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let XS=!1;function Uxe(t,e){let n=!1,r,i;wr&&(En(()=>{window.addEventListener("popstate",s),r=t==null?void 0:t.beforeEach((o,a,l)=>{XS?n?e(l):l():setTimeout(()=>n?e(l):l()),XS=!0}),i=t==null?void 0:t.afterEach(()=>{XS=!1})}),fs(()=>{window.removeEventListener("popstate",s),r==null||r(),i==null||i()}));function s(o){var a;(a=o.state)!=null&&a.replaced||(n=!0,setTimeout(()=>n=!1))}}function Hxe(t,e){He(()=>{var n;return(n=t.isActive)==null?void 0:n.value},n=>{t.isLink.value&&n&&e&&En(()=>{e(!0)})},{immediate:!0})}const t8=pt({active:{type:Boolean,default:void 0},symbol:{type:null,default:bD},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:bt,appendIcon:bt,block:Boolean,stacked:Boolean,ripple:{type:Boolean,default:!0},text:String,...Fs(),...Ke(),...Ur(),...co(),...Gr(),...qd(),...ED(),...fc(),...Zd(),...Gn(),...gv(),...Pl(),...Tt({tag:"button"}),...jt(),...po({variant:"elevated"})},"VBtn"),Ui=Oe()({name:"VBtn",directives:{Ripple:cc},props:t8(),emits:{"group:selected":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=ln(t),{borderClasses:s}=ho(t),{colorClasses:o,colorStyles:a,variantClasses:l}=Af(t),{densityClasses:u}=Fi(t),{dimensionStyles:c}=fo(t),{elevationClasses:f}=pi(t),{loaderClasses:h}=_w(t),{locationStyles:d}=hc(t),{positionClasses:p}=Qd(t),{roundedClasses:g}=tr(t),{sizeClasses:x,sizeStyles:_}=Kd(t),m=Jd(t,t.symbol,!1),v=pv(t,n),b=re(()=>{var S;return t.active!==void 0?t.active:v.isLink.value?(S=v.isActive)==null?void 0:S.value:m==null?void 0:m.isSelected.value}),w=re(()=>(m==null?void 0:m.disabled.value)||t.disabled),A=re(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border)),E=re(()=>{if(t.value!==void 0)return Object(t.value)===t.value?JSON.stringify(t.value,null,0):t.value});return Hxe(v,m==null?void 0:m.select),ze(()=>{var L,F;const S=v.isLink.value?"a":t.tag,C=!!(t.prependIcon||r.prepend),M=!!(t.appendIcon||r.append),D=!!(t.icon&&t.icon!==!0),T=(m==null?void 0:m.isSelected.value)&&(!v.isLink.value||((L=v.isActive)==null?void 0:L.value))||!m||((F=v.isActive)==null?void 0:F.value);return Nt(P(S,{type:S==="a"?void 0:"button",class:["v-btn",m==null?void 0:m.selectedClass.value,{"v-btn--active":b.value,"v-btn--block":t.block,"v-btn--disabled":w.value,"v-btn--elevated":A.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--stacked":t.stacked},i.value,s.value,T?o.value:void 0,u.value,f.value,h.value,p.value,g.value,x.value,l.value,t.class],style:[T?a.value:void 0,c.value,d.value,_.value,t.style],disabled:w.value||void 0,href:v.href.value,onClick:k=>{var I;w.value||((I=v.navigate)==null||I.call(v,k),m==null||m.toggle())},value:E.value},{default:()=>{var k,I;return[Sf(!0,"v-btn"),!t.icon&&C&&P("span",{key:"prepend",class:"v-btn__prepend"},[r.prepend?P(pn,{key:"prepend-defaults",disabled:!t.prependIcon,defaults:{VIcon:{icon:t.prependIcon}}},r.prepend):P(yr,{key:"prepend-icon",icon:t.prependIcon},null)]),P("span",{class:"v-btn__content","data-no-activator":""},[!r.default&&D?P(yr,{key:"content-icon",icon:t.icon},null):P(pn,{key:"content-defaults",disabled:!D,defaults:{VIcon:{icon:t.icon}}},{default:()=>{var O,$;return[($=(O=r.default)==null?void 0:O.call(r))!=null?$:t.text]}})]),!t.icon&&M&&P("span",{key:"append",class:"v-btn__append"},[r.append?P(pn,{key:"append-defaults",disabled:!t.appendIcon,defaults:{VIcon:{icon:t.appendIcon}}},r.append):P(yr,{key:"append-icon",icon:t.appendIcon},null)]),!!t.loading&&P("span",{key:"loader",class:"v-btn__loader"},[(I=(k=r.loader)==null?void 0:k.call(r))!=null?I:P(SD,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"23",width:"2"},null)])]}}),[[Xi("ripple"),!w.value&&t.ripple,null]])}),{}}}),Wxe=Oe()({name:"VAppBarNavIcon",props:{icon:{type:bt,default:"$menu"},...Ke()},setup(t,e){let{slots:n}=e;return ze(()=>P(Ui,{class:["v-app-bar-nav-icon",t.class],icon:t.icon,style:t.style},n)),{}}}),$xe=Oe()({name:"VToolbarItems",props:{...Ke(),...po({variant:"text"})},setup(t,e){let{slots:n}=e;return Cr({VBtn:{color:Ne(t,"color"),height:"inherit",variant:Ne(t,"variant")}}),ze(()=>{var r;return P("div",{class:["v-toolbar-items",t.class],style:t.style},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),Xxe=Oe()({name:"VAppBarTitle",props:UU(),setup(t,e){let{slots:n}=e;return ze(()=>P(_D,Je(t,{class:"v-app-bar-title"}),n)),{}}});const n8=Ho("v-alert-title"),Yxe=["success","info","warning","error"],jxe=Oe()({name:"VAlert",props:{border:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["top","end","bottom","start"].includes(t)},borderColor:String,closable:Boolean,closeIcon:{type:bt,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:t=>Yxe.includes(t)},...Ke(),...Ur(),...co(),...Gr(),...fc(),...Zd(),...Gn(),...Tt(),...jt(),...po({variant:"flat"})},emits:{"click:close":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const i=Dt(t,"modelValue"),s=re(()=>{var w;if(t.icon!==!1)return t.type?(w=t.icon)!=null?w:`$${t.type}`:t.icon}),o=re(()=>{var w;return{color:(w=t.color)!=null?w:t.type,variant:t.variant}}),{themeClasses:a}=ln(t),{colorClasses:l,colorStyles:u,variantClasses:c}=Af(o),{densityClasses:f}=Fi(t),{dimensionStyles:h}=fo(t),{elevationClasses:d}=pi(t),{locationStyles:p}=hc(t),{positionClasses:g}=Qd(t),{roundedClasses:x}=tr(t),{textColorClasses:_,textColorStyles:m}=Ti(Ne(t,"borderColor")),{t:v}=uo(),b=re(()=>({"aria-label":v(t.closeLabel),onClick(w){i.value=!1,n("click:close",w)}}));return()=>{const w=!!(r.prepend||s.value),A=!!(r.title||t.title),E=!!(t.text||r.text),S=!!(r.close||t.closable);return i.value&&P(t.tag,{class:["v-alert",t.border&&{"v-alert--border":!!t.border,[`v-alert--border-${t.border===!0?"start":t.border}`]:!0},{"v-alert--prominent":t.prominent},a.value,l.value,f.value,d.value,g.value,x.value,c.value,t.class],style:[u.value,h.value,p.value,t.style],role:"alert"},{default:()=>{var C,M,D;return[Sf(!1,"v-alert"),t.border&&P("div",{key:"border",class:["v-alert__border",_.value],style:m.value},null),w&&P("div",{key:"prepend",class:"v-alert__prepend"},[r.prepend?P(pn,{key:"prepend-defaults",disabled:!s.value,defaults:{VIcon:{density:t.density,icon:s.value,size:t.prominent?44:28}}},r.prepend):P(yr,{key:"prepend-icon",density:t.density,icon:s.value,size:t.prominent?44:28},null)]),P("div",{class:"v-alert__content"},[A&&P(n8,{key:"title"},{default:()=>{var T,L;return[(L=(T=r.title)==null?void 0:T.call(r))!=null?L:t.title]}}),E&&((M=(C=r.text)==null?void 0:C.call(r))!=null?M:t.text),(D=r.default)==null?void 0:D.call(r)]),r.append&&P("div",{key:"append",class:"v-alert__append"},[r.append()]),S&&P("div",{key:"close",class:"v-alert__close"},[r.close?P(pn,{key:"close-defaults",defaults:{VBtn:{icon:t.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var T;return[(T=r.close)==null?void 0:T.call(r,{props:b.value})]}}):P(Ui,Je({key:"close-btn",icon:t.closeIcon,size:"x-small",variant:"text"},b.value),null)])]}})}}});function r8(t){const{t:e}=uo();function n(r){var l;let{name:i}=r;const s={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[i],o=t[`onClick:${i}`],a=o&&s?e(`$vuetify.input.${s}`,(l=t.label)!=null?l:""):void 0;return P(yr,{icon:t[`${i}Icon`],"aria-label":a,onClick:o},null)}return{InputIcon:n}}const ep=Oe()({name:"VLabel",props:{text:String,clickable:Boolean,...Ke(),...jt()},setup(t,e){let{slots:n}=e;return ze(()=>{var r;return P("label",{class:["v-label",{"v-label--clickable":t.clickable},t.class],style:t.style},[t.text,(r=n.default)==null?void 0:r.call(n)])}),{}}}),lg=Oe()({name:"VFieldLabel",props:{floating:Boolean,...Ke()},setup(t,e){let{slots:n}=e;return ze(()=>P(ep,{class:["v-field-label",{"v-field-label--floating":t.floating},t.class],style:t.style,"aria-hidden":t.floating||void 0},n)),{}}}),ww=pt({focused:Boolean,"onUpdate:focused":Sa()},"focus");function dc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml();const n=Dt(t,"focused"),r=re(()=>({[`${e}--focused`]:n.value}));function i(){n.value=!0}function s(){n.value=!1}return{focusClasses:r,isFocused:n,focus:i,blur:s}}const qxe=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],bw=pt({appendInnerIcon:bt,bgColor:String,clearable:Boolean,clearIcon:{type:bt,default:"$clear"},active:Boolean,color:String,baseColor:String,dirty:Boolean,disabled:Boolean,error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:bt,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:t=>qxe.includes(t)},"onClick:clear":Sa(),"onClick:appendInner":Sa(),"onClick:prependInner":Sa(),...Ke(),...ED(),...Gn(),...jt()},"v-field"),mv=Oe()({name:"VField",inheritAttrs:!1,props:{id:String,...ww(),...bw()},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{themeClasses:s}=ln(t),{loaderClasses:o}=_w(t),{focusClasses:a,isFocused:l,focus:u,blur:c}=dc(t),{InputIcon:f}=r8(t),{roundedClasses:h}=tr(t),d=re(()=>t.dirty||t.active),p=re(()=>!t.singleLine&&!!(t.label||i.label)),g=Li(),x=re(()=>t.id||`input-${g}`),_=re(()=>`${x.value}-messages`),m=Se(),v=Se(),b=Se(),{backgroundColorClasses:w,backgroundColorStyles:A}=br(Ne(t,"bgColor")),{textColorClasses:E,textColorStyles:S}=Ti(re(()=>t.error||t.disabled?void 0:d.value&&l.value?t.color:t.baseColor));He(d,D=>{if(p.value){const T=m.value.$el,L=v.value.$el;requestAnimationFrame(()=>{const F=uD(T),k=L.getBoundingClientRect(),I=k.x-F.x,O=k.y-F.y-(F.height/2-k.height/2),$=k.width/.75,N=Math.abs($-F.width)>1?{maxWidth:et($)}:void 0,W=getComputedStyle(T),H=getComputedStyle(L),K=parseFloat(W.transitionDuration)*1e3||150,ee=parseFloat(H.getPropertyValue("--v-field-label-scale")),Z=H.getPropertyValue("color");T.style.visibility="visible",L.style.visibility="hidden",Hc(T,{transform:`translate(${I}px, ${O}px) scale(${ee})`,color:Z,...N},{duration:K,easing:Fm,direction:D?"normal":"reverse"}).finished.then(()=>{T.style.removeProperty("visibility"),L.style.removeProperty("visibility")})})}},{flush:"post"});const C=re(()=>({isActive:d,isFocused:l,controlRef:b,blur:c,focus:u}));function M(D){D.target!==document.activeElement&&D.preventDefault()}return ze(()=>{var I,O,$;const D=t.variant==="outlined",T=i["prepend-inner"]||t.prependInnerIcon,L=!!(t.clearable||i.clear),F=!!(i["append-inner"]||t.appendInnerIcon||L),k=i.label?i.label({label:t.label,props:{for:x.value}}):t.label;return P("div",Je({class:["v-field",{"v-field--active":d.value,"v-field--appended":F,"v-field--disabled":t.disabled,"v-field--dirty":t.dirty,"v-field--error":t.error,"v-field--flat":t.flat,"v-field--has-background":!!t.bgColor,"v-field--persistent-clear":t.persistentClear,"v-field--prepended":T,"v-field--reverse":t.reverse,"v-field--single-line":t.singleLine,"v-field--no-label":!k,[`v-field--variant-${t.variant}`]:!0},s.value,w.value,a.value,o.value,h.value,t.class],style:[A.value,S.value,t.style],onClick:M},n),[P("div",{class:"v-field__overlay"},null),P(CD,{name:"v-field",active:!!t.loading,color:t.error?"error":t.color},{default:i.loader}),T&&P("div",{key:"prepend",class:"v-field__prepend-inner"},[t.prependInnerIcon&&P(f,{key:"prepend-icon",name:"prependInner"},null),(I=i["prepend-inner"])==null?void 0:I.call(i,C.value)]),P("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(t.variant)&&p.value&&P(lg,{key:"floating-label",ref:v,class:[E.value],floating:!0,for:x.value},{default:()=>[k]}),P(lg,{ref:m,for:x.value},{default:()=>[k]}),(O=i.default)==null?void 0:O.call(i,{...C.value,props:{id:x.value,class:"v-field__input","aria-describedby":_.value},focus:u,blur:c})]),L&&P(yD,{key:"clear"},{default:()=>[Nt(P("div",{class:"v-field__clearable",onMousedown:N=>{N.preventDefault(),N.stopPropagation()}},[i.clear?i.clear():P(f,{name:"clear"},null)]),[[$i,t.dirty]])]}),F&&P("div",{key:"append",class:"v-field__append-inner"},[($=i["append-inner"])==null?void 0:$.call(i,C.value),t.appendInnerIcon&&P(f,{key:"append-icon",name:"appendInner"},null)]),P("div",{class:["v-field__outline",E.value]},[D&&P(mt,null,[P("div",{class:"v-field__outline__start"},null),p.value&&P("div",{class:"v-field__outline__notch"},[P(lg,{ref:v,floating:!0,for:x.value},{default:()=>[k]})]),P("div",{class:"v-field__outline__end"},null)]),["plain","underlined"].includes(t.variant)&&p.value&&P(lg,{ref:v,floating:!0,for:x.value},{default:()=>[k]})])])}),{controlRef:b}}});function MD(t){const e=Object.keys(mv.props).filter(n=>!Ywe(n)&&n!=="class"&&n!=="style");return Wd(t,e)}const i8=Oe()({name:"VMessages",props:{active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...Ke(),...Tl({transition:{component:vD,leaveAbsolute:!0,group:!0}})},setup(t,e){let{slots:n}=e;const r=re(()=>qs(t.messages)),{textColorClasses:i,textColorStyles:s}=Ti(re(()=>t.color));return ze(()=>P(Do,{transition:t.transition,tag:"div",class:["v-messages",i.value,t.class],style:[s.value,t.style],role:"alert","aria-live":"polite"},{default:()=>[t.active&&r.value.map((o,a)=>P("div",{class:"v-messages__message",key:`${a}-${r.value}`},[n.message?n.message({message:o}):o]))]})),{}}}),s8=Symbol.for("vuetify:form"),Jxe=pt({disabled:Boolean,fastFail:Boolean,readonly:Boolean,modelValue:{type:Boolean,default:null},validateOn:{type:String,default:"input"}},"form");function Kxe(t){const e=Dt(t,"modelValue"),n=re(()=>t.disabled),r=re(()=>t.readonly),i=Se(!1),s=Se([]),o=Se([]);async function a(){const c=[];let f=!0;o.value=[],i.value=!0;for(const h of s.value){const d=await h.validate();if(d.length>0&&(f=!1,c.push({id:h.id,errorMessages:d})),!f&&t.fastFail)break}return o.value=c,i.value=!1,{valid:f,errors:o.value}}function l(){s.value.forEach(c=>c.reset()),e.value=null}function u(){s.value.forEach(c=>c.resetValidation()),o.value=[],e.value=null}return He(s,()=>{let c=0,f=0;const h=[];for(const d of s.value)d.isValid===!1?(f++,h.push({id:d.id,errorMessages:d.errorMessages})):d.isValid===!0&&c++;o.value=h,e.value=f>0?!1:c===s.value.length?!0:null},{deep:!0}),ar(s8,{register:c=>{let{id:f,validate:h,reset:d,resetValidation:p}=c;s.value.some(g=>g.id===f)&&ku(`Duplicate input name "${f}"`),s.value.push({id:f,validate:h,reset:d,resetValidation:p,isValid:null,errorMessages:[]})},unregister:c=>{s.value=s.value.filter(f=>f.id!==c)},update:(c,f,h)=>{const d=s.value.find(p=>p.id===c);!d||(d.isValid=f,d.errorMessages=h)},isDisabled:n,isReadonly:r,isValidating:i,items:s,validateOn:Ne(t,"validateOn")}),{errors:o,isDisabled:n,isReadonly:r,isValidating:i,items:s,validate:a,reset:l,resetValidation:u}}function xw(){return zt(s8,null)}const o8=pt({disabled:Boolean,error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:Boolean,rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...ww()},"validation");function a8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ml(),n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Li();const r=Dt(t,"modelValue"),i=re(()=>t.validationValue===void 0?r.value:t.validationValue),s=xw(),o=Se([]),a=Se(!0),l=re(()=>!!(qs(r.value===""?null:r.value).length||qs(i.value===""?null:i.value).length)),u=re(()=>!!(t.disabled||(s==null?void 0:s.isDisabled.value))),c=re(()=>!!(t.readonly||(s==null?void 0:s.isReadonly.value))),f=re(()=>t.errorMessages.length?qs(t.errorMessages).slice(0,Math.max(0,+t.maxErrors)):o.value),h=re(()=>t.error||f.value.length?!1:t.rules.length&&a.value?null:!0),d=Se(!1),p=re(()=>({[`${e}--error`]:h.value===!1,[`${e}--dirty`]:l.value,[`${e}--disabled`]:u.value,[`${e}--readonly`]:c.value})),g=re(()=>{var b;return(b=t.name)!=null?b:Hi(n)});Gm(()=>{s==null||s.register({id:g.value,validate:v,reset:_,resetValidation:m})}),qi(()=>{s==null||s.unregister(g.value)});const x=re(()=>t.validateOn||(s==null?void 0:s.validateOn.value)||"input");hi(()=>s==null?void 0:s.update(g.value,h.value,f.value)),Yu(()=>x.value==="input",()=>{He(i,()=>{if(i.value!=null)v();else if(t.focused){const b=He(()=>t.focused,w=>{w||v(),b()})}})}),Yu(()=>x.value==="blur",()=>{He(()=>t.focused,b=>{b||v()})}),He(h,()=>{s==null||s.update(g.value,h.value,f.value)});function _(){m(),r.value=null}function m(){a.value=!0,o.value=[]}async function v(){var w;const b=[];d.value=!0;for(const A of t.rules){if(b.length>=+((w=t.maxErrors)!=null?w:1))break;const S=await(typeof A=="function"?A:()=>A)(i.value);if(S!==!0){if(typeof S!="string"){console.warn(`${S} is not a valid value. Rule functions must return boolean true or a string.`);continue}b.push(S)}}return o.value=b,d.value=!1,a.value=!1,o.value}return{errorMessages:f,isDirty:l,isDisabled:u,isReadonly:c,isPristine:a,isValid:h,isValidating:d,reset:_,resetValidation:m,validate:v,validationClasses:p}}const Ll=pt({id:String,appendIcon:bt,prependIcon:bt,hideDetails:[Boolean,String],hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:t=>["horizontal","vertical"].includes(t)},"onClick:prepend":Sa(),"onClick:append":Sa(),...Ke(),...Ur(),...o8()},"v-input"),fi=Oe()({name:"VInput",props:{...Ll()},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r,emit:i}=e;const{densityClasses:s}=Fi(t),{InputIcon:o}=r8(t),a=Li(),l=re(()=>t.id||`input-${a}`),u=re(()=>`${l.value}-messages`),{errorMessages:c,isDirty:f,isDisabled:h,isReadonly:d,isPristine:p,isValid:g,isValidating:x,reset:_,resetValidation:m,validate:v,validationClasses:b}=a8(t,"v-input",l),w=re(()=>({id:l,messagesId:u,isDirty:f,isDisabled:h,isReadonly:d,isPristine:p,isValid:g,isValidating:x,reset:_,resetValidation:m,validate:v})),A=re(()=>c.value.length>0?c.value:t.hint&&(t.persistentHint||t.focused)?t.hint:t.messages);return ze(()=>{var D,T,L,F;const E=!!(r.prepend||t.prependIcon),S=!!(r.append||t.appendIcon),C=A.value.length>0,M=!t.hideDetails||t.hideDetails==="auto"&&(C||!!r.details);return P("div",{class:["v-input",`v-input--${t.direction}`,s.value,b.value,t.class],style:t.style},[E&&P("div",{key:"prepend",class:"v-input__prepend"},[(D=r.prepend)==null?void 0:D.call(r,w.value),t.prependIcon&&P(o,{key:"prepend-icon",name:"prepend"},null)]),r.default&&P("div",{class:"v-input__control"},[(T=r.default)==null?void 0:T.call(r,w.value)]),S&&P("div",{key:"append",class:"v-input__append"},[t.appendIcon&&P(o,{key:"append-icon",name:"append"},null),(L=r.append)==null?void 0:L.call(r,w.value)]),M&&P("div",{class:"v-input__details"},[P(i8,{id:u.value,active:C,messages:A.value},{message:r.message}),(F=r.details)==null?void 0:F.call(r,w.value)])])}),{reset:_,resetValidation:m,validate:v}}});const Sw=Oe()({name:"VCounter",functional:!0,props:{active:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...Ke(),...Tl({transition:{component:vD}})},setup(t,e){let{slots:n}=e;const r=re(()=>t.max?`${t.value} / ${t.max}`:String(t.value));return ze(()=>P(Do,{transition:t.transition},{default:()=>[Nt(P("div",{class:["v-counter",t.class],style:t.style},[n.default?n.default({counter:r.value,max:t.max,value:t.value}):r.value]),[[$i,t.active]])]})),{}}}),YS=Symbol("Forwarded refs");function jS(t,e){let n=t;for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function Wo(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t[YS]=n,new Proxy(t,{get(i,s){if(Reflect.has(i,s))return Reflect.get(i,s);if(!(typeof s=="symbol"||s.startsWith("__"))){for(const o of n)if(o.value&&Reflect.has(o.value,s)){const a=Reflect.get(o.value,s);return typeof a=="function"?a.bind(o.value):a}}},has(i,s){if(Reflect.has(i,s))return!0;if(typeof s=="symbol"||s.startsWith("__"))return!1;for(const o of n)if(o.value&&Reflect.has(o.value,s))return!0;return!1},getOwnPropertyDescriptor(i,s){var a,l;const o=Reflect.getOwnPropertyDescriptor(i,s);if(o)return o;if(!(typeof s=="symbol"||s.startsWith("__"))){for(const u of n){if(!u.value)continue;const c=(l=jS(u.value,s))!=null?l:"_"in u.value?jS((a=u.value._)==null?void 0:a.setupState,s):void 0;if(c)return c}for(const u of n){const c=u.value&&u.value[YS];if(!c)continue;const f=c.slice();for(;f.length;){const h=f.shift(),d=jS(h.value,s);if(d)return d;const p=h.value&&h.value[YS];p&&f.push(...p)}}}}})}const Zxe=["color","file","time","date","datetime-local","week","month"],Aw=pt({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,type:{type:String,default:"text"},modelModifiers:Object,...Ll(),...bw()},"v-text-field"),uf=Oe()({name:"VTextField",directives:{Intersect:dv},inheritAttrs:!1,props:Aw(),emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const s=Dt(t,"modelValue"),{isFocused:o,focus:a,blur:l}=dc(t),u=re(()=>{var w;return typeof t.counterValue=="function"?t.counterValue(s.value):((w=s.value)!=null?w:"").toString().length}),c=re(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter});function f(w,A){var E,S;!t.autofocus||!w||(S=(E=A[0].target)==null?void 0:E.focus)==null||S.call(E)}const h=Se(),d=Se(),p=Se(),g=re(()=>Zxe.includes(t.type)||t.persistentPlaceholder||o.value);function x(){var w;p.value!==document.activeElement&&((w=p.value)==null||w.focus()),o.value||a()}function _(w){r("mousedown:control",w),w.target!==p.value&&(x(),w.preventDefault())}function m(w){x(),r("click:control",w)}function v(w){w.stopPropagation(),x(),En(()=>{s.value=null,aD(t["onClick:clear"],w)})}function b(w){var E;const A=w.target;if(s.value=A.value,((E=t.modelModifiers)==null?void 0:E.trim)&&["text","search","password","tel","url"].includes(t.type)){const S=[A.selectionStart,A.selectionEnd];En(()=>{A.selectionStart=S[0],A.selectionEnd=S[1]})}}return ze(()=>{const w=!!(i.counter||t.counter||t.counterValue),A=!!(w||i.details),[E,S]=wf(n),[{modelValue:C,...M}]=fi.filterProps(t),[D]=MD(t);return P(fi,Je({ref:h,modelValue:s.value,"onUpdate:modelValue":T=>s.value=T,class:["v-text-field",{"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-text-field--flush-details":["plain","underlined"].includes(t.variant)},t.class],style:t.style},E,M,{focused:o.value}),{...i,default:T=>{let{id:L,isDisabled:F,isDirty:k,isReadonly:I,isValid:O}=T;return P(mv,Je({ref:d,onMousedown:_,onClick:m,"onClick:clear":v,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:"textbox"},D,{id:L.value,active:g.value||k.value,dirty:k.value||t.dirty,disabled:F.value,focused:o.value,error:O.value===!1}),{...i,default:$=>{let{props:{class:N,...W}}=$;const H=Nt(P("input",Je({ref:p,value:s.value,onInput:b,autofocus:t.autofocus,readonly:I.value,disabled:F.value,name:t.name,placeholder:t.placeholder,size:1,type:t.type,onFocus:x,onBlur:l},W,S),null),[[Xi("intersect"),{handler:f},null,{once:!0}]]);return P(mt,null,[t.prefix&&P("span",{class:"v-text-field__prefix"},[t.prefix]),i.default?P("div",{class:N,"data-no-activator":""},[i.default(),H]):hl(H,{class:N}),t.suffix&&P("span",{class:"v-text-field__suffix"},[t.suffix])])}})},details:A?T=>{var L;return P(mt,null,[(L=i.details)==null?void 0:L.call(i,T),w&&P(mt,null,[P("span",null,null),P(Sw,{active:t.persistentCounter||o.value,value:u.value,max:c.value},i.counter)])])}:void 0})}),Wo({},h,d,p)}});const l8=Symbol.for("vuetify:selection-control-group"),DD=pt({color:String,disabled:Boolean,error:Boolean,id:String,inline:Boolean,falseIcon:bt,trueIcon:bt,ripple:{type:Boolean,default:!0},multiple:{type:Boolean,default:null},name:String,readonly:Boolean,modelValue:null,type:String,valueComparator:{type:Function,default:_f},...jt(),...Ur()},"v-selection-control-group"),u8=Oe()({name:"VSelectionControlGroup",props:{defaultsTarget:{type:String,default:"VSelectionControl"},...Ke(),...DD()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),i=Li(),s=re(()=>t.id||`v-selection-control-group-${i}`),o=re(()=>t.name||s.value),a=new Set;return ar(l8,{modelValue:r,forceUpdate:()=>{a.forEach(l=>l())},onForceUpdate:l=>{a.add(l),fs(()=>{a.delete(l)})}}),Cr({[t.defaultsTarget]:{color:Ne(t,"color"),disabled:Ne(t,"disabled"),density:Ne(t,"density"),error:Ne(t,"error"),inline:Ne(t,"inline"),modelValue:r,multiple:re(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),name:o,falseIcon:Ne(t,"falseIcon"),trueIcon:Ne(t,"trueIcon"),readonly:Ne(t,"readonly"),ripple:Ne(t,"ripple"),type:Ne(t,"type"),valueComparator:Ne(t,"valueComparator")}}),ze(()=>{var l;return P("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":t.inline},t.class],style:t.style,role:t.type==="radio"?"radiogroup":void 0},[(l=n.default)==null?void 0:l.call(n)])}),{}}}),Ew=pt({label:String,trueValue:null,falseValue:null,value:null,...Ke(),...DD()},"v-selection-control");function Qxe(t){const e=zt(l8,void 0),{densityClasses:n}=Fi(t),r=Dt(t,"modelValue"),i=re(()=>t.trueValue!==void 0?t.trueValue:t.value!==void 0?t.value:!0),s=re(()=>t.falseValue!==void 0?t.falseValue:!1),o=re(()=>!!t.multiple||t.multiple==null&&Array.isArray(r.value)),a=re({get(){const f=e?e.modelValue.value:r.value;return o.value?f.some(h=>t.valueComparator(h,i.value)):t.valueComparator(f,i.value)},set(f){if(t.readonly)return;const h=f?i.value:s.value;let d=h;o.value&&(d=f?[...qs(r.value),h]:qs(r.value).filter(p=>!t.valueComparator(p,i.value))),e?e.modelValue.value=d:r.value=d}}),{textColorClasses:l,textColorStyles:u}=Ti(re(()=>a.value&&!t.error&&!t.disabled?t.color:void 0)),c=re(()=>a.value?t.trueIcon:t.falseIcon);return{group:e,densityClasses:n,trueValue:i,falseValue:s,model:a,textColorClasses:l,textColorStyles:u,icon:c}}const Ed=Oe()({name:"VSelectionControl",directives:{Ripple:cc},inheritAttrs:!1,props:Ew(),emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{group:i,densityClasses:s,icon:o,model:a,textColorClasses:l,textColorStyles:u,trueValue:c}=Qxe(t),f=Li(),h=re(()=>t.id||`input-${f}`),d=Se(!1),p=Se(!1),g=Se();i==null||i.onForceUpdate(()=>{g.value&&(g.value.checked=a.value)});function x(v){d.value=!0,(!pC||pC&&v.target.matches(":focus-visible"))&&(p.value=!0)}function _(){d.value=!1,p.value=!1}function m(v){t.readonly&&i&&En(()=>i.forceUpdate()),a.value=v.target.checked}return ze(()=>{var A,E;const v=r.label?r.label({label:t.label,props:{for:h.value}}):t.label,[b,w]=wf(n);return P("div",Je({class:["v-selection-control",{"v-selection-control--dirty":a.value,"v-selection-control--disabled":t.disabled,"v-selection-control--error":t.error,"v-selection-control--focused":d.value,"v-selection-control--focus-visible":p.value,"v-selection-control--inline":t.inline},s.value,t.class]},b,{style:t.style}),[P("div",{class:["v-selection-control__wrapper",l.value],style:u.value},[(A=r.default)==null?void 0:A.call(r),Nt(P("div",{class:["v-selection-control__input"]},[o.value&&P(yr,{key:"icon",icon:o.value},null),P("input",Je({ref:g,checked:a.value,disabled:t.disabled,id:h.value,onBlur:_,onFocus:x,onInput:m,"aria-disabled":t.readonly,type:t.type,value:c.value,name:t.name,"aria-checked":t.type==="checkbox"?a.value:void 0},w),null),(E=r.input)==null?void 0:E.call(r,{model:a,textColorClasses:l,textColorStyles:u,props:{onFocus:x,onBlur:_,id:h.value}})]),[[Xi("ripple"),t.ripple&&[!t.disabled&&!t.readonly,null,["center","circle"]]]])]),v&&P(ep,{for:h.value,clickable:!0},{default:()=>[v]})])}),{isFocused:d,input:g}}}),c8=pt({indeterminate:Boolean,indeterminateIcon:{type:bt,default:"$checkboxIndeterminate"},...Ew({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"v-checkbox-btn"),Cd=Oe()({name:"VCheckboxBtn",props:c8(),emits:{"update:modelValue":t=>!0,"update:indeterminate":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"indeterminate"),i=Dt(t,"modelValue");function s(l){r.value&&(r.value=!1)}const o=re(()=>t.indeterminate?t.indeterminateIcon:t.falseIcon),a=re(()=>t.indeterminate?t.indeterminateIcon:t.trueIcon);return ze(()=>P(Ed,Je(t,{modelValue:i.value,"onUpdate:modelValue":[l=>i.value=l,s],class:["v-checkbox-btn",t.class],style:t.style,type:"checkbox",inline:!0,falseIcon:o.value,trueIcon:a.value,"aria-checked":t.indeterminate?"mixed":void 0}),n)),{}}}),eSe=Oe()({name:"VCheckbox",inheritAttrs:!1,props:{...Ll(),...Na(c8(),["inline"])},emits:{"update:focused":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const{isFocused:i,focus:s,blur:o}=dc(t),a=Li(),l=re(()=>t.id||`checkbox-${a}`);return ze(()=>{const[u,c]=wf(n),[f,h]=fi.filterProps(t),[d,p]=Cd.filterProps(t);return P(fi,Je({class:["v-checkbox",t.class]},u,f,{id:l.value,focused:i.value,style:t.style}),{...r,default:g=>{let{id:x,messagesId:_,isDisabled:m,isReadonly:v}=g;return P(Cd,Je(d,{id:x.value,"aria-describedby":_.value,disabled:m.value,readonly:v.value},c,{onFocus:s,onBlur:o}),r)}})}),{}}});const tSe=pt({start:Boolean,end:Boolean,icon:bt,image:String,...Ke(),...Ur(),...Gn(),...Pl(),...Tt(),...jt(),...po({variant:"flat"})},"v-avatar"),ju=Oe()({name:"VAvatar",props:tSe(),setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{colorClasses:i,colorStyles:s,variantClasses:o}=Af(t),{densityClasses:a}=Fi(t),{roundedClasses:l}=tr(t),{sizeClasses:u,sizeStyles:c}=Kd(t);return ze(()=>P(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},r.value,i.value,a.value,l.value,u.value,o.value,t.class],style:[s.value,c.value,t.style]},{default:()=>{var f;return[t.image?P(Yd,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?P(yr,{key:"icon",icon:t.icon},null):(f=n.default)==null?void 0:f.call(n),Sf(!1,"v-avatar")]}})),{}}});const f8=Symbol.for("vuetify:v-chip-group"),nSe=Oe()({name:"VChipGroup",props:{column:Boolean,filter:Boolean,valueComparator:{type:Function,default:_f},...Ke(),...jd({selectedClass:"v-chip--selected"}),...Tt(),...jt(),...po({variant:"tonal"})},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{isSelected:i,select:s,next:o,prev:a,selected:l}=Ef(t,f8);return Cr({VChip:{color:Ne(t,"color"),disabled:Ne(t,"disabled"),filter:Ne(t,"filter"),variant:Ne(t,"variant")}}),ze(()=>P(t.tag,{class:["v-chip-group",{"v-chip-group--column":t.column},r.value,t.class],style:t.style},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:i,select:s,next:o,prev:a,selected:l.value})]}})),{}}}),vv=Oe()({name:"VChip",directives:{Ripple:cc},props:{activeClass:String,appendAvatar:String,appendIcon:bt,closable:Boolean,closeIcon:{type:bt,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:bt,ripple:{type:Boolean,default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:Sa(),onClickOnce:Sa(),...Fs(),...Ke(),...Ur(),...Gr(),...qd(),...Gn(),...gv(),...Pl(),...Tt({tag:"span"}),...jt(),...po({variant:"tonal"})},emits:{"click:close":t=>!0,"update:modelValue":t=>!0,"group:selected":t=>!0,click:t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{t:s}=uo(),{borderClasses:o}=ho(t),{colorClasses:a,colorStyles:l,variantClasses:u}=Af(t),{densityClasses:c}=Fi(t),{elevationClasses:f}=pi(t),{roundedClasses:h}=tr(t),{sizeClasses:d}=Kd(t),{themeClasses:p}=ln(t),g=Dt(t,"modelValue"),x=Jd(t,f8,!1),_=pv(t,n),m=re(()=>t.link!==!1&&_.isLink.value),v=re(()=>!t.disabled&&t.link!==!1&&(!!x||t.link||_.isClickable.value)),b=re(()=>({"aria-label":s(t.closeLabel),onClick(E){g.value=!1,r("click:close",E)}}));function w(E){var S;r("click",E),v.value&&((S=_.navigate)==null||S.call(_,E),x==null||x.toggle())}function A(E){(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),w(E))}return()=>{const E=_.isLink.value?"a":t.tag,S=!!(t.appendIcon||t.appendAvatar),C=!!(S||i.append),M=!!(i.close||t.closable),D=!!(i.filter||t.filter)&&x,T=!!(t.prependIcon||t.prependAvatar),L=!!(T||i.prepend),F=!x||x.isSelected.value;return g.value&&Nt(P(E,{class:["v-chip",{"v-chip--disabled":t.disabled,"v-chip--label":t.label,"v-chip--link":v.value,"v-chip--filter":D,"v-chip--pill":t.pill},p.value,o.value,F?a.value:void 0,c.value,f.value,h.value,d.value,u.value,x==null?void 0:x.selectedClass.value,t.class],style:[F?l.value:void 0,t.style],disabled:t.disabled||void 0,draggable:t.draggable,href:_.href.value,tabindex:v.value?0:void 0,onClick:w,onKeydown:v.value&&!m.value&&A},{default:()=>{var k,I;return[Sf(v.value,"v-chip"),D&&P(yD,{key:"filter"},{default:()=>[Nt(P("div",{class:"v-chip__filter"},[i.filter?Nt(P(pn,{key:"filter-defaults",disabled:!t.filterIcon,defaults:{VIcon:{icon:t.filterIcon}}},null),[[Xi("slot"),i.filter,"default"]]):P(yr,{key:"filter-icon",icon:t.filterIcon},null)]),[[$i,x.isSelected.value]])]}),L&&P("div",{key:"prepend",class:"v-chip__prepend"},[i.prepend?P(pn,{key:"prepend-defaults",disabled:!T,defaults:{VAvatar:{image:t.prependAvatar,start:!0},VIcon:{icon:t.prependIcon,start:!0}}},i.prepend):P(mt,null,[t.prependIcon&&P(yr,{key:"prepend-icon",icon:t.prependIcon,start:!0},null),t.prependAvatar&&P(ju,{key:"prepend-avatar",image:t.prependAvatar,start:!0},null)])]),(I=(k=i.default)==null?void 0:k.call(i,{isSelected:x==null?void 0:x.isSelected.value,selectedClass:x==null?void 0:x.selectedClass.value,select:x==null?void 0:x.select,toggle:x==null?void 0:x.toggle,value:x==null?void 0:x.value.value,disabled:t.disabled}))!=null?I:t.text,C&&P("div",{key:"append",class:"v-chip__append"},[i.append?P(pn,{key:"append-defaults",disabled:!S,defaults:{VAvatar:{end:!0,image:t.appendAvatar},VIcon:{end:!0,icon:t.appendIcon}}},i.append):P(mt,null,[t.appendIcon&&P(yr,{key:"append-icon",end:!0,icon:t.appendIcon},null),t.appendAvatar&&P(ju,{key:"append-avatar",end:!0,image:t.appendAvatar},null)])]),M&&P("div",Je({key:"close",class:"v-chip__close"},b.value),[i.close?P(pn,{key:"close-defaults",defaults:{VIcon:{icon:t.closeIcon,size:"x-small"}}},i.close):P(yr,{key:"close-icon",icon:t.closeIcon,size:"x-small"},null)])]}}),[[Xi("ripple"),v.value&&t.ripple,null]])}}});const h8=Oe()({name:"VDivider",props:{color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...Ke(),...jt()},setup(t,e){let{attrs:n}=e;const{themeClasses:r}=ln(t),{textColorClasses:i,textColorStyles:s}=Ti(Ne(t,"color")),o=re(()=>{const a={};return t.length&&(a[t.vertical?"maxHeight":"maxWidth"]=et(t.length)),t.thickness&&(a[t.vertical?"borderRightWidth":"borderTopWidth"]=et(t.thickness)),a});return ze(()=>P("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},r.value,i.value,t.class],style:[o.value,s.value,t.style],"aria-orientation":!n.role||n.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null)),{}}}),SC=Symbol.for("vuetify:list");function d8(){const t=zt(SC,{hasPrepend:Se(!1),updateHasPrepend:()=>null}),e={hasPrepend:Se(!1),updateHasPrepend:n=>{n&&(e.hasPrepend.value=n)}};return ar(SC,e),t}function p8(){return zt(SC,null)}const rSe={open:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(n){const s=new Set;s.add(e);let o=i.get(e);for(;o!=null;)s.add(o),o=i.get(o);return s}else return r.delete(e),r},select:()=>null},g8={open:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(n){let s=i.get(e);for(r.add(e);s!=null&&s!==e;)r.add(s),s=i.get(s);return r}else r.delete(e);return r},select:()=>null},iSe={open:g8.open,select:t=>{let{id:e,value:n,opened:r,parents:i}=t;if(!n)return r;const s=[];let o=i.get(e);for(;o!=null;)s.push(o),o=i.get(o);return new Set(s)}},TD=t=>{const e={select:n=>{let{id:r,value:i,selected:s}=n;if(r=Ye(r),t&&!i){const o=Array.from(s.entries()).reduce((a,l)=>{let[u,c]=l;return c==="on"?[...a,u]:a},[]);if(o.length===1&&o[0]===r)return s}return s.set(r,i?"on":"off"),s},in:(n,r,i)=>{let s=new Map;for(const o of n||[])s=e.select({id:o,value:!0,selected:new Map(s),children:r,parents:i});return s},out:n=>{const r=[];for(const[i,s]of n.entries())s==="on"&&r.push(i);return r}};return e},m8=t=>{const e=TD(t);return{select:r=>{let{selected:i,id:s,...o}=r;s=Ye(s);const a=i.has(s)?new Map([[s,i.get(s)]]):new Map;return e.select({...o,id:s,selected:a})},in:(r,i,s)=>{let o=new Map;return r!=null&&r.length&&(o=e.in(r.slice(0,1),i,s)),o},out:(r,i,s)=>e.out(r,i,s)}},sSe=t=>{const e=TD(t);return{select:r=>{let{id:i,selected:s,children:o,...a}=r;return i=Ye(i),o.has(i)?s:e.select({id:i,selected:s,children:o,...a})},in:e.in,out:e.out}},oSe=t=>{const e=m8(t);return{select:r=>{let{id:i,selected:s,children:o,...a}=r;return i=Ye(i),o.has(i)?s:e.select({id:i,selected:s,children:o,...a})},in:e.in,out:e.out}},aSe=t=>{const e={select:n=>{let{id:r,value:i,selected:s,children:o,parents:a}=n;r=Ye(r);const l=new Map(s),u=[r];for(;u.length;){const f=u.shift();s.set(f,i?"on":"off"),o.has(f)&&u.push(...o.get(f))}let c=a.get(r);for(;c;){const f=o.get(c),h=f.every(p=>s.get(p)==="on"),d=f.every(p=>!s.has(p)||s.get(p)==="off");s.set(c,h?"on":d?"off":"indeterminate"),c=a.get(c)}return t&&!i&&Array.from(s.entries()).reduce((h,d)=>{let[p,g]=d;return g==="on"?[...h,p]:h},[]).length===0?l:s},in:(n,r,i)=>{let s=new Map;for(const o of n||[])s=e.select({id:o,value:!0,selected:new Map(s),children:r,parents:i});return s},out:(n,r)=>{const i=[];for(const[s,o]of n.entries())o==="on"&&!r.has(s)&&i.push(s);return i}};return e},Om=Symbol.for("vuetify:nested"),v8={id:Se(),root:{register:()=>null,unregister:()=>null,parents:Se(new Map),children:Se(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:Se(new Set),selected:Se(new Map),selectedValues:Se([])}},lSe=pt({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),uSe=t=>{let e=!1;const n=Se(new Map),r=Se(new Map),i=Dt(t,"opened",t.opened,f=>new Set(f),f=>[...f.values()]),s=re(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single-leaf":return oSe(t.mandatory);case"leaf":return sSe(t.mandatory);case"independent":return TD(t.mandatory);case"single-independent":return m8(t.mandatory);case"classic":default:return aSe(t.mandatory)}}),o=re(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return iSe;case"single":return rSe;case"multiple":default:return g8}}),a=Dt(t,"selected",t.selected,f=>s.value.in(f,n.value,r.value),f=>s.value.out(f,n.value,r.value));qi(()=>{e=!0});function l(f){const h=[];let d=f;for(;d!=null;)h.unshift(d),d=r.value.get(d);return h}const u=di("nested"),c={id:Se(),root:{opened:i,selected:a,selectedValues:re(()=>{const f=[];for(const[h,d]of a.value.entries())d==="on"&&f.push(h);return f}),register:(f,h,d)=>{h&&f!==h&&r.value.set(f,h),d&&n.value.set(f,[]),h!=null&&n.value.set(h,[...n.value.get(h)||[],f])},unregister:f=>{var d;if(e)return;n.value.delete(f);const h=r.value.get(f);if(h){const p=(d=n.value.get(h))!=null?d:[];n.value.set(h,p.filter(g=>g!==f))}r.value.delete(f),i.value.delete(f)},open:(f,h,d)=>{u.emit("click:open",{id:f,value:h,path:l(f),event:d});const p=o.value.open({id:f,value:h,opened:new Set(i.value),children:n.value,parents:r.value,event:d});p&&(i.value=p)},openOnSelect:(f,h,d)=>{const p=o.value.select({id:f,value:h,selected:new Map(a.value),opened:new Set(i.value),children:n.value,parents:r.value,event:d});p&&(i.value=p)},select:(f,h,d)=>{u.emit("click:select",{id:f,value:h,path:l(f),event:d});const p=s.value.select({id:f,value:h,selected:new Map(a.value),children:n.value,parents:r.value,event:d});p&&(a.value=p),c.root.openOnSelect(f,h,d)},children:n,parents:r}};return ar(Om,c),c.root},y8=(t,e)=>{const n=zt(Om,v8),r=Symbol(Li()),i=re(()=>{var o;return(o=t.value)!=null?o:r}),s={...n,id:i,open:(o,a)=>n.root.open(i.value,o,a),openOnSelect:(o,a)=>n.root.openOnSelect(i.value,o,a),isOpen:re(()=>n.root.opened.value.has(i.value)),parent:re(()=>n.root.parents.value.get(i.value)),select:(o,a)=>n.root.select(i.value,o,a),isSelected:re(()=>n.root.selected.value.get(Ye(i.value))==="on"),isIndeterminate:re(()=>n.root.selected.value.get(i.value)==="indeterminate"),isLeaf:re(()=>!n.root.children.value.get(i.value)),isGroupActivator:n.isGroupActivator};return!n.isGroupActivator&&n.root.register(i.value,n.id.value,e),qi(()=>{!n.isGroupActivator&&n.root.unregister(i.value)}),e&&ar(Om,s),s},cSe=()=>{const t=zt(Om,v8);ar(Om,{...t,isGroupActivator:!0})},fSe=lo({name:"VListGroupActivator",setup(t,e){let{slots:n}=e;return cSe(),()=>{var r;return(r=n.default)==null?void 0:r.call(n)}}}),hSe=pt({activeColor:String,color:String,collapseIcon:{type:bt,default:"$collapse"},expandIcon:{type:bt,default:"$expand"},prependIcon:bt,appendIcon:bt,fluid:Boolean,subgroup:Boolean,value:null,...Ke(),...Tt()},"v-list-group"),AC=Oe()({name:"VListGroup",props:{title:String,...hSe()},setup(t,e){let{slots:n}=e;const{isOpen:r,open:i,id:s}=y8(Ne(t,"value"),!0),o=re(()=>`v-list-group--id-${String(s.value)}`),a=p8(),{isBooted:l}=xf();function u(d){i(!r.value,d)}const c=re(()=>({onClick:u,class:"v-list-group__header",id:o.value})),f=re(()=>r.value?t.collapseIcon:t.expandIcon),h=re(()=>({VListItem:{active:r.value,activeColor:t.activeColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&f.value,appendIcon:t.appendIcon||!t.subgroup&&f.value,title:t.title,value:t.value}}));return ze(()=>P(t.tag,{class:["v-list-group",{"v-list-group--prepend":a==null?void 0:a.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":r.value},t.class],style:t.style},{default:()=>[n.activator&&P(pn,{defaults:h.value},{default:()=>[P(fSe,null,{default:()=>[n.activator({props:c.value,isOpen:r.value})]})]}),P(Do,{transition:{component:yw},disabled:!l.value},{default:()=>{var d;return[Nt(P("div",{class:"v-list-group__items",role:"group","aria-labelledby":o.value},[(d=n.default)==null?void 0:d.call(n)]),[[$i,r.value]])]}})]})),{}}});const _8=Ho("v-list-item-subtitle"),w8=Ho("v-list-item-title"),vl=Oe()({name:"VListItem",directives:{Ripple:cc},props:{active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:bt,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:bt,ripple:{type:Boolean,default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:Sa(),onClickOnce:Sa(),...Fs(),...Ke(),...Ur(),...co(),...Gr(),...Gn(),...gv(),...Tt(),...jt(),...po({variant:"text"})},emits:{click:t=>!0},setup(t,e){let{attrs:n,slots:r,emit:i}=e;const s=pv(t,n),o=re(()=>{var O;return(O=t.value)!=null?O:s.href.value}),{select:a,isSelected:l,isIndeterminate:u,isGroupActivator:c,root:f,parent:h,openOnSelect:d}=y8(o,!1),p=p8(),g=re(()=>{var O;return t.active!==!1&&(t.active||((O=s.isActive)==null?void 0:O.value)||l.value)}),x=re(()=>t.link!==!1&&s.isLink.value),_=re(()=>!t.disabled&&t.link!==!1&&(t.link||s.isClickable.value||t.value!=null&&!!p)),m=re(()=>t.rounded||t.nav),v=re(()=>{var O;return{color:g.value&&(O=t.activeColor)!=null?O:t.color,variant:t.variant}});He(()=>{var O;return(O=s.isActive)==null?void 0:O.value},O=>{O&&h.value!=null&&f.open(h.value,!0),O&&d(O)},{immediate:!0});const{themeClasses:b}=ln(t),{borderClasses:w}=ho(t),{colorClasses:A,colorStyles:E,variantClasses:S}=Af(v),{densityClasses:C}=Fi(t),{dimensionStyles:M}=fo(t),{elevationClasses:D}=pi(t),{roundedClasses:T}=tr(m),L=re(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),F=re(()=>({isActive:g.value,select:a,isSelected:l.value,isIndeterminate:u.value}));function k(O){var $;i("click",O),!(c||!_.value)&&(($=s.navigate)==null||$.call(s,O),t.value!=null&&a(!l.value,O))}function I(O){(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),k(O))}return ze(()=>{const O=x.value?"a":t.tag,$=!p||l.value||g.value,N=r.title||t.title,W=r.subtitle||t.subtitle,H=!!(t.appendAvatar||t.appendIcon),K=!!(H||r.append),ee=!!(t.prependAvatar||t.prependIcon),Z=!!(ee||r.prepend);return p==null||p.updateHasPrepend(Z),Nt(P(O,{class:["v-list-item",{"v-list-item--active":g.value,"v-list-item--disabled":t.disabled,"v-list-item--link":_.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!Z&&(p==null?void 0:p.hasPrepend.value),[`${t.activeClass}`]:t.activeClass&&g.value},b.value,w.value,$?A.value:void 0,C.value,D.value,L.value,T.value,S.value,t.class],style:[$?E.value:void 0,M.value,t.style],href:s.href.value,tabindex:_.value?0:void 0,onClick:k,onKeydown:_.value&&!x.value&&I},{default:()=>{var J;return[Sf(_.value||g.value,"v-list-item"),Z&&P("div",{key:"prepend",class:"v-list-item__prepend"},[r.prepend?P(pn,{key:"prepend-defaults",disabled:!ee,defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>{var X;return[(X=r.prepend)==null?void 0:X.call(r,F.value)]}}):P(mt,null,[t.prependAvatar&&P(ju,{key:"prepend-avatar",density:t.density,image:t.prependAvatar},null),t.prependIcon&&P(yr,{key:"prepend-icon",density:t.density,icon:t.prependIcon},null)])]),P("div",{class:"v-list-item__content","data-no-activator":""},[N&&P(w8,{key:"title"},{default:()=>{var X,Q;return[(Q=(X=r.title)==null?void 0:X.call(r,{title:t.title}))!=null?Q:t.title]}}),W&&P(_8,{key:"subtitle"},{default:()=>{var X,Q;return[(Q=(X=r.subtitle)==null?void 0:X.call(r,{subtitle:t.subtitle}))!=null?Q:t.subtitle]}}),(J=r.default)==null?void 0:J.call(r,F.value)]),K&&P("div",{key:"append",class:"v-list-item__append"},[r.append?P(pn,{key:"append-defaults",disabled:!H,defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>{var X;return[(X=r.append)==null?void 0:X.call(r,F.value)]}}):P(mt,null,[t.appendIcon&&P(yr,{key:"append-icon",density:t.density,icon:t.appendIcon},null),t.appendAvatar&&P(ju,{key:"append-avatar",density:t.density,image:t.appendAvatar},null)])])]}}),[[Xi("ripple"),_.value&&t.ripple]])}),{}}}),b8=Oe()({name:"VListSubheader",props:{color:String,inset:Boolean,sticky:Boolean,title:String,...Ke(),...Tt()},setup(t,e){let{slots:n}=e;const{textColorClasses:r,textColorStyles:i}=Ti(Ne(t,"color"));return ze(()=>{const s=!!(n.default||t.title);return P(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},r.value,t.class],style:[{textColorStyles:i},t.style]},{default:()=>{var o,a;return[s&&P("div",{class:"v-list-subheader__text"},[(a=(o=n.default)==null?void 0:o.call(n))!=null?a:t.title])]}})}),{}}}),x8=Oe()({name:"VListChildren",props:{items:Array},setup(t,e){let{slots:n}=e;return d8(),()=>{var r,i,s;return(s=(r=n.default)==null?void 0:r.call(n))!=null?s:(i=t.items)==null?void 0:i.map(o=>{var p,g,x,_;let{children:a,props:l,type:u,raw:c}=o;if(u==="divider")return(g=(p=n.divider)==null?void 0:p.call(n,{props:l}))!=null?g:P(h8,l,null);if(u==="subheader")return(_=(x=n.subheader)==null?void 0:x.call(n,{props:l}))!=null?_:P(b8,l,{default:n.subheader});const f={subtitle:n.subtitle?m=>{var v;return(v=n.subtitle)==null?void 0:v.call(n,{...m,item:c})}:void 0,prepend:n.prepend?m=>{var v;return(v=n.prepend)==null?void 0:v.call(n,{...m,item:c})}:void 0,append:n.append?m=>{var v;return(v=n.append)==null?void 0:v.call(n,{...m,item:c})}:void 0,default:n.default?m=>{var v;return(v=n.default)==null?void 0:v.call(n,{...m,item:c})}:void 0,title:n.title?m=>{var v;return(v=n.title)==null?void 0:v.call(n,{...m,item:c})}:void 0},[h,d]=AC.filterProps(l);return a?P(AC,Je({value:l==null?void 0:l.value},h),{activator:m=>{let{props:v}=m;return n.header?n.header({props:{...l,...v}}):P(vl,Je(l,v),f)},default:()=>P(x8,{items:a},n)}):n.item?n.item(l):P(vl,l,f)})}}}),S8=pt({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"item");function kh(t,e){var a;const n=ga(e,t.itemTitle,e),r=t.returnObject?e:ga(e,t.itemValue,n),i=ga(e,t.itemChildren),s=t.itemProps===!0?typeof e=="object"&&e!=null&&!Array.isArray(e)?"children"in e?Wd(e,["children"])[1]:e:void 0:ga(e,t.itemProps),o={title:n,value:r,...s};return{title:String((a=o.title)!=null?a:""),value:o.value,props:o,children:Array.isArray(i)?A8(t,i):void 0,raw:e}}function A8(t,e){const n=[];for(const r of e)n.push(kh(t,r));return n}function PD(t){const e=re(()=>A8(t,t.items));function n(i){return i.map(s=>{const o=e.value.find(a=>_f(s,a.value));return o!=null?o:kh(t,s)})}function r(i){return i.map(s=>{let{props:o}=s;return o.value})}return{items:e,transformIn:n,transformOut:r}}function dSe(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function pSe(t,e){const n=ga(e,t.itemType,"item"),r=dSe(e)?e:ga(e,t.itemTitle),i=ga(e,t.itemValue,void 0),s=ga(e,t.itemChildren),o=t.itemProps===!0?Wd(e,["children"])[1]:ga(e,t.itemProps),a={title:r,value:i,...o};return{type:n,title:a.title,value:a.value,props:a,children:n==="item"&&s?E8(t,s):void 0,raw:e}}function E8(t,e){const n=[];for(const r of e)n.push(pSe(t,r));return n}function gSe(t){return{items:re(()=>E8(t,t.items))}}const Cw=Oe()({name:"VList",props:{activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...lSe({selectStrategy:"single-leaf",openStrategy:"list"}),...Fs(),...Ke(),...Ur(),...co(),...Gr(),itemType:{type:String,default:"type"},...S8(),...Gn(),...Tt(),...jt(),...po({variant:"text"})},emits:{"update:selected":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:n}=e;const{items:r}=gSe(t),{themeClasses:i}=ln(t),{backgroundColorClasses:s,backgroundColorStyles:o}=br(Ne(t,"bgColor")),{borderClasses:a}=ho(t),{densityClasses:l}=Fi(t),{dimensionStyles:u}=fo(t),{elevationClasses:c}=pi(t),{roundedClasses:f}=tr(t),{open:h,select:d}=uSe(t),p=re(()=>t.lines?`v-list--${t.lines}-line`:void 0),g=Ne(t,"activeColor"),x=Ne(t,"color");d8(),Cr({VListGroup:{activeColor:g,color:x},VListItem:{activeClass:Ne(t,"activeClass"),activeColor:g,color:x,density:Ne(t,"density"),disabled:Ne(t,"disabled"),lines:Ne(t,"lines"),nav:Ne(t,"nav"),variant:Ne(t,"variant")}});const _=Se(!1),m=Se();function v(S){_.value=!0}function b(S){_.value=!1}function w(S){var C;!_.value&&!(S.relatedTarget&&((C=m.value)==null?void 0:C.contains(S.relatedTarget)))&&E()}function A(S){if(!!m.value){if(S.key==="ArrowDown")E("next");else if(S.key==="ArrowUp")E("prev");else if(S.key==="Home")E("first");else if(S.key==="End")E("last");else return;S.preventDefault()}}function E(S){if(m.value)return uU(m.value,S)}return ze(()=>P(t.tag,{ref:m,class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav},i.value,s.value,a.value,l.value,c.value,p.value,f.value,t.class],style:[o.value,u.value,t.style],role:"listbox","aria-activedescendant":void 0,onFocusin:v,onFocusout:b,onFocus:w,onKeydown:A},{default:()=>[P(x8,{items:r.value},n)]})),{open:h,select:d,focus:E}}}),mSe=Ho("v-list-img"),vSe=Oe()({name:"VListItemAction",props:{start:Boolean,end:Boolean,...Ke(),...Tt()},setup(t,e){let{slots:n}=e;return ze(()=>P(t.tag,{class:["v-list-item-action",{"v-list-item-action--start":t.start,"v-list-item-action--end":t.end},t.class],style:t.style},n)),{}}}),ySe=Oe()({name:"VListItemMedia",props:{start:Boolean,end:Boolean,...Ke(),...Tt()},setup(t,e){let{slots:n}=e;return ze(()=>P(t.tag,{class:["v-list-item-media",{"v-list-item-media--start":t.start,"v-list-item-media--end":t.end},t.class],style:t.style},n)),{}}});const C8=pt({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function M8(t,e){const n={},r=i=>()=>{if(!wr)return Promise.resolve(!0);const s=i==="openDelay";return n.closeDelay&&window.clearTimeout(n.closeDelay),delete n.closeDelay,n.openDelay&&window.clearTimeout(n.openDelay),delete n.openDelay,new Promise(o=>{var l;const a=parseInt((l=t[i])!=null?l:0,10);n[i]=window.setTimeout(()=>{e==null||e(s),o(s)},a)})};return{runCloseDelay:r("closeDelay"),runOpenDelay:r("openDelay")}}const EC=Symbol.for("vuetify:v-menu"),_Se=pt({activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...C8()},"v-overlay-activator");function wSe(t,e){let{isActive:n,isTop:r}=e;const i=Se();let s=!1,o=!1,a=!0;const l=re(()=>t.openOnFocus||t.openOnFocus==null&&t.openOnHover),u=re(()=>t.openOnClick||t.openOnClick==null&&!t.openOnHover&&!l.value),{runOpenDelay:c,runCloseDelay:f}=M8(t,v=>{v===(t.openOnHover&&s||l.value&&o)&&!(t.openOnHover&&n.value&&!r.value)&&(n.value!==v&&(a=!0),n.value=v)}),h={click:v=>{v.stopPropagation(),i.value=v.currentTarget||v.target,n.value=!n.value},mouseenter:v=>{var b;(b=v.sourceCapabilities)!=null&&b.firesTouchEvents||(s=!0,i.value=v.currentTarget||v.target,c())},mouseleave:v=>{s=!1,f()},focus:v=>{pC&&!v.target.matches(":focus-visible")||(o=!0,v.stopPropagation(),i.value=v.currentTarget||v.target,c())},blur:v=>{o=!1,v.stopPropagation(),f()}},d=re(()=>{const v={};return u.value&&(v.click=h.click),t.openOnHover&&(v.mouseenter=h.mouseenter,v.mouseleave=h.mouseleave),l.value&&(v.focus=h.focus,v.blur=h.blur),v}),p=re(()=>{const v={};if(t.openOnHover&&(v.mouseenter=()=>{s=!0,c()},v.mouseleave=()=>{s=!1,f()}),t.closeOnContentClick){const b=zt(EC,null);v.click=()=>{n.value=!1,b==null||b.closeParents()}}return v}),g=re(()=>{const v={};return t.openOnHover&&(v.mouseenter=()=>{a&&(s=!0,a=!1,c())},v.mouseleave=()=>{s=!1,f()}),v});He(r,v=>{v&&(t.openOnHover&&!s&&(!l.value||!o)||l.value&&!o&&(!t.openOnHover||!s))&&(n.value=!1)});const x=Se();Bo(()=>{!x.value||En(()=>{const v=x.value;i.value=Uwe(v)?v.$el:v})});const _=di("useActivator");let m;return He(()=>!!t.activator,v=>{v&&wr?(m=Md(),m.run(()=>{bSe(t,_,{activatorEl:i,activatorEvents:d})})):m&&m.stop()},{flush:"post",immediate:!0}),fs(()=>{m==null||m.stop()}),{activatorEl:i,activatorRef:x,activatorEvents:d,contentEvents:p,scrimEvents:g}}function bSe(t,e,n){let{activatorEl:r,activatorEvents:i}=n;He(()=>t.activator,(l,u)=>{if(u&&l!==u){const c=a(u);c&&o(c)}l&&En(()=>s())},{immediate:!0}),He(()=>t.activatorProps,()=>{s()}),fs(()=>{o()});function s(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;!l||(Object.entries(i.value).forEach(c=>{let[f,h]=c;l.addEventListener(f,h)}),Object.keys(u).forEach(c=>{u[c]==null?l.removeAttribute(c):l.setAttribute(c,u[c])}))}function o(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.activatorProps;!l||(Object.entries(i.value).forEach(c=>{let[f,h]=c;l.removeEventListener(f,h)}),Object.keys(u).forEach(c=>{l.removeAttribute(c)}))}function a(){var c,f;let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.activator,u;if(l)if(l==="parent"){let h=(f=(c=e==null?void 0:e.proxy)==null?void 0:c.$el)==null?void 0:f.parentNode;for(;h.hasAttribute("data-no-activator");)h=h.parentNode;u=h}else typeof l=="string"?u=document.querySelector(l):"$el"in l?u=l.$el:u=l;return r.value=(u==null?void 0:u.nodeType)===Node.ELEMENT_NODE?u:null,r.value}}const Mw=pt({eager:Boolean},"lazy");function LD(t,e){const n=Se(!1),r=re(()=>n.value||t.eager||e.value);He(e,()=>n.value=!0);function i(){t.eager||(n.value=!1)}return{isBooted:n,hasContent:r,onAfterLeave:i}}function qS(t,e){return{x:t.x+e.x,y:t.y+e.y}}function xSe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function NR(t,e){if(t.side==="top"||t.side==="bottom"){const{side:n,align:r}=t,i=r==="left"?0:r==="center"?e.width/2:r==="right"?e.width:r,s=n==="top"?0:n==="bottom"?e.height:n;return qS({x:i,y:s},e)}else if(t.side==="left"||t.side==="right"){const{side:n,align:r}=t,i=n==="left"?0:n==="right"?e.width:n,s=r==="top"?0:r==="center"?e.height/2:r==="bottom"?e.height:r;return qS({x:i,y:s},e)}return qS({x:e.width/2,y:e.height/2},e)}const D8={static:ESe,connected:MSe},SSe=pt({locationStrategy:{type:[String,Function],default:"static",validator:t=>typeof t=="function"||t in D8},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"v-overlay-location-strategies");function ASe(t,e){const n=Se({}),r=Se();wr&&(Yu(()=>!!(e.isActive.value&&t.locationStrategy),s=>{var o,a;He(()=>t.locationStrategy,s),fs(()=>{r.value=void 0}),typeof t.locationStrategy=="function"?r.value=(o=t.locationStrategy(e,t,n))==null?void 0:o.updateLocation:r.value=(a=D8[t.locationStrategy](e,t,n))==null?void 0:a.updateLocation}),window.addEventListener("resize",i,{passive:!0}),fs(()=>{window.removeEventListener("resize",i),r.value=void 0}));function i(s){var o;(o=r.value)==null||o.call(r,s)}return{contentStyles:n,updateLocation:r}}function ESe(){}function CSe(t,e){const n=uD(t);return e?n.x+=parseFloat(t.style.right||0):n.x-=parseFloat(t.style.left||0),n.y-=parseFloat(t.style.top||0),n}function MSe(t,e,n){gbe(t.activatorEl.value)&&Object.assign(n.value,{position:"fixed"});const{preferredAnchor:i,preferredOrigin:s}=oD(()=>{const p=cC(e.location,t.isRtl.value),g=e.origin==="overlap"?p:e.origin==="auto"?GS(p):cC(e.origin,t.isRtl.value);return p.side===g.side&&p.align===US(g).align?{preferredAnchor:fR(p),preferredOrigin:fR(g)}:{preferredAnchor:p,preferredOrigin:g}}),[o,a,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(p=>re(()=>{const g=parseFloat(e[p]);return isNaN(g)?1/0:g})),c=re(()=>{if(Array.isArray(e.offset))return e.offset;if(typeof e.offset=="string"){const p=e.offset.split(" ").map(parseFloat);return p.length<2&&p.push(0),p}return typeof e.offset=="number"?[e.offset,0]:[0,0]});let f=!1;const h=new ResizeObserver(()=>{f&&d()});He([t.activatorEl,t.contentEl],(p,g)=>{let[x,_]=p,[m,v]=g;m&&h.unobserve(m),x&&h.observe(x),v&&h.unobserve(v),_&&h.observe(_)},{immediate:!0}),fs(()=>{h.disconnect()});function d(){if(f=!1,requestAnimationFrame(()=>{requestAnimationFrame(()=>f=!0)}),!t.activatorEl.value||!t.contentEl.value)return;const p=t.activatorEl.value.getBoundingClientRect(),g=CSe(t.contentEl.value,t.isRtl.value),x=i_(t.contentEl.value),_=12;x.length||(x.push(document.documentElement),t.contentEl.value.style.top&&t.contentEl.value.style.left||(g.x+=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),g.y+=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const m=x.reduce((D,T)=>{const L=T.getBoundingClientRect(),F=new td({x:T===document.documentElement?0:L.x,y:T===document.documentElement?0:L.y,width:T.clientWidth,height:T.clientHeight});return D?new td({x:Math.max(D.left,F.left),y:Math.max(D.top,F.top),width:Math.min(D.right,F.right)-Math.max(D.left,F.left),height:Math.min(D.bottom,F.bottom)-Math.max(D.top,F.top)}):F},void 0);m.x+=_,m.y+=_,m.width-=_*2,m.height-=_*2;let v={anchor:i.value,origin:s.value};function b(D){const T=new td(g),L=NR(D.anchor,p),F=NR(D.origin,T);let{x:k,y:I}=xSe(L,F);switch(D.anchor.side){case"top":I-=c.value[0];break;case"bottom":I+=c.value[0];break;case"left":k-=c.value[0];break;case"right":k+=c.value[0];break}switch(D.anchor.align){case"top":I-=c.value[1];break;case"bottom":I+=c.value[1];break;case"left":k-=c.value[1];break;case"right":k+=c.value[1];break}return T.x+=k,T.y+=I,T.width=Math.min(T.width,l.value),T.height=Math.min(T.height,u.value),{overflows:dR(T,m),x:k,y:I}}let w=0,A=0;const E={x:0,y:0},S={x:!1,y:!1};let C=-1;for(;;){if(C++>10){hC("Infinite loop detected in connectedLocationStrategy");break}const{x:D,y:T,overflows:L}=b(v);w+=D,A+=T,g.x+=D,g.y+=T;{const F=hR(v.anchor),k=L.x.before||L.x.after,I=L.y.before||L.y.after;let O=!1;if(["x","y"].forEach($=>{if($==="x"&&k&&!S.x||$==="y"&&I&&!S.y){const N={anchor:{...v.anchor},origin:{...v.origin}},W=$==="x"?F==="y"?US:GS:F==="y"?GS:US;N.anchor=W(N.anchor),N.origin=W(N.origin);const{overflows:H}=b(N);(H[$].before<=L[$].before&&H[$].after<=L[$].after||H[$].before+H[$].after<(L[$].before+L[$].after)/2)&&(v=N,O=S[$]=!0)}}),O)continue}L.x.before&&(w+=L.x.before,g.x+=L.x.before),L.x.after&&(w-=L.x.after,g.x-=L.x.after),L.y.before&&(A+=L.y.before,g.y+=L.y.before),L.y.after&&(A-=L.y.after,g.y-=L.y.after);{const F=dR(g,m);E.x=m.width-F.x.before-F.x.after,E.y=m.height-F.y.before-F.y.after,w+=F.x.before,g.x+=F.x.before,A+=F.y.before,g.y+=F.y.before}break}const M=hR(v.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${v.anchor.side} ${v.anchor.align}`,transformOrigin:`${v.origin.side} ${v.origin.align}`,top:et(JS(A)),left:t.isRtl.value?void 0:et(JS(w)),right:t.isRtl.value?et(JS(-w)):void 0,minWidth:et(M==="y"?Math.min(o.value,p.width):o.value),maxWidth:et(VR(Wi(E.x,o.value===1/0?0:o.value,l.value))),maxHeight:et(VR(Wi(E.y,a.value===1/0?0:a.value,u.value)))}),{available:E,contentBox:g}}return He(()=>[i.value,s.value,e.offset,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight],()=>d()),En(()=>{const p=d();if(!p)return;const{available:g,contentBox:x}=p;x.height>g.y&&requestAnimationFrame(()=>{d(),requestAnimationFrame(()=>{d()})})}),{updateLocation:d}}function JS(t){return Math.round(t*devicePixelRatio)/devicePixelRatio}function VR(t){return Math.ceil(t*devicePixelRatio)/devicePixelRatio}let CC=!0;const a_=[];function DSe(t){!CC||a_.length?(a_.push(t),MC()):(CC=!1,t(),MC())}let zR=-1;function MC(){cancelAnimationFrame(zR),zR=requestAnimationFrame(()=>{const t=a_.shift();t&&t(),a_.length?MC():CC=!0})}const Ky={none:null,close:LSe,block:FSe,reposition:ISe},TSe=pt({scrollStrategy:{type:[String,Function],default:"block",validator:t=>typeof t=="function"||t in Ky}},"v-overlay-scroll-strategies");function PSe(t,e){if(!wr)return;let n;Bo(async()=>{n==null||n.stop(),e.isActive.value&&t.scrollStrategy&&(n=Md(),await En(),n.active&&n.run(()=>{var r;typeof t.scrollStrategy=="function"?t.scrollStrategy(e,t,n):(r=Ky[t.scrollStrategy])==null||r.call(Ky,e,t,n)}))}),fs(()=>{n==null||n.stop()})}function LSe(t){var n;function e(r){t.isActive.value=!1}T8((n=t.activatorEl.value)!=null?n:t.contentEl.value,e)}function FSe(t,e){var o;const n=(o=t.root.value)==null?void 0:o.offsetParent,r=[...new Set([...i_(t.activatorEl.value,e.contained?n:void 0),...i_(t.contentEl.value,e.contained?n:void 0)])].filter(a=>!a.classList.contains("v-overlay-scroll-blocked")),i=window.innerWidth-document.documentElement.offsetWidth,s=(a=>dD(a)&&a)(n||document.documentElement);s&&t.root.value.classList.add("v-overlay--scroll-blocked"),r.forEach((a,l)=>{a.style.setProperty("--v-body-scroll-x",et(-a.scrollLeft)),a.style.setProperty("--v-body-scroll-y",et(-a.scrollTop)),a.style.setProperty("--v-scrollbar-offset",et(i)),a.classList.add("v-overlay-scroll-blocked")}),fs(()=>{r.forEach((a,l)=>{const u=parseFloat(a.style.getPropertyValue("--v-body-scroll-x")),c=parseFloat(a.style.getPropertyValue("--v-body-scroll-y"));a.style.removeProperty("--v-body-scroll-x"),a.style.removeProperty("--v-body-scroll-y"),a.style.removeProperty("--v-scrollbar-offset"),a.classList.remove("v-overlay-scroll-blocked"),a.scrollLeft=-u,a.scrollTop=-c}),s&&t.root.value.classList.remove("v-overlay--scroll-blocked")})}function ISe(t,e,n){let r=!1,i=-1,s=-1;function o(a){DSe(()=>{var c,f;const l=performance.now();(f=(c=t.updateLocation).value)==null||f.call(c,a),r=(performance.now()-l)/(1e3/60)>2})}s=(typeof requestIdleCallback>"u"?a=>a():requestIdleCallback)(()=>{n.run(()=>{var a;T8((a=t.activatorEl.value)!=null?a:t.contentEl.value,l=>{r?(cancelAnimationFrame(i),i=requestAnimationFrame(()=>{i=requestAnimationFrame(()=>{o(l)})})):o(l)})})}),fs(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(s),cancelAnimationFrame(i)})}function T8(t,e){const n=[document,...i_(t)];n.forEach(r=>{r.addEventListener("scroll",e,{passive:!0})}),fs(()=>{n.forEach(r=>{r.removeEventListener("scroll",e)})})}function P8(){if(!wr)return Se(!1);const{ssr:t}=bf();if(t){const e=Se(!1);return hi(()=>{e.value=!0}),e}else return Se(!0)}function yv(){const e=di("useScopeId").vnode.scopeId;return{scopeId:e?{[e]:""}:void 0}}const GR=Symbol.for("vuetify:stack"),Xp=Yr([]);function kSe(t,e,n){const r=di("useStack"),i=!n,s=zt(GR,void 0),o=Yr({activeChildren:new Set});ar(GR,o);const a=Se(+e.value);Yu(t,()=>{var f;const c=(f=Xp.at(-1))==null?void 0:f[1];a.value=c?c+10:+e.value,i&&Xp.push([r.uid,a.value]),s==null||s.activeChildren.add(r.uid),fs(()=>{if(i){const h=Ye(Xp).findIndex(d=>d[0]===r.uid);Xp.splice(h,1)}s==null||s.activeChildren.delete(r.uid)})});const l=Se(!0);i&&Bo(()=>{var f;const c=((f=Xp.at(-1))==null?void 0:f[0])===r.uid;setTimeout(()=>l.value=c)});const u=re(()=>!o.activeChildren.size);return{globalTop:zm(l),localTop:u,stackStyles:re(()=>({zIndex:a.value}))}}function RSe(t){return{teleportTarget:re(()=>{const n=t.value;if(n===!0||!wr)return;const r=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(r==null)return;let i=r.querySelector(":scope > .v-overlay-container");return i||(i=document.createElement("div"),i.className="v-overlay-container",r.appendChild(i)),i})}}function OSe(){return!0}function L8(t,e,n){if(!t||F8(t,n)===!1)return!1;const r=SU(e);if(typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&r.host===t.target)return!1;const i=(typeof n.value=="object"&&n.value.include||(()=>[]))();return i.push(e),!i.some(s=>s==null?void 0:s.contains(t.target))}function F8(t,e){return(typeof e.value=="object"&&e.value.closeConditional||OSe)(t)}function BSe(t,e,n){const r=typeof n.value=="function"?n.value:n.value.handler;e._clickOutside.lastMousedownWasOutside&&L8(t,e,n)&&setTimeout(()=>{F8(t,n)&&r&&r(t)},0)}function UR(t,e){const n=SU(t);e(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&e(n)}const I8={mounted(t,e){const n=i=>BSe(i,t,e),r=i=>{t._clickOutside.lastMousedownWasOutside=L8(i,t,e)};UR(t,i=>{i.addEventListener("click",n,!0),i.addEventListener("mousedown",r,!0)}),t._clickOutside||(t._clickOutside={lastMousedownWasOutside:!0}),t._clickOutside[e.instance.$.uid]={onClick:n,onMousedown:r}},unmounted(t,e){!t._clickOutside||(UR(t,n=>{var s;if(!n||!((s=t._clickOutside)!=null&&s[e.instance.$.uid]))return;const{onClick:r,onMousedown:i}=t._clickOutside[e.instance.$.uid];n.removeEventListener("click",r,!0),n.removeEventListener("mousedown",i,!0)}),delete t._clickOutside[e.instance.$.uid])}};function NSe(t){const{modelValue:e,color:n,...r}=t;return P(Ea,{name:"fade-transition",appear:!0},{default:()=>[t.modelValue&&P("div",Je({class:["v-overlay__scrim",t.color.backgroundColorClasses.value],style:t.color.backgroundColorStyles.value},r),null)]})}const _v=pt({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[String,Boolean],default:!0},zIndex:{type:[Number,String],default:2e3},..._Se(),...Ke(),...co(),...Mw(),...SSe(),...TSe(),...jt(),...Tl()},"v-overlay"),yl=Oe()({name:"VOverlay",directives:{ClickOutside:I8},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,..._v()},emits:{"click:outside":t=>!0,"update:modelValue":t=>!0,afterLeave:()=>!0},setup(t,e){let{slots:n,attrs:r,emit:i}=e;const s=Dt(t,"modelValue"),o=re({get:()=>s.value,set:N=>{N&&t.disabled||(s.value=N)}}),{teleportTarget:a}=RSe(re(()=>t.attach||t.contained)),{themeClasses:l}=ln(t),{rtlClasses:u,isRtl:c}=Dl(),{hasContent:f,onAfterLeave:h}=LD(t,o),d=br(re(()=>typeof t.scrim=="string"?t.scrim:null)),{globalTop:p,localTop:g,stackStyles:x}=kSe(o,Ne(t,"zIndex"),t._disableGlobalStack),{activatorEl:_,activatorRef:m,activatorEvents:v,contentEvents:b,scrimEvents:w}=wSe(t,{isActive:o,isTop:g}),{dimensionStyles:A}=fo(t),E=P8(),{scopeId:S}=yv();He(()=>t.disabled,N=>{N&&(o.value=!1)});const C=Se(),M=Se(),{contentStyles:D,updateLocation:T}=ASe(t,{isRtl:c,contentEl:M,activatorEl:_,isActive:o});PSe(t,{root:C,contentEl:M,activatorEl:_,isActive:o,updateLocation:T});function L(N){i("click:outside",N),t.persistent?$():o.value=!1}function F(){return o.value&&p.value}wr&&He(o,N=>{N?window.addEventListener("keydown",k):window.removeEventListener("keydown",k)},{immediate:!0});function k(N){N.key==="Escape"&&p.value&&(t.persistent?$():o.value=!1)}const I=e8();Yu(()=>t.closeOnBack,()=>{Uxe(I,N=>{p.value&&o.value?(N(!1),t.persistent?$():o.value=!1):N()})});const O=Se();He(()=>o.value&&(t.absolute||t.contained)&&a.value==null,N=>{if(N){const W=EU(C.value);W&&W!==document.scrollingElement&&(O.value=W.scrollTop)}});function $(){t.noClickAnimation||M.value&&Hc(M.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:Fm})}return ze(()=>{var N;return P(mt,null,[(N=n.activator)==null?void 0:N.call(n,{isActive:o.value,props:Je({ref:m},Hw(v.value),t.activatorProps)}),E.value&&P(hW,{disabled:!a.value,to:a.value},{default:()=>[f.value&&P("div",Je({class:["v-overlay",{"v-overlay--absolute":t.absolute||t.contained,"v-overlay--active":o.value,"v-overlay--contained":t.contained},l.value,u.value,t.class],style:[x.value,{top:et(O.value)},t.style],ref:C},S,r),[P(NSe,Je({color:d,modelValue:o.value&&!!t.scrim},Hw(w.value)),null),P(Do,{appear:!0,persisted:!0,transition:t.transition,target:_.value,onAfterLeave:()=>{h(),i("afterLeave")}},{default:()=>{var W;return[Nt(P("div",Je({ref:M,class:["v-overlay__content",t.contentClass],style:[A.value,D.value]},Hw(b.value),t.contentProps),[(W=n.default)==null?void 0:W.call(n,{isActive:o})]),[[$i,o.value],[Xi("click-outside"),{handler:L,closeConditional:F,include:()=>[_.value]}]])]}})])]})])}),{activatorEl:_,animateClick:$,contentEl:M,globalTop:p,localTop:g,updateLocation:T}}}),Dw=Oe()({name:"VMenu",props:{id:String,...Na(_v({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:vw}}),["absolute"])},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),{scopeId:i}=yv(),s=Li(),o=re(()=>t.id||`v-menu-${s}`),a=Se(),l=zt(EC,null),u=Se(0);ar(EC,{register(){++u.value},unregister(){--u.value},closeParents(){setTimeout(()=>{u.value||(r.value=!1,l==null||l.closeParents())},40)}}),He(r,h=>{h?l==null||l.register():l==null||l.unregister()});function c(){l==null||l.closeParents()}const f=re(()=>Je({"aria-haspopup":"menu","aria-expanded":String(r.value),"aria-owns":o.value},t.activatorProps));return ze(()=>{const[h]=yl.filterProps(t);return P(yl,Je({ref:a,class:["v-menu",t.class],style:t.style},h,{modelValue:r.value,"onUpdate:modelValue":d=>r.value=d,absolute:!0,activatorProps:f.value,"onClick:outside":c},i),{activator:n.activator,default:function(){for(var d=arguments.length,p=new Array(d),g=0;g<d;g++)p[g]=arguments[g];return P(pn,{root:!0},{default:()=>{var x;return[(x=n.default)==null?void 0:x.call(n,...p)]}})}})}),Wo({id:o,\u03A8openChildren:u},a)}}),FD=pt({chips:Boolean,closableChips:Boolean,eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,menu:Boolean,menuIcon:{type:bt,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,valueComparator:{type:Function,default:_f},...S8({itemChildren:!1})},"v-select"),VSe=Oe()({name:"VSelect",props:{...FD(),...Na(Aw({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Tl({transition:{component:vw}})},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:r}=uo(),i=Se(),s=Se(),o=Dt(t,"menu"),a=re({get:()=>o.value,set:D=>{var T;o.value&&!D&&((T=s.value)==null?void 0:T.\u03A8openChildren)||(o.value=D)}}),{items:l,transformIn:u,transformOut:c}=PD(t),f=Dt(t,"modelValue",[],D=>u(qs(D)),D=>{var L;const T=c(D);return t.multiple?T:(L=T[0])!=null?L:null}),h=xw(),d=re(()=>f.value.map(D=>l.value.find(T=>t.valueComparator(T.value,D.value))||D)),p=re(()=>d.value.map(D=>D.props.value)),g=Se(!1);let x="",_;const m=re(()=>t.hideSelected?l.value.filter(D=>!d.value.some(T=>T===D)):l.value),v=Se();function b(D){t.openOnClear&&(a.value=!0)}function w(){t.hideNoData&&!l.value.length||t.readonly||(h==null?void 0:h.isReadonly.value)||(a.value=!a.value)}function A(D){var I,O,$,N;if(t.readonly||(h==null?void 0:h.isReadonly.value))return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(D.key)&&D.preventDefault(),["Enter","ArrowDown"," "].includes(D.key)&&(a.value=!0),["Escape","Tab"].includes(D.key)&&(a.value=!1),D.key==="ArrowDown"?(I=v.value)==null||I.focus("next"):D.key==="ArrowUp"?(O=v.value)==null||O.focus("prev"):D.key==="Home"?($=v.value)==null||$.focus("first"):D.key==="End"&&((N=v.value)==null||N.focus("last"));const T=1e3;function L(W){const H=W.key.length===1,K=!W.ctrlKey&&!W.metaKey&&!W.altKey;return H&&K}if(t.multiple||!L(D))return;const F=performance.now();F-_>T&&(x=""),x+=D.key.toLowerCase(),_=F;const k=l.value.find(W=>W.title.toLowerCase().startsWith(x));k!==void 0&&(f.value=[k])}function E(D){if(t.multiple){const T=p.value.findIndex(L=>t.valueComparator(L,D.value));if(T===-1)f.value=[...f.value,D];else{const L=[...f.value];L.splice(T,1),f.value=L}}else f.value=[D],a.value=!1}function S(D){var T;(T=v.value)!=null&&T.$el.contains(D.relatedTarget)||(a.value=!1)}function C(D){g.value=!0}function M(D){var T;D.relatedTarget==null&&((T=i.value)==null||T.focus())}return ze(()=>{const D=!!(t.chips||n.chip),T=!!(!t.hideNoData||m.value.length||n.prepend||n.append||n["no-data"]),L=f.value.length>0,[F]=uf.filterProps(t),k=L||!g.value&&t.label&&!t.persistentPlaceholder?void 0:t.placeholder;return P(uf,Je({ref:i},F,{modelValue:f.value.map(I=>I.props.value).join(", "),"onUpdate:modelValue":I=>{I==null&&(f.value=[])},focused:g.value,"onUpdate:focused":I=>g.value=I,validationValue:f.externalValue,dirty:L,class:["v-select",{"v-select--active-menu":a.value,"v-select--chips":!!t.chips,[`v-select--${t.multiple?"multiple":"single"}`]:!0,"v-select--selected":f.value.length},t.class],style:t.style,appendInnerIcon:t.menuIcon,readonly:!0,placeholder:k,"onClick:clear":b,"onMousedown:control":w,onBlur:S,onKeydown:A}),{...n,default:()=>P(mt,null,[P(Dw,Je({ref:s,modelValue:a.value,"onUpdate:modelValue":I=>a.value=I,activator:"parent",contentClass:"v-select__content",eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition},t.menuProps),{default:()=>[T&&P(Cw,{ref:v,selected:p.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:I=>I.preventDefault(),onFocusin:C,onFocusout:M},{default:()=>{var I,O,$,N;return[!m.value.length&&!t.hideNoData&&((O=(I=n["no-data"])==null?void 0:I.call(n))!=null?O:P(vl,{title:r(t.noDataText)},null)),($=n["prepend-item"])==null?void 0:$.call(n),m.value.map((W,H)=>{var K;return n.item?(K=n.item)==null?void 0:K.call(n,{item:W,index:H,props:Je(W.props,{onClick:()=>E(W)})}):P(vl,Je({key:H},W.props,{onClick:()=>E(W)}),{prepend:ee=>{let{isSelected:Z}=ee;return t.multiple&&!t.hideSelected?P(Cd,{modelValue:Z,ripple:!1,tabindex:"-1"},null):void 0}})}),(N=n["append-item"])==null?void 0:N.call(n)]}})]}),d.value.map((I,O)=>{var W,H;function $(K){K.stopPropagation(),K.preventDefault(),E(I)}const N={"onClick:close":$,modelValue:!0,"onUpdate:modelValue":void 0};return P("div",{key:I.value,class:"v-select__selection"},[D?n.chip?P(pn,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:I.title}}},{default:()=>{var K;return[(K=n.chip)==null?void 0:K.call(n,{item:I,index:O,props:N})]}}):P(vv,Je({key:"chip",closable:t.closableChips,size:"small",text:I.title},N),null):(H=(W=n.selection)==null?void 0:W.call(n,{item:I,index:O}))!=null?H:P("span",{class:"v-select__selection-text"},[I.title,t.multiple&&O<d.value.length-1&&P("span",{class:"v-select__selection-comma"},[Ue(",")])])])})])})}),Wo({isFocused:g,menu:a,select:E},i)}}),zSe=(t,e,n)=>t==null||e==null?-1:t.toString().toLocaleLowerCase().indexOf(e.toString().toLocaleLowerCase()),k8=pt({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function GSe(t,e,n){var a,l,u;const r=[],i=(a=n==null?void 0:n.default)!=null?a:zSe,s=n!=null&&n.filterKeys?qs(n.filterKeys):!1,o=Object.keys((l=n==null?void 0:n.customKeyFilter)!=null?l:{}).length;if(!(t!=null&&t.length))return r;e:for(let c=0;c<t.length;c++){const f=t[c],h={},d={};let p=-1;if(e&&!(n!=null&&n.noFilter)){if(typeof f=="object"){const _=s||Object.keys(f);for(const m of _){const v=ga(f,m,f),b=(u=n==null?void 0:n.customKeyFilter)==null?void 0:u[m];if(p=b?b(v,e,f):i(v,e,f),p!==-1&&p!==!1)b?h[m]=p:d[m]=p;else if((n==null?void 0:n.filterMode)==="every")continue e}}else p=i(f,e,f),p!==-1&&p!==!1&&(d.title=p);const g=Object.keys(d).length,x=Object.keys(h).length;if(!g&&!x||(n==null?void 0:n.filterMode)==="union"&&x!==o&&!g||(n==null?void 0:n.filterMode)==="intersection"&&(x!==o||!g))continue}r.push({index:c,matches:{...d,...h}})}return r}function R8(t,e,n,r){const i=re(()=>typeof(n==null?void 0:n.value)!="string"&&typeof(n==null?void 0:n.value)!="number"?"":String(n.value)),s=Se([]),o=Se(new Map);Bo(()=>{var c;s.value=[],o.value=new Map;const l=Hi(e);GSe(l,i.value,{customKeyFilter:t.customKeyFilter,default:t.customFilter,filterKeys:(c=Hi(r==null?void 0:r.filterKeys))!=null?c:t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}).forEach(f=>{let{index:h,matches:d}=f;const p=l[h];s.value.push(p),o.value.set(p.value,d)})});function a(l){return o.value.get(l.value)}return{filteredItems:s,filteredMatches:o,getMatches:a}}function USe(t,e,n){if(e==null)return t;if(Array.isArray(e))throw new Error("Multiple matches is not implemented");return typeof e=="number"&&~e?P(mt,null,[P("span",{class:"v-autocomplete__unmask"},[t.substr(0,e)]),P("span",{class:"v-autocomplete__mask"},[t.substr(e,n)]),P("span",{class:"v-autocomplete__unmask"},[t.substr(e+n)])]):t}const HSe=Oe()({name:"VAutocomplete",props:{search:String,...k8({filterKeys:["title"]}),...FD(),...Na(Aw({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Tl({transition:!1})},emits:{"update:focused":t=>!0,"update:search":t=>!0,"update:modelValue":t=>!0,"update:menu":t=>!0},setup(t,e){let{slots:n}=e;const{t:r}=uo(),i=Se(),s=Se(!1),o=Se(!0),a=Se(),l=Dt(t,"menu"),u=re({get:()=>l.value,set:W=>{var H;l.value&&!W&&((H=a.value)==null?void 0:H.\u03A8openChildren)||(l.value=W)}}),c=Se(-1),f=re(()=>{var W;return(W=i.value)==null?void 0:W.color}),{items:h,transformIn:d,transformOut:p}=PD(t),{textColorClasses:g,textColorStyles:x}=Ti(f),_=Dt(t,"search",""),m=Dt(t,"modelValue",[],W=>d(qs(W)),W=>{var K;const H=p(W);return t.multiple?H:(K=H[0])!=null?K:null}),v=xw(),{filteredItems:b,getMatches:w}=R8(t,h,re(()=>o.value?void 0:_.value)),A=re(()=>m.value.map(W=>h.value.find(H=>t.valueComparator(H.value,W.value))||W)),E=re(()=>t.hideSelected?b.value.filter(W=>!A.value.some(H=>H.value===W.value)):b.value),S=re(()=>A.value.map(W=>W.props.value)),C=re(()=>A.value[c.value]),M=Se();function D(W){t.openOnClear&&(u.value=!0),_.value=""}function T(){t.hideNoData&&!h.value.length||t.readonly||(v==null?void 0:v.isReadonly.value)||(u.value=!0)}function L(W){var ee,Z,J,X;if(t.readonly||(v==null?void 0:v.isReadonly.value))return;const H=i.value.selectionStart,K=S.value.length;if((c.value>-1||["Enter","ArrowDown","ArrowUp"].includes(W.key))&&W.preventDefault(),["Enter","ArrowDown"].includes(W.key)&&(u.value=!0),["Escape"].includes(W.key)&&(u.value=!1),["Enter","Escape","Tab"].includes(W.key)&&(o.value=!0),W.key==="ArrowDown"?(ee=M.value)==null||ee.focus("next"):W.key==="ArrowUp"&&((Z=M.value)==null||Z.focus("prev")),!!t.multiple){if(["Backspace","Delete"].includes(W.key)){if(c.value<0){W.key==="Backspace"&&!_.value&&(c.value=K-1);return}const Q=c.value;C.value&&N(C.value),c.value=Q>=K-1?K-2:Q}if(W.key==="ArrowLeft"){if(c.value<0&&H>0)return;const Q=c.value>-1?c.value-1:K-1;A.value[Q]?c.value=Q:(c.value=-1,i.value.setSelectionRange((J=_.value)==null?void 0:J.length,(X=_.value)==null?void 0:X.length))}if(W.key==="ArrowRight"){if(c.value<0)return;const Q=c.value+1;A.value[Q]?c.value=Q:(c.value=-1,i.value.setSelectionRange(0,0))}}}function F(W){_.value=W.target.value}function k(){s.value&&(o.value=!0)}function I(W){s.value=!0}function O(W){var H;W.relatedTarget==null&&((H=i.value)==null||H.focus())}const $=Se(!1);function N(W){if(t.multiple){const H=S.value.findIndex(K=>t.valueComparator(K,W.value));if(H===-1)m.value=[...m.value,W];else{const K=[...m.value];K.splice(H,1),m.value=K}}else m.value=[W],$.value=!0,n.selection||(_.value=W.title),u.value=!1,o.value=!0,En(()=>$.value=!1)}return He(s,W=>{var H,K;W?($.value=!0,_.value=t.multiple||!!n.selection?"":String((K=(H=A.value.at(-1))==null?void 0:H.props.title)!=null?K:""),o.value=!0,En(()=>$.value=!1)):(u.value=!1,_.value="")}),He(_,W=>{!s.value||$.value||(W&&(u.value=!0),o.value=!W)}),ze(()=>{const W=!!(t.chips||n.chip),H=!!(!t.hideNoData||E.value.length||n.prepend||n.append||n["no-data"]),K=m.value.length>0,[ee]=uf.filterProps(t);return P(uf,Je({ref:i},ee,{modelValue:_.value,"onUpdate:modelValue":Z=>{Z==null&&(m.value=[])},focused:s.value,"onUpdate:focused":Z=>s.value=Z,validationValue:m.externalValue,dirty:K,onInput:F,class:["v-autocomplete",{"v-autocomplete--active-menu":u.value,"v-autocomplete--chips":!!t.chips,"v-autocomplete--selecting-index":c.value>-1,[`v-autocomplete--${t.multiple?"multiple":"single"}`]:!0,"v-autocomplete--selection-slot":!!n.selection},t.class],style:t.style,appendInnerIcon:t.menuIcon,readonly:t.readonly,placeholder:K?void 0:t.placeholder,"onClick:clear":D,"onMousedown:control":T,onKeydown:L}),{...n,default:()=>P(mt,null,[P(Dw,Je({ref:a,modelValue:u.value,"onUpdate:modelValue":Z=>u.value=Z,activator:"parent",contentClass:"v-autocomplete__content",eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:k},t.menuProps),{default:()=>[H&&P(Cw,{ref:M,selected:S.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:Z=>Z.preventDefault(),onFocusin:I,onFocusout:O},{default:()=>{var Z,J,X,Q;return[!E.value.length&&!t.hideNoData&&((J=(Z=n["no-data"])==null?void 0:Z.call(n))!=null?J:P(vl,{title:r(t.noDataText)},null)),(X=n["prepend-item"])==null?void 0:X.call(n),E.value.map(oe=>{var he,ve;return(ve=(he=n.item)==null?void 0:he.call(n,{item:oe,props:Je(oe.props,{onClick:()=>N(oe)})}))!=null?ve:P(vl,Je({key:oe.value},oe.props,{onClick:()=>N(oe)}),{prepend:ye=>{let{isSelected:V}=ye;return t.multiple&&!t.hideSelected?P(Cd,{modelValue:V,ripple:!1,tabindex:"-1"},null):void 0},title:()=>{var ye,V,R;return o.value?oe.title:USe(oe.title,(ye=w(oe))==null?void 0:ye.title,(R=(V=_.value)==null?void 0:V.length)!=null?R:0)}})}),(Q=n["append-item"])==null?void 0:Q.call(n)]}})]}),A.value.map((Z,J)=>{var oe,he;function X(ve){ve.stopPropagation(),ve.preventDefault(),N(Z)}const Q={"onClick:close":X,modelValue:!0,"onUpdate:modelValue":void 0};return P("div",{key:Z.value,class:["v-autocomplete__selection",J===c.value&&["v-autocomplete__selection--selected",g.value]],style:J===c.value?x.value:{}},[W?n.chip?P(pn,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:Z.title}}},{default:()=>{var ve;return[(ve=n.chip)==null?void 0:ve.call(n,{item:Z,index:J,props:Q})]}}):P(vv,Je({key:"chip",closable:t.closableChips,size:"small",text:Z.title},Q),null):(he=(oe=n.selection)==null?void 0:oe.call(n,{item:Z,index:J}))!=null?he:P("span",{class:"v-autocomplete__selection-text"},[Z.title,t.multiple&&J<A.value.length-1&&P("span",{class:"v-autocomplete__selection-comma"},[Ue(",")])])])})])})}),Wo({isFocused:s,isPristine:o,menu:u,search:_,filteredItems:b,select:N},i)}});const WSe=Oe()({name:"VBadge",inheritAttrs:!1,props:{bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:bt,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Ke(),...fc({location:"top end"}),...Gn(),...Tt(),...jt(),...Tl({transition:"scale-rotate-transition"})},setup(t,e){const{backgroundColorClasses:n,backgroundColorStyles:r}=br(Ne(t,"color")),{roundedClasses:i}=tr(t),{t:s}=uo(),{textColorClasses:o,textColorStyles:a}=Ti(Ne(t,"textColor")),{themeClasses:l}=FU(),{locationStyles:u}=hc(t,!0,c=>{var h,d;return(t.floating?t.dot?2:4:t.dot?8:12)+(["top","bottom"].includes(c)?+((h=t.offsetY)!=null?h:0):["left","right"].includes(c)?+((d=t.offsetX)!=null?d:0):0)});return ze(()=>{const c=Number(t.content),f=!t.max||isNaN(c)?t.content:c<=+t.max?c:`${t.max}+`,[h,d]=Wd(e.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return P(t.tag,Je({class:["v-badge",{"v-badge--bordered":t.bordered,"v-badge--dot":t.dot,"v-badge--floating":t.floating,"v-badge--inline":t.inline},t.class]},d,{style:t.style}),{default:()=>{var p,g;return[P("div",{class:"v-badge__wrapper"},[(g=(p=e.slots).default)==null?void 0:g.call(p),P(Do,{transition:t.transition},{default:()=>{var x,_;return[Nt(P("span",Je({class:["v-badge__badge",l.value,n.value,i.value,o.value],style:[r.value,a.value,t.inline?{}:u.value],"aria-atomic":"true","aria-label":s(t.label,c),"aria-live":"polite",role:"status"},h),[t.dot?void 0:e.slots.badge?(_=(x=e.slots).badge)==null?void 0:_.call(x):t.icon?P(yr,{icon:t.icon},null):f]),[[$i,t.modelValue]])]}})])]}})}),{}}});const O8=Oe()({name:"VBannerActions",props:{color:String,density:String,...Ke()},setup(t,e){let{slots:n}=e;return Cr({VBtn:{color:t.color,density:t.density,variant:"text"}}),ze(()=>{var r;return P("div",{class:["v-banner-actions",t.class],style:t.style},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),B8=Ho("v-banner-text"),$Se=Oe()({name:"VBanner",props:{avatar:String,color:String,icon:bt,lines:String,stacked:Boolean,sticky:Boolean,text:String,...Fs(),...Ke(),...Ur(),...co(),...Gr(),...fc(),...Zd(),...Gn(),...Tt(),...jt()},setup(t,e){let{slots:n}=e;const{borderClasses:r}=ho(t),{densityClasses:i}=Fi(t),{mobile:s}=bf(),{dimensionStyles:o}=fo(t),{elevationClasses:a}=pi(t),{locationStyles:l}=hc(t),{positionClasses:u}=Qd(t),{roundedClasses:c}=tr(t),{themeClasses:f}=ln(t),h=Ne(t,"color"),d=Ne(t,"density");Cr({VBannerActions:{color:h,density:d}}),ze(()=>{const p=!!(t.text||n.text),g=!!(t.avatar||t.icon),x=!!(g||n.prepend);return P(t.tag,{class:["v-banner",{"v-banner--stacked":t.stacked||s.value,"v-banner--sticky":t.sticky,[`v-banner--${t.lines}-line`]:!!t.lines},r.value,i.value,a.value,u.value,c.value,f.value,t.class],style:[o.value,l.value,t.style],role:"banner"},{default:()=>{var _;return[x&&P("div",{key:"prepend",class:"v-banner__prepend"},[n.prepend?P(pn,{key:"prepend-defaults",disabled:!g,defaults:{VAvatar:{color:h.value,density:d.value,icon:t.icon,image:t.avatar}}},n.prepend):P(ju,{key:"prepend-avatar",color:h.value,density:d.value,icon:t.icon,image:t.avatar},null)]),P("div",{class:"v-banner__content"},[p&&P(B8,{key:"text"},{default:()=>{var m,v;return[(v=(m=n.text)==null?void 0:m.call(n))!=null?v:t.text]}}),(_=n.default)==null?void 0:_.call(n)]),n.actions&&P(O8,{key:"actions"},n.actions)]}})})}});const XSe=Oe()({name:"VBottomNavigation",props:{bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:t=>!t||["horizontal","shift"].includes(t)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Fs(),...Ke(),...Ur(),...Gr(),...Gn(),...$d({name:"bottom-navigation"}),...Tt({tag:"header"}),...jd({modelValue:!0,selectedClass:"v-btn--selected"}),...jt()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=FU(),{borderClasses:i}=ho(t),{backgroundColorClasses:s,backgroundColorStyles:o}=br(Ne(t,"bgColor")),{densityClasses:a}=Fi(t),{elevationClasses:l}=pi(t),{roundedClasses:u}=tr(t),{ssrBootStyles:c}=xf(),f=re(()=>Number(t.height)-(t.density==="comfortable"?8:0)-(t.density==="compact"?16:0)),h=Ne(t,"active"),{layoutItemStyles:d}=Xd({id:t.name,order:re(()=>parseInt(t.order,10)),position:re(()=>"bottom"),layoutSize:re(()=>h.value?f.value:0),elementSize:f,active:h,absolute:Ne(t,"absolute")});return Ef(t,bD),Cr({VBtn:{color:Ne(t,"color"),density:Ne(t,"density"),stacked:re(()=>t.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ze(()=>P(t.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":h.value,"v-bottom-navigation--grow":t.grow,"v-bottom-navigation--shift":t.mode==="shift"},r.value,s.value,i.value,a.value,l.value,u.value,t.class],style:[o.value,d.value,{height:et(f.value),transform:`translateY(${et(h.value?0:100,"%")})`},c.value,t.style]},{default:()=>[n.default&&P("div",{class:"v-bottom-navigation__content"},[n.default()])]})),{}}});const N8=Oe()({name:"VBreadcrumbsDivider",props:{divider:[Number,String],...Ke()},setup(t,e){let{slots:n}=e;return ze(()=>{var r,i;return P("li",{class:["v-breadcrumbs-divider",t.class],style:t.style},[(i=(r=n==null?void 0:n.default)==null?void 0:r.call(n))!=null?i:t.divider])}),{}}}),V8=Oe()({name:"VBreadcrumbsItem",props:{active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...Ke(),...gv(),...Tt({tag:"li"})},setup(t,e){let{slots:n,attrs:r}=e;const i=pv(t,r),s=re(()=>{var u;return t.active||((u=i.isActive)==null?void 0:u.value)}),o=re(()=>s.value?t.activeColor:t.color),{textColorClasses:a,textColorStyles:l}=Ti(o);return ze(()=>{const u=i.isLink.value?"a":t.tag;return P(u,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":s.value,"v-breadcrumbs-item--disabled":t.disabled,"v-breadcrumbs-item--link":i.isLink.value,[`${t.activeClass}`]:s.value&&t.activeClass},a.value,t.class],style:[l.value,t.style],href:i.href.value,"aria-current":s.value?"page":void 0,onClick:i.navigate},{default:()=>{var c,f;return[(f=(c=n.default)==null?void 0:c.call(n))!=null?f:t.title]}})}),{}}}),YSe=Oe()({name:"VBreadcrumbs",props:{activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:bt,items:{type:Array,default:()=>[]},...Ke(),...Ur(),...Gn(),...Tt({tag:"ul"})},setup(t,e){let{slots:n}=e;const{backgroundColorClasses:r,backgroundColorStyles:i}=br(Ne(t,"bgColor")),{densityClasses:s}=Fi(t),{roundedClasses:o}=tr(t);Cr({VBreadcrumbsDivider:{divider:Ne(t,"divider")},VBreadcrumbsItem:{activeClass:Ne(t,"activeClass"),activeColor:Ne(t,"activeColor"),color:Ne(t,"color"),disabled:Ne(t,"disabled")}});const a=re(()=>t.items.map(l=>typeof l=="string"?{item:{title:l},raw:l}:{item:l,raw:l}));return ze(()=>{const l=!!(n.prepend||t.icon);return P(t.tag,{class:["v-breadcrumbs",r.value,s.value,o.value,t.class],style:[i.value,t.style]},{default:()=>{var u;return[l&&P("div",{key:"prepend",class:"v-breadcrumbs__prepend"},[n.prepend?P(pn,{key:"prepend-defaults",disabled:!t.icon,defaults:{VIcon:{icon:t.icon,start:!0}}},n.prepend):P(yr,{key:"prepend-icon",start:!0,icon:t.icon},null)]),a.value.map((c,f,h)=>{let{item:d,raw:p}=c;return P(mt,null,[P(V8,Je({key:d.title,disabled:f>=h.length-1},d),{default:n.title?()=>{var g;return(g=n.title)==null?void 0:g.call(n,{item:p,index:f})}:void 0}),f<h.length-1&&P(N8,null,{default:n.divider?()=>{var g;return(g=n.divider)==null?void 0:g.call(n,{item:p,index:f})}:void 0})])}),(u=n.default)==null?void 0:u.call(n)]}})}),{}}});const z8=Oe()({name:"VCardActions",props:Ke(),setup(t,e){let{slots:n}=e;return Cr({VBtn:{variant:"text"}}),ze(()=>{var r;return P("div",{class:["v-card-actions",t.class],style:t.style},[(r=n.default)==null?void 0:r.call(n)])}),{}}}),G8=Ho("v-card-subtitle"),U8=Ho("v-card-title"),H8=Oe()({name:"VCardItem",props:{appendAvatar:String,appendIcon:bt,prependAvatar:String,prependIcon:bt,subtitle:String,title:String,...Ke(),...Ur()},setup(t,e){let{slots:n}=e;return ze(()=>{var u;const r=!!(t.prependAvatar||t.prependIcon),i=!!(r||n.prepend),s=!!(t.appendAvatar||t.appendIcon),o=!!(s||n.append),a=!!(t.title||n.title),l=!!(t.subtitle||n.subtitle);return P("div",{class:["v-card-item",t.class],style:t.style},[i&&P("div",{key:"prepend",class:"v-card-item__prepend"},[n.prepend?P(pn,{key:"prepend-defaults",disabled:!r,defaults:{VAvatar:{density:t.density,icon:t.prependIcon,image:t.prependAvatar}}},n.prepend):r&&P(ju,{key:"prepend-avatar",density:t.density,icon:t.prependIcon,image:t.prependAvatar},null)]),P("div",{class:"v-card-item__content"},[a&&P(U8,{key:"title"},{default:()=>{var c,f;return[(f=(c=n.title)==null?void 0:c.call(n))!=null?f:t.title]}}),l&&P(G8,{key:"subtitle"},{default:()=>{var c,f;return[(f=(c=n.subtitle)==null?void 0:c.call(n))!=null?f:t.subtitle]}}),(u=n.default)==null?void 0:u.call(n)]),o&&P("div",{key:"append",class:"v-card-item__append"},[n.append?P(pn,{key:"append-defaults",disabled:!s,defaults:{VAvatar:{density:t.density,icon:t.appendIcon,image:t.appendAvatar}}},n.append):s&&P(ju,{key:"append-avatar",density:t.density,icon:t.appendIcon,image:t.appendAvatar},null)])])}),{}}}),W8=Ho("v-card-text"),jSe=Oe()({name:"VCard",directives:{Ripple:cc},props:{appendAvatar:String,appendIcon:bt,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:bt,ripple:{type:Boolean,default:!0},subtitle:String,text:String,title:String,...Fs(),...Ke(),...Ur(),...co(),...Gr(),...ED(),...fc(),...Zd(),...Gn(),...gv(),...Tt(),...jt(),...po({variant:"elevated"})},setup(t,e){let{attrs:n,slots:r}=e;const{themeClasses:i}=ln(t),{borderClasses:s}=ho(t),{colorClasses:o,colorStyles:a,variantClasses:l}=Af(t),{densityClasses:u}=Fi(t),{dimensionStyles:c}=fo(t),{elevationClasses:f}=pi(t),{loaderClasses:h}=_w(t),{locationStyles:d}=hc(t),{positionClasses:p}=Qd(t),{roundedClasses:g}=tr(t),x=pv(t,n),_=re(()=>t.link!==!1&&x.isLink.value),m=re(()=>!t.disabled&&t.link!==!1&&(t.link||x.isClickable.value));return ze(()=>{const v=_.value?"a":t.tag,b=!!(r.title||t.title),w=!!(r.subtitle||t.subtitle),A=b||w,E=!!(r.append||t.appendAvatar||t.appendIcon),S=!!(r.prepend||t.prependAvatar||t.prependIcon),C=!!(r.image||t.image),M=A||S||E,D=!!(r.text||t.text);return Nt(P(v,{class:["v-card",{"v-card--disabled":t.disabled,"v-card--flat":t.flat,"v-card--hover":t.hover&&!(t.disabled||t.flat),"v-card--link":m.value},i.value,s.value,o.value,u.value,f.value,h.value,p.value,g.value,l.value,t.class],style:[a.value,c.value,d.value,t.style],href:x.href.value,onClick:m.value&&x.navigate,tabindex:t.disabled?-1:void 0},{default:()=>{var T;return[C&&P("div",{key:"image",class:"v-card__image"},[r.image?P(pn,{key:"image-defaults",disabled:!t.image,defaults:{VImg:{cover:!0,src:t.image}}},r.image):P(Yd,{key:"image-img",cover:!0,src:t.image},null)]),P(CD,{name:"v-card",active:!!t.loading,color:typeof t.loading=="boolean"?void 0:t.loading},{default:r.loader}),M&&P(H8,{key:"item",prependAvatar:t.prependAvatar,prependIcon:t.prependIcon,title:t.title,subtitle:t.subtitle,appendAvatar:t.appendAvatar,appendIcon:t.appendIcon},{default:r.item,prepend:r.prepend,title:r.title,subtitle:r.subtitle,append:r.append}),D&&P(W8,{key:"text"},{default:()=>{var L,F;return[(F=(L=r.text)==null?void 0:L.call(r))!=null?F:t.text]}}),(T=r.default)==null?void 0:T.call(r),r.actions&&P(z8,null,{default:r.actions}),Sf(m.value,"v-card")]}}),[[Xi("ripple"),m.value&&t.ripple]])}),{}}});const qSe=t=>{const{touchstartX:e,touchendX:n,touchstartY:r,touchendY:i}=t,s=.5,o=16;t.offsetX=n-e,t.offsetY=i-r,Math.abs(t.offsetY)<s*Math.abs(t.offsetX)&&(t.left&&n<e-o&&t.left(t),t.right&&n>e+o&&t.right(t)),Math.abs(t.offsetX)<s*Math.abs(t.offsetY)&&(t.up&&i<r-o&&t.up(t),t.down&&i>r+o&&t.down(t))};function JSe(t,e){var r;const n=t.changedTouches[0];e.touchstartX=n.clientX,e.touchstartY=n.clientY,(r=e.start)==null||r.call(e,{originalEvent:t,...e})}function KSe(t,e){var r;const n=t.changedTouches[0];e.touchendX=n.clientX,e.touchendY=n.clientY,(r=e.end)==null||r.call(e,{originalEvent:t,...e}),qSe(e)}function ZSe(t,e){var r;const n=t.changedTouches[0];e.touchmoveX=n.clientX,e.touchmoveY=n.clientY,(r=e.move)==null||r.call(e,{originalEvent:t,...e})}function QSe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:t.left,right:t.right,up:t.up,down:t.down,start:t.start,move:t.move,end:t.end};return{touchstart:n=>JSe(n,e),touchend:n=>KSe(n,e),touchmove:n=>ZSe(n,e)}}function eAe(t,e){var a,l,u;const n=e.value,r=n!=null&&n.parent?t.parentElement:t,i=(a=n==null?void 0:n.options)!=null?a:{passive:!0},s=(l=e.instance)==null?void 0:l.$.uid;if(!r||!s)return;const o=QSe(e.value);r._touchHandlers=(u=r._touchHandlers)!=null?u:Object.create(null),r._touchHandlers[s]=o,lU(o).forEach(c=>{r.addEventListener(c,o[c],i)})}function tAe(t,e){var s,o;const n=(s=e.value)!=null&&s.parent?t.parentElement:t,r=(o=e.instance)==null?void 0:o.$.uid;if(!(n!=null&&n._touchHandlers)||!r)return;const i=n._touchHandlers[r];lU(i).forEach(a=>{n.removeEventListener(a,i[a])}),delete n._touchHandlers[r]}const ID={mounted:eAe,unmounted:tAe},$8=Symbol.for("vuetify:v-window"),X8=Symbol.for("vuetify:v-window-group"),Y8=pt({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||t==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{default:"force"},...Ke(),...Tt(),...jt()},"v-window"),j8=Oe()({name:"VWindow",directives:{Touch:ID},props:Y8(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{isRtl:i}=Dl(),{t:s}=uo(),o=Ef(t,X8),a=Se(),l=re(()=>i.value?!t.reverse:t.reverse),u=Se(!1),c=re(()=>{const b=t.direction==="vertical"?"y":"x",A=(l.value?!u.value:u.value)?"-reverse":"";return`v-window-${b}${A}-transition`}),f=Se(0),h=Se(void 0),d=re(()=>o.items.value.findIndex(b=>o.selected.value.includes(b.id)));He(d,(b,w)=>{const A=o.items.value.length,E=A-1;A<=2?u.value=b<w:b===E&&w===0?u.value=!0:b===0&&w===E?u.value=!1:u.value=b<w}),ar($8,{transition:c,isReversed:u,transitionCount:f,transitionHeight:h,rootRef:a});const p=re(()=>t.continuous||d.value!==0),g=re(()=>t.continuous||d.value!==o.items.value.length-1);function x(){p.value&&o.prev()}function _(){g.value&&o.next()}const m=re(()=>{const b=[],w={icon:i.value?t.nextIcon:t.prevIcon,class:`v-window__${l.value?"right":"left"}`,onClick:o.prev,ariaLabel:s("$vuetify.carousel.prev")};b.push(p.value?n.prev?n.prev({props:w}):P(Ui,w,null):P("div",null,null));const A={icon:i.value?t.prevIcon:t.nextIcon,class:`v-window__${l.value?"left":"right"}`,onClick:o.next,ariaLabel:s("$vuetify.carousel.next")};return b.push(g.value?n.next?n.next({props:A}):P(Ui,A,null):P("div",null,null)),b}),v=re(()=>t.touch===!1?t.touch:{...{left:()=>{l.value?x():_()},right:()=>{l.value?_():x()},start:w=>{let{originalEvent:A}=w;A.stopPropagation()}},...t.touch===!0?{}:t.touch});return ze(()=>Nt(P(t.tag,{ref:a,class:["v-window",{"v-window--show-arrows-on-hover":t.showArrows==="hover"},r.value,t.class],style:t.style},{default:()=>{var b,w;return[P("div",{class:"v-window__container",style:{height:h.value}},[(b=n.default)==null?void 0:b.call(n,{group:o}),t.showArrows!==!1&&P("div",{class:"v-window__controls"},[m.value])]),(w=n.additional)==null?void 0:w.call(n,{group:o})]}}),[[Xi("touch"),v.value]])),{group:o}}}),nAe=Oe()({name:"VCarousel",props:{color:String,cycle:Boolean,delimiterIcon:{type:bt,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:t=>Number(t)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...Y8({continuous:!0,mandatory:"force",showArrows:!0})},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),{t:i}=uo(),s=Se();let o=-1;He(r,l),He(()=>t.interval,l),He(()=>t.cycle,u=>{u?l():window.clearTimeout(o)}),hi(a);function a(){!t.cycle||!s.value||(o=window.setTimeout(s.value.group.next,+t.interval>0?+t.interval:6e3))}function l(){window.clearTimeout(o),window.requestAnimationFrame(a)}return ze(()=>P(j8,{ref:s,modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,class:["v-carousel",{"v-carousel--hide-delimiter-background":t.hideDelimiterBackground,"v-carousel--vertical-delimiters":t.verticalDelimiters},t.class],style:[{height:et(t.height)},t.style],continuous:!0,mandatory:"force",showArrows:t.showArrows},{default:n.default,additional:u=>{let{group:c}=u;return P(mt,null,[!t.hideDelimiters&&P("div",{class:"v-carousel__controls",style:{left:t.verticalDelimiters==="left"&&t.verticalDelimiters?0:"auto",right:t.verticalDelimiters==="right"?0:"auto"}},[c.items.value.length>0&&P(pn,{defaults:{VBtn:{color:t.color,icon:t.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[c.items.value.map((f,h)=>{const d={id:`carousel-item-${f.id}`,"aria-label":i("$vuetify.carousel.ariaLabel.delimiter",h+1,c.items.value.length),class:[c.isSelected(f.id)&&"v-btn--active"],onClick:()=>c.select(f.id,!0)};return n.item?n.item({props:d,item:f}):P(Ui,Je(f,d),null)})]})]),t.progress&&P(AD,{class:"v-carousel__progress",color:typeof t.progress=="string"?t.progress:void 0,modelValue:(c.getItemIndex(r.value)+1)/c.items.value.length*100},null)])},prev:n.prev,next:n.next})),{}}}),q8=Oe()({name:"VWindowItem",directives:{Touch:ID},props:{reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...Ke(),...qd(),...Mw()},emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const r=zt($8),i=Jd(t,X8),{isBooted:s}=xf();if(!r||!i)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const o=Se(!1),a=re(()=>r.isReversed.value?t.reverseTransition!==!1:t.transition!==!1);function l(){!o.value||!r||(o.value=!1,r.transitionCount.value>0&&(r.transitionCount.value-=1,r.transitionCount.value===0&&(r.transitionHeight.value=void 0)))}function u(){var p;o.value||!r||(o.value=!0,r.transitionCount.value===0&&(r.transitionHeight.value=et((p=r.rootRef.value)==null?void 0:p.clientHeight)),r.transitionCount.value+=1)}function c(){l()}function f(p){!o.value||En(()=>{!a.value||!o.value||!r||(r.transitionHeight.value=et(p.clientHeight))})}const h=re(()=>{const p=r.isReversed.value?t.reverseTransition:t.transition;return a.value?{name:typeof p!="string"?r.transition.value:p,onBeforeEnter:u,onAfterEnter:l,onEnterCancelled:c,onBeforeLeave:u,onAfterLeave:l,onLeaveCancelled:c,onEnter:f}:!1}),{hasContent:d}=LD(t,i.isSelected);return ze(()=>P(Do,{transition:h.value,disabled:!s.value},{default:()=>{var p;return[Nt(P("div",{class:["v-window-item",i.selectedClass.value,t.class],style:t.style},[d.value&&((p=n.default)==null?void 0:p.call(n))]),[[$i,i.isSelected.value]])]}})),{}}}),rAe=Oe()({name:"VCarouselItem",inheritAttrs:!1,props:{value:null,...Ke()},setup(t,e){let{slots:n,attrs:r}=e;ze(()=>P(q8,{class:["v-carousel-item",t.class],style:t.style,value:t.value},{default:()=>[P(Yd,r,n)]}))}});const iAe=Ho("v-code");const J8=pt({color:String,...Fs(),...Ke(),...co(),...Gr(),...fc(),...Zd(),...Gn(),...Tt(),...jt()},"v-sheet"),DC=Oe()({name:"VSheet",props:{...J8()},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{backgroundColorClasses:i,backgroundColorStyles:s}=br(Ne(t,"color")),{borderClasses:o}=ho(t),{dimensionStyles:a}=fo(t),{elevationClasses:l}=pi(t),{locationStyles:u}=hc(t),{positionClasses:c}=Qd(t),{roundedClasses:f}=tr(t);return ze(()=>P(t.tag,{class:["v-sheet",r.value,i.value,o.value,l.value,c.value,f.value,t.class],style:[s.value,a.value,u.value,t.style]},n)),{}}});const sAe=lo({name:"VColorPickerCanvas",props:{color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...Ke()},emits:{"update:color":t=>!0,"update:position":t=>!0},setup(t,e){let{emit:n}=e;const r=Se(!1),i=Se(!1),s=Se({x:0,y:0}),o=re(()=>{const{x:_,y:m}=s.value,v=parseInt(t.dotSize,10)/2;return{width:et(t.dotSize),height:et(t.dotSize),transform:`translate(${et(_-v)}, ${et(m-v)})`}}),a=Se(),l=Se(parseFloat(t.width)),u=Se(parseFloat(t.height)),{resizeRef:c}=ka(_=>{var b;if(!((b=c.value)!=null&&b.offsetParent))return;const{width:m,height:v}=_[0].contentRect;l.value=m,u.value=v});function f(_,m,v){const{left:b,top:w,width:A,height:E}=v;s.value={x:Wi(_-b,0,A),y:Wi(m-w,0,E)}}function h(_){t.disabled||!a.value||f(_.clientX,_.clientY,a.value.getBoundingClientRect())}function d(_){_.preventDefault(),!t.disabled&&(r.value=!0,window.addEventListener("mousemove",p),window.addEventListener("mouseup",g),window.addEventListener("touchmove",p),window.addEventListener("touchend",g))}function p(_){if(t.disabled||!a.value)return;r.value=!0;const m=$we(_);f(m.clientX,m.clientY,a.value.getBoundingClientRect())}function g(){window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g),window.removeEventListener("touchmove",p),window.removeEventListener("touchend",g)}He(s,()=>{var v,b,w,A;if(i.value){i.value=!1;return}if(!a.value)return;const{x:_,y:m}=s.value;n("update:color",{h:(b=(v=t.color)==null?void 0:v.h)!=null?b:0,s:Wi(_,0,l.value)/l.value,v:1-Wi(m,0,u.value)/u.value,a:(A=(w=t.color)==null?void 0:w.a)!=null?A:1})});function x(){var w,A;if(!a.value)return;const _=a.value,m=_.getContext("2d");if(!m)return;const v=m.createLinearGradient(0,0,_.width,0);v.addColorStop(0,"hsla(0, 0%, 100%, 1)"),v.addColorStop(1,`hsla(${(A=(w=t.color)==null?void 0:w.h)!=null?A:0}, 100%, 50%, 1)`),m.fillStyle=v,m.fillRect(0,0,_.width,_.height);const b=m.createLinearGradient(0,0,0,_.height);b.addColorStop(0,"hsla(0, 0%, 100%, 0)"),b.addColorStop(1,"hsla(0, 0%, 0%, 1)"),m.fillStyle=b,m.fillRect(0,0,_.width,_.height)}return He(()=>{var _;return(_=t.color)==null?void 0:_.h},x,{immediate:!0}),He(()=>[l.value,u.value],(_,m)=>{x(),s.value={x:s.value.x*_[0]/m[0],y:s.value.y*_[1]/m[1]}},{flush:"post"}),He(()=>t.color,()=>{if(r.value){r.value=!1;return}i.value=!0,s.value=t.color?{x:t.color.s*l.value,y:(1-t.color.v)*u.value}:{x:0,y:0}},{deep:!0,immediate:!0}),hi(()=>x()),ze(()=>P("div",{ref:c,class:["v-color-picker-canvas",t.class],style:t.style,onClick:h,onMousedown:d,onTouchstart:d},[P("canvas",{ref:a,width:l.value,height:u.value},null),t.color&&P("div",{class:["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":t.disabled}],style:o.value},null)])),{}}});function $c(t,e){return e.every(n=>t.hasOwnProperty(n))}function K8(t){if(!t)return null;let e=null;if(typeof t=="string"){const n=xU(t);e=wU(n)}return typeof t=="object"&&($c(t,["r","g","b"])?e=fD(t):$c(t,["h","s","l"])?e=mU(t):$c(t,["h","s","v"])&&(e=t)),e}function oAe(t,e){if(e){const{a:n,...r}=t;return r}return t}function aAe(t,e){if(e==null||typeof e=="string"){const n=bU(t);return t.a===1?n.slice(0,7):n}if(typeof e=="object"){let n;return $c(e,["r","g","b"])?n=pw(t):$c(e,["h","s","l"])?n=gU(t):$c(e,["h","s","v"])&&(n=t),oAe(n,!$c(e,["a"])&&t.a===1)}return t}const Bg={h:0,s:0,v:1,a:1},TC={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:t=>Math.round(t.r),getColor:(t,e)=>({...t,r:Number(e)})},{label:"G",max:255,step:1,getValue:t=>Math.round(t.g),getColor:(t,e)=>({...t,g:Number(e)})},{label:"B",max:255,step:1,getValue:t=>Math.round(t.b),getColor:(t,e)=>({...t,b:Number(e)})},{label:"A",max:1,step:.01,getValue:t=>{let{a:e}=t;return e?Math.round(e*100)/100:1},getColor:(t,e)=>({...t,a:Number(e)})}],to:pw,from:fD};var KR;const lAe={...TC,inputs:(KR=TC.inputs)==null?void 0:KR.slice(0,3)},PC={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:t=>Math.round(t.h),getColor:(t,e)=>({...t,h:Number(e)})},{label:"S",max:1,step:.01,getValue:t=>Math.round(t.s*100)/100,getColor:(t,e)=>({...t,s:Number(e)})},{label:"L",max:1,step:.01,getValue:t=>Math.round(t.l*100)/100,getColor:(t,e)=>({...t,l:Number(e)})},{label:"A",max:1,step:.01,getValue:t=>{let{a:e}=t;return e?Math.round(e*100)/100:1},getColor:(t,e)=>({...t,a:Number(e)})}],to:gU,from:mU},uAe={...PC,inputs:PC.inputs.slice(0,3)},Z8={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:t=>t,getColor:(t,e)=>e}],to:bU,from:wU},cAe={...Z8,inputs:[{label:"HEX",getValue:t=>t.slice(0,7),getColor:(t,e)=>e}]},Xc={rgb:lAe,rgba:TC,hsl:uAe,hsla:PC,hex:cAe,hexa:Z8},fAe=t=>{let{label:e,...n}=t;return P("div",{class:"v-color-picker-edit__input"},[P("input",n,null),P("span",null,[e])])},hAe=lo({name:"VColorPickerEdit",props:{color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:t=>Object.keys(Xc).includes(t)},modes:{type:Array,default:()=>Object.keys(Xc),validator:t=>Array.isArray(t)&&t.every(e=>Object.keys(Xc).includes(e))},...Ke()},emits:{"update:color":t=>!0,"update:mode":t=>!0},setup(t,e){let{emit:n}=e;const r=re(()=>t.modes.map(s=>({...Xc[s],name:s}))),i=re(()=>{var a;const s=r.value.find(l=>l.name===t.mode);if(!s)return[];const o=t.color?s.to(t.color):null;return(a=s.inputs)==null?void 0:a.map(l=>{let{getValue:u,getColor:c,...f}=l;return{...s.inputProps,...f,disabled:t.disabled,value:o&&u(o),onChange:h=>{const d=h.target;!d||n("update:color",s.from(c(o!=null?o:Bg,d.value)))}}})});return ze(()=>{var s;return P("div",{class:["v-color-picker-edit",t.class],style:t.style},[(s=i.value)==null?void 0:s.map(o=>P(fAe,o,null)),r.value.length>1&&P(Ui,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const o=r.value.findIndex(a=>a.name===t.mode);n("update:mode",r.value[(o+1)%r.value.length].name)}},null)])}),{}}});const kD=Symbol.for("vuetify:v-slider");function LC(t,e,n){const r=n==="vertical",i=e.getBoundingClientRect(),s="touches"in t?t.touches[0]:t;return r?s.clientY-(i.top+i.height/2):s.clientX-(i.left+i.width/2)}function dAe(t,e){return"touches"in t&&t.touches.length?t.touches[0][e]:"changedTouches"in t&&t.changedTouches.length?t.changedTouches[0][e]:t[e]}const Q8=pt({disabled:Boolean,error:Boolean,readonly:Boolean,max:{type:[Number,String],default:100},min:{type:[Number,String],default:0},step:{type:[Number,String],default:0},thumbColor:String,thumbLabel:{type:[Boolean,String],default:void 0,validator:t=>typeof t=="boolean"||t==="always"},thumbSize:{type:[Number,String],default:20},showTicks:{type:[Boolean,String],default:!1,validator:t=>typeof t=="boolean"||t==="always"},ticks:{type:[Array,Object]},tickSize:{type:[Number,String],default:2},color:String,trackColor:String,trackFillColor:String,trackSize:{type:[Number,String],default:4},direction:{type:String,default:"horizontal",validator:t=>["vertical","horizontal"].includes(t)},reverse:Boolean,...Gn(),...Gr({elevation:2})},"slider"),e6=t=>{const e=re(()=>parseFloat(t.min)),n=re(()=>parseFloat(t.max)),r=re(()=>+t.step>0?parseFloat(t.step):0),i=re(()=>Math.max(aR(r.value),aR(e.value)));function s(o){if(r.value<=0)return o;const a=Wi(o,e.value,n.value),l=e.value%r.value,u=Math.round((a-l)/r.value)*r.value+l;return parseFloat(Math.min(u,n.value).toFixed(i.value))}return{min:e,max:n,step:r,decimals:i,roundValue:s}},t6=t=>{let{props:e,steps:n,onSliderStart:r,onSliderMove:i,onSliderEnd:s,getActiveThumb:o}=t;const{isRtl:a}=Dl(),l=Ne(e,"reverse"),u=re(()=>{let X=a.value?"rtl":"ltr";return e.reverse&&(X=X==="rtl"?"ltr":"rtl"),X}),{min:c,max:f,step:h,decimals:d,roundValue:p}=n,g=re(()=>parseInt(e.thumbSize,10)),x=re(()=>parseInt(e.tickSize,10)),_=re(()=>parseInt(e.trackSize,10)),m=re(()=>(f.value-c.value)/h.value),v=Ne(e,"disabled"),b=re(()=>e.direction==="vertical"),w=re(()=>{var X;return e.error||e.disabled?void 0:(X=e.thumbColor)!=null?X:e.color}),A=re(()=>{var X;return e.error||e.disabled?void 0:(X=e.trackColor)!=null?X:e.color}),E=re(()=>{var X;return e.error||e.disabled?void 0:(X=e.trackFillColor)!=null?X:e.color}),S=Se(!1),C=Se(0),M=Se(),D=Se();function T(X){var j;const Q=e.direction==="vertical",oe=Q?"top":"left",he=Q?"height":"width",ve=Q?"clientY":"clientX",{[oe]:ye,[he]:V}=(j=M.value)==null?void 0:j.$el.getBoundingClientRect(),R=dAe(X,ve);let B=Math.min(Math.max((R-ye-C.value)/V,0),1)||0;return(Q||u.value==="rtl")&&(B=1-B),p(c.value+B*(f.value-c.value))}const L=X=>{s({value:T(X)}),S.value=!1,C.value=0},F=X=>{D.value=o(X),D.value&&(D.value.focus(),S.value=!0,D.value.contains(X.target)?C.value=LC(X,D.value,e.direction):(C.value=0,i({value:T(X)})),r({value:T(X)}))},k={passive:!0,capture:!0};function I(X){i({value:T(X)})}function O(X){X.stopPropagation(),X.preventDefault(),L(X),window.removeEventListener("mousemove",I,k),window.removeEventListener("mouseup",O)}function $(X){var Q;L(X),window.removeEventListener("touchmove",I,k),(Q=X.target)==null||Q.removeEventListener("touchend",$)}function N(X){var Q;F(X),window.addEventListener("touchmove",I,k),(Q=X.target)==null||Q.addEventListener("touchend",$,{passive:!1})}function W(X){X.preventDefault(),F(X),window.addEventListener("mousemove",I,k),window.addEventListener("mouseup",O,{passive:!1})}const H=X=>{const Q=(X-c.value)/(f.value-c.value)*100;return Wi(isNaN(Q)?0:Q,0,100)},K=Ne(e,"showTicks"),ee=re(()=>K.value?e.ticks?Array.isArray(e.ticks)?e.ticks.map(X=>({value:X,position:H(X),label:X.toString()})):Object.keys(e.ticks).map(X=>({value:parseFloat(X),position:H(parseFloat(X)),label:e.ticks[X]})):m.value!==1/0?ya(m.value+1).map(X=>{const Q=c.value+X*h.value;return{value:Q,position:H(Q)}}):[]:[]),Z=re(()=>ee.value.some(X=>{let{label:Q}=X;return!!Q})),J={activeThumbRef:D,color:Ne(e,"color"),decimals:d,disabled:v,direction:Ne(e,"direction"),elevation:Ne(e,"elevation"),hasLabels:Z,horizontalDirection:u,isReversed:l,min:c,max:f,mousePressed:S,numTicks:m,onSliderMousedown:W,onSliderTouchstart:N,parsedTicks:ee,parseMouseMove:T,position:H,readonly:Ne(e,"readonly"),rounded:Ne(e,"rounded"),roundValue:p,showTicks:K,startOffset:C,step:h,thumbSize:g,thumbColor:w,thumbLabel:Ne(e,"thumbLabel"),ticks:Ne(e,"ticks"),tickSize:x,trackColor:A,trackContainerRef:M,trackFillColor:E,trackSize:_,vertical:b};return ar(kD,J),J},FC=Oe()({name:"VSliderThumb",directives:{Ripple:cc},props:{focused:Boolean,max:{type:Number,required:!0},min:{type:Number,required:!0},modelValue:{type:Number,required:!0},position:{type:Number,required:!0},ripple:{type:Boolean,default:!0},...Ke()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=zt(kD);if(!i)throw new Error("[Vuetify] v-slider-thumb must be used inside v-slider or v-range-slider");const{thumbColor:s,step:o,vertical:a,disabled:l,thumbSize:u,thumbLabel:c,direction:f,readonly:h,elevation:d,isReversed:p,horizontalDirection:g,mousePressed:x,decimals:_}=i,{textColorClasses:m,textColorStyles:v}=Ti(s),{pageup:b,pagedown:w,end:A,home:E,left:S,right:C,down:M,up:D}=uC,T=[b,w,A,E,S,C,M,D],L=re(()=>o.value?[1,2,3]:[1,5,10]);function F(I,O){if(!T.includes(I.key))return;I.preventDefault();const $=o.value||.1,N=(t.max-t.min)/$;if([S,C,M,D].includes(I.key)){const H=(g.value==="rtl"?[S,D]:[C,D]).includes(I.key)?1:-1,K=I.shiftKey?2:I.ctrlKey?1:0;O=O+H*$*L.value[K]}else if(I.key===E)O=t.min;else if(I.key===A)O=t.max;else{const W=I.key===w?1:-1;O=O-W*$*(N>100?N/10:10)}return Math.max(t.min,Math.min(t.max,O))}function k(I){const O=F(I,t.modelValue);O!=null&&r("update:modelValue",O)}return ze(()=>{const I=et(a.value||p.value?100-t.position:t.position,"%"),{elevationClasses:O}=pi(re(()=>l.value?void 0:d.value));return P("div",{class:["v-slider-thumb",{"v-slider-thumb--focused":t.focused,"v-slider-thumb--pressed":t.focused&&x.value},t.class],style:[{"--v-slider-thumb-position":I,"--v-slider-thumb-size":et(u.value)},t.style],role:"slider",tabindex:l.value?-1:0,"aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":t.modelValue,"aria-readonly":h.value,"aria-orientation":f.value,onKeydown:h.value?void 0:k},[P("div",{class:["v-slider-thumb__surface",m.value,O.value],style:{...v.value}},null),Nt(P("div",{class:["v-slider-thumb__ripple",m.value],style:v.value},null),[[Xi("ripple"),t.ripple,null,{circle:!0,center:!0}]]),P(VU,{origin:"bottom center"},{default:()=>{var $,N;return[Nt(P("div",{class:"v-slider-thumb__label-container"},[P("div",{class:["v-slider-thumb__label"]},[P("div",null,[(N=($=n["thumb-label"])==null?void 0:$.call(n,{modelValue:t.modelValue}))!=null?N:t.modelValue.toFixed(o.value?_.value:1)])])]),[[$i,c.value&&t.focused||c.value==="always"]])]}})])}),{}}});const n6=Oe()({name:"VSliderTrack",props:{start:{type:Number,required:!0},stop:{type:Number,required:!0},...Ke()},emits:{},setup(t,e){let{slots:n}=e;const r=zt(kD);if(!r)throw new Error("[Vuetify] v-slider-track must be inside v-slider or v-range-slider");const{color:i,horizontalDirection:s,parsedTicks:o,rounded:a,showTicks:l,tickSize:u,trackColor:c,trackFillColor:f,trackSize:h,vertical:d,min:p,max:g}=r,{roundedClasses:x}=tr(a),{backgroundColorClasses:_,backgroundColorStyles:m}=br(f),{backgroundColorClasses:v,backgroundColorStyles:b}=br(c),w=re(()=>`inset-${d.value?"block-end":"inline-start"}`),A=re(()=>d.value?"height":"width"),E=re(()=>({[w.value]:"0%",[A.value]:"100%"})),S=re(()=>t.stop-t.start),C=re(()=>({[w.value]:et(t.start,"%"),[A.value]:et(S.value,"%")})),M=re(()=>l.value?(d.value?o.value.slice().reverse():o.value).map((T,L)=>{var I,O;const F=d.value?"bottom":"margin-inline-start",k=T.value!==p.value&&T.value!==g.value?et(T.position,"%"):void 0;return P("div",{key:T.value,class:["v-slider-track__tick",{"v-slider-track__tick--filled":T.position>=t.start&&T.position<=t.stop,"v-slider-track__tick--first":T.value===p.value,"v-slider-track__tick--last":T.value===g.value}],style:{[F]:k}},[(T.label||n["tick-label"])&&P("div",{class:"v-slider-track__tick-label"},[(O=(I=n["tick-label"])==null?void 0:I.call(n,{tick:T,index:L}))!=null?O:T.label])])}):[]);return ze(()=>P("div",{class:["v-slider-track",x.value,t.class],style:[{"--v-slider-track-size":et(h.value),"--v-slider-tick-size":et(u.value),direction:d.value?void 0:s.value},t.style]},[P("div",{class:["v-slider-track__background",v.value,{"v-slider-track__background--opacity":!!i.value||!f.value}],style:{...E.value,...b.value}},null),P("div",{class:["v-slider-track__fill",_.value],style:{...C.value,...m.value}},null),l.value&&P("div",{class:["v-slider-track__ticks",{"v-slider-track__ticks--always-show":l.value==="always"}]},[M.value])])),{}}}),IC=Oe()({name:"VSlider",props:{...ww(),...Q8(),...Ll(),modelValue:{type:[Number,String],default:0}},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,start:t=>!0,end:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=Se(),s=e6(t),o=Dt(t,"modelValue",void 0,w=>{const A=typeof w=="string"?parseFloat(w):w==null?s.min.value:w;return s.roundValue(A)}),{min:a,max:l,mousePressed:u,roundValue:c,onSliderMousedown:f,onSliderTouchstart:h,trackContainerRef:d,position:p,hasLabels:g,readonly:x}=t6({props:t,steps:s,onSliderStart:()=>{r("start",o.value)},onSliderEnd:w=>{let{value:A}=w;const E=c(A);o.value=E,r("end",E)},onSliderMove:w=>{let{value:A}=w;return o.value=c(A)},getActiveThumb:()=>{var w;return(w=i.value)==null?void 0:w.$el}}),{isFocused:_,focus:m,blur:v}=dc(t),b=re(()=>p(o.value));return ze(()=>{const[w,A]=fi.filterProps(t),E=!!(t.label||n.label||n.prepend);return P(fi,Je({class:["v-slider",{"v-slider--has-labels":!!n["tick-label"]||g.value,"v-slider--focused":_.value,"v-slider--pressed":u.value,"v-slider--disabled":t.disabled},t.class],style:t.style},w,{focused:_.value}),{...n,prepend:E?S=>{var C,M,D;return P(mt,null,[((M=(C=n.label)==null?void 0:C.call(n,S))!=null?M:t.label)?P(ep,{id:S.id.value,class:"v-slider__label",text:t.label},null):void 0,(D=n.prepend)==null?void 0:D.call(n,S)])}:void 0,default:S=>{let{id:C,messagesId:M}=S;return P("div",{class:"v-slider__container",onMousedown:x.value?void 0:f,onTouchstartPassive:x.value?void 0:h},[P("input",{id:C.value,name:t.name||C.value,disabled:t.disabled,readonly:t.readonly,tabindex:"-1",value:o.value},null),P(n6,{ref:d,start:0,stop:b.value},{"tick-label":n["tick-label"]}),P(FC,{ref:i,"aria-describedby":M.value,focused:_.value,min:a.value,max:l.value,modelValue:o.value,"onUpdate:modelValue":D=>o.value=D,position:b.value,elevation:t.elevation,onFocus:m,onBlur:v},{"thumb-label":n["thumb-label"]})])}})}),{}}}),pAe=lo({name:"VColorPickerPreview",props:{color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...Ke()},emits:{"update:color":t=>!0},setup(t,e){let{emit:n}=e;return ze(()=>{var r,i,s,o;return P("div",{class:["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":t.hideAlpha},t.class],style:t.style},[P("div",{class:"v-color-picker-preview__dot"},[P("div",{style:{background:vU((r=t.color)!=null?r:Bg)}},null)]),P("div",{class:"v-color-picker-preview__sliders"},[P(IC,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:(i=t.color)==null?void 0:i.h,"onUpdate:modelValue":a=>{var l;return n("update:color",{...(l=t.color)!=null?l:Bg,h:a})},step:0,min:0,max:360,disabled:t.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!t.hideAlpha&&P(IC,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:(o=(s=t.color)==null?void 0:s.a)!=null?o:1,"onUpdate:modelValue":a=>{var l;return n("update:color",{...(l=t.color)!=null?l:Bg,a})},step:1/256,min:0,max:1,disabled:t.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}});const gAe=Object.freeze({base:"#f44336",lighten5:"#ffebee",lighten4:"#ffcdd2",lighten3:"#ef9a9a",lighten2:"#e57373",lighten1:"#ef5350",darken1:"#e53935",darken2:"#d32f2f",darken3:"#c62828",darken4:"#b71c1c",accent1:"#ff8a80",accent2:"#ff5252",accent3:"#ff1744",accent4:"#d50000"}),mAe=Object.freeze({base:"#e91e63",lighten5:"#fce4ec",lighten4:"#f8bbd0",lighten3:"#f48fb1",lighten2:"#f06292",lighten1:"#ec407a",darken1:"#d81b60",darken2:"#c2185b",darken3:"#ad1457",darken4:"#880e4f",accent1:"#ff80ab",accent2:"#ff4081",accent3:"#f50057",accent4:"#c51162"}),vAe=Object.freeze({base:"#9c27b0",lighten5:"#f3e5f5",lighten4:"#e1bee7",lighten3:"#ce93d8",lighten2:"#ba68c8",lighten1:"#ab47bc",darken1:"#8e24aa",darken2:"#7b1fa2",darken3:"#6a1b9a",darken4:"#4a148c",accent1:"#ea80fc",accent2:"#e040fb",accent3:"#d500f9",accent4:"#aa00ff"}),yAe=Object.freeze({base:"#673ab7",lighten5:"#ede7f6",lighten4:"#d1c4e9",lighten3:"#b39ddb",lighten2:"#9575cd",lighten1:"#7e57c2",darken1:"#5e35b1",darken2:"#512da8",darken3:"#4527a0",darken4:"#311b92",accent1:"#b388ff",accent2:"#7c4dff",accent3:"#651fff",accent4:"#6200ea"}),_Ae=Object.freeze({base:"#3f51b5",lighten5:"#e8eaf6",lighten4:"#c5cae9",lighten3:"#9fa8da",lighten2:"#7986cb",lighten1:"#5c6bc0",darken1:"#3949ab",darken2:"#303f9f",darken3:"#283593",darken4:"#1a237e",accent1:"#8c9eff",accent2:"#536dfe",accent3:"#3d5afe",accent4:"#304ffe"}),wAe=Object.freeze({base:"#2196f3",lighten5:"#e3f2fd",lighten4:"#bbdefb",lighten3:"#90caf9",lighten2:"#64b5f6",lighten1:"#42a5f5",darken1:"#1e88e5",darken2:"#1976d2",darken3:"#1565c0",darken4:"#0d47a1",accent1:"#82b1ff",accent2:"#448aff",accent3:"#2979ff",accent4:"#2962ff"}),bAe=Object.freeze({base:"#03a9f4",lighten5:"#e1f5fe",lighten4:"#b3e5fc",lighten3:"#81d4fa",lighten2:"#4fc3f7",lighten1:"#29b6f6",darken1:"#039be5",darken2:"#0288d1",darken3:"#0277bd",darken4:"#01579b",accent1:"#80d8ff",accent2:"#40c4ff",accent3:"#00b0ff",accent4:"#0091ea"}),xAe=Object.freeze({base:"#00bcd4",lighten5:"#e0f7fa",lighten4:"#b2ebf2",lighten3:"#80deea",lighten2:"#4dd0e1",lighten1:"#26c6da",darken1:"#00acc1",darken2:"#0097a7",darken3:"#00838f",darken4:"#006064",accent1:"#84ffff",accent2:"#18ffff",accent3:"#00e5ff",accent4:"#00b8d4"}),SAe=Object.freeze({base:"#009688",lighten5:"#e0f2f1",lighten4:"#b2dfdb",lighten3:"#80cbc4",lighten2:"#4db6ac",lighten1:"#26a69a",darken1:"#00897b",darken2:"#00796b",darken3:"#00695c",darken4:"#004d40",accent1:"#a7ffeb",accent2:"#64ffda",accent3:"#1de9b6",accent4:"#00bfa5"}),AAe=Object.freeze({base:"#4caf50",lighten5:"#e8f5e9",lighten4:"#c8e6c9",lighten3:"#a5d6a7",lighten2:"#81c784",lighten1:"#66bb6a",darken1:"#43a047",darken2:"#388e3c",darken3:"#2e7d32",darken4:"#1b5e20",accent1:"#b9f6ca",accent2:"#69f0ae",accent3:"#00e676",accent4:"#00c853"}),EAe=Object.freeze({base:"#8bc34a",lighten5:"#f1f8e9",lighten4:"#dcedc8",lighten3:"#c5e1a5",lighten2:"#aed581",lighten1:"#9ccc65",darken1:"#7cb342",darken2:"#689f38",darken3:"#558b2f",darken4:"#33691e",accent1:"#ccff90",accent2:"#b2ff59",accent3:"#76ff03",accent4:"#64dd17"}),CAe=Object.freeze({base:"#cddc39",lighten5:"#f9fbe7",lighten4:"#f0f4c3",lighten3:"#e6ee9c",lighten2:"#dce775",lighten1:"#d4e157",darken1:"#c0ca33",darken2:"#afb42b",darken3:"#9e9d24",darken4:"#827717",accent1:"#f4ff81",accent2:"#eeff41",accent3:"#c6ff00",accent4:"#aeea00"}),MAe=Object.freeze({base:"#ffeb3b",lighten5:"#fffde7",lighten4:"#fff9c4",lighten3:"#fff59d",lighten2:"#fff176",lighten1:"#ffee58",darken1:"#fdd835",darken2:"#fbc02d",darken3:"#f9a825",darken4:"#f57f17",accent1:"#ffff8d",accent2:"#ffff00",accent3:"#ffea00",accent4:"#ffd600"}),DAe=Object.freeze({base:"#ffc107",lighten5:"#fff8e1",lighten4:"#ffecb3",lighten3:"#ffe082",lighten2:"#ffd54f",lighten1:"#ffca28",darken1:"#ffb300",darken2:"#ffa000",darken3:"#ff8f00",darken4:"#ff6f00",accent1:"#ffe57f",accent2:"#ffd740",accent3:"#ffc400",accent4:"#ffab00"}),TAe=Object.freeze({base:"#ff9800",lighten5:"#fff3e0",lighten4:"#ffe0b2",lighten3:"#ffcc80",lighten2:"#ffb74d",lighten1:"#ffa726",darken1:"#fb8c00",darken2:"#f57c00",darken3:"#ef6c00",darken4:"#e65100",accent1:"#ffd180",accent2:"#ffab40",accent3:"#ff9100",accent4:"#ff6d00"}),PAe=Object.freeze({base:"#ff5722",lighten5:"#fbe9e7",lighten4:"#ffccbc",lighten3:"#ffab91",lighten2:"#ff8a65",lighten1:"#ff7043",darken1:"#f4511e",darken2:"#e64a19",darken3:"#d84315",darken4:"#bf360c",accent1:"#ff9e80",accent2:"#ff6e40",accent3:"#ff3d00",accent4:"#dd2c00"}),LAe=Object.freeze({base:"#795548",lighten5:"#efebe9",lighten4:"#d7ccc8",lighten3:"#bcaaa4",lighten2:"#a1887f",lighten1:"#8d6e63",darken1:"#6d4c41",darken2:"#5d4037",darken3:"#4e342e",darken4:"#3e2723"}),FAe=Object.freeze({base:"#607d8b",lighten5:"#eceff1",lighten4:"#cfd8dc",lighten3:"#b0bec5",lighten2:"#90a4ae",lighten1:"#78909c",darken1:"#546e7a",darken2:"#455a64",darken3:"#37474f",darken4:"#263238"}),IAe=Object.freeze({base:"#9e9e9e",lighten5:"#fafafa",lighten4:"#f5f5f5",lighten3:"#eeeeee",lighten2:"#e0e0e0",lighten1:"#bdbdbd",darken1:"#757575",darken2:"#616161",darken3:"#424242",darken4:"#212121"}),kAe=Object.freeze({black:"#000000",white:"#ffffff",transparent:"#ffffff00"}),RAe=Object.freeze({red:gAe,pink:mAe,purple:vAe,deepPurple:yAe,indigo:_Ae,blue:wAe,lightBlue:bAe,cyan:xAe,teal:SAe,green:AAe,lightGreen:EAe,lime:CAe,yellow:MAe,amber:DAe,orange:TAe,deepOrange:PAe,brown:LAe,blueGrey:FAe,grey:IAe,shades:kAe});function OAe(t){return Object.keys(t).map(e=>{const n=t[e];return n.base?[n.base,n.darken4,n.darken3,n.darken2,n.darken1,n.lighten1,n.lighten2,n.lighten3,n.lighten4,n.lighten5]:[n.black,n.white,n.transparent]})}const BAe=lo({name:"VColorPickerSwatches",props:{swatches:{type:Array,default:()=>OAe(RAe)},disabled:Boolean,color:Object,maxHeight:[Number,String],...Ke()},emits:{"update:color":t=>!0},setup(t,e){let{emit:n}=e;return ze(()=>P("div",{class:["v-color-picker-swatches",t.class],style:[{maxHeight:et(t.maxHeight)},t.style]},[P("div",null,[t.swatches.map(r=>P("div",{class:"v-color-picker-swatches__swatch"},[r.map(i=>{const s=K8(i);return P("div",{class:"v-color-picker-swatches__color",onClick:()=>s&&n("update:color",s)},[P("div",{style:{background:i}},[t.color&&_f(t.color,s)?P(yr,{size:"x-small",icon:"$success",color:abe(i,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),NAe=lo({name:"VColorPicker",props:{canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:t=>Object.keys(Xc).includes(t)},modes:{type:Array,default:()=>Object.keys(Xc),validator:t=>Array.isArray(t)&&t.every(e=>Object.keys(Xc).includes(e))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...Na(J8({width:300}),["height","location","minHeight","maxHeight","minWidth","maxWidth"])},emits:{"update:modelValue":t=>!0,"update:mode":t=>!0},setup(t){const e=Dt(t,"mode"),n=Se(null),r=Dt(t,"modelValue",void 0,s=>{let o=K8(s);return o?(n.value&&(o={...o,h:n.value.h},n.value=null),o):null},s=>s?aAe(s,t.modelValue):null),i=s=>{r.value=s,n.value=s};return hi(()=>{t.modes.includes(e.value)||(e.value=t.modes[0])}),Cr({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),ze(()=>{var o;const[s]=DC.filterProps(t);return P(DC,Je({rounded:t.rounded,elevation:t.elevation,theme:t.theme,class:["v-color-picker",t.class],style:[{"--v-color-picker-color-hsv":vU({...(o=r.value)!=null?o:Bg,a:1})},t.style]},s,{maxWidth:t.width}),{default:()=>[!t.hideCanvas&&P(sAe,{key:"canvas",color:r.value,"onUpdate:color":i,disabled:t.disabled,dotSize:t.dotSize,width:t.width,height:t.canvasHeight},null),(!t.hideSliders||!t.hideInputs)&&P("div",{key:"controls",class:"v-color-picker__controls"},[!t.hideSliders&&P(pAe,{key:"preview",color:r.value,"onUpdate:color":i,hideAlpha:!e.value.endsWith("a"),disabled:t.disabled},null),!t.hideInputs&&P(hAe,{key:"edit",modes:t.modes,mode:e.value,"onUpdate:mode":a=>e.value=a,color:r.value,"onUpdate:color":i,disabled:t.disabled},null)]),t.showSwatches&&P(BAe,{key:"swatches",color:r.value,"onUpdate:color":i,maxHeight:t.swatchesMaxHeight,swatches:t.swatches,disabled:t.disabled},null)]})}),{}}});function VAe(t,e,n){if(e==null)return t;if(Array.isArray(e))throw new Error("Multiple matches is not implemented");return typeof e=="number"&&~e?P(mt,null,[P("span",{class:"v-combobox__unmask"},[t.substr(0,e)]),P("span",{class:"v-combobox__mask"},[t.substr(e,n)]),P("span",{class:"v-combobox__unmask"},[t.substr(e+n)])]):t}const zAe=Oe()({name:"VCombobox",props:{delimiters:Array,...k8({filterKeys:["title"]}),...FD({hideNoData:!0,returnObject:!0}),...Na(Aw({modelValue:null}),["validationValue","dirty","appendInnerIcon"]),...Tl({transition:!1})},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,"update:search":t=>!0,"update:menu":t=>!0},setup(t,e){var H,K;let{emit:n,slots:r}=e;const{t:i}=uo(),s=Se(),o=Se(!1),a=Se(!0),l=Se(),u=Dt(t,"menu"),c=re({get:()=>u.value,set:ee=>{var Z;u.value&&!ee&&((Z=l.value)==null?void 0:Z.\u03A8openChildren)||(u.value=ee)}}),f=Se(-1);let h=!1;const d=re(()=>{var ee;return(ee=s.value)==null?void 0:ee.color}),{items:p,transformIn:g,transformOut:x}=PD(t),{textColorClasses:_,textColorStyles:m}=Ti(d),v=Dt(t,"modelValue",[],ee=>g(qs(ee)),ee=>{var J;const Z=x(ee);return t.multiple?Z:(J=Z[0])!=null?J:null}),b=xw(),w=Se(t.multiple?"":(K=(H=v.value[0])==null?void 0:H.title)!=null?K:""),A=re({get:()=>w.value,set:ee=>{var Z;if(w.value=ee,t.multiple||(v.value=[kh(t,ee)]),ee&&t.multiple&&((Z=t.delimiters)==null?void 0:Z.length)){const J=ee.split(new RegExp(`(?:${t.delimiters.join("|")})+`));J.length>1&&(J.forEach(X=>{X=X.trim(),X&&$(kh(t,X))}),w.value="")}ee||(f.value=-1),a.value=!ee}});He(w,ee=>{h?En(()=>h=!1):o.value&&!c.value&&(c.value=!0),n("update:search",ee)}),He(v,ee=>{var Z,J;t.multiple||(w.value=(J=(Z=ee[0])==null?void 0:Z.title)!=null?J:"")});const{filteredItems:E,getMatches:S}=R8(t,p,re(()=>a.value?void 0:A.value)),C=re(()=>v.value.map(ee=>p.value.find(Z=>t.valueComparator(Z.value,ee.value))||ee)),M=re(()=>t.hideSelected?E.value.filter(ee=>!C.value.some(Z=>Z.value===ee.value)):E.value),D=re(()=>C.value.map(ee=>ee.props.value)),T=re(()=>C.value[f.value]),L=Se();function F(ee){h=!0,t.openOnClear&&(c.value=!0)}function k(){t.hideNoData&&!p.value.length||t.readonly||(b==null?void 0:b.isReadonly.value)||(c.value=!0)}function I(ee){var X,Q;if(t.readonly||(b==null?void 0:b.isReadonly.value))return;const Z=s.value.selectionStart,J=D.value.length;if((f.value>-1||["Enter","ArrowDown","ArrowUp"].includes(ee.key))&&ee.preventDefault(),["Enter","ArrowDown"].includes(ee.key)&&(c.value=!0),["Escape"].includes(ee.key)&&(c.value=!1),["Enter","Escape","Tab"].includes(ee.key)&&(a.value=!0),ee.key==="ArrowDown"?(X=L.value)==null||X.focus("next"):ee.key==="ArrowUp"&&((Q=L.value)==null||Q.focus("prev")),!!t.multiple){if(["Backspace","Delete"].includes(ee.key)){if(f.value<0){ee.key==="Backspace"&&!A.value&&(f.value=J-1);return}const oe=f.value;T.value&&$(T.value),f.value=oe>=J-1?J-2:oe}if(ee.key==="ArrowLeft"){if(f.value<0&&Z>0)return;const oe=f.value>-1?f.value-1:J-1;C.value[oe]?f.value=oe:(f.value=-1,s.value.setSelectionRange(A.value.length,A.value.length))}if(ee.key==="ArrowRight"){if(f.value<0)return;const oe=f.value+1;C.value[oe]?f.value=oe:(f.value=-1,s.value.setSelectionRange(0,0))}ee.key==="Enter"&&A.value&&($(kh(t,A.value)),A.value="")}}function O(){o.value&&(a.value=!0)}function $(ee){if(t.multiple){const Z=D.value.findIndex(J=>t.valueComparator(J,ee.value));if(Z===-1)v.value=[...v.value,ee];else{const J=[...v.value];J.splice(Z,1),v.value=J}A.value=""}else v.value=[ee],w.value=ee.title,En(()=>{c.value=!1,a.value=!0})}function N(ee){o.value=!0}function W(ee){var Z;ee.relatedTarget==null&&((Z=s.value)==null||Z.focus())}return He(E,ee=>{!ee.length&&t.hideNoData&&(c.value=!1)}),He(o,ee=>{if(ee)f.value=-1;else{if(c.value=!1,!t.multiple||!A.value)return;v.value=[...v.value,kh(t,A.value)],A.value=""}}),ze(()=>{const ee=!!(t.chips||r.chip),Z=!!(!t.hideNoData||M.value.length||r.prepend||r.append||r["no-data"]),J=v.value.length>0,[X]=uf.filterProps(t);return P(uf,Je({ref:s},X,{modelValue:A.value,"onUpdate:modelValue":[Q=>A.value=Q,Q=>{Q==null&&(v.value=[])}],focused:o.value,"onUpdate:focused":Q=>o.value=Q,validationValue:v.externalValue,dirty:J,class:["v-combobox",{"v-combobox--active-menu":c.value,"v-combobox--chips":!!t.chips,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${t.multiple?"multiple":"single"}`]:!0},t.class],style:t.style,appendInnerIcon:t.items.length?t.menuIcon:void 0,readonly:t.readonly,placeholder:J?void 0:t.placeholder,"onClick:clear":F,"onMousedown:control":k,onKeydown:I}),{...r,default:()=>P(mt,null,[P(Dw,Je({ref:l,modelValue:c.value,"onUpdate:modelValue":Q=>c.value=Q,activator:"parent",contentClass:"v-combobox__content",eager:t.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:t.transition,onAfterLeave:O},t.menuProps),{default:()=>[Z&&P(Cw,{ref:L,selected:D.value,selectStrategy:t.multiple?"independent":"single-independent",onMousedown:Q=>Q.preventDefault(),onFocusin:N,onFocusout:W},{default:()=>{var Q,oe,he,ve;return[!M.value.length&&!t.hideNoData&&((oe=(Q=r["no-data"])==null?void 0:Q.call(r))!=null?oe:P(vl,{title:i(t.noDataText)},null)),(he=r["prepend-item"])==null?void 0:he.call(r),M.value.map(ye=>{var V,R;return(R=(V=r.item)==null?void 0:V.call(r,{item:ye,props:Je(ye.props,{onClick:()=>$(ye)})}))!=null?R:P(vl,Je({key:ye.value},ye.props,{onClick:()=>$(ye)}),{prepend:B=>{let{isSelected:j}=B;return t.multiple&&!t.hideSelected?P(Cd,{modelValue:j,ripple:!1,tabindex:"-1"},null):void 0},title:()=>{var B,j,se;return a.value?ye.title:VAe(ye.title,(B=S(ye))==null?void 0:B.title,(se=(j=A.value)==null?void 0:j.length)!=null?se:0)}})}),(ve=r["append-item"])==null?void 0:ve.call(r)]}})]}),C.value.map((Q,oe)=>{var ye,V;function he(R){R.stopPropagation(),R.preventDefault(),$(Q)}const ve={"onClick:close":he,modelValue:!0,"onUpdate:modelValue":void 0};return P("div",{key:Q.value,class:["v-combobox__selection",oe===f.value&&["v-combobox__selection--selected",_.value]],style:oe===f.value?m.value:{}},[ee?r.chip?P(pn,{key:"chip-defaults",defaults:{VChip:{closable:t.closableChips,size:"small",text:Q.title}}},{default:()=>{var R;return[(R=r.chip)==null?void 0:R.call(r,{item:Q,index:oe,props:ve})]}}):P(vv,Je({key:"chip",closable:t.closableChips,size:"small",text:Q.title},ve),null):(V=(ye=r.selection)==null?void 0:ye.call(r,{item:Q,index:oe}))!=null?V:P("span",{class:"v-combobox__selection-text"},[Q.title,t.multiple&&oe<C.value.length-1&&P("span",{class:"v-combobox__selection-comma"},[Ue(",")])])])})])})}),Wo({isFocused:o,isPristine:a,menu:c,search:A,selectionIndex:f,filteredItems:E,select:$},s)}});const GAe=Oe()({name:"VDialog",props:{fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,..._v({origin:"center center",scrollStrategy:"block",transition:{component:vw},zIndex:2400})},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),{scopeId:i}=yv(),s=Se();function o(l){var f,h;const u=l.relatedTarget,c=l.target;if(u!==c&&((f=s.value)==null?void 0:f.contentEl)&&((h=s.value)==null?void 0:h.globalTop)&&![document,s.value.contentEl].includes(c)&&!s.value.contentEl.contains(c)){const d=lD(s.value.contentEl);if(!d.length)return;const p=d[0],g=d[d.length-1];u===p?g.focus():p.focus()}}wr&&He(()=>r.value&&t.retainFocus,l=>{l?document.addEventListener("focusin",o):document.removeEventListener("focusin",o)},{immediate:!0}),He(r,async l=>{var u,c;await En(),l?(u=s.value.contentEl)==null||u.focus({preventScroll:!0}):(c=s.value.activatorEl)==null||c.focus({preventScroll:!0})});const a=re(()=>Je({"aria-haspopup":"dialog","aria-expanded":String(r.value)},t.activatorProps));return ze(()=>{const[l]=yl.filterProps(t);return P(yl,Je({ref:s,class:["v-dialog",{"v-dialog--fullscreen":t.fullscreen,"v-dialog--scrollable":t.scrollable},t.class],style:t.style},l,{modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,"aria-modal":"true",activatorProps:a.value,role:"dialog"},i),{activator:n.activator,default:function(){for(var u=arguments.length,c=new Array(u),f=0;f<u;f++)c[f]=arguments[f];return P(pn,{root:!0},{default:()=>{var h;return[(h=n.default)==null?void 0:h.call(n,...c)]}})}})}),Wo({},s)}});const Bm=Symbol.for("vuetify:v-expansion-panel"),UAe=["default","accordion","inset","popout"],HAe=Oe()({name:"VExpansionPanels",props:{color:String,variant:{type:String,default:"default",validator:t=>UAe.includes(t)},readonly:Boolean,...Ke(),...jd(),...Tt(),...jt()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;Ef(t,Bm);const{themeClasses:r}=ln(t),i=re(()=>t.variant&&`v-expansion-panels--variant-${t.variant}`);return Cr({VExpansionPanel:{color:Ne(t,"color")},VExpansionPanelTitle:{readonly:Ne(t,"readonly")}}),ze(()=>P(t.tag,{class:["v-expansion-panels",r.value,i.value,t.class],style:t.style},n)),{}}}),r6=pt({color:String,expandIcon:{type:bt,default:"$expand"},collapseIcon:{type:bt,default:"$collapse"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean},"v-expansion-panel-title"),i6=Oe()({name:"VExpansionPanelTitle",directives:{Ripple:cc},props:{...Ke(),...r6()},setup(t,e){let{slots:n}=e;const r=zt(Bm);if(!r)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:i,backgroundColorStyles:s}=br(t,"color"),o=re(()=>({collapseIcon:t.collapseIcon,disabled:r.disabled.value,expanded:r.isSelected.value,expandIcon:t.expandIcon,readonly:t.readonly}));return ze(()=>{var a;return Nt(P("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":r.isSelected.value},i.value,t.class],style:[s.value,t.style],type:"button",tabindex:r.disabled.value?-1:void 0,disabled:r.disabled.value,"aria-expanded":r.isSelected.value,onClick:t.readonly?void 0:r.toggle},[P("span",{class:"v-expansion-panel-title__overlay"},null),(a=n.default)==null?void 0:a.call(n,o.value),!t.hideActions&&P("span",{class:"v-expansion-panel-title__icon"},[n.actions?n.actions(o.value):P(yr,{icon:r.isSelected.value?t.collapseIcon:t.expandIcon},null)])]),[[Xi("ripple"),t.ripple]])}),{}}}),s6=Oe()({name:"VExpansionPanelText",props:{...Ke(),...Mw()},setup(t,e){let{slots:n}=e;const r=zt(Bm);if(!r)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:i,onAfterLeave:s}=LD(t,r.isSelected);return ze(()=>P(yw,{onAfterLeave:s},{default:()=>{var o;return[Nt(P("div",{class:["v-expansion-panel-text",t.class],style:t.style},[n.default&&i.value&&P("div",{class:"v-expansion-panel-text__wrapper"},[(o=n.default)==null?void 0:o.call(n)])]),[[$i,r.isSelected.value]])]}})),{}}}),WAe=Oe()({name:"VExpansionPanel",props:{title:String,text:String,bgColor:String,...Ke(),...Gr(),...qd(),...Mw(),...Gn(),...Tt(),...r6()},emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const r=Jd(t,Bm),{backgroundColorClasses:i,backgroundColorStyles:s}=br(t,"bgColor"),{elevationClasses:o}=pi(t),{roundedClasses:a}=tr(t),l=re(()=>(r==null?void 0:r.disabled.value)||t.disabled),u=re(()=>r.group.items.value.reduce((h,d,p)=>(r.group.selected.value.includes(d.id)&&h.push(p),h),[])),c=re(()=>{const h=r.group.items.value.findIndex(d=>d.id===r.id);return!r.isSelected.value&&u.value.some(d=>d-h===1)}),f=re(()=>{const h=r.group.items.value.findIndex(d=>d.id===r.id);return!r.isSelected.value&&u.value.some(d=>d-h===-1)});return ar(Bm,r),ze(()=>{const h=!!(n.text||t.text),d=!!(n.title||t.title);return P(t.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":r.isSelected.value,"v-expansion-panel--before-active":c.value,"v-expansion-panel--after-active":f.value,"v-expansion-panel--disabled":l.value},a.value,i.value,t.class],style:[s.value,t.style],"aria-expanded":r.isSelected.value},{default:()=>{var p;return[P("div",{class:["v-expansion-panel__shadow",...o.value]},null),d&&P(i6,{key:"title",collapseIcon:t.collapseIcon,color:t.color,expandIcon:t.expandIcon,hideActions:t.hideActions,ripple:t.ripple},{default:()=>[n.title?n.title():t.title]}),h&&P(s6,{key:"text",eager:t.eager},{default:()=>[n.text?n.text():t.text]}),(p=n.default)==null?void 0:p.call(n)]}})}),{}}});const $Ae=Oe()({name:"VFileInput",inheritAttrs:!1,props:{chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:t=>typeof t=="boolean"||[1e3,1024].includes(t)},...Ll({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:t=>qs(t).every(e=>e!=null&&typeof e=="object")},...bw({clearable:!0})},emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{t:s}=uo(),o=Dt(t,"modelValue"),{isFocused:a,focus:l,blur:u}=dc(t),c=re(()=>typeof t.showSize!="boolean"?t.showSize:void 0),f=re(()=>{var E;return((E=o.value)!=null?E:[]).reduce((S,C)=>{let{size:M=0}=C;return S+M},0)}),h=re(()=>uR(f.value,c.value)),d=re(()=>{var E;return((E=o.value)!=null?E:[]).map(S=>{const{name:C="",size:M=0}=S;return t.showSize?`${C} (${uR(M,c.value)})`:C})}),p=re(()=>{var S,C;const E=(C=(S=o.value)==null?void 0:S.length)!=null?C:0;return t.showSize?s(t.counterSizeString,E,h.value):s(t.counterString,E)}),g=Se(),x=Se(),_=Se();function m(){var E;_.value!==document.activeElement&&((E=_.value)==null||E.focus()),a.value||l()}function v(E){w(E)}function b(E){r("mousedown:control",E)}function w(E){var S;(S=_.value)==null||S.click(),r("click:control",E)}function A(E){E.stopPropagation(),m(),En(()=>{o.value=[],aD(t["onClick:clear"],E)})}return He(o,E=>{(!Array.isArray(E)||!E.length)&&_.value&&(_.value.value="")}),ze(()=>{const E=!!(i.counter||t.counter),S=!!(E||i.details),[C,M]=wf(n),[{modelValue:D,...T}]=fi.filterProps(t),[L]=MD(t);return P(fi,Je({ref:g,modelValue:o.value,"onUpdate:modelValue":F=>o.value=F,class:["v-file-input",t.class],style:t.style,"onClick:prepend":v},C,T,{focused:a.value}),{...i,default:F=>{let{id:k,isDisabled:I,isDirty:O,isReadonly:$,isValid:N}=F;return P(mv,Je({ref:x,"prepend-icon":t.prependIcon,onMousedown:b,onClick:w,"onClick:clear":A,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"]},L,{id:k.value,active:O.value||a.value,dirty:O.value,disabled:I.value,focused:a.value,error:N.value===!1}),{...i,default:W=>{var ee;let{props:{class:H,...K}}=W;return P(mt,null,[P("input",Je({ref:_,type:"file",readonly:$.value,disabled:I.value,multiple:t.multiple,name:t.name,onClick:Z=>{Z.stopPropagation(),m()},onChange:Z=>{var X;if(!Z.target)return;const J=Z.target;o.value=[...(X=J.files)!=null?X:[]]},onFocus:m,onBlur:u},K,M),null),P("div",{class:H},[!!((ee=o.value)!=null&&ee.length)&&(i.selection?i.selection({fileNames:d.value,totalBytes:f.value,totalBytesReadable:h.value}):t.chips?d.value.map(Z=>P(vv,{key:Z,size:"small",color:t.color},{default:()=>[Z]})):d.value.join(", "))])])}})},details:S?F=>{var k,I;return P(mt,null,[(k=i.details)==null?void 0:k.call(i,F),E&&P(mt,null,[P("span",null,null),P(Sw,{active:!!((I=o.value)!=null&&I.length),value:p.value},i.counter)])])}:void 0})}),Wo({},g,x,_)}});const XAe=Oe()({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Fs(),...Ke(),...Gr(),...$d(),...Gn(),...Tt({tag:"footer"}),...jt()},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{backgroundColorClasses:i,backgroundColorStyles:s}=br(Ne(t,"color")),{borderClasses:o}=ho(t),{elevationClasses:a}=pi(t),{roundedClasses:l}=tr(t),u=Se(32),{resizeRef:c}=ka(d=>{!d.length||(u.value=d[0].target.clientHeight)}),f=re(()=>t.height==="auto"?u.value:parseInt(t.height,10)),{layoutItemStyles:h}=Xd({id:t.name,order:re(()=>parseInt(t.order,10)),position:re(()=>"bottom"),layoutSize:f,elementSize:re(()=>t.height==="auto"?void 0:f.value),active:re(()=>t.app),absolute:Ne(t,"absolute")});return ze(()=>P(t.tag,{ref:c,class:["v-footer",r.value,i.value,o.value,a.value,l.value,t.class],style:[s.value,t.app?h.value:void 0,t.style]},n)),{}}}),YAe=Oe()({name:"VForm",props:{...Ke(),...Jxe()},emits:{"update:modelValue":t=>!0,submit:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=Kxe(t),s=Se();function o(l){l.preventDefault(),i.reset()}function a(l){const u=l,c=i.validate();u.then=c.then.bind(c),u.catch=c.catch.bind(c),u.finally=c.finally.bind(c),r("submit",u),u.defaultPrevented||c.then(f=>{var d;let{valid:h}=f;h&&((d=s.value)==null||d.submit())}),u.preventDefault()}return ze(()=>{var l;return P("form",{ref:s,class:["v-form",t.class],style:t.style,novalidate:!0,onReset:o,onSubmit:a},[(l=n.default)==null?void 0:l.call(n,i)])}),Wo(i,s)}});const jAe=Oe()({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...Ke(),...Tt()},setup(t,e){let{slots:n}=e;return ze(()=>P(t.tag,{class:["v-container",{"v-container--fluid":t.fluid},t.class],style:t.style},n)),{}}}),o6=(()=>gw.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}))(),a6=(()=>gw.reduce((t,e)=>{const n="offset"+_l(e);return t[n]={type:[String,Number],default:null},t},{}))(),l6=(()=>gw.reduce((t,e)=>{const n="order"+_l(e);return t[n]={type:[String,Number],default:null},t},{}))(),HR={col:Object.keys(o6),offset:Object.keys(a6),order:Object.keys(l6)};function qAe(t,e,n){let r=t;if(!(n==null||n===!1)){if(e){const i=e.replace(t,"");r+=`-${i}`}return t==="col"&&(r="v-"+r),t==="col"&&(n===""||n===!0)||(r+=`-${n}`),r.toLowerCase()}}const JAe=["auto","start","end","center","baseline","stretch"],KAe=Oe()({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...o6,offset:{type:[String,Number],default:null},...a6,order:{type:[String,Number],default:null},...l6,alignSelf:{type:String,default:null,validator:t=>JAe.includes(t)},...Ke(),...Tt()},setup(t,e){let{slots:n}=e;const r=re(()=>{const i=[];let s;for(s in HR)HR[s].forEach(a=>{const l=t[a],u=qAe(s,a,l);u&&i.push(u)});const o=i.some(a=>a.startsWith("v-col-"));return i.push({"v-col":!o||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),i});return()=>{var i;return no(t.tag,{class:[r.value,t.class],style:t.style},(i=n.default)==null?void 0:i.call(n))}}}),RD=["start","end","center"],u6=["space-between","space-around","space-evenly"];function OD(t,e){return gw.reduce((n,r)=>{const i=t+_l(r);return n[i]=e(),n},{})}const ZAe=[...RD,"baseline","stretch"],c6=t=>ZAe.includes(t),f6=OD("align",()=>({type:String,default:null,validator:c6})),QAe=[...RD,...u6],h6=t=>QAe.includes(t),d6=OD("justify",()=>({type:String,default:null,validator:h6})),eEe=[...RD,...u6,"stretch"],p6=t=>eEe.includes(t),g6=OD("alignContent",()=>({type:String,default:null,validator:p6})),WR={align:Object.keys(f6),justify:Object.keys(d6),alignContent:Object.keys(g6)},tEe={align:"align",justify:"justify",alignContent:"align-content"};function nEe(t,e,n){let r=tEe[t];if(n!=null){if(e){const i=e.replace(t,"");r+=`-${i}`}return r+=`-${n}`,r.toLowerCase()}}const rEe=Oe()({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c6},...f6,justify:{type:String,default:null,validator:h6},...d6,alignContent:{type:String,default:null,validator:p6},...g6,...Ke(),...Tt()},setup(t,e){let{slots:n}=e;const r=re(()=>{const i=[];let s;for(s in WR)WR[s].forEach(o=>{const a=t[o],l=nEe(s,o,a);l&&i.push(l)});return i.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),i});return()=>{var i;return no(t.tag,{class:["v-row",r.value,t.class],style:t.style},(i=n.default)==null?void 0:i.call(n))}}}),iEe=Ho("flex-grow-1","div","VSpacer"),sEe=Oe()({name:"VHover",props:{disabled:Boolean,modelValue:{type:Boolean,default:void 0},...C8()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),{runOpenDelay:i,runCloseDelay:s}=M8(t,o=>!t.disabled&&(r.value=o));return()=>{var o;return(o=n.default)==null?void 0:o.call(n,{isHovering:r.value,props:{onMouseenter:i,onMouseleave:s}})}}});const m6=Symbol.for("vuetify:v-item-group"),oEe=Oe()({name:"VItemGroup",props:{...Ke(),...jd({selectedClass:"v-item--selected"}),...Tt(),...jt()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{isSelected:i,select:s,next:o,prev:a,selected:l}=Ef(t,m6);return()=>P(t.tag,{class:["v-item-group",r.value,t.class],style:t.style},{default:()=>{var u;return[(u=n.default)==null?void 0:u.call(n,{isSelected:i,select:s,next:o,prev:a,selected:l.value})]}})}}),aEe=Oe()({name:"VItem",props:qd(),emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const{isSelected:r,select:i,toggle:s,selectedClass:o,value:a,disabled:l}=Jd(t,m6);return()=>{var u;return(u=n.default)==null?void 0:u.call(n,{isSelected:r.value,selectedClass:o.value,select:i,toggle:s,value:a.value,disabled:l.value})}}});const lEe=Ho("v-kbd");const uEe=Oe()({name:"VLayout",props:{...Ke(),...kU()},setup(t,e){let{slots:n}=e;const{layoutClasses:r,layoutStyles:i,getLayoutItem:s,items:o,layoutRef:a}=RU(t);return ze(()=>{var l;return P("div",{ref:a,class:[r.value,t.class],style:[i.value,t.style]},[(l=n.default)==null?void 0:l.call(n)])}),{getLayoutItem:s,items:o}}});const cEe=Oe()({name:"VLayoutItem",props:{position:{type:String,required:!0},size:{type:[Number,String],default:300},modelValue:Boolean,...Ke(),...$d()},setup(t,e){let{slots:n}=e;const{layoutItemStyles:r}=Xd({id:t.name,order:re(()=>parseInt(t.order,10)),position:Ne(t,"position"),elementSize:Ne(t,"size"),layoutSize:Ne(t,"size"),active:Ne(t,"modelValue"),absolute:Ne(t,"absolute")});return()=>{var i;return P("div",{class:["v-layout-item",t.class],style:[r.value,t.style]},[(i=n.default)==null?void 0:i.call(n)])}}}),fEe=Oe()({name:"VLazy",directives:{intersect:dv},props:{modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...Ke(),...co(),...Tt(),...Tl({transition:"fade-transition"})},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{dimensionStyles:r}=fo(t),i=Dt(t,"modelValue");function s(o){i.value||(i.value=o)}return ze(()=>Nt(P(t.tag,{class:["v-lazy",t.class],style:[r.value,t.style]},{default:()=>[i.value&&P(Do,{transition:t.transition,appear:!0},{default:()=>{var o;return[(o=n.default)==null?void 0:o.call(n)]}})]}),[[Xi("intersect"),{handler:s,options:t.options},null]])),{}}});const hEe=Oe()({name:"VLocaleProvider",props:{locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...Ke()},setup(t,e){let{slots:n}=e;const{rtlClasses:r}=bbe(t);return ze(()=>{var i;return P("div",{class:["v-locale-provider",r.value,t.class],style:t.style},[(i=n.default)==null?void 0:i.call(n)])}),{}}});const dEe=Oe()({name:"VMain",props:{scrollable:Boolean,...Ke(),...Tt({tag:"main"})},setup(t,e){let{slots:n}=e;const{mainStyles:r}=uxe(),{ssrBootStyles:i}=xf();return ze(()=>P(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable},t.class],style:[r.value,i.value,t.style]},{default:()=>{var s,o;return[t.scrollable?P("div",{class:"v-main__scroller"},[(s=n.default)==null?void 0:s.call(n)]):(o=n.default)==null?void 0:o.call(n)]}})),{}}});function pEe(t){let{rootEl:e,isSticky:n,layoutItemStyles:r}=t;const i=Se(!1),s=Se(0),o=re(()=>{const u=typeof i.value=="boolean"?"top":i.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,i.value?{[u]:et(s.value)}:{top:r.value.top}]});hi(()=>{He(n,u=>{u?window.addEventListener("scroll",l,{passive:!0}):window.removeEventListener("scroll",l)},{immediate:!0})}),qi(()=>{document.removeEventListener("scroll",l)});let a=0;function l(){var p;const u=a>window.scrollY?"up":"down",c=e.value.getBoundingClientRect(),f=parseFloat((p=r.value.top)!=null?p:0),h=window.scrollY-Math.max(0,s.value-f),d=c.height+Math.max(s.value,f)-window.scrollY-window.innerHeight;c.height<window.innerHeight-f?(i.value="top",s.value=f):u==="up"&&i.value==="bottom"||u==="down"&&i.value==="top"?(s.value=window.scrollY+c.top,i.value=!0):u==="down"&&d<=0?(s.value=0,i.value="bottom"):u==="up"&&h<=0&&(s.value=c.top+h,i.value="top"),a=window.scrollY}return{isStuck:i,stickyStyles:o}}const gEe=100,mEe=20;function $R(t){const e=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*e}function XR(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let e=0;for(let n=t.length-1;n>0;n--){if(t[n].t===t[n-1].t)continue;const r=$R(e),i=(t[n].d-t[n-1].d)/(t[n].t-t[n-1].t);e+=(i-r)*Math.abs(i),n===t.length-1&&(e*=.5)}return $R(e)*1e3}function vEe(){const t={};function e(i){Array.from(i.changedTouches).forEach(s=>{var a;((a=t[s.identifier])!=null?a:t[s.identifier]=new Wwe(mEe)).push([i.timeStamp,s])})}function n(i){Array.from(i.changedTouches).forEach(s=>{delete t[s.identifier]})}function r(i){var u;const s=(u=t[i])==null?void 0:u.values().reverse();if(!s)throw new Error(`No samples for touch id ${i}`);const o=s[0],a=[],l=[];for(const c of s){if(o[0]-c[0]>gEe)break;a.push({t:c[0],d:c[1].clientX}),l.push({t:c[0],d:c[1].clientY})}return{x:XR(a),y:XR(l),get direction(){const{x:c,y:f}=this,[h,d]=[Math.abs(c),Math.abs(f)];return h>d&&c>=0?"right":h>d&&c<=0?"left":d>h&&f>=0?"down":d>h&&f<=0?"up":yEe()}}}return{addMovement:e,endTouch:n,getVelocity:r}}function yEe(){throw new Error}function _Ee(t){let{isActive:e,isTemporary:n,width:r,touchless:i,position:s}=t;hi(()=>{window.addEventListener("touchstart",_,{passive:!0}),window.addEventListener("touchmove",m,{passive:!1}),window.addEventListener("touchend",v,{passive:!0})}),qi(()=>{window.removeEventListener("touchstart",_),window.removeEventListener("touchmove",m),window.removeEventListener("touchend",v)});const o=re(()=>["left","right"].includes(s.value)),{addMovement:a,endTouch:l,getVelocity:u}=vEe();let c=!1;const f=Se(!1),h=Se(0),d=Se(0);let p;function g(w,A){return(s.value==="left"?w:s.value==="right"?document.documentElement.clientWidth-w:s.value==="top"?w:s.value==="bottom"?document.documentElement.clientHeight-w:ph())-(A?r.value:0)}function x(w){let A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const E=s.value==="left"?(w-d.value)/r.value:s.value==="right"?(document.documentElement.clientWidth-w-d.value)/r.value:s.value==="top"?(w-d.value)/r.value:s.value==="bottom"?(document.documentElement.clientHeight-w-d.value)/r.value:ph();return A?Math.max(0,Math.min(1,E)):E}function _(w){if(i.value)return;const A=w.changedTouches[0].clientX,E=w.changedTouches[0].clientY,S=25,C=s.value==="left"?A<S:s.value==="right"?A>document.documentElement.clientWidth-S:s.value==="top"?E<S:s.value==="bottom"?E>document.documentElement.clientHeight-S:ph(),M=e.value&&(s.value==="left"?A<r.value:s.value==="right"?A>document.documentElement.clientWidth-r.value:s.value==="top"?E<r.value:s.value==="bottom"?E>document.documentElement.clientHeight-r.value:ph());(C||M||e.value&&n.value)&&(c=!0,p=[A,E],d.value=g(o.value?A:E,e.value),h.value=x(o.value?A:E),l(w),a(w))}function m(w){const A=w.changedTouches[0].clientX,E=w.changedTouches[0].clientY;if(c){if(!w.cancelable){c=!1;return}const C=Math.abs(A-p[0]),M=Math.abs(E-p[1]);(o.value?C>M&&C>3:M>C&&M>3)?(f.value=!0,c=!1):(o.value?M:C)>3&&(c=!1)}if(!f.value)return;w.preventDefault(),a(w);const S=x(o.value?A:E,!1);h.value=Math.max(0,Math.min(1,S)),S>1?d.value=g(o.value?A:E,!0):S<0&&(d.value=g(o.value?A:E,!1))}function v(w){if(c=!1,!f.value)return;a(w),f.value=!1;const A=u(w.changedTouches[0].identifier),E=Math.abs(A.x),S=Math.abs(A.y);(o.value?E>S&&E>400:S>E&&S>3)?e.value=A.direction===({left:"right",right:"left",top:"down",bottom:"up"}[s.value]||ph()):e.value=h.value>.5}const b=re(()=>f.value?{transform:s.value==="left"?`translateX(calc(-100% + ${h.value*r.value}px))`:s.value==="right"?`translateX(calc(100% - ${h.value*r.value}px))`:s.value==="top"?`translateY(calc(-100% + ${h.value*r.value}px))`:s.value==="bottom"?`translateY(calc(100% - ${h.value*r.value}px))`:ph(),transition:"none"}:void 0);return{isDragging:f,dragProgress:h,dragStyles:b}}function ph(){throw new Error}const wEe=["start","end","left","right","top","bottom"],bEe=Oe()({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>wEe.includes(t)},sticky:Boolean,...Fs(),...Ke(),...Gr(),...$d(),...Gn(),...Tt({tag:"nav"}),...jt()},emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const{isRtl:s}=Dl(),{themeClasses:o}=ln(t),{borderClasses:a}=ho(t),{backgroundColorClasses:l,backgroundColorStyles:u}=br(Ne(t,"color")),{elevationClasses:c}=pi(t),{mobile:f}=bf(),{roundedClasses:h}=tr(t),d=e8(),p=Dt(t,"modelValue",null,N=>!!N),{ssrBootStyles:g}=xf(),x=Se(),_=Se(!1),m=re(()=>t.rail&&t.expandOnHover&&_.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),v=re(()=>fC(t.location,s.value)),b=re(()=>!t.permanent&&(f.value||t.temporary)),w=re(()=>t.sticky&&!b.value&&v.value!=="bottom");t.expandOnHover&&t.rail!=null&&He(_,N=>r("update:rail",!N)),t.disableResizeWatcher||He(b,N=>!t.permanent&&En(()=>p.value=!N)),!t.disableRouteWatcher&&d&&He(d.currentRoute,()=>b.value&&(p.value=!1)),He(()=>t.permanent,N=>{N&&(p.value=!0)}),Gm(()=>{t.modelValue!=null||b.value||(p.value=t.permanent||!f.value)});const{isDragging:A,dragProgress:E,dragStyles:S}=_Ee({isActive:p,isTemporary:b,width:m,touchless:Ne(t,"touchless"),position:v}),C=re(()=>{const N=b.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):m.value;return A.value?N*E.value:N}),{layoutItemStyles:M,layoutRect:D,layoutItemScrimStyles:T}=Xd({id:t.name,order:re(()=>parseInt(t.order,10)),position:v,layoutSize:C,elementSize:m,active:re(()=>p.value||A.value),disableTransitions:re(()=>A.value),absolute:re(()=>t.absolute||w.value&&typeof L.value!="string")}),{isStuck:L,stickyStyles:F}=pEe({rootEl:x,isSticky:w,layoutItemStyles:M}),k=br(re(()=>typeof t.scrim=="string"?t.scrim:null)),I=re(()=>({...A.value?{opacity:E.value*.2,transition:"none"}:void 0,...D.value?{left:et(D.value.left),right:et(D.value.right),top:et(D.value.top),bottom:et(D.value.bottom)}:void 0,...T.value}));Cr({VList:{bgColor:"transparent"}});function O(){_.value=!0}function $(){_.value=!1}return ze(()=>{const N=i.image||t.image;return P(mt,null,[P(t.tag,Je({ref:x,onMouseenter:O,onMouseleave:$,class:["v-navigation-drawer",`v-navigation-drawer--${v.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":_.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":b.value,"v-navigation-drawer--active":p.value,"v-navigation-drawer--sticky":w.value},o.value,l.value,a.value,c.value,h.value,t.class],style:[u.value,M.value,S.value,g.value,F.value,t.style]},n),{default:()=>{var W,H,K,ee;return[N&&P("div",{key:"image",class:"v-navigation-drawer__img"},[i.image?(W=i.image)==null?void 0:W.call(i,{image:t.image}):P("img",{src:t.image,alt:""},null)]),i.prepend&&P("div",{class:"v-navigation-drawer__prepend"},[(H=i.prepend)==null?void 0:H.call(i)]),P("div",{class:"v-navigation-drawer__content"},[(K=i.default)==null?void 0:K.call(i)]),i.append&&P("div",{class:"v-navigation-drawer__append"},[(ee=i.append)==null?void 0:ee.call(i)])]}}),P(Ea,{name:"fade-transition"},{default:()=>[b.value&&(A.value||p.value)&&!!t.scrim&&P("div",{class:["v-navigation-drawer__scrim",k.backgroundColorClasses.value],style:[I.value,k.backgroundColorStyles.value],onClick:()=>p.value=!1},null)]})])}),{isStuck:L}}}),xEe=lo({name:"VNoSsr",setup(t,e){let{slots:n}=e;const r=P8();return()=>{var i;return r.value&&((i=n.default)==null?void 0:i.call(n))}}});function SEe(){const t=Se([]);kO(()=>t.value=[]);function e(n,r){t.value[r]=n}return{refs:t,updateRef:e}}const AEe=Oe()({name:"VPagination",props:{activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:t=>t.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:t=>t%1===0},totalVisible:[Number,String],firstIcon:{type:bt,default:"$first"},prevIcon:{type:bt,default:"$prev"},nextIcon:{type:bt,default:"$next"},lastIcon:{type:bt,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...Fs(),...Ke(),...Ur(),...Gr(),...Gn(),...Pl(),...Tt({tag:"nav"}),...jt(),...po({variant:"text"})},emits:{"update:modelValue":t=>!0,first:t=>!0,prev:t=>!0,next:t=>!0,last:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=Dt(t,"modelValue"),{t:s,n:o}=uo(),{isRtl:a}=Dl(),{themeClasses:l}=ln(t),{width:u}=bf(),c=Se(-1);Cr(void 0,{scoped:!0});const{resizeRef:f}=ka(S=>{if(!S.length)return;const{target:C,contentRect:M}=S[0],D=C.querySelector(".v-pagination__list > *");if(!D)return;const T=M.width,L=D.offsetWidth+parseFloat(getComputedStyle(D).marginRight)*2;c.value=g(T,L)}),h=re(()=>parseInt(t.length,10)),d=re(()=>parseInt(t.start,10)),p=re(()=>t.totalVisible?parseInt(t.totalVisible,10):c.value>=0?c.value:g(u.value,58));function g(S,C){const M=t.showFirstLastPage?5:3;return Math.max(0,Math.floor(+((S-C*M)/C).toFixed(2)))}const x=re(()=>{if(h.value<=0||isNaN(h.value)||h.value>Number.MAX_SAFE_INTEGER)return[];if(p.value<=1)return[i.value];if(h.value<=p.value)return ya(h.value,d.value);const S=p.value%2===0,C=S?p.value/2:Math.floor(p.value/2),M=S?C:C+1,D=h.value-C;if(M-i.value>=0)return[...ya(Math.max(1,p.value-1),d.value),t.ellipsis,h.value];if(i.value-D>=(S?1:0)){const T=p.value-1,L=h.value-T+d.value;return[d.value,t.ellipsis,...ya(T,L)]}else{const T=Math.max(1,p.value-3),L=T===1?i.value:i.value-Math.ceil(T/2)+d.value;return[d.value,t.ellipsis,...ya(T,L),t.ellipsis,h.value]}});function _(S,C,M){S.preventDefault(),i.value=C,M&&r(M,C)}const{refs:m,updateRef:v}=SEe();Cr({VPaginationBtn:{color:Ne(t,"color"),border:Ne(t,"border"),density:Ne(t,"density"),size:Ne(t,"size"),variant:Ne(t,"variant"),rounded:Ne(t,"rounded"),elevation:Ne(t,"elevation")}});const b=re(()=>x.value.map((S,C)=>{const M=D=>v(D,C);if(typeof S=="string")return{isActive:!1,key:`ellipsis-${C}`,page:S,props:{ref:M,ellipsis:!0,icon:!0,disabled:!0}};{const D=S===i.value;return{isActive:D,key:S,page:o(S),props:{ref:M,ellipsis:!1,icon:!0,disabled:!!t.disabled||+t.length<2,color:D?t.activeColor:t.color,ariaCurrent:D,ariaLabel:s(D?t.currentPageAriaLabel:t.pageAriaLabel,S),onClick:T=>_(T,S)}}}})),w=re(()=>{const S=!!t.disabled||i.value<=d.value,C=!!t.disabled||i.value>=d.value+h.value-1;return{first:t.showFirstLastPage?{icon:a.value?t.lastIcon:t.firstIcon,onClick:M=>_(M,d.value,"first"),disabled:S,ariaLabel:s(t.firstAriaLabel),ariaDisabled:S}:void 0,prev:{icon:a.value?t.nextIcon:t.prevIcon,onClick:M=>_(M,i.value-1,"prev"),disabled:S,ariaLabel:s(t.previousAriaLabel),ariaDisabled:S},next:{icon:a.value?t.prevIcon:t.nextIcon,onClick:M=>_(M,i.value+1,"next"),disabled:C,ariaLabel:s(t.nextAriaLabel),ariaDisabled:C},last:t.showFirstLastPage?{icon:a.value?t.firstIcon:t.lastIcon,onClick:M=>_(M,d.value+h.value-1,"last"),disabled:C,ariaLabel:s(t.lastAriaLabel),ariaDisabled:C}:void 0}});function A(){var C;const S=i.value-d.value;(C=m.value[S])==null||C.$el.focus()}function E(S){S.key===uC.left&&!t.disabled&&i.value>+t.start?(i.value=i.value-1,En(A)):S.key===uC.right&&!t.disabled&&i.value<d.value+h.value-1&&(i.value=i.value+1,En(A))}return ze(()=>P(t.tag,{ref:f,class:["v-pagination",l.value,t.class],style:t.style,role:"navigation","aria-label":s(t.ariaLabel),onKeydown:E,"data-test":"v-pagination-root"},{default:()=>[P("ul",{class:"v-pagination__list"},[t.showFirstLastPage&&P("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[n.first?n.first(w.value.first):P(Ui,Je({_as:"VPaginationBtn"},w.value.first),null)]),P("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[n.prev?n.prev(w.value.prev):P(Ui,Je({_as:"VPaginationBtn"},w.value.prev),null)]),b.value.map((S,C)=>P("li",{key:S.key,class:["v-pagination__item",{"v-pagination__item--is-active":S.isActive}],"data-test":"v-pagination-item"},[n.item?n.item(S):P(Ui,Je({_as:"VPaginationBtn"},S.props),{default:()=>[S.page]})])),P("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[n.next?n.next(w.value.next):P(Ui,Je({_as:"VPaginationBtn"},w.value.next),null)]),t.showFirstLastPage&&P("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[n.last?n.last(w.value.last):P(Ui,Je({_as:"VPaginationBtn"},w.value.last),null)])])]})),{}}});function EEe(t){return Math.floor(Math.abs(t))*Math.sign(t)}const CEe=Oe()({name:"VParallax",props:{scale:{type:[Number,String],default:.5},...Ke()},setup(t,e){let{slots:n}=e;const{intersectionRef:r,isIntersecting:i}=xD(),{resizeRef:s,contentRect:o}=ka(),{height:a}=bf(),l=Se();Bo(()=>{var d;r.value=s.value=(d=l.value)==null?void 0:d.$el});let u;He(i,d=>{d?(u=EU(r.value),u=u===document.scrollingElement?document:u,u.addEventListener("scroll",h,{passive:!0}),h()):u.removeEventListener("scroll",h)}),qi(()=>{u==null||u.removeEventListener("scroll",h)}),He(a,h),He(()=>{var d;return(d=o.value)==null?void 0:d.height},h);const c=re(()=>1-Wi(+t.scale));let f=-1;function h(){!i.value||(cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;const d=((w=l.value)==null?void 0:w.$el).querySelector(".v-img__img");if(!d)return;const p=u instanceof Document?document.documentElement.clientHeight:u.clientHeight,g=u instanceof Document?window.scrollY:u.scrollTop,x=r.value.getBoundingClientRect().top+g,_=o.value.height,m=x+(_-p)/2,v=EEe((g-m)*c.value),b=Math.max(1,(c.value*(p-_)+_)/_);d.style.setProperty("transform",`translateY(${v}px) scale(${b})`)}))}return ze(()=>P(Yd,{class:["v-parallax",{"v-parallax--active":i.value},t.class],style:t.style,ref:l,cover:!0,onLoadstart:h,onLoad:h},n)),{}}}),MEe=Oe()({name:"VRadio",props:{...Ew({falseIcon:"$radioOff",trueIcon:"$radioOn"})},setup(t,e){let{slots:n}=e;return ze(()=>P(Ed,Je(t,{class:["v-radio",t.class],style:t.style,type:"radio"}),n)),{}}});const DEe=Oe()({name:"VRadioGroup",inheritAttrs:!1,props:{height:{type:[Number,String],default:"auto"},...Ll(),...Na(DD(),["multiple"]),trueIcon:{type:bt,default:"$radioOn"},falseIcon:{type:bt,default:"$radioOff"},type:{type:String,default:"radio"}},emits:{"update:modelValue":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=Li(),s=re(()=>t.id||`radio-group-${i}`),o=Dt(t,"modelValue");return ze(()=>{const[a,l]=wf(n),[u,c]=fi.filterProps(t),[f,h]=Ed.filterProps(t),d=r.label?r.label({label:t.label,props:{for:s.value}}):t.label;return P(fi,Je({class:["v-radio-group",t.class],style:t.style},a,u,{modelValue:o.value,"onUpdate:modelValue":p=>o.value=p,id:s.value}),{...r,default:p=>{let{id:g,messagesId:x,isDisabled:_,isReadonly:m}=p;return P(mt,null,[d&&P(ep,{id:g.value},{default:()=>[d]}),P(u8,Je(f,{id:g.value,"aria-describedby":x.value,defaultsTarget:"VRadio",trueIcon:t.trueIcon,falseIcon:t.falseIcon,type:t.type,disabled:_.value,readonly:m.value,"aria-labelledby":d?g.value:void 0,multiple:!1},l,{modelValue:o.value,"onUpdate:modelValue":v=>o.value=v}),r)])}})}),{}}}),TEe=Oe()({name:"VRangeSlider",props:{...ww(),...Ll(),...Q8(),strict:Boolean,modelValue:{type:Array,default:()=>[0,0]}},emits:{"update:focused":t=>!0,"update:modelValue":t=>!0,end:t=>!0,start:t=>!0},setup(t,e){let{slots:n,emit:r}=e;const i=Se(),s=Se(),o=Se();function a(S){if(!i.value||!s.value)return;const C=LC(S,i.value.$el,t.direction),M=LC(S,s.value.$el,t.direction),D=Math.abs(C),T=Math.abs(M);return D<T||D===T&&C<0?i.value.$el:s.value.$el}const l=e6(t),u=Dt(t,"modelValue",void 0,S=>S!=null&&S.length?S.map(C=>l.roundValue(C)):[0,0]),{activeThumbRef:c,hasLabels:f,max:h,min:d,mousePressed:p,onSliderMousedown:g,onSliderTouchstart:x,position:_,trackContainerRef:m}=t6({props:t,steps:l,onSliderStart:()=>{r("start",u.value)},onSliderEnd:S=>{var D;let{value:C}=S;const M=c.value===((D=i.value)==null?void 0:D.$el)?[C,u.value[1]]:[u.value[0],C];u.value=M,r("end",M)},onSliderMove:S=>{var T,L,F,k;let{value:C}=S;const[M,D]=u.value;!t.strict&&M===D&&M!==d.value&&(c.value=C>M?(T=s.value)==null?void 0:T.$el:(L=i.value)==null?void 0:L.$el,(F=c.value)==null||F.focus()),c.value===((k=i.value)==null?void 0:k.$el)?u.value=[Math.min(C,D),D]:u.value=[M,Math.max(M,C)]},getActiveThumb:a}),{isFocused:v,focus:b,blur:w}=dc(t),A=re(()=>_(u.value[0])),E=re(()=>_(u.value[1]));return ze(()=>{const[S,C]=fi.filterProps(t),M=!!(t.label||n.label||n.prepend);return P(fi,Je({class:["v-slider","v-range-slider",{"v-slider--has-labels":!!n["tick-label"]||f.value,"v-slider--focused":v.value,"v-slider--pressed":p.value,"v-slider--disabled":t.disabled},t.class],style:t.style,ref:o},S,{focused:v.value}),{...n,prepend:M?D=>{var T,L,F;return P(mt,null,[((L=(T=n.label)==null?void 0:T.call(n,D))!=null?L:t.label)?P(ep,{class:"v-slider__label",text:t.label},null):void 0,(F=n.prepend)==null?void 0:F.call(n,D)])}:void 0,default:D=>{var F,k;let{id:T,messagesId:L}=D;return P("div",{class:"v-slider__container",onMousedown:g,onTouchstartPassive:x},[P("input",{id:`${T.value}_start`,name:t.name||T.value,disabled:t.disabled,readonly:t.readonly,tabindex:"-1",value:u.value[0]},null),P("input",{id:`${T.value}_stop`,name:t.name||T.value,disabled:t.disabled,readonly:t.readonly,tabindex:"-1",value:u.value[1]},null),P(n6,{ref:m,start:A.value,stop:E.value},{"tick-label":n["tick-label"]}),P(FC,{ref:i,"aria-describedby":L.value,focused:v&&c.value===((F=i.value)==null?void 0:F.$el),modelValue:u.value[0],"onUpdate:modelValue":I=>u.value=[I,u.value[1]],onFocus:I=>{var O,$,N,W;b(),c.value=(O=i.value)==null?void 0:O.$el,u.value[0]===u.value[1]&&u.value[1]===d.value&&I.relatedTarget!==(($=s.value)==null?void 0:$.$el)&&((N=i.value)==null||N.$el.blur(),(W=s.value)==null||W.$el.focus())},onBlur:()=>{w(),c.value=void 0},min:d.value,max:u.value[1],position:A.value},{"thumb-label":n["thumb-label"]}),P(FC,{ref:s,"aria-describedby":L.value,focused:v&&c.value===((k=s.value)==null?void 0:k.$el),modelValue:u.value[1],"onUpdate:modelValue":I=>u.value=[u.value[0],I],onFocus:I=>{var O,$,N,W;b(),c.value=(O=s.value)==null?void 0:O.$el,u.value[0]===u.value[1]&&u.value[0]===h.value&&I.relatedTarget!==(($=i.value)==null?void 0:$.$el)&&((N=s.value)==null||N.$el.blur(),(W=i.value)==null||W.$el.focus())},onBlur:()=>{w(),c.value=void 0},min:u.value[0],max:h.value,position:E.value},{"thumb-label":n["thumb-label"]})])}})}),{}}});const PEe=Oe()({name:"VRating",props:{name:String,itemAriaLabel:{type:String,default:"$vuetify.rating.ariaLabel.item"},activeColor:String,color:String,clearable:Boolean,disabled:Boolean,emptyIcon:{type:bt,default:"$ratingEmpty"},fullIcon:{type:bt,default:"$ratingFull"},halfIncrements:Boolean,hover:Boolean,length:{type:[Number,String],default:5},readonly:Boolean,modelValue:{type:[Number,String],default:0},itemLabels:Array,itemLabelPosition:{type:String,default:"top",validator:t=>["top","bottom"].includes(t)},ripple:Boolean,...Ke(),...Ur(),...Pl(),...Tt(),...jt()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{t:r}=uo(),{themeClasses:i}=ln(t),s=Dt(t,"modelValue"),o=re(()=>Wi(parseFloat(s.value),0,+t.length)),a=re(()=>ya(Number(t.length),1)),l=re(()=>a.value.flatMap(g=>t.halfIncrements?[g-.5,g]:[g])),u=Se(-1),c=re(()=>l.value.map(g=>{var E;const x=t.hover&&u.value>-1,_=o.value>=g,m=u.value>=g,b=(x?m:_)?t.fullIcon:t.emptyIcon,w=(E=t.activeColor)!=null?E:t.color,A=_||m?w:t.color;return{isFilled:_,isHovered:m,icon:b,color:A}})),f=re(()=>[0,...l.value].map(g=>{function x(){u.value=g}function _(){u.value=-1}function m(){t.disabled||t.readonly||(s.value=o.value===g&&t.clearable?0:g)}return{onMouseenter:t.hover?x:void 0,onMouseleave:t.hover?_:void 0,onClick:m}})),h=re(()=>{var g;return(g=t.name)!=null?g:`v-rating-${Li()}`});function d(g){var S,C;let{value:x,index:_,showStar:m=!0}=g;const{onMouseenter:v,onMouseleave:b,onClick:w}=f.value[_+1],A=`${h.value}-${String(x).replace(".","-")}`,E={color:(S=c.value[_])==null?void 0:S.color,density:t.density,disabled:t.disabled,icon:(C=c.value[_])==null?void 0:C.icon,ripple:t.ripple,size:t.size,variant:"plain"};return P(mt,null,[P("label",{for:A,class:{"v-rating__item--half":t.halfIncrements&&x%1>0,"v-rating__item--full":t.halfIncrements&&x%1===0},onMouseenter:v,onMouseleave:b,onClick:w},[P("span",{class:"v-rating__hidden"},[r(t.itemAriaLabel,x,t.length)]),m?n.item?n.item({...c.value[_],props:E,value:x,index:_,rating:o.value}):P(Ui,E,null):void 0]),P("input",{class:"v-rating__hidden",name:h.value,id:A,type:"radio",value:x,checked:o.value===x,tabindex:-1,readonly:t.readonly,disabled:t.disabled},null)])}function p(g){return n["item-label"]?n["item-label"](g):g.label?P("span",null,[g.label]):P("span",null,[Ue("\xA0")])}return ze(()=>{var x;const g=!!((x=t.itemLabels)!=null&&x.length)||n["item-label"];return P(t.tag,{class:["v-rating",{"v-rating--hover":t.hover,"v-rating--readonly":t.readonly},i.value,t.class],style:t.style},{default:()=>[P(d,{value:0,index:-1,showStar:!1},null),a.value.map((_,m)=>{var v,b;return P("div",{class:"v-rating__wrapper"},[g&&t.itemLabelPosition==="top"?p({value:_,index:m,label:(v=t.itemLabels)==null?void 0:v[m]}):void 0,P("div",{class:"v-rating__item"},[t.halfIncrements?P(mt,null,[P(d,{value:_-.5,index:m*2},null),P(d,{value:_,index:m*2+1},null)]):P(d,{value:_,index:m},null)]),g&&t.itemLabelPosition==="bottom"?p({value:_,index:m,label:(b=t.itemLabels)==null?void 0:b[m]}):void 0])})]})}),{}}});function YR(t){const n=Math.abs(t);return Math.sign(t)*(n/((1/.501-2)*(1-n)+1))}function jR(t){let{selectedElement:e,containerSize:n,contentSize:r,isRtl:i,currentScrollOffset:s,isHorizontal:o}=t;const a=o?e.clientWidth:e.clientHeight,l=o?e.offsetLeft:e.offsetTop,u=i&&o?r-l-a:l,c=n+s,f=a+u,h=a*.4;return u<=s?s=Math.max(u-h,0):c<=f&&(s=Math.min(s-(c-f-h),r-n)),s}function LEe(t){let{selectedElement:e,containerSize:n,contentSize:r,isRtl:i,isHorizontal:s}=t;const o=s?e.clientWidth:e.clientHeight,a=s?e.offsetLeft:e.offsetTop,l=i&&s?r-a-o/2-n/2:a+o/2-n/2;return Math.min(r-n,Math.max(0,l))}const v6=Symbol.for("vuetify:v-slide-group"),y6=pt({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:v6},nextIcon:{type:bt,default:"$next"},prevIcon:{type:bt,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>typeof t=="boolean"||["always","desktop","mobile"].includes(t)},...Ke(),...Tt(),...jd({selectedClass:"v-slide-group-item--active"})},"v-slide-group"),kC=Oe()({name:"VSlideGroup",props:y6(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isRtl:r}=Dl(),{mobile:i}=bf(),s=Ef(t,t.symbol),o=Se(!1),a=Se(0),l=Se(0),u=Se(0),c=re(()=>t.direction==="horizontal"),{resizeRef:f,contentRect:h}=ka(),{resizeRef:d,contentRect:p}=ka(),g=re(()=>s.selected.value.length?s.items.value.findIndex(W=>W.id===s.selected.value[0]):-1),x=re(()=>s.selected.value.length?s.items.value.findIndex(W=>W.id===s.selected.value[s.selected.value.length-1]):-1);if(wr){let W=-1;He(()=>[s.selected.value,h.value,p.value,c.value],()=>{cancelAnimationFrame(W),W=requestAnimationFrame(()=>{if(h.value&&p.value){const H=c.value?"width":"height";l.value=h.value[H],u.value=p.value[H],o.value=l.value+1<u.value}if(g.value>=0&&d.value){const H=d.value.children[x.value];g.value===0||!o.value?a.value=0:t.centerActive?a.value=LEe({selectedElement:H,containerSize:l.value,contentSize:u.value,isRtl:r.value,isHorizontal:c.value}):o.value&&(a.value=jR({selectedElement:H,containerSize:l.value,contentSize:u.value,isRtl:r.value,currentScrollOffset:a.value,isHorizontal:c.value}))}})})}const _=Se(!1);let m=0,v=0;function b(W){const H=c.value?"clientX":"clientY";v=(r.value&&c.value?-1:1)*a.value,m=W.touches[0][H],_.value=!0}function w(W){if(!o.value)return;const H=c.value?"clientX":"clientY",K=r.value&&c.value?-1:1;a.value=K*(v+m-W.touches[0][H])}function A(W){const H=u.value-l.value;a.value<0||!o.value?a.value=0:a.value>=H&&(a.value=H),_.value=!1}function E(){!f.value||(f.value[c.value?"scrollLeft":"scrollTop"]=0)}const S=Se(!1);function C(W){if(S.value=!0,!(!o.value||!d.value)){for(const H of W.composedPath())for(const K of d.value.children)if(K===H){a.value=jR({selectedElement:K,containerSize:l.value,contentSize:u.value,isRtl:r.value,currentScrollOffset:a.value,isHorizontal:c.value});return}}}function M(W){S.value=!1}function D(W){var H;!S.value&&!(W.relatedTarget&&((H=d.value)==null?void 0:H.contains(W.relatedTarget)))&&L()}function T(W){!d.value||(c.value?W.key==="ArrowRight"?L(r.value?"prev":"next"):W.key==="ArrowLeft"&&L(r.value?"next":"prev"):W.key==="ArrowDown"?L("next"):W.key==="ArrowUp"&&L("prev"),W.key==="Home"?L("first"):W.key==="End"&&L("last"))}function L(W){var H,K,ee,Z,J;if(!!d.value)if(!W)(H=lD(d.value)[0])==null||H.focus();else if(W==="next"){const X=(K=d.value.querySelector(":focus"))==null?void 0:K.nextElementSibling;X?X.focus():L("first")}else if(W==="prev"){const X=(ee=d.value.querySelector(":focus"))==null?void 0:ee.previousElementSibling;X?X.focus():L("last")}else W==="first"?(Z=d.value.firstElementChild)==null||Z.focus():W==="last"&&((J=d.value.lastElementChild)==null||J.focus())}function F(W){const H=a.value+(W==="prev"?-1:1)*l.value;a.value=Wi(H,0,u.value-l.value)}const k=re(()=>{let W=a.value>u.value-l.value?-(u.value-l.value)+YR(u.value-l.value-a.value):-a.value;a.value<=0&&(W=YR(-a.value));const H=r.value&&c.value?-1:1;return{transform:`translate${c.value?"X":"Y"}(${H*W}px)`,transition:_.value?"none":"",willChange:_.value?"transform":""}}),I=re(()=>({next:s.next,prev:s.prev,select:s.select,isSelected:s.isSelected})),O=re(()=>{switch(t.showArrows){case"always":return!0;case"desktop":return!i.value;case!0:return o.value||Math.abs(a.value)>0;case"mobile":return i.value||o.value||Math.abs(a.value)>0;default:return!i.value&&(o.value||Math.abs(a.value)>0)}}),$=re(()=>Math.abs(a.value)>0),N=re(()=>u.value>Math.abs(a.value)+l.value);return ze(()=>P(t.tag,{class:["v-slide-group",{"v-slide-group--vertical":!c.value,"v-slide-group--has-affixes":O.value,"v-slide-group--is-overflowing":o.value},t.class],style:t.style,tabindex:S.value||s.selected.value.length?-1:0,onFocus:D},{default:()=>{var W,H,K,ee,Z;return[O.value&&P("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!$.value}],onClick:()=>F("prev")},[(H=(W=n.prev)==null?void 0:W.call(n,I.value))!=null?H:P(yC,null,{default:()=>[P(yr,{icon:r.value?t.nextIcon:t.prevIcon},null)]})]),P("div",{key:"container",ref:f,class:"v-slide-group__container",onScroll:E},[P("div",{ref:d,class:"v-slide-group__content",style:k.value,onTouchstartPassive:b,onTouchmovePassive:w,onTouchendPassive:A,onFocusin:C,onFocusout:M,onKeydown:T},[(K=n.default)==null?void 0:K.call(n,I.value)])]),O.value&&P("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!N.value}],onClick:()=>F("next")},[(Z=(ee=n.next)==null?void 0:ee.call(n,I.value))!=null?Z:P(yC,null,{default:()=>[P(yr,{icon:r.value?t.prevIcon:t.nextIcon},null)]})])]}})),{selected:s.selected,scrollTo:F,scrollOffset:a,focus:L}}}),FEe=Oe()({name:"VSlideGroupItem",props:{...qd()},emits:{"group:selected":t=>!0},setup(t,e){let{slots:n}=e;const r=Jd(t,v6);return()=>{var i;return(i=n.default)==null?void 0:i.call(n,{isSelected:r.isSelected.value,select:r.select,toggle:r.toggle,selectedClass:r.selectedClass.value})}}});const IEe=Oe()({name:"VSnackbar",props:{multiLine:Boolean,timeout:{type:[Number,String],default:5e3},vertical:Boolean,...fc({location:"bottom"}),...Zd(),...Gn(),...po(),...jt(),...Na(_v({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),{locationStyles:i}=hc(t),{positionClasses:s}=Qd(t),{scopeId:o}=yv(),{themeClasses:a}=ln(t),{colorClasses:l,colorStyles:u,variantClasses:c}=Af(t),{roundedClasses:f}=tr(t),h=Se();He(r,p),He(()=>t.timeout,p),hi(()=>{r.value&&p()});let d=-1;function p(){window.clearTimeout(d);const x=Number(t.timeout);!r.value||x===-1||(d=window.setTimeout(()=>{r.value=!1},x))}function g(){window.clearTimeout(d)}return ze(()=>{const[x]=yl.filterProps(t);return P(yl,Je({ref:h,class:["v-snackbar",{"v-snackbar--active":r.value,"v-snackbar--multi-line":t.multiLine&&!t.vertical,"v-snackbar--vertical":t.vertical},s.value,t.class],style:t.style},x,{modelValue:r.value,"onUpdate:modelValue":_=>r.value=_,contentProps:Je({class:["v-snackbar__wrapper",a.value,l.value,f.value,c.value],style:[i.value,u.value],onPointerenter:g,onPointerleave:p},x.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},o),{default:()=>[Sf(!1,"v-snackbar"),n.default&&P("div",{class:"v-snackbar__content",role:"status","aria-live":"polite"},[n.default()]),n.actions&&P(pn,{defaults:{VBtn:{variant:"text",ripple:!1}}},{default:()=>[P("div",{class:"v-snackbar__actions"},[n.actions()])]})],activator:n.activator})}),Wo({},h)}});const kEe=Oe()({name:"VSwitch",inheritAttrs:!1,props:{indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Ll(),...Ew()},emits:{"update:focused":t=>!0,"update:modelValue":()=>!0,"update:indeterminate":t=>!0},setup(t,e){let{attrs:n,slots:r}=e;const i=Dt(t,"indeterminate"),s=Dt(t,"modelValue"),{loaderClasses:o}=_w(t),{isFocused:a,focus:l,blur:u}=dc(t),c=re(()=>typeof t.loading=="string"&&t.loading!==""?t.loading:t.color),f=Li(),h=re(()=>t.id||`switch-${f}`);function d(){i.value&&(i.value=!1)}return ze(()=>{const[p,g]=wf(n),[x,_]=fi.filterProps(t),[m,v]=Ed.filterProps(t),b=Se();function w(A){var E,S;A.stopPropagation(),A.preventDefault(),(S=(E=b.value)==null?void 0:E.input)==null||S.click()}return P(fi,Je({class:["v-switch",{"v-switch--inset":t.inset},{"v-switch--indeterminate":i.value},o.value,t.class],style:t.style},p,x,{id:h.value,focused:a.value}),{...r,default:A=>{let{id:E,messagesId:S,isDisabled:C,isReadonly:M,isValid:D}=A;return P(Ed,Je({ref:b},m,{modelValue:s.value,"onUpdate:modelValue":[T=>s.value=T,d],id:E.value,"aria-describedby":S.value,type:"checkbox","aria-checked":i.value?"mixed":void 0,disabled:C.value,readonly:M.value,onFocus:l,onBlur:u},g),{...r,default:()=>P("div",{class:"v-switch__track",onClick:w},null),input:T=>{let{textColorClasses:L,textColorStyles:F}=T;return P("div",{class:["v-switch__thumb",L.value],style:F.value},[t.loading&&P(CD,{name:"v-switch",active:!0,color:D.value===!1?void 0:c.value},{default:k=>r.loader?r.loader(k):P(SD,{active:k.isActive,color:k.color,indeterminate:!0,size:"16",width:"2"},null)})])}})}})}),{}}});const REe=Oe()({name:"VSystemBar",props:{color:String,height:[Number,String],window:Boolean,...Ke(),...Gr(),...$d(),...Gn(),...Tt(),...jt()},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{backgroundColorClasses:i,backgroundColorStyles:s}=br(Ne(t,"color")),{elevationClasses:o}=pi(t),{roundedClasses:a}=tr(t),{ssrBootStyles:l}=xf(),u=re(()=>{var f;return(f=t.height)!=null?f:t.window?32:24}),{layoutItemStyles:c}=Xd({id:t.name,order:re(()=>parseInt(t.order,10)),position:Se("top"),layoutSize:u,elementSize:u,active:re(()=>!0),absolute:Ne(t,"absolute")});return ze(()=>P(t.tag,{class:["v-system-bar",{"v-system-bar--window":t.window},r.value,i.value,o.value,a.value,t.class],style:[s.value,c.value,l.value,t.style]},n)),{}}});const _6=Symbol.for("vuetify:v-tabs"),w6=Oe()({name:"VTab",props:{fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Na(t8({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},setup(t,e){let{slots:n,attrs:r}=e;const{textColorClasses:i,textColorStyles:s}=Ti(t,"sliderColor"),o=re(()=>t.direction==="horizontal"),a=Se(!1),l=Se(),u=Se();function c(f){var d,p;let{value:h}=f;if(a.value=h,h){const g=(p=(d=l.value)==null?void 0:d.$el.parentElement)==null?void 0:p.querySelector(".v-tab--selected .v-tab__slider"),x=u.value;if(!g||!x)return;const _=getComputedStyle(g).color,m=g.getBoundingClientRect(),v=x.getBoundingClientRect(),b=o.value?"x":"y",w=o.value?"X":"Y",A=o.value?"right":"bottom",E=o.value?"width":"height",S=m[b],C=v[b],M=S>C?m[A]-v[A]:m[b]-v[b],D=Math.sign(M)>0?o.value?"right":"bottom":Math.sign(M)<0?o.value?"left":"top":"center",L=(Math.abs(M)+(Math.sign(M)<0?m[E]:v[E]))/Math.max(m[E],v[E]),F=m[E]/v[E],k=1.5;Hc(x,{backgroundColor:[_,""],transform:[`translate${w}(${M}px) scale${w}(${F})`,`translate${w}(${M/k}px) scale${w}(${(L-1)/k+1})`,""],transformOrigin:Array(3).fill(D)},{duration:225,easing:Fm})}}return ze(()=>{const[f]=Ui.filterProps(t);return P(Ui,Je({symbol:_6,ref:l,class:["v-tab",t.class],style:t.style,tabindex:a.value?0:-1,role:"tab","aria-selected":String(a.value),active:!1,block:t.fixed,maxWidth:t.fixed?300:void 0,rounded:0},f,r,{"onGroup:selected":c}),{default:()=>{var h,d;return[(d=(h=n.default)==null?void 0:h.call(n))!=null?d:t.text,!t.hideSlider&&P("div",{ref:u,class:["v-tab__slider",i.value],style:s.value},null)]}})}),{}}});function OEe(t){return t?t.map(e=>typeof e=="string"?{title:e,value:e}:e):[]}const BEe=Oe()({name:"VTabs",props:{alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...y6({mandatory:"force"}),...Ur(),...Tt()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),i=re(()=>OEe(t.items)),{densityClasses:s}=Fi(t),{backgroundColorClasses:o,backgroundColorStyles:a}=br(Ne(t,"bgColor"));return Cr({VTab:{color:Ne(t,"color"),direction:Ne(t,"direction"),stacked:Ne(t,"stacked"),fixed:Ne(t,"fixedTabs"),sliderColor:Ne(t,"sliderColor"),hideSlider:Ne(t,"hideSlider")}}),ze(()=>{const[l]=kC.filterProps(t);return P(kC,Je(l,{modelValue:r.value,"onUpdate:modelValue":u=>r.value=u,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},s.value,o.value,t.class],style:[{"--v-tabs-height":et(t.height)},a.value,t.style],role:"tablist",symbol:_6}),{default:()=>[n.default?n.default():i.value.map(u=>P(w6,Je(u,{key:u.title}),null))]})}),{}}});const NEe=Oe()({name:"VTable",props:{fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...Ke(),...Ur(),...Tt(),...jt()},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{densityClasses:i}=Fi(t);return ze(()=>P(t.tag,{class:["v-table",{"v-table--fixed-height":!!t.height,"v-table--fixed-header":t.fixedHeader,"v-table--fixed-footer":t.fixedFooter,"v-table--has-top":!!n.top,"v-table--has-bottom":!!n.bottom,"v-table--hover":t.hover},r.value,i.value,t.class],style:t.style},{default:()=>{var s,o,a;return[(s=n.top)==null?void 0:s.call(n),n.default?P("div",{class:"v-table__wrapper",style:{height:et(t.height)}},[P("table",null,[n.default()])]):(o=n.wrapper)==null?void 0:o.call(n),(a=n.bottom)==null?void 0:a.call(n)]}})),{}}});const VEe=Oe()({name:"VTextarea",directives:{Intersect:dv},inheritAttrs:!1,props:{autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseFloat(t))},maxRows:{type:[Number,String],validator:t=>!isNaN(parseFloat(t))},suffix:String,modelModifiers:Object,...Ll(),...bw()},emits:{"click:control":t=>!0,"mousedown:control":t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,e){let{attrs:n,emit:r,slots:i}=e;const s=Dt(t,"modelValue"),{isFocused:o,focus:a,blur:l}=dc(t),u=re(()=>typeof t.counterValue=="function"?t.counterValue(s.value):(s.value||"").toString().length),c=re(()=>{if(n.maxlength)return n.maxlength;if(!(!t.counter||typeof t.counter!="number"&&typeof t.counter!="string"))return t.counter});function f(C,M){var D,T;!t.autofocus||!C||(T=(D=M[0].target)==null?void 0:D.focus)==null||T.call(D)}const h=Se(),d=Se(),p=Se(""),g=Se(),x=re(()=>o.value||t.persistentPlaceholder);function _(){var C;g.value!==document.activeElement&&((C=g.value)==null||C.focus()),o.value||a()}function m(C){_(),r("click:control",C)}function v(C){r("mousedown:control",C)}function b(C){C.stopPropagation(),_(),En(()=>{s.value="",aD(t["onClick:clear"],C)})}function w(C){var D;const M=C.target;if(s.value=M.value,(D=t.modelModifiers)!=null&&D.trim){const T=[M.selectionStart,M.selectionEnd];En(()=>{M.selectionStart=T[0],M.selectionEnd=T[1]})}}const A=Se();function E(){!t.autoGrow||En(()=>{if(!A.value||!d.value)return;const C=getComputedStyle(A.value),M=getComputedStyle(d.value.$el),D=parseFloat(C.getPropertyValue("--v-field-padding-top"))+parseFloat(C.getPropertyValue("--v-input-padding-top"))+parseFloat(C.getPropertyValue("--v-field-padding-bottom")),T=A.value.scrollHeight,L=parseFloat(C.lineHeight),F=Math.max(parseFloat(t.rows)*L+D,parseFloat(M.getPropertyValue("--v-input-control-height"))),k=parseFloat(t.maxRows)*L+D||1/0;p.value=et(Wi(T!=null?T:0,F,k))})}hi(E),He(s,E),He(()=>t.rows,E),He(()=>t.maxRows,E),He(()=>t.density,E);let S;return He(A,C=>{C?(S=new ResizeObserver(E),S.observe(A.value)):S==null||S.disconnect()}),qi(()=>{S==null||S.disconnect()}),ze(()=>{const C=!!(i.counter||t.counter||t.counterValue),M=!!(C||i.details),[D,T]=wf(n),[{modelValue:L,...F}]=fi.filterProps(t),[k]=MD(t);return P(fi,Je({ref:h,modelValue:s.value,"onUpdate:modelValue":I=>s.value=I,class:["v-textarea v-text-field",{"v-textarea--prefixed":t.prefix,"v-textarea--suffixed":t.suffix,"v-text-field--prefixed":t.prefix,"v-text-field--suffixed":t.suffix,"v-textarea--auto-grow":t.autoGrow,"v-textarea--no-resize":t.noResize||t.autoGrow,"v-text-field--flush-details":["plain","underlined"].includes(t.variant)},t.class],style:t.style},D,F,{focused:o.value}),{...i,default:I=>{let{isDisabled:O,isDirty:$,isReadonly:N,isValid:W}=I;return P(mv,Je({ref:d,style:{"--v-textarea-control-height":p.value},onClick:m,onMousedown:v,"onClick:clear":b,"onClick:prependInner":t["onClick:prependInner"],"onClick:appendInner":t["onClick:appendInner"],role:"textbox"},k,{active:x.value||$.value,dirty:$.value||t.dirty,disabled:O.value,focused:o.value,error:W.value===!1}),{...i,default:H=>{let{props:{class:K,...ee}}=H;return P(mt,null,[t.prefix&&P("span",{class:"v-text-field__prefix"},[t.prefix]),Nt(P("textarea",Je({ref:g,class:K,value:s.value,onInput:w,autofocus:t.autofocus,readonly:N.value,disabled:O.value,placeholder:t.placeholder,rows:t.rows,name:t.name,onFocus:_,onBlur:l},ee,T),null),[[Xi("intersect"),{handler:f},null,{once:!0}]]),t.autoGrow&&Nt(P("textarea",{class:[K,"v-textarea__sizer"],"onUpdate:modelValue":Z=>s.value=Z,ref:A,readonly:!0,"aria-hidden":"true"},null),[[Su,s.value]]),t.suffix&&P("span",{class:"v-text-field__suffix"},[t.suffix])])}})},details:M?I=>{var O;return P(mt,null,[(O=i.details)==null?void 0:O.call(i,I),C&&P(mt,null,[P("span",null,null),P(Sw,{active:t.persistentCounter||o.value,value:u.value,max:c.value},i.counter)])])}:void 0})}),Wo({},h,d,g)}});const zEe=Oe()({name:"VThemeProvider",props:{withBackground:Boolean,...Ke(),...jt(),...Tt()},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t);return()=>{var i;return t.withBackground?P(t.tag,{class:["v-theme-provider",r.value,t.class],style:t.style},{default:()=>{var s;return[(s=n.default)==null?void 0:s.call(n)]}}):(i=n.default)==null?void 0:i.call(n)}}});const GEe=Oe()({name:"VTimeline",props:{align:{type:String,default:"center",validator:t=>["center","start"].includes(t)},direction:{type:String,default:"vertical",validator:t=>["vertical","horizontal"].includes(t)},justify:{type:String,default:"auto",validator:t=>["auto","center"].includes(t)},side:{type:String,validator:t=>t==null||["start","end"].includes(t)},lineInset:{type:[String,Number],default:0},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:t=>["start","end","both"].includes(t)},...Ke(),...Ur(),...Tt(),...jt()},setup(t,e){let{slots:n}=e;const{themeClasses:r}=ln(t),{densityClasses:i}=Fi(t);Cr({VTimelineDivider:{lineColor:Ne(t,"lineColor")},VTimelineItem:{density:Ne(t,"density"),lineInset:Ne(t,"lineInset")}});const s=re(()=>{const a=t.side?t.side:t.density!=="default"?"end":null;return a&&`v-timeline--side-${a}`}),o=re(()=>{const a=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(t.truncateLine){case"both":return a;case"start":return a[0];case"end":return a[1];default:return null}});return ze(()=>P(t.tag,{class:["v-timeline",`v-timeline--${t.direction}`,`v-timeline--align-${t.align}`,`v-timeline--justify-${t.justify}`,o.value,{"v-timeline--inset-line":!!t.lineInset},r.value,i.value,s.value,t.class],style:[{"--v-timeline-line-thickness":et(t.lineThickness)},t.style]},n)),{}}}),UEe=Oe()({name:"VTimelineDivider",props:{dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:bt,iconColor:String,lineColor:String,...Ke(),...Gn(),...Pl(),...Gr()},setup(t,e){let{slots:n}=e;const{sizeClasses:r,sizeStyles:i}=Kd(t,"v-timeline-divider__dot"),{backgroundColorStyles:s,backgroundColorClasses:o}=br(Ne(t,"dotColor")),{roundedClasses:a}=tr(t,"v-timeline-divider__dot"),{elevationClasses:l}=pi(t),{backgroundColorClasses:u,backgroundColorStyles:c}=br(Ne(t,"lineColor"));return ze(()=>P("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":t.fillDot},t.class],style:t.style},[P("div",{class:["v-timeline-divider__before",u.value],style:c.value},null),!t.hideDot&&P("div",{key:"dot",class:["v-timeline-divider__dot",l.value,a.value,r.value],style:i.value},[P("div",{class:["v-timeline-divider__inner-dot",o.value,a.value],style:s.value},[n.default?P(pn,{key:"icon-defaults",disabled:!t.icon,defaults:{VIcon:{color:t.iconColor,icon:t.icon,size:t.size}}},n.default):P(yr,{key:"icon",color:t.iconColor,icon:t.icon,size:t.size},null)])]),P("div",{class:["v-timeline-divider__after",u.value],style:c.value},null)])),{}}}),HEe=Oe()({name:"VTimelineItem",props:{density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:bt,iconColor:String,lineInset:[Number,String],...Ke(),...co(),...Gr(),...Gn(),...Pl(),...Tt()},setup(t,e){let{slots:n}=e;const{dimensionStyles:r}=fo(t),i=Se(0),s=Se();return He(s,o=>{var a,l;!o||(i.value=(l=(a=o.$el.querySelector(".v-timeline-divider__dot"))==null?void 0:a.getBoundingClientRect().width)!=null?l:0)},{flush:"post"}),ze(()=>{var o,a;return P("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":t.fillDot},t.class],style:[{"--v-timeline-dot-size":et(i.value),"--v-timeline-line-inset":t.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${et(t.lineInset)})`:et(0)},t.style]},[P("div",{class:"v-timeline-item__body",style:r.value},[(o=n.default)==null?void 0:o.call(n)]),P(UEe,{ref:s,hideDot:t.hideDot,icon:t.icon,iconColor:t.iconColor,size:t.size,elevation:t.elevation,dotColor:t.dotColor,fillDot:t.fillDot,rounded:t.rounded},{default:n.icon}),t.density!=="compact"&&P("div",{class:"v-timeline-item__opposite"},[!t.hideOpposite&&((a=n.opposite)==null?void 0:a.call(n))])])}),{}}});const WEe=Oe()({name:"VTooltip",props:{id:String,text:String,...Na(_v({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=Dt(t,"modelValue"),{scopeId:i}=yv(),s=Li(),o=re(()=>t.id||`v-tooltip-${s}`),a=Se(),l=re(()=>t.location.split(" ").length>1?t.location:t.location+" center"),u=re(()=>t.origin==="auto"||t.origin==="overlap"||t.origin.split(" ").length>1||t.location.split(" ").length>1?t.origin:t.origin+" center"),c=re(()=>t.transition?t.transition:r.value?"scale-transition":"fade-transition"),f=re(()=>Je({"aria-describedby":o.value},t.activatorProps));return ze(()=>{const[h]=yl.filterProps(t);return P(yl,Je({ref:a,class:["v-tooltip",t.class],style:t.style,id:o.value},h,{modelValue:r.value,"onUpdate:modelValue":d=>r.value=d,transition:c.value,absolute:!0,location:l.value,origin:u.value,persistent:!0,role:"tooltip",activatorProps:f.value,_disableGlobalStack:!0},i),{activator:n.activator,default:function(){var x,_;for(var d=arguments.length,p=new Array(d),g=0;g<d;g++)p[g]=arguments[g];return(_=(x=n.default)==null?void 0:x.call(n,...p))!=null?_:t.text}})}),Wo({},a)}}),$Ee=Oe()({name:"VValidation",props:{...o8()},emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const r=a8(t,"validation");return()=>{var i;return(i=n.default)==null?void 0:i.call(n,r)}}});const XEe=Oe()({name:"VVirtualScrollItem",props:{dynamicHeight:Boolean,...Ke()},emits:{"update:height":t=>!0},setup(t,e){let{emit:n,slots:r}=e;const{resizeRef:i,contentRect:s}=ka();Yu(()=>t.dynamicHeight,()=>{He(()=>{var a;return(a=s.value)==null?void 0:a.height},a=>{a!=null&&n("update:height",a)})});function o(){t.dynamicHeight&&s.value&&n("update:height",s.value.height)}KC(o),ze(()=>{var a;return P("div",{ref:t.dynamicHeight?i:void 0,class:["v-virtual-scroll__item",t.class],style:t.style},[(a=r.default)==null?void 0:a.call(r)])})}}),qR=-1,JR=1,YEe=Oe()({name:"VVirtualScroll",props:{items:{type:Array,default:()=>[]},itemHeight:[Number,String],...Ke(),...co()},setup(t,e){let{slots:n}=e;const r=Se(0),i=Se(t.itemHeight),s=re({get:()=>{var C;return parseInt((C=i.value)!=null?C:0,10)},set(C){i.value=C}}),o=Se(),{resizeRef:a,contentRect:l}=ka();Bo(()=>{a.value=o.value});const u=bf(),c=new Map;let f=ya(t.items.length).map(()=>s.value);const h=re(()=>{var C,M;return Math.max(12,Math.ceil(((M=(C=l.value)==null?void 0:C.height)!=null?M:u.height.value)/s.value*1.7+1))});function d(C,M){s.value=Math.max(s.value,M),f[C]=M,c.set(t.items[C],M)}function p(C){return f.slice(0,C).reduce((M,D)=>M+(D||s.value),0)}function g(C){const M=t.items.length;let D=0,T=0;for(;T<C&&D<M;)T+=f[D++]||s.value;return D-1}let x=0;function _(){if(!o.value||!l.value)return;const C=l.value.height,M=o.value.scrollTop,D=M<x?qR:JR,T=g(M+C/2),L=Math.round(h.value/3);D===qR&&T<=r.value+L*2-1?r.value=Wi(T-L,0,t.items.length):D===JR&&T>=r.value+L*2-1&&(r.value=Wi(T-L,0,t.items.length-h.value)),x=o.value.scrollTop}function m(C){if(!o.value)return;const M=p(C);o.value.scrollTop=M}const v=re(()=>t.items.map((C,M)=>({raw:C,index:M}))),b=re(()=>Math.min(t.items.length,r.value+h.value)),w=re(()=>v.value.slice(r.value,b.value)),A=re(()=>p(r.value)),E=re(()=>p(t.items.length)-p(b.value)),{dimensionStyles:S}=fo(t);return hi(()=>{s.value||(s.value=f.slice(r.value,b.value).reduce((C,M)=>C+M,0)/h.value)}),He(()=>t.items.length,()=>{f=ya(t.items.length).map(()=>s.value),c.forEach((C,M)=>{const D=t.items.indexOf(M);D===-1?c.delete(M):f[D]=C})}),ze(()=>P("div",{ref:o,class:["v-virtual-scroll",t.class],onScroll:_,style:[S.value,t.style]},[P("div",{class:"v-virtual-scroll__container",style:{paddingTop:et(A.value),paddingBottom:et(E.value)}},[w.value.map(C=>P(XEe,{key:C.index,dynamicHeight:!t.itemHeight,"onUpdate:height":M=>d(C.index,M)},{default:()=>{var M;return[(M=n.default)==null?void 0:M.call(n,{item:C.raw,index:C.index})]}}))])])),{scrollToIndex:m}}}),jEe=Object.freeze(Object.defineProperty({__proto__:null,VApp:hxe,VAppBar:Dxe,VAppBarNavIcon:Wxe,VAppBarTitle:Xxe,VAlert:jxe,VAlertTitle:n8,VAutocomplete:HSe,VAvatar:ju,VBadge:WSe,VBanner:$Se,VBannerActions:O8,VBannerText:B8,VBottomNavigation:XSe,VBreadcrumbs:YSe,VBreadcrumbsItem:V8,VBreadcrumbsDivider:N8,VBtn:Ui,VBtnGroup:wC,VBtnToggle:Ixe,VCard:jSe,VCardActions:z8,VCardItem:H8,VCardSubtitle:G8,VCardText:W8,VCardTitle:U8,VCarousel:nAe,VCarouselItem:rAe,VCheckbox:eSe,VCheckboxBtn:Cd,VChip:vv,VChipGroup:nSe,VCode:iAe,VColorPicker:NAe,VCombobox:zAe,VCounter:Sw,VDefaultsProvider:pn,VDialog:GAe,VDivider:h8,VExpansionPanels:HAe,VExpansionPanel:WAe,VExpansionPanelText:s6,VExpansionPanelTitle:i6,VField:mv,VFieldLabel:lg,VFileInput:$Ae,VFooter:XAe,VForm:YAe,VContainer:jAe,VCol:KAe,VRow:rEe,VSpacer:iEe,VHover:sEe,VIcon:yr,VComponentIcon:vC,VSvgIcon:gD,VLigatureIcon:Jbe,VClassIcon:mD,VImg:Yd,VInput:fi,VItemGroup:oEe,VItem:aEe,VKbd:lEe,VLabel:ep,VLayout:uEe,VLayoutItem:cEe,VLazy:fEe,VList:Cw,VListGroup:AC,VListImg:mSe,VListItem:vl,VListItemAction:vSe,VListItemMedia:ySe,VListItemSubtitle:_8,VListItemTitle:w8,VListSubheader:b8,VLocaleProvider:hEe,VMain:dEe,VMenu:Dw,VMessages:i8,VNavigationDrawer:bEe,VNoSsr:xEe,VOverlay:yl,VPagination:AEe,VParallax:CEe,VProgressCircular:SD,VProgressLinear:AD,VRadio:MEe,VRadioGroup:DEe,VRangeSlider:TEe,VRating:PEe,VResponsive:zU,VSelect:VSe,VSelectionControl:Ed,VSelectionControlGroup:u8,VSheet:DC,VSlideGroup:kC,VSlideGroupItem:FEe,VSlider:IC,VSnackbar:IEe,VSwitch:kEe,VSystemBar:REe,VTabs:BEe,VTab:w6,VTable:NEe,VTextarea:VEe,VTextField:uf,VThemeProvider:zEe,VTimeline:GEe,VTimelineItem:HEe,VToolbar:_C,VToolbarTitle:_D,VToolbarItems:$xe,VTooltip:WEe,VValidation:$Ee,VVirtualScroll:YEe,VWindow:j8,VWindowItem:q8,VDialogTransition:vw,VFabTransition:dxe,VDialogBottomTransition:pxe,VDialogTopTransition:gxe,VFadeTransition:yC,VScaleTransition:VU,VScrollXTransition:mxe,VScrollXReverseTransition:vxe,VScrollYTransition:yxe,VScrollYReverseTransition:_xe,VSlideXTransition:wxe,VSlideXReverseTransition:bxe,VSlideYTransition:vD,VSlideYReverseTransition:xxe,VExpandTransition:yw,VExpandXTransition:yD},Symbol.toStringTag,{value:"Module"}));function qEe(t,e){var f,h,d,p;const n=e.modifiers||{},r=e.value,{once:i,immediate:s,...o}=n,a=!Object.keys(o).length,{handler:l,options:u}=typeof r=="object"?r:{handler:r,options:{attributes:(f=o==null?void 0:o.attr)!=null?f:a,characterData:(h=o==null?void 0:o.char)!=null?h:a,childList:(d=o==null?void 0:o.child)!=null?d:a,subtree:(p=o==null?void 0:o.sub)!=null?p:a}},c=new MutationObserver(function(){let g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],x=arguments.length>1?arguments[1]:void 0;l==null||l(g,x),i&&b6(t,e)});s&&(l==null||l([],c)),t._mutate=Object(t._mutate),t._mutate[e.instance.$.uid]={observer:c},c.observe(t,u)}function b6(t,e){var n;!((n=t._mutate)!=null&&n[e.instance.$.uid])||(t._mutate[e.instance.$.uid].observer.disconnect(),delete t._mutate[e.instance.$.uid])}const JEe={mounted:qEe,unmounted:b6};function KEe(t,e){var i,s;const n=e.value,r={passive:!((i=e.modifiers)!=null&&i.active)};window.addEventListener("resize",n,r),t._onResize=Object(t._onResize),t._onResize[e.instance.$.uid]={handler:n,options:r},(s=e.modifiers)!=null&&s.quiet||n()}function ZEe(t,e){var i;if(!((i=t._onResize)!=null&&i[e.instance.$.uid]))return;const{handler:n,options:r}=t._onResize[e.instance.$.uid];window.removeEventListener("resize",n,r),delete t._onResize[e.instance.$.uid]}const QEe={mounted:KEe,unmounted:ZEe};function x6(t,e){var a;const{self:n=!1}=(a=e.modifiers)!=null?a:{},r=e.value,i=typeof r=="object"&&r.options||{passive:!0},s=typeof r=="function"||"handleEvent"in r?r:r.handler,o=n?t:e.arg?document.querySelector(e.arg):window;!o||(o.addEventListener("scroll",s,i),t._onScroll=Object(t._onScroll),t._onScroll[e.instance.$.uid]={handler:s,options:i,target:n?void 0:o})}function S6(t,e){var s;if(!((s=t._onScroll)!=null&&s[e.instance.$.uid]))return;const{handler:n,options:r,target:i=t}=t._onScroll[e.instance.$.uid];i.removeEventListener("scroll",n,r),delete t._onScroll[e.instance.$.uid]}function eCe(t,e){e.value!==e.oldValue&&(S6(t,e),x6(t,e))}const tCe={mounted:x6,unmounted:S6,updated:eCe},nCe=Object.freeze(Object.defineProperty({__proto__:null,ClickOutside:I8,Intersect:dv,Mutate:JEe,Resize:QEe,Ripple:cc,Scroll:tCe,Touch:ID},Symbol.toStringTag,{value:"Module"}));const rCe=OU({ssr:!0,components:jEe,directives:nCe}),wv=l9(J2),iCe=Awe({locale:"de",fallbackLocale:"de",messages:Bwe,silentFallbackWarn:!0,silentTranslationWarn:!0});wv.use(f9());wv.use(e_e);wv.use(rCe);wv.use(iCe);/*! for Performance Testing !*/wv.mount("#app");
